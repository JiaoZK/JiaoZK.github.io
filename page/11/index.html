<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  
    <meta name="keywords" content="jiaozhengkui">
  
  
    <meta name="description" content="焦正奎的博客">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>
    
    焦正奎的博客</title>
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  
    <link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">
  
  <script src="/js/pace.min.js"></script>
</head>
</html>
<body>
<main class="content">
  <section class="jumbotron">
  <div class="video">
    
      <div class="video-frame">
        <img src="/images/ocean/overlay-hero.png" alt="Decorative image frame">
      </div>
    
    <div class="video-media">
      <video playsinline autoplay loop muted data-autoplay poster="/images/ocean/ocean.png" x5-video-player-type="h5">
        <source src="/images/ocean/ocean.mp4" type="video/mp4">
        <source src="/images/ocean/ocean.ogv" type="video/ogg">
        <source src="/images/ocean/ocean.webm" type="video/webm">
        <p>Your user agent does not support the HTML5 Video element.</p>
      </video>
      <div class="video-overlay"></div>
    </div>
    <div class="video-inner text-center text-white">
      <h1><a href="/">焦正奎的博客</a></h1>
      <p>不要怕！不要悔！慢慢来！</p>
      <div><img src="/images/hexo-inverted.svg" class="brand" alt="焦正奎的博客"></div>
    </div>
    <div class="video-learn-more">
      <a class="anchor" href="#landingpage"><i class="fe fe-mouse"></i></a>
    </div>
  </div>
</section>

<div id="landingpage">
  <section class="outer">
    <article class="articles">
      
      <h1 class="page-type-title"></h1>
      
        
          <article id="post-tableview的坑" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

    <div class="article-inner">
        
            <header class="article-header">
                
  
    <h2 itemprop="name">
      <a class="article-title" href="/2015/09/12/tableview的坑/">tableview的坑</a>
    </h2>
  
  




            </header>
            

                
                    <div class="article-meta">
                        <a href="/2015/09/12/tableview的坑/" class="article-date">
  <time datetime="2015-09-12T10:14:18.000Z" itemprop="datePublished">2015-09-12</time>
</a>
                            
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

                    </div>
                    

                        

                                    <div class="article-entry" itemprop="articleBody">
                                        


                                            

                                                
                                                                    <h3 id="header问题"><a href="#header问题" class="headerlink" title="header问题"></a>header问题</h3><ul>
<li>tableview的reloadSections刷新时，如果cell或secitonHeader中有XIB创建的subview，可能会出现frame问题,一会大一会小，但没任何地方更改frame，结论：慎用XIB</li>
<li><a href="https://blog.csdn.net/weixin_33686714/article/details/89615265" target="_blank" rel="noopener">https://blog.csdn.net/weixin_33686714/article/details/89615265</a></li>
</ul>
<h3 id="reloadSection的坑"><a href="#reloadSection的坑" class="headerlink" title="reloadSection的坑"></a>reloadSection的坑</h3><ul>
<li>现象：reloadSections后，再设置P2P或爆品抢购对应的选中tab会闪动。</li>
<li>实验结果：reloadSections时好像不会复用已展示的cell，而是cellA和cellB的循环展示，cellA的scrollViewContentOffset与cellB的scrollViewContentOffset不一致，造成闪动，且scrollViewContentOffset大小没有必然规律</li>
<li>补充：参考 <a href="https://blog.csdn.net/hherima/article/details/84573076" target="_blank" rel="noopener">https://blog.csdn.net/hherima/article/details/84573076</a></li>
</ul>
<h3 id="更新：tableView-reloadData-有跳动"><a href="#更新：tableView-reloadData-有跳动" class="headerlink" title="更新：tableView reloadData 有跳动"></a>更新：tableView reloadData 有跳动</h3><ul>
<li>在iOS 11Self-Sizing自动打开后，contentSize和contentOffset都可能发生改变。可以通过以下方式禁用</li>
<li>tableView.estimatedRowHeight = 0;</li>
<li>tableView.estimatedSectionHeaderHeight = 0;</li>
<li>tableView.estimatedSectionFooterHeight = 0;</li>
</ul>

                                                                        
                                    </div>
                                    <footer class="article-footer">
                                        <a data-url="http://jiaozhengkui.top/2015/09/12/tableview的坑/" data-id="ckd90joma005ixc5198dhxb7f" class="article-share-link">
                                            Share
                                        </a>
                                        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/UI/">UI</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/原创/">原创</a></li></ul>

                                    </footer>

    </div>

    

                

</article>
        
          <article id="post-关于NSArray的几个问题" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

    <div class="article-inner">
        
            <header class="article-header">
                
  
    <h2 itemprop="name">
      <a class="article-title" href="/2015/08/29/关于NSArray的几个问题/">关于NSArray的几个问题</a>
    </h2>
  
  




            </header>
            

                
                    <div class="article-meta">
                        <a href="/2015/08/29/关于NSArray的几个问题/" class="article-date">
  <time datetime="2015-08-29T10:14:18.000Z" itemprop="datePublished">2015-08-29</time>
</a>
                            
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

                    </div>
                    

                        

                                    <div class="article-entry" itemprop="articleBody">
                                        


                                            

                                                
                                                                    <h4 id="数组里可放不同类型，不能放nil，特别注意插入、删除和查找时的越界问题"><a href="#数组里可放不同类型，不能放nil，特别注意插入、删除和查找时的越界问题" class="headerlink" title="数组里可放不同类型，不能放nil，特别注意插入、删除和查找时的越界问题"></a>数组里可放不同类型，不能放nil，特别注意插入、删除和查找时的越界问题</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NSArray &lt;NSString *&gt; *array = @[@&quot;one&quot;，@&quot;two&quot;];</span><br><span class="line">// 此nil为结束标识符不计入数组内</span><br><span class="line">NSArray *arr = [NSArray arrayWithObjects:@1,@&quot;2&quot;, nil];</span><br></pre></td></tr></table></figure>
<h4 id="数组是否有值校验"><a href="#数组是否有值校验" class="headerlink" title="数组是否有值校验"></a>数组是否有值校验</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#define ISARRAYHASVALUE(array)    (array &amp;&amp; [array isKindOfClass:[NSArray class]] &amp;&amp; [array count] &gt; 0)</span><br></pre></td></tr></table></figure>
<h4 id="indexOfObject-与-indexOfObjectIdenticalTo"><a href="#indexOfObject-与-indexOfObjectIdenticalTo" class="headerlink" title="indexOfObject 与 indexOfObjectIdenticalTo"></a>indexOfObject 与 indexOfObjectIdenticalTo</h4><p>答：indexOfObjectIdenticalTo比较内存地址是否相同，indexOfObject比较isEqual方法。<a href="https://stackoverflow.com/questions/3167849/indexofobject-vs-indexofobjectidenticalto" target="_blank" rel="noopener">参考</a></p>
<h4 id="怎么快速剔除数组中相同元素"><a href="#怎么快速剔除数组中相同元素" class="headerlink" title="怎么快速剔除数组中相同元素"></a>怎么快速剔除数组中相同元素</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NSArray *arr = @[@1,@1,@2,@2,@3,@4,@4];</span><br><span class="line">NSSet *set = [NSSet setWithArray:arr];</span><br><span class="line">NSLog(@&quot;%@&quot;,[set allObjects]);</span><br></pre></td></tr></table></figure>
<h4 id="快速过滤"><a href="#快速过滤" class="headerlink" title="快速过滤"></a>快速过滤</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">NSArray *filteredArray = @[@2, @4, @6];</span><br><span class="line">NSArray *dataArray = @[@1,@2,@3,@4,@5,@6,@7];</span><br><span class="line">NSPredicate *filterPredicate = [NSPredicate predicateWithFormat:@&quot;NOT (SELF IN %@)&quot;,filteredArray];</span><br><span class="line">NSLog(@&quot;过滤后：%@&quot;,[dataArray filteredArrayUsingPredicate:filterPredicate]);</span><br></pre></td></tr></table></figure>
<h4 id="for、for-in-还是-enumerateObjectsUsingBlock"><a href="#for、for-in-还是-enumerateObjectsUsingBlock" class="headerlink" title="for、for in 还是 enumerateObjectsUsingBlock"></a>for、for in 还是 enumerateObjectsUsingBlock</h4><p>答：</p>
<ol>
<li>for、 for in 差别不大，线程不安全。随便用</li>
<li>enumerateObjectsUsingBlock是线程安全的<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">NSMutableArray *muArr = @[@0, @1, @2, @3, @4].mutableCopy;</span><br><span class="line">[muArr enumerateObjectsUsingBlock:^(id  _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) &#123;\</span><br><span class="line">if ([obj integerValue] == 2) &#123;</span><br><span class="line">// break; 不能用，如果想要同样效果用*stop = YES;</span><br><span class="line">// *stop = YES;</span><br><span class="line"></span><br><span class="line">// continue不能用，如果想要同样效果用return；</span><br><span class="line">return ;</span><br><span class="line">&#125;</span><br><span class="line">NSLog(@&quot;obj : %@ ,idx : %lu&quot;, obj, (unsigned long)idx);</span><br><span class="line">&#125;];</span><br><span class="line">`</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">NSArray *array = @[@1,@2,@3,@1,@2,@5,@4];</span><br><span class="line">NSArray *sortArr = [array sortedArrayWithOptions:NSSortStable usingComparator:</span><br><span class="line">^NSComparisonResult(id  _Nonnull obj1, id  _Nonnull obj2) &#123;</span><br><span class="line">int value1 = [obj1 intValue];</span><br><span class="line">int value2 = [obj2 intValue];</span><br><span class="line">if (value1 &gt; value2) &#123;</span><br><span class="line">return NSOrderedDescending;</span><br><span class="line">&#125;else if (value1 == value2)&#123;</span><br><span class="line">return NSOrderedSame;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">return NSOrderedAscending;</span><br><span class="line">&#125;</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<h4 id="可变数组不能add和remove，但可以replace"><a href="#可变数组不能add和remove，但可以replace" class="headerlink" title="可变数组不能add和remove，但可以replace"></a>可变数组不能add和remove，但可以replace</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NSMutableArray *muArr = @[@1, @2, @3].mutableCopy;</span><br><span class="line">for (id elem in muArr) &#123;</span><br><span class="line">[muArr removeObject:elem];</span><br><span class="line">&#125;</span><br><span class="line">// Terminating app due to uncaught exception &apos;NSGenericException&apos;, reason: &apos;*** Collection &lt;__NSArrayM: 0x600002052310&gt; was mutated while being enumerated.&apos;</span><br></pre></td></tr></table></figure>
<h4 id="快速取得最小值"><a href="#快速取得最小值" class="headerlink" title="快速取得最小值"></a>快速取得最小值</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">NSMutableArray* array = [NSMutableArray array];</span><br><span class="line">for (int i = 0; i &lt; 10; i++) &#123;</span><br><span class="line">CGFloat num = arc4random() % 100 + 1; </span><br><span class="line">[array addObject:[NSNumber numberWithFloat:num]];</span><br><span class="line">&#125;</span><br><span class="line">CGFloat maxValue = [[array valueForKeyPath:@&quot;@max.floatValue&quot;] floatValue];</span><br><span class="line">CGFloat minValue = [[array valueForKeyPath:@&quot;@min.floatValue&quot;] floatValue];</span><br><span class="line"></span><br><span class="line">/*min、max是NSArray的私有属性，通过.语法是拿不到的，会报错的。类似这种私有属性还有@”@avg.floatValue” (获取平均值)，@”@count.floatValue”(获取数组大小) @&quot;@sum.floatValue&quot;（求和）*/</span><br></pre></td></tr></table></figure>

                                                                        
                                    </div>
                                    <footer class="article-footer">
                                        <a data-url="http://jiaozhengkui.top/2015/08/29/关于NSArray的几个问题/" data-id="ckd90jomi0069xc514odbi7du" class="article-share-link">
                                            Share
                                        </a>
                                        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/原创/">原创</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/基础/">基础</a></li></ul>

                                    </footer>

    </div>

    

                

</article>
        
          <article id="post-Method-Swizzling" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

    <div class="article-inner">
        
            <header class="article-header">
                
  
    <h2 itemprop="name">
      <a class="article-title" href="/2015/08/17/Method-Swizzling/">Method Swizzling</a>
    </h2>
  
  




            </header>
            

                
                    <div class="article-meta">
                        <a href="/2015/08/17/Method-Swizzling/" class="article-date">
  <time datetime="2015-08-17T10:14:18.000Z" itemprop="datePublished">2015-08-17</time>
</a>
                            
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

                    </div>
                    

                        

                                    <div class="article-entry" itemprop="articleBody">
                                        


                                            

                                                
                                                                    <h3 id="Method-Swizzling"><a href="#Method-Swizzling" class="headerlink" title="Method Swizzling"></a>Method Swizzling</h3><ul>
<li>参考：</li>
<li><a href="https://blog.csdn.net/yiyaaixuexi/article/details/9374411" target="_blank" rel="noopener">https://blog.csdn.net/yiyaaixuexi/article/details/9374411</a></li>
<li><a href="https://nshipster.com/method-swizzling/" target="_blank" rel="noopener">https://nshipster.com/method-swizzling/</a></li>
<li><a href="https://stackoverflow.com/questions/5371601/how-do-i-implement-method-swizzling" target="_blank" rel="noopener">https://stackoverflow.com/questions/5371601/how-do-i-implement-method-swizzling</a></li>
<li>建议阅读：<a href="https://stackoverflow.com/questions/5339276/what-are-the-dangers-of-method-swizzling-in-objective-c" target="_blank" rel="noopener">https://stackoverflow.com/questions/5339276/what-are-the-dangers-of-method-swizzling-in-objective-c</a></li>
</ul>
<ul>
<li><p>方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">static void SwizzleMethod(Class cls, SEL ori, SEL rep) &#123;</span><br><span class="line">Method oriMethod = class_getInstanceMethod(cls, ori);</span><br><span class="line">Method repMethod = class_getInstanceMethod(cls, rep);</span><br><span class="line"></span><br><span class="line">BOOL flag = class_addMethod(cls, ori, method_getImplementation(repMethod), method_getTypeEncoding(repMethod));</span><br><span class="line"></span><br><span class="line">if (flag) &#123;</span><br><span class="line">class_replaceMethod(cls, rep, method_getImplementation(oriMethod), method_getTypeEncoding(oriMethod));</span><br><span class="line">&#125; else &#123;</span><br><span class="line">method_exchangeImplementations(oriMethod, repMethod);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>测试用例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">@interface Person : NSObject</span><br><span class="line">+ (void)sleep;</span><br><span class="line">- (void)walk;</span><br><span class="line">@end</span><br><span class="line">@implementation Person</span><br><span class="line">+ (void)sleep &#123;</span><br><span class="line">NSLog(@&quot;睡觉&quot;);</span><br><span class="line">&#125;</span><br><span class="line">- (void)walk &#123;</span><br><span class="line">NSLog(@&quot;去哪里？&quot;);</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">// hook</span><br><span class="line">@interface Person (china)</span><br><span class="line">@end</span><br><span class="line">@implementation Person (china)</span><br><span class="line">+ (void)load &#123;</span><br><span class="line">static dispatch_once_t onceToken;</span><br><span class="line">dispatch_once(&amp;onceToken, ^&#123;</span><br><span class="line">// hook实例方法</span><br><span class="line">SwizzleMethod([self class], @selector(jzk_walk), @selector(walk));</span><br><span class="line">// hook类方法</span><br><span class="line">SwizzleMethod(object_getClass([self class]), @selector(sleep), @selector(jzk_sleep));</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)jzk_walk &#123;</span><br><span class="line">[self jzk_walk];</span><br><span class="line">NSLog(@&quot;当然是学校&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">+ (void)jzk_sleep &#123;</span><br><span class="line">NSLog(@&quot;起来嗨&quot;);</span><br><span class="line">// 注意hook类方法直接用self就好</span><br><span class="line">[self jzk_sleep];</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">起来嗨</span><br><span class="line">睡觉</span><br><span class="line">去哪里？</span><br><span class="line">当然是学校</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>
</li>
</ul>

                                                                        
                                    </div>
                                    <footer class="article-footer">
                                        <a data-url="http://jiaozhengkui.top/2015/08/17/Method-Swizzling/" data-id="ckd90jokw002axc51nl8dk21u" class="article-share-link">
                                            Share
                                        </a>
                                        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/原创/">原创</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/基础/">基础</a></li></ul>

                                    </footer>

    </div>

    

                

</article>
        
          <article id="post-Category和关联对象的使用" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

    <div class="article-inner">
        
            <header class="article-header">
                
  
    <h2 itemprop="name">
      <a class="article-title" href="/2015/08/02/Category和关联对象的使用/">Category和关联对象的使用</a>
    </h2>
  
  




            </header>
            

                
                    <div class="article-meta">
                        <a href="/2015/08/02/Category和关联对象的使用/" class="article-date">
  <time datetime="2015-08-02T10:14:18.000Z" itemprop="datePublished">2015-08-02</time>
</a>
                            
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

                    </div>
                    

                        

                                    <div class="article-entry" itemprop="articleBody">
                                        


                                            

                                                
                                                                    <h3 id="Category"><a href="#Category" class="headerlink" title="Category"></a>Category</h3><p>&emsp;&emsp;个人觉得Category才是OC最好玩的地方，如果不用category我们能怎么办？继承！对最好的方式就是继承，但继承的问题总所周知：层级关系复杂，使用不便，最主要的还是麻烦！category就很爽了！</p>
<h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><p>&emsp;&emsp;分类就是对一个类的功能进行扩展,利用OC的动态运行时分配机制，Category提供了一种比继承更为简洁的方法来对类进行扩展，无需创建对象类的子类就能为现有的类添加新的方法，可以为任何已经存在的类添加方法，包括系统框架UIKit等</p>
<ul>
<li>优点</li>
<li>分散功能，可将体积比较大的类拆分成几个小类，减少依赖提高复用率</li>
<li>方便代码的管理。将同类功能放到同一category里面是一个非常不错的选择，UIKit也是这么做的</li>
<li>减少继承，编码核心就是能用组合用组合，实在没办法再用继承</li>
<li>声明私有方法</li>
<li>缺点</li>
<li>同名方法有可能被覆盖掉！处理办法是增加前缀，注意OC里主要通过前缀来代替包，而且apple声称拥有任何两个字母的使用权，开发者最好使用三个或三个以上字母作为前缀</li>
<li>由于功能分散，非常考验命名</li>
<li>多人协作时，最好将同一个类的category放到同一文件夹，增加冲突可能性</li>
</ul>
<p>&emsp;&emsp;category和extension的区别</p>
<ul>
<li>extension固定为 ClassName()，外部引用不到 ； category需要起个好名字，外部能引用到</li>
<li>extension 能直接增加成员变量， category需要借助于关联对象</li>
<li>extension 只能在.m文件中，用于隐藏相关信息；category可单独一个文件</li>
</ul>
<h4 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h4><p>&emsp;&emsp;新建category: new file -&gt; Object-C File -&gt; File Type -&gt; Category</p>
<h5 id="1-实例：给NSMutableArray添加安全方法"><a href="#1-实例：给NSMutableArray添加安全方法" class="headerlink" title="1. 实例：给NSMutableArray添加安全方法"></a>1. 实例：给NSMutableArray添加安全方法</h5><ul>
<li><p>.h 文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@interface NSMutableArray (Safely)</span><br><span class="line"></span><br><span class="line">- (void)addObjectSafely:(id)anObject;</span><br><span class="line">- (void)insertObjectSafely:(id)anObject atIndex:(NSUInteger)index;</span><br><span class="line">- (void)removeObjectAtIndexSafely:(NSUInteger)index;</span><br><span class="line">- (void)replaceObjectAtIndexSafely:(NSUInteger)index withObject:(id)anObject;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
</li>
<li><p>.m文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">@implementation NSMutableArray (Safely)</span><br><span class="line"></span><br><span class="line">- (void)addObjectSafely:(id)anObject &#123;</span><br><span class="line">if (nil != anObject) &#123;</span><br><span class="line">[self addObject:anObject];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">- (void)insertObjectSafely:(id)anObject atIndex:(NSUInteger)index &#123;</span><br><span class="line">if (nil != anObject &amp;&amp; index &lt; [self count]) &#123;</span><br><span class="line">[self insertObject:anObject atIndex:index];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">- (void)removeObjectAtIndexSafely:(NSUInteger)index &#123;</span><br><span class="line">if (index &lt; [self count]) &#123;</span><br><span class="line">[self removeObjectAtIndex:index];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)replaceObjectAtIndexSafely:(NSUInteger)index withObject:(id)anObject &#123;</span><br><span class="line">if (nil != anObject &amp;&amp; index &lt; [self count]) &#123;</span><br><span class="line">[self replaceObjectAtIndex:index withObject:anObject];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="2-声明私有方法"><a href="#2-声明私有方法" class="headerlink" title="2. 声明私有方法"></a>2. 声明私有方法</h5><ul>
<li><p>原文件 MyClass</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// .h文件</span><br><span class="line">@interface MyClass : NSObject</span><br><span class="line">// 注意原来类中没有暴露somePrivateMethod方法</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">// .m文件</span><br><span class="line">@implementation MyClass</span><br><span class="line"></span><br><span class="line">- (void)somePrivateMethod &#123;</span><br><span class="line">NSLog(@&quot;就是不想让你用！&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
</li>
<li><p>category暴露私有方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// .h文件</span><br><span class="line">@interface MyClass (Public)</span><br><span class="line">// 暴露somePrivateMethod方法，注意不要在category的m文件实现。实现就覆盖了</span><br><span class="line">- (void)somePrivateMethod;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">// .m文件</span><br><span class="line">@implementation MyClass (Public)</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用私有方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 注意声明私有方法时必须两个都要引入</span><br><span class="line">#import &quot;MyClass.h&quot;</span><br><span class="line">#import &quot;MyClass+Public.h&quot;</span><br><span class="line"></span><br><span class="line">@implementation ViewController</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">[super viewDidLoad];</span><br><span class="line">MyClass *my = [[MyClass alloc] init];</span><br><span class="line">[my somePrivateMethod];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="关联对象"><a href="#关联对象" class="headerlink" title="关联对象"></a>关联对象</h3><p>&emsp;&emsp;为什么把关联对象放到这里写？因为关联对象一般都在category里；更因为category可以给原类增加方法，关联对象正好可以给原来增加实例变量，参考：<a href="https://stackoverflow.com/questions/8733104/objective-c-property-instance-variable-in-category" target="_blank" rel="noopener">https://stackoverflow.com/questions/8733104/objective-c-property-instance-variable-in-category</a></p>
<h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><ul>
<li><p>.h文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@interface MyClass (Public)</span><br><span class="line"></span><br><span class="line">@property (copy, nonatomic) NSString *someProperty;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
</li>
<li><p>.m文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// 注意引入runtime</span><br><span class="line">#import &lt;objc/runtime.h&gt;</span><br><span class="line"></span><br><span class="line">static NSString *kAssociatedObjectKey = @&quot;kAssociatedObjectKey&quot;;</span><br><span class="line"></span><br><span class="line">@implementation MyClass (Public)</span><br><span class="line"></span><br><span class="line">// setter和getter必须都要写</span><br><span class="line">// setter方法</span><br><span class="line">- (void)setSomeProperty:(NSString*)propertyValue &#123;</span><br><span class="line">/*</span><br><span class="line">OBJC_ASSOCIATION_ASSIGN            //@property(assign)。</span><br><span class="line">OBJC_ASSOCIATION_RETAIN_NONATOMIC  //@property(strong, nonatomic)。</span><br><span class="line">OBJC_ASSOCIATION_COPY_NONATOMIC    //@property(copy, nonatomic)。</span><br><span class="line">OBJC_ASSOCIATION_RETAIN            //@property(strong,atomic)。</span><br><span class="line">OBJC_ASSOCIATION_COPY              //@property(copy, atomic)。</span><br><span class="line">*/</span><br><span class="line">// 注意propertyValue只能给类，int、NSInterger、Bool时需要转成NSNumber</span><br><span class="line">objc_setAssociatedObject(self, &amp;kAssociatedObjectKey, propertyValue, OBJC_ASSOCIATION_RETAIN_NONATOMIC);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// getter</span><br><span class="line">- (NSString *)someProperty &#123;</span><br><span class="line">// int、NSInterger、Bool时需要将NSNumber转成对应类型</span><br><span class="line">NSString *value = objc_getAssociatedObject(self, &amp;kAssociatedObjectKey);</span><br><span class="line">return value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
</li>
</ul>

                                                                        
                                    </div>
                                    <footer class="article-footer">
                                        <a data-url="http://jiaozhengkui.top/2015/08/02/Category和关联对象的使用/" data-id="ckd90jokb000lxc51922swwqx" class="article-share-link">
                                            Share
                                        </a>
                                        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/原创/">原创</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/基础/">基础</a></li></ul>

                                    </footer>

    </div>

    

                

</article>
        
          <article id="post-小强升职记" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

    <div class="article-inner">
        
            <header class="article-header">
                
  
    <h2 itemprop="name">
      <a class="article-title" href="/2015/07/31/小强升职记/">小强升职记</a>
    </h2>
  
  




            </header>
            

                
                    <div class="article-meta">
                        <a href="/2015/07/31/小强升职记/" class="article-date">
  <time datetime="2015-07-31T10:14:18.000Z" itemprop="datePublished">2015-07-31</time>
</a>
                            
  <div class="article-category">
    <a class="article-category-link" href="/categories/读书/">读书</a>
  </div>

                    </div>
                    

                        

                                    <div class="article-entry" itemprop="articleBody">
                                        


                                            

                                                
                                                                    <ul>
<li>成功的关键在于构建自己的核心</li>
<li>成熟意味着什么？意味着确定的价值观、顺畅的时间管理、以及属于自己的处世哲学</li>
</ul>
<h3 id="1、寻找种子"><a href="#1、寻找种子" class="headerlink" title="1、寻找种子"></a>1、寻找种子</h3><ul>
<li>你真的很忙吗？记录时间日志、分类整理、原因分析、总结优化（工作、学习、娱乐同样重要,提高效率而不是做苦行僧）</li>
<li>时间黑洞：自己都不知道自己的时间花到哪去了，也就是我经常写的nothing，原因是：大脑不善于记忆，而善于创造性思维，只有对大脑形成强烈刺激的事情才会被存储下来。因此那些极具规律性、比较枯燥、或者目的性不强、没有主动性的事情，将很容易被遗忘。解决方案：每个一个小时写出下一个小时计划要做的事情，一个小时结束之后记录下结果，坚持一整天！慢慢来</li>
<li>衡量一件事是不是有意义，主要是看我们投入时间后是否有预期的产出！达到了预期就是有意义的，没达到自然是没意义的！有点意思，举例：比起每次玩完游戏就后悔，更应该比较的应该是计划做什么，结果是什么，应不应该后悔？</li>
<li>注意力被打断之后，如果想要重新集中注意力至少需要15分钟；而如果思路被打断，那可能永远都想不到了。。。所以要勇于“拒绝”</li>
<li>任务处理：</li>
<li>A、将所有的任务放入工作篮，不论是谁什么时候交给我的任务，统统放进工作篮里；</li>
<li>B、将可以置之不理的任务清除掉，将必须在某天处理或者必须转交别人处理的任务拿出来，将那些可以在两分钟之内完成的任务立即完成；</li>
<li>C，将需要在特定日期处理的事情写进日程表，将需要别人处理的事情立即转交并且设定到期提醒，将需要现在处理的事情摆在办公桌上；</li>
<li>D，在自己最高效的时间段，做最重要的事情，其他事情也要做合理的安排</li>
<li>提高工作效率的方法：</li>
<li>A、每天早晨别一上班就急着投入工作，先看看今天的工作重点是什么，哪些事情是重要并且紧迫的，将这些事情安排在你的高效时间段完成；</li>
<li>B、回顾你需要发布或者呈送上司的资料，不可能第一次就做的尽善尽美，不要吝啬时间！</li>
<li>C、看新闻用RSS，也可用广告拦截器，将注意力集中在新闻上，而不是铺天盖地的广告超链接；</li>
<li>D、减少检查邮件的次数，每天两次足够了，并且应该注意，往往在上网聊天或者无所事事的时候就会“习惯性”的检查邮件，因此应该找些事情来分散自己的注意力；</li>
<li><p>E、能休息的时候尽量休息，保持自己的精力，游戏!=休息、做别的!=休息、真正的休息就是：大脑放空，冥想或睡眠</p>
</li>
<li><p>价值观没有对错，也不是记忆，更不是一成不变的，而是要不断地从经验中去提炼！可以呀借助心理学的问答测试工具！！！写在卡片上，放到触目可见的地方，不断地巩固和修正，这很重要！</p>
</li>
</ul>
<h3 id="2、让种子发芽"><a href="#2、让种子发芽" class="headerlink" title="2、让种子发芽"></a>2、让种子发芽</h3><ul>
<li>四象限：很多人经常会被假象迷惑，认为“紧急”的就是“重要”的，其实“紧急”和“重要”一点关系都没有！</li>
<li>重要且紧急。必须马上处理，但真的有这么多重要且紧急的事情吗？</li>
<li>重要但不紧急。分解任务，制定计划，按部就班，绝不拖延，思考怎样避免它进入第一象限？</li>
<li>不重要但紧急。能不做就不做，或交给别人，思考如果尽量减少第三象限的事务？</li>
<li>不重要且不紧急。尽量别做，应该思考我们工作中是否有必要进入这个象限？</li>
<li>标签划分事务：A，先“轻重”，给所有任务以职业价值观为标准标出“重要”或“不重要”；B，再“缓急”，给所有任务以截止日期标出“紧急”或“不紧急”；C，最后按照自己的意愿给所有任务标出“高”“中”“低”三种优先级</li>
<li>走出第三象限（不重要且紧急）：其实就是推脱，哪怕暂时的推脱！当然，推脱也是讲究技巧的</li>
<li>第二象限工作法（重要但不紧急）：应该将自己的主要精力集中在解决重要但不紧急的事务，平时制定的工作计划和工作目标都是相对于第二象限来说的！</li>
<li>进行目标描述和任务分解的好处：项目分解做细，有计划更全面，知道现在在哪，逐步减轻压力和提升自信，及时发现问题并处理优化</li>
<li>时间管理三大杀手：拖延，犹豫不决，目标不明确</li>
<li>时间管理并不是追求在1个小时内能做3件或5件事情，时间管理的目的应该是充分利用时间来创造最大的价值</li>
<li>要有耐心，慢慢来！</li>
<li>找到最重要的事，集中精力，拿下它！</li>
<li>下一步行动是什么？怎么做？找出下一步行动的秘诀：A，动词开头；B，内容清晰；C，描述结果；D，设定开始时间、周期、最后期限；例如：早上9点带上做好的计划书在会议室开始讨论营销计划，2小时内说服与会者认同我的营销方案！</li>
<li>学习使用流程图之类的工具，先想好怎么做，做的时候就很简单了！一开始不妨做完一步，再想下一步是什么，怎么做；等以后熟练了再整体去想整个的流程步骤是什么！</li>
<li>衣柜整理法</li>
<li>收集一切我们注意的事情：集中处理某一件事的时候，有其他的事就记上，回头再处理！收集工具应该越少越好，随手能拿到，还有定期清理收集篮</li>
<li>加工处理后，确定它们的实质以及解决方法</li>
<li>处理收集篮原则：A，从最上面一项开始处理；B，一次只处理一件事；C，永远不要再放回收集篮；</li>
<li>不可执行事务：A，垃圾 -&gt; 丢弃； B，将来某时或也许的事 ；C，参考资料 -&gt; 分类归档</li>
<li>可执行事务：2分钟能搞定的 -&gt; 立即去做；B，需要多个步骤搞定的项目；C，指派给别人；D，特定时间做的事 -&gt; 写入日程表；E，普通待办事项</li>
<li>把它们列为我们的行动选择方案</li>
<li>行动</li>
<li>定期组织整理得出结论</li>
</ul>
<h3 id="3、生长出主干和枝丫"><a href="#3、生长出主干和枝丫" class="headerlink" title="3、生长出主干和枝丫"></a>3、生长出主干和枝丫</h3><ul>
<li>我们不但要设定目标，而且要强有力地执行它，一般人达不成自己的目标原因：A，设定了不可达成的目标；B，没有将目标分解为计划；C，放任偶尔的失败；D，没有写下来；E，没有及时修正目标；F，没有坚持行动</li>
<li>实现目标第一步，正确描述目标，是否符合smart原则？</li>
<li>实现目标的关键是将目标转变成计划：A，写出你的目标；B，为什么要达成此目标，最主要的理由写在最前面；C，我为什么可以达成此目标，首先要说服自己一定可以达成这个目标；D，哪些个人、团队、组织对我达成这个目标有帮助？没有一个人的成功是靠自己一个人完成的；E，这个目标要在多长时间内完成？过短或过长都是没意义的</li>
<li>提高执行力：A，找到最大的障碍，第一个就去解除这个障碍；B，写下来！一定要写下来！C，拒绝第一次失败，面对失败我们要，重视失败分析原因和以变化应对变化</li>
<li>目标应该是条铁链而不是铁砂，可以按六个高度原则（原则 &gt; 愿景 &gt; 目标 &gt; 责任范围 &gt; 任务 &gt; 下一步行动）设定目标</li>
<li>不要每天都做白日梦！只有从一块块砖头开始，一步步的才能达成目标；</li>
</ul>

                                                                        
                                    </div>
                                    <footer class="article-footer">
                                        <a data-url="http://jiaozhengkui.top/2015/07/31/小强升职记/" data-id="ckd90jona008kxc51ejk0mo4s" class="article-share-link">
                                            Share
                                        </a>
                                        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/原创/">原创</a></li></ul>

                                    </footer>

    </div>

    

                

</article>
        
          <article id="post-UIScrollView轮播图" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

    <div class="article-inner">
        
            <header class="article-header">
                
  
    <h2 itemprop="name">
      <a class="article-title" href="/2015/07/01/UIScrollView轮播图/">UIScrollView轮播图</a>
    </h2>
  
  




            </header>
            

                
                    <div class="article-meta">
                        <a href="/2015/07/01/UIScrollView轮播图/" class="article-date">
  <time datetime="2015-07-01T10:14:18.000Z" itemprop="datePublished">2015-07-01</time>
</a>
                            
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

                    </div>
                    

                        

                                    <div class="article-entry" itemprop="articleBody">
                                        


                                            

                                                
                                                                    <ul>
<li>原理: 使用左中右三个imageview，每次循环完就强制滚到中间ImageView，同时刷新左中右三个imageview；代码如下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;ZKAutoScrollPicture.h&quot;</span><br><span class="line"></span><br><span class="line">@interface ZKAutoScrollPicture ()&lt;UIScrollViewDelegate&gt;</span><br><span class="line"></span><br><span class="line">@property (nonatomic, retain) UIScrollView *scrollView;</span><br><span class="line">@property (nonatomic, retain) UIImageView *leftImageView;</span><br><span class="line">@property (nonatomic, retain) UIImageView *centerImageView;</span><br><span class="line">@property (nonatomic, retain) UIImageView *rightImageView;</span><br><span class="line">@property (nonatomic, retain) UIPageControl *pageControl;</span><br><span class="line">@property (nonatomic, copy) NSArray&lt;UIImage *&gt; *images;</span><br><span class="line">@property (nonatomic, assign) NSUInteger currentImageIndex;//当前图片索引</span><br><span class="line">@property (nonatomic, retain) NSTimer *timer;</span><br><span class="line">@property (nonatomic, assign) NSTimeInterval timeInterval;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation ZKAutoScrollPicture</span><br><span class="line"></span><br><span class="line">- (instancetype)initWithFrame:(CGRect)frame</span><br><span class="line">timeInterval:(NSTimeInterval)interval</span><br><span class="line">images:(NSArray&lt;UIImage *&gt; *)images&#123;</span><br><span class="line">self = [super initWithFrame:frame];</span><br><span class="line">if (self) &#123;</span><br><span class="line">self.images = images;</span><br><span class="line">self.timeInterval = interval;</span><br><span class="line">[self startTimer];</span><br><span class="line">[self setupWithFrame:frame];</span><br><span class="line">&#125;</span><br><span class="line">return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)setImages:(NSArray&lt;UIImage *&gt; *)images &#123;</span><br><span class="line">_images = images;</span><br><span class="line">if (images.count == 0) &#123;</span><br><span class="line">[self stopTimer];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)setTimeInterval:(NSTimeInterval)timeInterval &#123;</span><br><span class="line">if (timeInterval &lt;= 0) &#123;</span><br><span class="line">[self stopTimer];</span><br><span class="line">_timeInterval = 0;</span><br><span class="line">&#125;else &#123;</span><br><span class="line">_timeInterval = timeInterval;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)setupWithFrame:(CGRect)frame &#123;</span><br><span class="line">CGFloat imageWidth = frame.size.width;</span><br><span class="line">CGFloat imageHeight = frame.size.height;</span><br><span class="line"></span><br><span class="line">_currentImageIndex = 0;</span><br><span class="line">// pageControl</span><br><span class="line">_pageControl=[[UIPageControl alloc]init];</span><br><span class="line">CGSize size= [_pageControl sizeForNumberOfPages:_images.count];</span><br><span class="line">_pageControl.bounds=CGRectMake(0, 0, size.width, size.height);</span><br><span class="line">_pageControl.center=CGPointMake(imageWidth / 2, imageHeight - 10);</span><br><span class="line">_pageControl.pageIndicatorTintColor=[UIColor blackColor];</span><br><span class="line">_pageControl.currentPageIndicatorTintColor=[UIColor redColor];</span><br><span class="line">_pageControl.numberOfPages = _images.count;</span><br><span class="line"></span><br><span class="line">// 初始化左中右三个imageview</span><br><span class="line">_leftImageView=[[UIImageView alloc]initWithFrame:CGRectMake(0, 0, imageWidth, imageHeight)];</span><br><span class="line">_centerImageView=[[UIImageView alloc]initWithFrame:CGRectMake(imageWidth, 0, imageWidth, imageHeight)];</span><br><span class="line">_rightImageView=[[UIImageView alloc]initWithFrame:CGRectMake(2*imageWidth, 0, imageWidth, imageHeight)];</span><br><span class="line">// scrollview</span><br><span class="line">_scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, imageWidth, imageHeight)];</span><br><span class="line">_scrollView.delegate = self;</span><br><span class="line">_scrollView.showsVerticalScrollIndicator = NO;</span><br><span class="line">_scrollView.showsHorizontalScrollIndicator = NO;</span><br><span class="line">_scrollView.pagingEnabled = YES;</span><br><span class="line">//</span><br><span class="line">[_scrollView addSubview:_leftImageView];</span><br><span class="line">[_scrollView addSubview:_centerImageView];</span><br><span class="line">[_scrollView addSubview:_rightImageView];</span><br><span class="line">_scrollView.contentSize = CGSizeMake(3*imageWidth, imageHeight);</span><br><span class="line"></span><br><span class="line">[self addSubview:_scrollView];</span><br><span class="line">[self addSubview:_pageControl];</span><br><span class="line"></span><br><span class="line">// 设置默认显示中间的</span><br><span class="line">[self resetScrollViewContentOffset];</span><br><span class="line">[self refreshImageByOffsetX:imageWidth];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView&#123;</span><br><span class="line">//重新加载图片</span><br><span class="line">[self refreshImageByOffsetX:scrollView.contentOffset.x];</span><br><span class="line">[self resetScrollViewContentOffset];</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;scrollViewDidEndDecelerating offsetX:%f&quot;,_scrollView.contentOffset.x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)resetScrollViewContentOffset &#123;</span><br><span class="line">//永远移动到centerImageView</span><br><span class="line">[_scrollView setContentOffset:CGPointMake(self.frame.size.width, 0) animated:NO];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark 重新加载图片</span><br><span class="line">-(void)refreshImageByOffsetX:(CGFloat)offsetX &#123;</span><br><span class="line">CGFloat width = self.frame.size.width;</span><br><span class="line">NSUInteger totalCount = _images.count;</span><br><span class="line">if (offsetX &gt; width) &#123; //向右滑动</span><br><span class="line">_currentImageIndex = (_currentImageIndex + 1) % totalCount;</span><br><span class="line">&#125;else if(offsetX &lt; width)&#123; //向左滑动</span><br><span class="line">_currentImageIndex = (_currentImageIndex + totalCount - 1) % totalCount;</span><br><span class="line">&#125;</span><br><span class="line">[self refreshImageAndPage];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)refreshImageAndPage &#123;</span><br><span class="line">NSUInteger totalCount = _images.count;</span><br><span class="line">_centerImageView.image = _images[_currentImageIndex];</span><br><span class="line">//重新设置左右图片</span><br><span class="line">NSUInteger leftIndex = (_currentImageIndex + totalCount - 1) % totalCount;</span><br><span class="line">NSUInteger rightIndex = (_currentImageIndex + 1) % totalCount;</span><br><span class="line">_leftImageView.image = _images[leftIndex];</span><br><span class="line">_rightImageView.image = _images[rightIndex];</span><br><span class="line">//设置分页</span><br><span class="line">_pageControl.currentPage = _currentImageIndex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//开始拖拽</span><br><span class="line">-(void)scrollViewWillBeginDragging:(UIScrollView *)scrollView&#123;</span><br><span class="line">[self stopTimer];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate &#123;</span><br><span class="line">[self startTimer];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)startTimer &#123;</span><br><span class="line">[self stopTimer];</span><br><span class="line">_timer = [NSTimer timerWithTimeInterval:_timeInterval target:self selector:@selector(autoScrollToNext) userInfo:nil repeats:YES];</span><br><span class="line">[[NSRunLoop mainRunLoop] addTimer:_timer forMode:NSRunLoopCommonModes];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)stopTimer &#123;</span><br><span class="line">[_timer invalidate];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)autoScrollToNext &#123;</span><br><span class="line">[UIView animateWithDuration:0.25 animations:^&#123;</span><br><span class="line">// 小坑，设置动画YES，下面reset是又设置NO,动画就不执行了</span><br><span class="line">[self.scrollView setContentOffset:CGPointMake(self.frame.size.width*2, 0) animated:NO];</span><br><span class="line">&#125; completion:^(BOOL finished) &#123;</span><br><span class="line">self.currentImageIndex++;</span><br><span class="line">if (self.currentImageIndex &gt;= self.images.count) &#123;</span><br><span class="line">self.currentImageIndex = 0;</span><br><span class="line">&#125;</span><br><span class="line">[self refreshImageAndPage];</span><br><span class="line">[self resetScrollViewContentOffset];</span><br><span class="line">&#125;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
</li>
</ul>

                                                                        
                                    </div>
                                    <footer class="article-footer">
                                        <a data-url="http://jiaozhengkui.top/2015/07/01/UIScrollView轮播图/" data-id="ckd90jolh003wxc512b3g1fbr" class="article-share-link">
                                            Share
                                        </a>
                                        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/UI/">UI</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/原创/">原创</a></li></ul>

                                    </footer>

    </div>

    

                

</article>
        
          <article id="post-关于NSDictionary的几个问题" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

    <div class="article-inner">
        
            <header class="article-header">
                
  
    <h2 itemprop="name">
      <a class="article-title" href="/2015/06/21/关于NSDictionary的几个问题/">关于NSDictionary的几个问题</a>
    </h2>
  
  




            </header>
            

                
                    <div class="article-meta">
                        <a href="/2015/06/21/关于NSDictionary的几个问题/" class="article-date">
  <time datetime="2015-06-21T10:14:18.000Z" itemprop="datePublished">2015-06-21</time>
</a>
                            
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

                    </div>
                    

                        

                                    <div class="article-entry" itemprop="articleBody">
                                        


                                            

                                                
                                                                    <h4 id="NSDictionary"><a href="#NSDictionary" class="headerlink" title="NSDictionary"></a>NSDictionary</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NSDictionary &lt;NSString *, NSNumber *&gt; *dict = @&#123;@&quot;one&quot;:@1&#125;;</span><br><span class="line">dict.allKeys;   dict.allValues; // 顺序都是随机的</span><br></pre></td></tr></table></figure>
<h5 id="NSDictionary的key必须是字符串吗？"><a href="#NSDictionary的key必须是字符串吗？" class="headerlink" title="NSDictionary的key必须是字符串吗？"></a>NSDictionary的key必须是字符串吗？</h5><p>答：只要遵守NSCoding协议就行，也可以不是NSString<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NSDictionary *dic = @&#123;@1 : @&quot;one&quot;&#125;;</span><br><span class="line">NSLog(@&quot;%@&quot;,dic[@1]); // one</span><br></pre></td></tr></table></figure></p>
<h5 id="NSMutableDictionary的-setObject-forKey-与-setValue：-forKey-有啥区别？"><a href="#NSMutableDictionary的-setObject-forKey-与-setValue：-forKey-有啥区别？" class="headerlink" title="NSMutableDictionary的 setObject: forKey: 与 setValue： forKey: 有啥区别？"></a>NSMutableDictionary的 setObject: forKey: 与 setValue： forKey: 有啥区别？</h5><p>答：</p>
<ol>
<li>setObject: forKey: 的object不能为nil，否则会crash</li>
<li>setValue: forKey: 的value可以为nil，若nil则remove对应的key；此外，setValue: forKey: 是KVC方法，故key 必须是字符串<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">NSMutableDictionary *muDic = [[NSMutableDictionary alloc] init];</span><br><span class="line">//    [muDic setObject:nil forKey:@1]; crash</span><br><span class="line">[muDic setValue:nil forKey:@&quot;2&quot;];</span><br><span class="line">//    [muDic setValue:@&quot;第三个&quot; forKey:@3]; 黄牌警告</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h5 id="NSDictionary的-objectForKey-与-valueForKey-有啥区别？"><a href="#NSDictionary的-objectForKey-与-valueForKey-有啥区别？" class="headerlink" title="NSDictionary的 objectForKey: 与 valueForKey: 有啥区别？"></a>NSDictionary的 objectForKey: 与 valueForKey: 有啥区别？</h5><p>答：</p>
<ol>
<li>objectForKey: 根据key取值，否则返回nil</li>
<li>valueForKey: 根据key取值，key必须是字符串，且如果key以@开头会crash<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NSDictionary *dic = @&#123;@&quot;1&quot;:@&quot;one&quot;, @&quot;@2&quot;:@&quot;two&quot;&#125;;</span><br><span class="line">NSLog(@&quot;%@&quot;,[dic objectForKey:@&quot;1&quot;]);</span><br><span class="line">NSLog(@&quot;%@&quot;,[dic objectForKey:@&quot;@2&quot;]);</span><br><span class="line">NSLog(@&quot;%@&quot;,[dic valueForKey:@&quot;1&quot;]);</span><br><span class="line">//    NSLog(@&quot;%@&quot;,[dic valueForKey:@&quot;@2&quot;]); crash</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="扩展阅读"><a href="#扩展阅读" class="headerlink" title="扩展阅读"></a>扩展阅读</h4><ul>
<li><a href="http://www.isaced.com/post-235.html" target="_blank" rel="noopener">NSMapTable: 不只是一个能放weak指针的 NSDictionary</a></li>
<li><a href="http://www.cocoachina.com/industry/20140605/8683.html" target="_blank" rel="noopener">NSHashtable and NSMaptable</a></li>
</ul>

                                                                        
                                    </div>
                                    <footer class="article-footer">
                                        <a data-url="http://jiaozhengkui.top/2015/06/21/关于NSDictionary的几个问题/" data-id="ckd90jomj006cxc51w60z8fp3" class="article-share-link">
                                            Share
                                        </a>
                                        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/原创/">原创</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/基础/">基础</a></li></ul>

                                    </footer>

    </div>

    

                

</article>
        
          <article id="post-关于数字的几个问题" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

    <div class="article-inner">
        
            <header class="article-header">
                
  
    <h2 itemprop="name">
      <a class="article-title" href="/2015/06/05/关于数字的几个问题/">关于数字的几个问题</a>
    </h2>
  
  




            </header>
            

                
                    <div class="article-meta">
                        <a href="/2015/06/05/关于数字的几个问题/" class="article-date">
  <time datetime="2015-06-05T10:14:18.000Z" itemprop="datePublished">2015-06-05</time>
</a>
                            
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

                    </div>
                    

                        

                                    <div class="article-entry" itemprop="articleBody">
                                        


                                            

                                                
                                                                    <h5 id="NSNumber"><a href="#NSNumber" class="headerlink" title="NSNumber"></a>NSNumber</h5><p>答: 基础数字类型的封装，继承自NSObject，引用类型。语法糖 @(123)</p>
<h5 id="32位系统上使用assign修饰NSNumber会Crash"><a href="#32位系统上使用assign修饰NSNumber会Crash" class="headerlink" title="32位系统上使用assign修饰NSNumber会Crash"></a>32位系统上使用assign修饰NSNumber会Crash</h5><p>原因：NSNumber在32bit设备之上0-12都是存在内存共享区，无论调用多少次指针指向的都是相同的一块内存区域，永远不会被销毁。而只要大于12就是正常的创建在堆上的对象。在64-bit机器上无论NSInterger保存的这个数有多大，只要在正常范围之内，一定是存放在常量区的，也就是永远不会释放。因此需要用retain或strong</p>
<h5 id="NSInteger是不是引用类型"><a href="#NSInteger是不是引用类型" class="headerlink" title="NSInteger是不是引用类型"></a>NSInteger是不是引用类型</h5><p>答：别看是以NS开头就以为是对象了！NSInteger不是引用类型，int同C的int，NSInteger是对int的封装，推荐使用，根据操作系统位数返回最大值。uint与NSUInteger同上。</p>
<h5 id="NSTimeInterval"><a href="#NSTimeInterval" class="headerlink" title="NSTimeInterval"></a>NSTimeInterval</h5><p>答: typedef double NSTimeInterval; 为什么专门typedef 一下? 最主要是方便用户使用,见名知义,一看就知道专门给time使用的</p>
<h5 id="CGFloat怎么这么奇怪？"><a href="#CGFloat怎么这么奇怪？" class="headerlink" title="CGFloat怎么这么奇怪？"></a>CGFloat怎么这么奇怪？</h5><p>答：- float同C的float，double同C的double，CGFloat在32位上是float，64位上是double，没查到为什么是CG开头？</p>
<h5 id="Bool的问题"><a href="#Bool的问题" class="headerlink" title="Bool的问题"></a>Bool的问题</h5><p>答:记住是YES或NO,不是true和false;0为NO,其它为flase;nil为NO,非nil为YES;</p>

                                                                        
                                    </div>
                                    <footer class="article-footer">
                                        <a data-url="http://jiaozhengkui.top/2015/06/05/关于数字的几个问题/" data-id="ckd90jomk006fxc51g97qtvnm" class="article-share-link">
                                            Share
                                        </a>
                                        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/原创/">原创</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/基础/">基础</a></li></ul>

                                    </footer>

    </div>

    

                

</article>
        
          <article id="post-UIEvent简介" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

    <div class="article-inner">
        
            <header class="article-header">
                
  
    <h2 itemprop="name">
      <a class="article-title" href="/2015/05/30/UIEvent简介/">UIEvent简介</a>
    </h2>
  
  




            </header>
            

                
                    <div class="article-meta">
                        <a href="/2015/05/30/UIEvent简介/" class="article-date">
  <time datetime="2015-05-30T10:14:18.000Z" itemprop="datePublished">2015-05-30</time>
</a>
                            
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

                    </div>
                    

                        

                                    <div class="article-entry" itemprop="articleBody">
                                        


                                            

                                                
                                                                    <p>&emsp;&emsp;UIEvent是代表iOS系统中的一个事件,一个事件包含一个或多个的UITouch；</p>
<h4 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h4><ul>
<li><p>@property(nonatomic,readonly) UIEventType     type NS_AVAILABLE_IOS(3_0);//事件类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">typedef NS_ENUM(NSInteger, UIEventType) &#123;</span><br><span class="line">UIEventTypeTouches,//触摸事件类型 iOS3.0之后可以用</span><br><span class="line">UIEventTypeMotion,//摇晃事件类型 iOS3.0之后可以用</span><br><span class="line">UIEventTypeRemoteControl,//遥控事件类型 iOS4.0之后可以用</span><br><span class="line">UIEventTypePresses NS_ENUM_AVAILABLE_IOS(9_0),//物理按钮事件类型 iOS9.0之后可以用</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>@property(nonatomic,readonly) UIEventSubtype  subtype NS_AVAILABLE_IOS(3_0);//子事件类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">typedef NS_ENUM(NSInteger, UIEventSubtype) &#123;</span><br><span class="line">//事件没有子类型 iOS3.0之后可以用</span><br><span class="line">UIEventSubtypeNone                              = 0,</span><br><span class="line"></span><br><span class="line">//iOS3.0之后可以用</span><br><span class="line">UIEventSubtypeMotionShake                       = 1, // 摇晃事件</span><br><span class="line"></span><br><span class="line">//遥控的事件子类型 iOS4.0之后可以用</span><br><span class="line">UIEventSubtypeRemoteControlPlay                 = 100,//播放</span><br><span class="line">UIEventSubtypeRemoteControlPause                = 101,//暂停</span><br><span class="line">UIEventSubtypeRemoteControlStop                 = 102,//停止</span><br><span class="line">UIEventSubtypeRemoteControlTogglePlayPause      = 103,//播放或暂停</span><br><span class="line">UIEventSubtypeRemoteControlNextTrack            = 104,//下一曲</span><br><span class="line">UIEventSubtypeRemoteControlPreviousTrack        = 105,//上一曲</span><br><span class="line">UIEventSubtypeRemoteControlBeginSeekingBackward = 106,//开始快退</span><br><span class="line">UIEventSubtypeRemoteControlEndSeekingBackward   = 107,//快退结束</span><br><span class="line">UIEventSubtypeRemoteControlBeginSeekingForward  = 108,//开始快进</span><br><span class="line">UIEventSubtypeRemoteControlEndSeekingForward    = 109,//快进结束</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>@property(nonatomic,readonly) NSTimeInterval  timestamp;//事件发生时间</p>
</li>
<li>@property(nonatomic, readonly, nullable) NSSet <uitouch *> *allTouches;//所有触摸对象。</uitouch></li>
</ul>
<h4 id="API"><a href="#API" class="headerlink" title="API"></a>API</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (nullable NSSet &lt;UITouch *&gt; *)touchesForWindow:(UIWindow *)window;//没用，都是main window才响应</span><br><span class="line">- (nullable NSSet &lt;UITouch *&gt; *)touchesForView:(UIView *)view;//返回属于一个给定View的触摸对象。</span><br><span class="line">- (nullable NSSet &lt;UITouch *&gt; *)touchesForGestureRecognizer:(UIGestureRecognizer *)gesture NS_AVAILABLE_IOS(3_2);//返回指定的手势触摸对象集合</span><br><span class="line"></span><br><span class="line">//会将丢失的触摸放到一个新的 UIEvent 数组中，你可以用 coalescedTouchesForTouch(_:) 方法来访问</span><br><span class="line">- (nullable NSArray &lt;UITouch *&gt; *)coalescedTouchesForTouch:(UITouch *)touch NS_AVAILABLE_IOS(9_0);</span><br><span class="line"></span><br><span class="line">//辅助UITouch的触摸，预测发生了一系列主要的触摸事件。这些预测可能不完全匹配的触摸的真正的行为，因为它的移动，所以他们应该被解释为一个估计。</span><br><span class="line">- (nullable NSArray &lt;UITouch *&gt; *)predictedTouchesForTouch:(UITouch *)touch NS_AVAILABLE_IOS(9_0);</span><br></pre></td></tr></table></figure>
<ul>
<li>参考 <a href="https://developer.apple.com/documentation/uikit/uievent" target="_blank" rel="noopener">https://developer.apple.com/documentation/uikit/uievent</a></li>
</ul>

                                                                        
                                    </div>
                                    <footer class="article-footer">
                                        <a data-url="http://jiaozhengkui.top/2015/05/30/UIEvent简介/" data-id="ckd90jold003mxc51cj7ajudc" class="article-share-link">
                                            Share
                                        </a>
                                        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/原创/">原创</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/基础/">基础</a></li></ul>

                                    </footer>

    </div>

    

                

</article>
        
          <article id="post-UITouch简介" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

    <div class="article-inner">
        
            <header class="article-header">
                
  
    <h2 itemprop="name">
      <a class="article-title" href="/2015/05/24/UITouch简介/">UITouch简介</a>
    </h2>
  
  




            </header>
            

                
                    <div class="article-meta">
                        <a href="/2015/05/24/UITouch简介/" class="article-date">
  <time datetime="2015-05-24T10:14:18.000Z" itemprop="datePublished">2015-05-24</time>
</a>
                            
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

                    </div>
                    

                        

                                    <div class="article-entry" itemprop="articleBody">
                                        


                                            

                                                
                                                                    <h4 id="属性介绍"><a href="#属性介绍" class="headerlink" title="属性介绍"></a>属性介绍</h4><ul>
<li><p>常见属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// 触摸发生或最后修改的时间</span><br><span class="line">@property(nonatomic,readonly) NSTimeInterval      timestamp;</span><br><span class="line">// 触摸次数</span><br><span class="line">@property(nonatomic,readonly) NSUInteger          tapCount;   // touch down within a certain point within a certain amount of time</span><br><span class="line">// 触摸发生的window，一般是main window</span><br><span class="line">@property(nullable,nonatomic,readonly,strong) UIWindow *window;</span><br><span class="line">// 触摸的view</span><br><span class="line">@property(nullable,nonatomic,readonly,strong) UIView *view;</span><br><span class="line">// 数组? 试验结果包含系统手势，同一个手势的不同状态等，总之此属性不靠谱</span><br><span class="line">@property(nullable,nonatomic,readonly,copy)   NSArray &lt;UIGestureRecognizer *&gt; *gestureRecognizers NS_AVAILABLE_IOS(3_2);</span><br><span class="line"></span><br><span class="line">typedef NS_ENUM(NSInteger, UITouchPhase) &#123;</span><br><span class="line">UITouchPhaseBegan,             // 手指接触屏幕</span><br><span class="line">UITouchPhaseMoved,             // 手指在屏幕上移动</span><br><span class="line">UITouchPhaseStationary,        // 中间态，手指保持接触但没移动</span><br><span class="line">UITouchPhaseEnded,             // 手指离开屏幕</span><br><span class="line">UITouchPhaseCancelled,         // 触摸没结束，但需要强制停止追踪触摸事件</span><br><span class="line">&#125;;</span><br><span class="line">@property(nonatomic,readonly) UITouchPhase        phase;</span><br><span class="line">typedef NS_ENUM(NSInteger, UITouchType) &#123;</span><br><span class="line">UITouchTypeDirect, // 直接触摸屏幕</span><br><span class="line">UITouchTypeIndirect, // 间接触摸，遥控器</span><br><span class="line">UITouchTypePencil NS_AVAILABLE_IOS(9_1), // 触控笔</span><br><span class="line">UITouchTypeStylus NS_AVAILABLE_IOS(9_1) = UITouchTypePencil, </span><br><span class="line">&#125; NS_ENUM_AVAILABLE_IOS(9_0);</span><br><span class="line">@property(nonatomic,readonly) UITouchType         type NS_AVAILABLE_IOS(9_0);</span><br><span class="line"></span><br><span class="line">// 唯一索引，让你把一个更新的触摸与原来的触摸联系起来。</span><br><span class="line">@property(nonatomic,readonly) NSNumber * _Nullable estimationUpdateIndex NS_AVAILABLE_IOS(9_1);</span><br></pre></td></tr></table></figure>
</li>
<li><p>触摸半径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// majorRadius and majorRadiusTolerance are in points</span><br><span class="line">// The majorRadius will be accurate +/- the majorRadiusTolerance</span><br><span class="line">// 触摸半径</span><br><span class="line">@property(nonatomic,readonly) CGFloat majorRadius NS_AVAILABLE_IOS(8_0);</span><br><span class="line">// 触摸半径偏移量</span><br><span class="line">@property(nonatomic,readonly) CGFloat majorRadiusTolerance NS_AVAILABLE_IOS(8_0);</span><br></pre></td></tr></table></figure>
</li>
<li><p>3Dtouch</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 触摸力度，均值为1，系统预设</span><br><span class="line">@property(nonatomic,readonly) CGFloat force NS_AVAILABLE_IOS(9_0);</span><br><span class="line">// 最大触摸力度</span><br><span class="line">@property(nonatomic,readonly) CGFloat maximumPossibleForce NS_AVAILABLE_IOS(9_0);</span><br></pre></td></tr></table></figure>
</li>
<li><p>API</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 返回值表示触摸在view上的位置， 传入nil就是相对UIWindow的位置</span><br><span class="line">- (CGPoint)locationInView:(nullable UIView *)view;</span><br><span class="line">// 该方法记录了前一个触摸点的位置</span><br><span class="line">- (CGPoint)previousLocationInView:(nullable UIView *)view;</span><br><span class="line"></span><br><span class="line">//触摸可用时，返回触摸的精确位置</span><br><span class="line">- (CGPoint)preciseLocationInView:(nullable UIView *)view NS_AVAILABLE_IOS(9_1);</span><br><span class="line">//触摸可用时，返回触控的精确先前位置</span><br><span class="line">- (CGPoint)precisePreviousLocationInView:(nullable UIView *)view NS_AVAILABLE_IOS(9_1);</span><br></pre></td></tr></table></figure>
</li>
<li><p>触笔相关</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 触笔弧度，0弧度表示触笔与表面平行。当触笔垂直于表面时，此属性的值为pi/2。</span><br><span class="line">@property(nonatomic,readonly) CGFloat altitudeAngle NS_AVAILABLE_IOS(9_1);</span><br><span class="line">// 返回手触笔的方位角（弧度）</span><br><span class="line">- (CGFloat)azimuthAngleInView:(nullable UIView *)view NS_AVAILABLE_IOS(9_1);</span><br><span class="line">// 返回指向指针的方位角的单位向量</span><br><span class="line">- (CGVector)azimuthUnitVectorInView:(nullable UIView *)view NS_AVAILABLE_IOS(9_1);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><ul>
<li><a href="https://developer.apple.com/documentation/uikit/uitouch" target="_blank" rel="noopener">https://developer.apple.com/documentation/uikit/uitouch</a></li>
</ul>

                                                                        
                                    </div>
                                    <footer class="article-footer">
                                        <a data-url="http://jiaozhengkui.top/2015/05/24/UITouch简介/" data-id="ckd90jolj0042xc51occxnuvn" class="article-share-link">
                                            Share
                                        </a>
                                        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/原创/">原创</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/基础/">基础</a></li></ul>

                                    </footer>

    </div>

    

                

</article>
        
    </article>
    
  
    
      <nav class="page-nav">
        <a class="extend prev" rel="prev" href="/page/10/">Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><a class="page-number" href="/page/13/">13</a><a class="page-number" href="/page/14/">14</a><a class="extend next" rel="next" href="/page/12/">Next</a>
      </nav>
    
  </section>
</div>

  <footer class="footer">
  <div class="outer">
    <div class="float-right">
      <ul class="list-inline">
  
    <li><i class="fe fe-bar-chart"></i> <span id="busuanzi_value_site_pv"></span></li>
  
    <li><i class="fe fe-smile-alt"></i> <span id="busuanzi_value_site_uv"></span></li>
  
</ul>
    </div>
    <ul class="list-inline">
      <li>&copy; 2020 焦正奎的博客</li>
      <li>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></li>
      <li>Theme  <a href="https://github.com/zhwangart/hexo-theme-ocean">Ocean</a></li>
    </ul>
  </div>
</footer>

</main>
<aside class="sidebar">
  <button class="navbar-toggle"></button>
<nav class="navbar">
  
    <div class="logo">
      <a href="/"><img src="/images/author.jpg" alt="焦正奎的博客"></a>
    </div>
  
  <ul class="nav nav-main">
    
      <li class="nav-item">
        <a class="nav-item-link" href="/">Home</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/archives">Archives</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/gallery">Gallery</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/about">About</a>
      </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="Search">
        <i class="fe fe-search"></i>
        Search
      </a>
    </li>
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      <div class="totop" id="totop">
  <i class="fe fe-rocket"></i>
</div>
    </li>
    <li class="nav-item">
      
        <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
          <i class="fe fe-feed"></i>
        </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
</aside>
<script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>

  <script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/ocean.js"></script>

</body>
</html>