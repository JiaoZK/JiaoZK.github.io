<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[æ›¾å›½è—©å®¶ä¹¦]]></title>
    <url>%2F2019%2F07%2F31%2F%E6%9B%BE%E5%9B%BD%E8%97%A9%E5%AE%B6%E4%B9%A6%2F</url>
    <content type="text"><![CDATA[æ¯å¤œæ—©çœ ï¼Œèµ·äº¦æ¸æ—© èŠ‚åŠ³ï¼ŒèŠ‚æ¬²ï¼ŒèŠ‚é¥®é£Ÿï¼Œè°¨å½“æ—¶æ—¶çœè®° å›å­ä¹‹ç«‹å¿—ä¹Ÿï¼Œæœ‰æ°‘èƒžç‰©ä¸Žä¹‹é‡ï¼Œæœ‰å†…åœ£å¤–çŽ‹ä¹‹ä¸šï¼Œè€ŒåŽä¸å¿äºŽçˆ¶æ¯ä¹‹æ‰€ç”Ÿï¼Œä¸æ„§ä¸ºå¤©åœ°ä¹‹å®Œäºº æ˜Žå¾·æ–°æ°‘æ­¢è‡³å–„ï¼Œçš†æˆ‘åˆ†å†…äº‹ä¹Ÿ æ ¼ç‰©ï¼Œè‡´çŸ¥ä¹‹äº‹ä¹Ÿã€‚è¯šæ„ï¼ŒåŠ›è¡Œä¹‹äº‹ä¹Ÿ å€­è‰®å³°å…ˆç”Ÿåˆ™è¯šæ„å·¥å¤«æžä¸¥ï¼Œæ¯æ—¥æœ‰æ—¥è¯¾å†Œã€‚ä¸€æ—¥ä¹‹ä¸­ï¼Œä¸€å¿µä¹‹å·®ï¼Œä¸€äº‹ä¹‹å¤±ï¼Œä¸€è¨€ä¸€é»˜ï¼Œçš†ç¬”ä¹‹äºŽä¹¦ï¼Œä¹¦çš†æ¥·å­—ã€‚ä¸‰æœˆåˆ™è®¢ä¸€æœ¬ï¼Œè‡ªä¹™æœªå¹´èµ·ï¼Œä»Šä¸‰åæœ¬çŸ£ã€‚ ç›–æ˜Žå¸ˆç›Šå‹ï¼Œé‡é‡å¤¹æŒï¼Œèƒ½è¿›ä¸èƒ½é€€ä¹Ÿã€‚ å¤§æŠµç¬¬ä¸€è¦é™¤éª„å‚²æ°”ä¹ ï¼Œä¸­æ— æ‰€æœ‰ï¼Œè€Œå¤œéƒŽè‡ªå¤§ï¼Œæ­¤æœ€åäº‹ é¡»æœ‰å¿—æœ‰æ’ï¼Œä¹ƒæœ‰æˆå°±è€³ è¿›å¾·ï¼Œåˆ™å­å¼Ÿä»ä¹‰æ˜¯ä¹Ÿï¼›ä¿®ä¸šï¼Œåˆ™è¯—æ–‡ä½œå­—æ˜¯ä¹Ÿã€‚æ­¤äºŒè€…ç”±æˆ‘ä½œä¸»ï¼Œå¾—å°ºåˆ™æˆ‘ä¹‹å°ºä¹Ÿï¼Œå¾—å¯¸åˆ™æˆ‘ä¹‹å¯¸ä¹Ÿã€‚ä»Šæ—¥è¿›ä¸€åˆ†å¾·ï¼Œä¾¿ç®—ç§¯äº†ä¸€å‡è°·ï¼›æ˜Žæ—¥ä¿®ä¸€åˆ†ä¸šï¼Œåˆç®—é¦€äº†ä¸€æ–‡é’±ï¼›å¾·ä¸šå¹¶å¢žï¼Œåˆ™å®¶ç§æ—¥èµ· å¾äººä¸ºå­¦ï¼Œæœ€è¦è™šå¿ƒ æ•…å¾äººç”¨åŠŸï¼ŒåŠ›é™¤å‚²æ°”ï¼ŒåŠ›æˆ’è‡ªæ»¡ï¼Œæ¯‹ä¸ºäººæ‰€å†·ç¬‘ï¼Œä¹ƒæœ‰è¿›æ­¥ä¹Ÿ å‡¡é‡ç‰¢éªšæ¬²å‘ä¹‹æ—¶ï¼Œåˆ™åèº¬è‡ªæ€ï¼Œå¾æžœæœ‰ä½•ä¸è¶³ï¼Œè€Œè“„æ­¤ä¸å¹³ä¹‹æ°”ï¼ŒçŒ›ç„¶å†…çœï¼Œå†³ç„¶åŽ»ä¹‹ ä¸å®œéœ²å¤´è§’äºŽå¤– åŠå®œæ¯å¿ƒå¿è€ å¼Ÿæ€§è¤Šæ€¥ä¼¼ä½™ï¼Œææ‹‚éƒæˆ–ç”Ÿè‚ç–¾ï¼Œå¹¸æ¯å¿ƒå¿è€ä¸ºè¦ å¤ä¹‹æˆå¤§äº‹è€…ï¼Œè§„æ¨¡è¿œå¤§ä¸Žç»¼ç†å¯†å¾®ï¼ŒäºŒè€…é˜™ä¸€ä¸å¯ ç­‰å·®ä¸ç´Šï¼Œè¡Œä¹‹å¯ä¹…ï¼Œæ–¯åˆ™å™¨å±€å®å¤§ï¼Œæ— æœ‰æµå¼Šè€…è€³ã€‚ ä¿å…»èº«ä½“ï¼Œè‚éƒæœ€ä¼¤äºº å‡¡äººä½œä¸€äº‹ï¼Œä¾¿é¡»å…¨å‰¯ç²¾ç¥žå¾€åœ¨æ­¤ä¸€äº‹ï¼Œé¦–å°¾ä¸æ‡ˆã€‚ä¸å¯è§å¼‚æ€è¿ï¼Œåšè¿™æ ·æƒ³é‚£æ ·ï¼Œåè¿™å±±æœ›é‚£å±±ã€‚äººè€Œæ— æ’â‘ ï¼Œç»ˆèº«ä¸€æ— æ‰€æˆ å¸¦å‹‡ä¹‹æ³•ï¼Œä»¥ä½“å¯Ÿäººæ‰ä¸ºç¬¬ä¸€ï¼Œæ•´é¡¿è¥è§„ã€è®²æ±‚æˆ˜å®ˆæ¬¡ä¹‹ èº«ä½“è™½å¼±ï¼Œå´ä¸å®œè¿‡äºŽçˆ±æƒœã€‚ç²¾ç¥žæ„ˆç”¨åˆ™æ„ˆå‡ºï¼Œé˜³æ°”æ„ˆæåˆ™æ„ˆç››ã€‚æ¯æ—¥ä½œäº‹æ„ˆå¤šï¼Œåˆ™å¤œé—´ä¸´ç¡æ„ˆå¿«æ´»ã€‚è‹¥å­˜ä¸€çˆ±æƒœç²¾ç¥žçš„æ„æ€ï¼Œå°†å‰å°†å´ï¼Œå¥„å¥„æ— æ°”ï¼Œå†³éš¾æˆäº‹ å¤æ¥è¨€å‡¶å¾·è‡´è´¥è€…çº¦æœ‰äºŒç«¯ï¼šæ›°é•¿å‚²ï¼Œæ›°å¤šè¨€ å‡¡å¿ƒä¸­ä¸å¯æœ‰æ‰€æƒï¼Œå¿ƒæœ‰æ‰€æƒåˆ™è¾¾äºŽé¢è²Œ æ³¨æ„å¹³å’ŒäºŒå­— å¤§æŠµèƒ¸ä¸­æŠ‘éƒï¼Œæ€¨å¤©å°¤äººï¼Œä¸ç‰¹ä¸å¯ä»¥æ¶‰ä¸–ï¼Œäº¦éžæ‰€ä»¥å…»å¾·ï¼Œä¸å¾…æ— ä»¥å…»å¾·ï¼Œäº¦éžæ‰€ä»¥ä¿èº«ã€‚ä¸­å¹´ä»¥åŽï¼Œåˆ™è‚è‚¾äº¤å—å…¶è‹Ÿï¼Œå°½éƒè€Œä¸ç•…åˆ™ä¼¤æœ¨ï¼Œå¿ƒç«ç«™çƒåˆ™ä¼¤æ°´ æ•…äºŽä¸¤å¼Ÿæ—¶æ—¶ä»¥å¹³å’ŒäºŒå­—ç›¸å‹–â‘¢ï¼Œå¹¸å‹¿è§†ä¸ºè€ç”Ÿå¸¸è°ˆï¼Œè‡³å˜±è‡³å˜±ï¼ å®¶ä¸­åŽè¾ˆå­å¼Ÿï¼Œä½“å¼±å­¦å°„ï¼Œæœ€è¶³ä¿å…»ï¼Œèµ·æ—©å°¤åƒé‡‘å¦™æ–¹ï¼Œé•¿å¯¿é‡‘ä¸¹ä¹Ÿ æ—©èµ·ä¹ƒå¥èº«ä¹‹å¦™æ–¹ éª„çŸœä¹‹æ°”ï¼Œå…¹ä¸ºå¯è™‘ å®œå¹³éª„çŸœä¹‹æ°” å©‰é™ˆè€Œåˆ‡è°ä¹‹ æ€»ä»¥é™¤å‚²å­—ä¸ºç¬¬ä¸€ä¹‰ï¼Œ é¡»æˆ’å‚²æƒ°äºŒå­— åŠ›æˆ’å‚²å­—ï¼Œä»¥å„†æ— æ’ä¹‹å¼Šï¼Œè¿‘æ¥åˆåŠ›æˆ’æƒ°å­—ã€‚ éžå‚²å³æƒ°ï¼ŒäºŒè€…å¿…å±…å…¶ä¸€ã€‚ ä¿å…»ä¹‹æ³•ï¼Œäº¦æƒŸåœ¨æ…Žé¥®é£Ÿï¼ŒèŠ‚å—œæ¬²ï¼Œæ–­ä¸åœ¨å¤šæœè¯ä¹Ÿ å‡¡ç•äººä¸æ•¢å¦„è®®è®ºè€…ï¼Œè°¨æ…Žè€…ä¹Ÿã€‚å‡¡å¥½è®¥è¯„äººçŸ­è€…ï¼Œéª„å‚²è€…ä¹Ÿ å¿—å¾—æ„æ»¡ï¼Œæ¯«æ— ç•å¿Œï¼Œå¼€å£è®®äººçŸ­é•¿ï¼Œå³æ˜¯æžéª„å‚²è€³ è¨€æˆ’éª„å­—ï¼Œä»¥ä¸è½»éžç¬‘äººâ‘ ä¸ºç¬¬ä¸€ä¹‰ æ—¥ä¸­åˆ™æ˜ƒï¼Œæœˆç›ˆåˆ™äºï¼Œ ç®¡å­äº‘ï¼šâ€œæ–—æ–œæ»¡åˆ™äººæ¦‚â‘¢ä¹‹ï¼Œäººæ»¡åˆ™å¤©æ¦‚ä¹‹ã€‚â€ä½™è°“å¤©æ¦‚ä¹‹æ— å½¢ï¼Œä»å‡æ‰‹äºŽäººä»¥æ¦‚ä¹‹ã€‚ ä»Žå¤å¸çŽ‹å°†ç›¸ï¼Œæ— äººä¸ç”±è‡ªå¼ºè‡ªç«‹åšå‡º è¿‘æ¥è§å¾—å¤©åœ°ä¹‹é“ï¼ŒåˆšæŸ”äº’ç”¨ï¼Œä¸ç”¨ååºŸï¼Œå¤ªæŸ”åˆ™é¡â‘ ï¼Œå¤ªåˆšåˆ™æŠ˜ï¼Œåˆšéžæš´æˆ¾ä¹‹è°“ä¹Ÿï¼Œå¼ºçŸ«è€Œå·²ã€‚æŸ”éžå‘å¼±ä¹‹è°“ä¹Ÿï¼Œè°¦é€€è€Œå·²ã€‚è¶‹äº‹èµ´å…¬ï¼Œåˆ™å½“å¼ºçŸ«ï¼Œäº‰åé€åˆ©ï¼Œåˆ™å½“è°¦é€€ï¼Œå¼€åˆ›å®¶ä¸šï¼Œåˆ™å½“å¼ºçŸ«ï¼Œå®ˆæˆå®‰ä¹ï¼Œåˆ™å½“è°¦é€€ã€‚å‡ºä¸Žäººç‰©åº”æŽ¥ï¼Œåˆ™å½“å¼ºçŸ«ï¼Œå…¥ä¸Žå¦»å³äº«å—ï¼Œåˆ™å½“è°¦é€€ æœ‰åˆ™æ”¹ä¹‹ï¼Œæ— åˆ™åŠ å‹‰ åæœ›æ‰€åœ¨ï¼Œæ˜¯éžäºŽæ˜¯ä¹Žå‡ºï¼Œèµç½šäºŽæ˜¯ä¹Žäººï¼Œ æœ‰æ‰è€…ä»‡ç–‘è°¤ä¹‹æ— å› ï¼Œå› æ‚ç„¶ä¸é¡¾ï¼Œåˆ™è°¤ä¸”æ—¥è…¾ã€‚æœ‰ç­è€…ç•ç–‘è°¤ä¹‹æ— å› ï¼Œè€ŒæŠ‘ç„¶è‡ªä¿®ï¼Œåˆ™è°¤äº¦æ—¥æ¯ å¾åœ¨å¤–æ—¥ä¹…ï¼Œé˜…äº‹æ—¥å¤šï¼Œæ¯åŠäººä»¥ä¸æœè¯ä¸ºä¸Šç­–ã€‚ æ²»å¿ƒä»¥å¹¿å¤§äºŒå­—ä¸ºè¯ï¼Œæ²»èº«ä»¥ä¸è¯äºŒå­—ä¸ºè¯ã€‚ ä½™é˜…åŽ†å·²ä¹…ï¼Œè§‰æœ‰ç—…æ—¶ï¼Œæ–­ä¸å¯åƒè¯ï¼Œæ— ç—…æ—¶ï¼Œå¯å¶æœè¡¥å‰‚è°ƒç†ï¼Œäº¦ä¸å¯å¤šã€‚ å®¶è®­ï¼ŒæƒŸæ—©èµ·åŠ¡å†œç–åŒ»è¿œå·«å››è€…ï¼Œå°¤ä¸ºåˆ‡è¦ ç››æ—¶å¸¸ä½œè¡°æ—¶æƒ³ï¼Œä¸Šåœºå¿µä¸‹åœºæ—¶ï¼Œ æ€»å®œå¥–å…¶æ‰€é•¿ï¼Œè€Œå…¼è§„å…¶çŸ­ï¼Œ å¾å®¶äºŽæœ¬åŽ¿çˆ¶æ¯å®˜ï¼Œä¸å¿…åŠ›èµžå…¶è´¤ï¼Œä¸å¯åŠ›ä½Žå…¶éžï¼Œä¸Žä¹‹ç›¸å¤„ï¼Œå®œåœ¨è‹¥è¿œè‹¥è¿‘ï¼Œä¸äº²ä¸ç–ä¹‹é—´ã€‚æ¸ å­ä¾„è‹¥ä¸Žå®˜ç›¸è§ï¼Œæ€»ä»¥è°¦è°¨äºŒå­—ä¸ºä¸»ã€‚ å®œåˆ»åˆ»å‹¤åŠ³ï¼Œæ—©ä½œå¤œæ€ï¼Œä»¥æ±‚æœ‰æµŽ å¾å…„å¼Ÿä½†åœ¨ç§¯åŠ³äºŒå­—ä¸Šç€åŠ›ï¼ŒæˆåäºŒå­—ï¼Œåˆ™ä¸å¿…é—®åŠï¼Œäº«ç¦äºŒå­—ï¼Œåˆ™æ›´ä¸å¿…é—®çŸ£ã€‚ å°†ä¸‡äº‹çœ‹ç©ºï¼Œæ¯‹æ¼æ¯‹æ€’ å¿ƒè‚ä¸¤å®¶ä¹‹ç—…ï¼Œç©¶ä»¥è‡ªå…»è‡ªåŒ»ä¸ºä¸»ï¼Œéžè¯ç‰©æ‰€èƒ½ä¸ºåŠ› å‡¡éƒæ€’æœ€æ˜“ä¼¤äººï¼Œ å®œäºŽå¹³æ—¥è¯·æ±‚å…»èº«ä¹‹æ³•ï¼Œä¸å¯äºŽä¸´æ—¶ä¹±æŠ•è¯å‰‚ã€‚ å†…ç–¾å¤–ç—‡ï¼Œæžœç„¶å¥½äº†å‡ åˆ†ã€‚å‡¡å±žæŠ‘éƒå‘æ€’ï¼Œæœ€ä¼¤èº«ä½“ã€‚æˆ‘æœ‰è¿‡é”™ï¼Œå¼Ÿå¼Ÿå°½å¯ä¸€ä¸€ç›´è¯´ã€‚å¿Œå«‰ å…»èº«ä¹‹æ³•ï¼Œçº¦æœ‰ä¸€äº‹ï¼šä¸€æ›°çœ é£Ÿæœ‰æ’â‘ ã€‚äºŒæ›°æƒ©å¿¿ï¼Œä¸‰æ›°èŠ‚æ¬²ï¼Œå››æ›°æ¯å¤œä¸´ç¡æ´—è„šï¼Œäº”æ›°æ¯æ—¥ä¸¤é¥­åŽï¼Œå„è¡Œä¸‰åƒæ­¥ã€‚æƒ©å¿¿å³ä½™ç¯‡ä¸­æ‰€è°“å…»ç”Ÿä»¥å°‘æ¼æ€’ä¸ºæœ¬ä¹Ÿ å‡¡å®¶é“æ‰€ä»¥å¯ä¹…è€…ï¼Œä¸æƒä¸€æ—¶ä¹‹å®˜çˆµï¼Œè€Œæƒé•¿è¿œä¹‹å®¶è§„ï¼Œä¸æƒä¸€äºŒäººä¹‹éª¤å‘ï¼Œè€Œæƒå¤§ä¼—ä¹‹ç»´æŒ æœ›å¾å¼Ÿä¸“åœ¨ä½œç”°ä¸Šç”¨å·¥ï¼Œè¾…ä¹‹ä»¥ä¹¦è”¬é±¼çŒªã€æ—©æ‰«è€ƒå®å…«å­—ï¼Œä»»å‡­å®¶ä¸­å¦‚ä½•è´µç››ã€åˆ‡èŽ«å…¨æ”¹é“å…‰åˆå¹´ä¹‹è§„æ¨¡ å¾è¾ˆåœ¨è‡ªä¿®å¤„æ±‚å¼ºåˆ™å¯ï¼Œåœ¨èƒœäººå¤„æ±‚å¼ºåˆ™ä¸å¯ã€‚è‹¥ä¸“åœ¨èƒœäººå¤„æ±‚å¼ºï¼Œå…¶èƒ½å¼ºåˆ°åº•ä¸Žå¦ï¼Œå°šæœªå¯çŸ¥ï¼Œå³ä½¿ç»ˆèº«å¼ºæ¨ªå®‰ç¨³ï¼Œäº¦å›å­æ‰€ä¸å±‘é“ä¹Ÿã€‚ å¤§æ‚”å¤§æ‚Ÿä¹‹åŽï¼Œä¹ƒçŸ¥è‡ªå·±å…¨æ— æœ¬é¢†ï¼Œå‡¡äº‹éƒ½è§å¾—äººå®¶æœ‰å‡ åˆ†æ˜¯å¤„ å¤§çº¦ä»¥èƒ½ç«‹èƒ½è¾¾ä¸ºä½“ï¼Œä»¥ä¸æ€¨ä¸å°¤ä¸ºç”¨ã€‚ç«‹è€…ï¼Œå‘å¥‹è‡ªå¼ºï¼Œç«™å¾—ä½ä¹Ÿã€‚è¾¾è€…ï¼ŒåŠžäº‹åœ†èžï¼Œè¡Œå¾—é€šä¹Ÿ å¾ä¹å¹´ä»¥æ¥ï¼Œç—›æˆ’æ— æ’ä¹‹å¼Šï¼Œçœ‹ä¹¦å†™å­—ï¼Œä»Žæœªé—´æ–­ï¼Œé€‰å°†ç»ƒå…µï¼Œäº¦å¸¸ç•™å¿ƒï¼Œæ­¤çš†è‡ªå¼ºèƒ½ç«‹å·¥å¤«ã€‚å¥ç–å…¬ç‰ï¼Œå†ä¸‰æ–Ÿé…Œï¼Œæ— ä¸€è¿‡å½“ä¹‹è¯­ï¼Œè‡ªå¤¸ä¹‹è¾žï¼Œæ­¤çš†åœ†èžèƒ½è¾¾å·¥å¤«ã€‚è‡³äºŽæ€¨å¤©æœ¬æœ‰æ‰€ä¸æ•¢ï¼Œå°¤äººåˆ™å°šä¸èƒ½å…ï¼Œäº¦çš†éšæ—¶å¼ºåˆ¶è€Œå…‹åŽ»ä¹‹ æƒŸæœ‰å¤„å¤„æ³°ç„¶ï¼Œè¡Œæ‰€æ— äº‹ï¼Œç”³ç”«æ‰€è°“å¥½æ±‰æ‰“è„±ç‰™å’Œè¡€åžï¼Œæ˜Ÿå†ˆå…¬æ‰€è°“æœ‰ç¦ä¹‹äººå–„é€€è´¢ï¼ŒçœŸå¤„é€†å¢ƒè€…ä¹‹è‰¯æ³•ä¹Ÿã€‚ åªæœ‰é€†æ¥é¡ºå—ä¹‹æ³• æœ±å­å°è¨€ï¼šâ€œæ‚”å­—å¦‚æ˜¥ï¼Œä¸‡ç‰©è•´è“„åˆå‘ã€‚å‰å­—å¦‚å¤ï¼Œä¸‡ç‰©èŒ‚ç››å·²æžã€‚åå­—å¦‚ç§‹ï¼Œä¸‡ç‰©å¦‚è½ã€‚å‡¶å­—å¦‚å†¬ï¼Œä¸‡ç‰©åˆè°ƒã€‚â€åˆå°ä»¥å…ƒå­—é…æ˜¥ï¼Œäº«å­—é…å¤ï¼Œåˆ©å­—é…ç§‹ï¼Œè´žå­—é…å†¬ï¼Œå…„æ„è´žå­—å³ç¡¬å­—è¯€ä¹Ÿ å†™å­—å…»ç¥žã€‚ äº›å°å¾—å¤±ä¸è¶³æ‚£ï¼Œç‰¹æ‚£ä¸šä¹‹ä¸ç²¾è€³ã€‚ ç„¶ç§‘åæœ‰æ— è¿Ÿæ—©ï¼Œæ€»ç”±å‰å®šï¼Œä¸æ¯«ä¸èƒ½å‹‰å¼ºã€‚å¾è¾ˆè¯»ä¹¦ï¼Œåªæœ‰ä¸¤äº‹ï¼Œä¸€è€…è¿›å¾·ä¹‹äº‹ï¼Œè®²æ±‚ä¹Žè¯šæ­£ä¿®é½â‘¤ä¹‹é“ï¼Œä»¥å›¾æ— å¿â‘¥æ‰€ç”Ÿï¼Œä¸€è€…ä¿®ä¸šä¹‹äº‹ï¼Œæ“ä¹ ä¹Žè®°è¯µè¯ç« ä¹‹æœ¯ï¼Œä»¥å›¾è‡ªå«å…¶èº«ã€‚ å¾è¾ˆè¯»ä¹¦ï¼Œåªæœ‰ä¸¤äº‹ï¼Œä¸€è€…è¿›å¾·ä¹‹äº‹ï¼Œè®²æ±‚ä¹Žè¯šæ­£ä¿®é½â‘¤ä¹‹é“ï¼Œä»¥å›¾æ— å¿â‘¥æ‰€ç”Ÿï¼Œä¸€è€…ä¿®ä¸šä¹‹äº‹ï¼Œæ“ä¹ ä¹Žè®°è¯µè¯ç« ä¹‹æœ¯ï¼Œä»¥å›¾è‡ªå«å…¶èº«ã€‚ æ±‚ä¸šä¹‹ç²¾ï¼Œåˆ«æ— ä»–æ³•ï¼Œæ›°ä¸“è€Œå·²çŸ£ã€‚è°šæ›°ï¼šâ€œè‰ºå¤šä¸å…»èº«ï¼Œè°“ä¸ä¸“ä¹Ÿã€‚â€å¾æŽ˜äº•å¤šè€Œæ— æ³‰å¯é¥®ï¼Œä¸ä¸“ä¹‹å’Žä¹Ÿï¼ å‡¡ä¸“ä¸€ä¸šä¹‹äººï¼Œå¿…æœ‰å¿ƒå¾—ï¼Œäº¦å¿…æœ‰ç–‘ä¹‰ã€‚è¯¸ è¯¸å¼Ÿæ¯æ—¥è‡ªç«‹è¯¾ç¨‹ï¼Œå¿…é¡»æœ‰æ—¥æ—¥ä¸æ–­ä¹‹åŠŸï¼Œè™½è¡Œèˆ¹èµ°è·¯ï¼Œé¡»å¸¦åœ¨èº«è¾¹ è¦çš†æœ‰å¿—ä¹‹ä¸Šï¼Œä¸ç”˜å±…äºŽåº¸ç¢Œè€…ä¹Ÿã€‚ å¤©ä¸‹æœ‰ç›Šä¹‹äº‹ï¼Œå³æœ‰è¶³æŸè€…å¯“ä¹Žå…¶ä¸­ï¼Œä¸å¯ä¸è¾¨ã€‚ æœ‰å¿—åˆ™æ–­ä¸æ•¢ä¸ºä¸‹æµï¼Œæœ‰è¯†åˆ™çŸ¥å­¦é—®æ— å°½ï¼Œä¸æ•¢ä»¥ä¸€å¾—è‡ªè¶³ï¼Œå¦‚æ²³ä¼¯ä¹‹è§‚æµ·ï¼Œå¦‚äº•è›™ä¹‹çª¥å¤©ï¼Œçš†æ— è¯†ä¹Ÿã€‚æœ‰æ’åˆ™æ–­æ— ä¸æˆä¹‹äº‹ï¼Œæ­¤ä¸‰è€…ï¼Œç¼ºä¸€ä¸å¯ é™„è¯¾ç¨‹è¡¨ ä¸€ã€ä¸»æ•¬ã€æ•´é½ä¸¥è‚ƒã€æ— æ—¶ä¸ä¿±ï¼Œæ— äº‹æ—¶å¿ƒåœ¨è…”å­é‡Œï¼Œåº”äº‹æ—¶ä¸“ä¸€ä¸æ‚ã€‚ äºŒã€é™åã€æ¯æ—¥ä¸æ‹˜ä½•æ—¶ï¼Œé™åä¸€ä¼šï¼Œä½“éªŒé™æžç”Ÿé˜³æ¥å¤ä¹‹ä»å¿ƒï¼Œæ­£ä½å‡å‘½ï¼Œå¦‚é¼Žä¹‹é”ã€‚ ä¸‰ã€æ—©èµ·ã€é»Žæ˜Žå³èµ·ï¼Œé†’åŽå‹¿æ²¾æ‹ã€‚ å››ã€è¯»ä¹¦ä¸äºŒã€ä¸€ä¹¦æœªç‚¹å®Œï¼Œæ–­ä¸çœ‹ä»–ä¹¦ï¼Œä¸œç¿»è¥¿é˜…ï¼Œéƒ½æ˜¯å¾‡å¤–â‘¦ä¸ºäººã€‚ äº”ã€è¯»å²ã€å»¿ä¸‰å²æ¯æ—¥è¯»åé¡µï¼Œè™½æœ‰äº‹ï¼Œä¸é—´æ–­ã€‚ å…­ã€å†™æ—¥è®°ã€é¡»ç«¯è°ï¼Œå‡¡æ—¥é—®è¿‡æ¶ï¼Œèº«è¿‡ï¼Œå¿ƒè¿‡ï¼Œå£è¿‡ï¼Œçš†å·±å‡ºï¼Œç»ˆèº«ä¸é—´æ–­ã€‚ ä¸ƒã€æ—¥çŸ¥å…¶æ‰€äº¡â‘§ã€æ¯æ—¥è®°èŒ¶ä½™å¶è°ˆä¸€åˆ™ï¼Œåˆ†å¾·è¡Œé—¨ï¼Œå­¦é—®é—¨ï¼Œç»æµŽé—¨ï¼Œè‰ºæœ¯é—¨ã€‚ å…«ã€æœˆæ— å¿˜æ‰€èƒ½ã€æ¯æœˆä½œè¯—æ–‡æ•°é¦–ï¼Œä»¥éªŒç§¯ç†ä¹‹é‡‘å¯¡ï¼Œæ°”ä¹‹ç››å¦ã€‚ ä¹ã€è°¨è¨€ã€åˆ»åˆ»ç•™å¿ƒã€‚ åã€å…»æ°”ã€æ— ä¸å¯å¯¹äººè¨€ä¹‹äº‹ï¼Œæ°”è—ä¸¹ç”°ã€‚ åä¸€ã€ä¿èº«ã€è°¨éµå¤§äººæ‰‹è°•ï¼ŒèŠ‚æ¬²ï¼ŒèŠ‚åŠ³ï¼ŒèŠ‚é¥®é£Ÿã€‚ åäºŒã€ä½œå­—ã€æ—©é¥­åŽä½œå­—ï¼Œå‡¡ç¬”å¢¨åº”é…¬ï¼Œå½“ä½œè‡ªå·±åŠŸè¯¾ã€‚ åä¸‰ã€å¤œä¸å‡ºé—¨ã€æ—·åŠŸç–²ç¥žï¼Œåˆ‡æˆ’åˆ‡æˆ’ï¼ ä¸ºäººå­è€…ï¼Œè‹¥ä½¿çˆ¶æ¯è§å¾—æˆ‘å¥½äº›ï¼Œè°“è¯¸å…„å¼Ÿä¿±ä¸åŠæˆ‘ï¼Œè¿™ä¾¿æ˜¯ä¸å­ï¼Œè‹¥ä½¿æ—å…šç§°é“æˆ‘å¥½äº›ï¼Œè°“è¯¸å…„å¼Ÿä¿±ä¸å¦‚æˆ‘ï¼Œè¿™ä¾¿æ˜¯ä¸æ¢¯â‘ ï¼Œä½•ä¹Ÿï¼Ÿç›–ä½¿çˆ¶æ¯å¿ƒä¸­æœ‰è´¤æ„šä¹‹åˆ†ï¼Œä½¿æ—å…šâ‘¡å£ä¸­æœ‰è´¤æ„šä¹‹åˆ†ï¼Œåˆ™å¿…å…¶å¹³æ—¥æœ‰è®¨å¥½åº•æ„æ€ï¼Œæš—ç”¨æœºè®¡ï¼Œä½¿è‡ªå·±å¾—å¥½åå£°ï¼Œè€Œä½¿å…„å¼Ÿå¾—ååå£°ï¼Œå¿…å…¶åŽæ—¥ä¹‹å«Œéš™ï¼Œç”±æ­¤è€Œç”Ÿä¹Ÿ å–æ˜Žå¸ˆä¹‹ç›Šï¼Œæ— å—æŸå‹ä¹‹æŸä¹Ÿ æ— æ’è€…è§å¼‚æ€è¿ ç©·ç»å¿…ä¸“ä¸€ç»ï¼Œä¸å¯æ³›éª› æœ‰ä¸€è€å­—è¯€ï¼Œä¸€å¥ä¸é€šï¼Œä¸çœ‹ä¸‹å¥ï¼Œä»Šæ—¥ä¸é€šï¼Œæ˜Žæ—¥å†è¯»ï¼Œä»Šå¹´ä¸é€šï¼Œæ˜Žå¹´å†è¯»ï¼Œæ­¤æ‰€è°“è€ è¯»ç»ä»¥ç ”å¯»ä¹‰ç†ä¸ºæœ¬ï¼Œè€ƒæ®åç‰©ä¸ºæœ«ï¼Œè¯»è‡³æœ‰ä¸€è€å­—è¯€ï¼Œä¸€å¥ä¸é€šï¼Œä¸çœ‹ä¸‹å¥ï¼Œä»Šæ—¥ä¸é€šï¼Œæ˜Žæ—¥å†è¯»ï¼Œä»Šå¹´ä¸é€šï¼Œæ˜Žå¹´å†è¯»ï¼Œæ­¤æ‰€è°“è€ä¹Ÿ è¯»å²ä¹‹æ³•ï¼ŒèŽ«å¦™äºŽè®¾èº«å¤„åœ°ï¼Œæ¯çœ‹ä¸€å¤„ï¼Œå¦‚æˆ‘ä¾¿ä¸Žå½“æ—¶ä¹‹äººï¼Œé…¬é…¢ç¬‘è¯­äºŽå…¶é—´ã€‚ä¸å¿…äººäººçš†èƒ½è®°ä¹Ÿã€‚ä½†è®°ä¸€äººï¼Œåˆ™æå¦‚æŽ¥å…¶äººï¼Œä¸å¿…äº‹äº‹çš†èƒ½è®°ä¹Ÿã€‚ä½†è®°ä¸€äº‹ï¼Œåˆ™æå¦‚äº²å…¶äº‹ï¼Œç»ä»¥ç©·ç†ï¼Œå²ä»¥è€ƒäº‹ï¼Œèˆæ­¤äºŒè€…ã€‚æ›´åˆ«æ— å­¦çŸ£ã€‚ æ­¤ä¸€é›†æœªè¯»å®Œï¼Œæ–­æ–­ä¸æ¢ä»–é›†ï¼Œäº¦ä¸“å­—è¯€ä¹Ÿ è¯»ç»è¯»å²è¯»ä¸“é›†ï¼Œè®²ä¹‰ç†ä¹‹å­¦ï¼Œæ­¤æœ‰å¿—è€…ä¸‡ä¸å¯æ˜“è€…ä¹Ÿ äºŽå…„å¼Ÿå‡ºç›´è¾¾å…¶éšï¼Œçˆ¶å­ç¥–å­™é—´ï¼Œä¸å¾—ä¸æ›²è‡´å…¶æƒ…ã€‚ è‹¥æžœå¨ä»ªå¯åˆ™ï¼Œæ·³å®žå®é€šï¼Œå¸ˆä¹‹å¯ä¹Ÿã€‚è‹¥ä»…åšé›…èƒ½æ–‡ï¼Œå‹ä¹‹å¯ä¹Ÿã€‚æˆ–å¸ˆæˆ–å‹ï¼Œçš†å®œå¸¸å­˜æ•¬ç•ä¹‹å¿ƒï¼Œä¸å®œè§†ä¸ºç­‰å¤·ï¼Œæ¸è‡³æ…¢äºµï¼Œåˆ™ä¸å¤èƒ½å—å…¶ç›ŠçŸ£ æ— è®ºä½•ä¹¦ï¼Œæ€»é¡»ä»Žé¦–è‡³å°¾ï¼Œé€šçœ‹ä¸€é å…ˆé¡»çœ‹ä¸€å®¶é›†ï¼Œä¸è¦ä¸œç¿»ä¸¤é˜…ï¼Œå…ˆé¡»å­¦ä¸€ä½“ï¼Œä¸å¯å„ä½“åŒå­¦ï¼Œç›–æ˜Žä¸€ä½“ï¼Œåˆ™çš†æ˜Žä¹Ÿ æœ‰å›°å¿ƒè¡¡è™‘éƒç§¯æ€é€šä¹‹è±¡ã€‚æ­¤äº‹æ–­ä¸å¯æ±‚é€Ÿæ•ˆ æ„ˆæ¬²é€Ÿåˆ™æ„ˆé”¢è”½çŸ£ï¼Œ ç»å¤§å­¦é—®ï¼Œå³åœ¨å®¶åº­æ—¥ç”¨ä¹‹é—´ æ— æ—¥ä¸çœ‹ä¹¦ï¼Œè™½ä¸‡äº‹ä¸šå¿™ï¼Œäº¦ä¸åºŸæ­£ä¸šã€‚ æ—¥æœˆé€çŸ£ï¼Œå†è¿‡æ•°å¹´ï¼Œåˆ™æ»¡ä¸‰åï¼Œä¸èƒ½ä¸è¶ä¸‰åä»¥å‰ï¼Œç«‹å¿—çŒ›è¿›ä¹Ÿã€‚ è‹¥è‡ªå·±ä¸ç«‹å¿—ï¼Œåˆ™è™½æ—¥ä¸Žå°§èˆœç¦¹æ±¤åŒä½ï¼Œäº¦å½¼è‡ªå½¼ï¼Œæˆ‘è‡ªæˆ‘çŸ£ï¼Œä½•ä¸ŽäºŽæˆ‘å“‰ å­¦é—®ä¹‹é“æ— ç©·ï¼Œè€Œæ€»ä»¥æœ‰æ’ä¸ºä¸»ï¼Œ è™½æžå¿™ï¼Œäº¦é¡»äº†æœ¬æ—¥åŠŸè¯¾ï¼Œä¸ä»¥æ˜¨æ—¥è€½æï¼Œè€Œä»Šæ—¥è¡¥åšï¼Œä¸ä»¥æ˜Žæ—¥æœ‰äº‹ï¼Œè€Œä»Šæ—¥é¢„åšã€‚ åˆ‡å‹¿ä»¥å®¶ä¸­æœ‰äº‹ï¼Œè€Œé—´æ–­çœ‹ä¹¦ä¹‹äº‹ï¼Œåˆå‹¿ä»¥è€ƒè¯•å°†è¿‘ï¼Œè€Œé—´æ–­çœ‹ä¹¦ä¹‹è¯¾ è‹¥äº‹äº‹å‹¤æ€å–„é—®ï¼Œä½•æ‚£ä¸ä¸€æ—¥åƒé‡Œ è¯»ä¹¦å®œé€‰ä¸€æ˜Žå¸ˆ ä¸€å®¶ä¹‹ä¸­ï¼Œæœªèƒ½å®¶é•¿æ™è€Œå­å¼Ÿèƒ½æ—©è€…ä¹Ÿ å®¶ä¸­è¯»ä¹¦äº‹ï¼Œå¼Ÿå®œå¸¸å¸¸ç•™å¿ƒï¼Œå¦‚ç”²äº”ç§‘ä¸‰ç­‰ï¼Œçš†é¡»è¯»ä¹¦ï¼Œä¸å¤±åœ¨å®¶å­å¼Ÿé£ŽèŒƒï¼Œä¸å¯å¤ªç–å¿½ä¹Ÿï¼Œ ä¿­å­—å·¥å¤«ã€‚æ—¥æ¥ç¨æœ‰é•¿è¿›å¦ï¼Ÿ ç”¨åŠŸï¼Œä¸æ±‚å¤ªçŒ›ï¼Œä½†æ±‚æœ‰æ’ å¾ä¸æœ›ä»£ä»£å¾—å¯Œè´µï¼Œä½†æ„¿ä»£ä»£æœ‰ç§€æ‰ã€‚ å¥‹å‹‰åŠ åŠŸï¼Œä¸ºäººä¸Žä¸ºå­¦å¹¶è¿›ï¼Œåˆ‡æˆ’éª„å¥¢äºŒå­—ï¼Œåˆ™å®¶ä¸­é£Žæ°”æ—¥åŽš ä¸€æ›°çœ‹ç”Ÿä¹¦å®œæ±‚é€Ÿï¼Œä¸å¤šè¯»åˆ™å¤ªé™‹ã€‚ä¸€æ›°æ¸©æ—§ä¹¦å®œæ±‚ç†Ÿï¼Œä¸èƒŒè¯µåˆ™æ˜“å¿˜ã€‚ä¸€æ›°ä¹ å­—å®œæœ‰æ’ï¼Œä¸å–„å†™åˆ™å¦‚èº«ä¹‹æ— è¡£ï¼Œå±±ä¹‹æ— æœ¨ã€‚ä¸€æ›°ä½œæ–‡å®œè‹¦æ€ï¼Œä¸å–„ä½œåˆ™å¦‚äººä¹‹å“‘ä¸èƒ½è¨€ï¼Œé©¬ä¹‹è‚¢ä¸èƒ½è¡Œã€‚å››è€…ç¼ºä¸€ä¸å¯ï¼Œ å’Œæ°”è’¸å¸®è€Œå®¶ä¸å…´è€…ï¼Œæœªä¹‹æœ‰ä¹Ÿ å…„å¼Ÿå’Œï¼Œè™½ç©·æ°“ä¸æˆ·å¿…å…´ï¼Œå…„å¼Ÿä¸å’Œï¼Œè™½ä¸–å®¶å®¦æ—å¿…è´¥ã€‚ å…„å¼Ÿä¹‹æƒ…å®žä»¥å’Œç¦å…„å¼Ÿä¸ºç¬¬ä¸€ã€‚ è¨€å¿ ä¿¡ï¼Œè¡Œç¬ƒæ•¬ï¼Œè™½è›®è²Šâ‘ ä¹‹é‚¦è¡ŒçŸ£ã€‚ åªè¦æœ‰æ’ï¼Œä¸å¿…è´ªå¤š æ¾„å¼Ÿäº¦é¡»å¸¸çœ‹ã€Šäº”ç§é—è§„ã€‹åŠã€Šå‘»åŸè¯­ã€‹ï¼Œæ´—å°½æµ®åŽï¼Œæœ´å®žè°™ç»ƒï¼Œä¸Šæ‰¿ç¥–çˆ¶ï¼Œä¸‹åž‹å­å¼Ÿï¼Œå¾äºŽæ¾„å¼Ÿå®žæœ‰åŽšæœ›ç„‰ è‹¥éžé“ä¹‰å¯å¾—è€…ï¼Œåˆ™ä¸å¯è½»æ˜“å—æ­¤ã€‚è¦åšå¥½äººï¼Œç¬¬ä¸€è¦åœ¨æ­¤å¤„ä¸‹æ‰‹ï¼Œèƒ½ä»¤é¬¼æœç¥žé’¦ï¼Œåˆ™è‡ªç„¶è¯†æ—¥è¿›ï¼Œæ°”æ—¥åˆšã€‚å¦åˆ™ä¸è§‰å å…¥å‘æ±¡ä¸€æµï¼Œå¿…æœ‰è¢«äººçœ‹ä¸èµ·ä¹‹æ—¥ï¼Œä¸å¯ä¸æ…Ž å—äººæ©æƒ…ï¼Œå½“ä¸ºå°†æ¥æŠ¥ç­”ä¹‹åœ°ï¼Œä¸å¯å¤šæ±‚äººä¹Ÿã€‚ å‡¡ä¸€å®¶ä¹‹ä¸­ï¼Œå‹¤æ•¬äºŒå­—ï¼Œèƒ½å®ˆå¾—å‡ åˆ†ï¼Œæœªæœ‰ä¸å…´ï¼Œè‹¥å…¨æ— ä¸€åˆ†ï¼Œæ— æœ‰ä¸è´¥ï¼Œå’Œå­—èƒ½å®ˆå¾—å‡ åˆ†ï¼Œæœªæœ‰ä¸å…´ã€‚ä¸å’Œæœªæœ‰ä¸è´¥è€…1123. è¯¸å¼Ÿä¸å¥½æ”¶æ‹¾æ´å‡€ï¼Œæ¯”æˆ‘å°¤ç”šï¼Œæ­¤æ˜¯è´¥å®¶æ°”æ˜Žï¼Œå—£åŽåŠ¡å®œç»†å¿ƒæ”¶æ‹¾ï¼Œå³ä¸€çº¸ä¸€ç¼•ï¼Œç«¹å¤´æœ¨å±‘ï¼Œçš†å®œæ£€æ‹¾ï¼Œä»¥ä¸ºå„¿ä¾„ä¹‹æ¦œæ ·ï¼Œä¸€ä»£ç–æ‡’ï¼ŒäºŒä»£æ·«ä½šï¼Œåˆ™å¿…æœ‰æ˜¼ç¡å¤œåï¼Œå¸é£Ÿé¸¦ç‰‡ä¹‹æ¸çŸ£ å­ä¾„é™¤è¯»ä¹¦å¤–ï¼Œæ•™ä¹‹æ‰«å±‹æŠ¹æ¡Œå‡³ï¼Œæ”¶ç²ªé”„è‰ï¼Œæ˜¯æžå¥½ä¹‹äº‹ï¼Œåˆ‡ä¸å¯ä»¥ä¸ºæœ‰æŸæž¶å­è€Œä¸ä¸ºä¹Ÿã€‚ æˆ‘æœ‰ç¾Žåï¼Œåˆ™äººå¿…æœ‰å—ä¸ç¾Žä¹‹åè€…ï¼Œç›¸å½¢ä¹‹é™…ï¼Œç›–éš¾ä¸ºæƒ…ï¼›å…„æƒŸè°¨æ…Žè°¦è™šï¼Œæ—¶æ—¶çœæƒ•â‘ è€Œå·² å‹¿ä½¿å­ä¾„éª„å¥¢æ·«ä½š å¤äººäº‘ï¼šâ€œåŠ³åˆ™å–„å¿ƒç”Ÿï¼Œä½šåˆ™æ·«å¿ƒç”Ÿã€‚â€å­Ÿå­æ›°ï¼šâ€œç”ŸäºŽå¿§æ‚£ï¼Œæ­»äºŽå®‰ä¹ã€‚ ä¸€åˆ»åƒé‡‘ï¼Œåˆ‡ä¸å¯æµªæŽ·å…‰ ä½™åœ¨å†›ä¸­ï¼Œä¸åºŸå­¦é—®ï¼Œè¯»ä¹¦å†™å­—ï¼Œæœªç”šé—´æ–­ï¼Œæƒœå¹´è€çœ¼è’™æ— ç”šé•¿è¿›ï¼Œå°”ä»Šæœªå¼±å† ï¼Œä¸€åˆ»åƒé‡‘ï¼Œåˆ‡ä¸å¯æµªæŽ·å…‰é˜´ é¡»ä»¥å‹¤æ•è¡Œä¹‹ï¼Œæ¯æ—¥è‡³å°‘äº¦é¡»çœ‹äºŒåé¡µ*ã€‚ä¸å¿…æƒ‘äºŽåœ¨ç²¾ä¸åœ¨å¤šä¹‹è¯´ çºªæ³½çœ‹æ±‰ä¹¦ï¼Œé¡»ä»¥å‹¤æ•è¡Œä¹‹ï¼Œæ¯æ—¥è‡³å°‘äº¦é¡»çœ‹äºŒåé¡µ*ã€‚ä¸å¿…æƒ‘äºŽåœ¨ç²¾ä¸åœ¨å¤šä¹‹è¯´ï¼Œé¡»é€Ÿç‚¹é€Ÿè¯»ï¼Œä¸å¿…ä¸€ä¸€æ±‚ç†Ÿï¼Œæå› æ±‚ç†Ÿä¹‹ä¸€å­—ï¼Œè€Œç»ˆèº«æœªèƒ½è¯»å®Œç»ä¹¦ é¡ä¸æœ‰åˆï¼Œé²œå…‹æœ‰ç»ˆ ç„¶ç¥¸ç¦ç”±å¤©ä¸»ä¹‹ï¼Œå–„æ¶ç”±äººä¸»ä¹‹ï¼Œç”±å¤©ä¸»è€…ï¼Œæ— å¯å¦‚ä½•ï¼Œåªå¾—å¬ä¹‹ã€‚ç”±äººä¸»è€…ï¼Œå°½å¾—ä¸€åˆ†ç®—ä¸€åˆ†ï¼Œæ²™å¾—ä¸€æ—¥ç®—ä¸€æ—¥ã€‚å¾å…„å¼Ÿæ–­ä¸å¯ä¸æ´—å¿ƒæ¶¤è™‘ï¼Œä»¥æ±‚åŠ›æŒ½å®¶è¿ ç¬¬ä¸€è´µå…„å¼Ÿå’Œç¦ï¼›ç¬¬äºŒè´µä½“å­é“ï¼›ç¬¬ä¸‰è¦å®žè¡Œå‹¤ä¿­äºŒå­— å‹¤è€…ï¼Œç”ŸåŠ¨ä¹‹æ°”ï¼Œä¿­è€…ï¼Œæ”¶æ•›ä¹‹æ°”ï¼Œæœ‰æ­¤äºŒå­—ï¼Œå®¶è¿æ–­æ— ä¸å…´ä¹‹ç†ã€‚ â€œå®¶åº­ä¸å¯è¯´åˆ©å®³è¯ï¼Œâ€æ­¤è¨€ç²¾å½“ä¹‹è‡³ï¼Œè¶³æŠµä¸‡é‡‘ ä¹¦è”¬é±¼çŒªï¼Œæ—©æ‰«è€ƒå®ä¹Ÿï¼æ—©è€…ï¼Œèµ·æ—©ä¹Ÿã€‚æ‰«è€…ï¼Œæ‰«å±‹ä¹Ÿã€‚è€ƒè€…ï¼Œç¥–å…ˆç¥­ç¥€ï¼›å®è€…ï¼Œäº²æ—é‚»é‡Œï¼Œæ—¶æ—¶å‘¨æ—‹ï¼Œè´ºå–œåŠä¸§ï¼Œé—®ç–¾æµŽæ€¥ã€‚ ç…§æ–™å®¶äº‹ï¼Œæ€»ä»¥ä¿­å­—ä¸ºä¸»ï¼Œæƒ…æ„å®œåŽšï¼Œç”¨åº¦å®œä¿­ï¼Œæ­¤å±…å®¶ä¹¡ä¹‹è¦è¯€ä¹Ÿ æ€»å½“ä»¥å‹¤è‹¦ä¸ºä½“ï¼Œè°¦é€Šä¸ºç”¨ï¼Œä»¥è¯éª„ä½šä¹‹ç§¯ä¹  æ€»æ€•å­ä¾„ä¹ äºŽéª„å¥¢ä½šä¸‰å­—ï¼Œå®¶è´¥ç¦»ä¸å¾—ä¸ªå¥¢å­—ï¼Œäººè´¥ç¦»ä¸å¾—ä¸ªä½šå­—ï¼Œè®¨äººè°¦ç¦»ä¸å¾—ä¸ªéª„å­—ã€‚å¼Ÿåˆ‡æˆ’ä¹‹ï¼æ€»ä»¥è°¦å‹¤äºŒå­—ä¸ºä¸»ï¼Œæˆ’å‚²æƒ°ï¼Œ å¤©åœ°é—´æƒŸè°¦è°¨æ˜¯è½½ç¦ä¹‹é“ã€‚éª„åˆ™æ»¡ï¼Œæ»¡åˆ™å€¾çŸ£ã€‚å‡¡åŠ¨å£åŠ¨ç¬”ï¼ŒåŽŒäººä¹‹ä¿—ï¼Œå«Œäººä¹‹é„™ï¼Œè®®äººä¹‹çŸ­ï¼Œå‘äººä¹‹è¦†â‘ ï¼Œçš†éª„ä¹Ÿã€‚æ— è®ºæ‰€æŒ‡æœªå¿…æžœå½“ï¼Œå³ä½¿ä¸€ä¸€åˆ‡å½“å·²ä¸ºå¤©é“æ‰€ä¸è®¸ æ¬²åŽ»éª„å­—ï¼Œæ€»ä»¥ä¸è½»éžç¬‘äººä¸ºç¬¬ä¸€ä¹‰ï¼Œæ¬²åŽ»æƒ°å­—ï¼Œæ€»ä»¥ä¸æ™èµ·â‘¡ä¸ºç¬¬ä¸€ä¹‰ å®¶ä¸­å…„å¼Ÿå­ä¾„ï¼ŒæƒŸå½“è®°ç¥–çˆ¶è¿™å…«ä¸ªå­—ï¼Œæ›°è€ƒå®æ—©æ‰«ï¼Œä¹¦è”¬é±¼çŒªã€‚åˆè°¨è®°ç¥–çˆ¶ä¹‹ä¸‰ä¸ä¿¡ï¼Œæ›°ä¸ä¿¡åœ°å¸ˆï¼Œä¸ä¿¡åŒ»è¯ï¼Œä¸ä¿¡åƒ§å·«ã€‚ä½™æ—¥è®°å†Œä¸­ï¼Œåˆæœ‰å…«æœ¬ä¹‹è¯´ï¼Œæ›°è¯»ä¹¦ä»¥è®­è¯‚ä¸ºæœ¬ï¼Œä½œè¯—æ–‡ä»¥å£°è°ƒä¸ºæœ¬ï¼Œäº‹äº²ä»¥å¾—æ¬¢å¿ƒä¸ºæœ¬ï¼Œå…»èº«ä»¥æˆ’æ¼æ€’ä¸ºæœ¬ï¼Œç«‹èº«ä»¥ä¸å¦„è¯­ä¸ºæœ¬ï¼Œå±…å®¶ä»¥ä¸æ™èµ·ä¸ºæœ¬ï¼Œä½œå®˜ä»¥ä¸è¦é’±ä¸ºæœ¬ï¼Œè¡Œå†›ä»¥ä¸æ‰°æ°‘ä¸ºæœ¬ã€‚æ­¤å…«æœ¬è€…ï¼Œçš†ä½™é˜…åŽ†è€Œç¡®æœ‰æŠŠæ¡ä¹‹è®ºï¼Œå¼Ÿäº¦å½“æ•™è¯¸å­ä¾„è°¨è®°ä¹‹ã€‚æ— è®ºä¸–ä¹‹æ²»ä¹±ï¼Œå®¶ä¹‹è´«å¯Œï¼Œä½†èƒ½å®ˆæ˜Ÿå†ˆä¹‹å…¬å…«å­—ï¼Œä¸Žä½™ä¹‹å…«æœ¬ï¼Œæ€»ä¸å¤±ä¸ºä¸Šç­‰äººå®¶ã€‚ ä¿­ä»¥å…»å»‰ï¼Œç›´è€Œèƒ½å¿ æœªæœ‰é’±å¤šè€Œå­å¼Ÿä¸éª„è€…ä¹Ÿï¼Œå¾å…„å¼Ÿæ¬²ä¸ºå…ˆäººç•™é—æ³½ï¼Œä¸ºåŽäººæƒœä½™ç¦ï¼Œé™¤åŽ»å‹¤ä¿­äºŒå­—ï¼Œåˆ«æ— åšæ³• ä½™æ•™å„¿å¥³è¾ˆï¼ŒæƒŸä»¥å‹¤ä¿­è°¦ä¸‰å­—ä¸ºä¸»ã€‚ ç››åä¹‹ä¸‹ï¼Œå…¶å®žéš¾å‰¯ï¼Œå¼Ÿé¡»æ…Žä¹‹åˆæ…Ž ä¸€åˆ™æˆ‘å®¶æ°”è¿å¤ªç››ï¼Œä¸å¯ä¸æ ¼å¤–å°å¿ƒï¼Œä»¥ä¸ºæŒç›ˆä¿æ³°ä¹‹é“ï¼Œæ—§å€ºå°½æ¸…ï¼Œåˆ™å¥½å¤„å¤ªå…¨ï¼Œæç›ˆæžç”Ÿäºï¼Œç•™å€ºä¸æ¸…ï¼Œåˆ™å¥½ä¸­ä¸è¶³ï¼Œäº¦å¤„ä¹ä¹‹æ³• å…¶èˆ…ä¹‹å¿ƒï¼Œæˆ‘å¼Ÿä»¥ä¸ºå¯ä¹Žï¼Ÿå…°å§Šè•™å¦¹ï¼Œå®¶è¿çš† æ²»å†›æ€»é¡»è„šè¸å®žåœ°ï¼Œå…‹å‹¤å°ç‰©ï¼Œä¹ƒå¯æ—¥èµ·è€Œæœ‰åŠŸï¼Œå‡¡ä¸Žäººæ™‹æŽ¥â‘ å‘¨æ—‹ï¼Œè‹¥æ— çœŸæ„åˆ™ä¸è¶³ä»¥æ„Ÿäººï¼Œç„¶å¾’æœ‰çœŸæ„ï¼Œè€Œæ— æ–‡é¥°ä»¥å°†ä¹‹ï¼Œåˆ™çœŸæ„äº¦æ— æ‰€æ‰˜ä¹‹ä»¥å‡ºï¼Œç¤¼æ‰€ç§°â€œæ— æ–‡ä¸è¡Œâ€ä¹Ÿ ä¹¦è”¬çŒªé±¼ï¼Œè€ƒæ—©æ‰«å®ï¼Œå¸¸è®¾å¸¸è¡Œï¼Œå…«è€…éƒ½å¥½ï¼Œåœ°å‘½åŒ»ç†ï¼Œåƒ§å·«ç¥ˆç¥·ï¼Œç•™å®¢æ¬ ä½ï¼Œå…­è€…ä¿±æ¼ å‡¡äº‹çš†è´µä¸“ï¼Œæ±‚å¸ˆä¸ä¸“ï¼Œåˆ™å—ç›Šä¹Ÿä¸å…¥ï¼Œæ±‚å‹ä¸ä¸“ï¼Œåˆ™åšçˆ±è€Œä¸äº²ï¼Œå¿ƒæœ‰æ‰€ä¸“å®—ï¼Œè€Œåšè§‚ä»–æ¶‚ä»¥æ‰©å…¶åªï¼Œäº¦æ— ä¸å¯ï¼Œæ— æ‰€ä¸“å®—ï¼Œè€Œè§å¼‚æ€è¿ï¼Œæ­¤çœ©å½¼å¤ºâ‘ ï¼Œåˆ™å¤§ä¸å¯ å¿…é¡»äº²è¿‘è‰¯å‹ï¼Œæ®·å‹¤äº²è¿‘ï¼Œäº²è¿‘æ„ˆä¹…ï¼ŒèŽ·ç›Šæ„ˆå¤š äº¤å‹é¡»å‹¤åŠ æ¥å¾€ ä»¥åŽå‡¡äº‹ä¸å¯å äººåŠç‚¹ä¾¿ç›Šï¼Œä¸å¯è½»å–äººè´¢ï¼Œåˆ‡è®°åˆ‡è®° è´¤å¼Ÿä»Žäº‹å¤šèºè€Œå°‘é™ï¼Œä»¥åŽå°šæœŸä¸‰æ€ å±…å®˜ä»¥è€çƒ¦ä¸ºç¬¬ä¸€è¦ä¹‰ æ­¤å·²éœ²å‡ºä¸è€çƒ¦ä¹‹ç«¯å€ªï¼Œå°†æ¥æä¸å…äºŽé¾ƒé¾‰ ä½™ç”Ÿå¹³äºŽæœ‹å‹ä¸­ï¼Œè´Ÿäººç”šå°‘ï¼ŒæƒŸè´Ÿæ¬¡é’å®žç”šï¼Œä¸¤å¼Ÿä¸ºæˆ‘è®¾æ³•ï¼Œæœ‰å¯æŒ½å›žä¹‹å¤„ï¼Œä½™ä¸æƒ®æ”¹è¿‡ä¹Ÿ è¿›è°è¨€æˆ’é™¤éª„çŸœ å¾æƒŸä»¥ä¸€å‹¤å­—æŠ¥å¾å›ï¼Œä»¥çˆ±æ°‘äºŒå­—ä¹¦æŠ¥å¾äº²ï¼Œ å‡¡æœ‰ä¸€é•¿ä¸€æŠ€è€…ï¼Œå…„æ–­ä¸æ•¢è½»è§† ä¸­åº¸å­¦é—®æ€è¾¨è¡Œäº”è€…ï¼Œå…¶è¦å½’äºŽæ€å¿…æ˜Žï¼ŒæŸ”å¿…å¼º]]></content>
      <categories>
        <category>è¯»ä¹¦</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[swiftUIç»ƒä¹ ]]></title>
    <url>%2F2019%2F06%2F15%2FswiftUI%E7%BB%83%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;è¦è¯´è¿™æ¬¡WWDCæœ€æƒŠè‰³çš„æ˜¯ä»€ä¹ˆï¼Ÿç»å¯¹æ˜¯swiftUIï¼å¥½é•¿æ—¶é—´æ²¡æ°´ç‚¹ä¸œè¥¿äº†ï¼ˆæ²¡æ—¶é—´ä¹Ÿæ²¡ç²¾åŠ›æ•´ç†ï¼‰ï¼Œä½†è¿™ä¸ªswiftUIæˆ‘ç¡®å®žæƒ³å‡‘ä¸ªçƒ­é—¹ï¼æ¯•ç«Ÿå¤ªå¥½çŽ©äº†ï¼å®˜æ–¹æ•™ç¨‹ï¼šhttps://developer.apple.com/tutorials/swiftui/ å»ºè®®å¤§å®¶è·Ÿç€å®˜æ–¹æ•™ç¨‹å­¦ä¸€éï¼å…¶å®žä¸ç”¨è‹±è¯­å¾ˆå¥½ï¼Œç›´æŽ¥çœ‹ä»£ç ä¹Ÿèƒ½çœ‹æ‡‚ä¸ªå¤§æ¦‚çš„! &emsp;&emsp;ç”±äºŽæ˜¯ç…§è¶…å®˜æ–¹æ•™ç¨‹ï¼Œæ²¡å•¥æŠ€æœ¯å«é‡ï¼é¡¹ç›®ä¸å‘äº†ï¼Œä¹Ÿæ²¡å¿…è¦ï¼é¼“åŠ±å¤§å®¶è‡ªå·±æŒ‰æ•™ç¨‹æ•²ä¸€æ•²çœ‹ä¸€çœ‹ï¼è¿™é‡Œå°±è´´ç‚¹æˆ‘è§‰å¾—å¥½çŽ©çš„ä»£ç  some å…³é”®å­—æ˜¯Swift 5.1 çš„æ–°ç‰¹æ€§ï¼Œä¸ªäººç†è§£å°±æ˜¯ä¸€ç§ç¡®å®šç±»åž‹ï¼Œå…·ä½“ä»€ä¹ˆç±»åž‹è°ƒç”¨è€…è‡ªå·±åŽ»çœ‹å‡½æ•°ã€‚å‚è€ƒï¼šhttps://stackoverflow.com/questions/56433665/what-is-the-some-keyword-in-swiftui å’Œ https://juejin.im/post/5cfb1217f265da1b8a4f0f14 123var body: some View &#123;Text(&quot;Hello World&quot;)&#125; ä½¿ç”¨UIKitæ–¹æ³•ï¼šæ–°å»ºswiftUI viewç”¨äºŽåŒ…è£…UIKitï¼Œå¹¶å®žçŽ°UIViewRepresentable 12345678910111213141516struct MapView : UIViewRepresentable &#123;typealias UIViewType = MKMapViewfunc makeUIView(context: UIViewRepresentableContext&lt;MapView&gt;) -&gt; MKMapView &#123;return MKMapView(frame: .zero)&#125;func updateUIView(_ uiView: MKMapView, context: UIViewRepresentableContext&lt;MapView&gt;) &#123;let coordinate = CLLocationCoordinate2D(latitude: 34.011286, longitude: -116.166868)let span = MKCoordinateSpan(latitudeDelta: 2.0, longitudeDelta: 2.0)let region = MKCoordinateRegion(center: coordinate, span: span)uiView.setRegion(region, animated: true)&#125;&#125; list çš„ identifiable çš„æ•°æ®ï¼Œä¸¤ç§æ–¹æ³•è®©æ•°æ®å˜æˆ identifiable ï¼š1ã€identified(by:) æä¾›ä¸€ä¸ªå”¯ä¸€keyï¼›2ã€éµå¾ª Identifiable åè®®ã€‚è¿™æ ·æ¯”OCçš„dequeueReusableCellWithIdentifierå¼ºå¤šäº†ï¼Œè™½ç„¶ä¸€èˆ¬ä¹Ÿæ˜¯ç›´æŽ¥ç”¨cellClassName 123List(landmarkData, id: \.id) &#123; landmark inLandmarkRow(landmark: landmark)&#125; æœ‰æ„æ€çš„å¯¼èˆª! NavigationView{} è¡¨ç¤ºæœ‰ä¸Šé¢çš„å¯¼èˆªæ¡ï¼æœ€ä¸»è¦æ˜¯NavigationButtonï¼Œè¿™ä¸ªå¾ˆæœ‰æ„æ€ï¼ä¸€èˆ¬UIKitå†™èµ·æ¥éœ€è¦èŽ·å–VCï¼ŒçŽ°åœ¨ä½¿ç”¨seiftUIè§£æ”¾äº†è¿™é¡¹å·¥ä½œï¼Œç›´æŽ¥ç”¨ä¸€ä¸ªç‰¹æ®Šçš„NavigationButtonå°±å¯ä»¥äº† 12345678910var body: some View &#123;NavigationView &#123;List(landmarkData) &#123; landmark inNavigationButton(destination: LandmarkDetail()) &#123;LandmarkRow(landmark: landmark)&#125;&#125;.navigationBarTitle(Text(&quot;Landmarks&quot;))&#125;&#125; @state çœ‹åˆ°stateè‚¯å®šæ˜¯çŠ¶æ€æœºï¼Œæˆ‘å¥½å¥‡åœ°æ˜¯æ˜¯ä¸æ˜¯ä¹Ÿè·Ÿflutterä¸€æ ·ï¼Œåˆ†ä¸ºStatelessWidgetså’Œ StatefulWidgetsï¼Œå‡ ç»æ£€ç´¢æ‰¾åˆ°ä¸€ç¯‡ https://mecid.github.io/2019/06/12/understanding-property-wrappers-in-swiftui/ ç®€å•æ€»ç»“ä¸€ä¸‹ï¼š @State ä¿®é¥°çš„å±žæ€§å‘ç”Ÿæ”¹å˜ï¼Œé€šçŸ¥ä¸€ä¸ªviewå‘ç”Ÿæ”¹å˜ @Binding æŠŠå€¼å±žæ€§å˜æˆå¼•ç”¨å±žæ€§ï¼Œä½¿ç”¨ $ å‰ç¼€æ¥è®¿é—®ä¸€ä¸ªçŠ¶æ€å˜é‡æˆ–è€…å®ƒçš„å±žæ€§çš„ binding @ObservedObject ç›‘å¬ä¸€ä¸ªå®žçŽ° ObservableObject åè®®çš„å¯¹è±¡ï¼Œå¯¹è±¡å†…éƒ¨å±žæ€§éœ€ç”¨@Published ä¿®é¥°ã€‚å¯é€šçŸ¥å¤šä¸ªview @EnvironmentObject ä¿®é¥°å…¨å±€å˜é‡çš„ ä¸€èˆ¬å’Œ BindableObjectåè®®ä¸€èµ·ç”¨äºŽviewModel @Environment ç›‘æŽ§ç³»ç»Ÿçº§åˆ«object1@State var showFavoritesOnly = false BindableObject ä¸€å¼€å§‹å†™domeæ—¶ï¼Œæˆ‘ç†è§£æ’‘äº†viewModelï¼Œä½†çŽ°åœ¨æƒ³æƒ³ç†è§£çš„æœ‰ç‚¹ç‹­éš˜ï¼Œåº”è¯¥æ˜¯æœ‰åå°„æœºåˆ¶çš„ç¼“å­˜ 123456789101112131415final class UserData: BindableObject &#123;let didChange = PassthroughSubject&lt;UserData, Never&gt;()var showFavoritesOnly = false &#123;didSet &#123;didChange.send(self)&#125;&#125;var landmarks = landmarkData &#123;didSet &#123;didChange.send(self)&#125;&#125;&#125; éšå¼åŠ¨ç”»ï¼Œç›´æŽ¥ç”¨ .animation() å³å¯ï¼Œç¡®å®žç®€å•å¤šäº† 12345678910Button(action: &#123;self.showDetail.toggle()&#125;) &#123;Image(systemName: &quot;chevron.right.circle&quot;).imageScale(.large).rotationEffect(.degrees(showDetail ? 90 : 0)).scaleEffect(showDetail ? 1.5 : 1).padding().animation(.spring())&#125; æ˜¾ç¤ºåŠ¨ç”»withAnimation 1234567891011Button(action: &#123;withAnimation &#123;self.showDetail.toggle()&#125;&#125;) &#123;Image(systemName: &quot;chevron.right.circle&quot;).imageScale(.large).rotationEffect(.degrees(showDetail ? 90 : 0)).scaleEffect(showDetail ? 1.5 : 1).padding()&#125; ç»„åˆåŠ¨ç”» 123456789101112var animation: Animation &#123;Animation.spring(initialVelocity: 5)&#125;var body: some View &#123;Capsule().fill(Color.gray).frame(height: height * heightRatio, alignment: .bottom).offset(x: 0, y: height * -offsetRatio).animation(animation))&#125; @Environment èƒ½ç›‘æŽ§å“ªäº›ç³»ç»Ÿçº§åˆ«value 12345678910@Environment(\.editMode) var modeextension EnvironmentValues &#123;@available(OSX, unavailable)@available(watchOS, unavailable)public var editMode: Binding&lt;EditMode&gt;?&#125;ç­‰ç­‰ swiftUIå’ŒUIKitçš„åè°ƒå‘˜ 123456789101112131415161718192021222324252627282930313233343536struct PageControl: UIViewRepresentable &#123;var numberOfPages: Int@Binding var currentPage: Intfunc makeCoordinator() -&gt; Coordinator &#123;Coordinator(self)&#125;func makeUIView(context: Context) -&gt; UIPageControl &#123;let control = UIPageControl()control.numberOfPages = numberOfPagescontrol.addTarget(context.coordinator,action: #selector(Coordinator.updateCurrentPage(sender:)),for: .valueChanged)return control&#125;func updateUIView(_ uiView: UIPageControl, context: Context) &#123;uiView.currentPage = currentPage&#125;class Coordinator: NSObject &#123;var control: PageControlinit(_ control: PageControl) &#123;self.control = control&#125;@objcfunc updateCurrentPage(sender: UIPageControl) &#123;control.currentPage = sender.currentPage&#125;&#125;&#125;]]></content>
      <categories>
        <category>swift</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterå…¥é—¨å­¦ä¹ æ­¥éª¤]]></title>
    <url>%2F2019%2F01%2F01%2FFlutter%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%E6%AD%A5%E9%AA%A4%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;æ–°å¹´æ–°æ°”è±¡ï¼Œä½†â€¦æˆ‘å´ä¸çŸ¥é“æ°´å•¥ï¼Flutterä¸Šæ¬¡çœ‹åˆ°è¿˜æ˜¯0.3è¿™æ¬¡å†çœ‹å·²ç»1.0äº†ï¼Œå¿…é¡»çš„æ‹¿å‡ºæ—¶é—´å¥½å¥½å­¦ä¹ å­¦ä¹ ï¼Œä½†çŽ°åœ¨ä¹Ÿä»…ä»…æ˜¯åˆšé è¿‘Flutteré—¨æ§›ï¼Œè¿œè¿œæ²¡è¾¾åˆ°å…¥é—¨çš„æ ‡å‡†ï¼šçŸ¥è¯†è¦å½¢æˆä½“ç³»ï¼æž„å»ºç®€å•é¡µé¢è¿™ç§ä¹Ÿæ²¡å•¥å¯æ°´çš„ï¼Œæ¯•ç«ŸFlutterä¸­æ–‡ç½‘ä¸Šè®²çš„éžå¸¸è¯¦ç»†, githubä¹Ÿæœ‰å¤§é‡çš„é—®é¢˜è§£å†³æ–¹æ¡ˆã€‚äºŽæ˜¯å°±æŠŠå‰æ®µæ—¶é—´çš„å­¦ä¹ æ­¥éª¤å‘å‡ºæ¥å§ 1 å®‰è£…&emsp;&emsp;æŒ‰Flutterä¸­æ–‡ç½‘ å®‰è£…çŽ¯å¢ƒï¼Œå¯èƒ½é‡åˆ°é—®é¢˜ä¸‹é¢åˆ—ä¸¾ å®‰è£…è¿‡ç¨‹ä¸­å¦‚æžœéœ€è¦å…³é—­SIPï¼Œå¦‚æžœç”µè„‘å¯ç”¨äº†SIPï¼ˆSystem Integrity Protectionï¼‰ï¼Œå¢žåŠ äº†rootlessæœºåˆ¶ 1.1ï¼Œé‡å¯ï¼Œè¿‡ç¨‹ä¸­æŒ‰ä½ command+Rï¼Œè¿›å…¥ä¿æŠ¤æ¨¡å¼ 1.2ï¼Œæ‰“å¼€terminalç»ˆç«¯ï¼Œè¾“å…¥ csrutil disable 1.3ï¼Œå†æ¬¡é‡å¯ï¼Œå³å¯å¯¹ usr/bin ç›®å½•ä¸‹æ–‡ä»¶è¿›è¡Œä¿®æ”¹ 1.4ï¼Œå¦‚æžœè¦æ¢å¤ä¿æŠ¤æœºåˆ¶ï¼Œé‡æ–°è¿›å…¥ä¿æŠ¤æ¨¡å¼ï¼Œè¾“å…¥ csrutil enable Android studio æ‰¾ä¸åˆ° Flutter &emsp;&emsp;Android studio -&gt; Preferences -&gt; System Setting -&gt; updates -&gt; åŽ»æŽ‰ use secure connection PATHçŽ¯å¢ƒæœªç”Ÿæ•ˆ &emsp;&emsp;userç›®å½• -&gt; command+shift+. æ‰“å¼€éšè—æ–‡ä»¶ -&gt; æ‰“å¼€ .bash_profile æ–‡ä»¶ï¼Œæ·»åŠ ç›¸åº”PATH -&gt; ä¿å­˜ -&gt; é‡å¯ è¿è¡Œflutterå°±å¡æ­» &emsp;&emsp;å¶ç„¶å‘çŽ°å…¶å®žæ ¹æœ¬åŽŸå› æ˜¯macé™åˆ¶äº†å•è¿›ç¨‹æœ€å¤§çº¿ç¨‹ä¸ªæ•°ä¸º64ï¼Œè¶…è¿‡64å°±å¡æ­»äº†ï¼éªŒè¯æ–¹æ³•ï¼šæ´»åŠ¨ç›‘è§†å™¨ -&gt; åŒå‡»android studio -&gt; å–æ · -&gt; æŸ¥çœ‹å¡æ­»ä¿¡æ¯ï¼ &emsp;&emsp;å‡ ç»å‘¨æŠ˜æ‰¾åˆ°ä¿®æ”¹å†…æ ¸çš„æ–¹æ³•ï¼švim /etc/sysctl.conf æ·»åŠ å¦‚ä¸‹ä»£ç  kern.wq_max_constrained_threads=128 ä¿®æ”¹ä¿å­˜åŽè°ƒç”¨ sysctl -p åŠ è½½æ–°é…ç½®ï¼Œå°†å•ä¸ªè¿›ç¨‹æœ€å¤§çº¿ç¨‹æ•°æå‡è‡³128ä¸ªã€‚ &emsp;&emsp;PS:kern.wq_max_constrained_threadsè¿™ä¸ªå‚æ•°æ˜¯é€šè¿‡å…¨å±€æœ64æœå‡ºæ¥çš„ç„¶åŽæ…¢æ…¢è¯•å‡ºæ¥çš„ï¼ŒåŒå¿—ä»¬ä¿®æ”¹å‰è®°å¾—å¤‡ä»½ Dart SDK is not configured, android Studio -&gt; perference -&gt; framewoek -&gt; flutter 2 Flutterçš„Stateç±»&emsp;&emsp;é‡ç‚¹ï¼Œå“åº”å¼ç¼–ç¨‹æ ¸å¿ƒã€‚å…ˆè®°ä½å¦‚ä¸‹ä¸¤å¼ å›¾ï¼Œå‚è€ƒ &emsp;&emsp;State ç”Ÿå‘½å‘¨æœŸ 1234567891011121314151617181920graph TBA[å¼€å§‹]--&gt;B[æž„é€ å‡½æ•°]subgraph æž„å»ºB--&gt;C[initState]C--&gt;D[didChangeDependencies]D--&gt;E[build]endE--&gt;F&#123;æ˜¾ç¤ºåœ¨RenderTree&#125;subgraph æ”¹å˜F--&gt;G[ç»„ä»¶çŠ¶æ€æ”¹å˜]G--&gt;H[didUpdateWidget]H--&gt;I[build]I--&gt;Fendsubgraph é”€æ¯F--&gt;J[ç§»é™¤æŽ‰]J--&gt;K[deactivate]K--&gt;L[dispose]L--&gt;M[ç»“æŸ]end &emsp;&emsp;Stateless VS Stateful1234567891011graph TBsubgraph StatelessWidgetsA[constructor func]--&gt;B[build]endsubgraph StatefulWidgetsC[constructor func]--&gt;D[initState]D--&gt;F[build]F--&gt;E[setState]E--&gt;G[didUpdateWidget]G--&gt;H[build]end 3 Dartè¯­æ³•é¢„è§ˆ&emsp;&emsp;Dart è¯­æ³•å¯¹å­¦è¿‡swiftæˆ–è€…å­¦è¿‡JSçš„åŒå­¦ï¼Œæˆ‘å»ºè®®ç›´æŽ¥é€Ÿè¯»Dart è¯­æ³•é¢„è§ˆ1234567891011121314151617181920212223242526class Spacecraft &#123;String name;DateTime launchDate;int launchYear;// Constructor, including syntactic sugar for assignment to members.Spacecraft(this.name, this.launchDate) &#123;// Pretend the following is something you&apos;d actually want to run in// a constructor.launchYear = launchDate?.year;&#125;// Named constructor that forwards to the default one.Spacecraft.unlaunched(String name) : this(name, null);// Method.void describe() &#123;print(&apos;Spacecraft: $name&apos;);if (launchDate != null) &#123;int years = new DateTime.now().difference(launchDate).inDays ~/ 365;print(&apos;Launched: $launchYear ($years years ago)&apos;);&#125; else &#123;print(&apos;Unlaunched&apos;);&#125;&#125;&#125; 4 Flutterä¸­æ–‡ç½‘ ç¼–å†™ç¬¬ä¸€ä¸ªFlutteråº”ç”¨ äº†è§£æ›´å¤š 5 å…ˆæŠ„å‡ ä¸ªdemo è‡ªå¸¦ç¤ºä¾‹ flutter/examples å…¶å®ƒdome https://github.com/iampawan/FlutterExampleApps èµ„æ–™æ±‡æ€» https://github.com/Solido/awesome-flutter 6 æŒ‰éƒ¨å°±ç­&emsp;&emsp;æŒ‰ä¸­æ–‡ç½‘ç›®å½•å¾€ä¸‹ç¢ç£¨å°±å¥½äº† 7 äº†è§£æ›´å¥½ Flutter for iOS å¼€å‘ é€Ÿè¯»å³å¯ Flutterä¸­æ–‡ç½‘-å¸¸è§é—®é¢˜ Flutterå³ä¸Šè§’çš„ã€ŠFlutterå®žæˆ˜ã€‹å¿«é€Ÿæµè§ˆå³å¯ã€‚é™„ä¸Šæˆ‘ç”»çš„æ€ç»´å¯¼å›¾ é“¾æŽ¥:https://pan.baidu.com/s/1V9xufLLp9oIz0AcApnjhNg æå–ç : 9w7a 8 Hot reload ï¼ˆçƒ­é‡è½½ï¼‰Not Hot fix ï¼ˆçƒ­ä¿®å¤ï¼‰9 add flutter to App å®˜ç½‘ https://github.com/flutter/flutter/wiki/Add-Flutter-to-existing-apps å®˜æ–¹domeï¼ˆä¸èƒ½ç”¨ï¼‰ https://github.com/flutter/ios_add2app ï¼Œç¨å¾®æ”¹äº†æ”¹ é“¾æŽ¥:https://pan.baidu.com/s/1V9xufLLp9oIz0AcApnjhNg æå–ç : 9w7a 10 æˆ‘é‡åˆ°çš„å°é—®é¢˜ android studio æ–­ç‚¹è°ƒè¯•å’Œé«˜çº§è°ƒè¯• Flutterè§†å›¾åŸºç¡€ç®€ä»‹â€“Widgetã€Elementã€RenderObject Widgetæ˜¯ç±»å®šä¹‰ï¼ŒElementæ˜¯å®žä¾‹å¯¹è±¡ï¼ŒrednerObjectè´Ÿè´£å®žä¾‹å¯¹è±¡çš„å¸ƒå±€ What is the difference between Material and MaterialApp in Flutter? MaterialAppå®šä¹‰åŒ…å«appbarä¹‹ç±»çš„appï¼ŒScaffoldå¸®åŠ©æž„å»ºå¯¹åº”çš„appbar TapboxA({Key key}) : super(key: key); æ˜¯ä»€ä¹ˆæ„æ€ Flutter Engineçº¿ç¨‹ç®¡ç†ä¸ŽDart Isolateæœºåˆ¶ Dart - Isolate å¹¶å‘ Flutterå¸¸ç”¨widget â€œExpandedâ€ï¼Œâ€œFlexibleâ€ Flutter Container å‚æ•°è¯¦è§£ Dartå­¦ä¹ ä¹‹æ–¹æ³•å‡½æ•° How do getters and setters change properties in Dart? Dartå¾ªçŽ¯å¼•ç”¨ï¼ŸJavaçš„åžƒåœ¾å›žæ”¶å¯é‡‡ç”¨å¼•ç”¨è®¡æ•°å’Œå¯»æ ¹ä¸¤ç§ç®—æ³•ï¼Œå³javaè™šæ‹Ÿæœºå¾ªçŽ¯å¼•ç”¨ä¸ç”¨ç®¡ï¼Dartä¹Ÿæ˜¯åžƒåœ¾å›žæ”¶ï¼Œåº”è¯¥ä¹Ÿä¸ç”¨ç®¡ï¼Œæ²¡æ‰¾åˆ°å…³äºŽDartå¾ªçŽ¯å¼•ç”¨çš„èµ„æ–™ Dartä¸­å®žçŽ°å•ä¾‹æ¨¡å¼ rerturn (); ç”¨åˆ†å·ï¼Œå…¶å®ƒçš„æƒ…å†µç”¨ , é€—å· Dartï¼šå¹¶ä¸æ”¯æŒå‡½æ•°çš„é‡è½½ â€œstaticâ€, â€œfinalâ€, and â€œconstâ€ in Dart lutterçš„ValueChanged å¦‚æžœæœ‰å¤šä¸ªä¸åŒçš„å€¼éƒ½éœ€è¦ç›‘å¬æ€Žä¹ˆåŠžï¼Ÿ Category ï¼Ÿ runtime ï¼Ÿ]]></content>
      <categories>
        <category>flutter</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¤ä¹ swiftï¼šSwift tips & tricksç¬”è®°ä¸‹]]></title>
    <url>%2F2018%2F10%2F28%2F%E5%A4%8D%E4%B9%A0swift%EF%BC%9ASwift-tips-tricks%E7%AC%94%E8%AE%B0%E4%B8%8B%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;ä¸Šç¯‡å­¦ä¹ äº†å‰50ä¸ªï¼Œæœ¬æ–‡å­¦ä¹ å‰©ä¸‹çš„ã€‚æ‹†æˆ2ç¯‡æ˜¯å› ä¸ºæœ‰é“åŒæ­¥å¤ªå‘äº†ï¼Œä¸Šç¯‡å‰50ä¸ªå°±ä¸€ç›´åŒæ­¥å¤±è´¥ï¼ &emsp;&emsp;æƒ³çœ‹å…¨éƒ¨çš„è‡ªå·±çœ‹å¤§ç¥žçš„Swift tips &amp; tricksï¼Œ UIView bounds and transforms 123456let view = UIView()view.frame.size = CGSize(width: 100, height: 100)view.transform = CGAffineTransform(scaleX: 2, y: 2)print(view.frame) // (-50.0, -50.0, 200.0, 200.0)print(view.bounds) // (0.0, 0.0, 100.0, 100.0) æ‰©å±•equatableå®žçŽ° å¤šå€¼å‘½ä¸­ 1234567extension Equatable &#123;func isAny(of candidates: Self...) -&gt; Bool &#123;return candidates.contains(self)&#125;&#125;let isHorizontal = direction.isAny(of: .left, .right) é™åˆ¶è¯¥åè®®åªé€‚ç”¨äºŽclassç±»åž‹ 1234// é€šè¿‡å°†AnyObjectåè®®æ·»åŠ åˆ°åè®®çš„ç»§æ‰¿åˆ—è¡¨ä¸­ï¼Œæ¥é™åˆ¶è¯¥åè®®åªé€‚ç”¨äºŽclassç±»åž‹ï¼Œè€Œä¸é€‚ç”¨äºŽæžšä¸¾å’Œç»“æž„ä½“ã€‚protocol DataContainer: AnyObject &#123;var data: Data? &#123; get set &#125;&#125; æŠŠå®žä¾‹æ–¹æ³•å½“åšstaticæ–¹æ³•è°ƒç”¨! å¥½ç‰›é€¼ 123456789101112131415161718192021In Swift, you can call any instance method as a static function and it will return a closure representing that method. This is how running tests using SPM on Linux works.More about this topic in my blog post &quot;https://www.swiftbysundell.com/posts/first-class-functions-in-swiftt&quot;.// This produces a &apos;() -&gt; Void&apos; closure which is a reference to the// given view&apos;s &apos;removeFromSuperview&apos; method.let closure = UIView.removeFromSuperview(view)// We can now call it just like we would any other closure, and it// will run &apos;view.removeFromSuperview()&apos;closure()// This is how running tests using the Swift Package Manager on Linux// works, you return your test functions as closures:extension UserManagerTests &#123;static var allTests = [(&quot;testLoggingIn&quot;, testLoggingIn),(&quot;testLoggingOut&quot;, testLoggingOut),(&quot;testUserPermissions&quot;, testUserPermissions)]&#125; whereå­å¥å’Œassociatedå…³è”ç±»åž‹æä¾›æ›´å¤šè‡ªç”± 12345678910111213public protocol PathFinderMap &#123;associatedtype Node// Using the &apos;where&apos; clause for associated types, we can// ensure that a type meets certain requirements (in this// case that it&apos;s a sequence with Node elements).associatedtype NodeSequence: Sequence where NodeSequence.Element == Node// Instead of using a concrete type (like [Node]) here, we// give implementors of this protocol more freedom while// still meeting our requirements. For example, one// implementation might use Set&lt;Node&gt;.func neighbors(of node: Node) -&gt; NodeSequence&#125; å®šä¹‰option setsï¼Œå³OCçš„NS_OPTIONS 12345678// å¿…é¡»æ˜¯å®žçŽ°OptionSetåè®®struct Options: OptionSet &#123;static let saveToDisk = Options(rawValue: 1)static let clearOnMemoryWarning = Options(rawValue: 1 &lt;&lt; 1)static let clearDaily = Options(rawValue: 1 &lt;&lt; 2)let rawValue: Int&#125; å¯ç”¨ChildViewControllerï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨è°ƒæ•´å¤§å°ä»¥åŒ¹é…å…¶çˆ¶è§†å›¾ ä½¿ç”¨å…ƒç»„æ¥è®¾ç½®viewçŠ¶æ€ï¼Œå…¶å®žå°±æ˜¯ä»£æ›¿modelï¼Œä½†ä¸å»ºè®®è¿™ä¹ˆæžï¼å› ä¸ºæ²¡æœ‰è§„èŒƒï¼Œä½¿ç”¨Classå¯æ˜Žç¡®å«ä¹‰ï¼Œä½¿ç”¨structè¿˜èƒ½å®žçŽ°MVVMï¼Œå…ƒç¥–æ˜¯æœ€å·®çš„é€‰æ‹©äº†ï¼Œé™¤éžç”¨äºŽå¿«é€Ÿæµ‹è¯• swiftè®¿é—®å‰ªè´´æ¿ 123import Cocoalet clipboard = NSPasteboard.general.string(forType: .string) å·§ç”¨selfæ¥å®žçŽ°é“¾å¼â€¦é¢ä¸çŸ¥é“å«ä»€ä¹ˆï¼ä¸è¿‡ï¼Œå…¶å®žå¯ä»¥å®žçŽ°é“¾å¼ç¼–ç¨‹ 1234567891011121314151617181920212223// Extension adding builder pattern-like properties that return// a new sequence value with the given configuration appliedextension FileSequence &#123;var recursive: FileSequence &#123;var sequence = selfsequence.isRecursive = truereturn sequence&#125;var includingHidden: FileSequence &#123;var sequence = selfsequence.includeHidden = truereturn sequence&#125;&#125;// BEFORElet files = folder.makeFileSequence(recursive: true, includeHidden: true)// AFTERlet files = folder.files.recursive.includingHidden ä½¿ç”¨&amp; æ¥åˆæˆåè®® UIViewController &amp; LoadableFromURL ã€ protocolA &amp; protocolB Parsing command line arguments using UserDefaults 1234567A really cool &quot;hidden&quot; feature of UserDefaults is that it contains any arguments that were passed to the app at launch!Super useful both in Swift command line tools &amp; scripts, but also to temporarily override a value when debugging iOS apps.let defaults = UserDefaults.standardlet query = defaults.string(forKey: &quot;query&quot;)let resultCount = defaults.integer(forKey: &quot;results&quot;) æ³›åž‹ 1234567typealias Pair&lt;T&gt; = (T, T)extension Game &#123;func calculateScore(for players: Pair&lt;Player&gt;) -&gt; Int &#123;...&#125;&#125; associatedtypeçš„ä½¿ç”¨,typealias é‡å‘½åRawValueæ˜¯å…³é”® 12345678910111213protocol UnboxTransformable &#123;associatedtype RawValuestatic func transform(_ value: RawValue) throws -&gt; Self?&#125;extension Array: UnboxTransformable where Element: UnboxTransformable &#123;typealias RawValue = [Element.RawValue]static func transform(_ value: RawValue) throws -&gt; [Element]? &#123;return try value.compactMap(Element.transform)&#125;&#125; throwæ˜¯æœ¬å‡½æ•°å¼‚å¸¸ï¼Œrethrowæ˜¯æœ¬å‡½æ•°æ²¡äº‹ä½†æœ¬å‡½æ•°çš„é—­åŒ…å¼‚å¸¸ï¼ˆå³é—­åŒ…æœ‰throwï¼‰ è”ç±»åž‹çš„é»˜è®¤å€¼ 1234567891011121314151617protocol Identifiable &#123;associatedtype RawIdentifier: Codable = Stringvar id: Identifier&lt;Self&gt; &#123; get &#125;&#125;struct User: Identifiable &#123;let id: Identifier&lt;User&gt;let name: String&#125;struct Group: Identifiable &#123;typealias RawIdentifier = Intlet id: Identifier&lt;Group&gt;let name: String&#125; Encodable &amp; Decodableçš„æ‰©å±• 12345678910111213141516171819202122extension Encodable &#123;func encoded() throws -&gt; Data &#123;return try JSONEncoder().encode(self)&#125;&#125;extension Data &#123;func decoded&lt;T: Decodable&gt;() throws -&gt; T &#123;return try JSONDecoder().decode(T.self, from: self)&#125;&#125;let data = try user.encoded()// By using a generic type in the decoded() method, the// compiler can often infer the type we want to decode// from the current context.try userDidLogin(data.decoded())// And if not, we can always supply the type, still making// the call site read very nicely.let otherUser = try data.decoded() as User Matching multiple enum cases with associated values 1234567891011121314151617enum DownloadState &#123;case inProgress(progress: Double)case paused(progress: Double)case cancelledcase finished(Data)&#125;func downloadStateDidChange(to state: DownloadState) &#123;switch state &#123;case .inProgress(let progress), .paused(let progress):updateProgressView(with: progress)case .cancelled:showCancelledMessage()case .finished(let data):process(data)&#125;&#125; å±•å¼€å¯é€‰å€¼æˆ–æŠ›å‡ºé”™è¯¯ 123456789101112extension Optional &#123;func orThrow(_ errorExpression: @autoclosure () -&gt; Error) throws -&gt; Wrapped &#123;switch self &#123;case .some(let value):return valuecase .none:throw errorExpression()&#125;&#125;&#125;let file = try loadFile(at: path).orThrow(MissingFileError()) ä½¿ç”¨associatedtypeçº¦æŸprotocol 1234567891011121314151617protocol Component &#123;associatedtype Containerfunc add(to container: Container)&#125;// Protocols that inherit from other protocols can include// constraints to further specialize them.protocol ViewComponent: Component where Container == UIView &#123;associatedtype View: UIViewvar view: View &#123; get &#125;&#125;extension ViewComponent &#123;func add(to container: UIView) &#123;container.addSubview(view)&#125;&#125; &emsp;&emsp;æœ€åŽ:ä¸‹ç¯‡å…¶å®žå¹²è´§ä¸æ˜¯å¾ˆå¤šï¼Œè€Œä¸”å†™è¿™ä¸ªçš„å¤§ç¥žéžå¸¸æŽ¨å´‡å…ƒç»„ï¼Œå…‰å…ƒç¥–å°±å†™äº†ä¸€å¤§å †]]></content>
      <categories>
        <category>swift</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¤ä¹ swiftï¼šSwift tips & tricksç¬”è®°ä¸Š]]></title>
    <url>%2F2018%2F10%2F27%2F%E5%A4%8D%E4%B9%A0swift%EF%BC%9ASwift-tips-tricks%E7%AC%94%E8%AE%B0%E4%B8%8A%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;æœ¬æ–‡åªæ‘˜æŠ„äº†è‡ªå·±è§‰å¾—æœ‰ç”¨çš„tipå¹¶åŠ äº†ç‚¹è‡ªå·±çš„ç†è§£ï¼Œå¹¶ä¸æ˜¯å…¨éƒ¨tipsã€‚æƒ³çœ‹å…¨éƒ¨çš„è‡ªå·±çœ‹å¤§ç¥žçš„Swift tips &amp; tricks åµŒå¥—ç±»åž‹ï¼Œå¥½å¤„å¤§å¤§æ»´ï¼æƒé™æŽ§åˆ¶ã€ç»“æž„åˆ’åˆ†ç­‰ç­‰ è‡ªåŠ¨é—­åŒ…ï¼Œèƒ½ä½¿ç”¨è‡ªåŠ¨é—­åŒ…ç±»åž‹æ˜¯æ˜¯è¿™æ ·çš„() -&gt; T 123456789101112131415161718192021func logIfTure(_ predicate: ()-&gt;Bool)&#123;if predicate() &#123;print(&quot;jzk&quot;)&#125;&#125;logIfTure(&#123; () -&gt; Bool inreturn 2 &gt; 1&#125;)logIfTure(&#123;return 3 &gt; 2&#125;)logIfTure(&#123;4&gt;3&#125;)logIfTure&#123;5&gt;4&#125;// è‡ªåŠ¨é—­åŒ…å†™èµ·æ¥å°±ä¼˜é›…å¤šäº†func logIfTure2(_ predicate:@autoclosure ()-&gt;Bool)&#123;if predicate() &#123;print(&quot;jzk&quot;)&#125;&#125;logIfTure2(6&gt;5) ä½¿ç”¨typealiaseså‡å°‘é•¿åº¦ 12typealias DownSuccess = (json: NSURLResponse, filePath: String?) -&gt; ()func Post(url:String? ,success: DownSuccess)&#123;&#125; ä½¿ç”¨ä¸Žåº“åŒåçš„ç±»ã€ç»“æž„ä½“â€¦ï¼Œæ…Žç”¨ï¼è¿˜æ˜¯ä¸é‡å¤çš„å¥½ 123456extension Command &#123;enum Error: Swift.Error &#123;case missingcase invalid(String)&#125;&#125; ä½¿ç”¨#functionæ¥ä¿è¯UserDefaultçš„keyä¸é‡å¤! æ…Žç”¨ï¼Œæ€è·¯ä¸é”™ï¼Œä½†ä¸ä¸¥è°¨ 123456extension UserDefaults &#123;var onboardingCompleted: Bool &#123;get &#123; return bool(forKey: #function) &#125;set &#123; set(newValue, forKey: #function) &#125;&#125;&#125; æŠŠfuncå’Œæ“ä½œç¬¦å½“åšé—­åŒ…ä¼ é€’ 12let array = [3, 9, 1, 4, 6, 2]let sorted = array.sorted(by: &lt;) ä½¿ç”¨guardæ‹†åˆ†æ¡ä»¶åˆ¤æ–­ 12guard maxObjectDepth &gt; 0 else &#123; return &#125;guard maxObjectDepth &lt; 100 else &#123; return &#125; ä¸è¦ä½¿ç”¨swithçš„defaultï¼Œç›®çš„å¼ºåˆ¶ç¼–è¯‘å™¨æ£€æŸ¥caseæ˜¯å¦å®Œå…¨ ä½¿ç”¨ .è¯­æ³•å’Œé—­åŒ…æ¥åˆå§‹åŒ– 123456789101112131415161718class Logger &#123;public func logSomething(_ str: String = &quot;&quot;) &#123;print(&quot;----\(str)&quot;)&#125;&#125;// ç¬¬ä¸€ä¸ªæ¯”è¾ƒå¥½ç†è§£ï¼Œå‚æ•°é»˜è®¤å€¼func test(log: Logger = .init())&#123;log.logSomething(&quot;1&quot;);&#125;test();/*ä½†è¿™ä¸ªæˆ‘å°±ç†è§£ä¸äº†äº†ï¼Œæ³¨æ„Logger.initåŽé¢æ²¡æœ‰æ‹¬å·*/func test2(log:@escaping () -&gt; Logger = Logger.init) &#123;let log2 = log();log2.logSomething(&quot;2&quot;);&#125;test2(); ä½¿ç”¨ === æ¯”è¾ƒå†…å­˜ç›¸ç­‰ æžšä¸¾å¯æœ‰å…³è”å€¼ 1234public enum JSONKey &#123;case index(Int)case key(String)&#125; å¯å˜å‚æ•° 12345extension Canvas &#123;func add(_ shapes: Shape...) &#123;shapes.forEach(add)&#125;&#125; Avoiding mocking UserDefaults! mockingå•¥å‘€ï¼Œå»ºæ–°çš„ï¼ 12345678910111213class LoginTests: XCTestCase &#123;private var userDefaults: UserDefaults!private var manager: LoginManager!override func setUp() &#123;super.setup()userDefaults = UserDefaults(suiteName: #file)userDefaults.removePersistentDomain(forName: #file)manager = LoginManager(userDefaults: userDefaults)&#125;&#125; åŠ é€ŸåŒ…æµ‹è¯•é€Ÿåº¦ 1swift test --parallel ä½¿ç”¨é—­åŒ…åˆ›å»ºlazyå±žæ€§ 123456789101112class Logger &#123;private lazy var str: String = &#123;print(&quot;lazy str init&quot;)return &quot;jzk&quot;&#125;()public func log()&#123;print(&quot;my name is \(str)&quot;)&#125;&#125;let log1 = Logger();log1.log(); ç»„åˆå‡½æ•°åºåˆ—! 12345678internal func +&lt;A, B, C&gt;(lhs: @escaping (A) throws -&gt; B,rhs: @escaping (B) throws -&gt; C) -&gt; (A) throws -&gt; C &#123;return &#123; try rhs(lhs($0)) &#125;&#125;public func run() throws &#123;try (determineTarget + build + analyze + output)()&#125; Using DispatchWorkItemï¼Œ OCç”¨dispatch_block_t 123456789let workItem = DispatchWorkItem &#123;// Your async code goes in here&#125;// æ³¨æ„æ²¡æ‹¬å·// Execute the work item after 1 secondDispatchQueue.main.asyncAfter(deadline: .now() + 1, execute: workItem)// You can cancel the work item if you no longer need itworkItem.cancel() ä½¿ç”¨weakæˆ–oé¿å…å¾ªçŽ¯å¼•ç”¨ 12345678// Apple ç»™æˆ‘ä»¬çš„å»ºè®®æ˜¯å¦‚æžœèƒ½å¤Ÿç¡®å®šåœ¨è®¿é—®æ—¶ä¸ä¼šå·²è¢«é‡Šæ”¾çš„è¯ï¼Œå°½é‡ä½¿ç”¨ unowned ï¼Œå¦‚æžœå­˜åœ¨è¢«é‡Šæ”¾çš„å¯èƒ½ï¼Œé‚£å°±é€‰æ‹©ç”¨ weakdataLoader.loadData(from: url) &#123; [weak self] result in// è¿™å¥æ£€æŸ¥selfåŸºæœ¬æ˜¯å®šå¼äº†guard let self = self else &#123; return &#125;self.cache(result) å¼‚æ­¥è¿”å›žçš„å°½é‡ç”¨enum ä½¿ç”¨å…³è”çš„æžšä¸¾å€¼ä»¥é¿å…ç‰¹å®šäºŽçŠ¶æ€çš„é€‰é¡¹ 12345678910111213141516171819202122// BEFORE: Lots of state-specific, optional propertiesclass Player &#123;var isWaitingForMatchMaking: Boolvar invitingUser: User?var numberOfLives: Intvar playerDefeatedBy: Player?var roundDefeatedIn: Int?&#125;// AFTER: All state-specific information is encapsulated in enum casesclass Player &#123;enum State &#123;case waitingForMatchMakingcase waitingForInviteResponse(from: User)case active(numberOfLives: Int)case defeated(by: Player, roundNumber: Int)&#125;var state: State&#125; æ³›åž‹çº¦æŸä¸­ä½¿ç”¨é—­åŒ… 1234567891011121314extension Sequence where Element == () -&gt; Void &#123;func callAll() &#123;forEach &#123; $0() &#125;&#125;&#125;extension Sequence where Element == () -&gt; String &#123;func joinedResults(separator: String) -&gt; String &#123;return map &#123; $0() &#125;.joined(separator: separator)&#125;&#125;callbacks.callAll()let names = nameProviders.joinedResults(separator: &quot;, &quot;) ä½¿ç”¨é™æ€å®šä¹‰url 1let url: URL = &quot;https://www.swiftbysundell.com&quot; weakæˆ–lazyå±žæ€§åº”è¯¥è®¾ç½®readoonly 123456789class Node &#123;private(set) weak var parent: Node?private(set) lazy var children = [Node]()func add(child: Node) &#123;children.append(child)child.parent = self&#125;&#125; Passing self to required Objective-C dependencies 1234567891011121314151617// Using lazy properties in Swift, you can pass self to required Objective-C dependencies without having to use force-unwrapped optionals.class DataLoader: NSObject &#123;lazy var urlSession: URLSession = self.makeURLSession()private func makeURLSession() -&gt; URLSession &#123;return URLSession(configuration: .default, delegate: self, delegateQueue: .main)&#125;&#125;class Renderer &#123;lazy var displayLink: CADisplayLink = self.makeDisplayLink()private func makeDisplayLink() -&gt; CADisplayLink &#123;return CADisplayLink(target: self, selector: #selector(screenDidRefresh))&#125;&#125; ç»“æž„ä½“åˆå§‹åŒ–æ—¶å¯è®¾ç½®selfå€¼ï¼Œä½†å…¶ä»–æ–¹æ³•ä¿®æ”¹selféœ€è¦æ·»åŠ mutabling 12345678910extension Bool: AnswerConvertible &#123;public init(input: String) throws &#123;switch input.lowercased() &#123;case &quot;y&quot;, &quot;yes&quot;, &quot;ðŸ‘&quot;:self = truedefault:self = false&#125;&#125;&#125; ä½¿ç”¨extensionæ¥ç»„ç»‡ä»£ç  ä½¿ç”¨setå‡å°‘æžšä¸¾æ—¶çš„if/else ifä½¿ç”¨! é«˜ï¼ŒçœŸé«˜ï¼ 1234567891011121314class RoadTile: Tile &#123;var connectedDirections = Set&lt;Direction&gt;()func render() &#123;switch connectedDirections &#123;case [.up, .down]:image = UIImage(named: &quot;road-vertical&quot;)case [.left, .right]:image = UIImage(named: &quot;road-horizontal&quot;)default:image = UIImage(named: &quot;road&quot;)&#125;&#125;&#125; åè®®å¯ç»§æ‰¿ã€å¯æ‰©å±•ï¼è‡ªç„¶ä¹Ÿå°±å¯é‡è½½ã€è¦†ç›–ï¼Œç„¶åŽå°±å¯ä»¥å¹²ç‚¹äº‹æƒ…äº† 12345678910111213141516171819// Declare a public protocol that acts as your immutable APIpublic protocol ModelHolder &#123;associatedtype Modelvar model: Model &#123; get &#125;&#125;// Declare an extended, internal protocol that provides a mutable APIinternal protocol MutableModelHolder: ModelHolder &#123;var model: Model &#123; get set &#125;&#125;// You can now implement the requirements using &apos;public internal(set)&apos;public class UserHolder: MutableModelHolder &#123;public internal(set) var model: Userinternal init(model: User) &#123;self.model = model&#125;&#125; Converting Swift errors to NSError 12case .some(let error as NSError) where error.code == NSURLErrorNotConnectedToInternet:presenter.showOfflineView() lazyå±žæ€§æœ€å¥½åŠ ä¸Šç±»åž‹ï¼Œå¤–éƒ¨è°ƒç”¨æœ€å¥½åŠ ä¸Šself ï¼åŒæ—¶swift4ä¹Ÿæ”¯æŒlazyçš„è‡ªåŠ¨ç±»åž‹æŽ¨æ–­ é™æ€ä¾èµ–æ³¨å…¥! å‚æ•°é»˜è®¤å€¼çš„å¦™ç”¨ 1234567891011121314151617181920212223// Before: Almost impossible to test due to the use of singletonsclass Analytics &#123;static func log(_ event: Event) &#123;Database.shared.save(event)let dictionary = event.serialize()NetworkManager.shared.post(dictionary, to: eventURL)&#125;&#125;// After: Much easier to test, since we can inject mocks as argumentsclass Analytics &#123;static func log(_ event: Event,database: Database = .shared,networkManager: NetworkManager = .shared) &#123;database.save(event)let dictionary = event.serialize()networkManager.post(dictionary, to: eventURL)&#125;&#125; ä»¥å…ƒç»„ä½œä¸ºé—­åŒ…çš„å‚æ•°ï¼å¥½å¤„ï¼šç®€å•ã€å¯æ‰©å±•ä¸”å‘½åæ›´è§„èŒƒ ä»»ä½•é™æ€æ–¹æ³•æˆ–å±žæ€§éƒ½å¯ä»¥ä¸Žç‚¹è¯­æ³•ä¸€èµ·ä½¿ç”¨ 12345678910111213141516public enum RepeatMode &#123;case times(Int)case forever&#125;public extension RepeatMode &#123;static var never: RepeatMode &#123;return .times(0)&#125;static var once: RepeatMode &#123;return .times(1)&#125;&#125;view.perform(animation, repeated: .once) å‚æ•°çš„æœ¬åœ°æ‹·è´ï¼Œswiftä¸­é™¤äº†ç±»æ˜¯å¼•ç”¨ï¼Œå…¶ä»–éƒ½æ˜¯å€¼ç±»åž‹ï¼Œå³å½“åšå‚æ•°éƒ½æ˜¯copyè¿›å…¥çš„letå¸¸é‡ï¼Œè¿™æ—¶å€™åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ï¼Œæœ€å¥½æ‹·è´ä¸€ä¸‹ 123init(repeatMode: RepeatMode, closure: @escaping () -&gt; UpdateOutcome) &#123;// Shadow the argument with a local, mutable copyvar repeatMode = repeatMode å¼ºå¤§çš„whereï¼Œå¯ç”¨äºŽ åè®®ã€for inã€caseã€catchã€æ³›åž‹ ç­‰ï¼Œä½†if letã€guardå’Œwhileä¸­è¢«åŽ»æŽ‰äº†ï¼Œä½¿ç”¨ ï¼Œé€—å·åˆ†å‰²ä¸åŒæ¡ä»¶ Extending optionals12345678910111213141516171819202122232425262728293031323334353637func validateTextFields() -&gt; Bool &#123;guard !usernameTextField.text.isNilOrEmpty else &#123;return false&#125;...return true&#125;// Since all optionals are actual enum values in Swift, we can easily// extend them for certain types, to add our own convenience APIsextension Optional where Wrapped == String &#123;var isNilOrEmpty: Bool &#123;switch self &#123;case let string?:return string.isEmptycase nil:return true&#125;&#125;&#125;// Since strings are now Collections in Swift 4, you can even// add this property to all optional collections:extension Optional where Wrapped: Collection &#123;var isNilOrEmpty: Bool &#123;switch self &#123;case let collection?:return collection.isEmptycase nil:return true&#125;&#125;&#125;]]></content>
      <categories>
        <category>swift</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Swiftå¼€å‘è€…å¿…å¤‡Tips]]></title>
    <url>%2F2018%2F10%2F10%2FSwift%E5%BC%80%E5%8F%91%E8%80%85%E5%BF%85%E5%A4%87Tips%2F</url>
    <content type="text"><![CDATA[æŸ¯é‡ŒåŒ–: é€šè¿‡æ¨¡æ¿æ¥æ‰¹é‡ç”Ÿæˆæ–¹æ³• 123456func greaterThan(_ comparer: Int) -&gt; (Int) -&gt; Bool &#123;return &#123; $0 &gt; comparer&#125;&#125;let greaterThan10 = greaterThan(10)greaterThan10(13) // truegreaterThan10(0) // false å°†protocolçš„æ–¹æ³•å£°æ˜Žä¸ºmutatingï¼šmutatingå…³é”®å­—æ˜¯ä¸ºäº†èƒ½åœ¨è¯¥æ–¹æ³•é‡Œä¿®æ”¹structæˆ–enumå˜é‡ï¼Œå¦å¤–ä½¿ç”¨classå®žçŽ°protocolæ—¶ï¼Œå¯ä»¥ä¸ç”¨åŠ mutatingï¼Œå› classå¯éšæ„æ”¹å˜é‡ï¼Œmutatingå¯¹äºŽclassæ—¶å®Œå…¨é€æ˜Žçš„ 1234567891011import UIKitprotocol Vehicle &#123;var color: UIColor &#123;get set&#125;mutating func changeColor()&#125;struct MyCar: Vehicle &#123;var color = UIColor.bluemutating func changeColor() &#123;color = .red&#125;&#125; forå¾ªçŽ¯å¯ç”¨äºŽå®žçŽ°äº†Sequenceçš„ç±»åž‹ä¸Šï¼Œè¦å®žçŽ°Sequenceéœ€è¦å…ˆå®žçŽ°IteratorProtocolåè®® 1234567891011121314151617181920212223242526272829303132class ReverseIterator&lt;T&gt;: IteratorProtocol &#123;typealias Element = Tvar array:[Element]var currentIndex = 0init(array:[Element]) &#123;self.array = arraycurrentIndex = array.count - 1&#125;func next() -&gt; Element? &#123;if currentIndex &lt; 0 &#123;return nil&#125;else &#123;let element = array[currentIndex]currentIndex -= 1return element&#125;&#125;&#125;struct ReverseSequence&lt;T&gt;: Sequence &#123;var array:[T]init(array:[T]) &#123;self.array = array&#125;typealias Iterator = ReverseIterator&lt;T&gt;func makeIterator() -&gt; ReverseIterator&lt;T&gt; &#123;return ReverseIterator(array: self.array)&#125;&#125;let arr = [2,3,4,5,7,6]for (index, value) in ReverseSequence(array: arr).enumerated() &#123;print(&quot;index is \(index) value is \(value)&quot;)&#125; å¤šå…ƒç»„ 1234567func swap&lt;T&gt;(a: inout T, b: inout T) &#123;(a, b) = (b, a)&#125;var a = 2var b = 3swap(&amp;a, &amp;b)print(&quot;a is \(a) b is \(b)&quot;) @autoclosure æ˜¯æŠŠå½¢å¦‚ ()-&gt;T çš„ä¸€å¥è¡¨è¾¾å¼ï¼ˆæ— å‚æ•°ï¼Œå°±ä¸€å¥ï¼‰è‡ªåŠ¨å°è£…æˆé—­åŒ…ï¼Œvar c = a ?? b,è¡¨ç¤ºaéžnilæ—¶c=aï¼Œnilæ—¶c=bï¼Œå…¶å®žè·Ÿè¿žç€å†™çš„?: æ˜¯ä¸€æ ·çš„ 123456789101112131415161718192021func logIfTure(_ predicate: ()-&gt; Bool)&#123;if predicate() &#123;print(&quot;value is true!&quot;)&#125;&#125;logIfTure (&#123; () -&gt; Bool inreturn 2 &gt; 1&#125;)logIfTure (&#123;return 3 &gt; 2&#125;)logIfTure(&#123; 4 &gt; 3 &#125;)logIfTure &#123; 5 &gt; 4 &#125;func logIfTureAutoclosure(_ predicate:@autoclosure ()-&gt; Bool)&#123;if predicate() &#123;print(&quot;value is true!&quot;)&#125;&#125;// æ³¨æ„æ˜¯å°æ‹¬å·logIfTureAutoclosure(6&gt;5) @escapingé€ƒé€¸é—­åŒ…ï¼Œå¼‚æ­¥å›žè°ƒé‚£ç§å‡½æ•°æ‰§è¡Œå®Œäº†é—­åŒ…è¿˜éœ€è¦æ‰§è¡Œï¼Œæ³¨æ„å¾ªçŽ¯å¼•ç”¨ä½¿ç”¨weak self unowned selfï¼› 1234567891011121314151617181920212223242526// é€ƒé€¸é—­åŒ…func testEscapingFunc(printNum: @escaping (_ num: Int) -&gt; ())&#123;print(&quot;testEscapingFunc begin&quot;)DispatchQueue.global().async &#123;DispatchQueue.main.async &#123;printNum(66)&#125;&#125;print(&quot;testEscapingFunc end&quot;)&#125;testEscapingFunc &#123; (num) inprint(&quot;Escaping colsure begin&quot;)print(&quot;Escaping num is \(num)&quot;)print(&quot;Escaping colsure end&quot;)&#125;// éžé€ƒé€¸é—­åŒ…func testNoescapeFunc(printNum: (_ num: Int) -&gt; ()) &#123;print(&quot;testNoescapeFunc begin&quot;)printNum(77)print(&quot;testNoescapeFunc end&quot;)&#125;testNoescapeFunc &#123; (num) inprint(&quot;Noescape colsure begin&quot;)print(&quot;Noescape num is \(num)&quot;)print(&quot;Noescape colsure end&quot;)&#125; optional chaining ï¼Œè¿”å›žçš„éƒ½æ˜¯æœ€åŽä¸€ä¸ªçš„å¯é€‰ç±»åž‹ 1234567891011121314151617181920class Pet &#123;let name: Stringinit(name: String) &#123;self.name = name&#125;func play() -&gt; (String) &#123;return &quot;playing&quot;&#125;&#125;class Child &#123;var pet: Pet?&#125;var xiaoming = Child()xiaoming.pet = Pet(name: &quot;dog&quot;)if let petName = xiaoming.pet?.name &#123;print(&quot;xiaoming pet name is \(petName)&quot;)&#125;if let p = xiaoming.pet?.play() &#123;print(&quot;xiaoming pet is \(p)&quot;)&#125; é‡è½½æ“ä½œç¬¦ï¼Œæ…Žç”¨é¿å…å†²çªï¼Œåº”è¯¥æ˜¯å…¬å¼€çš„ 1234567891011struct Vector2D &#123;var x = 0var y = 0&#125;func +(left:Vector2D, right:Vector2D) -&gt; Vector2D&#123;return Vector2D(x: left.x + right.x, y: left.y + right.y)&#125;let v1 = Vector2D(x: 1, y: 2)let v2 = Vector2D(x: 3, y: 4)let v3 = v1 + v2print(&quot;v3 is \(v3)&quot;) funcçš„å‚æ•°ä¿®é¥°ï¼Œé»˜è®¤å‚æ•°éƒ½æ˜¯copyçš„ï¼Œinoutå…³é”®å­—å¯ä»¥ç›´æŽ¥ä¿®æ”¹å‚æ•°å€¼ 1234567891011func incrementor1(x: Int) -&gt; Int &#123;x + 1return x&#125;print(&quot;å‚æ•°ä¸å¯å˜ \(incrementor1(x: 1))&quot;)func incrementor2(x: inout Int) &#123;x = x + 1&#125;var x = 1incrementor2(x: &amp;x)print(&quot;å‚æ•°å¯å˜ \(x)&quot;) å­—é¢é‡è¡¨è¾¾å¼ï¼Œå®žçŽ°ç±»ä¼¼ExpressibleByBooleanLiteralçš„åè®® 123// ä»¥ä¸‹å°±æ˜¯å­—é¢é‡è¡¨è¾¾å¼ï¼Œæ€è€ƒä¸ºå•¥å†™ä¸ªtrueç¼–è¯‘å™¨å°±çŸ¥é“æ˜¯BOOLç±»åž‹çš„var aBool = truevar aString = &quot;this is a string&quot; ä¸‹æ ‡ï¼Œæ•°ç»„ä¸‹æ ‡æ³¨æ„è¶Šç•Œï¼Œå­—å…¸ä¸‹æ ‡è¿”å›žå¯é€‰ç±»åž‹ã€‚å¯ä»¥é‡å†™æ•°ç»„æˆ–å­—å…¸ä¸‹æ ‡ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰ä¸‹æ ‡,å®žçŽ°subscriptæ–¹æ³•ï¼Œå»¶ä¼¸é˜…è¯»çª¥æŽ¢Swiftä¹‹æ•°ç»„å®‰å…¨ç´¢å¼•ä¸Žæ•°ç»„åˆ‡ç‰‡ æ–¹æ³•åµŒå¥—ï¼Œæ›´æ¸…æ™°ä¸ç”¨åœ¨åˆ«çš„åœ°æ–¹è°ƒç”¨ä¸€å †å°æ–¹æ³•äº†éƒ½åœ¨å‡½æ•°é‡Œé¢å‘¢ï¼Œè®¿é—®æƒé™æ›´æ˜“ç®¡ç† 12345678910func makeIncrementer(add: Int) -&gt; (inout Int) -&gt; Void &#123;func incrementer(x : inout Int) -&gt; Void &#123;x = x + add&#125;return incrementer;&#125;let incrementer2 = makeIncrementer(add: 2)var y = 3incrementer2(&amp;y)print(&quot;\(y)&quot;) å‘½åç©ºé—´ã€‚åŸºäºŽmoduleçš„è€Œä¸æ˜¯ç›´æŽ¥å†ä»£ç ä¸­æ˜¾ç¤ºæŒ‡æ˜Žçš„ï¼Œè¿›è¡Œappå¼€å‘æ—¶ï¼Œé»˜è®¤æ·»åŠ appçš„ä¸»targeté‡Œçš„å†…å®¹éƒ½åœ¨åŒä¸€å‘½åç©ºé—´é‡Œï¼Œå³åŒä¸€targeté‡Œåç§°ä¸èƒ½ç›¸åŒã€‚ typealiasï¼ŒæŒ‡å®šç±»åž‹é‡å‘½åã€‚å½“å®žçŽ°å¤šä¸ªåè®®æ—¶ï¼Œä¹Ÿå¯ä»¥ç”¨ &amp; è¿žæŽ¥å¤šåè®®ï¼Œç”¨typealiasé‡å‘½å 1234567protocol Dog &#123;func watch() -&gt; Void&#125;protocol Cat &#123;func sleep() -&gt; Void&#125;typealias Pet = Dog &amp; Cat associatedtype å¦‚æžœæœ‰å¤šä¸ªåè®®ï¼Œå®ƒä»¬çš„æ–¹æ³•å’Œå±žæ€§éƒ½ä¸€æ ·ï¼Œåªæœ‰åè®®ä¸­ç”¨åˆ°çš„ç±»åž‹ä¸åŒï¼Œåˆ™å¯åˆå¹¶ä¸ºä¸€ä¸ªä½¿ç”¨å…³è”ç±»åž‹(associatedtype)è¿›è¡ŒåŒºåˆ†ã€‚å®žçŽ°æ—¶è‡ªå®šä¹‰typealiasç›¸åº”ç±»åž‹å³å¯ã€‚å»¶ä¼¸é˜…è¯»Swiftâ€”â€“åè®®Protocol å¯å˜å‚æ•°OCçš„å¯å˜å‚æ•°123456789101112131415161718// æ³¨æ„å¯å˜å‚æ•°å¿…é¡»æ˜¯æœ€åŽä¸€ä¸ªå‚æ•°ï¼Œä¸”nameåŽé¢æœ‰ä¸€ä¸ªè‹±æ–‡é€—å·- (void)testMultiplePramar:(NSString *)name, ... &#123;// ä¸€ä¸ªå­—ç¬¦ç±»åž‹çš„æŒ‡é’ˆï¼ŒæŒ‡é’ˆæŒ‡å‘å½“å‰çš„å‚æ•°ï¼Œéœ€è¦é€šè¿‡è¿™ä¸ªæŒ‡é’ˆå–å‚æ•°ã€‚va_list arg_list;// åˆå§‹åŒ–å­—ç¬¦æŒ‡é’ˆçš„å‡½æ•°ï¼Œå°†æŠŠarg_listæŒ‡é’ˆæŒ‡å‘nameè¿™ä¸ªå¯å˜å½¢å‚çš„ç¬¬ä¸€ä¸ªä½ç½®va_start(arg_list, name);NSLog(@&quot;ç¬¬ä¸€ä¸ª ï¼š %@&quot;, name);while(YES)&#123;// è¿™æ˜¯ä¸€ä¸ªå–å‚æ•°çš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­—ç¬¦æŒ‡é’ˆva_listï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æˆ‘ä»¬éœ€è¦å–çš„å¯å˜å‚æ•°çš„æ•°æ®ç±»åž‹// è¿™ä¸ªå‡½æ•°éœ€è¦åšä¸¤ä»¶äº‹ï¼š1ï¼šå–åˆ°æŒ‡å®šæ•°æ®ç±»åž‹çš„å‚æ•°ã€‚2ï¼šå°†æŒ‡é’ˆapæŒ‡å‘ä¸‹ä¸€ä¸ªå¯å˜å‚æ•°çš„åœ°å€ã€‚NSString * obj=va_arg(arg_list,NSString *);// å–å®Œæ‰€æœ‰å‚æ•°ä¹‹åŽï¼Œè·³å‡ºå¾ªçŽ¯if(obj==nil)break;NSLog(@&quot;--- %@&quot;,obj);&#125;// æœ€åŽè¦å°†æŒ‡é’ˆapæŒ‡å‘NULLã€‚é¿å…é‡ŽæŒ‡é’ˆã€‚å’Œva_startæˆå¯¹ä½¿ç”¨ã€‚va_end(arg_list);&#125; Swiftç‰ˆå¯å˜å‚æ•°12345678// åªèƒ½æœ‰ä¸€ä¸ªå¯å˜å‚æ•°ï¼Œä½ç½®ä¸é™ç±»åž‹ç›¸åŒfunc myFunc(numbers:Int..., str: String) &#123;numbers.forEach &#123; (i) inprint(&quot;\(str)ï¼Œç¬¬\(i)ä¸ª&quot;)&#125;&#125;myFunc(numbers: 1,2,3,4,5, str: &quot;hello&quot;)Swiftç‰ˆçš„stringformatæ–¹æ³• init(format:NSString, _ args: CVarArgType...) åˆå§‹åŒ–æ–¹æ³•é¡ºåºæ˜Žç¡®ä¸€ä¸ªé—®é¢˜ä¸è¦åœ¨initåˆå§‹åŒ–æ–¹æ³•é‡Œä½¿ç”¨self.property Aï¼ŒOCæ˜¯å…ˆåˆå§‹åŒ–çˆ¶ç±»åœ¨åˆå§‹åŒ–å­ç±»æˆå‘˜å˜é‡Bï¼Œ1ï¼Œå…ˆåˆå§‹åŒ–å­ç±»æˆå‘˜å˜é‡ï¼Œ2è°ƒç”¨çˆ¶ç±»åˆå§‹åŒ–ï¼Œï¼ˆè‹¥æ²¡ç¬¬3æ­¥ï¼Œå¯ä¸å†™ç¼–è¯‘å™¨è‡ªå·±åŠ ï¼‰3å¯¹çˆ¶ç±»ä¸­éœ€è¦æ”¹å˜çš„æˆå‘˜è¿›è¡Œè®¾å®š 123456789101112131415161718192021class ClassA &#123;let numA: Int// Designated æŒ‡å®šçš„ initåˆå§‹åŒ–æ–¹æ³•// ä¹Ÿå¯ä»¥åŠ ä¸Šrequiredå…³é”®å­—ä»¥ç¡®ä¿å­ç±»å¯¹å…¶å®žçŽ°init(num: Int) &#123;numA = num; //å¯å¯¹letçš„å®žä¾‹å¸¸é‡èµ‹å€¼&#125;// æ‰€æœ‰çš„ä¾¿åˆ©æž„é€ å™¨éƒ½å¿…é¡»è°ƒåŒä¸€ç±»ä¸­Designatedåˆå§‹åŒ–å®Œæˆè®¾ç½®ï¼Œä¸”ä¸èƒ½è¢«å­ç±»é‡å†™æˆ–ä»Žå­ç±»ä¸­ä»¥superçš„æ–¹å¼è°ƒç”¨convenience init(bigNum: Bool) &#123;self.init(num: bigNum ? 1000 : 1)&#125;&#125;class ClassB: ClassA &#123;let numB: Intoverride init(num: Int) &#123;numB = num + 2super.init(num: num)&#125;&#125;let bObj = ClassB(bigNum: true) åˆå§‹åŒ–è¿”å›žnilOCåˆå§‹åŒ–å¤±è´¥å¯ä»¥è¿”å›žnilï¼Œä½†swiftæ²¡æœ‰returnï¼Œå› æ­¤swifä¸­ç”¨ init? è¡¨ç¤ºè¿”å›žå¯é€‰å€¼ï¼Œå³å¯èƒ½å¤±è´¥ static å’Œ classï¼Œ æ³¨æ„cpoy on write å®¹å™¨(Array, Dictionary, Set)åªèƒ½æ”¾åŒä¸€ç±»åž‹å…ƒç´ ï¼Œå¦‚æžœæƒ³æ”¾ä¸åŒç±»åž‹æ€Žä¹ˆåŠžï¼ŸAã€‚ç±»åž‹è½¬æ¢ï¼Œä¿¡æ¯æŸå¤±ååˆ†å±é™©ï¼Œæœ€å¥½ä¸è¦ç”¨ï¼1234import UIKitlet mixed: [Any] = [1, &quot;Two&quot;,3]; // Anyç±»åž‹å¯ä»¥éšå¼è½¬æ¢// è½¬æ¢ä¸º[NSObject]let objectArray = [1 as NSObject, &quot;two&quot; as NSObject, 3 as NSObject] Bã€‚å¦‚æžœæœ‰å…±åŒç‰¹å¾ï¼Œå¯ä»¥æ·»åŠ å®žçŽ°åŒä¸€åè®®çš„ç±»åž‹çš„å¯¹è±¡12345import Foundationlet mixed2 : [CustomStringConvertible] = [1, &quot;two&quot;, 3]for obj in mixed2 &#123;print(obj.description)&#125; Cã€‚å°†ç±»åž‹ä¿¡æ¯å°è£…åˆ°enumä¸­1234567891011121314import Foundationenum IntOrString &#123;case IntValue(Int)case StringValue(String)&#125;let mixed = [IntOrString.IntValue(1), IntOrString.StringValue(&quot;two&quot;), IntOrString.IntValue(3)]for value in mixed &#123;switch value &#123;case let .IntValue(i):print(i)case let .StringValue(str):print(str)&#125;&#125; defaultå‚æ•° 12345func hello(name:String = &quot;JZK&quot;, str:String)&#123;print(name+&quot; &quot;+str)&#125;hello(str: &quot;hello world&quot;)hello(name: &quot;dxm&quot;, str: &quot;hello world&quot;) æ­£åˆ™è¡¨è¾¾å¼ã€‚è‡ªå®šä¹‰ç¬¦å·è¿˜æ˜¯éº»çƒ¦ï¼Œå…¶å®žç”¨OCçš„æ˜¯æœ€çœäº‹çš„ï¼Œæ­£åˆ™è¡¨è¾¾å¼30åˆ†é’Ÿå…¥é—¨æ•™ç¨‹ï¼Œ8ä¸ªå¸¸ç”¨æ­£åˆ™ æ¨¡å¼åŒ¹é…,æ²¡çœ‹æ‡‚å¥½åƒå°±æ˜¯switchçš„ä½¿ç”¨è€Œå·²å‘€ï¼Œé‡è½½~/ è·Ÿswitchæœ‰å•¥å­å…³ç³»ã€‚ã€‚ã€‚ â€¦ å’Œ ..&lt; 12345678910// åŒ…å«3ï¼Œå³è¾“å‡º0 1 2 3for i in 0...3 &#123;print(&quot;\(i)&quot;)&#125;// å°äºŽ3ï¼ˆä¸å«3ï¼‰ï¼Œå³è¾“å‡º0 1 2for i in 0..&lt;3 &#123;print(&quot;\(i)&quot;)&#125;// è¿˜å¯ä»¥é€šè¿‡ ... æˆ– ..&lt; æ¥è¿žæŽ¥ä¸¤ä¸ªå­—ç¬¦ä¸²// ä½†ç»è¿‡è¯•éªŒå‘çŽ°å¾ˆéš¾ç”¨ï¼Œä¾‹&quot;0&quot;...&quot;10&quot; åŒ…å«&quot;1&quot;ä½†ä¸åŒ…å«&quot;2&quot;, è¿˜æœ‰æ ¡éªŒASCIIç  \0...~ ç¡®å®žæ­£ç¡®çš„ AnyClass, å…ƒç±»åž‹å’Œ .self 1234567891011121314151617// swiftä¸­èƒ½å¤Ÿè¡¨ç¤ºâ€œä»»æ„â€è¿™ä¸ªæ¦‚å¿µçš„é™¤äº† Any å’Œ AnyObject å¤–ï¼Œè¿˜æœ‰AnyClass , AnyClass = AnyObject.Type// .Type è¡¨ç¤ºçš„æ˜¯æŸä¸ªç±»åž‹çš„å…ƒç±»åž‹ã€‚.Protocolè¡¨ç¤ºæŸä¸ªåè®®çš„å…ƒç±»åž‹// ç±»åž‹.self è¡¨ç¤ºèŽ·å¾—è¯¥ç±»åž‹Classï¼Œ å®žä¾‹.selfè¡¨ç¤ºèŽ·å¾—è¯¥å®žä¾‹å¯¹è±¡import UIKitclass AVC: UIViewController &#123;&#125;class BVC: UIViewController &#123;&#125;// å¼ºè½¬æˆAnyClassï¼Œç±»ä¼¼å·¥åŽ‚æ–¹æ³•let VCTypes : [AnyClass] = [AVC.self, BVC.self]for type in VCTypes &#123;if type is UIViewController.Type &#123;// æƒ³æƒ³ä¸ºä»€ä¹ˆå¯ä»¥è°ƒinit ç±»æ–¹æ³•ï¼Ÿlet vc = (type as! UIViewController.Type).init()print(&quot;vcå®žä¾‹ç±»åž‹ä¸ºï¼š\(vc)&quot;)&#125;&#125; åè®®å’Œç±»æ–¹æ³•ä¸­çš„Self 1// åè®®æ²¡è‡ªå·±çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä¹Ÿä¸çŸ¥é“è°å®žçŽ°ã€‚å½“æˆ‘ä»¬å¸Œæœ›åœ¨åè®®ä¸­ä½¿ç”¨çš„å°±æ˜¯å®žçŽ°è¿™ä¸ªåè®®æœ¬èº«çš„ç±»åž‹çš„è¯ï¼Œå°±éœ€è¦ä½¿ç”¨Selfï¼ˆæ³¨æ„é¦–å­—æ¯å¤§å†™ï¼‰è¿›è¡ŒæŒ‡ä»£ï¼Œæ­¤æ—¶Selfä¸ä»…æŒ‡ä»£çš„æ˜¯å®žçŽ°è¯¥åè®®çš„ç±»åž‹æœ¬èº«ï¼Œä¹ŸåŒ…æ‹¬äº†è¿™ä¸ªç±»åž‹çš„å­ç±»ã€‚ åŠ¨æ€ç±»åž‹å’Œå¤šæ–¹æ³•dynamicTypeåºŸé™¤ï¼Œç”¨type(of:)ä»£æ›¿ å±žæ€§è§‚å¯Ÿå­˜å‚¨åž‹å±žæ€§ willSet å’Œ didSet æ–¹æ³•ä¸­newValueè¡¨ç¤ºå°†è¦è®¾å®šçš„ï¼ŒoldValueè¡¨ç¤ºå·²ç»è®¾å®šçš„ã€‚æ³¨æ„åˆå§‹åŒ–æ—¶ä¸ä¼šè°ƒå±žæ€§è§‚å¯Ÿã€‚è®¡ç®—å½¢åž‹å±žæ€§åªæœ‰getå’Œsetæ–¹æ³• final è¡¨ç¤ºä¸å…è®¸ç»§æ‰¿æˆ–é‡å†™ã€‚ lazyä¿®é¥°ç¬¦å’Œlazyæ–¹æ³• 123456789101112131415class ClassA &#123;// classæˆ–struct çš„å˜é‡å±žæ€§ï¼Œä¸”éœ€æŒ‡æ˜Žç±»åž‹lazy var str : String = &quot;hello&quot;&#125;// lazy ä¹Ÿèƒ½ä¿®é¥°æ–¹æ³•,å¯¹äºŽå¯èƒ½æå‰é€€å‡ºæƒ…å†µï¼Œæ€§èƒ½ä¼˜åŒ–æ˜Žæ˜¾let arr = 1...3let result = arr.lazy.map &#123; (i: Int) -&gt; Int inprint(&quot;map \(i)&quot;)return i * 2&#125;print(&quot;begin&quot;)for i in result &#123;print(&quot;result \(i)&quot;)&#125;print(&quot;end&quot;) refection å’Œ mirror , çŸ¥é“æœ‰åå°„å°±è¡Œäº†ï¼Œæœ€å¥½ä¸ç”¨ å¼ºåˆ¶è§£åŒ…ï¼Œå°‘ç”¨æ‰å¥½ï¼Œå¤šç”¨å¯é€‰é“¾ï¼ å¤šé‡optional 12345678910var aNil : String? = nilvar anotherNil : String?? = aNilvar literalNil : String?? = nilif anotherNil != nil &#123;print(&quot;anotherNil&quot;) // è¾“å‡º&#125;if literalNil != nil &#123;print(&quot;literalNil&quot;) //&#125;// ä½†ç”¨poè¾“å‡ºæ—¶ï¼ŒanotherNilå’ŒliteralNil éƒ½æ˜¯nilï¼Œå› lldbå·²ç»å°†optionalå±•å¼€äº† optional map ï¼Œæ²¡å•¥ç”¨ åè®®æ‰©å±• protocol extensionï¼Œ å¯ä»¥ä¸ºåè®®ä¸­å®šä¹‰çš„æ–¹æ³•æä¾›ä¸€ä¸ªé»˜è®¤çš„å®žçŽ° where å’Œæ¨¡å¼åŒ¹é… indirect å’ŒåµŒå¥—enum swiftçš„#selector å’ŒOCçš„@selectorä¸€æ ·ï¼Œswift4ä¸­é»˜è®¤æ‰€æœ‰çš„swiftæ–¹æ³•åœ¨OCä¸­éƒ½ä¸å¯è§ï¼Œæ‰€ä»¥éœ€è¦åœ¨æ–¹æ³•å‰åŠ ä¸Š@objc å…³é”®å­—ã€‚ä½¿ç”¨#selectoræ—¶ï¼Œswiftçš„åŒåæ–¹æ³•éœ€è¦å¼ºåˆ¶è½¬åŒ– å®žä¾‹æ–¹æ³•åŠ¨æ€è°ƒç”¨ï¼ŒæŒºå¥½çŽ©çš„ï¼Œè™½ç„¶æˆ‘ä¹Ÿæ²¡æƒ³åˆ°æœ‰ä»€ä¹ˆç”¨ 12345678910class MyClass &#123;func method(num: Int) -&gt; Int &#123;return num + 2&#125;&#125;// å®žä¾‹åŒ–MyClasså¯¹è±¡ï¼Œå†è°ƒç”¨methodæ–¹æ³•å°±é™å®šæ­»äº†ç±»åž‹// ä½†swiftä¸­å¯ç›´æŽ¥ç”¨ Type.instanceMethodçš„è¯­æ³•ç”Ÿæˆä¸€ä¸ªå¯ä»¥æŸ¯é‡ŒåŒ–çš„æ–¹æ³•ï¼Œåªé€‚ç”¨äºŽå®žä¾‹æ–¹æ³•ï¼Œå¯¹getteræˆ–setteræ— æ•ˆ,åŒåæ–¹æ³•éœ€å¯¹ f åŠ ä¸Šç±»åž‹åŠ ä»¥åŒºåˆ«let f = MyClass.methodlet object = MyClass()let result = f(object)(1) å•ä¾‹ 1234567891011121314// è®¾ç½®initæ–¹æ³•ä¸ºprivateæ¥è¦†ç›–é»˜è®¤publicçš„æ–¹æ³•ï¼Œä¿è¯å…¶ä»–åœ°æ–¹ä¸èƒ½initå®žä¾‹//æ–¹æ³•ä¸€class AppShared &#123;private static let _sharedInstance = AppShared()class func sharedInstance() -&gt;AppShared&#123;return _sharedInstance&#125;private init() &#123;&#125;&#125;//æ–¹æ³•äºŒclass AppShared2 &#123;static let sharedInstance = AppShared2()private init() &#123;&#125;&#125; æ¡ä»¶ç¼–è¯‘ 123// swiftä¸­æ²¡æœ‰å®ï¼Œå®žè´¨ä¸Šæ˜¯ä¸€äº›å…¨å±€å¸¸é‡å’Œå‡½æ•°//#if condition //æ³¨æ„conditionå¤§å°å†™æ•æ„Ÿ//#endif å»¶ä¼¸é˜…è¯»Swiftä¸­å¦‚ä½•ä½¿ç”¨ #if DEBUGcondition | å¯é€‰å‚æ•°â€”|â€”os() | macOS,iOS,tvOS,watchOS,Linuxarch() | x86_64, arm, arm64, i386swift() | &gt;= æŸä¸ªç‰ˆæœ¬ ç¼–è¯‘æ ‡è®°OCçš„#paramï¼Œåœ¨swiftä¸­ç”¨ // MARK:- ä»£æ›¿ï¼ˆæ³¨æ„å¤§å†™ï¼‰ï¼Œæ­¤å¤–è¿˜æœ‰// TODO: å’Œ // FIXME: , ä½†æ²¡æœ‰#warningçš„æ›¿ä»£å“ @UIApplicationMainï¼Œ å’ŒOCçš„mainå‡½æ•°æ˜¯ä¸€æ ·çš„ï¼Œå¦‚æžœæˆ‘ä»¬æƒ³ä½¿ç”¨UIApplicaitonçš„å­ç±»(ä¾‹å¦‚ç›‘å¬æ‰€æœ‰çš„ç‚¹å‡»äº‹ä»¶)ï¼Œå°±å¯ä»¥åˆ›å»ºmain.swift @objc å’Œ dynamicï¼Œswiftå†™çš„ç±»ç»§æ‰¿è‡ªNSObjectçš„è¯ï¼Œswiftä¼šè‡ªåŠ¨ä¸ºæ‰€æœ‰éžprivateçš„ç±»å’Œæˆå‘˜åŠ ä¸Š@objcï¼Œä½†@objcå¹¶ä¸æ„å‘³ç€ä¼šå˜æˆåŠ¨æ€æ´¾å‘ï¼ŒåŠ¨æ€æ´¾å‘éœ€ç”¨dynamicå…³é”®å­—ã€‚å»¶ä¼¸é˜…è¯»iOS OCä¸ŽSwiftæ··ç¼–ï¼Œæ³¨æ„å’ŒOCçš„@dynamicæ²¡ä»»ä½•å…³ç³»ï¼Œ@dynamicè¡¨ç¤ºä¸ç”¨ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆgetterå’Œsetteræ–¹æ³• å¯é€‰åè®®å’Œåè®®æ‰©å±• å†…å­˜ç®¡ç†ï¼Œweakå’Œunownedï¼Œå¦‚æžœå†åœ¨è®¿é—®æ—¶ä¸ä¼šè¢«é‡Šæ”¾çš„è¯ï¼Œå°½é‡ç”¨unownedï¼Œå¦‚æžœå­˜åœ¨è¢«é‡Šæ”¾çš„è¯¾éž¥å‘¢ï¼Œé‚£å°±ç”¨weak @autoreleasepoolåœ¨swiftä¸­å·²ç»æ²¡æœ‰äº†, swiftæå€¡ç”¨åˆå§‹åŒ–æ–¹æ³•è€Œä¸æ˜¯ç”¨ç±»æ–¹æ³•æ¥ç”Ÿæˆå¯¹è±¡ å€¼ç±»åž‹å’Œå¼•ç”¨ç±»åž‹ï¼Œswiftä¸­æ‰€æœ‰çš„å†…å»ºç±»åž‹éƒ½æ˜¯å€¼ç±»åž‹ï¼Œç”šè‡³Stringï¼Œarrayä»¥åŠDictionaryéƒ½æ˜¯å€¼ç±»åž‹ï¼Œå€¼ç±»åž‹å¤åˆ¶å€¼å‘ç”Ÿåœ¨å†…å®¹å‘ç”Ÿæ”¹å˜æ—¶ String è¿˜æ˜¯ NSStringï¼Ÿèƒ½ç”¨Stringå°½é‡ç”¨Stringï¼Œä½†ä½¿ç”¨Rangeæ—¶è¿˜æ˜¯NSStringæ›´å¥½ç”¨ UnsafePointer, ç”¨äºŽå¯¹Cè¯­è¨€çš„æŒ‡é’ˆè¿›è¡Œè½¬æ¢ï¼ŒCä¸­çš„åŸºæœ¬ç±»åž‹åœ¨swiftä¸­å¯¹åº”çš„ç±»åž‹éƒ½æœ‰ç»Ÿä¸€çš„å‘½åè§„åˆ™ï¼šå‰é¢åŠ ä¸Š C ä¸”é¦–å­—æ¯å¤§å†™ï¼Œä¾‹å¦‚int å¯¹åº”çš„ç±»åž‹ä¸º CIntï¼Œintçš„æŒ‡é’ˆè½¬æ¢åˆ°swiftä¸­å¯¹åº”çš„å°±æ˜¯UnsafePointer, Cçš„æŒ‡é’ˆä¸å¯å˜ç”¨UnsafePointer,å¯å˜æŒ‡é’ˆç”¨UnsafeMutablePointer CæŒ‡é’ˆçš„å†…å­˜ç®¡ç†ï¼Œæ— æ³•ä½¿ç”¨ARCï¼Œdeallocateä¸Ždeinitializeåº”è¯¥è¦å’Œallocateä¸Žinitializeæˆå¯¹å‡ºçŽ°ã€‚mallocå’Œcallocè¦ä¸ŽfreeåŒ¹é… Cä¸­æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆå¯è½¬ä¸ºé—­åŒ…ï¼Œä¸è¿‡éœ€è¦åŠ ä¸Š@conventionæ ‡æ³¨ GCDå’Œå»¶æ—¶è°ƒç”¨, OCå¤šçº¿ç¨‹ å’Œ swiftçš„GCD èŽ·å–å¯¹è±¡ç±»åž‹ type(of:) OCçš„ isKindOfClass å’Œ isMemberOfClass åœ¨swiftä¸­ç»§æ‰¿è‡ªNSObjectçš„ä¾ç„¶å¯ä»¥ä½¿ç”¨ï¼Œswiftè¿˜æœ‰ is å…³é”®å­—ç­‰åŒäºŽisKindOfClassï¼Œä½†ä¹Ÿå¯ä»¥ç”¨äºŽstructæˆ–enumè¿›è¡Œç±»åž‹åˆ¤æ–­ã€‚as å…³é”®å­—å‘ä¸Šè½¬åž‹ï¼›asï¼å‘ä¸‹è½¬åž‹ï¼›asï¼Ÿå‘ä¸‹è½¬åž‹ï¼Œå¦‚æžœå¤±è´¥è¿”å›žnil swiftä¸­çš„KVOå®žçŽ°, å»¶ä¼¸ï¼šå¯ç”¨å±žæ€§è§‚å¯Ÿè‡ªå·±å®žçŽ°ï¼Œä¹Ÿå¯å‚è€ƒ 1234567891011121314151617181920212223import UIKit// ç»§æ‰¿è‡ªNSObjectclass MyClass: NSObject &#123;// è¦æ£€æµ‹çš„å±žæ€§å¿…é¡»æ ‡æ³¨ @objc dynamic@objc dynamic var date = Date()&#125;class KvoClass: NSObject &#123;var myObject : MyClass!var observation: NSKeyValueObservation?override init() &#123;myObject = MyClass()print(&quot;åˆå§‹åŒ–æ—¶é—´ï¼š\(Date())&quot;)observation = myObject.observe(\MyClass.date, options: [.new], changeHandler: &#123; (_, change) inif let newDate = change.newValue &#123;print(&quot;å˜åŒ–æ—¶é—´ï¼š\(Date())&quot;)&#125;&#125;)&#125;&#125;var kvoObject = KvoClass()DispatchQueue.main.asyncAfter(deadline: DispatchTime.now() + 2) &#123;kvoObject.myObject.date = Date()&#125; å±€éƒ¨scopeï¼Œéš”ç¦»ä»£ç çš„å¥½æ–¹æ³• 1234567891011121314151617181920212223242526272829// OCä¸­ä½¿ç”¨æ–¹æ³•- (void)viewDidLoad &#123;[super viewDidLoad];// å±€éƒ¨scope&#123;UILabel *label1 = [[UILabel alloc] initWithFrame:CGRectMake(0, 100, 100, 44)];label1.text = @&quot;first label&quot;;[self.view addSubview:label1];&#125;// GNU Cçš„å£°æ˜Žæ‰©å±•UILabel *label2 = (&#123;UILabel *tempLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 200, 100, 44)];tempLabel.text = @&quot;second label&quot;;tempLabel; // æ³¨æ„æ²¡æœ‰return&#125;);[self.view addSubview:label2];&#125;// swiftä¸å…è®¸ç›´æŽ¥ä½¿ç”¨å¤§æ‹¬å·ï¼Œå’Œé—­åŒ…å†²çªã€‚è€Œä¸”æ²¡æœ‰GNU Cçš„å£°æ˜Žæ‰©å±•// ä½†å¯ä»¥ä½¿ç”¨åŒ¿åé—­åŒ…override func viewDidLoad() &#123;super.viewDidLoad()// Do any additional setup after loading the view, typically from a nib.let titleLabel : UILabel = &#123;let label = UILabel(frame: CGRect(x: 0, y: 100, width: 100, height: 44))label.text = &quot;åŒ¿åé—­åŒ…&quot;return label&#125;()self.view.addSubview(titleLabel)&#125; OCä¸­==è¡¨ç¤ºåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦æŒ‡å‘åŒä¸€å—å†…å­˜ï¼Œåœ¨swiftä¸­å¯¹åº”ä¸º === ï¼Œè€Œswiftä¸­çš„ == æ˜¯ä¸€ä¸ªæ“ä½œç¬¦å£°æ˜Žï¼Œåœ¨ Equatable åè®®é‡Œå£°æ˜Žï¼Œå¯é‡è½½ï¼Œæ²¡é‡è½½çš„è¯å°±æ˜¯ isEqual å“ˆå¸Œ ç±»ç°‡ï¼Œswiftä¸­ä½¿ç”¨å·¥åŽ‚æ–¹æ³•æ¨¡å¼æ¥å®žçŽ°ï¼Œå› swiftä¸­åˆå§‹åŒ–æ–¹æ³•åªèƒ½å¾—åˆ°å®Œæˆæ‰€æœ‰é…ç½®çš„å½“å‰ç±»å®žä¾‹ï¼Œå³ä¸å¯èƒ½åœ¨å…¬å…±ç±»ä¸­è¿”å›žå­ç±»ä¿¡æ¯ swiftä¸­ç›´æŽ¥ä½¿ç”¨Cä»£ç æˆ–åº“æ˜¯ä¸å¯èƒ½çš„ï¼Œå› æ­¤ä½¿ç”¨Cåº“æœ€å¥½çš„åŠžæ³•æ˜¯ä½¿ç”¨OCæ–‡ä»¶å°è£…ï¼Œé€šè¿‡ å·¥ç¨‹å-Bridging-Header.h æ¡¥æŽ¥æ–‡ä»¶æ¥è°ƒOCçš„ä»£ç  è¾“å‡ºæ ¼å¼åŒ– 12345import UIKitvar b = 1.234567890print(&quot;b is \(b)&quot;)let formatB = String(format: &quot;%.2f&quot;, b)print(&quot;ä¿ç•™ä¸¤ä½å°æ•° b is \(formatB)&quot;) OCçš„NS_ENUMå¯¹åº”swiftçš„enumï¼ŒOCçš„NS_OPTIONSè¢«æ˜ å°„ä¸ºæ»¡è¶³OptionSetåè®®çš„structç±»åž‹ï¼Œä»¥åŠä¸€ç»„é™æ€çš„getå±žæ€§ï¼Œå¯¹ä¸éœ€è¦é€‰é¡¹çš„å¯ä»¥ç”¨[]ç©ºé›†åˆè¡¨ç¤ºï¼Œå¯ä»¥å‚ç…§ AnimationOptions æ•°ç»„çš„enumerated 123for (index, item) in [2,4,1,4,5].enumerated() &#123;print(&quot;index is \(index) value is \(item)&quot;)&#125; OCä¸­å¯ä»¥é€šè¿‡@encodeæ¥èŽ·å–ç±»åž‹ç¼–ç ï¼Œswiftä¸­å¯ä»¥é€šè¿‡è½¬æ¢ä¸ºNSValueç±»åž‹ï¼Œä½¿ç”¨objCTypeèŽ·å–ç±»åž‹ç¼–ç ã€‚ç±»åž‹ç¼–ç è¿™ä¸ªè¿è¡Œæ—¶è¿˜æ˜¯æ¯”è¾ƒæœ‰ç”¨çš„ @asmnameå¯ç›´æŽ¥å°†Cå‡½æ•°æ˜ å°„ä¸ºswiftå‡½æ•°ï¼Œä½†å¯èƒ½ä¼šæœ‰å‘½åå†²çªï¼Œæ…Žç”¨ swiftçš„protocolå¯ä»¥è¢«classï¼Œstructï¼Œenumç­‰ç±»åž‹éµå®ˆã€‚è€Œæƒ³è¦åœ¨swiftä¸­å£°æ˜Žweak delegateï¼Œå°±æœ€è¦å°†protocolé™åˆ¶åœ¨classå†… 12345678910// å°†protocolé™åˆ¶åœ¨classå†…// 1,åœ¨protocolå£°æ˜Žå‰åŠ ä¸Š@objc@objc protocol MyClassDelegate &#123;func method()&#125;// æ›´å¥½çš„åŠžæ³•// 2ï¼Œåœ¨protocolå£°æ˜ŽåŽåŠ ä¸Šclassprotocol ClassDelegate : class &#123;func method()&#125; associated object 1234567891011private var key : Void?extension AppDelegate &#123;&apos;var associatedObject: String? &#123;get &#123;return objc_getAssociatedObject(self, &amp;key) as? String&#125;set &#123;objc_setAssociatedObject(self, &amp;key, newValue, .OBJC_ASSOCIATION_COPY)&#125;&#125;&#125; swiftä¸­æ²¡æœ‰ @synchronized ï¼Œä½†å¯ä»¥è‡ªå·±å®žçŽ°ä¸€ä¸ª 123456// OCçš„@synchronizedï¼Œä¹Ÿæ˜¯è°ƒobjc_sync_enterå’Œobjc_sync_exitï¼Œå¤–åŠ å¼‚å¸¸åˆ¤æ–­func syncchronized(_ lock: AnyObject, closure:()-&gt;())&#123;objc_sync_enter(lock) closure()objc_sync_exit(lock)&#125; OCä¸ŽCoreFoundationçš„è½¬åŒ–è§„åˆ™ï¼šbridgeè½¬æ¢OCå’ŒCFï¼Œä¸æ¶‰åŠå†…å­˜ï¼›bridge_retainedæˆ–CFBridgingRetain å°†OCè½¬æ¢åˆ°CFï¼Œéœ€è¦æ‰‹åŠ¨è°ƒç”¨CFReleaseæ¥é‡Šæ”¾å¯¹è±¡å†…å­˜ï¼›__bridge_transferæˆ–CFBridgingReleaseå°†CFè½¬åŒ–ä¸ºOCï¼ŒARCè´Ÿè´£é‡Šæ”¾å¯¹è±¡ã€‚å¯¹äºŽCFç³»APIï¼Œå¦‚æžœAPIåå­—ä¸­å«æœ‰Createï¼ŒCopyæˆ–Retainçš„è¯ï¼Œä½¿ç”¨å®ŒæˆåŽè¦æ‰‹åŠ¨è°ƒCFReleaseæ¥é‡Šæ”¾å†…å­˜ã€‚ä½†åœ¨swiftä¸­ï¼Œä¸ŽCFçš„è½¬åŒ–å¯ä»¥çœæŽ‰äº†ï¼Œä¹Ÿä¸ç”¨è°ƒCFReleaseé‡Šæ”¾å†…å­˜äº†ï¼Œä¸€ä¸ªå­—ï¼šçˆ½ swiftå‘½ä»¤å·å·¥å…· éšæœºæ•° 1234// let num = Int(arc4random()) % 5 + 1 ; iphone4ï¼Œ5ä¸Šå¯èƒ½crash// å› swiftçš„Intå’ŒCPUæž¶æž„æœ‰å…³ï¼Œåœ¨32ä½CPUä¸Šæ˜¯Int32ï¼Œ64ä½CPUä¸Šæ˜¯Int64ï¼Œè€Œarc4randomä¸è®ºä»€ä¹ˆå¹³å°ä¸Šéƒ½æ˜¯UInt32ï¼Œæ•…å¯èƒ½è¶Šç•Œcrash// å¯ç”¨arc4random_uniform å®žçŽ°ç›¸åŒæ•ˆæžœlet num = Int(arc4random_uniform()) % 5 + 1 ; CustomStringConvertible å’Œ CustomDebugStringConvertible åè®®å¯ä»¥æ ¼å¼åŒ–printæ ·å¼ è¦throwså¦ä¸€ä¸ªthrowsæ—¶ï¼Œåº”å°†å‰è€…æ”¹ä¸ºrethrowsã€‚Swiftå¼‚å¸¸å¤„ç† å’Œ swiftçš„defer 123456do &#123;//try? æŠ›å‡ºå¼‚å¸¸åˆ™è¿”å›žnil,æ²¡æŠ›å‡ºæ­£å¸¸è¿”å›žï¼›tryï¼è‚¯å®šä¸ä¼šæŠ›å¼‚å¸¸ã€‚ä½†æŠ›å‡ºå¼‚å¸¸å°±crashï¼Œæ…Žç”¨ //try somthing//try somthing&#125; catch let err as NSError &#123;&#125; OCçš„NSAssertå® åœ¨swiftä¸­å¯¹åº”ä¸ºassertå‡½æ•° fatalErrorå¯ä»¥åœ¨releaseå’Œdebugä¸‹ç»ˆæ­¢ç¨‹åºï¼Œç±»ä¼¼äºŽDebugä¸‹NSAssert(NO, @â€è¯´æ˜Žâ€);çš„ä½œç”¨ ä»£ç ç»„ç»‡å’ŒFramework å®‰å…¨çš„èµ„æºç»„ç»‡æ–¹å¼ï¼ŒOCæ—¶ç»å¸¸å°†èµ„æºåç§°å®šä¹‰ä¸ºå®ï¼Œè¿™æ ·å¯ç›¸å¯¹é›†ä¸­çš„ç®¡ç†å’Œä¿®æ”¹ã€‚swiftå¯ä»¥ç”¨enumå’Œextensionæ¥å¤„ç†èµ„æºï¼ŒåŽŸç†å¦‚ä¸‹ã€‚SwiftGen å’Œ R.swift å¯æ‰«ææ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„enumæˆ–structæ–‡ä»¶ 123456789enum ImageName: String &#123;case myImage = &quot;my_image&quot;&#125;extension UIImage &#123;convenience init?(imageName: ImageName)&#123;self.init(named: imageName.rawValue)&#125;&#125;let image = UIImage(imageName: .myImage) Playgroundå»¶æ—¶è¿è¡Œæœ‰é—®é¢˜ï¼Œéœ€è¦å¼•å…¥PlaygroundSupportæ¡†æž¶ Playgroundä¸Žé¡¹ç›®åä½œ Playgroundçš„å¯è§†åŒ–å¼€å‘ NaN æ˜¯not a numberçš„æ„æ€ï¼Œå¾ˆç‰¹æ®Šï¼Œä½†å¥½åƒæ²¡å•¥ç”¨ï¼ isNaN åˆ¤æ–­æ˜¯å¦æ˜¯NaN swift4ä»¥åŽå¯ä»¥ç”¨Codableåè®®è¿›è¡Œjsonè§£æžï¼Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œ swiftä¸­NSNullä¼šé»˜è®¤é€šè¿‡å¯é€‰é“¾è½¬åŒ–ä¸ºnil åœ¨æ–¹æ³•æˆ–å±žæ€§ä¸Šé¢ä½¿ç”¨å¿«æ·é”®ï¼ˆ alt+cmd+/ ï¼‰å¿«é€Ÿç”Ÿæˆæ³¨é‡Šã€‚ä¹Ÿå¯ä½¿ç”¨jazzy swiftç”±äºŽç±»åž‹å®‰å…¨ï¼Œæ€§èƒ½æ¯”è¾ƒé«˜ï¼ logè¾“å‡º 1234// #file æ–‡ä»¶è·¯å¾„ï¼Œ#line è¡Œå·ï¼Œ#function æ–¹æ³•åfunc Log&lt;T&gt;(_ message: T, file: String = #file, method:String = #function, line:Int = #line)&#123;print(&quot;\((file as NSString).lastPathComponent)[\(line)],\(method): \(message)&quot;)&#125; swiftä¸­å¯ä»¥é€šè¿‡ &amp;+ï¼Œ&amp;-ï¼Œ&amp;*ï¼Œ&amp;/, &amp;% æ¥å¿½ç•¥æº¢å‡ºçš„é”™è¯¯ swiftä¸­æ²¡æœ‰å®å®šä¹‰ï¼Œä½¿ç”¨let æˆ– getå±žæ€§æ¥æ›¿ä»£å®å®šä¹‰ å±žæ€§è®¿é—®æŽ§åˆ¶ï¼šopen (è·¨æ¨¡å—) &gt; publicï¼ˆæœ¬æ¨¡å—ï¼‰ &gt; interalï¼ˆæœ¬æ¨¡å—å†…éƒ¨ç”¨ï¼‰ &gt; fileprivateï¼ˆæœ¬æ–‡ä»¶å¯ç”¨ï¼‰ &gt; privateï¼ˆæœ¬ç±»å¯ç”¨ï¼‰ swiftä¸­çš„æµ‹è¯• swiftçš„CoreDataä½¿ç”¨ é—­åŒ…å¾ˆå¥½ç”¨ï¼Œæœ€å¥½å†™å…¨äº†ï¼Œåˆ«ç”¨ä¹±ä¸ƒå…«ç³Ÿçš„ç®€å†™]]></content>
      <categories>
        <category>swift</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Mach-Oæ–‡ä»¶]]></title>
    <url>%2F2018%2F09%2F29%2FMach-O%E6%96%87%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹&emsp;&emsp;å¤§å®¶éƒ½çŸ¥é“iOSç¼–è¯‘åˆ°æœ€åŽæ˜¯Mach-Oæ–‡ä»¶ï¼Œå…¶å®žå°±æ˜¯iOSæˆ–OS Xçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ ç»“æž„&emsp;&emsp;æœ€åŽç»™å¤§å®¶å®‰åˆ©ä¸¤ä¸ªå·¥å…·ï¼š1ã€MachOView:mach-oæ–‡ä»¶è§£æžå™¨å¯ç›´æŽ¥æŸ¥çœ‹mach-oæ–‡ä»¶ï¼›2ã€OSXç³»ç»Ÿè‡ªå¸¦çš„otoolå¯ä»¥åˆ†æžMach-Oå¯æ‰§è¡Œæ–‡ä»¶ 1 Header&emsp;&emsp;ä¸‹è½½æºç  -&gt; EXTERNAL_HEADERS -&gt; mach-oæ–‡ä»¶å¤¹ -&gt; loader.h æŸ¥çœ‹ç›¸å…³æºç ï¼Œ32ä½å’Œ64ä½åŒºåˆ«ä¸å¤§ï¼Œè¿™é‡Œåªè´´äº†64ä½çš„ç»“æž„123456789101112131415161718/** The 64-bit mach header appears at the very beginning of object files for* 64-bit architectures.*/struct mach_header_64 &#123;uint32_t magic; /* mach magic number identifier */cpu_type_t cputype; /* cpu specifier */cpu_subtype_t cpusubtype; /* machine specifier */uint32_t filetype; /* type of file */uint32_t ncmds; /* number of load commands */uint32_t sizeofcmds; /* the size of all the load commands */uint32_t flags; /* flags */uint32_t reserved; /* reserved */&#125;;/* Constant for the magic field of the mach_header_64 (64-bit architectures) */#define MH_MAGIC_64 0xfeedfacf /* the 64-bit mach magic number */#define MH_CIGAM_64 0xcffaedfe /* NXSwapInt(MH_MAGIC_64) */ &emsp;&emsp;ç®€å•è§£é‡Š magic ç”¨äºŽåˆ¤æ–­ç¨‹åºçš„å¹³å°ç‰ˆæœ¬ cputype å’Œ cpusubtype ç”¨äºŽåˆ¤æ–­cpuåž‹å·å’Œcpuå­åž‹å· filetype æ–‡ä»¶ç±»åž‹,å†³å®šäº†æ–‡ä»¶å¸ƒå±€æ–¹å¼ 1234567* Constants for the filetype field of the mach_header*/#define MH_OBJECT 0x1 /* relocatable object file */#define MH_EXECUTE 0x2 /* demand paged executable file */#define MH_FVMLIB 0x3 /* fixed VM shared library file */ç­‰... ncmdsä»£è¡¨Load Commandçš„ä¸ªæ•° sizeofcmdsä»£è¡¨ncmdsæ®µLoad Commandçš„æ€»å­—èŠ‚æ•° flagsè¡¨ç¤ºdyldåŠ è½½æ ‡å¿—ä½ 123456/* Constants for the flags field of the mach_header */#define MH_NOUNDEFS 0x1 /* the object file has no undefinedreferences */#define MH_INCRLINK 0x2 /* the object file is the output of anç­‰... reservedæ˜¯x64çš„ä¿ç•™ä½ 2 Load Command&emsp;&emsp;å…ˆçœ‹æºç 1234struct load_command &#123;uint32_t cmd;uint32_t cmdsize;&#125;; &emsp;&emsp;æ¯ä¸€ä¸ªcommandå‰ä¸¤ä¸ªå­—æ®µå¿…é¡»æ˜¯CMDå’ŒCMDSIZEï¼Œä¸”æ¯ä¸€ä¸ªéƒ½æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç»“æž„ä½“ï¼Œæ‰€ä»¥é™¤äº†cmdä¹‹å¤–è¿˜éœ€è¦cmdsize12345* Constants for the cmd field of all load commands, the type */#define LC_SEGMENT 0x1 /* segment of this file to be mapped */#define LC_SYMTAB 0x2 /* link-edit stab symbol table info */ç­‰... 3 segment_command&emsp;&emsp;ç›´æŽ¥ä½¿ç”¨LC_xxxæœç´¢å°±èƒ½æœåˆ°ç›¸åº”çš„cmdæ•°æ®ç»“æž„ï¼Œç›´æŽ¥æœç´¢LC_SEGMENT ï¼ŒæŸ¥çœ‹segmentçš„ç»“æž„12345678910111213141516171819/** The 64-bit segment load command indicates that a part of this file is to be* mapped into a 64-bit task&apos;s address space. If the 64-bit segment has* sections then section_64 structures directly follow the 64-bit segment* command and their size is reflected in cmdsize.*/struct segment_command_64 &#123; /* for 64-bit architectures */uint32_t cmd; /* LC_SEGMENT_64 */uint32_t cmdsize; /* includes sizeof section_64 structs */char segname[16]; /* segment name */uint64_t vmaddr; /* memory address of this segment */uint64_t vmsize; /* memory size of this segment */uint64_t fileoff; /* file offset of this segment */uint64_t filesize; /* amount to map from the file */vm_prot_t maxprot; /* maximum VM protection */vm_prot_t initprot; /* initial VM protection */uint32_t nsects; /* number of sections in segment */uint32_t flags; /* flags */&#125;; &emsp;&emsp;æ³¨æ„é—®é¢˜ï¼ˆå¤§å°å†™æ•æ„Ÿï¼‰ __TEXT segment åŒ…å«äº†è¢«æ‰§è¡Œçš„ä»£ç ã€‚å®ƒè¢«ä»¥åªè¯»å’Œå¯æ‰§è¡Œçš„æ–¹å¼æ˜ å°„ã€‚è¿›ç¨‹è¢«å…è®¸æ‰§è¡Œè¿™äº›ä»£ç ï¼Œä½†æ˜¯ä¸èƒ½ä¿®æ”¹ã€‚è¿™äº›ä»£ç ä¹Ÿä¸èƒ½å¯¹è‡ªå·±åšå‡ºä¿®æ”¹ï¼Œå› æ­¤è¿™äº›è¢«æ˜ å°„çš„é¡µä»Žæ¥ä¸ä¼šè¢«æ”¹å˜ã€‚ __DATA segment ä»¥å¯è¯»å†™å’Œä¸å¯æ‰§è¡Œçš„æ–¹å¼æ˜ å°„ã€‚å®ƒåŒ…å«äº†å°†ä¼šè¢«æ›´æ”¹çš„æ•°æ®ã€‚ 4 section&emsp;&emsp;æºç 1234567891011121314struct section_64 &#123; /* for 64-bit architectures */char sectname[16]; /* name of this section */char segname[16]; /* segment this section goes in */uint64_t addr; /* memory address of this section */uint64_t size; /* size in bytes of this section */uint32_t offset; /* file offset of this section */uint32_t align; /* section alignment (power of 2) */uint32_t reloff; /* file offset of relocation entries */uint32_t nreloc; /* number of relocation entries */uint32_t flags; /* flags (section type and attributes)*/uint32_t reserved1; /* reserved (for offset or index) */uint32_t reserved2; /* reserved (for count or sizeof) */uint32_t reserved3; /* reserved */&#125;; &emsp;&emsp;å¸¸è§çš„Sectionï¼Œæ›´å¤š Section è§£é‡Š TEXT.text ä¸»ç¨‹åºä»£ç  TEXT.cstring C è¯­è¨€å­—ç¬¦ä¸² TEXT.const const å…³é”®å­—ä¿®é¥°çš„å¸¸é‡ TEXT.stubs ç”¨äºŽ Stub çš„å ä½ä»£ç ï¼Œå¾ˆå¤šåœ°æ–¹ç§°ä¹‹ä¸ºæ¡©ä»£ç ã€‚ TEXT.stubs_helper å½“ Stub æ— æ³•æ‰¾åˆ°çœŸæ­£çš„ç¬¦å·åœ°å€åŽçš„æœ€ç»ˆæŒ‡å‘ TEXT.objc_methname Objective-C æ–¹æ³•åç§° TEXT.objc_methtype Objective-C æ–¹æ³•ç±»åž‹ TEXT.objc_classname Objective-C ç±»åç§° DATA.data åˆå§‹åŒ–è¿‡çš„å¯å˜æ•°æ® DATA.la_symbol_ptr lazy binding çš„æŒ‡é’ˆè¡¨ï¼Œè¡¨ä¸­çš„æŒ‡é’ˆä¸€å¼€å§‹éƒ½æŒ‡å‘ __stub_helper __DATA.nl_symbol_ptr éž lazy binding çš„æŒ‡é’ˆè¡¨ï¼Œæ¯ä¸ªè¡¨é¡¹ä¸­çš„æŒ‡é’ˆéƒ½æŒ‡å‘ä¸€ä¸ªåœ¨è£…è½½è¿‡ç¨‹ä¸­ï¼Œè¢«åŠ¨æ€é“¾æœºå™¨æœç´¢å®Œæˆçš„ç¬¦å· DATA.const æ²¡æœ‰åˆå§‹åŒ–è¿‡çš„å¸¸é‡ DATA.cfstring ç¨‹åºä¸­ä½¿ç”¨çš„ Core Foundation å­—ç¬¦ä¸²ï¼ˆCFStringRefsï¼‰ DATA.bss BSSï¼Œå­˜æ”¾ä¸ºåˆå§‹åŒ–çš„å…¨å±€å˜é‡ï¼Œå³å¸¸è¯´çš„é™æ€å†…å­˜åˆ†é… DATA.common æ²¡æœ‰åˆå§‹åŒ–è¿‡çš„ç¬¦å·å£°æ˜Ž DATA.objc_classlist Objective-C ç±»åˆ—è¡¨ DATA.objc_protolist Objective-C åŽŸåž‹ DATA.objc_imginfo Objective-C é•œåƒä¿¡æ¯ DATA.objc_selfrefs Objective-C self å¼•ç”¨ DATA.objc_protorefs Objective-C åŽŸåž‹å¼•ç”¨ DATA.objc_superrefs Objective-C è¶…ç±»å¼•ç”¨ å‚è€ƒ objcä¸­å›½ Mach-O å¯æ‰§è¡Œæ–‡ä»¶ è¶£æŽ¢ Mach-Oï¼šæ–‡ä»¶æ ¼å¼åˆ†æž è¶£æŽ¢ Mach-Oï¼šåŠ è½½è¿‡ç¨‹]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>ç¼–è¯‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¤ä¹ swiftï¼šSwiftyJSON]]></title>
    <url>%2F2018%2F09%2F24%2F%E5%A4%8D%E4%B9%A0swift%EF%BC%9ASwiftyJSON%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;ç»§ç»­å¤ä¹ swiftï¼Œå°±å¹³æ—¶å†™domeé‚£ç‚¹ä»£ç é‡ï¼Œswiftè¿˜æ˜¯ä¼šå¿˜å…‰çš„ï¼Œåæ­£ä¹Ÿä¸çŸ¥é“æ°´å•¥ï¼å¼€å§‹å¤ä¹  SwiftyJSONå†…éƒ¨é€šè¿‡æžšä¸¾å’Œç§æœ‰å±žæ€§å°†Dataè½¬ä¸ºå…·ä½“ç±»åž‹ 1234567891011121314151617public enum Type: Int &#123;case numbercase stringcase boolcase arraycase dictionarycase nullcase unknown&#125;/// Private objectfileprivate var rawArray: [Any] = []fileprivate var rawDictionary: [String: Any] = [:]fileprivate var rawString: String = &quot;&quot;fileprivate var rawNumber: NSNumber = 0fileprivate var rawNull: NSNull = NSNull()fileprivate var rawBool: Bool = false initçš„æ ¸å¿ƒæ–¹æ³• 1234567891011121314151617181920/// Private method to unwarp an object recursively// é€’å½’çš„æ‹†è§£objectå¯¹è±¡ï¼Œæ‹†æˆæ•°ç»„ã€å­—å…¸æˆ–åŸºæœ¬ç±»åž‹private func unwrap(_ object: Any) -&gt; Any &#123;switch object &#123;case let json as JSON:return unwrap(json.object)case let array as [Any]:return array.map(unwrap)case let dictionary as [String: Any]:// å°ç»†èŠ‚ï¼Œdictionaryæ˜¯letå¸¸é‡var d = dictionary// å°ç»†èŠ‚2ï¼Œæ‰‹åŠ¨å‘½åå…ƒç¥–pairï¼Œå‘½åæ›´æ¸…æ™°dictionary.forEach &#123; pair ind[pair.key] = unwrap(pair.value)&#125;return ddefault:return object&#125;&#125; mergeçš„æ ¸å¿ƒæ–¹æ³• 123456789101112131415161718192021222324/**Private woker function which does the actual mergingTypecheck is set to true for the first recursion level to prevent total override of the source JSON*/fileprivate mutating func merge(with other: JSON, typecheck: Bool) throws &#123;if type == other.type &#123;switch type &#123;case .dictionary:for (key, _) in other &#123;try self[key].merge(with: other[key], typecheck: false)&#125;case .array:self = JSON(arrayValue + other.arrayValue)default:self = other&#125;&#125; else &#123;if typecheck &#123;throw SwiftyJSONError.wrongType&#125; else &#123;self = other&#125;&#125;&#125; åŽ‰å®³çš„æžšä¸¾ 123456789101112131415161718192021222324252627/*è¿™ä¸ªæžšä¸¾å®šä¹‰çš„å¥½ï¼Œæ”¯æŒæ³›åž‹å¯¹å­ç±»åž‹è¿›è¡ŒåŒ…è£…ï¼åˆæ˜¯å®žçŽ°åè®®ï¼Œé—´æŽ¥è®©JSONæœ‰äº†Collectionçš„èƒ½åŠ›*/public enum Index&lt;T: Any&gt;: Comparable &#123;case array(Int)case dictionary(DictionaryIndex&lt;String, T&gt;)case null// å®žçŽ°åè®®static public func == (lhs: Index, rhs: Index) -&gt; Bool &#123;switch (lhs, rhs) &#123;case (.array(let left), .array(let right)): return left == rightcase (.dictionary(let left), .dictionary(let right)): return left == rightcase (.null, .null): return truedefault: return false&#125;&#125;static public func &lt; (lhs: Index, rhs: Index) -&gt; Bool &#123;switch (lhs, rhs) &#123;case (.array(let left), .array(let right)): return left &lt; rightcase (.dictionary(let left), .dictionary(let right)): return left &lt; rightdefault: return false&#125;&#125;&#125; åŽ‰å®³çš„æ•°ç»„pathå–å€¼ 1234567891011121314151617181920212223242526272829303132333435363738394041// Intä»Žæ•°ç»„ä¸­å–ï¼Œstringä»Žå­—å…¸ä¸­å–fileprivate subscript(sub sub: JSONSubscriptType) -&gt; JSON &#123;get &#123;switch sub.jsonKey &#123;/*ç¬¬ä¸€æ¬¡çœ‹åˆ°self[index: index]å·®ç‚¹å°±ç»•è¿›åŽ»äº†ï¼ŒåŽæ¥æ‰ååº”è¿‡æ¥è°ƒç”¨ä¸Šé¢çš„fileprivate subscript(index index: Int) -&gt; JSON*/ case .index(let index): return self[index: index]case .key(let key): return self[key: key]&#125;&#125;set &#123;switch sub.jsonKey &#123;case .index(let index): self[index: index] = newValuecase .key(let key): self[key: key] = newValue&#125;&#125;&#125;public subscript(path: [JSONSubscriptType]) -&gt; JSON &#123;get &#123;// è¶Šæ¥è¶Šå–œæ¬¢swiftäº†ï¼ŒOCæœ€èµ·ç 10è¡Œèµ·!// å‹æƒ…æç¤ºï¼šselfèµ·å§‹å‚æ•°ã€$0[sub: $1]ä¸‹æ ‡å–å€¼return path.reduce(self) &#123; $0[sub: $1] &#125;&#125;set &#123;switch path.count &#123;case 0: returncase 1: self[sub:path[0]].object = newValue.objectdefault:var nextJSON = self[sub: path[0]]// è¿™é‡Œæ˜¯é€’å½’ï¼Œå‰æå¿…é¡»ç”¨ä¸‹æ ‡è¯­æ³•var aPath = pathaPath.remove(at: 0)nextJSON[aPath] = newValueself[sub: path[0]] = nextJSON&#125;&#125;&#125; åæ§½OCçš„å¯å˜å‚æ•° 12345678910// æ‘˜æŠ„è¿™æ®µæ˜¯å› ä¸ºswiftçš„å¯å˜å‚æ•°æ¯”OCçš„å¼ºå¤ªå¤šäº†// OCçš„å¯å˜å‚æ•°å–å€¼éº»çƒ¦è¿˜æ˜¯æ¬¡è¦çš„ï¼Œä¸»è¦æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°å¾ˆå¤šäººå®¹æ˜“å¿˜äº†å–ï¼Œå…·ä½“è§æˆ‘å¾ˆæ—©å‰å†™çš„åšå®¢public subscript(path: JSONSubscriptType...) -&gt; JSON &#123;get &#123;return self[path]&#125;set &#123;self[path] = newValue&#125;&#125; é‡è½½æ ‡è¯†ç¬¦ 12345678910111213141516// MARK: - Comparableextension JSON: Swift.Comparable &#123;&#125;public func == (lhs: JSON, rhs: JSON) -&gt; Bool &#123;switch (lhs.type, rhs.type) &#123;case (.number, .number): return lhs.rawNumber == rhs.rawNumbercase (.string, .string): return lhs.rawString == rhs.rawStringcase (.bool, .bool): return lhs.rawBool == rhs.rawBoolcase (.array, .array): return lhs.rawArray as NSArray == rhs.rawArray as NSArraycase (.dictionary, .dictionary): return lhs.rawDictionary as NSDictionary == rhs.rawDictionary as NSDictionarycase (.null, .null): return truedefault: return false&#125;&#125;]]></content>
      <categories>
        <category>swift</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¤ä¹ swiftï¼šIQKeyboardManager]]></title>
    <url>%2F2018%2F09%2F17%2F%E5%A4%8D%E4%B9%A0swift%EF%BC%9AIQKeyboardManager%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;å…³äºŽIQKeyboardManagerçš„åŽŸç†ï¼Œè‡ªå·±åŽ»githubä¸Šçœ‹å§ï¼Œæœ‰å®Œæ•´çš„æµç¨‹å›¾ï¼ˆåœ¨æœ€ä¸‹é¢ï¼‰ï¼Œæˆ‘å°±å†™æˆ‘è‡ªå·±æ„Ÿå…´è¶£çš„ï¼Œè§‰å¾—å¥½çŽ©çš„ä¸œè¥¿ å¤§å®¶éƒ½åœ¨ç”¨viewTagï¼Œä½†ä¸€èˆ¬éƒ½æ˜¯æ­£æ•°ï¼å…¶å®žæ˜¯integerç±»åž‹ï¼Œå¯ä»¥æ˜¯è´Ÿæ•°ï¼å¦å¤–tagå€¼è¾ƒå°çš„ï¼Œå¦‚0-100ä¸ºè‹¹æžœä¿ç•™ä½¿ç”¨ï¼Œè‡ªå·±ç”¨æœ€å¥½1000ä»¥ä¸Š 1234/**Default tag for toolbar with Done button -1002.*/private static let kIQDoneButtonToolbarTag = -1002 ä¸ºä»€è¦ä¿ç•™é€šçŸ¥ _kbShowNotification ? çœ‹è¿‡æºç å‘çŽ°ï¼Œå…¶å®žå°±æ˜¯ä¸ªæ ‡å¿—ä½â€¦ 12/** To save keyboardWillShowNotification. Needed for enable keyboard functionality. */private var _kbShowNotification: Notification? as ad? as! 1234is ç”¨äºŽç±»åž‹æ£€æŸ¥as å‘ä¸Šè½¬åž‹asï¼Ÿ å°è¯•å‘ä¸‹è½¬åž‹ï¼Œå¯é€‰å€¼asï¼ å¼ºåˆ¶å‘ä¸‹è½¬åž‹ .selfåˆ°åº•æ˜¯å•¥? 12345678910111213141516171819/*selfå¯ä»¥ç”¨åœ¨ç±»åž‹åŽé¢å–å¾—ç±»åž‹æœ¬èº«ï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨å®žä¾‹åŽé¢å–å¾—è¿™ä¸ªå®žä¾‹æœ¬èº«Selfè¡¨ç¤ºç‰¹å®šç±»åž‹ï¼Œå¹¶ä¸”åªèƒ½ç”¨åœ¨åè®®ä¸­æˆ–è€…ä½œä¸ºæŸä¸ªç±»çš„æ–¹æ³•çš„è¿”å›žå€¼ç±»åž‹, &apos;Self&apos; is only available in a protocol or as the result of a method in a class*/let classNameString = NSStringFromClass(type(of: textFieldViewController.self))/*å…ƒç±»åž‹ç”¨ .Type è¡¨ç¤ºã€‚æ¯”å¦‚ Int.Type å°±æ˜¯ Int çš„å…ƒç±»åž‹ï¼Œæ˜¯ç±»åž‹ä¸æ˜¯å®žä¾‹å€¼AnyClass å…¶å®žå°±æ˜¯ä¸€ä¸ªå…ƒç±»åž‹ typealias AnyClass = AnyObject.Typeæ‰©å±•1ï¼šAny vs AnyObjectAnyObject å¯ä»¥ä»£è¡¨ä»»ä½• class ç±»åž‹çš„å®žä¾‹Any å¯ä»¥è¡¨ç¤ºä»»æ„ç±»åž‹ï¼Œç”šè‡³åŒ…æ‹¬æ–¹æ³•ï¼ˆfuncï¼‰ç±»åž‹ã€‚å‚è€ƒï¼šhttps://swifter.tips/any-anyobject/æ‰©å±•2ï¼štype(of:) vs .selfé€šè¿‡ type(of:) å’Œ .selféƒ½å¯ä»¥èŽ·å¾—å…ƒç±»åž‹çš„å€¼,ä½†.selfå–åˆ°çš„æ˜¯é™æ€çš„å…ƒç±»åž‹ï¼Œå£°æ˜Žçš„æ—¶å€™æ˜¯ä»€ä¹ˆç±»åž‹å°±æ˜¯ä»€ä¹ˆç±»åž‹ã€‚type(of:) å–çš„æ˜¯è¿è¡Œæ—¶å€™çš„å…ƒç±»åž‹ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªå®žä¾‹ çš„ç±»åž‹*/ private var registeredClasses = [UIView.Type]() å…³è”å¯¹è±¡ 123456789101112131415161718import Foundationimport UIKitpublic let kIQUseDefaultKeyboardDistance = CGFloat.greatestFiniteMagnitudeprivate var kIQKeyboardDistanceFromTextField = &quot;kIQKeyboardDistanceFromTextField&quot;@objc var keyboardDistanceFromTextField: CGFloat &#123;get &#123;if let aValue = objc_getAssociatedObject(self, &amp;kIQKeyboardDistanceFromTextField) as? CGFloat &#123;return aValue&#125; else &#123;return kIQUseDefaultKeyboardDistance&#125;&#125;set(newValue) &#123;objc_setAssociatedObject(self, &amp;kIQKeyboardDistanceFromTextField, newValue, objc_AssociationPolicy.OBJC_ASSOCIATION_RETAIN_NONATOMIC)&#125;&#125; animate 123456789101112131415/*a.union(b) //å¹¶é›†a.intersection(b)//äº¤é›†a.subtracting(b) //å–å·®å€¼a.symmetricDifference(b)//åŽ»æŽ‰ç›¸åŒå€¼*//*swiftç‰ˆNSOptionæ˜¯ structå®žçŽ°OptionSetåè®® public struct AnimationOptions : OptionSet*/ UIView.animate(withDuration: _animationDuration, delay: 0, options: _animationCurve.union(.beginFromCurrentState), animations: &#123; () -&gt; Void in// é€ƒé€¸é—­åŒ…ï¼Œdosomething&#125;) &#123; _ in// å°¾éšé—­åŒ…ï¼Œdosomething&#125; å¤šçº¿ç¨‹ 1234OperationQueue.main.addOperation &#123;self.adjustPosition()self._privateHasPendingAdjustRequest = false&#125; å•ä¾‹ 123456789101112131415161718192021222324252627282930// å†™æ³•1/* Automatically called from the `+(void)load` method. */+ (IQKeyboardManager*)sharedManager&#123;//Singleton instancestatic IQKeyboardManager *kbManager;static dispatch_once_t onceToken;dispatch_once(&amp;onceToken, ^&#123;kbManager = [[self alloc] init];&#125;);return kbManager;&#125;// å†™æ³•2@objc public class var shared: IQKeyboardManager &#123;struct Static &#123;//Singleton instance. Initializing keyboard manger.static let kbManager = IQKeyboardManager()&#125;/** @return Returns the default singleton instance. */return Static.kbManager&#125;// å†™æ³•3static let sharedInstance = IQKeyboardManager() #selector 123// #selector() çš„å¥½å¤„æ˜¯ä¸å†éœ€è¦ä½¿ç”¨å­—ç¬¦ä¸²æ¥æž„é€ // ä½†ä½¿ç”¨å±žæ€§æ—¶ï¼Œéœ€è¦getterã€setterå‰ç¼€if textField.responds(to: #selector(setter: UITextField.inputAccessoryView)) &#123;&#125; åè®® 1234// å®žçŽ°å¤šä¸ªåè®®æ–¹æ³•å¤§å®¶éƒ½çŸ¥é“class ExampleTableViewController: UIViewController, UITableViewDataSource, UITableViewDelegate, UIPopoverPresentationControllerDelegate &#123;&#125;// è¦æ±‚ä¸€ä¸ªç±»åž‹åŒæ—¶éµå¾ªå¤šä¸ªåè®®ï¼Œç”¨åè®®åˆæˆ@objc public weak var delegate: (UITextFieldDelegate &amp; UITextViewDelegate)?]]></content>
      <categories>
        <category>swift</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Shellå¤ä¹ ]]></title>
    <url>%2F2018%2F09%2F10%2FShell%E5%A4%8D%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[1 åŸºç¡€å¤ä¹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111# å£°æ˜Žå˜é‡ï¼Œæ³¨æ„ä¸èƒ½æœ‰ç©ºæ ¼your_name=&quot;jzk&quot;# ä½¿ç”¨å˜é‡ï¼Œæœ€å¥½æœ‰å¤§æ‹¬å·echo $&#123;your_name&#125;# å•å¼•å·ï¼Œä¸è½¬ä¹‰ä¹Ÿä¸èƒ½åµŒå¥—ï¼Œä¸€èˆ¬ç”¨äºŽå¸¸é‡å­—ç¬¦ä¸²str1=&apos;http://www.baidu.com&apos;# åŒå¼•å·ï¼Œèƒ½è½¬ä¹‰ä¹Ÿèƒ½åµŒå¥—ï¼ŒæŽ¨èä½¿ç”¨str2=&quot;Hello, I know \&quot;you\&quot; are $&#123;your_name&#125;! \n&quot;# æ‹¼æŽ¥å­—ç¬¦ä¸²ï¼Œæ³¨æ„ä½¿ç”¨åŒå¼•å·ï¼å•å¼•å·ä¸è½¬ä¹‰æ˜¯ä¸ªå‘str3=&quot;hello, &quot;$your_name&quot; !&quot;# å­—ç¬¦ä¸²é•¿åº¦echo $&#123;#str2&#125;# å­—ç¬¦ä¸²æˆªæ–­ã€‚ä»Žç¬¬2ä¸ªå¼€å§‹æˆªå–4ä¸ªecho $&#123;str2:1:4&#125;# #ã€## è¡¨ç¤ºä»Žå·¦è¾¹å¼€å§‹åˆ é™¤ã€‚ä¸€ä¸ª # è¡¨ç¤ºä»Žå·¦è¾¹åˆ é™¤åˆ°ç¬¬ä¸€ä¸ªæŒ‡å®šçš„å­—ç¬¦ï¼›ä¸¤ä¸ª # è¡¨ç¤ºä»Žå·¦è¾¹åˆ é™¤åˆ°æœ€åŽä¸€ä¸ªæŒ‡å®šçš„å­—ç¬¦ã€‚# %ã€%% è¡¨ç¤ºä»Žå³è¾¹å¼€å§‹åˆ é™¤ã€‚ä¸€ä¸ª % è¡¨ç¤ºä»Žå³è¾¹åˆ é™¤åˆ°ç¬¬ä¸€ä¸ªæŒ‡å®šçš„å­—ç¬¦ï¼›ä¸¤ä¸ª % è¡¨ç¤ºä»Žå·¦è¾¹åˆ é™¤åˆ°æœ€åŽä¸€ä¸ªæŒ‡å®šçš„å­—ç¬¦ã€‚str=&quot;www.runoob.com/linux/linux-shell-variable.html&quot;echo &quot;str : $&#123;str&#125;&quot;echo &quot;str#*/ : $&#123;str#*/&#125;&quot; # ä»Ž å­—ç¬¦ä¸²å¼€å¤´ åˆ é™¤åˆ° å·¦æ•°ç¬¬ä¸€ä¸ª&apos;/&apos;echo &quot;str##*/ : $&#123;str##*/&#125;&quot; # ä»Ž å­—ç¬¦ä¸²å¼€å¤´ åˆ é™¤åˆ° å·¦æ•°æœ€åŽä¸€ä¸ª&apos;/&apos;echo &quot;str%/* : $&#123;str%/*&#125;&quot; # ä»Ž å­—ç¬¦ä¸²æœ«å°¾ åˆ é™¤åˆ° å³æ•°ç¬¬ä¸€ä¸ª&apos;/&apos;echo &quot;str%%/* : $&#123;str%%/*&#125;&quot; # ä»Ž å­—ç¬¦ä¸²æœ«å°¾ åˆ é™¤åˆ° å³æ•°æœ€åŽä¸€ä¸ª&apos;/&apos;# ä¸€èˆ¬è‡ªå·±å†™è„šæœ¬éƒ½ä¼šæ³¨æ˜Žä½¿ç”¨æ–¹å¼ # usage: sh xxx.sh [å‚æ•°1å«ä¹‰] [å‚æ•°2å«ä¹‰] [å‚æ•°3å«ä¹‰]# èŽ·å–æ‰§è¡Œshellè„šæœ¬æ—¶å‚æ•°æ–¹æ³•å¦‚ä¸‹echo &quot;æ‰§è¡Œçš„æ–‡ä»¶åï¼š$0&quot;;echo &quot;ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºï¼š$1&quot;;echo &quot;ç¬¬äºŒä¸ªå‚æ•°ä¸ºï¼š$2&quot;;echo &quot;ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºï¼š$3&quot;;# æ•°ç»„ï¼Œä¸å¸¸ç”¨my_arry=(a b &quot;c&quot;,&quot;d&quot; abc)for i in $&#123;my_arry[@]&#125;;doecho $idone# expr æ˜¯ä¸€æ¬¾è¡¨è¾¾å¼è®¡ç®—å·¥å…·ï¼Œä½¿ç”¨å®ƒèƒ½å®Œæˆè¡¨è¾¾å¼çš„æ±‚å€¼æ“ä½œã€‚# æ³¨æ„ä½¿ç”¨çš„æ˜¯åå¼•å· ` è€Œä¸æ˜¯å•å¼•å· &apos;,æ­¤å¤–æŽ¨èç”¨ $() ä»£æ›¿ ``# æ³¨æ„ï¼šæ¡ä»¶è¡¨è¾¾å¼è¦æ”¾åœ¨æ–¹æ‹¬å·ä¹‹é—´ï¼Œå¹¶ä¸”è¦æœ‰ç©ºæ ¼ï¼Œä¾‹å¦‚: [$a==$b] æ˜¯é”™è¯¯çš„ï¼Œå¿…é¡»å†™æˆ [ $a == $b ]ã€‚# æ³¨æ„ï¼šæœ€å¥½ä½¿ç”¨[[....]]çš„ç»“æž„ï¼Œå°½é‡ä¸ç”¨[....]# ç®—æœ¯è¿ç®—ç¬¦ +ã€-ã€*ã€/ã€%ã€=ã€==ã€ï¼=# å…³ç³»è¿ç®—ç¬¦ -eqã€-neã€-gtã€-ltã€-geã€-le #ç­‰åŒäºŽCçš„==ã€!=ã€&gt;ã€&lt;ã€&gt;=ã€&lt;=# å¸ƒå°”è¿ç®—ç¬¦ ï¼ã€-oã€-a# é€»è¾‘è¿ç®—ç¬¦ &amp;&amp;ã€||# å­—ç¬¦ä¸²è¿ç®—ç¬¦ =ã€!=ã€-zã€-nã€$val1=`expr 10 + 20`val2=$(expr 10 + 20)# ifåˆ¤æ–­a=10b=20if [ $a == $b ]thenecho &quot;a ç­‰äºŽ b&quot;elif [ $a -gt $b ]thenecho &quot;a å¤§äºŽ b&quot;elif [ $a -lt $b ]thenecho &quot;a å°äºŽ b&quot;elseecho &quot;æ²¡æœ‰ç¬¦åˆçš„æ¡ä»¶&quot;fi# forfor loop in 1 2 3 4 5doecho &quot;The value is: $loop&quot;done# whileint=1while(( $int&lt;=5 ))doecho $intlet &quot;int++&quot;done# case# æ³¨æ„æ¯ä¸€ä¸ªvalueåŽé¢éœ€è¦ä¸€ä¸ª ï¼‰ï¼Œ;;è¡¨ç¤ºCé‡Œé¢çš„breakï¼Œæœ€åŽç»“å°¾ç”¨esacï¼Œecho &apos;è¾“å…¥ 1 åˆ° 4 ä¹‹é—´çš„æ•°å­—:&apos;echo &apos;ä½ è¾“å…¥çš„æ•°å­—ä¸º:&apos;read aNumcase $aNum in1) echo &apos;ä½ é€‰æ‹©äº† 1&apos;;;2) echo &apos;ä½ é€‰æ‹©äº† 2&apos;;;3) echo &apos;ä½ é€‰æ‹©äº† 3&apos;;;4) echo &apos;ä½ é€‰æ‹©äº† 4&apos;;;*) echo &apos;ä½ æ²¡æœ‰è¾“å…¥ 1 åˆ° 4 ä¹‹é—´çš„æ•°å­—&apos;;;esac# breakå‘½ä»¤å…è®¸è·³å‡ºæ‰€æœ‰å¾ªçŽ¯ï¼Œcontinueä»…ä»…è·³å‡ºå½“å‰å¾ªçŽ¯ã€‚# å‡½æ•°, returnè¿”å›žå€¼ï¼Œ$1ç¬¬ä¸€ä¸ªå‚æ•°ã€$2ç¬¬äºŒä¸ªå‚æ•°fun1()&#123;return $(($1+$2))&#125;fun1 1 2# æ–‡ä»¶åŒ…å«. ./function.sh# å¦‚æžœfunction.shæ˜¯ç”¨æˆ·ä¼ å…¥çš„å‚æ•°ï¼Œå¦‚ä½•èŽ·å¾—å®ƒçš„ç»å¯¹è·¯å¾„å‘¢ï¼Ÿæ–¹æ³•æ˜¯ï¼šreal_path=`readlink -f $1`#$1æ˜¯ç”¨æˆ·è¾“å…¥çš„å‚æ•°ï¼Œå¦‚function.sh. $real_path 2 å¸¸ç”¨linuxå‘½ä»¤2.1 å¸®åŠ© è€è§„çŸ©ï¼Œå…ˆçœ‹å¸®åŠ©å‘½ä»¤ï¼help 1234These shell commands are defined internally. Type `help&apos; to see this list.Type `help name&apos; to find out more about the function `name&apos;.Use `info bash&apos; to find out more about the shell in general.Use `man -k&apos; or `info&apos; to find out more about commands not in this list. æ›´å¼ºå¤§çš„å¸®åŠ©æŒ‡ä»¤æ˜¯manï¼Œä½¿ç”¨manæ—¶å¯ä»¥æŒ‡å®šä¸åŒçš„sectionæ¥æµè§ˆï¼Œå„ä¸ªsectionæ„ä¹‰å¦‚ä¸‹ï¼š 123456781 - commands // æ™®é€šçš„å‘½ä»¤2 - system calls // ç³»ç»Ÿè°ƒç”¨,å¦‚open,writeä¹‹ç±»çš„(é€šè¿‡è¿™ä¸ªï¼Œè‡³å°‘å¯ä»¥å¾ˆæ–¹ä¾¿çš„æŸ¥åˆ°è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œéœ€è¦åŠ ä»€ä¹ˆå¤´æ–‡ä»¶)3 - library calls // åº“å‡½æ•°,å¦‚printf,fread4 - special files // ç‰¹æ®Šæ–‡ä»¶,ä¹Ÿå°±æ˜¯/devä¸‹çš„å„ç§è®¾å¤‡æ–‡ä»¶5 - file formats and convertions // æŒ‡æ–‡ä»¶çš„æ ¼å¼,æ¯”å¦‚passwd, å°±ä¼šè¯´æ˜Žè¿™ä¸ªæ–‡ä»¶ä¸­å„ä¸ªå­—æ®µçš„å«ä¹‰6 - games for linux // ç»™æ¸¸æˆç•™çš„,ç”±å„ä¸ªæ¸¸æˆè‡ªå·±å®šä¹‰7 - macro packages and conventions // é™„ä»¶è¿˜æœ‰ä¸€äº›å˜é‡,æ¯”å¦‚å‘environè¿™ç§å…¨å±€å˜é‡åœ¨è¿™é‡Œå°±æœ‰è¯´æ˜Ž8 - system management commands // ç³»ç»Ÿç®¡ç†ç”¨çš„å‘½ä»¤,è¿™äº›å‘½ä»¤åªèƒ½ç”±rootä½¿ç”¨,å¦‚ifconfig 2.2 ç›®å½• å‘½ä»¤ è§£é‡Š ls å…¨æ‹¼listï¼ŒåŠŸèƒ½æ˜¯åˆ—å‡ºç›®å½•çš„å†…å®¹åŠå…¶å†…å®¹å±žæ€§ä¿¡æ¯ã€‚ cd å…¨æ‹¼change directoryï¼ŒåŠŸèƒ½æ˜¯ä»Žå½“å‰å·¥ä½œç›®å½•åˆ‡æ¢åˆ°æŒ‡å®šçš„å·¥ä½œç›®å½•ã€‚ cp å…¨æ‹¼copyï¼Œå…¶åŠŸèƒ½ä¸ºå¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•ã€‚ mkdir å…¨æ‹¼make directoriesï¼Œå…¶åŠŸèƒ½æ˜¯åˆ›å»ºç›®å½•ã€‚ mv å…¨æ‹¼moveï¼Œå…¶åŠŸèƒ½æ˜¯ç§»åŠ¨æˆ–é‡å‘½åæ–‡ä»¶ã€‚ pwd å…¨æ‹¼print working directoryï¼Œå…¶åŠŸèƒ½æ˜¯æ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•çš„ç»å¯¹è·¯å¾„ã€‚ rename ç”¨äºŽé‡å‘½åæ–‡ä»¶ã€‚ rm å…¨æ‹¼removeï¼Œå…¶åŠŸèƒ½æ˜¯åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶æˆ–ç›®å½•ã€‚ rmdir å…¨æ‹¼remove empty directoriesï¼ŒåŠŸèƒ½æ˜¯åˆ é™¤ç©ºç›®å½•ã€‚ touch åˆ›å»ºæ–°çš„ç©ºæ–‡ä»¶ï¼Œæ”¹å˜å·²æœ‰æ–‡ä»¶çš„æ—¶é—´æˆ³å±žæ€§ã€‚ which æŸ¥æ‰¾äºŒè¿›åˆ¶å‘½ä»¤ï¼ŒæŒ‰çŽ¯å¢ƒå˜é‡PATHè·¯å¾„æŸ¥æ‰¾ã€‚ find ä»Žç£ç›˜éåŽ†æŸ¥æ‰¾æ–‡ä»¶æˆ–ç›®å½•ã€‚ whereis æŸ¥æ‰¾äºŒè¿›åˆ¶å‘½ä»¤ï¼ŒæŒ‰çŽ¯å¢ƒå˜é‡PATHè·¯å¾„æŸ¥æ‰¾ã€‚ locate ä»Žæ•°æ®åº“(/var/lib/mlocate/mlocate.db)æŸ¥æ‰¾å‘½ä»¤ï¼Œä½¿ç”¨updatedbæ›´æ–°åº“ã€‚ 2.3 æŸ¥çœ‹æ–‡ä»¶ å‘½ä»¤ è§£é‡Š cat æŸ¥çœ‹æ–‡ä»¶å†…å®¹,è‹¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºå¯¹åº”æ–‡ä»¶ï¼š more åˆ†é¡µæ˜¾ç¤ºæ–‡ä»¶å†…å®¹ã€‚ head æ˜¾ç¤ºæ–‡ä»¶å†…å®¹çš„å¤´éƒ¨ã€‚ iconv è½¬æ¢æ–‡ä»¶çš„ç¼–ç æ ¼å¼ã€‚ diff å…¨æ‹¼differenceï¼Œæ¯”è¾ƒæ–‡ä»¶çš„å·®å¼‚ï¼Œå¸¸ç”¨äºŽæ–‡æœ¬æ–‡ä»¶ã€‚ grep/egrep è¿‡æ»¤å­—ç¬¦ä¸² join æŒ‰ä¸¤ä¸ªæ–‡ä»¶çš„ç›¸åŒå­—æ®µåˆå¹¶ã€‚ tr æ›¿æ¢æˆ–åˆ é™¤å­—ç¬¦ã€‚ vi/vim å‘½ä»¤è¡Œæ–‡æœ¬ç¼–è¾‘å™¨ã€‚ 2.4 å…¶å®ƒ å‘½ä»¤ è§£é‡Š sudo ä»¥rootæ‰§è¡Œå‘½ä»¤ ping æµ‹è¯•ä¸»æœºä¹‹é—´ç½‘ç»œçš„è¿žé€šæ€§ã€‚ chmod æ”¹å˜æ–‡ä»¶æˆ–ç›®å½•æƒé™ chown æ”¹å˜æ–‡ä»¶æˆ–ç›®å½•çš„å±žä¸»å’Œå±žç»„ã€‚ echo æ‰“å°å˜é‡ï¼Œæˆ–ç›´æŽ¥è¾“å‡ºæŒ‡å®šçš„å­—ç¬¦ä¸² rpm ç®¡ç†rpmåŒ… history æŸ¥çœ‹å‘½ä»¤æ‰§è¡Œçš„åŽ†å²çºªå½•ã€‚ å‚è€ƒ https://www.runoob.com/linux/linux-shell-variable.html]]></content>
      <categories>
        <category>shell</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¤ä¹ swiftï¼šReachability]]></title>
    <url>%2F2018%2F09%2F10%2F%E5%A4%8D%E4%B9%A0swift%EF%BC%9AReachability%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;åˆšè½¬è¡Œçš„æ—¶å€™æ­£å¥½èµ¶ä¸ŠSwiftæ¨ªç©ºå‡ºä¸–ï¼Œä½†å½“æ—¶APIéžå¸¸ä¸ç¨³å®šï¼Œå¤–åŠ é¡¹ç›®éƒ½æ˜¯ç”¨OCå†™çš„å°±å­¦äº†OCï¼å¯¹äºŽSwiftä¹Ÿæ˜¯æŒè§‚æœ›æ€åº¦ï¼16å¹´å­¦ä¹ ä¸€æ®µæ—¶é—´çš„Swiftï¼ŒåŽæ¥æ¥ç™¾åº¦åŽå‘çŽ°éƒ½æ˜¯ç”¨OCå†™çš„ï¼Œè€Œä¸”è¿˜ä¸“é—¨è®¨è®ºè¿‡è¦ä¸è¦å¼•å…¥Swiftæ··ç¼–ï¼Œç»“è®ºè‡ªç„¶æ˜¯ä¸è¡Œçš„ï¼š1ã€å¼•å…¥åŽç¼–è¯‘å˜æ…¢ï¼ŒåŒ…ä½“ç§¯å˜å¤§ï¼›2ã€å…¶å®ƒåŒå­¦éƒ½ä¸ä¼šï¼›å†åŽæ¥å°±ä¸äº†äº†ä¹‹äº†ï¼ &emsp;&emsp;ä½†çŽ°åœ¨å·²ç»8102å¹´äº†ï¼Œä½œä¸ºä¸€ä¸ªiOSå¼€å‘ä½ å†è¯´ä½ ä¸ä¼šSwiftï¼Œé‚£å°±çœŸæœ‰ç‚¹è¯´ä¸è¿‡åŽ»äº†ï¼æ‰€ä»¥æˆ‘å†³å®šä¸‹åŠå¹´å°±ä»Žæ°´Swiftå¼€å§‹å§ï¼è‡³äºŽä¸ºä»€ä¹ˆé€‰æ‹©Reachabilityï¼Ÿå› ä¸ºæƒå¨å’Œç®€å•ï¼Œå¥½é•¿æ—¶é—´ä¸ç”¨Swiftäº†ï¼Œè¿™æ¬¡å°±å½“å¤ä¹ ï¼ä½œä¸ºå¤ä¹ èµ„æ–™ï¼Œè‡ªç„¶è¦æ‰¾æƒå¨çš„ã€ç®€å•çš„ï¼ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304// import Foundation.NSThreadimport SystemConfigurationimport Foundation// å®žçŽ°Erroråè®®public enum ReachabilityError: Error &#123;// æžšä¸¾å…³è”å€¼ï¼Œä¸ªäººè®¤ä¸ºæœ€NBçš„ç‰¹æ€§ï¼Œå…¶å®žç†è§£æˆå…ƒç»„å°±å¥½ç†è§£å¤šäº†case failedToCreateWithAddress(sockaddr, Int32)case failedToCreateWithHostname(String, Int32)case unableToSetCallback(Int32)case unableToSetDispatchQueue(Int32)case unableToGetFlags(Int32)&#125;/*@available æ”¾åœ¨å‡½æ•°ï¼ˆæ–¹æ³•ï¼‰ï¼Œç±»æˆ–è€…åè®®å‰é¢,å£°æ˜Žè¿™äº›çš„ç”Ÿå‘½å‘¨æœŸä¾èµ–äºŽç‰¹å®šçš„å¹³å°å’Œæ“ä½œç³»ç»Ÿç‰ˆæœ¬ã€‚è€Œ#availableç”¨åœ¨åˆ¤æ–­è¯­å¥ä¸­ï¼ˆif, guard, whileç­‰ï¼‰ï¼Œåœ¨ä¸åŒçš„å¹³å°ä¸Šåšä¸åŒçš„é€»è¾‘*/@available(*, unavailable, renamed: &quot;Notification.Name.reachabilityChanged&quot;)public let ReachabilityChangedNotification = NSNotification.Name(&quot;ReachabilityChangedNotification&quot;)// åŸºæœ¬å·²ç»æˆä¸ºé€šçŸ¥å‘½åçš„å›ºå®šå†™æ³•äº†public extension Notification.Name &#123;static let reachabilityChanged = Notification.Name(&quot;reachabilityChanged&quot;)&#125;public class Reachability &#123;// å®šä¹‰ä¸¤ä¸ªå‡½æ•°ç±»åž‹ï¼Œå…¥å‚Reachabilityï¼Œæ— è¿”å›žå€¼public typealias NetworkReachable = (Reachability) -&gt; ()public typealias NetworkUnreachable = (Reachability) -&gt; ()@available(*, unavailable, renamed: &quot;Connection&quot;)public enum NetworkStatus: CustomStringConvertible &#123;case notReachable, reachableViaWiFi, reachableViaWWANpublic var description: String &#123;switch self &#123;case .reachableViaWWAN: return &quot;Cellular&quot;case .reachableViaWiFi: return &quot;WiFi&quot;case .notReachable: return &quot;No Connection&quot;&#125;&#125;&#125;// CustomStringConvertibleåè®®å°±æ˜¯ç”¨æ¥è¾“å‡ºçš„public enum Connection: CustomStringConvertible &#123;@available(*, deprecated, renamed: &quot;unavailable&quot;)case nonecase unavailable, wifi, cellularpublic var description: String &#123;switch self &#123;case .cellular: return &quot;Cellular&quot;case .wifi: return &quot;WiFi&quot;case .unavailable: return &quot;No Connection&quot;case .none: return &quot;unavailable&quot;&#125;&#125;&#125;//public var whenReachable: NetworkReachable?public var whenUnreachable: NetworkUnreachable?@available(*, deprecated, renamed: &quot;allowsCellularConnection&quot;)public let reachableOnWWAN: Bool = true/// Set to `false` to force Reachability.connection to .none when on cellular connection (default value `true`)public var allowsCellularConnection: Bool// The notification center on which &quot;reachability changed&quot; events are being postedpublic var notificationCenter: NotificationCenter = NotificationCenter.default@available(*, deprecated, renamed: &quot;connection.description&quot;)public var currentReachabilityString: String &#123;return &quot;\(connection)&quot;&#125;@available(*, unavailable, renamed: &quot;connection&quot;)public var currentReachabilityStatus: Connection &#123;return connection&#125;// è®¡ç®—åž‹å±žæ€§public var connection: Connection &#123;// ä¹ æƒ¯äºŽOCçš„ _flagséœ€è¦é€‚åº”ä¸€ä¸‹ï¼Œswifté‡Œé™¤éžé‡åï¼Œéƒ½å¯ä»¥ç›´æŽ¥ç”¨ç›¸å…³å±žæ€§if flags == nil &#123;/*Swift ä¸­æœ‰ 4 ç§å¤„ç†é”™è¯¯çš„æ–¹å¼ã€‚ä½ å¯ä»¥æŠŠå‡½æ•°æŠ›å‡ºçš„é”™è¯¯ä¼ é€’ç»™è°ƒç”¨æ­¤å‡½æ•°çš„ä»£ç ã€ç”¨ do-catch è¯­å¥å¤„ç†é”™è¯¯ã€å°†é”™è¯¯ä½œä¸ºå¯é€‰ç±»åž‹å¤„ç†ã€æˆ–è€…æ–­è¨€æ­¤é”™è¯¯æ ¹æœ¬ä¸ä¼šå‘ç”Ÿæ˜¾ç„¶è¿™é‡Œå•¥ä¹Ÿæ²¡å¹²ï¼Œä¸Šå±‚è°ƒç”¨è€…ä¸å…³å¿ƒ*/try? setReachabilityFlags()&#125;switch flags?.connection &#123;case .unavailable?, nil: return .unavailablecase .none?: return .unavailablecase .cellular?: return allowsCellularConnection ? .cellular : .unavailablecase .wifi?: return .wifi&#125;&#125;/*private çœŸæ­£ç§æœ‰fileprivate æ–‡ä»¶å†…ç§æœ‰Internal é»˜è®¤ï¼Œå¯ä»¥è®¿é—®è‡ªå·±moduleæˆ–åº”ç”¨ä¸­æºæ–‡ä»¶é‡Œçš„ä»»ä½•å®žä½“ï¼Œä½†æ˜¯åˆ«äººä¸èƒ½è®¿é—®è¯¥æ¨¡å—ä¸­æºæ–‡ä»¶é‡Œçš„å®žä½“public å¯ä»¥è¢«ä»»ä½•äººè®¿é—®ã€‚ä½†å…¶ä»–moduleä¸­ä¸å¯ä»¥è¢«overrideå’Œç»§æ‰¿ï¼Œè€Œåœ¨moduleå†…å¯ä»¥è¢«overrideå’Œç»§æ‰¿ã€‚open å¯ä»¥è¢«ä»»ä½•äººä½¿ç”¨ï¼ŒåŒ…æ‹¬overrideå’Œç»§æ‰¿ã€‚*/fileprivate var isRunningOnDevice: Bool = &#123;#if targetEnvironment(simulator)return false#elsereturn true#endif&#125;()// åªæœ‰setæ˜¯fileprivatefileprivate(set) var notifierRunning = false// let å¸¸é‡ä¸å¯ä¿®æ”¹ï¼Œä½†å¯initæ—¶èµ‹å€¼fileprivate let reachabilityRef: SCNetworkReachabilityfileprivate let reachabilitySerialQueue: DispatchQueue// å¯é€‰å¸¸é‡ï¼Œå› initæ˜¯æŒ‡å®šäº†é»˜è®¤å€¼ .mainfileprivate let notificationQueue: DispatchQueue?fileprivate(set) var flags: SCNetworkReachabilityFlags? &#123;// å±žæ€§è§‚å¯Ÿå™¨willSetå’ŒdidSetä½¿swiftå¤©ç„¶å…·å¤‡MVVMæ¨¡å¼, æ³¨æ„ä¸è¦å’Œsetã€getä¸€èµ·å†™æ²¡æœ‰æ„ä¹‰didSet &#123;// ä¸€å¼€å§‹æˆ‘ä¹Ÿä¸ç†è§£guardçš„ä½œç”¨ï¼Œå†™èµ·æ¥æ„Ÿè§‰å’Œifæ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œç›´åˆ°æˆ‘é‡åˆ°ifåµŒå¥—// å½“ç„¶ä¸‹é¢è¿™ä¸ªå†™æ³•æˆ‘ä¸ªäººè§‰å¾—è¿˜ä¸å¦‚ifguard flags != oldValue else &#123; return &#125;notifyReachabilityChanged()&#125;&#125;// å¿…è¦æž„é€ å™¨ï¼Œå…¥å‚é»˜è®¤å€¼æ˜¯ä¸ªå¥½ä¸œè¥¿required public init(reachabilityRef: SCNetworkReachability,queueQoS: DispatchQoS = .default,targetQueue: DispatchQueue? = nil,notificationQueue: DispatchQueue? = .main) &#123;self.allowsCellularConnection = trueself.reachabilityRef = reachabilityRef// Cè¯­è¨€çš„GCDï¼Œåœ¨swiftä¸­è¢«æ•´æˆäº†classï¼Œä¸è¿‡ä½¿ç”¨æ–¹å¼æ²¡å˜// ä¸ºä»€ä¹ˆ DispatchQueueå°±ä¸€ä¸ªclasså£°æ˜Žï¼Œæ‰€æœ‰çš„å±žæ€§æ–¹æ³•éƒ½åœ¨extensioné‡Œï¼Ÿself.reachabilitySerialQueue = DispatchQueue(label: &quot;uk.co.ashleymills.reachability&quot;, qos: queueQoS, target: targetQueue)self.notificationQueue = notificationQueue&#125;// ä¾¿åˆ©æž„é€ å™¨public convenience init(hostname: String,queueQoS: DispatchQoS = .default,targetQueue: DispatchQueue? = nil,notificationQueue: DispatchQueue? = .main) throws &#123;guard let ref = SCNetworkReachabilityCreateWithName(nil, hostname) else &#123;throw ReachabilityError.failedToCreateWithHostname(hostname, SCError())&#125;self.init(reachabilityRef: ref, queueQoS: queueQoS, targetQueue: targetQueue, notificationQueue: notificationQueue)&#125;public convenience init(queueQoS: DispatchQoS = .default,targetQueue: DispatchQueue? = nil,notificationQueue: DispatchQueue? = .main) throws &#123;var zeroAddress = sockaddr()zeroAddress.sa_len = UInt8(MemoryLayout&lt;sockaddr&gt;.size)zeroAddress.sa_family = sa_family_t(AF_INET)guard let ref = SCNetworkReachabilityCreateWithAddress(nil, &amp;zeroAddress) else &#123;throw ReachabilityError.failedToCreateWithAddress(zeroAddress, SCError())&#125;self.init(reachabilityRef: ref, queueQoS: queueQoS, targetQueue: targetQueue, notificationQueue: notificationQueue)&#125;// æžæž„ï¼Œè·Ÿdeallocä¸€æ ·deinit &#123;stopNotifier()&#125;&#125;public extension Reachability &#123;// MARK: - *** Notifier methods ***func startNotifier() throws &#123;guard !notifierRunning else &#123; return &#125;let callback: SCNetworkReachabilityCallBack = &#123; (reachability, flags, info) inguard let info = info else &#123; return &#125;// `weakifiedReachability` is guaranteed to exist by virtue of our// retain/release callbacks which we provided to the `SCNetworkReachabilityContext`./*OCå¯¹äºŽ CF ç³»çš„ APIï¼Œå¦‚æžœ API çš„åå­—ä¸­å«æœ‰ Createï¼ŒCopy æˆ–è€… Retainçš„è¯ï¼Œåœ¨ä½¿ç”¨å®ŒæˆåŽï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨ CFRelease æ¥è¿›è¡Œé‡Šæ”¾Swift ä¸­æˆ‘ä»¬ä¸å†éœ€è¦æ˜¾å¼åœ°åŽ»é‡Šæ”¾å¸¦æœ‰è¿™äº›å…³é”®å­—çš„å†…å®¹äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒCF çŽ°åœ¨ä¹Ÿåœ¨ ARC çš„ç®¡è¾–èŒƒå›´ä¹‹å†…äº†ä½†æ˜¯æœ‰ä¸€ç‚¹ä¾‹å¤–ï¼ˆæžå°‘ä¼šç”¨åˆ°ï¼‰ï¼Œé‚£å°±æ˜¯å¯¹äºŽéžç³»ç»Ÿçš„CFçš„API(æ¯”å¦‚ä½ è‡ªå·±å†™çš„æˆ–è€…æ˜¯ç¬¬ä¸‰æ–¹çš„),å°†è¿™äº›è¿”å›žCFå¯¹è±¡çš„APIå¯¼å…¥Swiftæ—¶ï¼Œå®ƒä»¬çš„ç±»åž‹ä¼šè¢«å¯¹å¯¹åº”ä¸º Unmanaged&lt;T&gt;ã€‚è¿™æ„å‘³ç€åœ¨ä½¿ç”¨æ—¶æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨è¿›è¡Œå†…å­˜ç®¡ç†ï¼ŒtakeUnretainedValue å°†ä¿æŒåŽŸæ¥çš„å¼•ç”¨è®¡æ•°ä¸å˜ï¼Œåœ¨ä½ æ˜Žç™½ä½ æ²¡æœ‰ä¹‰åŠ¡åŽ»é‡Šæ”¾åŽŸæ¥çš„å†…å­˜æ—¶ï¼Œåº”è¯¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ã€‚è€Œå¦‚æžœä½ éœ€è¦é‡Šæ”¾å¾—åˆ°çš„ CF çš„å¯¹è±¡çš„å†…å­˜æ—¶ï¼Œåº”è¯¥ä½¿ç”¨ takeRetainedValue æ¥è®©å¼•ç”¨è®¡æ•°åŠ ä¸€ï¼Œç„¶åŽåœ¨ä½¿ç”¨å®ŒåŽå¯¹åŽŸæ¥çš„ Unmanaged è¿›è¡Œæ‰‹åŠ¨é‡Šæ”¾ã€‚ä¸ºäº†èƒ½æ‰‹åŠ¨æ“ä½œ Unmanaged çš„å¼•ç”¨è®¡æ•°ï¼ŒUnmanaged ä¸­è¿˜æä¾›äº† retainï¼Œrelease å’Œ autorelease è¿™æ ·çš„ &quot;è€æœ‹å‹&quot; ä¾›æˆ‘ä»¬ä½¿ç”¨*/let weakifiedReachability = Unmanaged&lt;ReachabilityWeakifier&gt;.fromOpaque(info).takeUnretainedValue()// The weak `reachability` _may_ no longer exist if the `Reachability`// object has since been deallocated but a callback was already in flight.weakifiedReachability.reachability?.flags = flags&#125;let weakifiedReachability = ReachabilityWeakifier(reachability: self)let opaqueWeakifiedReachability = Unmanaged&lt;ReachabilityWeakifier&gt;.passUnretained(weakifiedReachability).toOpaque()var context = SCNetworkReachabilityContext(version: 0,info: UnsafeMutableRawPointer(opaqueWeakifiedReachability),retain: &#123; (info: UnsafeRawPointer) -&gt; UnsafeRawPointer inlet unmanagedWeakifiedReachability = Unmanaged&lt;ReachabilityWeakifier&gt;.fromOpaque(info)_ = unmanagedWeakifiedReachability.retain()return UnsafeRawPointer(unmanagedWeakifiedReachability.toOpaque())&#125;,release: &#123; (info: UnsafeRawPointer) -&gt; Void inlet unmanagedWeakifiedReachability = Unmanaged&lt;ReachabilityWeakifier&gt;.fromOpaque(info)unmanagedWeakifiedReachability.release()&#125;,copyDescription: &#123; (info: UnsafeRawPointer) -&gt; Unmanaged&lt;CFString&gt; inlet unmanagedWeakifiedReachability = Unmanaged&lt;ReachabilityWeakifier&gt;.fromOpaque(info)let weakifiedReachability = unmanagedWeakifiedReachability.takeUnretainedValue()let description = weakifiedReachability.reachability?.description ?? &quot;nil&quot;return Unmanaged.passRetained(description as CFString)&#125;)if !SCNetworkReachabilitySetCallback(reachabilityRef, callback, &amp;context) &#123;stopNotifier()throw ReachabilityError.unableToSetCallback(SCError())&#125;if !SCNetworkReachabilitySetDispatchQueue(reachabilityRef, reachabilitySerialQueue) &#123;stopNotifier()throw ReachabilityError.unableToSetDispatchQueue(SCError())&#125;// Perform an initial checktry setReachabilityFlags()notifierRunning = true&#125;func stopNotifier() &#123;// deferçš„ä½œç”¨å°±æ˜¯å‡½æ•°ç»“æŸå‰ä¼šè°ƒï¼Œæ— è®ºå‡½æ•°æ˜¯æ€Žä¹ˆç»“æŸçš„ï¼defer &#123; notifierRunning = false &#125;SCNetworkReachabilitySetCallback(reachabilityRef, nil, nil)SCNetworkReachabilitySetDispatchQueue(reachabilityRef, nil)&#125;// MARK: - *** Connection test methods ***@available(*, deprecated, message: &quot;Please use `connection != .none`&quot;)var isReachable: Bool &#123;return connection != .unavailable&#125;@available(*, deprecated, message: &quot;Please use `connection == .cellular`&quot;)var isReachableViaWWAN: Bool &#123;// Check we&apos;re not on the simulator, we&apos;re REACHABLE and check we&apos;re on WWANreturn connection == .cellular&#125;@available(*, deprecated, message: &quot;Please use `connection == .wifi`&quot;)var isReachableViaWiFi: Bool &#123;return connection == .wifi&#125;var description: String &#123;return flags?.description ?? &quot;unavailable flags&quot;&#125;&#125;fileprivate extension Reachability &#123;// ä¸ŠæŠ›é”™è¯¯func setReachabilityFlags() throws &#123;try reachabilitySerialQueue.sync &#123; [unowned self] invar flags = SCNetworkReachabilityFlags()if !SCNetworkReachabilityGetFlags(self.reachabilityRef, &amp;flags) &#123;self.stopNotifier()throw ReachabilityError.unableToGetFlags(SCError())&#125;self.flags = flags&#125;&#125;// å‘é€šçŸ¥func notifyReachabilityChanged() &#123;/*swiftä¸­æ‰€æœ‰çš„classç±»åž‹å˜é‡éƒ½é»˜è®¤é‡‡ç”¨strongä¿®é¥°Apple ç»™æˆ‘ä»¬çš„å»ºè®®æ˜¯å¦‚æžœèƒ½å¤Ÿç¡®å®šåœ¨è®¿é—®æ—¶ä¸ä¼šå·²è¢«é‡Šæ”¾çš„è¯ï¼Œå°½é‡ä½¿ç”¨ unowned ï¼Œå¦‚æžœå­˜åœ¨è¢«é‡Šæ”¾çš„å¯èƒ½ï¼Œé‚£å°±é€‰æ‹©ç”¨ weak*/let notify = &#123; [weak self] in// ä¿è¯selfå­˜åœ¨guard let self = self else &#123; return &#125;// (Reachability) -&gt; ()ç±»åž‹çš„å¯é€‰å±žæ€§self.connection != .unavailable ? self.whenReachable?(self) : self.whenUnreachable?(self)// @escaping é€ƒé€¸é—­åŒ…å¿…é¡»åœ¨é—­åŒ…ä¸­æ˜¾å¼åœ°å¼•ç”¨ selfself.notificationCenter.post(name: .reachabilityChanged, object: self)&#125;// notify on the configured `notificationQueue`, or the caller&apos;s (i.e. `reachabilitySerialQueue`)// ?? å¯é€‰å¯ç”¨ç”¨å¯é€‰ï¼Œå¯é€‰ä¸èƒ½ç”¨ç”¨åŽé¢notificationQueue?.async(execute: notify) ?? notify()&#125;&#125; &emsp;&emsp;æ­¤å¤–è¿˜æœ‰ä¸€ä¸ªclassï¼Œæ¯”è¾ƒå¥½çŽ©ï¼æ³¨é‡Šçš„å¾ˆæ¸…æ¥šäº†ï¼Œæ€è·¯æŒºå¥½,å…¶å®žå°±æ˜¯weakproxyçš„ä½œç”¨12345678910111213141516171819202122232425262728293031323334353637383940/**`ReachabilityWeakifier` weakly wraps the `Reachability` classin order to break retain cycles when interacting with CoreFoundation.CoreFoundation callbacks expect a pair of retain/release whenever anopaque `info` parameter is provided. These callbacks exist to guardagainst memory management race conditions when invoking the callbacks.#### Race ConditionIf we passed `SCNetworkReachabilitySetCallback` a direct reference to our`Reachability` class without also providing corresponding retain/releasecallbacks, then a race condition can lead to crashes when:- `Reachability` is deallocated on thread X- A `SCNetworkReachability` callback(s) is already in flight on thread Y#### Retain CycleIf we pass `Reachability` to CoreFoundtion while also providing retain/release callbacks, we would create a retain cycle once CoreFoundationretains our `Reachability` class. This fixes the crashes and his howCoreFoundation expects the API to be used, but doesn&apos;t play nicely withSwift/ARC. This cycle would only be broken after manually calling`stopNotifier()` â€” `deinit` would never be called.#### ReachabilityWeakifierBy providing both retain/release callbacks and wrapping `Reachability` ina weak wrapper, we:- interact correctly with CoreFoundation, thereby avoiding a crash.See &quot;Memory Management Programming Guide for Core Foundation&quot;.- don&apos;t alter the public API of `Reachability.swift` in any way- still allow for automatic stopping of the notifier on `deinit`.*/private class ReachabilityWeakifier &#123;weak var reachability: Reachability?init(reachability: Reachability) &#123;self.reachability = reachability&#125;&#125;]]></content>
      <categories>
        <category>swift</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[22æ¡å•†è§„]]></title>
    <url>%2F2018%2F08%2F31%2F22%E6%9D%A1%E5%95%86%E8%A7%84%2F</url>
    <content type="text"><![CDATA[å®šä½ å®šä½å’Œèšç„¦å®šä½éžå¸¸é‡è¦ï¼Œåå…¶é“è€Œè¡Œä¹‹ä¹Ÿè®¸å°±æ˜¯æœºä¼šã€‚ å®šä½ä¸æ˜¯ä¸€æˆä¸å˜çš„ï¼Œåº”æŠŠæ¡åˆ†åŒ–è¶‹åŠ¿ï¼Œé€‚æ—¶é‡å®šä½ã€‚ æ¯ä¸ªäººåªèƒ½ä¸ºæ¯ä¸ªå“ç±»ç•™ä¸‹ä¸¤ä¸ªå“ç‰Œç©ºé—´ï¼Œå³å°±èƒ½è®°ä½ä¿©å“ç‰Œï¼ä¾‹å¦‚ç©ºè°ƒï¼Œå°±è®°ä½äº†æ ¼åŠ›å’Œç¾Žçš„ å®šä½4æ­¥æ³•ï¼š ç¬¬ä¸€æ­¥ï¼Œåˆ†æžæ•´ä¸ªå¤–éƒ¨çŽ¯å¢ƒï¼Œç¡®å®šæˆ‘ä»¬çš„ç«žäº‰å¯¹æ‰‹æ˜¯è°ï¼Œç«žäº‰å¯¹æ‰‹çš„ä»·å€¼æ˜¯ä»€ä¹ˆ ç¬¬äºŒæ­¥ï¼Œé¿å¼€ç«žäº‰å¯¹æ‰‹åœ¨é¡¾å®¢å¿ƒæ™ºä¸­çš„å¼ºåŠ¿ï¼Œæˆ–æ˜¯åˆ©ç”¨å…¶å¼ºåŠ¿ä¸­è•´å«çš„å¼±ç‚¹ï¼Œç¡®ç«‹å“ç‰Œçš„ä¼˜åŠ¿ä½ç½®ï¼šå®šä½ ç¬¬ä¸‰æ­¥ï¼Œä¸ºè¿™ä¸€å®šä½å¯»æ±‚ä¸€ä¸ªå¯é çš„è¯æ˜Žï¼šä¿¡ä»»çŠ¶ ç¬¬å››æ­¥ï¼Œå°†è¿™ä¸€å®šä½æ•´åˆè¿›ä¼ä¸šå†…éƒ¨è¿è¥çš„æ–¹æ–¹é¢é¢ï¼Œç‰¹åˆ«æ˜¯ä¼ æ’­ä¸Šè¦æœ‰è¶³å¤Ÿçš„èµ„æºï¼Œä»¥å°†è¿™å®šä½æ¤å…¥é¡¾å®¢å¿ƒæ™º å¤ºå–å¿ƒæ™ºèµ„æºã€‚æ¯ä¸ªäººç²¾åŠ›æ—¶é—´éƒ½ä¼˜å…ˆï¼Œç¬¬ä¸€æ—¶é—´æƒ³åˆ°ä»€ä¹ˆå“ç‰Œï¼Œå°±å¾ˆå¯èƒ½ç”¨ä»€ä¹ˆå“ç‰Œ å®šä½æ¿€å‘å“ç‰Œç”Ÿäº§åŠ›ã€‚ å®šä½æå‡è¿è¥ç»©æ•ˆã€‚æ›´èšç„¦æœ‰æ•ˆçš„ï¼Œå‰”é™¤æ— æ•ˆçš„ å®šä½å®¢è§‚å­˜åœ¨ï¼Œè¦ä¹ˆåœ¨æ­£ç¡®ã€ç²¾å‡†çš„å®šä½ä¸Šï¼Œè¦ä¹ˆåœ¨é”™è¯¯ã€æ¨¡ç³Šçš„å®šä½ä¸Š æ‰€æœ‰ç»„ç»‡å’Œä¸ªäººéƒ½éœ€è¦å®šä½ ç¾Žå›½ä¼ä¸šå“²å­¦å°±æ˜¯èšç„¦ã€ç‹­çª„è€Œæ·±å…¥ï¼Œä¸­å›½ä¼ä¸šå“²å­¦æ˜¯å®½æ³›è€Œæµ…æ˜¾ ä¼ä¸šå¾ˆéš¾ä»…ä»…é€šè¿‡æ»¡è¶³å®¢æˆ·éœ€æ±‚çš„æ–¹å¼åœ¨è¥é”€ä¸­èŽ·å¾—æˆåŠŸã€‚æ›´åº”è¯¥èšç„¦ å•†è§„é¢†å…ˆå®šå¾‹ æˆä¸ºç¬¬ä¸€èƒœè¿‡åšçš„æœ€å¥½ï¼Œç¬¬ä¸€èƒ½å é¢†å®¢æˆ·å¿ƒæ™ºï¼Œæœ€å¥½å´æ— æ³•ç•Œå®šã€‚ åˆ›é€ ä¸€ä¸ªä½ èƒ½æˆä¸ºç¬¬ä¸€çš„æ–°é¢†åŸŸã€‚ æ—¶æœºå¾ˆé‡è¦ï¼Œå¤©æ—¶åœ°åˆ©äººå’Œã€‚ é¦–åˆ›å“ç‰Œé€šå¸¸èƒ½ä¿æŒè‡ªå·±çš„é¢†å…ˆåœ°ä½ï¼Œç”šè‡³æˆä¸ºå“ç±»çš„ä»£åè¯ å“ç±»å®šå¾‹ å¦‚æžœä½ ä¸èƒ½ç¬¬ä¸€ä¸ªè¿›å…¥æŸå“ç±»ï¼Œé‚£ä¹ˆå°±åˆ›é€ ä¸€ä¸ªå“ç±»ä½¿è‡ªå·±æˆä¸ºç¬¬ä¸€ã€‚ é¦–å…ˆè¦é—®å¹¶ä¸æ˜¯â€œä¸Žç«žäº‰å¯¹æ‰‹ç›¸æ¯”ï¼Œè¿™ä¸ªäº§å“æœ‰å“ªäº›ä¼˜åŠ¿â€ï¼Œè€Œæ˜¯â€œè¿™ä¸ªäº§å“èƒ½åœ¨å“ªä¸ªå“ç±»æˆä¸ºç¬¬ä¸€â€ã€‚ å‡ ä¹Žæ¯ä¸ªäººéƒ½ä¼šå¯¹æ–°å“ç±»äº§ç”Ÿå…´è¶£ï¼Œå¾ˆå°‘æœ‰äººä¼šå¯¹æ›´å¥½çš„äº§å“äº§ç”Ÿå…´è¶£ å¿ƒæ™ºå®šå¾‹ å¸‚åœºè¥é”€æ˜¯ä¸€åœºäº‰å¤ºè®¤çŸ¥è€Œä¸æ˜¯äº§å“çš„æˆ˜äº‰ï¼Œåœ¨è¿›å…¥å¸‚åœºä¹‹å‰åº”è¯¥çŽ‡å…ˆè¿›å…¥å¿ƒæ™ºã€‚ åœ¨å¸‚åœºè¥é”€ä¸­æœ€ä¸ºå¾’åŠ³çš„å°±æ˜¯è¯•å›¾æ”¹å˜äººä»¬çš„è®¤çŸ¥ã€‚ åº”é‡‡ç”¨è¿…çŒ›è€Œéžæ¸è¿›çš„æ–¹å¼ç»™åˆ«äººç•™ä¸‹ä¸€ä¸ªæ·±åˆ»å°è±¡ï¼Œä¸è¦æƒ³ç€é€æ¸å½±å“åˆ«äººä»¥åšå¾—å¥½æ„Ÿï¼ è®¤çŸ¥å®šå¾‹ å¸‚åœºè¥é”€é¢†åŸŸå¹¶ä¸å­˜åœ¨å®¢è§‚çŽ°å®žæ€§ï¼Œä¹Ÿä¸å­˜åœ¨äº‹å®žï¼Œæ›´ä¸å­˜åœ¨æœ€å¥½çš„äº§å“ã€‚ å­˜åœ¨çš„åªæ˜¯é¡¾å®¢å¿ƒæ™ºä¸­çš„è®¤çŸ¥ï¼Œå…¶ä»–éƒ½æ˜¯å¹»è§‰ï¼ å¤§å¤šæ•°äººéƒ½è®¤ä¸ºè‡ªå·±çš„è®¤çŸ¥èƒ½åŠ›æ¯”åˆ«äººå¼ºï¼Œè®¤ä¸ºè‡ªå·±æ€»æ˜¯æ­£ç¡®çš„ã€‚ äººä»¬æ€»æ˜¯ç›¸ä¿¡è‡ªå·±æ„¿æ„ç›¸ä¿¡çš„ä¸œè¥¿ã€‚ å¦å¤–ä¸€ç‚¹å°±æ˜¯ä»Žä¼—æ•ˆåº”ï¼Œè®¤åŒçš„äººè¶Šå¤šï¼Œè®¤åŒçš„äººè¶Šå¤š èšç„¦å®šå¾‹ å¸‚åœºè¥é”€çš„è¦ç‚¹å°±æ˜¯èšç„¦ï¼Œæ”¶ç¼©ç»è¥èŒƒå›´å°†ä½¿ä½ æ›´å¼ºå¤§ï¼Œè¿½é€æ‰€æœ‰ç›®æ ‡å°†ä½¿ä½ ä¸€äº‹æ— æˆã€‚ æœ€æœ‰æ•ˆçš„ä»£åè¯åº”è¯¥æ˜¯ç®€æ´ã€èƒ½ä½“çŽ°ä¼˜åŠ¿çš„è¯è¯­ã€‚ å…‰çŽ¯æ•ˆåº”ï¼Œä¸“æ³¨äºŽæŸä¸€ä¼˜åŠ¿ï¼Œç”¨æˆ·ä¼šå¸¦æ¥æ›´å¤šä¼˜åŠ¿ã€‚ ä½ ä¸èƒ½è®²å…¶ä»–å…¬å¸çš„ä»£åè¯æ®ä¸ºå·±æœ‰ï¼Œé¿å…æ­£é¢æˆ˜æ–—é€‰æ‹©è¿‚å›žæˆ˜æœ¯ã€‚ ä½ ä¸èƒ½è®²ç„¦ç‚¹é›†ä¸­åœ¨è´¨é‡æˆ–æ˜¯è¯¸å¦‚å¦‚æ­¤ç±»ä¸å­˜åœ¨å¯¹ç«‹é¢çš„æ¦‚å¿µä¸Šã€‚ æœ‰äº†è‡ªå·±çš„ä»£åè¯è¦è¿›è¡Œä¸“åˆ©æ³¨å†Œï¼Œä½†å…è®¸åˆ«äººä½¿ç”¨ã€‚è¦å…¨åŠ›ä¿æŠ¤è‡ªå·±æ¦‚å¿µåœ¨å¸‚åœºä¸Šåœ°ä½ã€‚ ä¸“æœ‰å®šå¾‹ å½“ä½ çš„ç«žäº‰å¯¹æ‰‹å·²ç»åœ¨æ½œåœ¨é¡¾å®¢å¿ƒæ™ºä¸­æ‹¥æœ‰ä¸€ä¸ªä»£åè¯æˆ–å®šä½æ—¶ï¼Œä½ è‹¥å†æƒ³æ‹¥æœ‰åŒä¸€ä¸ªä»£åè¯å°†æ˜¯å¾’åŠ³æ— ç›Šçš„ã€‚ èŠ±æ›´å¤šçš„é’±åŽ»æŠ¢åˆ«äººçš„ä»£åè¯ä¸ä½†æŠ¢ä¸åˆ°ï¼Œè€Œä¸”ä¼šæå‡å¯¹æ‰‹çš„å½±å“åŠ›ã€‚ ç”¨æˆ·æƒ³è¦ä»€ä¹ˆï¼Œå’Œæˆ‘ä»¬åœ¨å¹¿å‘Šä¸­å¼ºè°ƒä»€ä¹ˆæ²¡å…³ç³»ï¼Œå¼ºè°ƒçš„åº”è¯¥æ˜¯è‡ªå·±çš„ä»£åè¯ã€‚ é˜¶æ¢¯å®šå¾‹ äº§å“éƒ½éžç”Ÿæ¥å¹³ç­‰ï¼Œæ½œåœ¨é¡¾å®¢åœ¨åšè´­ä¹°å†³å®šæ—¶æ€»ä¼šå¯¹å„å“ç‰Œè¿›è¡ŒæŽ’åºï¼Œå¯¹äºŽæ¯ä¸€ä¸ªå“ç±»ï¼Œé¡¾å®¢çš„å¿ƒæ™ºä¸­éƒ½ä¼šå½¢æˆä¸€ä¸ªé€‰è´­é¡ºåºé˜¶æ¢¯ï¼Œæ¯ä¸ªå“ç‰Œå æœ‰ä¸€å±‚é˜¶æ¢¯ã€‚ä½ çš„è¥é”€æˆ˜ç•¥åº”è¯¥æ ¹æ®ä½ çš„å“ç‰Œå æ®äº†å¿ƒæ™ºé˜¶æ¢¯çš„ä½ç½®æ¥å†³å®šã€‚ é€šå¸¸äººä»¬åªæŽ¥å—ä¸Žè‡ªå·±è®¤çŸ¥ç›¸ä¸€è‡´çš„æ–°ä¿¡æ¯ï¼Œå…¶ä»–çš„éƒ½ä¼šè¢«ç½®ä¹‹ä¸ç†ã€‚ æœ‰æ—¶å€™åœ¨å¤§å“ç±»çš„é˜¶æ¢¯ä¸Šå±ˆå±…ç¬¬ä¸‰è¦èƒœè¿‡åœ¨å°å“ç±»çš„é˜¶æ¢¯ä¸Šç‹¬å é³Œå¤´ åœ¨è¥é”€ä¸­ï¼Œå¿ƒæ™ºå†³å®šå¸‚åœºï¼›å“ç‰Œçš„å¿ƒæ™ºåœ°ä½å†³å®šå¸‚åœºåœ°ä½ï¼›å¿ƒæ™ºä»½é¢å†³å®šå¸‚åœºä»½é¢ äºŒå…ƒå®šå¾‹ ä»Žæ€»ä½“å’Œé•¿è¿œè§’åº¦æ¥çœ‹ï¼Œä½ ä¼šå‘çŽ°å¸‚åœºå¾€å¾€æ¼”åŒ–æˆä¸¤å¤§å“ç‰Œç«žäº‰çš„å±€é¢ã€‚ å½“ä½ å¤„äºŽç¬¬ä¸‰çš„ä½ç½®ï¼Œä½ æ— æ³•é€šè¿‡ç›´æŽ¥æ”»å‡»ä¸¤ä¸ªå¼ºå¤§çš„é¢†å…ˆè€…æ¥èŽ·å¾—æ›´å¤§å‘å±•ï¼Œè€Œä»–ä»¬å´å¯èƒ½ä»Žä¸­æ¸”åˆ©ã€‚ æ˜Žç¡®è‡ªå·±çš„å®šä½ï¼Œé‡‡ç”¨ç¬¦åˆè‡ªå·±å®šä½çš„æ‰‹æ®µ é¡¾å®¢ç›¸ä¿¡å¸‚åœºè¥é”€æ˜¯ä¸€åœºäº§å“çš„è¾ƒé‡ï¼Œå› ä¸ºä»–ä»¬ç›¸ä¿¡é¢†å…ˆå“ç‰Œæ€»æ˜¯æ›´å¥½ä¸€äº›ï¼Œä»–ä»¬å¼€å§‹è´­ä¹°é¢†å…ˆå“ç‰Œ å¯¹ç«‹å®šå¾‹ è‹¥æƒ³æˆä¸ºå¸‚åœºç¬¬äºŒï¼Œé‚£ä¹ˆä½ çš„æˆ˜ç•¥åº”ç”±ç¬¬ä¸€å†³å®šã€‚çŸ¥å·±çŸ¥å½¼ï¼Œä»»ä½•ç¬¬äºŒéƒ½æœ‰æœºä¼šå¹²æŽ‰ç¬¬ä¸€ å¿…é¡»å‘çŽ°é¢†å¯¼è€…å¼ºå¤§çš„æœ¬è´¨ï¼Œç„¶åŽä»¥ä¸Žå…¶ç›¸å¯¹ç«‹çš„å®šä½å‡ºçŽ°åœ¨æ½œåœ¨é¡¾å®¢é¢å‰ï¼ä¸è¦è¯•å›¾å˜å¾—æ›´å¥½ï¼Œä½†è¦è¯•å›¾å˜å¾—ä¸åŒ æ¨¡ä»¿é¢†å…ˆè€…æ˜¯å¾’åŠ³çš„ ä¸è¦ä¸€å‘³åœ°æ‰“å‡»ä½ çš„ç«žäº‰å¯¹æ‰‹ã€‚è¦æ±‚ä½ ä¸æ–­å®£ä¼ ç«žäº‰å¯¹æ‰‹çš„å¼±ç‚¹ï¼ˆå¿…é¡»ä»¥äº‹å®žä¸ºæ ¹æ®ï¼‰ï¼Œæ˜¯ä½ çš„æ½œåœ¨é¡¾å®¢å¾ˆå¿«å°±èƒ½æ„è¯†åˆ°è¿™ä¸ªé—®é¢˜ï¼ŒæŽ¥ç€è¿…é€Ÿè°ƒè½¬çŸ›å¤´ åˆ†åŒ–å®šå¾‹ æ¯ä¸ªå“ç±»æ€»æ˜¯å§‹äºŽæŸä¸€ä¸ªå•ä¸€çš„å“ç±»ï¼Œä½†åœ¨ä¸€æ®µæ—¶é—´ä¹‹åŽï¼Œè¿™ä¸ªå“ç±»å¼€å§‹åˆ†åŒ–æˆå‡ ä¸ªå°å“ç±» æ˜¯é¢†å…ˆè€…ä¿æŒå…¶å¯¹å¸‚åœºå·²æœ‰ç»Ÿæ²»çš„æ–¹æ³•ä¹‹ä¸€ï¼Œæ˜¯ç»™æ–°äº§å“èµ·æ–°åå­— é•¿æ•ˆå®šå¾‹ çŸ­æœŸå†…ï¼Œä¿ƒé”€èƒ½å¤Ÿå¢žåŠ å…¬å¸çš„é”€å”®é¢ï¼›ä½†ä»Žé•¿æœŸæ¥çœ‹ï¼Œä¿ƒé”€åªä¼šå‡å°‘å…¬å¸é”€å”®é¢ã€‚å› ä¸ºå®ƒæ•™ä¼šé¡¾å®¢ä¸è¦åœ¨â€æ­£å¸¸â€œä»·æ ¼æ˜¯ä¹°ä¸œè¥¿ å»¶ä¼¸å®šå¾‹ äº§å“è¶Šå¤šï¼Œå¸‚åœºè¶Šå¤§ï¼Œé˜µçº¿è¶Šé•¿ï¼Œèµšçš„é’±åè€Œè¶Šå°‘ æˆ‘å®æ„¿åœ¨æŸä¸€æ–¹é¢å¼ºï¼Œä¹Ÿä¸æ„¿åœ¨æ‰€æœ‰æ–¹é¢éƒ½å¼± è¯¯åŒºï¼šè™½ç„¶é•¿æœŸæ¥çœ‹å“ç‰Œå»¶ä¼¸æ˜¯ä¸€ä¸ªå¤±è´¥çš„æˆ˜ç•¥ï¼Œä½†å°±çŸ­æœŸè€Œè¨€ï¼Œå®ƒå´å¯ä»¥è®©ä½ æˆåŠŸ ç‰ºç‰²å®šå¾‹ ä½ å¦‚æžœæƒ³å–å¾—æˆåŠŸï¼Œå°±åº”è¯¥ç‰ºç‰²ä¸€äº›ä¸œè¥¿ã€‚æœ‰ä¸‰æ ·ä¸œè¥¿æ˜¯ä½ éœ€è¦ç‰ºç‰²çš„ï¼šäº§å“çº¿ã€ç›®æ ‡å¸‚åœºå’Œä¸æ–­çš„å˜åŒ– å¸‚åœºè¥é”€æ˜¯ä¸€åœºå¿ƒæ™ºä¹‹æˆ˜ï¼Œå®ƒæ˜¯è®¤çŸ¥çš„ç«žäº‰ï¼Œè€Œä¸æ˜¯äº§å“æˆ–æœåŠ¡çš„ç«žäº‰ é›†ä¸­äº§å“ç„¦ç‚¹ï¼Œæ·±åŒ–äº§å“å†…å®¹ æ›´å¤§çš„ç½‘å¯ä»¥æ•æ‰æ›´å¤šçš„é¡¾å®¢ï¼Œä½†äº‹å®žæ°æ°ç›¸å ä½ æ‰€æ˜Žç¡®çš„å¸‚åœºè¥é”€ç›®æ ‡å¹¶ä¸å°±æ˜¯å®žé™…ä¸Šè´­ä¹°ä½ çš„äº§å“çš„é‚£äº›äººã€‚å°½ç®¡ç™¾äº‹å¯ä¹çš„è¥é”€ç›®æ ‡æ˜¯é’å°‘å¹´ï¼Œä½†å¸‚åœºå´åŒ…æ‹¬æ‰€æœ‰äºº å¦‚æžœä½ è§†å›¾è¿½éšå¸‚åœºçš„æ¯ä¸€ä¸ªæ½®æµä¸Žé£Žå¤´ï¼Œä½ å°†æ³¨å®šè¦è¢«æ·˜æ±°å‡ºå±€ã€‚ä¿æŒç¨³å›ºåœ°ä½çš„æœ€å¥½æ–¹æ³•æ˜¯ä»Žä¸€å¼€å§‹å°±ä¸è¦æ”¹å˜ä½ çš„æˆ˜ç•¥ ç‰¹æ€§å®šå¾‹ å¿…é¡»æœ‰è‡ªå·±ç‹¬ç‰¹çš„è®¤è¯†æˆ–ç‰¹æ€§ï¼Œå¹¶ä»¥æ­¤ä¸ºä¸­å¿ƒå±•å¼€è¥é”€ å¿…é¡»åŠªåŠ›æ‹¥æœ‰æœ€ä¸ºé‡è¦çš„ç‰¹æ€§ ä½ æ— æ³•ä¼°é‡å…·æœ‰æ–°ç‰¹å¾çš„äº§å“å¼€æ‹“å¸‚åœºçš„æ½œåŠ›ï¼Œå› æ­¤ç»ä¸è¦å˜²ç¬‘å®ƒ å¦è¯šå®šå¾‹ æ…Žç”¨ï¼Œå¾ˆå®¹æ˜“çŽ©ç ¸äº†ï¼ æ˜¯è‡ªå·±çš„äº§å“æ·±å…¥äººå¿ƒæœ€æœ‰æ•ˆçš„æ–¹æ³•æ˜¯é¦–å…ˆæ‰¿è®¤è‡ªå·±çš„ä¸è¶³ï¼ˆå¹¿æ³›è¢«äººä»¬è®¤ä¸ºçš„ç¼ºç‚¹ï¼‰ï¼Œå½“äººä»¬å¼€å§‹å…³æ³¨ä½ æ—¶ï¼Œåœ¨è½¬å‘æ­£é¢çš„å®£ä¼  æ‰¿è®¤è‡ªå·±çš„å¼±ç‚¹æ˜¯è¿èƒŒå…¬å¸å’Œä¸ªäººæœ¬æ€§çš„ æœ€é‡è¦çš„æ˜¯å¦è¯šå¯ä»¥è§£é™¤é¡¾å®¢çš„æˆ’å¤‡å¿ƒç† å¦‚æžœä½ çš„åå­—ä¸å¥½ï¼Œé‚£ä¹ˆä½ å°†é¢ä¸´ä¸¤ä¸ªé€‰æ‹©ï¼šæ¢ä¸€ä¸ªåå­—æˆ–è°ƒä¾ƒå®ƒï¼Œä½†ä¸è¦è½»è§†å®ƒ å”¯ä¸€å®šå¾‹ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ çš„ç«žäº‰è€…åªæœ‰ä¸€ä¸ªå®¹æ˜“è¢«æ”»ç ´çš„è–„å¼±çŽ¯èŠ‚ï¼Œæ­£æ˜¯è¿™ä¸ªçŽ¯å¢ƒåº”è¯¥æˆä¸ºä½ å…¨åŠ›æ”»å‡»çš„ç„¦ç‚¹ åœ¨å¸‚åœºè¥é”€ä¸­ï¼Œæ›´åŠªåŠ›çš„å·¥ä½œå¹¶ä¸ä¸€å®šæ˜¯æˆåŠŸçš„ç§˜è¯€ åœ¨å¸‚åœºè¥é”€ä¸­èƒ½å¤Ÿå‡‘æ•ˆçš„æˆ˜ç•¥ä¸Žåœ¨å†›äº‹ä¸Šçš„æˆ˜ç•¥ç›¸åŒï¼šå‡ºå…¶ä¸æ„ è¥é”€äººå‘˜å¿…é¡»äº²ä¸´å¸‚åœºç«žäº‰ç¬¬ä¸€çº¿ï¼ŒçŸ¥é“ä»€ä¹ˆèƒ½åšä»€ä¹ˆä¸èƒ½åš èŽ«æµ‹å®šå¾‹ æœªæ¥ä¸å¯å‡†ç¡®é¢„æµ‹ï¼Œåªèƒ½ç€çœ¼äºŽæœªæ¥è¶‹åŠ¿ æ„æƒ³ä¸åˆ°çš„äº‹æ€»ä¼šå‘ç”Ÿï¼Œä½†æˆ‘ä»¬å¿…é¡»åŠªåŠ› é¢„è§æœªæ¥å’Œå¯¹æœªæ¥ä¸‹æ³¨æ˜¯ä¸¤ç äº‹ æˆåŠŸå®šå¾‹ æˆåŠŸå¾€å¾€ä¼šå¯¼è‡´ ç›²ç›® è´¸ç„¶ å»¶ä¼¸äº§å“çº¿ï¼å®¹æ˜“éª„å‚²å’Œè‡ªå¤§ æ°‘ä¼—å…³äºŽçŽ°å®žæƒ…å†µçš„çœŸå®žçœ‹æ³•æ‰æ˜¯æœ€ä¸»è¦çš„ï¼ å¤±è´¥å®šå¾‹ å°½æ—©å‘çŽ°é”™è¯¯å¹¶åŠæ—¶é‡‡å–æŽªæ–½ä»¥åœæ­¢æŸå¤±ã€‚è¡¥æ•‘ã€ æ”¾å¼ƒ è¯•éªŒä¸å¯æ€•ï¼Œå¤±è´¥ä¸å¯æ€•ï¼Œå¯æ€•çš„æ˜¯æ²¡å¤ç›˜åŒä¸€ä¸ªåœ°æ–¹å¤±è´¥ä¸¤æ¬¡ ç‚’ä½œå®šå¾‹ ç‚’ä½œå°±æ˜¯ç‚’ä½œã€‚äº‹æƒ…è¿›å±•é¡ºåˆ©ï¼Œä¸éœ€è¦å®£ä¼ ç‚’ä½œï¼Œå½“å®ƒéœ€è¦ç‚’ä½œæ—¶ï¼Œä¸€èˆ¬æ„å‘³ç€å®ƒé‡åˆ°äº†éº»çƒ¦ã€‚ ç‚’ä½œçš„æœ¬è´¨å¹¶ä¸æ˜¯è¿™ä¸ªæ–°äº§å“æ­£åœ¨èµ°å‘æˆåŠŸï¼Œè€Œæ˜¯å®£å‘ŠçŽ°æœ‰çš„äº§å“è¦è¿‡æ—¶ çœŸæ­£çš„é©å‘½ä¼šåœ¨åˆå¤œæ‚„æ— å£°æ¯çš„åˆ°æ¥ è¶‹åŠ¿å®šå¾‹ å¦‚æžœä½ é¢å¯¹ä¸€ä¸ªæ­£åœ¨è¿…é€Ÿå´›èµ·çš„è¡Œä¸šï¼Œå…·æœ‰æ—¶å°šçš„ä¸€åˆ‡ç‰¹å¾ï¼Œé‚£ä¹ˆä½ æœ€å¥½èƒ½å¤Ÿæ·¡åŒ–æ—¶å°šã€‚é€šè¿‡æ·¡åŒ–æ—¶å°šï¼Œä½ å°±èƒ½ä½¿ä¹‹æµè¡Œçš„æ—¶é—´å»¶é•¿ï¼Œä»Žè€Œä½¿å®ƒæ›´åƒä¸€ç§è¶‹åŠ¿ èµ„æºå®šå¾‹ ä¸€åˆ†é’±éš¾å€’è‹±é›„æ±‰ï¼ å¹³æ—¶ï¼Œä¸€æ¯›é’±ä¸èµšå°±æ˜¯èµ”]]></content>
      <categories>
        <category>è¯»ä¹¦</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é˜²æŠ“åŒ…ç­–ç•¥]]></title>
    <url>%2F2018%2F08%2F13%2F%E9%98%B2%E6%8A%93%E5%8C%85%E7%AD%96%E7%95%A5%2F</url>
    <content type="text"><![CDATA[charlesæŠ“åŒ…åŽŸç†ç®€ä»‹&emsp;&emsp;ç®€å•çš„ç†è§£æ˜¯charlesæ˜¯ä¸­é—´å•†èµšå·®ä»·ï¼æ²¡æœ‰ä¸­é—´å•†çš„æ—¶å€™ï¼Œclientæ˜¯å’Œserverè¿›è¡Œä¸‰æ¬¡æ¡æ‰‹ï¼Œæ¡æ‰‹æˆåŠŸï¼Œç¡®è®¤äº†çœ¼ç¥žå°±å¯ä»¥é€šä¿¡äº†ï¼æœ‰charlesä»£ç†æ—¶ï¼Œå˜æˆäº†clientå’Œcharlesä¸‰æ¬¡æ¡æ‰‹ï¼Œcharlesæ‹¿ç€clientçš„éšæœºæ•°ï¼Œè‡ªå·±é€‰ä¸ªç®—æ³•é‚£ç»™clientä¸€ä¸ªå‡è¯ä¹¦ï¼clientä¸ºå•¥è®¤è¿™ä¸ªå‡è¯ä¹¦ï¼Ÿå› ä¸ºå¼€å§‹ä»£ç†å‰ä¼šè®©ç”¨æˆ·ä¸‹è½½å¹¶ä¿¡ä»»ä¸€ä¸ªæ ¹è¯ä¹¦ï¼Œcharlesé¢å‘çš„å…¶ä»–è¯ä¹¦,é»˜è®¤éƒ½ä¼šè¢«ç³»ç»Ÿæ‰€ä¿¡ä»»ï¼›æ‰€ä»¥clentå°±å’Œcharlesæ„‰å¿«çš„èŠäº†èµ·æ¥ï¼›charlesè¿™ä¸ªä¸­é—´å•†åˆæ€Žä¹ˆå’ŒserverèŠä¸Šçš„å‘¢ï¼Ÿä¹Ÿæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œcharlseæ‹¿ç€clientç»™çš„è®¤è¯ä¿¡æ¯å’Œä¼ªé€ çš„éšæœºæ•°ä¿¡æ¯ï¼Œè·ŸæœåŠ¡å™¨è¯´ï¼šæˆ‘å°±æ˜¯clientï¼Œè·Ÿæˆ‘èŠå§ï¼æœåŠ¡å™¨çœ‹åˆ°è¯ä»¶é½å…¨å°±æŠŠæ•°æ®ç»™charlseäº†ï¼Œcharlseå†é€šè¿‡ç®—æ³•å’Œéšæœºæ•°å°±èƒ½èŽ·å–åˆ°æœåŠ¡å™¨çš„çœŸå®žæ•°æ® å‡ ç§æ–¹æ¡ˆ1. æ£€æµ‹æ˜¯å¦è®¾ç½®ä»£ç† åŽŸç†æ˜¯ä¸€èˆ¬æŠ“åŒ…æ˜¯é€šè¿‡è®¾ç½®æ‰‹æœºä»£ç†çš„æ–¹å¼è¿›è¡Œçš„ã€‚å› æ­¤å¯ä»¥é€šè¿‡CFNetworkèŽ·å–ç³»ç»Ÿä»£ç†ä¿¡æ¯ï¼Œå¦‚æžœæœ‰ä»£ç†å°±ä¸å‘è¯·æ±‚ 1234567891011121314151617181920212223242526272829// å¯å‚ç…§ ASIæºç ASIHTTPRequestçš„ configureProxiesæ–¹æ³•+ (BOOL)configureProxiesWithUrl:(NSURL *)url &#123;NSArray *proxies = nil;#if TARGET_OS_IPHONENSDictionary *proxySettings = [NSMakeCollectable(CFNetworkCopySystemProxySettings()) autorelease];#elseNSDictionary *proxySettings = [NSMakeCollectable(SCDynamicStoreCopyProxies(NULL)) autorelease];#endifproxies = [NSMakeCollectable(CFNetworkCopyProxiesForURL((CFURLRef)url, (CFDictionaryRef)proxySettings)) autorelease];if (!proxies) &#123;// @&quot;Unable to obtain information on proxy servers needed for request&quot;return NO;&#125;if ([proxies count] &gt; 0) &#123;NSDictionary *settings = [proxies objectAtIndex:0];if ([settings objectForKey:(NSString *)kCFProxyAutoConfigurationURLKey]) &#123;// PAC æš‚ä¸è€ƒè™‘return NO;&#125;if ([[settings objectForKey:(NSString *)kCFProxyTypeKey] isEqualToString:(NSString *)kCFProxyTypeNone]) &#123;//æ²¡æœ‰è®¾ç½®ä»£ç†return NO;&#125;&#125;return YES;&#125; ä¼˜ç‚¹ ç®€å•ï¼Œæ ¸å¿ƒä»£ç å°±ä¸¤è¡Œ å¯é ï¼Œè™½ç„¶ASIå·²ç»è¢«åºŸå¼ƒå¾ˆé•¿æ—¶é—´äº†ï¼Œä½†æ®æˆ‘æ‰€çŸ¥ä¾ç„¶æœ‰éƒ¨åˆ†APPï¼ˆxxxé‡‘èžï¼‰æ— æ³•å½»åº•æ‘†è„±å¯¹ASIçš„ä¾èµ–ï¼Œæ‰€ä»¥ä»£ç ç¨³å®šæ€§è¿˜æ˜¯æœ‰ä¿è¯çš„ã€‚ æ£€æµ‹é¢‘çŽ‡ä½Žï¼Œç”±äºŽè®¾ç½®æ‰‹æœºä»£ç†ï¼Œå¿…ç„¶ç¦»å¼€å½“å‰APPï¼Œå³å½“APPåœ¨å‰å°æ—¶æ£€æµ‹ä¸€æ¬¡ï¼Œç½‘ç»œå˜åŒ–æ—¶æ£€æµ‹ä¸€æ¬¡å³å¯æ»¡è¶³å¤§éƒ¨åˆ†éœ€æ±‚ï¼ˆASIæ˜¯é€šè¿‡è®¾ç½®requestçš„æ ‡å¿—ä½ç±»é™ä½Žè¯·æ±‚é¢‘çŽ‡çš„ï¼‰ ç¼ºç‚¹ åªèƒ½æ£€æµ‹æ‰‹æœºæ˜¯å¦è®¾ç½®ä»£ç†ï¼Œå¦‚æžœè·¯ç”±å™¨ä¹Ÿè®¾ç½®ä»£ç†åˆ™æ£€æµ‹ä¸åˆ° ç”¨æˆ·ä½¿ç”¨VPNå’ŒPACè‡ªåŠ¨ä»£ç†ï¼Œä¹Ÿå°†è¢«è®¤ä¸ºè®¾ç½®ä»£ç†ï¼Œæ— æ³•è¯·æ±‚ç½‘ç»œ æ£€æµ‹åˆ°ä»£ç†å°±ä¸å‘é€è¯·æ±‚çš„å¤„ç†æ–¹å¼ï¼Œè¿‡äºŽå¼ºåŠ¿ï¼›ä½†æˆ‘æ²¡æƒ³å‡ºæ¥æ›´å¥½çš„æ–¹æ¡ˆ æœ‰äººè¯„è®ºç›¸å…³åšå®¢è¯´æ²¡è®¾ç½®ä»£ç†ä¹Ÿä¼šæç¤ºè®¾ç½®äº†ä»£ç†ï¼Œé“¾æŽ¥ï¼Œä½†æ­¤åšå®¢æœªæ ¡éªŒPACæ–‡ä»¶æƒ…å†µï¼ˆASIæ£€æµ‹äº†PACï¼‰ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯ä¸ªæ½œåœ¨é£Žé™©ç‚¹ 2. https + å…¬é’¥è®¤è¯ å†…ç½®å…¬é’¥è¯ä¹¦ï¼Œä¸ä»…æ ¡éªŒåŸŸå,ä¹Ÿå°†è¯ä¹¦ä¸­çš„å…¬é’¥åŠå…¶ä»–ä¿¡æ¯ä¹Ÿè¿›è¡Œæ ¡éªŒ 12345678910111213141516171819202122232425+(AFSecurityPolicy*)customSecurityPolicy &#123;// å¯¼å…¥è¯ä¹¦NSString *cerPath = [[NSBundle mainBundle] pathForResource:@&quot;test&quot; ofType:@&quot;cer&quot;];//è¯ä¹¦çš„è·¯å¾„NSData *certData = [NSData dataWithContentsOfFile:cerPath];/*AFSSLPinningModeCertificate //è¯ä¹¦æ‰€æœ‰å­—æ®µéƒ½ä¸€æ ·æ‰é€šè¿‡è®¤è¯ï¼ŒAFSSLPinningModePublicKey //åªè®¤è¯å…¬é’¥é‚£ä¸€æ®µAFSSLPinningModeCertificate //æ›´å®‰å…¨ã€‚ä½†æ˜¯å•å‘è®¤è¯ä¸èƒ½é˜²æ­¢â€œä¸­é—´äººæ”»å‡»â€*/AFSecurityPolicy *securityPolicy = [AFSecurityPolicy policyWithPinningMode:AFSSLPinningModeCertificate];// allowInvalidCertificates æ˜¯å¦å…è®¸æ— æ•ˆè¯ä¹¦ï¼ˆä¹Ÿå°±æ˜¯è‡ªå»ºçš„è¯ä¹¦ï¼‰ï¼Œé»˜è®¤ä¸ºNO// å¦‚æžœæ˜¯éœ€è¦éªŒè¯è‡ªå»ºè¯ä¹¦ï¼Œéœ€è¦è®¾ç½®ä¸ºYESsecurityPolicy.allowInvalidCertificates = YES;//validatesDomainName æ˜¯å¦éœ€è¦éªŒè¯åŸŸåï¼Œé»˜è®¤ä¸ºYESï¼›//å‡å¦‚è¯ä¹¦çš„åŸŸåä¸Žä½ è¯·æ±‚çš„åŸŸåä¸ä¸€è‡´ï¼Œéœ€æŠŠè¯¥é¡¹è®¾ç½®ä¸ºNOï¼›å¦‚è®¾æˆNOçš„è¯ï¼Œå³æœåŠ¡å™¨ä½¿ç”¨å…¶ä»–å¯ä¿¡ä»»æœºæž„é¢å‘çš„è¯ä¹¦ï¼Œä¹Ÿå¯ä»¥å»ºç«‹è¿žæŽ¥ï¼Œè¿™ä¸ªéžå¸¸å±é™©ï¼Œå»ºè®®æ‰“å¼€ã€‚//ç½®ä¸ºNOï¼Œä¸»è¦ç”¨äºŽè¿™ç§æƒ…å†µï¼šå®¢æˆ·ç«¯è¯·æ±‚çš„æ˜¯å­åŸŸåï¼Œè€Œè¯ä¹¦ä¸Šçš„æ˜¯å¦å¤–ä¸€ä¸ªåŸŸåã€‚å› ä¸ºSSLè¯ä¹¦ä¸Šçš„åŸŸåæ˜¯ç‹¬ç«‹çš„ï¼Œå‡å¦‚è¯ä¹¦ä¸Šæ³¨å†Œçš„åŸŸåæ˜¯www.google.comï¼Œé‚£ä¹ˆmail.google.comæ˜¯æ— æ³•éªŒè¯é€šè¿‡çš„ï¼›å½“ç„¶ï¼Œæœ‰é’±å¯ä»¥æ³¨å†Œé€šé…ç¬¦çš„åŸŸå*.google.comï¼Œä½†è¿™ä¸ªè¿˜æ˜¯æ¯”è¾ƒè´µçš„ã€‚//å¦‚ç½®ä¸ºNOï¼Œå»ºè®®è‡ªå·±æ·»åŠ å¯¹åº”åŸŸåçš„æ ¡éªŒé€»è¾‘ã€‚securityPolicy.validatesDomainName = YES;NSSet&lt;NSData*&gt; * set = [[NSSet alloc]initWithObjects:certData , nil];securityPolicy.pinnedCertificates = set;return securityPolicy;&#125; ä¼˜ç‚¹ å®‰å…¨çº§åˆ«æœ€é«˜ ç›¸å¯¹ç®€å•ï¼ŒAFNéƒ½å·²ç»å°è£…å¥½äº† é¢‘çŽ‡ä½Ž ç¼ºç‚¹ è¿ç»´å’Œå®‰å…¨å›¢é˜Ÿç»™ä¸ç»™å…¬é’¥è¯ä¹¦ï¼Ÿ è¯ä¹¦è¿‡æœŸæ€Žä¹ˆåŠžï¼Ÿé¢„ç•™æŽ¥å£ï¼Ÿ å¤šåŸŸåæ€Žä¹ˆå¤„ç†ï¼Ÿ 3. CONNECT è¯·æ±‚æ–¹å¼ ï¼ˆæ— æ•ˆï¼‰ åŽŸç†ï¼šæŠŠæœåŠ¡å™¨ä½œä¸ºè·³æ¿ï¼Œå…ˆéªŒè¯ç”¨æˆ·åå’Œå¯†ç ç­‰ä¿¡æ¯ï¼Œå†è®©æœåŠ¡å™¨ä»£æ›¿ç”¨æˆ·åŽ»è®¿é—®å…¶å®ƒç½‘é¡µï¼Œä¹‹åŽæŠŠæ•°æ®è¿”å›žç»™ç”¨æˆ· ç ´è§£æ–¹æ³•ï¼šcharlse -&gt; Proxy Settings -&gt; Proxies HTTP Proxyä¸­å‹¾é€‰Enable transparent HTTP proxying æ¥æŸ¥çœ‹CONNECTè¯·æ±‚ 4. connectionProxyDictionary (æ— æ•ˆ) ä½¿ç”¨NSURLSessionConfigurationçš„connectionProxyDictionary1234// æ— æ•ˆNSURLSessionConfiguration *conf = [NSURLSessionConfiguration ephemeralSessionConfiguration];conf.connectionProxyDictionary = @&#123;&#125;;// ç½‘ä¸Šè¿˜æœ‰æå‡ºhookæ–¹æ¡ˆæ¥è®¾ç½®connectionProxyDictionaryï¼Œä½†ä¹Ÿæ— æ•ˆ å‚è€ƒï¼š iphone programmatically read proxy settings iOSä¸Šå¦‚ä½•é˜²æ­¢ä»–äººæŠ“åŒ…èŽ·å–ä¿¡æ¯ iOS å¦‚ä½•é˜²æ­¢httpsæŠ“åŒ…(ä¸­é—´äººæ”»å‡»),åŠcharlesæŠ“åŒ…åŽŸç†]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¡é¡¿ä¼˜åŒ–]]></title>
    <url>%2F2018%2F07%2F30%2F%E5%8D%A1%E9%A1%BF%E4%BC%98%E5%8C%96%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;iOSå¡é¡¿ä¼˜åŒ–å…¶å®žå·²ç»çƒ‚å¤§è¡—äº†ï¼Œç½‘ä¸Šå…¨éƒ½æ˜¯å„ç§å„æ ·çš„æ–‡ç« ï¼æ‰€æœ‰æ“ä½œæ— éžå°±ä¸¤ä»¶äº‹ï¼šé™ä½Žä¸»çº¿ç¨‹å·¥ä½œå’Œé™ä½ŽCPUå·¥ä½œã€‚å¸¸ç”¨ç­–ç•¥ï¼š å°‘åˆ›å»ºã€æ›´æ”¹å¯¹è±¡ å°‘ç”¨å›¾å±‚æ··åˆã€é€æ˜Žã€é˜´å½±ã€è£åˆ‡ å°‘ç”¨å›¾ç‰‡æ‹‰ä¼¸ èƒ½è®©å°å¼Ÿï¼ˆå­çº¿ç¨‹ï¼‰å¹²çš„è®©å°å¼Ÿå¹² ç¼“å­˜ã€ç¼“å­˜å’Œç¼“å­˜ï¼Œè®©ä¸‹ä¸€æ¬¡æ›´å¿«é€Ÿ æå‰ã€æå‰å’Œæå‰ï¼Œè®©è¿™ä¸€æ¬¡æ›´å¿«é€Ÿ &emsp;&emsp;ç­‰ç­‰ç­‰ç­‰â€¦ &emsp;&emsp;ä½†å®žé™…å¼€å‘ä¸­ç¡®å®žï¼šWCè¿™ä¸ªclearColoréœ€ä¿ç•™ï¼ŒNMé‚£ä¸ªé˜´å½±ä¸èƒ½æ”¹ï¼Œç¥žé©¬é¬¼ç¼“å­˜æ›´æ–°ä¸åŠæ—¶ã€shitæå‰è®¡ç®—æœ‰åå·®â€¦åˆ°æœ€åŽå°±å˜æˆäº†ï¼šç®¡å®ƒåˆé€‚ä¸åˆé€‚ï¼Œç”¨Time ProfileræŸ¥å‡ºæ¥çš„è€—æ—¶é«˜å°±æ”¹æ”¹!å…¶å®ƒâ€¦çœŸçš„ä¸æ˜¯ä¸æƒ³æ”¹ï¼Œè€Œæ˜¯ä¸æ•¢æ”¹ã€ä¸èƒ½æ”¹ç”šè‡³ä¸æ„¿æ„æ”¹ 1 ä¼˜åŒ–è®°å½•&emsp;&emsp;å¥½äº†ï¼Œåæ§½åå®Œäº†ï¼è¯¥æ¥çš„æ€»ä¼šæ¥ï¼Œè¯¥æ”¹çš„ä¹Ÿæ€»çš„æ”¹ï¼Œé€ƒæ˜¯é€ƒä¸è¿‡åŽ»çš„ï¼å…ˆæ°´æ°´ä¸ºæœŸ2æœŸçš„å¡é¡¿ä¼˜åŒ–æˆ‘ä»¬éƒ½å¹²äº†å•¥ 1 æŽ¨åŠ¨Crabå¹³å°å‡çº§&emsp;&emsp;å¦‚æžœæˆ‘å‘Šè¯‰ä½ æˆ‘ä»¬ä¸€åŠä»¥ä¸Šçš„å¡é¡¿éƒ½æ˜¯ç›‘æŽ§å¡é¡¿çš„ä¸‰æ–¹åº“é€ æˆçš„ï¼Œä½ ä¼šä¸ä¼šå¾ˆæƒŠè®¶ï¼Ÿæˆ‘ä»¬ä¹Ÿå¾ˆæƒŠè®¶ï¼æ€ªä¸å¾—æ‰‹ç™¾è¦è‡ªç ”APM(åˆšå¼€å§‹çœŸçš„æŽ¨ä¸åŠ¨ä»¥è‡³äºŽæˆ‘ä»¬ä¹Ÿæƒ³é€ è½®å­ï¼Œä½†é¢†å¯¼ä¸åŒæ„)ï¼å› ä¸ºCrabSDKé›†æˆäº†plcrashreporterç›´æŽ¥åœ¨å¡é¡¿æ—¶è¿›è¡Œç¬¦å·åŒ–ï¼Œç»“æžœå°±æ˜¯æœ¬æ¥æ˜¯å¡é¡¿ï¼Œç»è¿‡plcrashreporterå˜æˆäº†å¡æ­»ï¼ï¼ï¼å½“ç„¶æŽ¨åŠ¨SDKæ›´æ–°ä¹Ÿæ²¡å•¥å¥½åŠžæ³•ï¼Œåªèƒ½æ¯å¤©â€æ‰“å¡â€œå¼å‚¬è¿›åº¦â€¦ &emsp;&emsp;å…¶å®žè¿˜æœ‰BPushçš„SDKä¹Ÿå¾ˆå¡ï¼ˆæƒ³ä¸æ˜Žç™½ä¸€ä¸ªpushSDKä¸ºå•¥è¦å¡ä¸»çº¿ç¨‹ï¼‰ä¹Ÿæ˜¯æŽ¨åŠ¨å‡çº§æ¥è§£å†³çš„â€¦ &emsp;&emsp;å‚¬è¿›åº¦è¿‡ç¨‹ä¸­å€’å­¦äº†ç‚¹ç»éªŒï¼Œæœ€æœ€ä¸»è¦â€åˆ«æŠŠè¿™äº‹å½“ä¸ªäº‹ï¼Œä¹Ÿåˆ«æŠŠè¿™äº‹ä¸å½“äº‹ï¼â€œ æ”¾å¹³å¿ƒæ€ï¼šè°éƒ½çŸ¥é“èƒ½åŠ¨æ‰‹ç ä»£ç å°±åˆ«åºŸè¯ï¼Œä½†è¿™æ¬¡ä½ éœ€è¦åºŸè¯ï¼æ‰€ä»¥ä¸€å®šè¦æ”¾å¹³å¿ƒæ€ï¼šå°±å½“æ˜¯åšé”€å”®ç»ƒä¹ å§ è¦æœ‰ç¤¼è²Œï¼šéƒ½è¯´ç†å·¥ç”·æƒ…å•†ä½Žï¼Œç¨‹åºå‘˜å°±æ›´ä¸ç”¨è¯´äº†ï¼ä½†å‚¬è¿›åº¦æ—¶ï¼Œä½ ä¸æ˜¯ç¨‹åºå‘˜ï¼Œä½ æœ‰æ±‚äºŽäººï¼Œæ‰€ä»¥ä¸€å®šè¦æœ‰ç¤¼è²Œï¼ä»€ä¹ˆè°¢è°¢ã€å¥½çš„ã€èƒ½ä¸èƒ½ã€ç¨å¾®å•¥çš„è¯¥ä¸Šå°±å¾—ä¸Šï¼å°±å½“ä½ ç¤¾ä¼šè¯¾æ²¡ä¸Šå®Œï¼Œè¿›è¡Œå†æ•™è‚²å‘¢ è¦æœ‰è€å¿ƒï¼šç¨‹åºå‘˜éƒ½è¿½æ±‚æ•ˆçŽ‡ï¼Œæ¨ä¸å¾—èƒ½è®©æœºå™¨å¹²çš„éƒ½è®©æœºå™¨å¹²ï¼è¿™æ¬¡ï¼Œä¸å¥½æ„æ€ï¼Œä½ å¯¹é¢é‚£ä¸ªæ˜¯â€å¤§çˆ·â€œä¸æ˜¯æœºå™¨ï¼Œä½ é™¤äº†ä¾›ç€å°±åªèƒ½ç­‰ç€ï¼ç€æ€¥ä¹Ÿæ²¡ç”¨ 2 ç­‰æ¯”ç¼©æ”¾&emsp;&emsp;è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªè¶…çº§å¤§å‘ï¼Œä¹‹å‰UIå°±æŽ¨è¡Œäº†ä¸€å¥—æ‰€è°“çš„ç­‰æ¯”ç¼©æ”¾æ–¹æ¡ˆï¼Œä¸¾ä¸ªä¾‹å­ï¼šåœ¨iphone5ä¸Šå±•ç¤ºè¦ç­‰æ¯”ä¾‹ç¼©æ”¾iphone6ä¸Šï¼å¦‚æžœæ‰€æœ‰çš„éƒ½ç­‰æ¯”ä¾‹ç¼©æ”¾ä¹Ÿè®¸è¿˜æ¯”è¾ƒå¥½å¤„ç†ä¸€ç‚¹ï¼Œä½†UIåˆè¦æ±‚å·¦å³ä¸¤è¾¹é—´è·å¿…é¡»æ˜¯40pxï¼Œåªæœ‰ä¸­é—´å†…å®¹ç¼©æ”¾ã€1åƒç´ æ¨ªçº¿è¾¹æ¡†çº¿ä¸ç¼©æ”¾ç­‰ç­‰ï¼Œåˆ°æœ€åŽçš„å®žçŽ°æ–¹æ¡ˆå¸ƒå±€çº¦æŸéƒ½æ˜¯ä¸€ä¸ªè®¡ç®—å‡½æ•°å’Œä¸€ä¸ªæ‰¾è¡¥å‡½æ•°ã€‚è¿™æ ·å°±å¸¦æ¥äº†ä¸€å †é—®é¢˜ é¢‘ç¹å‡½æ•°è®¡ç®—ï¼Œç‰¹åˆ«æ˜¯æµ®ç‚¹æ•°å®žæ—¶è®¡ç®—ï¼ å¤§é‡çš„â€æ‰¾è¡¥â€œæ–¹æ³•ï¼Œç¥žå¥‡æ•°å­—ï¼ å±‚çº§å¤æ‚ï¼Œä¸ºäº†æ­£ç¡®æ˜¾ç¤ºæ•ˆæžœï¼Œä¸å¾—ä¸å¢žåŠ æ— ç”¨å›¾å±‚ é¢‘ç¹åˆ·æ–°ï¼ŒlayoutIfNeedæ»¡å¤§è¡—éƒ½æ˜¯ å¤ç”¨çŽ‡ä½Žï¼Œå¾ˆå¤šcellåˆ·æ–°æ˜¯éƒ½ä¼šå°†subviewéƒ½åˆ·ä¸€ä¸‹ï¼Œé˜²æ­¢â€å¯¹ä¸é½â€œ å¼€å‘æ•ˆçŽ‡ä½Ž &emsp;&emsp;ç»“åˆä»¥ä¸Šé—®é¢˜ï¼Œè¯•éªŒäº†å‡ ç§æ–¹æ³• 2.1 å¼‚æ­¥æ¸²æŸ“å†…å®¹åˆ°å›¾ç‰‡&emsp;&emsp;å‚è€ƒï¼šVVeboTableViewDemoæ³¨æ„Domeä¸­å¯èƒ½ä¼šå‡ºçŽ°å‡ åä¸ªçº¿ç¨‹å¡é¡¿é—®é¢˜ï¼Œé‚£æ˜¯å› ä¸ºglobalæœ€å¤šä¹Ÿå°±64ä¸ªçº¿ç¨‹ï¼Œè¶…äº†å°±å¡äº† å¥½å¤„ï¼š1ã€å……åˆ†åˆ©ç”¨GPUå’ŒCPUï¼› 2ã€å‡å°‘viewå±‚çº§ åå¤„ï¼š1ã€ä»£ç è¾ƒå¤šï¼› 2ã€é¢„å…ˆè®¡ç®—ï¼Œå¢žåŠ VMå±‚ï¼› ç»“è®ºï¼šè¢«å¼ƒï¼ä¿®æ”¹èµ·æ¥æˆæœ¬è¾ƒé«˜ï¼ŒåŽç»­æ–°å¢žå¯è€ƒè™‘ 2.2 ç±»ä¼¼å¾®ä¿¡è¯»é…ç½®æ–‡ä»¶ å¥½å¤„ï¼š1ã€çµæ´»ï¼Œä»¥åŽå¯ä»¥åšè°ƒæ•´å­—ä½“éœ€æ±‚ï¼›2ã€é¿å…å¤æ‚å®žæ—¶è®¡ç®— åå¤„ï¼š1ã€é…ç½®æ–‡ä»¶å’Œviewçš„æ˜ å°„å…³ç³»å¤æ‚ï¼›2ã€å¤æ‚çº¦æŸéš¾ä»¥è¡¨è¾¾ï¼›3ã€è°ƒè¯•éº»çƒ¦ ç»“è®ºï¼šè¢«å¼ƒï¼å› ä¸ºå¼€å‘è°ƒè¯•å®žåœ¨æ˜¯å¤ªéº»çƒ¦äº†ï¼Œé‡æž„ä¸€ä¸ªç®€å•çš„å°é¡µé¢éƒ½ç´¯æ­»ä¸ªäºº 2.3 æŠ˜ä¸­æ–¹æ¡ˆ ç»å¤§å¤šæ•°modelå› æ‰“ç‚¹éœ€æ±‚éƒ½åŒ…å«idå­—æ®µï¼Œå¯é‡å†™isEqualæ¥åˆ¤æ–­modelæ˜¯å¦æ”¹å˜æ¥å‡å°‘åˆ·æ–°æ¬¡æ•° å°†cellåˆ·æ–°æ–¹æ³•æ‹†åˆ†refreshContentå’ŒrefreshFrameä¸¤ä¸ªï¼Œå°†cellåˆ†ç±»ï¼Œå¯¹æ›´æ–°æ•°æ®æºåªè°ƒæ•´æ˜¾ç¤ºä¸è°ƒæ•´frameçš„cellé«˜åº¦è¿›è¡Œç¼“å­˜å¹¶åªè°ƒåŠ¨refreshContent å°†å¤§éƒ¨åˆ†çš„layoutIfNeedæ›¿æ¢æˆsetNeedsLayout å°éƒ¨åˆ†cellé‡‡ç”¨å¼‚æ­¥æ¸²æŸ“åˆ°å›¾ç‰‡çš„æ–¹æ¡ˆï¼šä¾‹å¦‚å…¬å‘Šè½®æ’­ã€å¯¼èˆªæ¡ 3 å±€éƒ¨åˆ·æ–°&emsp;&emsp;ç®€å•çš„è¯´å°±å‡ æ¡ tablviewç­‰åªåˆ·æ–°æ ‡è®°éœ€è¦åˆ·æ–°çš„cellã€‚æˆ‘ä»¬é‡‡ç”¨çš„æ–¹å¼æ˜¯é€šè¿‡æ–°æ—§æ•°æ®æºisEqualæ¥åˆ¤æ–­å“ªäº›celléœ€è¦åˆ·æ–°ï¼Œå¦å¤–å…è®¸cellæ”¹å˜è‡ªèº«æ•°æ®æºæ—¶å›žè°ƒtableviewåˆ·æ–°è‡ªå·± åŸºé‡‘æŽ’è¡Œç­‰ç±»ä¼¼é¡µé¢å·§ç”¨childViewControlleræ¥å»¶è¿ŸåŠ è½½å»¶è¿Ÿåˆ·æ–° hidden VS æ‡’åŠ è½½ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºä¸æ¶‰åŠåˆ°çº¦æŸæ”¹å˜ä½¿ç”¨æ‡’åŠ è½½ï¼Œæ¶‰åŠåˆ°çº¦æŸæ›´æ”¹ç”¨hiddenï¼ä¾‹å¦‚ç™»å½•å’Œæœªç™»å½•çš„å¤´éƒ¨ä¿¡æ¯ï¼Œå®Œå…¨äº’æ–¥ï¼Œä»¥å‰ä»£ç æ˜¯éƒ½åŠ è½½é€šè¿‡hiddenæ¥å¤„ç†ï¼ŒçŽ°åœ¨æ”¹æˆäº†æ‡’åŠ è½½ï¼æ¯•ç«Ÿä¸€èˆ¬äººä¸ä¼šæ¥å›žç™»å½•ç€çŽ©ï¼Œç™»å½•äº†åå‡ å¤©ä¹Ÿä¸ä¸€å®šé€€ä¸€æ¬¡ 4 æŒ‰éœ€åŠ è½½è¢«åºŸå¼ƒ&emsp;&emsp;åºŸå¼ƒåŽŸå› ï¼šPMå’Œé¢†å¯¼è§‰å¾—ä¸€å…±ä¹Ÿæ²¡å¤šå°‘æ•°æ®è¿˜æ˜¾ç¤ºé»˜è®¤å›¾ä¸èƒ½æŽ¥å—ï¼è€Œä¸”æ²¡æœ‰ä¸Šæ‹‰åŠ è½½æ›´å¤šï¼Œè¿™ä¸ªåŠŸèƒ½æ¯”è¾ƒé¸¡è‚‹â€¦ &emsp;&emsp;ä¸€æ ·å¯å‚è€ƒï¼šVVeboTableViewDemoï¼Œæ ¸å¿ƒåŽŸç†å°±æ˜¯æ£€æµ‹æ»‘åŠ¨çŠ¶æ€ï¼ŒåªåŠ è½½ç”¨æˆ·å¯è§èŒƒå›´çš„cell å¯è§cellçš„å®šä¹‰ï¼Œéœ€æ ¹æ®æ‰‹æœºå±å¹•å¤§å°è¿›è¡Œè‡ªå®šä¹‰ï¼Œä½†è¿™ä¼šå¢žåŠ ä»£ç å¤æ‚åº¦ å¿«é€Ÿæ»‘åŠ¨å¯èƒ½å‡ºçŽ°ç™½å±ï¼Œå»ºè®®ç”¨â€é»˜è®¤å›¾â€œä»£æ›¿ åƒé¦–é¡µè¿™ç§å¤šæŽ¥å£å†…å®¹æ‹¼æŽ¥è€Œæˆå¹¶ä¸”æ”¯æŒæœåŠ¡ç«¯æŽ’åºçš„é¡µé¢ä¸åˆé€‚ 5 èµ„æºåŒæ­¥æ”¹å¼‚æ­¥ ç«Ÿç„¶åœ¨mianä½¿ç”¨dataWithContentsOfURLæ–¹æ³•åŒæ­¥ä¸‹è½½å¤´åƒï¼ç€å®žå“äº†æˆ‘ä¸€è·³ï¼ŒçŠ¹è±«åŠå¤©é—®äº†å¥½å‡ åœˆæ‰æ•¢æ”¹ä»£ç  ä½¿ç”¨imageNamedæ–¹æ³•æ‰¹é‡åŠ è½½å°å›¾ç‰‡ï¼ˆ48ä¸ªï¼‰ï¼ŒimageNamedæ–¹æ³•ä¸€èˆ¬æƒ…å†µä¸‹è¿˜æ˜¯å¾ˆå¥½ç”¨çš„ï¼Œä½†åƒè¿™ç§æ‰¹é‡åŠ è½½å°å›¾ç‰‡è¿˜æ˜¯å»ºè®®å¼‚æ­¥ä½¿ç”¨imageWithContentsOfFileæ–¹æ³•ç„¶åŽNSArrayå†…å­˜ç¼“å­˜çš„æ–¹å¼å®žçŽ° 6 å°‘ç”¨@synchronizedï¼Œå°‘åœ¨ä¸»çº¿ç¨‹æ·±æ‹·è´&emsp;&emsp;åœ¨ä½¿ç”¨Time Profileræ£€æŸ¥è€—æ—¶æ—¶ï¼Œæ— æ„ä¸­å‘çŽ°é¡¹ç›®é‡Œå¤§é‡ç”¨äº†@synchronizedé”ï¼Œç”šè‡³å¾ˆå¤šé”éƒ½æ˜¯ä¸å¿…è¦çš„ï¼Œä¾‹å¦‚æ˜Žæ˜¾ä¸Šä¸‹æ–‡éƒ½åœ¨ä¸»çº¿ç¨‹é‡Œä¹Ÿè¦åŠ ä¸Š@synchronizedé”æ¥ç¡®ä¿å®‰å…¨ã€‚è¿™ä¸ªé—®é¢˜æˆ‘åœ¨ä¾‹ä¼šä¸Šæå‡ºæ¥ä¹‹åŽï¼Œä¹Ÿæ²¡äººèƒ½è§£é‡Šä¸ºä»€ä¹ˆï¼Œä¼°è®¡å°±æ˜¯åŽ†å²é—ç•™é—®é¢˜äº†ï¼å½“ç„¶å¤„ç†èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œå› ä¸ºä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œé™çº§æŽªæ–½ä¹Ÿä¸å¥½å¤„ç†ï¼Œæœ€ç»ˆæˆ‘ä¹ŸåªåŽ»æŽ‰äº†3ä¸ªé”çš„ä½¿ç”¨ &emsp;&emsp;å‡ ä¹Žä¼´éšç€é”çš„å°±æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡Œæ·±æ‹·è´ï¼Œè€Œä¸”æ˜¯æ•´ä¸ªé¡µé¢æ•°æ®çš„æ·±æ‹·è´ï¼ä¹Ÿè®¸æ˜¯ä¸ºäº†å®‰å…¨ï¼Œä½†ç¡®å®žæœ‰äº›çƒ‚ç”¨äº†ï¼Œæ²¡å¿…è¦addObjectä¹‹ç±»çš„æ“ä½œéƒ½è¦æ·±æ‹·è´ä¸€ä»½å†æ“ä½œ 7 å‡å°‘å›¾å±‚æ··åˆ&emsp;&emsp;æŽ¨èç­–ç•¥ è®¾opaqueä¸ºYESã€ è®¾backgroundColorå’Œçˆ¶è§†å›¾é¢œè‰²ä¸€è‡´ä¸”ä¸é€æ˜Žã€ ä¸è®¾ &lt;1 çš„alphaå€¼ ç¡®ä¿UIImageæ²¡æœ‰alphaé€šé“ &emsp;&emsp;æ€Žä¹ˆæ£€æµ‹å›¾å±‚æ··åˆ æ¨¡æ‹Ÿå™¨debugä¸­color blended layersçº¢è‰²åŒºåŸŸè¡¨ç¤ºå›¾å±‚å‘ç”Ÿäº†æ··åˆ çœŸæœºä¸ŠInstrument-é€‰ä¸­Core Animation-å‹¾é€‰Color Blended Layers &emsp;&emsp;æ³¨æ„äº‹é¡¹ï¼šè¿™ä¸ªç¡®å®žæ˜¯ä½“åŠ›æ´»ï¼Œæ›´æ˜¯ä¸ªç»†å¿ƒæ´»ï¼Œä¸€å®šè¦æ³¨æ„ä¸Šä¸‹æ–‡çŽ¯å¢ƒ 8 å›¾ç‰‡çš„ä½¿ç”¨&emsp;&emsp;æœ€éº»çƒ¦çš„å…¶å®žæ˜¯æ‰¾UIè¦å›¾â€¦æå‰å‡†å¤‡å¥½æŒ¨æ‰¹çš„å‡†å¤‡ å›¾ç‰‡ç¼©æ”¾é—®é¢˜ï¼Œå¯¹äºŽé«˜é¢‘å›¾ç‰‡é‡‡ç”¨é‡ç»˜æ–¹å¼é¿å…é‡å¤æ‹‰ä¼¸ã€‚å¯¹ä½Žé¢‘æ‹‰ä¼¸å›¾ç‰‡äº‰å–è®©UIç»™åˆé€‚å¤§å°çš„å›¾ é˜´å½±å’Œåœ†è§’éƒ½å°½å¯èƒ½æ‰¾å›¾ç‰‡ä»£æ›¿ å°½é‡ä½¿ç”¨png å°½é‡ä½¿ç”¨SDä¸‹è½½ç½‘ç»œå›¾ç‰‡ï¼Œå› ä¸ºSDå·²ç»åœ¨å­çº¿ç¨‹è§£ç å›¾ç‰‡ 2 ç›‘æŽ§&emsp;&emsp;å…¶å®žä¸€å¼€å§‹ä¸æƒ³å†™è¿™ä¸ªçš„ï¼å¡é¡¿ç›‘æŽ§æ–¹æ¡ˆå·²ç»çƒ‚å¤§è¡—äº†ï¼Œè€Œä¸”è¿™ç§é‡å¤é€ è½®å­çš„ç®—ä¸å¾—KPIï¼ˆè™½ç„¶crabè¿™ä¸ªç ´è½®å­å¡çš„éƒ½å¿«ä¸èƒ½è·‘äº†ï¼‰ï¼ä½†æ˜¯PMè¯´æ²¡æ„Ÿè§‰æœ‰ä»€ä¹ˆå¤ªå¤§æ•ˆæžœï¼Œè¿™ä¸ªå°±ä¸èƒ½å¿äº†ï¼ 1 runloop&emsp;&emsp;è¿™ä¸ªç®—ä¸Šå¸‚é¢ä¸Šæœ€é€šç”¨çš„æ–¹æ¡ˆäº†ï¼Œå‚è€ƒï¼šiOSå®žæ—¶å¡é¡¿ç›‘æŽ§ï¼Œé‡Œé¢å†™çš„éžå¸¸è¯¦ç»†ï¼æ ¸å¿ƒæ€è·¯ï¼šä¸»çº¿ç¨‹ç»å¤§éƒ¨åˆ†è®¡ç®—æˆ–è€…ç»˜åˆ¶ä»»åŠ¡éƒ½æ˜¯ä»¥Runloopä¸ºå•ä½å‘ç”Ÿã€‚NSRunLoopè°ƒç”¨æ–¹æ³•ä¸»è¦å°±æ˜¯åœ¨kCFRunLoopBeforeSourceså’ŒkCFRunLoopBeforeWaitingä¹‹é—´,è¿˜æœ‰kCFRunLoopAfterWaitingä¹‹åŽ,ä¹Ÿå°±æ˜¯å¦‚æžœæˆ‘ä»¬å‘çŽ°è¿™ä¸¤ä¸ªæ—¶é—´å†…è€—æ—¶å¤ªé•¿,é‚£ä¹ˆå°±å¯ä»¥åˆ¤å®šå‡ºæ­¤æ—¶ä¸»çº¿ç¨‹å¡é¡¿.123456789101112131415161718192021222324252627282930313233343536373839404142434445static void runLoopObserverCallBack(CFRunLoopObserverRef observer, CFRunLoopActivity activity, void *info)&#123;MyClass *object = (__bridge MyClass*)info;// è®°å½•çŠ¶æ€å€¼object-&gt;activity = activity;// å‘é€ä¿¡å·dispatch_semaphore_t semaphore = moniotr-&gt;semaphore;dispatch_semaphore_signal(semaphore);&#125;- (void)registerObserver&#123;CFRunLoopObserverContext context = &#123;0,(__bridge void*)self,NULL,NULL&#125;;CFRunLoopObserverRef observer = CFRunLoopObserverCreate(kCFAllocatorDefault,kCFRunLoopAllActivities,YES,0,&amp;runLoopObserverCallBack,&amp;context);CFRunLoopAddObserver(CFRunLoopGetMain(), observer, kCFRunLoopCommonModes);// åˆ›å»ºä¿¡å·semaphore = dispatch_semaphore_create(0);// åœ¨å­çº¿ç¨‹ç›‘æŽ§æ—¶é•¿dispatch_async(dispatch_get_global_queue(0, 0), ^&#123;while (YES)&#123;// å‡å®šè¿žç»­5æ¬¡è¶…æ—¶50msè®¤ä¸ºå¡é¡¿(å½“ç„¶ä¹ŸåŒ…å«äº†å•æ¬¡è¶…æ—¶250ms)long st = dispatch_semaphore_wait(semaphore, dispatch_time(DISPATCH_TIME_NOW, 50*NSEC_PER_MSEC));if (st != 0)&#123;if (activity==kCFRunLoopBeforeSources || activity==kCFRunLoopAfterWaiting)&#123;if (++timeoutCount &lt; 5)continue;NSLog(@&quot;å¥½åƒæœ‰ç‚¹å„¿å¡å“¦&quot;);&#125;&#125;timeoutCount = 0;&#125;&#125;);&#125; &emsp;&emsp;éœ€è¦æ³¨æ„çš„ domeé‡Œä½¿ç”¨PLCrashReporterè¿›è¡Œç¬¦å·åŒ–ä¼šå¾ˆå¡ å¡é¡¿åªdumpä¸»çº¿ç¨‹è°ƒç”¨æ ˆå°±å¯ä»¥äº† è°ƒç”¨æ ˆä¹Ÿè®¸æœ‰â€å»¶è¿Ÿâ€œ 2 å­çº¿ç¨‹&emsp;&emsp;è¿™ä¸ªæ€è·¯åŠå¾ˆæœ‰æ„æ€ï¼Œç®€å•çš„è¯´å°±æ˜¯ä¸æ–­çš„ç”¨å­çº¿ç¨‹åŽ»ä¸»çº¿ç¨‹åŽ»æ’žï¼šæˆ‘æ‰“ä½ ä¸€æ‹³ï¼Œä½ è¸¢æˆ‘ä¸€è„šã€‚è¿‡æ®µæ—¶é—´ä½ æ²¡è¸¢æˆ‘ï¼Œä½ æœ‰é—®é¢˜ï¼å¯å‚è€ƒï¼šiOSåº”ç”¨UIçº¿ç¨‹å¡é¡¿ç›‘æŽ§ , PS: èŽ·å–è°ƒç”¨æ ˆæˆ‘è§‰å¾—ç›´æŽ¥ç”¨plcrashreporterå°±å¥½ï¼Œplcrashreporterçš„æ ¸å¿ƒåŽŸç†ï¼šæ–°æœŸä¸€ä¸ªçº¿ç¨‹Aï¼ŒæŒ‚èµ·é™¤Aå¤–çš„æ‰€æœ‰çº¿ç¨‹ï¼Œdumpè°ƒç”¨æ ˆï¼å¦å¤–å¯¹ç¬¦å·åŒ–æ„Ÿå…´è¶£çš„ï¼Œè¯·é˜…è¯»èŽ·å–ä»»æ„çº¿ç¨‹è°ƒç”¨æ ˆçš„é‚£äº›äº‹ å’Œ iOS Crash æ•èŽ·åŠå †æ ˆç¬¦å·åŒ–æ€è·¯å‰–æž &emsp;&emsp;ä¸€ä¸ªswiftç‰ˆçš„ä¸‰æ–¹åº“å¯åšå‚è€ƒï¼šANREye 3 ç»„åˆæ‹³&emsp;&esmp;å‚è€ƒå¾®ä¿¡iOSå¡é¡¿ç›‘æŽ§ç³»ç»Ÿï¼Œå¾®ä¿¡è¿™ä¸ªæ€è·¯å¾ˆå…¨é¢ï¼Œrunloopã€CPUã€FPSéƒ½ç›‘æŽ§ï¼Œ[ä»£ç ]https://aozhimin.github.io/iOS-Monitor-Platform/)å¦‚ä¸‹ï¼š CPU1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677#pragma mark CPU// cpuåˆ©ç”¨çŽ‡+ (CGFloat)cpuUsage &#123;kern_return_t kr;task_info_data_t tinfo;mach_msg_type_number_t task_info_count;task_info_count = TASK_INFO_MAX;kr = task_info(mach_task_self(), MACH_TASK_BASIC_INFO, (task_info_t)tinfo, &amp;task_info_count);if (kr != KERN_SUCCESS) &#123;return -1;&#125;thread_array_t thread_list;mach_msg_type_number_t thread_count;thread_info_data_t thinfo;mach_msg_type_number_t thread_info_count;thread_basic_info_t basic_info_th;// get threads in the taskkr = task_threads(mach_task_self(), &amp;thread_list, &amp;thread_count);if (kr != KERN_SUCCESS) &#123;return -1;&#125;long total_time = 0;long total_userTime = 0;CGFloat total_cpu = 0;int j;// for each threadfor (j = 0; j &lt; (int)thread_count; j++) &#123;thread_info_count = THREAD_INFO_MAX;kr = thread_info(thread_list[j], THREAD_BASIC_INFO,(thread_info_t)thinfo, &amp;thread_info_count);if (kr != KERN_SUCCESS) &#123;return -1;&#125;basic_info_th = (thread_basic_info_t)thinfo;if (!(basic_info_th-&gt;flags &amp; TH_FLAGS_IDLE)) &#123;total_time = total_time + basic_info_th-&gt;user_time.seconds + basic_info_th-&gt;system_time.seconds;total_userTime = total_userTime + basic_info_th-&gt;user_time.microseconds + basic_info_th-&gt;system_time.microseconds;total_cpu = total_cpu + basic_info_th-&gt;cpu_usage / (float)TH_USAGE_SCALE * 100.0;&#125;&#125;kr = vm_deallocate(mach_task_self(), (vm_offset_t)thread_list, thread_count * sizeof(thread_t));assert(kr == KERN_SUCCESS);return total_cpu;&#125;// CPUæ ¸æ•°+ (NSUInteger)cpuNumber &#123;return [NSProcessInfo processInfo].processorCount;&#125;//// CPUç±»åž‹//+ (NSString *)cpuType &#123;// host_basic_info_data_t hostInfo;// mach_msg_type_number_t infoCount;// infoCount = HOST_BASIC_INFO_COUNT;// host_info(mach_host_self(), HOST_BASIC_INFO, (host_info_t)&amp;hostInfo, &amp;infoCount);// switch (hostInfo.cpu_type) &#123;// case CPU_TYPE_ARM64:// return @&quot;ARM64&quot;;// break;// // default:// return @&quot;unknown&quot;;// break;// &#125;//&#125; å†…å­˜1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677#pragma mark å†…å­˜ç›¸å…³// å½“å‰è¿›ç¨‹å†…å­˜+ (long long)appUsedMemory &#123;struct mach_task_basic_info info;mach_msg_type_number_t count = MACH_TASK_BASIC_INFO_COUNT;int r = task_info(mach_task_self(), MACH_TASK_BASIC_INFO, (task_info_t)&amp; info, &amp; count);if (r == KERN_SUCCESS)&#123;return info.resident_size/MBSize;&#125;else&#123;return -1;&#125;&#125;// ç‰©ç†å†…å­˜+ (long long)physicalMemory &#123;return [NSProcessInfo processInfo].physicalMemory/MBSize;&#125;// å½“å‰è®¾å¤‡å·²ç”¨å†…å­˜+ (long long)deviceUsedMemory&#123;size_t length = 0;int mib[6] = &#123;0&#125;;int pagesize = 0;mib[0] = CTL_HW;mib[1] = HW_PAGESIZE;length = sizeof(pagesize);if (sysctl(mib, 2, &amp;pagesize, &amp;length, NULL, 0) &lt; 0)&#123;return 0;&#125;mach_msg_type_number_t count = HOST_VM_INFO_COUNT;vm_statistics64_data_t vmstat;if (host_statistics(mach_host_self(), HOST_VM_INFO, (host_info_t)&amp;vmstat, &amp;count) != KERN_SUCCESS)&#123;return 0;&#125;int wireMem = vmstat.wire_count * pagesize;int activeMem = vmstat.active_count * pagesize;return (wireMem + activeMem)/MBSize;&#125;// å½“å‰è®¾å¤‡å¯ç”¨å†…å­˜+ (long long)deviceFreeMemory &#123;size_t length = 0;int mib[6] = &#123;0&#125;;int pagesize = 0;mib[0] = CTL_HW;mib[1] = HW_PAGESIZE;length = sizeof(pagesize);if (sysctl(mib, 2, &amp;pagesize, &amp;length, NULL, 0) &lt; 0) &#123;return 0;&#125;mach_msg_type_number_t count = HOST_VM_INFO_COUNT;vm_statistics64_data_t vmstat;if (host_statistics(mach_host_self(), HOST_VM_INFO, (host_info_t)&amp;vmstat, &amp;count) != KERN_SUCCESS)&#123;return 0;&#125;int freeMem = vmstat.free_count * pagesize;int inactiveMem = vmstat.inactive_count * pagesize;return (freeMem + inactiveMem)/MBSize;&#125; FPS123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263- (id)init &#123;self = [super init];if( self )&#123;[self setup];&#125;return self;&#125;#pragma mark FPS- (void)setup &#123;_updateInterval = 0.5f;_historyCount = 0;_historySum = 0;[[NSNotificationCenter defaultCenter] addObserver: selfselector: @selector(applicationWillResignActiveNotification)name: UIApplicationWillResignActiveNotificationobject: nil];[[NSNotificationCenter defaultCenter] addObserver: selfselector: @selector(applicationDidBecomeActiveNotification)name: UIApplicationDidBecomeActiveNotificationobject: nil];&#125;- (void)startDisplayLink &#123;_displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(displayLinkProc)];[_displayLink addToRunLoop:[NSRunLoop mainRunLoop] forMode:NSRunLoopCommonModes];&#125;- (void)stopDisplayLink &#123;[_displayLink setPaused:YES];[_displayLink removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];[_displayLink invalidate];_displayLink = nil;&#125;- (void)applicationDidBecomeActiveNotification &#123;[self.displayLink setPaused:NO];&#125;- (void)applicationWillResignActiveNotification &#123;[self.displayLink setPaused:YES];&#125;// ä¸å‡†æœ‰å»¶è¿Ÿ- (void)displayLinkProc &#123;_historyCount += _displayLink.frameInterval;CFTimeInterval interval = _displayLink.timestamp - _lastTime;if( interval &gt;= _updateInterval ) &#123;_lastTime = _displayLink.timestamp;// å›žè°ƒä¸Šå±‚åˆ·æ–°å±•ç¤ºNSUInteger fps = (NSUInteger)(_historyCount / interval);if (self.delegate &amp;&amp; [self.delegate respondsToSelector:@selector(frezingCheker:currentFPS:)]) &#123;[self.delegate frezingCheker:self currentFPS:fps];&#125;_fps = fps;_historyCount = 0;&#125;&#125;- (void)dealloc &#123;[self stopDisplayLink];&#125; å‚è€ƒ iOS ä¿æŒç•Œé¢æµç•…çš„æŠ€å·§ https://aozhimin.github.io/iOS-Monitor-Platform/]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>æ€§èƒ½</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è§‚å‘¼å¸]]></title>
    <url>%2F2018%2F07%2F27%2F%E8%A7%82%E5%91%BC%E5%90%B8%2F</url>
    <content type="text"><![CDATA[å‰é¢ä¸‰åˆ†ä¹‹ä¸€éƒ½åœ¨è®²ç¦…ä¿®æ˜¯ä»€ä¹ˆï¼ä¸æ˜¯ä»€ä¹ˆ!æ€»ç»“ä¸‰å¥è¯ï¼š1ï¼Œç®¡ä½ å±äº‹ã€ç®¡æˆ‘å±äº‹ã€æœ‰è¿™å±äº‹ï¼› 2ï¼Œ æ—¢æ¥ä¹‹ï¼Œåˆ™å®‰ä¹‹ ä¸€æ—¦åä¸‹ï¼Œå°±ä¸è¦ä»»æ„æ”¹å˜å§¿åŠ¿ï¼ç›˜è…¿æ˜¯ä¸ºäº†ä¸æŠ–è…¿ï¼åå®šä¹‹åŽï¼Œé—­ä¸Šçœ¼ç›ï¼Œæˆ‘ä»¬çš„å¿ƒå°±å¥½åƒä¸€æ¯æµ‘æµŠçš„æ°´ï¼Œè£…ç€æµŠæ°´çš„æ¯å­é™ç½®æ—¶é—´è¶Šä¹…ï¼Œæ³¥æ²™å°±è¶Šèƒ½æ²‰æ·€ä¸‹æ¥ æ²¡æœ‰å¯¹è±¡ï¼Œå¿ƒå°±ä¸å¯èƒ½é›†ä¸­ã€‚å°†å¿ƒé›†ä¸­åœ¨å‘¼å¸ä¹‹ä¸Šï¼Œæ·±å‘¼å¸ä¸‰æ¬¡ï¼Œä¸‰æ¬¡æ·±å‘¼å¸ä¹‹åŽï¼Œæ¢å¤æ­£å¸¸çš„å‘¼å¸ï¼Œè®©ä½ çš„å‘¼å¸è‡ªç”±çš„è¿›å‡ºï¼Œå†è½»æ¾çš„å°†ä½ çš„æ³¨æ„åŠ›é›†ä¸­åœ¨é¼»å­”è¾¹ç¼˜ã€‚å•çº¯æ³¨æ„å‘¼å¸è¿›å‡ºçš„æ„Ÿè§‰ï¼šåœ¨å¸å®Œæ°”å³å°†æŠŠæœŸå‘¼å‡ºä¹‹å‰ï¼Œæœ‰ä¸€ä¸ªçŸ­æš‚çš„åœé¡¿ï¼Œæ³¨æ„å®ƒï¼Œå¹¶ä¸”æ³¨æ„å‘¼æ°”çš„å¼€å§‹ã€‚åœ¨å‘¼å®Œæ°”å³å°†å¸æ°”è¿›æ¥ä¹‹å‰ï¼Œåˆæœ‰å¦ä¸€ä¸ªçŸ­æš‚çš„åœé¡¿ï¼ŒåŒæ ·ä¹Ÿæ³¨æ„è¿™ä¸ªçŸ­æš‚çš„åœé¡¿ã€‚åˆ«çžŽæƒ³ï¼Œåˆ«è¯´è¯ï¼Œåˆ«çžŽå¬ï¼Œåªä¸“æ³¨äºŽå‘¼å¸ã€‚ å½“å¿ƒè·‘å¼€æ—¶ï¼Œé©¬ä¸Šä»¥æ­£å¿µæ‹‰å›žæ¥ï¼Œå¢žé•¿å®šåŠ›çš„æŽªæ–½ï¼šæ•°æ¯ï¼Œå‘¼æ°”æ•°æ•°ï¼Œå¸æ°”æ•°æ•°ï¼› æœ€é‡è¦çš„åŽŸåˆ™æ˜¯ï¼šåçš„æ—¶å€™èƒŒè¦æŒºç›´ï¼Œè„Šæ¤Žè¦åƒä¸€å é“œæ¿ä¸€æ ·ï¼Œä¸€ä¸ªé¡¶ä¸€ä¸ªï¼Œè®©è„ŠæŸ±ç›´ç«‹èµ·æ¥ï¼Œä½†ä¸åº”é€ æˆè‚Œè‚‰ç´§å¼ ï¼Œå¤´åˆ™è¦ä¸Žè„ŠæŸ±ä¿æŒä¸€æ¡ç›´çº¿ï¼Œèº«ä½“çš„å…¶ä½™éƒ¨ä½åˆ™æ¾è½¯çš„åž‚æŒ‚åœ¨è„ŠæŸ±ä¸Šã€‚è¿™äº›éƒ½å¿…é¡»åœ¨æ”¾æ¾çš„çŠ¶æ€ä¸‹è¿›è¡Œï¼Œä¸è¦åƒµç¡¬ã€‚ é€‰æ‹©è½¯ç¡¬é€‚åº¦çš„ååž«ï¼Œé€‰æ‹©èˆ’æœçš„è¡£æœï¼Œé€‰æ‹©èˆ’é€‚çš„åå§¿(å•ç›˜ï¼ŒåŒç›˜æˆ–ä¸ç›˜)ï¼ŒåŒæ‰‹é‡å æ”¾äºŽè†ä¸Šï¼Œç›®æ ‡å°±æ˜¯å¸Œæœ›èº«ä½“å®Œå…¨ä¸åŠ¨ï¼Œä½†ä¸èƒ½ç¡ç€ ä¸‰æ¬¡æ·±å‘¼å¸ä¹‹åŽæ˜¯è‡ªç„¶çš„å‘¼å¸ï¼Œåº”è¯¥åŽ»æ„Ÿå—å‘¼å¸ï¼Œè€Œä¸æ˜¯æŽ§åˆ¶å‘¼å¸ï¼Œé™¤éžä½ åœ¨æ•°æ¯ åˆ«æ€è€ƒä¹Ÿåˆ«ç¡ç€ï¼Œåˆ«ç€æ€¥ä¹Ÿåˆ«æ”¾ä»» åœ¨ç¦…ä¿®ä¸­ï¼Œæˆ‘ä»¬é çš„æ˜¯ç²¾è¿›ï¼Œè€Œéžè›®åŠ›ã€‚æˆ‘ä»¬å”¯ä¸€èƒ½åšåˆ°åŠªåŠ›å°±æ˜¯æ¸©å’Œè€Œè€å¿ƒåœ°ä¿æŒæ³¨æ„åŠ› å¿…é¡»ç†ŠæŽ’é™¤è‡ªæ€¨è‡ªè‰¾ä¸Žè‡ªè´£ç€æ‰‹ æ€Žæ ·å¤„ç†ç¦…ä¿®ä¸­çš„é—®é¢˜ï¼Ÿé—®é¢˜ä¸€ï¼šèº«ä½“çš„ç–¼ç—›æ¶ˆé™¤ç–¼ç—›ã€æ²»ç–—ï¼Œæˆ–æŠŠç–¼ç—›ä½œä¸ºç¦…ä¿®å¯¹è±¡ã€æ£€æŸ¥ååž«ã€è°ƒæ•´åå§¿ã€æ¾å¼€è¡£ç‰©ã€‚ é—®é¢˜äºŒï¼šè…¿å¤±åŽ»çŸ¥è§‰åŒè…¿å‘éº»æ˜¯ç”±ç¥žç»åŽ‹è¿«è€Œå¼•èµ·ï¼Œä½ ä¸ä¼šå› ä¸ºåå§¿è€Œä¼¤å®³åˆ°è…¿éƒ¨ç»„ç»‡çš„ã€‚å½“è…¿å¤±åŽ»çŸ¥è§‰ï¼Œä½ åªè¦è§‚å¯Ÿè¿™ä¸ªçŽ°è±¡å³å¯ã€‚ç¦…ä¿®ä¸€æ®µæ—¶é—´ä¹‹åŽï¼Œéº»ç—¹æ„Ÿä¼šé€æ¸æ¶ˆå¤±ã€‚ é—®é¢˜ä¸‰ï¼šå¥‡ç‰¹çš„æ„Ÿè§‰å½“ä½ è¾¾åˆ°æ”¾æ¾æ—¶ï¼Œç¥žç»ç³»ç»Ÿåªæ˜¯å¼€å§‹æ›´æœ‰æ•ˆçŽ‡åœ°è®©æ„Ÿå®˜ä¿¡å·é€šè¿‡ã€‚å¤§é‡å…ˆå‰å—é˜»çš„æ„Ÿå®˜ä¿¡å·å¦‚ä»Šå¯ä»¥ç•…è¡Œæ— é˜»ï¼Œå› è€Œå¼•å‘å„ç§ç‹¬ç‰¹çš„æ„Ÿå—ã€‚å®ƒæ²¡æœ‰ä»»ä½•ç‰¹åˆ«çš„æ„ä¹‰ï¼Œå°±åªæ˜¯æ„Ÿå—è€Œå·²ï¼Œå› æ­¤åªè¦ä½¿ç”¨å¹³å¸¸çš„æŠ€å·§å³å¯ã€‚çœ‹ç€å®ƒç”Ÿèµ·ï¼Œå†çœ‹ç€å®ƒæ¶ˆå¤±ï¼Œä¸è¦è¢«ç‰µæ‰¯è¿›åŽ»ã€‚ é—®é¢˜å››ï¼šæ˜æ²‰ä¸è¦å¯¹ç¡çœ è®©æ­¥ã€‚å¦‚æžœä½ å¾ˆæƒ³ç¡å°±æ·±å¸æ°”ï¼Œæ†‹å¾—æ„ˆä¹…æ„ˆå¥½ï¼Œç„¶åŽå†æ…¢æ…¢åå‡ºæ¥ã€‚æŽ¥ç€å†æ·±å¸ä¸€å£æ°”ï¼Œç„¶åŽå°½é‡æ†‹ä½ï¼Œå†æ…¢æ…¢åå‡ºæ¥ã€‚åå¤è¿™ä¹ˆåšï¼Œç›´åˆ°ä½ çš„èº«ä½“æ¸©æš–èµ·æ¥ï¼Œç¡æ„å…¨æ¶ˆä¸ºæ­¢ã€‚æŽ¥ç€ï¼Œå†å›žåˆ°å‘¼å¸ä¸Šã€‚ é—®é¢˜äº”ï¼šæ— æ³•ä¸“æ³¨åœ¨ç¦…ä¿®å‰è§£å†³æ‰‹è¾¹çš„çº·äº‰ã€‚å¦‚æžœè§£å†³ä¸äº†ï¼ŒåšæŒç¦…ä¿®ï¼Œä¸åŽ»ç†ä¼šé—®é¢˜ï¼Œæ”¾ä¸‹è‡ªæˆ‘ä¸­å¿ƒã€‚ é—®é¢˜å…­ï¼šæ— èŠ1ã€é‡æ–°å»ºç«‹çœŸå®žçš„æ­£å¿µï¼›æ­£å¿µçœ‹æ¯ä¸€åˆ»å°±åƒæ˜¯è¿™ä¸–ä¸Šçš„ç¬¬ä¸€æ¬¡ä¸Žå”¯ä¸€çš„ä¸€æ¬¡ã€‚å› æ­¤ï¼Œå†çœ‹ä¸€æ¬¡ã€‚2ã€è§‚å¯Ÿä½ çš„å¿ƒæ€ã€‚æ³¨æ„çœ‹ä½ æ— èŠçš„çŠ¶æ€ã€‚ä»€ä¹ˆæ˜¯æ— èŠï¼Ÿæ— èŠåœ¨å“ªé‡Œï¼Ÿå®ƒæ„Ÿè§‰åƒä»€ä¹ˆï¼Ÿå®ƒçš„æˆåˆ†æ˜¯ä»€ä¹ˆï¼Ÿå®ƒæœ‰ä»»ä½•ç”Ÿç†ä¸Šçš„æ„Ÿå—å—ï¼Ÿå®ƒå¯¹ä½ çš„æ€ç»´è¿‡ç¨‹æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿé‡æ–°æ£€è§†æ— èŠï¼Œå°±åƒä½ ä»¥å‰ä»Žæ¥ä¸æ›¾ç»åŽ†è¿‡é‚£ç§çŠ¶æ€ä¸€æ ·ã€‚ é—®é¢˜ä¸ƒï¼šææƒ§ä½ å¯èƒ½åœ¨æ½œæ„è¯†é‡Œè®¾å®šäº†ä¸€ä¸ªâ€œæ£€æŸ¥å³å°†å‘ç”Ÿçš„äº‹â€çš„ç¨‹åºã€‚å› æ­¤ï¼Œå½“ä¸€ä¸ªä»¤äººå®³æ€•çš„å¹»æƒ³å‡ºçŽ°æ—¶ï¼Œå®šåŠ›å°±ä¼šé”å®šå®ƒï¼Œè€Œå¹»æƒ³å°±ä»¥ä½ ä¸“æ³¨çš„èƒ½é‡ä¸ºé£Ÿï¼Œå¹¶ä¸”æˆé•¿ã€‚ä¸è¦å¯¹æŠ—ææƒ§ï¼Œç½®èº«äº‹å¤–ï¼Œè®©å®ƒè‡ªæ¥è‡ªåŽ»ã€‚å®ƒåªæ˜¯å¹»æƒ³ã€‚ é—®é¢˜å…«ï¼šå¤ªå‹‰å¼ºä¸è¦æ€¥äºŽçœ‹åˆ°ç»“æžœï¼Œä¸è¦æœ‰å¤ªå¼ºçƒˆçš„æœŸå¾…ã€‚åªè¦ä»¥ç¨³å®šè€Œå¹³è¡¡çš„åŠªåŠ›è¿›è¡Œç¦…ä¿®å³å¯ã€‚äº«å—ç¦…ä¿®ï¼Œä¸è¦è®©å®ƒå˜æˆä¸€ä¸ªè‹¦å·®æˆ–è´Ÿæ‹…ã€‚]]></content>
      <categories>
        <category>è¯»ä¹¦</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å†·å¯åŠ¨ä¼˜åŒ–]]></title>
    <url>%2F2018%2F05%2F21%2F%E5%86%B7%E5%90%AF%E5%8A%A8%E4%BC%98%E5%8C%96%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;å…³äºŽAPPè¿è¡Œç†è®ºï¼Œç™¾åº¦çŸ¥é“ä¸Šæœ‰ä¸€ç¯‡ä¸é”™çš„æ–‡ç« ï¼šApp è¿è¡Œç†è®ºã€‚ å¯åŠ¨è¿‡ç¨‹1 preMainé˜¶æ®µåŠ è½½è¿‡ç¨‹ è§£æžinfo.plist åŠ è½½å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè‡ªèº«Appçš„æ‰€æœ‰ .o æ–‡ä»¶ï¼‰ åŠ è½½dyldï¼Œä»¥ä¾¿é€’å½’åŠ è½½æ‰€æœ‰ä¾èµ–çš„åŠ¨æ€é“¾æŽ¥åº“ åŠ è½½åŠ¨æ€é“¾æŽ¥åº“ï¼šåˆ†æžå¹¶æ‰¾åˆ°åº“çš„mach-oæ–‡ä»¶ã€éªŒè¯å¹¶æ³¨å†Œæ–‡ä»¶ã€æŠŠåŠ¨æ€åº“çš„æ¯ä¸ªsegmentæ˜ å°„åˆ°å†…å­˜ rebase/bindï¼šç”±äºŽASLRéœ€è¦è¿™ä¸¤æ­¥ä¿®å¤é•œåƒä¸­çš„èµ„æºæŒ‡é’ˆ æ³¨å†ŒObjcç±»ã€æ’å…¥category initializers æµ‹é‡æ–¹å¼&emsp;&emsp;åœ¨Xcodeçš„èœå•ä¸­é€‰æ‹©Projectâ†’Schemeâ†’Edit Schemeâ€¦ï¼Œç„¶åŽæ‰¾åˆ° Run â†’ Environment Variables â†’+ï¼Œæ·»åŠ nameä¸ºDYLD_PRINT_STATISTICSvalueä¸º1çš„çŽ¯å¢ƒå˜é‡ å¯åšäº‹æƒ… å‡å°‘ä¸å¿…è¦çš„frameworkï¼Œå› ä¸ºåŠ¨æ€é“¾æŽ¥æ¯”è¾ƒè€—æ—¶ check frameworkåº”å½“è®¾ä¸ºoptionalå’Œrequiredï¼Œå¦‚æžœè¯¥frameworkåœ¨å½“å‰Appæ”¯æŒçš„æ‰€æœ‰iOSç³»ç»Ÿç‰ˆæœ¬éƒ½å­˜åœ¨ï¼Œé‚£ä¹ˆå°±è®¾ä¸ºrequiredï¼Œå¦åˆ™å°±è®¾ä¸ºoptionalï¼Œå› ä¸ºoptionalä¼šæœ‰äº›é¢å¤–çš„æ£€æŸ¥ åˆç†è®¾ç½®podåº“æƒé™ï¼Œä¾‹å¦‚åªåœ¨debugç”¨åˆ°çš„ï¼Œå¯æ ‡è®°ä¸º :configurations =&gt; [â€˜Debugâ€™] åˆå¹¶æˆ–è€…åˆ å‡ä¸€äº›OCç±»ï¼Œå…³äºŽæ¸…ç†é¡¹ç›®ä¸­æ²¡ç”¨åˆ°çš„ç±»ï¼Œä½¿ç”¨å·¥å…·AppCodeä»£ç æ£€æŸ¥åŠŸèƒ½ åˆ å‡æ²¡æœ‰è¢«è°ƒç”¨åˆ°æˆ–è€…å·²ç»åºŸå¼ƒçš„æ–¹æ³•ï¼Œå‚è€ƒ http://stackoverflow.com/questions/35233564/how-to-find-unused-code-in-xcode-7 å°†ä¸å¿…é¡»åœ¨+loadæ–¹æ³•ä¸­åšçš„äº‹æƒ…å»¶è¿Ÿåˆ°+initializeä¸­ 2 mainé˜¶æ®µ int main(int argc, char * argv[])å¼€å§‹ (BOOL)application:(UIApplication )application didFinishLaunchingWithOptions:(NSDictionary )launchOptions ç»“æŸ æµ‹é‡æ–¹å¼&emsp;&emsp;æ‰“ç‚¹ï¼Œè¾“å‡ºlogï¼ä¸å»ºè®®ä½¿ç”¨Time Profilerï¼Œå› ä¸ºå¾ˆå®¹æ˜“é™·åˆ°æ¨¡å—åˆå§‹åŒ–çš„ç»†èŠ‚é‡Œé¢åŽ» å¯åšäº‹æƒ…&emsp;&emsp;é›†ä¸­åœ¨didFinishLaunchingWithOptionsæ–¹æ³•å†…ï¼Œè¿™æ˜¯å¤§å¤´ä¹Ÿæ˜¯é‡ç‚¹ï¼Œæ ¸å¿ƒå°±æ˜¯å»¶è¿Ÿå¤„ç†ï¼ŒæŽ¨èåŽŸåˆ™ï¼šä¸€æ¬¡åªä¿®æ”¹ä¸€éƒ¨åˆ†ã€å†™å¥½æµ‹è¯•ç”¨ä¾‹ã€è®¾ç½®é™çº§æŽªæ–½ å°†ä¸‰æ–¹SDKåˆ†ç±»ï¼Œå°†éƒ¨åˆ†SDKå»¶åŽï¼Œä¾‹å¦‚ShareSDKã€PushSDKç­‰ é€‰æ‹©æ€§åŠ è½½ï¼Œæä¾›å‡ ä¸ªç»´åº¦ï¼šç‰ˆæœ¬è§’åº¦ã€ç”¨æˆ·è§’åº¦ã€ä¾èµ–å…³ç³»ç­‰ å»¶åŽéƒ¨åˆ†æ¨¡å—æˆ–å•ä¾‹çš„åˆå§‹åŒ–å·¥ä½œï¼Œä¾‹å¦‚ï¼Œæœ¬åœ°åŒ–æ¨¡å—ã€å¹¿å‘Šæ¨¡å—ç­‰ å»¶åŽå¤§éƒ¨åˆ†çš„ç½‘ç»œè¯·æ±‚è‡³homeé˜¶æ®µ 3 homeé˜¶æ®µ tabbar home viewdidload å’Œ viewDidAppear æµ‹é‡æ–¹å¼&emsp;&emsp;æ‰“ç‚¹log æˆ– Time Profiler å¯åšäº‹æƒ… ä¸¥æŸ¥tabbarï¼Œæˆ‘ä»¬åœ¨tabbarå’Œ4ä¸ªtabåˆå§‹åŒ–æ—¶ç«Ÿç„¶åšäº†éžå¸¸å¤šçš„ä¸šåŠ¡é€»è¾‘ï¼Œè¿™äº›å®Œå…¨å¯ä»¥å»¶åŽ å°½é‡ä½¿ç”¨ç¼“å­˜ä¸”å°½é‡åªåŠ è½½ç¬¬ä¸€å±ç¼“å­˜ å°½é‡é¿å…æ‰¹é‡åŠ è½½å›¾ç‰‡ï¼Œå¦‚æžœå¿…é¡»åŠ è½½ä½¿ç”¨å¼‚æ­¥ ä½¿ç”¨æ‡’åŠ è½½ï¼Œå°½é‡åªå¤„ç†ç¬¬ä¸€å±å†…å®¹ å¦‚æžœæ¡ä»¶å…è®¸ï¼Œä½¿ç”¨å ä½ç¬¦ å°½é‡å‡å°‘viewå±‚çº§ã€å‡å°‘å¸ƒå±€æ—¶æµ®ç‚¹æ•°çš„ä½¿ç”¨ å…¶å®ƒä¼˜åŒ–æŽªæ–½ ä½¿ç”¨é—ªå±å¹¿å‘Šï¼ˆå€’è®¡æ—¶ 3 2 1 é‚£ç§ï¼‰ ä½¿ç”¨éƒ¨åˆ†åŠ¨ç”»ï¼Œé™ä½Žç”¨æˆ·ç„¦è™‘ å‚è€ƒ ä»Šæ—¥å¤´æ¡iOSå®¢æˆ·ç«¯å¯åŠ¨é€Ÿåº¦ä¼˜åŒ– iOS App å¯åŠ¨æ€§èƒ½ä¼˜åŒ– https://zhidao.baidu.com/question/1370352051634002499.html]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>æ€§èƒ½</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµé‡ç›‘æŽ§]]></title>
    <url>%2F2018%2F04%2F30%2F%E6%B5%81%E9%87%8F%E7%9B%91%E6%8E%A7%2F</url>
    <content type="text"><![CDATA[why&emsp;&emsp;æµé‡ç›‘æŽ§ï¼Ÿæ€Žä¹ˆä¹Ÿå¾—æ•´ä¸ªç½‘ç»œä¼˜åŒ–æ‰é è°±å§ï¼å…¶å®žä¸€å¼€å§‹æˆ‘çš„æƒ³æ³•å°±æ˜¯ç½‘ç»œä¼˜åŒ–ï¼ä½†ç»è¿‡å¤§å®¶å¼€ä¼šè®¨è®ºè¿‡åŽï¼Œå‘çŽ°å¤§å®¶ï¼ˆé¢†å¯¼ï¼‰åªè®¤ä¸ºä¸¤ä¸ªæ•°æ®æœ‰ç”¨ï¼šæµé‡å’Œç½‘ç»œé”™è¯¯çŽ‡ï¼ &emsp;&emsp;æ—¢ç„¶æ˜¯å¼€ä¼šè®¨è®ºçš„ç»“æžœï¼Œé‚£è‡ªç„¶æœ‰å¿…è¦æ°´ä¸€ä¸‹ä¸ºä»€ä¹ˆï¼ä¼šä¸Šå¤§ä½¬ä»¬è®¤ä¸ºç§»åŠ¨ç½‘ç»œå¾ˆå¤æ‚ï¼ŒWIFIã€4Gã€3Gç­‰ï¼Œç”¨æˆ·å¯èƒ½è¿‡ä¸ªå¤©æ¡¥ç½‘ç»œéƒ½è¦åˆ‡æ¢å¥½å‡ æ¬¡ã€‚åœ¨DNS è§£æžæ…¢ã€å¤±è´¥çŽ‡é«˜ï¼ˆè§£å†³1ï¼šå¼€æºç‰ˆHttpDNSæ–¹æ¡ˆè¯¦è§£,ä¹Ÿå¯ç›´æŽ¥ç”¨Marsï¼‰åŸºç¡€ä¸Šè®¨è®ºâ€æ—¶é—´â€œé—®é¢˜ä¸é è°±ï¼æœåŠ¡ç«¯ä»€ä¹ˆæ ·è¿˜ä¸çŸ¥é“ï¼Œå•çº¯å®¢æˆ·ç«¯ç»Ÿè®¡â€æ—¶é—´â€œæ„ä¹‰ä¸å¤§ï¼æœ€ä¸»è¦APPå†…æœ¬èº«æœ‰æ•°æ®ç¼“å­˜ï¼Œç”¨æˆ·è¿›æ¥çœ‹åˆ°çš„æ˜¯ç¼“å­˜æ•°æ®ï¼Œè¯·æ±‚æ…¢ä¸€ç‚¹æ²¡å…³ç³»ï¼ç½‘ç»œå®‰å…¨é—®é¢˜å¤§ä½¬ä»¬å€’æ˜¯æ¯”è¾ƒé‡è§†ï¼Œä½†ä¸åœ¨æœ¬æ¬¡è®¨è®ºèŒƒå›´ä¹‹å†…â€¦ &emsp;&emsp;è€Œç½‘ç»œé”™è¯¯çŽ‡è¿™ä¸ªå®žåœ¨æ˜¯å¤ªç®€å•äº†ï¼šrequestæ˜¯çŽ°æˆï¼Œresponseæ˜¯çŽ°æˆçš„ï¼Œå”¯ä¸€è¦åŠ çš„å°±ä¸€ä¸ªæ€»è¯·æ±‚æ•°ï¼ä¸ŠæŠ¥åˆ°æŽ¥å£å°±ç»“æŸäº†ï¼Œå®žåœ¨æ˜¯æ²¡æ³•æ°´â€¦ è¿™æ¬¡å°±æ°´æ°´æµé‡ç›‘æŽ§å§ï¼ æµé‡ç»Ÿè®¡æ–¹æ¡ˆ1 Appæµé‡&emsp;&emsp;æ¯«æ— ç–‘é—®NSURLProtocolï¼ˆå…³äºŽNSURLProtocolï¼‰æ˜¯æœ€ç®€å•çš„å®žçŽ°æ–¹æ¡ˆï¼ŒAppleå…è®¸çš„åˆæ³•çš„ä¸­é—´äººï¼è€Œä¸”é€‰ç”¨NSURLProtocolè¿˜æœ‰ä¸€ä¸ªåŽŸå› ï¼šæˆ‘ä»¬çŽ°åœ¨å¦å¤–ä¸€ä¸ªæ­£åœ¨ç­¹å¤‡é¡¹ç›®ä¹Ÿè¦ç”¨NSURLProtocolï¼Œå°±å½“å…ˆè¸©å‘äº†ï¼ &emsp;&emsp;ç›´æŽ¥ç”¨Wedjat Networkçš„ä»£ç å§ï¼Œå› ä¸ºæ ¸å¿ƒä»£ç è·Ÿè¿™ä¸ªå·®ä¸å¤šï¼åªæ˜¯ä¸šåŠ¡é€»è¾‘å¤šäº†äº›ï¼Œä¾‹å¦‚urlåˆ†ç±»ã€headerå¤„ç†ç­‰123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596//ä¸ºäº†é¿å… canInitWithRequest å’Œ canonicalRequestForRequest å‡ºçŽ°æ­»å¾ªçŽ¯static NSString * const HJHTTPHandledIdentifier = @&quot;hujiang_http_handled&quot;;@interface HJURLProtocol () &lt;NSURLSessionTaskDelegate, NSURLSessionDataDelegate&gt;@property (nonatomic, strong) NSURLSessionDataTask *dataTask;@property (nonatomic, strong) NSOperationQueue *sessionDelegateQueue;@property (nonatomic, strong) NSURLResponse *response;@property (nonatomic, strong) NSMutableData *data;@property (nonatomic, strong) NSDate *startDate;@property (nonatomic, strong) HJHTTPModel *httpModel;@end+ (BOOL)canInitWithRequest:(NSURLRequest *)request &#123;if (![request.URL.scheme isEqualToString:@&quot;http&quot;] &amp;&amp;![request.URL.scheme isEqualToString:@&quot;https&quot;]) &#123;return NO;&#125;if ([NSURLProtocol propertyForKey:HJHTTPHandledIdentifier inRequest:request] ) &#123;return NO;&#125;return YES;&#125;+ (NSURLRequest *)canonicalRequestForRequest:(NSURLRequest *)request &#123;NSMutableURLRequest *mutableReqeust = [request mutableCopy];[NSURLProtocol setProperty:@YESforKey:HJHTTPHandledIdentifierinRequest:mutableReqeust];return [mutableReqeust copy];&#125;- (void)startLoading &#123;self.startDate = [NSDate date];self.data = [NSMutableData data];NSURLSessionConfiguration *configuration = [NSURLSessionConfiguration defaultSessionConfiguration];self.sessionDelegateQueue = [[NSOperationQueue alloc] init];self.sessionDelegateQueue.maxConcurrentOperationCount = 1;self.sessionDelegateQueue.name = @&quot;com.hujiang.wedjat.session.queue&quot;;NSURLSession *session = [NSURLSession sessionWithConfiguration:configuration delegate:self delegateQueue:self.sessionDelegateQueue];self.dataTask = [session dataTaskWithRequest:self.request];[self.dataTask resume];httpModel = [[NEHTTPModel alloc] init];httpModel.request = self.request;httpModel.startDateString = [self stringWithDate:[NSDate date]];NSTimeInterval myID = [[NSDate date] timeIntervalSince1970];double randomNum = ((double)(arc4random() % 100))/10000;httpModel.myID = myID+randomNum;&#125;- (void)stopLoading &#123;[self.dataTask cancel];self.dataTask = nil;httpModel.response = (NSHTTPURLResponse *)self.response;httpModel.endDateString = [self stringWithDate:[NSDate date]];NSString *mimeType = self.response.MIMEType;// è§£æž responseï¼Œæµé‡ç»Ÿè®¡ç­‰&#125;#pragma mark - NSURLSessionTaskDelegate- (void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task didCompleteWithError:(NSError *)error &#123;if (!error) &#123;[self.client URLProtocolDidFinishLoading:self];&#125; else if ([error.domain isEqualToString:NSURLErrorDomain] &amp;&amp; error.code == NSURLErrorCancelled) &#123;&#125; else &#123;[self.client URLProtocol:self didFailWithError:error];&#125;self.dataTask = nil;&#125;#pragma mark - NSURLSessionDataDelegate- (void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTaskdidReceiveData:(NSData *)data &#123;[self.client URLProtocol:self didLoadData:data];&#125;- (void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTask didReceiveResponse:(NSURLResponse *)response completionHandler:(void (^)(NSURLSessionResponseDisposition))completionHandler &#123;[[self client] URLProtocol:self didReceiveResponse:response cacheStoragePolicy:NSURLCacheStorageAllowed];completionHandler(NSURLSessionResponseAllow);self.response = response;&#125;- (void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task willPerformHTTPRedirection:(NSHTTPURLResponse *)response newRequest:(NSURLRequest *)request completionHandler:(void (^)(NSURLRequest * _Nullable))completionHandler &#123;if (response != nil)&#123;self.response = response;[[self client] URLProtocol:self wasRedirectedToRequest:request redirectResponse:response];&#125;&#125; &emsp;&emsp;å¦å¤–æˆ‘ä»¬çŽ°åœ¨å·²ç»æœ‰éƒ¨åˆ†é¡µé¢è½¬å‘WKWebviewï¼Œè€Œæ²¡æœ‰å…¬å¼€APIå¯ä»¥æ³¨å†ŒNSURLProtocolï¼Œä¸è¿‡å€’æœ‰ç§æœ‰APIå¯ç”¨ï¼Œå‚è€ƒ NSURLProtocolå¯¹WKWebViewçš„å¤„ç†ã€‚è¿˜æœ‰WKWebviewä¸æ”¯æŒpostæ‹¦æˆªä½†è¿™ä¸ªçœŸæ— è§£ 2 è®¾å¤‡æµé‡&emsp;&emsp;èŽ·å¾—æ•´ä¸ªè®¾å¤‡çš„æµé‡ä¹Ÿæœ‰ä¸€å®šçš„å‚è€ƒæ„ä¹‰ï¼å› ä¸ºçŽ°åœ¨æµé‡å…¶å®žä¸å¤ªå€¼é’±ï¼Œå¦‚æžœç›‘æŽ§åˆ°ç”¨æˆ·æµé‡éžå¸¸å¤§ï¼Œé‚£æ˜¯ä¸æ˜¯å¯ä»¥æ›´é«˜é¢‘åˆ·æ–°é¡µé¢ï¼Ÿæ›´é«˜è´¨é‡çš„å›¾ç‰‡ï¼Ÿæ›´é«˜åˆ†è¾¨çŽ‡çš„è§†é¢‘ï¼ˆæˆ‘ä»¬æŽ¥äº†ä¸€ä¸ªä¸‰æ–¹åº“ï¼Œç”¨äºŽè§†é¢‘è®¤è¯ï¼‰?12345678910111213141516171819202122232425262728293031323334353637383940// ä¸Šè¡Œã€ä¸‹è¡Œæµé‡- (NSArray *)getDataCounters&#123;BOOL success;struct ifaddrs *addrs;struct ifaddrs *cursor;struct if_data *networkStatisc;long WiFiSent = 0;long WiFiReceived = 0;long WWANSent = 0;long WWANReceived = 0;NSString *name=[[NSString alloc]init];success = getifaddrs(&amp;addrs) == 0;if (success)&#123;cursor = addrs;while (cursor != NULL)&#123;name=[NSString stringWithFormat:@&quot;%s&quot;,cursor-&gt;ifa_name];if (cursor-&gt;ifa_addr-&gt;sa_family == AF_LINK)&#123;if ([name hasPrefix:@&quot;en&quot;])&#123;networkStatisc = (struct if_data *) cursor-&gt;ifa_data;WiFiSent+=networkStatisc-&gt;ifi_obytes;WiFiReceived+=networkStatisc-&gt;ifi_ibytes;&#125;if ([name hasPrefix:@&quot;pdp_ip&quot;])&#123;networkStatisc = (struct if_data *) cursor-&gt;ifa_data;WWANSent+=networkStatisc-&gt;ifi_obytes;WWANReceived+=networkStatisc-&gt;ifi_ibytes;&#125;&#125;cursor = cursor-&gt;ifa_next;&#125;freeifaddrs(addrs);&#125;return [NSArray arrayWithObjects:[NSNumber numberWithInt:WiFiSent/1024], [NSNumber numberWithInt:WiFiReceived/1024],[NSNumber numberWithInt:WWANSent/1024],[NSNumber numberWithInt:WWANReceived/1024], nil];&#125; 3 å…¶å®ƒæ–¹æ¡ˆ Hook NSURLConnection å’Œ NSURLSessionè¿›è¡Œç»Ÿè®¡ï¼ iOS9å¯ç”¨VPNæ–¹å¼ https://developer.apple.com/documentation/networkextension?language=objc iOS10çš„NSURLSessionTaskMetrics å‚è€ƒ https://github.com/aozhimin/iOS-Monitor-Platform/blob/master/iOS-Monitor-Platform_Network.md ç§»åŠ¨ APP ç½‘ç»œä¼˜åŒ–æ¦‚è¿° NSURLProtocolå¯¹WKWebViewçš„å¤„ç†]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>æ€§èƒ½</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è€—ç”µé‡ä¼˜åŒ–]]></title>
    <url>%2F2018%2F04%2F21%2F%E8%80%97%E7%94%B5%E9%87%8F%E4%BC%98%E5%8C%96%2F</url>
    <content type="text"><![CDATA[1 æµ‹è¯•1.1 æµ‹è¯•æ–¹æ³•&emsp;&emsp;æ£€æµ‹è€—ç”µé‡çš„æ–¹æ³•è¿˜æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œå¯¹äºŽæˆ‘ä»¬è€Œè¨€Instrumentæ£€æµ‹åŸºæœ¬ä¸Šå·²ç»æ»¡è¶³æˆ‘ä»¬çš„è€—ç”µé‡æ£€æµ‹éœ€æ±‚ï¼å…·ä½“æ–¹æ³•å¯å‚è€ƒiOS å¸¸è§è€—ç”µé‡æ£€æµ‹æ–¹æ¡ˆè°ƒç ”ï¼å¯¹äºŽè€—ç”µæµªæœ‰ç²¾å‡†æ£€æµ‹è¦æ±‚çš„ï¼ŒæŽ¨èé˜…è¯»iOS ç”µé‡æµ‹è¯•å®žè·µ 1.2 æµ‹è¯•èŒƒå›´ æœºåž‹ï¼šiphone seã€iphone 6 Plus å’Œ iPhone X ç³»ç»Ÿï¼šiOS9ã€iOS11ã€iOS12 2 å®žè·µ2.1 å®šä½&emsp;&emsp;å¯¹äºŽæˆ‘ä»¬è€Œè¨€ï¼Œå®šä½æœåŠ¡ç”šè‡³ä¸æ˜¯å¿…é¡»çš„ï¼åªæ˜¯ä¸€äº›ä¸‰æ–¹SDKè¦æ±‚æä¾›å®šä½æœåŠ¡ï¼Œæ‰ä¸å¾—ä¸è¯·æ±‚å®šä½æƒé™ã€‚é‰´äºŽæˆ‘ä»¬çš„å®žé™…ä½¿ç”¨æƒ…å†µ é™åˆ¶å®šä½è¯·æ±‚åªè¯·æ±‚ä¸€æ¬¡ï¼šåŽ»æŽ‰åŽå°å®šä½è¯·æ±‚ã€èŽ·å–ä½ç½®æˆåŠŸåŽä¿å­˜ä½ç½®å¹¶å…³é—­å®šä½ é™ä½Žå®šä½ç²¾åº¦ï¼šè®¾å®šä½ç²¾åº¦desiredAccuracyä¸ºkCLLocationAccuracyKilometerï¼Œè·ç¦»è¿‡æ»¤å™¨distanceFilterä¸º1000 2.2 é™€èžºä»ª&emsp;&emsp;å¾ˆæ—©ä¹‹å‰åšäº†ä¸€ä¸ªæ‘‡ä¸€æ‘‡çš„æ‘‡é’±æ ‘åŠŸèƒ½ï¼æ£€æµ‹ç”¨æˆ·æ‘‡æ™ƒå‡ æ¬¡ä¹‹åŽå¯ä»¥æŠ½å¥–ï¼ç»æ²Ÿé€šå·²å–æ¶ˆç›¸å…³åŠŸèƒ½ï¼Œæœ€ä¸»è¦æ˜¯ä¸æ‘‡æ™ƒï¼Œç›´æŽ¥ç‚¹å‡»ä¹Ÿèƒ½æŠ½å¥–â€¦ 2.3 ç½‘ç»œ&emsp;&emsp;é»˜è®¤ç½‘ç»œç¡¬ä»¶ï¼Œæ¯”å¦‚èœ‚çªæ•°æ®å’ŒWi-Fiæ˜¯ä¸é€šç”µçš„ã€‚ä¸ºäº†æ‰§è¡Œç½‘ç»œæ“ä½œï¼Œè¿™äº›èµ„æºå¿…é¡»é€šç”µï¼Œå¹¶æŒç»­ä¸€æ®µæ—¶é—´ä¿æ´»ã€‚é›¶æ•£çš„ç½‘ç»œä¼ è¾“ä¼šå¯¼è‡´å¾ˆé«˜çš„é—´æŽ¥èƒ½è€—ï¼Œè¿…é€Ÿæ¶ˆè€—ç”µæ± ç”µé‡ &emsp;&emsp;æˆ‘ä»¬çš„APPå­˜åœ¨çš„ä¸»è¦é—®é¢˜æ˜¯é¢‘ç¹è¯·æ±‚æŽ¥å£æ•°æ®ã€æ¯æ¬¡è¯·æ±‚æŽ¥å£éƒ½æ£€æµ‹ä¸€ä¸‹ç½‘ç»œçŠ¶æ€ã€ç¼“å­˜åªåœ¨ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶ç”Ÿæ•ˆä»¥åŠæ²¡æœ‰æ–­ç‚¹ç»­ä¼ åŠŸèƒ½ 2.3.1 å‡å°‘è¯·æ±‚é¢‘æ¬¡&emsp;&emsp;ä¸å¾—ä¸åæ§½PMå¯¹å®¢æˆ·ç«¯è¯·æ±‚é¢‘æ¬¡ä¸€ç›´è€¿è€¿äºŽæ€€ï¼Œæ¨ä¸å¾—æ‰€æœ‰æŽ¥å£éƒ½è¦åŠ ä¸ªè½®è®­ï¼Œç”šè‡³è¦æ±‚æ‰“ç‚¹ä¿¡æ¯ä¸€æ¡ä¸€æ¡çš„å‘ï¼Œä»¥å‡å°‘æ¼ç‚¹æƒ…å†µï¼›è¿™ä¹ˆé«˜é¢‘æ¬¡çš„è¯·æ±‚ï¼Œå·²ç»ä¸¥é‡å½±å“åˆ°APPçš„è€—ç”µï¼šè§£å†³æ–¹æ¡ˆä¸»è¦æœ‰ï¼š åœ¨baseåº“ï¼ˆå¯¹NSUrlsessionçš„ç®€å•å°è£…ï¼‰é‡Œå¢žåŠ è¯·æ±‚æ²¡å›žä¹‹å‰æ”¾å¼ƒæœ¬æ¬¡è¯·æ±‚ï¼ˆæ ¹æ®URLåˆ¤æ–­ï¼‰çš„é€»è¾‘ï¼› å¢žåŠ æŽ¥å£è¿”å›žæ•°æ®md5æ ¡éªŒï¼Œå¦‚æžœä¸¤æ¬¡æŽ¥å£è¿”å›žæ•°æ®ç›¸åŒï¼Œåˆ™å»¶é•¿ç›¸åŒæŽ¥å£è¯·æ±‚çš„æ—¶é—´é—´éš”ï¼Œæœ€é•¿ä¸è¶…è¿‡1åˆ†é’Ÿï¼(çŽ°è¢«æ”¾å¼ƒäº†ï¼ŒPMè¿ž1åˆ†é’Ÿéƒ½ä¸èƒ½å¿ï¼è®©PMå‡ºç™½åå•æˆ–æŽ¥å£åˆ†çº§ï¼Œä»–ä»¬ä¹Ÿä¸æƒ³åš) è°ƒæ•´æ‰“ç‚¹ç³»ç»Ÿç­–ç•¥ï¼Œå°†é»˜è®¤å•æ¡æ—¥å¿—å°±postä¸€ä¸‹ + æ— ç½‘å†™å…¥æ–‡ä»¶çš„ç­–ç•¥ï¼Œè°ƒæ•´ä¸ºé»˜è®¤å†™å…¥æ–‡ä»¶åŽ‹ç¼©åŽå‘é€ + å•æ¡æ—¥å¿—å‘é€å¼€å…³æŽ§åˆ¶ 2.3.2 åˆå¹¶è¯·æ±‚&emsp;&emsp;æŠŠæ™®é€šå¹¿å‘Šå¼¹çª—å’Œalertå¹¿å‘Šå¼¹çª—åˆå¹¶ï¼Œè¿™ä¸¤ä¸ªå¼¹çª—å…·æœ‰åŠå…¶ç›¸ä¼¼çš„è¯·æ±‚é¢‘çŽ‡å’Œä¸šåŠ¡é€»è¾‘ï¼Œå®Œå…¨å¯ä»¥åˆå¹¶ï¼ç±»ä¼¼çš„è¿˜æœ‰ä¸€äº›é…ç½®å°æŽ¥å£ä¹Ÿåˆå¹¶æˆå¤§æŽ¥å£ 2.3.3 å‡å°‘ç½‘ç»œç›‘æµ‹&emsp;&emsp;åŽŸæ¥æ¯æ¬¡è¯·æ±‚æŽ¥å£æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨ä¸€ä¸ªç±»ä¼¼Reachabilityçš„è‡ªå·±å†™çš„åº“ï¼Œç”¨äºŽç›‘æµ‹å½“å‰ç½‘ç»œï¼è¿™å®Œå…¨æ˜¯ä¸åˆç†ä¹Ÿä¸å¿…è¦çš„ï¼Œæ”¹ç”¨ç›‘å¬Reachabilityé€šçŸ¥å¹¶è®¾ç½®æ ‡å¿—ä½çš„æ–¹å¼æ¥å‡å°‘ç½‘ç»œçŠ¶æ€æ£€æµ‹ 2.4 IOæ“ä½œ&emsp;&emsp;æˆ‘ä»¬è¿™é«˜é¢‘IOæ“ä½œä¸»è¦é›†ä¸­åœ¨cacheç¼“å­˜ã€é…ç½®æ–‡ä»¶ã€æ—¥å¿—ã€NSUserDefaultsçš„æ»¥ç”¨å’ŒDataæ–¹å¼å–å›¾ç‰‡ 2.4.1 cacheç¼“å­˜ è¯»å†™åœ¨å‡å°‘ç½‘ç»œè¯·æ±‚é¢‘æ¬¡æ—¶å·²ç»å¾—åˆ°äº†å¾ˆå¥½çš„è§£å†³ï¼Œä½†è¿˜æœ‰ä¼˜åŒ–ç©ºé—´ï¼åŽŸæ¥æˆ‘ä»¬é‡‡ç”¨çš„æ˜¯YYCacheï¼Œä½†YYCacheå¯èƒ½èŽ«åå…¶å¦™çš„ç¼“å­˜å°±æ¸…æŽ‰äº†ï¼Œæˆ‘ä»¬æ€€ç–‘æ˜¯sqliteæ²¡æœ‰æ­£å¸¸å…³é—­é€ æˆçš„ï¼Œä½†æˆ‘ä»¬æ²¡æœ‰è¯æ®ï¼Œå› ä¸ºæ— è®ºæ˜¯æ–­ç‚¹è¿˜æ˜¯æ‰“logéƒ½æ²¡æŠ“åˆ°â€çŽ°åœºâ€œï¼Œæ— å¥ˆä¹‹ä¸‹åªèƒ½å°†ä¸€å°éƒ¨åˆ†æ ¸å¿ƒç¼“å­˜æ”¹æˆæ‰‹åŠ¨å­˜å‚¨ï¼Œä½†ç”±äºŽå½“æ—¶åªæ˜¯ä½œä¸ºä¸´æ—¶æ–¹ï¼šæ¡ˆæ¯æ¬¡æŽ¥å£è¿”å›žéƒ½ç›´æŽ¥æ›´æ–°æœ¬åœ°ç¼“å­˜ï¼Œæ¸æ¸çš„å˜æˆäº†æ°¸ä¹…æ–¹æ¡ˆã€‚å› åªæ˜¯éƒ¨åˆ†æ ¸å¿ƒæ•°æ®ï¼Œæ•°æ®é‡ä»¥åŠæ¶‰åŠé¢è¾ƒå°ï¼Œæ­¤æ¬¡æ–¹æ¡ˆä¸ºï¼šå†…å­˜ä¿å­˜å½“é€€å‡ºæˆ–å†…å­˜è­¦å‘Šæ—¶å†å†™å…¥ç¡¬ç›˜ 2.4.2 é…ç½®æ–‡ä»¶é—®é¢˜ã€‚&emsp;&emsp;é¦–å…ˆç»Ÿè®¡è¯»å†™é…ç½®æ–‡ä»¶çš„é¢‘æ¬¡å°†é«˜é¢‘çš„ç­›é€‰å‡ºæ¥ï¼Œç„¶åŽæ ¹æ®é…ç½®æ–‡ä»¶çš„æ ‡ç­¾ï¼šåªè¯»æˆ–è¯»å†™ï¼Œè¿›ä¸€æ­¥ç»†åˆ†ã€‚ é«˜é¢‘åªè¯»æ–‡ä»¶æ¯”è¾ƒç®€å•ï¼šå†…å­˜ä¿å­˜ã€æ”¶åˆ°å†…å­˜è­¦å‘Šå†æ¸…é™¤å†…å­˜ï¼› é«˜é¢‘è¯»å†™é…ç½®æ–‡ä»¶è¿˜è¦ç»†åˆ†ï¼Œ å¯¹äºŽè¯»å°‘å†™å¤šçš„æ–‡ä»¶ï¼šå†…å­˜å¤„ç†ã€é›†ä¸­ä¿å­˜ï¼› å¯¹äºŽè¯»å¤šå†™å°‘çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬æ²¡æœ‰å¤„ç†! 2.4.3 æ‰“ç‚¹æ—¥å¿—&emsp;&emsp;æµç¨‹ï¼šopen file -&gt; å†™å…¥æ—¥å¿— -&gt; &gt;50æ¡ -&gt; å…³é—­æ–‡ä»¶ -&gt; å–å‡ºæ–‡ä»¶Data -&gt; zip -&gt; å–å‡ºzipæ–‡ä»¶Data -&gt; aseåŠ å¯† -&gt; å­˜å‚¨ã€‚é€šè¿‡æµç¨‹æˆ‘ä»¬å¯ä»¥å‘çŽ°ï¼š 1ã€æ—¥å¿—æ–‡ä»¶å¯ä»¥ä¸åˆ›å»ºï¼Œç›´æŽ¥ä½¿ç”¨å†…å­˜è®°å½•ï¼Œè½¬Dataç›´æŽ¥å¡žåˆ°zipé‡Œå³å¯ 2ã€åŽ‹ç¼©åŽçš„æ–‡ä»¶åŠ å¯†ç§»è‡³ä½Žçº§çº¿ç¨‹é›†ä¸­å•ç‹¬å¤„ç†ï¼ˆè¿™é‡ŒåŽŸæ¥æœ‰ä¸ªå¤§bugï¼šç«Ÿç„¶æ¯å†™ä¸€æ¡æ—¥å¿—å°±æ£€æŸ¥ä¸€ä¸‹å½“å‰æ–‡ä»¶å¤¹é‡Œæ˜¯å¦æœ‰æœªåŽ‹ç¼©çš„æ–‡ä»¶ï¼Œå¦‚æžœæœ‰å°±åŽ‹ç¼©ï¼ŒåŽ‹ç¼©æ˜¯å¦åŠ å¯†ï¼Œæ²¡åŠ å¯†å°±åŠ å¯†ï¼‰ 2.4.4 NSUserDefaultsçš„æ»¥ç”¨&emsp;&emsp;ä¸»è¦ä½“çŽ°åœ¨æ»¥ç”¨synchronizeï¼Œè¿™ä¸ªæ²¡å•¥å¯è¯´çš„ï¼NSUserDefaultçš„æ•°æ®ä¸å¤ªæ•¢åŠ¨ï¼Œåªèƒ½åœ¨synchronizeä¸Šåšåšæ–‡ç« äº† 2.4.5 Dataæ–¹å¼å–å›¾ç‰‡&emsp;&emsp;æ¯”è¾ƒè¯•ç”¨çš„æ˜¯å•ç‹¬ç”¨ä¸€æ¬¡çš„å¤§å›¾ç‰‡ï¼å¯¹äºŽé¢‘ç¹å®žç”¨çš„å°å›¾è¿˜æ˜¯ç”¨imageNamedæ¯”è¾ƒå¥½ï¼Œä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯å¦‚æžœéœ€è¦å¼‚æ­¥è¯»å–å›¾ç‰‡å¿…é¡»ç”¨Dataæ–¹å¼ 2.5 å®šæ—¶å™¨&emsp;&emsp;å®šæ—¶å™¨ä¹Ÿæ˜¯è€—ç”µå¤§æˆ·ï¼Œæˆ‘ä»¬å®šæ—¶å™¨é—®é¢˜ä¸»è¦æ˜¯è½®æ’­ç»„ä»¶ä»¥åŠè½®è®­ è½®æ’­ç»„ä»¶ï¼šæ£€æµ‹å½“å‰Cellæ˜¯å¦åœ¨å±å¹•ä¸Šï¼Œå¦‚æžœæ²¡åœ¨å±å¹•åœæ­¢è½®æ’­ï¼Œåˆ‡æ¢å›žå±å¹•å†é‡æ–°å¯åŠ¨ è½®è®­ï¼šåˆå¹¶è½®è®­å®šæ—¶å™¨ï¼Œå‡å°‘å®šæ—¶å™¨æ•°é‡ 2.6 è§†å›¾&emsp;&emsp;å…¶å®žç»å¤§å¤šæ•°è§†å›¾é—®é¢˜éƒ½å’Œæµç•…åº¦ã€å¡é¡¿ç›¸å…³ï¼ä»¥åŽå¯ä»¥ä¸“é—¨å†™ä¸ªå¡é¡¿çš„æ°´æ–‡ï¼Œè¿™é‡Œå°±è¯´è·Ÿè€—ç”µé‡ç›¸å…³çš„é—®é¢˜ï¼ 1ã€ä½¿ç”¨å±€éƒ¨åˆ·æ–°ã€é¿å…é¢‘ç¹åˆ·æ–°ï¼ 2ã€å‡å°‘å›¾ç‰‡æ‹‰ä¼¸ 3ã€å‡å°‘åŠ¨ç”» 4ã€å¸ƒå±€æ—¶å‡å°‘æµ®ç‚¹æ•°çš„è®¡ç®— 3 ä½Žç”µé‡æ¨¡å¼&emsp;&emsp;iOS9ä¹‹åŽï¼ŒiPhoneå¢žåŠ äº†ä½Žç”µé‡æ¨¡å¼ï¼Œç”¨æˆ·å¦‚æžœå¸Œæœ›å»¶é•¿iPhoneç”µæ± çš„å¯¿å‘½ï¼Œå¯ä»¥åœ¨è®¾ç½® &gt; ç”µæ± ä¸­å¼€å¯è¯¥åŠŸèƒ½ã€‚å¼€å¯è¯¥åŠŸèƒ½ä¹‹åŽiOSä¼šé‡‡å–ä¸€äº›æŽªæ–½ï¼Œæ¯”å¦‚ï¼š é™ä½ŽCPUå’ŒGPUæ€§èƒ½ æš‚åœéšæ„çš„å’ŒåŽå°çš„æ´»åŠ¨ï¼ŒåŒ…æ‹¬ç½‘ç»œ é™ä½Žå±å¹•äº®åº¦ ç¼©çŸ­è‡ªåŠ¨é”å±æ—¶é—´ å…³é—­é‚®ä»¶åˆ·æ–° å…³é—­è§†è§’ç¼©æ”¾ å…³é—­åŠ¨æ€å£çº¸ &emsp;&emsp;å¯ä»¥é€šè¿‡å‘NSNotificationCenteræ³¨å†ŒNSProcessInfoPowerStateDidChangeNotificationé€šçŸ¥ç›‘å¬ä½Žç”µé‡æ¨¡å¼çŠ¶æ€ã€‚æˆ‘ä»¬APPåœ¨æŽ¥æ”¶åˆ°ä½Žç”µé‡é€šçŸ¥æ—¶å°±å¹²äº†ä¸€ä»¶äº‹ï¼šæŠŠå†…å­˜æ•°æ®å­˜å‚¨åˆ°æœ¬åœ° 4 ç›‘æŽ§&emsp;&emsp;ç›‘æŽ§ç”µæ± çš„çŠ¶æ€æœ‰åŠ©äºŽæˆ‘ä»¬åœ¨ä¸åŒç”µæ± çŠ¶æ€ä¸‹åšæ›´å¤šçš„æ“ä½œï¼æ®é—»Uberå°±æ˜¯æ£€æµ‹åˆ°ç”µæ± ç”µé‡æ¯”è¾ƒä½Žæ—¶æé«˜è¿å•ä»·æ ¼ï¼Œå› ä¸ºæ‰‹æœºå¿«æ²¡ç”µçš„è¿˜åœ¨å«è½¦ï¼Œé‚£æ‰å«çœŸçš„åˆšéœ€å‘€ï¼å…¶å®žç›‘æŽ§ç”µæ± çŠ¶æ€å¯¹äºŽæˆ‘ä»¬è€Œè¨€åªæœ‰ä¸¤ä¸ªä½œç”¨ï¼š1ã€ä¸Šæ–‡æåˆ°ä½Žç”µé‡å­˜æœ¬åœ°ç­–ç•¥ï¼›2ã€ç”Ÿäº§å’ŒPMæ’•é€¼çš„è¯æ®ï¼šåˆ«è€æ²¡äº‹å°±è¯´æˆ‘ä»¬APPè€—ç”µï¼Œä¸‹è½½ç”µå½±ç”µè§†å‰§çš„è€—ç”µå¯ä¸èƒ½ç®—åœ¨æˆ‘ä»¬å¤´ä¸Š 4.1 æ–¹æ¡ˆ&emsp;&emsp;æˆ‘ä»¬é‡‡ç”¨çš„æ˜¯UIDeviceç±»batteryLevelæŽ¥å£ï¼Œè™½ç„¶é‡‡æ ·åªèƒ½ç²¾ç¡®åˆ° 1%ï¼Œä½†å·²ç»è¶³å¤Ÿæ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼123456789101112131415161718192021222324252627282930313233343536373839404142434445464748#pragma mark ç”µæ± // ç”µæ± ç”µé‡ï¼Œios8å‰åªèƒ½ç²¾ç¡®åŠ¨5%ï¼Œä»¥åŽå¯ç²¾ç¡®åˆ°1%+ (float)batteryLevel &#123;UIDevice *device = [UIDevice currentDevice];device.batteryMonitoringEnabled = YES;if (device.batteryLevel &gt; 0.0f) &#123;return device.batteryLevel * 100 ;&#125;return -1;&#125;// ç”µæ± çŠ¶æ€ï¼šå……ç”µä¸­ã€æ»¡ç”µç­‰+ (UIDeviceBatteryState)batteryState &#123;UIDevice *device = [UIDevice currentDevice];device.batteryMonitoringEnabled = YES;return device.batteryState;&#125;// ç”µæ± æ˜¯å¦åœ¨å……ç”µ+ (BOOL)isBatteryCharing &#123;UIDeviceBatteryState state = [[self class] batteryState];if (state == UIDeviceBatteryStateCharging) &#123;return YES;&#125;return NO;&#125;// ç”µæ± æ˜¯å¦æ»¡ç”µ+ (BOOL)isBatteryFull &#123;UIDeviceBatteryState state = [[self class] batteryState];if (state == UIDeviceBatteryStateFull) &#123;return YES;&#125;return NO;&#125;// å½“å‰ç”µé‡æ˜¯å¦å¤§äºŽç»™å®šé˜€å€¼ï¼Œè€—ç”µé‡ä¼˜åŒ–æ—¶å¯ç”¨+ (BOOL)shouldProceedWithMinLevel:(NSUInteger)minLevel &#123;// å……ç”µæˆ–æ»¡ç”µif ([[self class] isBatteryCharing] || [[self class] isBatteryFull]) &#123;return YES;&#125;NSUInteger batteryLevel = (NSUInteger)[[self class] batteryLevel];if (batteryLevel &gt;= minLevel) &#123;return YES;&#125;return NO;&#125; å‚è€ƒ https://www.jianshu.com/p/9a5e94e7b7c3 https://developer.apple.com/library/archive/documentation/Performance/Conceptual/EnergyGuide-iOS/]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>æ€§èƒ½</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å®‰è£…åŒ…ç˜¦èº«]]></title>
    <url>%2F2018%2F03%2F25%2F%E5%AE%89%E8%A3%85%E5%8C%85%E7%98%A6%E8%BA%AB%2F</url>
    <content type="text"><![CDATA[1ã€ç¼–è¯‘é€‰é¡¹ å‚è€ƒï¼šhttps://www.jianshu.com/p/11710e7ab661 æˆ– https://stackoverflow.com/questions/17650138/ios-ipa-file-size-xcode-archive-vs-xcodebuild-command 1ï¼ŒåšSDKæœ€å¥½è®¾ç½®Generate Debug Symbolsä¸ºNOï¼Œé˜²æ­¢æ³„éœ²æºä»£ç ï¼Œä½†APPæœ€å¥½è®¾ç½®Generate Debug Symbolsä¸ºYES,å› ä¸ºéœ€è¦dysmæ–‡ä»¶ 2ï¼Œxcode-archiveæ‰“åŒ…ï¼Œxcodeä¼šé»˜è®¤æŠŠDeployment Postprocessingè®¾ä¸ºYESï¼Œä½†xcodebuild-commandä¸ä¼š 2ã€èµ„æºç˜¦èº«2.1 åŽ‹ç¼©å›¾ç‰‡ PNGåŽ‹ç¼©å‚è€ƒï¼š https://tinypng.com/ æš‚ä¸è€ƒè™‘webPæ ¼å¼ï¼ŒiOSä½¿ç”¨webpéœ€å¼•å…¥WebP-iOS-example , å®‰å“æœ‰webPç˜¦èº«è®¡åˆ’ï¼Œå¯ç­‰ä»–ä»¬ä¸€èµ·åš &emsp;&emsp;å…¶å®ƒå›¾ç‰‡åŽ‹ç¼©å·¥å…· 1ã€pngquant å®˜ç½‘ github 2ã€IconFontæŠ€æœ¯ï¼šç”¨å­—ä½“æ˜¾ç¤ºå›¾æ ‡æ¥å‡å°åŒ…ä½“ç§¯ï¼Œå‚è€ƒ,ä¾‹RNçš„ä½¿ç”¨ 12345678910111213function test()&#123;NSURL *fontUrl = [NSURL fileURLWithPath:path];if (!fontUrl) return nil;if (![[NSFileManager defaultManager] fileExistsAtPath:path]) return nil;CGDataProviderRef fontDataProvider = CGDataProviderCreateWithURL((__bridge CFURLRef)fontUrl);CGFontRef fontRef = CGFontCreateWithDataProvider(fontDataProvider);CGDataProviderRelease(fontDataProvider);CTFontManagerUnregisterGraphicsFont(fontRef, NULL);CTFontManagerRegisterGraphicsFont(fontRef, NULL);NSString *fontName = CFBridgingRelease(CGFontCopyPostScriptName(fontRef));CGFontRelease(fontRef);return fontName;&#125; 3ã€pngcrush ä¸€æ¬¾å¼€æºçš„pngåŽ‹ç¼©å·¥å…·ï¼ŒXcodeè‡ªå¸¦pngcrushï¼Œé»˜è®¤ç›®å½•ä¸º/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/pngcrush ï¼Œå‚è€ƒ 12345678910pngcrushä½¿ç”¨å‘½ä»¤ä¸ºï¼špngcrush [options] infile.png outfile.pngå…¶ä¸­ï¼šinfile.pngï¼šè¾“å…¥çš„åŽŸå§‹å›¾ç‰‡ï¼›outfile.pngï¼šåŽ‹ç¼©åŽçš„è¾“å‡ºå›¾ç‰‡ï¼›[options]ï¼šå‚æ•°ï¼Œæ”¯æŒå¦‚ä¸‹è®¾ç½®-rem allb ï¼šç§»é™¤æ‰€æœ‰å¤šä½™çš„æ•°æ®ï¼›-brute ï¼šå°†å°è¯•æ‰€æœ‰å¯èƒ½çš„ä¼˜åŒ–æ–¹æ³•ï¼›-reduce ï¼šåˆ é™¤æ— ç”¨é¢œè‰²åŠå‡å°‘è¡¨ç¤ºé¢œè‰²çš„ä½å¤§å°ï¼›å›¾ç‰‡çš„æœ€å¤§åŽ‹ç¼©æ–¹å¼ä¸ºï¼špngcrush -rem allb -brute -reduce original.png optimized.png 2.2 ä½¿ç”¨Asset Catalogç®¡ç†å›¾ç‰‡ ä½¿ç”¨æ–¹æ³•: https://blog.csdn.net/lihuiqwertyuiop/article/details/51286219 ç‰¹æ®Šè¯´æ˜Žï¼šåªæœ‰ä½¿ç”¨äº†imageNamedï¼šæ–¹å¼åŠ è½½çš„å›¾ç‰‡æ‰èƒ½ä½¿ç”¨Asset catalogç®¡ç†ï¼Œå…¶ä»–å½¢å¼åŠ è½½çš„å›¾ç‰‡ä¾ç„¶ä½¿ç”¨bundleç®¡ç†ã€‚ Asset Catalogä¸­å›¾ç‰‡éœ€è¦ä¾›2Xå’Œ3Xä¸¤ç§å°ºå¯¸å›¾ç‰‡ï¼Œå‘å¸ƒåŒ…å¯æ ¹æ®å‘å¸ƒçš„æœºåž‹è¿›è¡Œå›¾ç‰‡èµ„æºçš„è£å‰ªï¼Œè‹¥ä»…æä¾›æŸä¸€å°ºå¯¸å›¾ç‰‡æ—¶ï¼Œè¡¨çŽ°å¦‚ä¸‹ï¼š 1ã€è‹¥ä»…æä¾›1xå›¾ï¼Œå‡è®¾å›¾ç‰‡100100 pxï¼Œ2xã€3xæœºåž‹ä¸Šéƒ½å¯ä»¥è¯»å–å›¾ç‰‡ï¼Œå›¾ç‰‡å°ºå¯¸å‡ä¸º100100 ptï¼ŒæŽ¨èè®¾å¤‡æ— å…³çš„å›¾ç‰‡ä½¿ç”¨è¯¥å°ºå¯¸ï¼› 2ã€è‹¥ä»…æä¾›2xå›¾ï¼Œå‡è®¾å›¾ç‰‡100100 pxï¼Œ2xã€3xæœºåž‹ä¸Šéƒ½å¯ä»¥è¯»å–å›¾ç‰‡ï¼Œå›¾ç‰‡å°ºå¯¸å‡ä¸º5050 ptï¼Œè¯¥æ–¹å¼ä¼šé€ æˆ3xè®¾å¤‡å›¾ç‰‡æ¸…æ™°åº¦é™ä½Žï¼ŒæŽ¨èåˆ†åˆ«æä¾›2xã€3xå›¾ç‰‡ï¼› 3ã€è‹¥ä»…æä¾›3xå›¾ï¼Œå‡è®¾å›¾ç‰‡150150 pxï¼Œ2xã€3xæœºåž‹ä¸Šéƒ½å¯ä»¥è¯»å–å›¾ç‰‡ï¼Œå›¾ç‰‡å°ºå¯¸å‡ä¸º5050 ptï¼Œè¯¥æ–¹å¼ä¼šé€ æˆ2xè®¾å¤‡å›¾ç‰‡èµ„æºä½“ç§¯æµªè´¹ï¼ŒæŽ¨èåˆ†åˆ«æä¾›2xã€3xå›¾ç‰‡ï¼› Xcode Help - WORK WITH ASSETS Analysing Assets.car file in iOS 2.3 éŸ³è§†é¢‘åŽ‹ç¼©2.4 æ¸…ç†é‡å¤èµ„æºæˆ–æ–‡ä»¶ å…ˆä¸‹è½½æœ€æ–°ç‰ˆçš„fudpeså¹¶è§£åŽ‹ï¼Œhttps://github.com/adrianlopezroche/fdupes è¿›å…¥è§£åŽ‹åŽç›®å½•ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å®‰è£…fdupesï¼š123make fdupessu rootmake install 2.5 æ— ç”¨çš„ç±» fui PS:éœ€è¦æ‰‹åŠ¨æ£€æŸ¥å¹¶åˆ é™¤ï¼Œæ³¨æ„æœ‰äº›ç±»ä»¥å‰åˆ é™¤æ—¶åªåˆ é™¤äº†å¼•ç”¨ 2.6 åˆ é™¤æ— ç”¨çš„å›¾ç‰‡ LSUnusedResources PSï¼šéœ€è¦æ‰‹åŠ¨æ£€æŸ¥å¹¶åˆ é™¤ 3ã€ä»£ç ç˜¦èº«3.1 é™æ€åº“ç˜¦èº« xcodeé»˜è®¤æ”¯æŒï¼Œæ— é¡»æ‰‹åŠ¨å¤„ç† 123456789xcodeçš„Architectures settingé»˜è®¤æ”¯æŒarmv7ï¼ˆå¦‚æžœä»¥åŽä¸æ”¯æŒ4å’Œ4sæœºåž‹ï¼Œå¯è€ƒè™‘ç§»é™¤armv7æž¶æž„æ”¯æŒï¼Œå‡å°‘ipaä½“ç§¯è¾¾8Må¤šï¼‰ã€armv7så’Œarm64æž¶æž„ï¼Œreleaseæ‰“åŒ…æ—¶xcodeå°†é»˜è®¤å‰”é™¤i386å’Œx86_64ç­‰æ¨¡æ‹Ÿå™¨æž¶æž„ï¼Œæ— é¡»æ‰‹åŠ¨å¤„ç†ï¼releaseæ‰“åŒ…é»˜è®¤å‰”é™¤i386å’Œx86_64ï¼Œæž„éªŒè¯å¦‚ä¸‹ï¼šéªŒè¯å·¥å…·ï¼šlipo ä½¿ç”¨æ–¹æ³•https://blog.csdn.net/yepiaouang/article/details/79353377Aã€libZXingObjC-iOS.a ï¼Œå¤§å°ä¸º20.2Mï¼Œ é»˜è®¤æ”¯æŒæž¶æž„å¦‚ä¸‹é»˜è®¤æ‰“åŒ…åŽipaå¤§å°ä¸º34.9MBã€libZXingObjC-iOS.a ç»è¿‡lipoåŽ»é™¤i386å’Œx86_64æž¶æž„æ”¯æŒåŽï¼Œä¸º10.4Mï¼Œæ”¯æŒæž¶æž„å¦‚ä¸‹æ‰“åŒ…åŽå¤§å°ä¹Ÿä¸º34.9Må³è¯æ˜Žè®¾ç½®xcodeçš„Architectures settingåŽæ‰“åŒ…xcodeä¼šå‰”é™¤i386å’Œx86_64ç­‰æ¨¡æ‹Ÿå™¨æž¶æž„ï¼Œæ— é¡»æ‰‹åŠ¨å¤„ç†ï¼ å…³äºŽXcode â€œBuild Settingâ€ä¸­çš„Architecturesè¯¦è§£ 3.2 æ— ç”¨çš„æ–¹æ³• å¯ç”¨APPCode(æ”¶è´¹) æˆ– MCheckProject ç”±äºŽOCçš„åŠ¨æ€æ€§ï¼Œè¿˜æ˜¯æ…Žç”¨ï¼å¯ä½œä¸ºé‡æž„å‚è€ƒ 3.3 æŸ¥æ‰¾ç›¸ä¼¼ä»£ç å¹¶å°è£…4 ç›‘æŽ§&emsp;&emsp;ä¸»è¦é€šè¿‡è‡ªåŠ¨æ‰“åŒ…å¹³å°æ¯æ¬¡æ‰“åŒ…æ—¶ç»Ÿè®¡åŒ…å¤§å°ï¼Œé’ˆå¯¹çªç„¶å¢žåŠ çš„æƒ…å†µç»™å®¢æˆ·ç«¯ç»„å‘é‚®ä»¶ï¼æœ‰ä¸€å®šçš„å‚è€ƒæ„ä¹‰ï¼Œä½†æ„ä¹‰ä¸å¤§ï¼å› ä¸ºç»å¸¸å› ä¸ºåˆ†æ”¯åˆå…¥è€Œè¯¯æŠ¥ï¼ å…¶å®ƒå‚è€ƒ iOSå¯æ‰§è¡Œæ–‡ä»¶ç˜¦èº«æ–¹æ³• å¹²è´§ä¸å¤š iOSå¾®ä¿¡å®‰è£…åŒ…ç˜¦èº« ,èŽ·å–linkmapæ–‡ä»¶ 1ï¼Œç´¯åŠ æ¯ä¸ªobjæ–‡ä»¶è®¡ç®—å¤§å°ï¼› 2ï¼Œé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼([+|-][.+\s(.+)])è¿‡æ»¤LinkMapæ–‡ä»¶çš„TEXT.textæå–æ‰€æœ‰çš„æ–¹æ³•SelectorsAllï¼Œå†ä½¿ç”¨otoolå‘½ä»¤otool -v -s DATA objc_selrefsé€†å‘DATA.objc_selrefsæ®µæå–ä½¿ç”¨åˆ°çš„æ–¹æ³•ï¼ˆUsedSelectorsAllï¼‰ï¼Œæ¥è®¡ç®—æ²¡ç”¨åˆ°çš„æ–¹æ³•ï¼ˆSelectorsAll-UsedSelectorsAllï¼‰ï¼Œä½†æ³¨æ„ï¼Œç³»ç»ŸAPIçš„Protocolå¯èƒ½è¢«åˆ—å…¥æ— ç”¨æ–¹æ³•åå•é‡Œï¼› 3ï¼Œé€šè¿‡otoolå‘½ä»¤é€†å‘DATA.objc_classlistæ®µå’ŒDATA.objc_classrefsæ®µæ¥èŽ·å–å½“å‰æ‰€æœ‰ocç±»å’Œè¢«å¼•ç”¨çš„ocç±»ï¼Œä¸¤ä¸ªé›†åˆç›¸å‡å°±æ˜¯æ— ç”¨ocç±»ï¼Œä½†æ— æ³•åˆ¤æ–­æ˜¯å¦è¢«ä½¿ç”¨ iOS APPå®‰è£…åŒ…ç˜¦èº«å®žè·µ å¹²è´§ä¸å¤šï¼ŒåŸºç¡€å»ºè®® Reducing the size of my App å®˜æ–¹æ–‡æ¡£ï¼Œå¹²è´§ä¸å¤š åŸºäºŽclangæ’ä»¶çš„ä¸€ç§iOSåŒ…å¤§å°ç˜¦èº«æ–¹æ¡ˆ æ€Žä¹ˆé€šè¿‡clangè¿™ç§é™æ€åˆ†æžåŽ»æŸ¥æ‰¾æ— ç”¨çš„ç±»å’Œæ–¹æ³•]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>æ€§èƒ½</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç”Ÿå‘½ä¹‹ä¹¦365å¤©çš„é™å¿ƒå†¥æƒ³]]></title>
    <url>%2F2018%2F02%2F17%2F%E7%94%9F%E5%91%BD%E4%B9%8B%E4%B9%A6365%E5%A4%A9%E7%9A%84%E9%9D%99%E5%BF%83%E5%86%A5%E6%83%B3%2F</url>
    <content type="text"><![CDATA[å…¶å®žå°±æ˜¯æ— æ¬²åˆ™åˆšï¼Œå­¦ä¼šæ·¡å®šä¸Žä»Žå®¹ï¼æƒ³è¦èŽ·å¾—å†…å¿ƒå¹³é™ï¼Œå°±è¦æ­£è§†è‡ªå·±æ‰€æœ‰çš„ä¸€åˆ‡ï¼Œæ—¢ä¸å¦è®¤ã€ä¸è‚¯å®šæ›´ä¸è§£é‡Šã€‚ è†å¬éœ€è¦å¿ƒæ— æ‚å¿µï¼Œä¸è¦ä»¥å·±åº¦äººï¼Œæ›´ä¸è¦æ­¦æ–­çŒœç–‘ï¼åªæ˜¯é™å¿ƒåŽ»å¬ï¼Œå¬å®Œä¹‹åŽè‡ªç„¶ä¼šæœ‰ç›¸åº”çš„ç»“è®ºï¼ é™å¿ƒï¼Œéœ€é™åï¼ å·±æ‰€ä¸æ¬²å‹¿æ–½äºŽäººï¼Œå·±æ‰€æ¬²äº¦å‹¿æ–½äºŽäºº å€¾å¬éœ€è¦æ”¾æ¾è‡ªå·±ï¼Œè€Œä¸æ˜¯åŽ‹æŠ‘è‡ªå·±ï¼ä¸èƒ½åšè¿™ä¸ªï¼Œå¿…é¡»åšé‚£ä¸ªï¼Œå½“è¿™ä¸ªå¿ƒæ€æ—¶ï¼Œä¹Ÿè®¸å¹¶ä¸æ˜¯å€¾å¬çš„å¥½æ—¶æœºï¼ å¯»æ‰¾è‡ªå·±ï¼Œäº†è§£è‡ªå·±ï¼ŒæŽ¥çº³è‡ªå·±ï¼Œé¡ºåŠ¿è€Œä¸ºï¼Œç‚¹æ»´æ”¹å˜è‡ªå·±ï¼åˆ‡å‹¿å¥½é«˜éª›è¿œï¼Œæ›´å‹¿è‡ªæˆ‘æ”¾å¼ƒï¼ ä¹è¶£ï¼ŸçŽ°å®žå°±æ˜¯æœ‰å¯ä¸ºæœ‰ä¸å¯ä¸ºï¼Œå¦ç„¶å¤„ä¹‹ï¼Œæ‘’å¼ƒæ‚å¿µï¼Œå­¦ä¼šæŽ¥å—ï¼Œä½†ä¸ç›²ä»Žï¼Œå‘çŽ°ä¹è¶£ï¼æˆ‘å‘½ç”±æˆ‘ä¸ç”±å¤©ï¼Œå°±æ˜¯å¦‚æ­¤å§ ä¸è¦è®©è¿‡åŽ»çš„çŸ¥è¯†ç»éªŒæˆä¸ºå‰è¿›çš„é˜»ç¢ï¼Œæ¯æ—¥ä¸‰çœå¾èº«ï¼ŒåŽŸæ¥æ˜¯è¿™ä¸ªæ„æ€ å¿ƒè‹¥èƒ½å®Œæ•´çš„è§‰çŸ¥ï¼Œä¿æŒè­¦é†’å’Œè­¦è§‰ã€‚æ‰‹æ®µæ˜¯å·¥å…· åªæœ‰å½“å¿ƒå®Œå…¨çš„å¯‚é™æ—¶ï¼Œæ‰æœ‰å¯èƒ½è¶…è¶Šæ‰€æœ‰çš„ç»éªŒï¼ä¸è¦ä¸ºäº†åˆ›é€ è€Œåˆ›é€ ï¼Œç›®æ ‡å­˜åœ¨çš„æ„ä¹‰æ˜¯æ¿€åŠ±äººä¸æ–­åœ°ä¸€æ­¥ä¸€æ­¥å‰è¡Œï¼Œè€Œä¸æ˜¯æˆ‘è¾¾ä¸åˆ°ç›®æ ‡æˆ‘å°±åŽ»æ­»ï¼ è‡ªæˆ‘ä¸æ˜¯åˆ«äººæˆ–è‡ªå·±æ‰“çš„ä¸€å †æ ‡ç­¾çš„é›†åˆã€‚æ ‡ç­¾æœ¬èº«å°±æ˜¯å¤–åœ¨çš„ï¼Œä¸Žè‡ªæˆ‘æ— å…³ï¼ åªæœ‰å½“æˆ‘ä»¬æƒ³é€ƒé¿äº‹å®žèº²è¿›å¹»æƒ³é‡Œçš„æ—¶å€™ï¼Œæ‰éœ€è¦ä¿¡ä»°ï¼ é¢å¯¹çŽ°å®žå’Œå›°éš¾ï¼Œäººæœ¬èƒ½çš„ä¼šé€‰æ‹©é€ƒé¿ï¼Œå¯»æ±‚ä¾èµ–ï¼æ— åŠ©å’Œå­¤ç‹¬æ˜¯äººç”Ÿçš„å¿…ä¿®è¯¾ï¼ å›å­æ…Žç‹¬ï¼Œèº«ä½“æˆ–å¿ƒçµæ€»çš„æœ‰ä¸€ä¸ªåœ¨è·¯ä¸Šï¼å¼ºå¤§çš„å†…å¿ƒä»Žç‚¹æ»´é”»ç‚¼èµ·æ¥çš„ï¼ å¯¹å¾…æ¬²æœ›ï¼Œæ—¢ä¸å¦è®¤ä¹Ÿä¸æŠ—æ‹’ï¼Œè€Œæ˜¯å­¦ä¼šæŽ¥å—ä¸Žå¿å—]]></content>
      <categories>
        <category>è¯»ä¹¦</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ™¨é—´æ—¥è®°çš„å¥‡è¿¹]]></title>
    <url>%2F2018%2F01%2F31%2F%E6%99%A8%E9%97%B4%E6%97%A5%E8%AE%B0%E7%9A%84%E5%A5%87%E8%BF%B9%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;è¯è¯´å‰äº›å¤©å•ƒå†…æ ¸çŸ¥è¯†å•ƒå¾—å¤´ç–¼ï¼Œä»Šå¤©æ­£å¥½æ¢æ¢è„‘å­ï¼æœ¬æ¥æƒ³çœ‹ä¼šå°è¯´çš„ï¼Œå‘çŽ°è¿™æœ¬ä¹¦ä¹Ÿå°±è·Ÿå°è¯´ä¸€æ ·ï¼Œä¸€ç›®åè¡Œéƒ½å«Œæ…¢çš„é‚£ç§ï¼æ­£å¥½æ”¾æ¾ä¸€ä¸‹è„‘å­ æ—©ä¸Šå†™æ—¥è®°çš„å¥½å¤„ï¼š1ï¼Œå¯åšä¸€å¤©çš„å‡†å¤‡ï¼ˆè®¡åˆ’æ€§ï¼‰ï¼›2ï¼Œå¯ä»¥æ­£ç¡®çš„å†™å‡ºæ˜¨å¤©æ‰€å‘ç”Ÿçš„äº‹æƒ…ï¼ˆæ•ˆçŽ‡æ€§å’Œå¿ å®žæ€§ï¼‰ï¼›3ï¼Œå†·é™æ€è€ƒæ˜¨å¤©çš„äº‹ï¼ˆä¸­ç«‹æ€§ï¼‰ï¼›4ï¼Œæ—©ä¸Šæ¯”è¾ƒè‡ªç”±ï¼ˆæŒç»­æ€§ï¼‰ï¼›5ï¼Œå¯ä»¥å°†è¿‡åŽ»çš„å®è´µç»éªŒåº”ç”¨äºŽå½“å¤©ï¼ˆçµæ´»è¿ç”¨æ€§ï¼‰ ç´¯äº†ä¸€å¤©åˆ°æ™šä¸Šå†™çš„æ—¥è®°å¤§å¤šæƒ…ç»ªæ˜¯è´Ÿé¢çš„ï¼Œæ½¦è‰çš„ï¼Œæ¿€è¿›çš„ï¼Œè€Œåçœæ˜¯ç¼ºä¹ç‹¬ç«‹æ€è€ƒçš„ æ—©ä¸Šå†™æ—¥è®°èƒ½çœŸå®žå®¢è§‚çš„æ­£è§†é—®é¢˜ï¼Œåçœè‡ªå·±ï¼Œå¹¶æ ¹æ®å˜åŒ–åšå‡ºæ›´å¥½çš„æ”¹å–„æ„è§ è¶ç€æ˜¨å¤©çš„è®°å¿†è¿˜åœ¨ï¼Œå¯ä»¥åœ¨æ®µæ—¶é—´å†…ç•™ä¸‹æ­£ç¡®çš„è®°å½•ã€‚ æ³¨æ„å†™æ—¥è®°ä¸æ˜¯å†™æµæ°´è´¦ï¼Œä¹Ÿè¦å†™æƒ…ç»ªï¼Œé—®é¢˜ä¸Žæ–¹æ³•ï¼Œé‡è¦çš„æœ‰è¶£çš„å¥½çŽ©çš„åˆ«äººé‡è¦çš„äº‹ç­‰ç­‰ æ—©ä¸Šæ‡’åºŠå°±æ˜¯å€Ÿå£ã€‚æ—©èµ·æ–¹æ³•å¾ˆå¤šï¼Œæœ€æœ€ä¸»è¦çš„æ˜¯æ¢¦æƒ³ï¼šæˆ‘æƒ³è¿›é˜¿é‡Œï¼ŒåŽ»åšé—²é±¼ æ—©ä¸Šå¥èº«å’Œæ²æµ´è®©ä½ èº«å¿ƒç²¾ç¥žç™¾å€ å†™æ—¥è®°çš„5å¤§å¥½å¤„ï¼š1ï¼Œæå‡å†™ä½œèƒ½åŠ›ï¼›2ï¼Œè°ˆè¯é¢˜ææºæºä¸æ–­ï¼›3ï¼Œæé«˜è´µäººè¿ï¼›4ï¼Œå‘çŽ°è‡ªæˆ‘è‚‰ä½“ä¸Žç²¾ç¥žçš„çŠ¶æ€å’Œæ¨¡å¼ï¼›5ï¼Œåœ¨è‡ªå·±èº«ä¸ŠæŒ–å®ï¼Œå½»åº•æ”¹å˜äººç”Ÿï¼› äººè¿‡äº†30å²ä»¥åŽå‰©ä¸‹çš„åªæœ‰ä¹ æƒ¯ å¹³å¸¸å¿ƒï¼Œä¸éª„ä¸èºä¸æ€¥ä¸æƒ°]]></content>
      <categories>
        <category>è¯»ä¹¦</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå†…æ ¸æŽ¨èåšæ–‡]]></title>
    <url>%2F2018%2F01%2F23%2FiOS%E5%86%85%E6%A0%B8%E6%8E%A8%E8%8D%90%E5%8D%9A%E6%96%87%2F</url>
    <content type="text"><![CDATA[1 Mac OS X å’Œ iOSæž¶æž„ ç”¨æˆ·ä½“éªŒå±‚ï¼šä¸»è¦æœ‰SpringBoardã€Spotlightã€Accessibilityé€‰é¡¹ç­‰ç­‰ åº”ç”¨æ¡†æž¶å±‚ï¼šä¸»è¦æœ‰ Cocoa Touchã€Java æ ¸å¿ƒæ¡†æž¶å±‚ï¼šä¸»è¦æœ‰ OpenGLã€Quartzç­‰å›¾å½¢ã€å¤šåª’ä½“ç»„ä»¶ Darwinï¼šæ“ä½œç³»ç»Ÿæ ¸å¿ƒï¼ŒåŒ…æ‹¬XNUå†…æ ¸(kernel)å’ŒUNIX shell 1.1 iOS å’Œ OS Xçš„ä¸åŒç‚¹ï¼š iOS å†…æ ¸å’ŒäºŒè¿›åˆ¶æ–‡ä»¶ç¼–è¯‘çš„ç›®æ ‡æž¶æž„æ˜¯ARMæž¶æž„ï¼Œ OS XåŸºäºŽIntel i386 å’Œ x86_64ã€‚ iOS çš„å†…æ ¸é—­æºï¼ŒOS Xå†…æ ¸æ˜¯å¼€æºçš„ iOS çš„å†…å­˜ç®¡ç†è¦ç´§å‡‘çš„å¤šã€‚ iOSç³»ç»Ÿä¸æ”¯æŒè™šæ‹Ÿå†…å­˜ï¼ŒOS Xé€šè¿‡å†…å­˜æ˜ å°„èŽ·å¾—é¢å¤–çš„å†…å­˜ï¼Œå‡ ä¹Žæœ‰æ— ç©·çš„äº¤æ¢ç©ºé—´å¯ä»¥ä½¿ç”¨ã€‚ iOS appä¸å…è®¸è®¿é—®åº•å±‚çš„Darwinï¼Œä¹Ÿæ²¡æœ‰rootè®¿é—®æƒé™ï¼Œå¹¶ä¸”åªèƒ½è®¿é—®è‡ªå·±ç›®å½•å†…çš„æ•°æ®ã€‚ 2 Darwinæž¶æž„&emsp;&emsp;ç›—å›¾OS X Darwinï¼ŒiOSå’ŒOS Xçš„Darwinæž¶æž„å·®ä¸å¤šï¼Œæˆ‘è§‰çš„è¿™ä¸ªæ›´æ¸…æ™°æ˜“æ‡‚ä¸€äº› &emsp;&emsp;Darwinçš„å†…æ ¸æ˜¯XNUï¼ŒXNU is Not Unixçš„ç¼©å†™ã€‚XNUæ˜¯ç”±Machå¾®å†…æ ¸å’ŒBSDï¼ˆä¼¯å…‹åˆ©è½¯ä»¶å¥—ä»¶ï¼‰ç»„åˆè€Œæˆã€‚ 2.1 Machå¾®å†…æ ¸&emsp;&emsp;Machæ˜¯ä¸€ä¸ªå¾®å†…æ ¸è½»é‡çº§æ“ä½œç³»ç»Ÿï¼Œä»…å¤„ç†æœ€æ ¸å¿ƒçš„ä»»åŠ¡ï¼Œ è¿›ç¨‹å’Œçº¿ç¨‹ è™šæ‹Ÿå†…å­˜ç®¡ç† ä»»åŠ¡è°ƒåº¦ è¿›ç¨‹é€šä¿¡ 2.2 BSD&emsp;&emsp;BSDå±‚åœ¨Machä¹‹ä¸Šï¼Œæä¾›äº†æ›´é«˜å±‚æ¬¡çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š æ–‡ä»¶ç³»ç»Ÿ ç½‘ç»œï¼ˆç¡¬ä»¶è®¾å¤‡çº§åˆ«é™¤å¤–ï¼‰ UNIXå®‰å…¨æ¨¡åž‹ syscall æ”¯æŒ BSDè¿‡ç¨‹æ¨¡åž‹ï¼ŒåŒ…æ‹¬è¿‡ç¨‹IDå’Œä¿¡å· FreeBSDå†…æ ¸API è®¸å¤šPOSIX API å†…æ ¸æ”¯æŒpthreadsï¼ˆPOSIXçº¿ç¨‹ï¼‰ 2.3 File Systems&emsp;&emsp;iOS çš„æ–‡ä»¶ç³»ç»Ÿå’Œ OS X éžå¸¸ç±»ä¼¼ï¼Œä½†æ˜¯æœ‰ä»¥ä¸‹åŒºåˆ«ï¼š iOSæ–‡ä»¶ç³»ç»Ÿï¼ˆHFSXï¼‰æ˜¯å¤§å°å†™æ•æ„Ÿçš„, OS X çš„ HFS+æ˜¯ä¸æ•æ„Ÿ iOSæ–‡ä»¶ç³»ç»Ÿæ˜¯éƒ¨åˆ†åŠ å¯†çš„ã€‚ æ²¡æœ‰/Users ç›®å½•ï¼Œåªæœ‰ä¸€ä¸ª/User ç›®å½• æ²¡æœ‰/Volumesç›®å½•, æ²¡æœ‰å¿…è¦è¿›è¡Œç£ç›˜ä»²è£ 2.4 I/O Kit&emsp;&emsp;å¼€å‘è€…å¯ä»¥ä½¿ç”¨C ++å¿«é€Ÿåˆ›å»ºè®¾å¤‡é©±åŠ¨ç¨‹åºã€‚ä½†å†…æ ¸æ˜¯Cè¯­è¨€æˆ–æ±‡ç¼–å†™çš„ï¼Œå› æ­¤éœ€è¦libKernåº“æ”¯æŒC ++è¿è¡Œæ—¶å¹¶æä¾›æ‰€éœ€è¦çš„åŸºç±»ã€‚I/O Kitçš„åŠŸèƒ½ï¼š çœŸæ­£çš„å³æ’å³ç”¨ åŠ¨æ€è®¾å¤‡ç®¡ç† åŠ¨æ€ï¼ˆâ€œæŒ‰éœ€â€ï¼‰åŠ è½½é©±åŠ¨ç¨‹åº æ¡Œé¢ç³»ç»Ÿå’Œä¾¿æºå¼è®¾å¤‡çš„ç”µæºç®¡ç† å¤šå¤„ç†å™¨åŠŸèƒ½ 3 ç³»ç»Ÿè°ƒç”¨3.1 POSIXç³»ç»Ÿè°ƒç”¨&emsp;&emsp;POSIX å…¼å®¹æ€§æ˜¯ç”±XNUä¸­BSDå±‚æä¾›çš„ã€‚æ‰€æœ‰çš„POSIX ç³»ç»Ÿè°ƒç”¨ä¸è®ºåº•å±‚å®žçŽ°å¦‚ä½•éƒ½æœ‰ç›¸åŒçš„åŽŸåž‹ï¼Œä¹Ÿå°±æ˜¯è¯´å…·æœ‰ç›¸åŒçš„å‚æ•°å’Œè¿”å›žå€¼ã€‚&emsp;&emsp;ç³»ç»Ÿè°ƒç”¨ç¼–å·ï¼šé™¤äº†å›ºå®šçš„åŽŸåž‹ä¹‹å¤–ï¼ŒPOSIXè¿˜å®Œæ•´å®šä¹‰äº†ç³»ç»Ÿè°ƒç”¨çš„ç¼–å·ã€‚ 3.2 Mach ç³»ç»Ÿè°ƒç”¨&emsp;&emsp;BSDå±‚æ˜¯å¯¹Machå†…æ ¸çš„åŒ…è£…ï¼Œä½†æ˜¯Machç³»ç»Ÿè°ƒç”¨ä»ç„¶å¯ä»¥åœ¨ç”¨æˆ·æ€è®¿é—®ã€‚éœ€è¦å€ŸåŠ©mach trapå®žçŽ°ç”¨æˆ·æ€åˆ°å†…æ ¸æ€çš„è½¬æ¢ã€‚&emsp;&emsp;åœ¨32ä½ç³»ç»Ÿä¸Šï¼ŒMachç³»ç»Ÿè°ƒç”¨çš„ç¼–å·éƒ½ä¸ºè´Ÿæ•°ï¼ŒPOSIXè°ƒç”¨ç¼–å·ä¸ºéžè´Ÿã€‚&emsp;&emsp;åœ¨64ä½ç³»ç»Ÿä¸Šï¼ŒMachç³»ç»Ÿè°ƒç”¨ä¸ºæ­£æ•°ï¼Œä½†æ˜¯ä»¥0x2000000å¼€å¤´ï¼Œè€ŒPOSIXè°ƒç”¨ç¼–å·ä»¥0x1000000å¼€å¤´ã€‚ åšæ–‡æŽ¨èï¼š&emsp;&emsp;æœ€è¿‘åœ¨å•ƒã€Šæ·±å…¥è§£æžMac OS X &amp; iOS æ“ä½œç³»ç»Ÿã€‹å•ƒäº†ä¸€ä¸ªå¤šæ˜ŸæœŸï¼Œæˆ‘è‡ªä»¥ä¸ºæˆ‘çŽ°åœ¨å·²ç»æ¯”ä¸Šå­¦çš„æ—¶å€™å¥½å¤šäº†ï¼Œèƒ½çœ‹ç‚¹ä¹¦äº†ï¼ä½†è¿˜æ˜¯å•ƒä¸åŠ¨äº†ï¼šå¤ªåŽšäº†é€ æˆæˆ‘æ¯”è¾ƒçƒ¦èºã€æ²¡æœ‰è¯•éªŒæœºä¼šã€è¿‡æ—¶ï¼ˆå¸‚é¢ä¸Šå·²ç»ç»ç‰ˆäº†ï¼‰ï¼ç†¬äº†ä¸€ä¸ªå¤šæ˜ŸæœŸå®žåœ¨ç†¬ä¸ä½äº†ï¼ç»™å¤§å®¶æŽ¨èä¸€ä¸ªç³»åˆ—åšå®¢å§ï¼Œåšä¸»åº”è¯¥æ˜¯ä¸Šå­¦æ—¶å•ƒçš„ï¼ˆä¼°è®¡å·¥ä½œä¹Ÿæ²¡æ—¶é—´ï¼‰ï¼šhttps://www.jianshu.com/p/95acba84bfef &emsp;&emsp;å…¶å®žæˆ‘è§‰å¾—å¦‚æžœä¸è€ƒè™‘ç»†å¾®å·®åˆ«ç›´æŽ¥çœ‹OS Xçš„å®˜æ–¹æ–‡æ¡£åè€Œæ˜¯æœ€èˆ’æœçš„ https://developer.apple.com/library/archive/documentation/Darwin/Conceptual/KernelProgramming/About/About.html#//apple_ref/doc/uid/TP30000905-CH204-TPXREF101]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½ çš„ç¯äº®ç€å—]]></title>
    <url>%2F2017%2F12%2F27%2F%E4%BD%A0%E7%9A%84%E7%81%AF%E4%BA%AE%E7%9D%80%E5%90%97%2F</url>
    <content type="text"><![CDATA[é‡åˆ°é—®é¢˜ä¸å¿…ç€æ€¥åŽ»å¯»æ‰¾è§£å†³åŠžæ³•ï¼Œåº”è¯¥å…ˆæ˜Žç¡®é—®é¢˜ è°æœ‰é—®é¢˜ï¼šæˆ‘ä»¬è¦å–æ‚¦äºŽè°ï¼Œåˆ©ç›Šç›¸å…³è€…ï¼ è¦æƒ³çš„å…¨é¢ï¼Œé’ˆå¯¹æ¯ ç§ åˆ©ç›Šç›¸å…³è€…ï¼Œé—®ä¸€ä¸‹é—®é¢˜çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ åŠªåŠ›è®©åˆ«äººæŽ¥å—è§‚ç‚¹ï¼Œæ²¡æœ‰å¯¹é”™ä¹‹åˆ†ï¼Œä¸è¦åé©³ï¼Œä¸è¦äº‰æ‰§ï¼Œä¹Ÿä¸è¦æ”¾å¼ƒï¼Œæœ€å¥½è¯‰è¯¸äºŽåˆ©ç›Šï¼Œå‘Šè¯‰åˆ«äººä»–çš„è§‚ç‚¹æ˜¯å¯ä»¥ä»£æ›¿çš„ï¼ æ¿€åŒ–çŸ›ç›¾ï¼Œæˆ–ä¸ç€æ‰‹å¤„ç†é—®é¢˜ï¼Œå¾ˆå¯èƒ½ä¼šå¸¦æ¥æ–°çš„å¤§é—®é¢˜ï¼Œç”šè‡³å¿˜è®°æœ€å¼€å§‹çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼ï¼ï¼ é—®é¢˜å…¶å®žå°±æ˜¯ä½ æœŸæœ›çš„ä¸œè¥¿å’Œä½ ä½“éªŒçš„ä¸œè¥¿ä¹‹é—´çš„å·®åˆ«ã€‚ä»Žè¿™ä¸ªè§’åº¦çœ‹ï¼Œè¦è§£å†³é—®é¢˜ï¼Œè¦ä¹ˆæ”¹å˜æœŸæœ›ï¼Œè¦ä¹ˆæ”¹å˜ä½“éªŒ å¯¹äºŽé‚£äº›æ²¡æœ‰å¹½é»˜æ„Ÿçš„äººï¼Œå¸®ä»–ä»¬è§£å†³é—®é¢˜ç®€ç›´æ˜¯è‡ªå¯»çƒ¦æ¼ï¼Ÿ ä¸è¦æŠŠä»–ä»¬çš„è§£å†³åŠžæ³•è¯¯è®¤ä¸ºæ˜¯é—®é¢˜çš„å®šä¹‰â€“ç‰¹åˆ«æ˜¯ä½ ä½¿ç”¨è‡ªå·±çš„è§£å†³æ–¹æ¡ˆæ—¶ã€‚ å¦‚æžœä½ å¤ªè½»æ˜“çš„è§£å†³äº†ä»–ä»¬çš„é—®é¢˜ï¼Œä»–ä»¬æ°¸è¿œéƒ½ä¸ä¼šç›¸ä¿¡ä½ çœŸçš„è§£å†³äº†ä»–ä»¬çš„é—®é¢˜ã€‚ å…³äºŽçœŸæ­£è§£å†³é—®é¢˜çš„çœ‹æ³•æ˜¯ï¼šä½ æ°¸è¿œä¸èƒ½è‚¯å®šä½ å·²ç»æŸä¸ªé—®é¢˜æœ‰ä¸€ä¸ªæ­£ç¡®çš„å®šä¹‰ï¼Œå³ä½¿åœ¨è¿™ä¸ªé—®é¢˜å·²ç»è§£å†³ä¹‹åŽã€‚ä½†æ°¸è¿œä¸è¦æ”¾å¼ƒè¿½å¯»æ­£ç¡®å®šä¹‰çš„åŠªåŠ›ï¼ ä¸è¦è¿‡æ—©çš„ä¸‹ç»“è®ºï¼Œä½†æ˜¯ä¹Ÿä¸è¦å¿½ç•¥ä½ çš„ç¬¬ä¸€å°è±¡ã€‚ å¦‚æžœé—®é¢˜æ˜¯é‡è¦çš„ï¼Œé‚£ä¹ˆç­”æ¡ˆä¹Ÿä¸€å®šæ˜¯é‡è¦çš„å—ï¼Ÿä¸ï¼ï¼ï¼ æ¯ç§è§£å†³é—®çš„åŠžæ³•éƒ½ä¼šå¸¦æ¥æ–°çš„é—®é¢˜ã€‚æˆ‘ä»¬æ°¸è¿œä¸å¯èƒ½æ¶ˆç­é—®é¢˜ï¼Œåªèƒ½ä¸é‚£ä¹ˆæ£˜æ‰‹äº† é—®é¢˜æœ€éš¾ä»¥å¤„ç†çš„éƒ¨åˆ†æ°æ°æ˜¯æ„è¯†åˆ°å®ƒä»¬çš„å­˜åœ¨ï¼ å¦‚æžœåœ¨å¯¹é—®é¢˜çš„ç†è§£ä¸­ï¼Œä½ æƒ³ä¸å‡ºè‡³å°‘3ç§å¯èƒ½å‡ºé”™çš„åœ°æ–¹ï¼Œé‚£ä¹ˆä½ å¹¶æ²¡æœ‰çœŸæ­£çš„ç†è§£è¿™ä¸ªé—®é¢˜ï¼ ç”Ÿæ´»ä¸­æœ‰å¾ˆå¤šå¾ˆä¸çˆ½ä½†ä½ å´è‡ªç„¶åŽ»æŽ¥å—çš„åœ°æ–¹ï¼è¿™å°±æ˜¯å¯¹ä¸ç›¸ç§°çš„å¿½è§†ï¼Œå…¶å®žè¿™é‡Œé¢æœ‰å¾ˆå¤šé—®é¢˜ï¼Œéƒ½å¯ä»¥å˜å¾—å¥½ä¸€ç‚¹å’Œæ›´å¥½ä¸€ç‚¹ï¼å¾ˆå¤šä¸œè¥¿éƒ½å¯ä»¥é€šè¿‡ç”¨ä¸€ä¸ªä»Žæ¥æ²¡æœ‰è§è¿‡å®ƒçš„â€œå¤–å›½äººâ€çš„è§‚ç‚¹æ¥â€œçœ‹å¾…â€å®ƒï¼ æ¯ä¸€ç§æ–°çš„è§‚ç‚¹éƒ½ä¼šå¸¦æ¥æ–°çš„ä¸ç›¸ç§°ï¼Œåœ¨å®žçŽ°è¿™äº›â€œè§£å†³åŠžæ³•â€å‰ï¼Œæœ€å¥½å¤šæ€è€ƒä¸€ä¸‹ï¼ æˆ‘ä»¬è¦æ€Žæ ·æ”¹å˜é—®é¢˜çš„è¡¨è¾¾æ–¹å¼æ‰èƒ½èŽ·å¾—ä¸åŒçš„è§£å†³åŠžæ³•ï¼Ÿ åœ¨ç‰¹å®šå±‚é¢ä¸Šè€ƒè™‘é—®é¢˜ã€‚ å½“ä½ åœ¨å¯»æ‰¾é—®é¢˜çš„é“è·¯ä¸Šç–²å€¦çš„æ¸¸è¡æ—¶ï¼Œä¸è¦å¿˜è®°éšæ—¶å›žå¤´çœ‹çœ‹ï¼Œçœ‹çœ‹ä½ æ˜¯ä¸æ˜¯è¿·è·¯äº† è¯•ç€æ¢è¿‡æ¥æŒ‡è´£è‡ªå·±â€“å³ä½¿åªæœ‰ä¸€ç§’é’Ÿ å¦‚æžœç¯äº®ç€ï¼Œä¸€ä¸ªå°å°çš„æé†’ï¼Œå¯èƒ½æ¯”å¤æ‚çš„è§£å†³æ–¹æ¡ˆæ›´æœ‰æ•ˆï¼ é—®é¢˜çš„æ ¹æºä¹Ÿè®¸æ ¹æœ¬å°±ä¸å­˜åœ¨ï¼]]></content>
      <categories>
        <category>è¯»ä¹¦</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç›‘å¬æ–‡ä»¶å¤¹å˜åŒ–]]></title>
    <url>%2F2017%2F12%2F12%2F%E7%9B%91%E5%90%AC%E6%96%87%E4%BB%B6%E5%A4%B9%E5%8F%98%E5%8C%96%2F</url>
    <content type="text"><![CDATA[1 timer+NSFileManager&emsp;&emsp;è¿™æ˜¯æˆ‘æƒ³åˆ°çš„ç¬¬ä¸€ä¸ªæ–¹æ¡ˆï¼Œæ–¹æ¡ˆå¾ˆç®€å•ä½†æ•ˆæžœéžå¸¸ä¸ç†æƒ³ï¼è½®è¯¢æ—¶é—´é•¿äº†ï¼Œå¯èƒ½ä¼šå‡ºçŽ°æ—¶é—´é—´éš”å†…å¤šæ¬¡ä¿®æ”¹é—®é¢˜ï¼›è½®è¯¢æ—¶é—´çŸ­äº†ï¼Œå¤ªè€—è´¹æ€§èƒ½ï¼Œè€Œä¸”â€çŸ­â€œçš„å®šä¹‰æ— æ³•å…·è±¡ã€‚å…·ä½“ä»£ç ä¸è´´äº† 2 GCD source&emsp;&emsp;å¿…é¡»å¾—æ‰¾ä¸€ä¸ªè®©æ–‡ä»¶å¤¹è‡ªå·±è¯´è¯çš„æ–¹æ³•ï¼Œå‡ ç»æ€ç´¢æˆ‘æƒ³åˆ°äº†GCDï¼Œæ¯•ç«ŸGCDå¯ç›‘æŽ§ç«¯å£å•¥çš„ï¼Œæ²¡å‡†ä¹Ÿå¯ä»¥ç›‘å¬æ–‡ä»¶å¤¹ï¼æœåˆ°ä¸€ç¯‡æ–‡ç«  http://ksnowlv.github.io/blog/2014/09/06/gcd-zhi-jian-ting-wen-jian/ , æ ¸å¿ƒæ˜¯åˆ›å»ºè¯»å†™æƒé™çš„sourceé€šçŸ¥ï¼123456789101112131415161718192021222324252627282930313233343536373839404142434445NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);if (paths.count == 0) &#123;return;&#125;NSString *ksnowDir =[[paths objectAtIndex:0] stringByAppendingPathComponent:@&quot;ksnow&quot;];NSLog(@&quot;ksnowdir = %@&quot;, ksnowDir);NSURL *directoryURL = [NSURL URLWithString:ksnowDir];int const fd =open([[directoryURL path] fileSystemRepresentation], O_EVTONLY);if (fd &lt; 0) &#123;NSLog(@&quot;Unable to open the path = %@&quot;, [directoryURL path]);return;&#125;dispatch_source_t source =dispatch_source_create(DISPATCH_SOURCE_TYPE_VNODE, fd,DISPATCH_VNODE_WRITE | DISPATCH_VNODE_RENAME,DISPATCH_TARGET_QUEUE_DEFAULT);dispatch_source_set_event_handler(source, ^() &#123;unsigned long const type = dispatch_source_get_data(source);switch (type) &#123;case DISPATCH_VNODE_WRITE: &#123;NSLog(@&quot;ç›®å½•å†…å®¹æ”¹å˜!!!&quot;);break;&#125;case DISPATCH_VNODE_RENAME: &#123;NSLog(@&quot;ç›®å½•è¢«é‡å‘½å!!!&quot;);break;&#125;default:break;&#125;&#125;);dispatch_source_set_cancel_handler(source, ^() &#123; close(fd); &#125;);self.source = source;dispatch_resume(self.source); 3 å®˜æ–¹&emsp;&emsp;åœ¨æ£€ç´¢çš„æ—¶å€™æ— æ„ä¸­å‘çŽ°å®˜æ–¹å·²ç»ç»™äº†dome ï¼š https://developer.apple.com/library/content/samplecode/DocInteraction/Listings/Classes_DirectoryWatcher_m.html , æºç å¦‚ä¸‹ &emsp;&emsp;æ ¸å¿ƒæ€è·¯æ˜¯ openæ‰“å¼€æ–‡ä»¶å¤¹ï¼Œå¾—åˆ°æ–‡ä»¶å¥æŸ„ã€‚ åˆ›å»ºkqueueé˜Ÿåˆ—æ¥å¤„ç†ç³»ç»Ÿäº‹ä»¶ åˆ›å»ºkeventç»“æž„ä½“ï¼Œè®¾ç½®ç›¸å…³å±žæ€§ï¼Œå¹¶å…³è”kqueueé˜Ÿåˆ—ã€‚ åˆ›å»ºrunloop sourceï¼Œè®¾ç½®å›žè°ƒå‡½æ•°å¹¶åŠ åˆ°é»˜è®¤çš„runloopModeä¸­ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788- (void)kqueueFired&#123;assert(kq &gt;= 0);struct kevent event;struct timespec timeout = &#123;0, 0&#125;;int eventCount;eventCount = kevent(kq, NULL, 0, &amp;event, 1, &amp;timeout);assert((eventCount &gt;= 0) &amp;&amp; (eventCount &lt; 2));// call our delegate of the directory change[delegate directoryDidChange:self];CFFileDescriptorEnableCallBacks(dirKQRef, kCFFileDescriptorReadCallBack);&#125;static void KQCallback(CFFileDescriptorRef kqRef, CFOptionFlags callBackTypes, void *info)&#123;DirectoryWatcher *obj;obj = (__bridge DirectoryWatcher *)info;assert([obj isKindOfClass:[DirectoryWatcher class]]);assert(kqRef == obj-&gt;dirKQRef);assert(callBackTypes == kCFFileDescriptorReadCallBack);[obj kqueueFired];&#125;- (BOOL)startMonitoringDirectory:(NSString *)dirPath&#123;// Double initializing is not going to work...if ((dirKQRef == NULL) &amp;&amp; (dirFD == -1) &amp;&amp; (kq == -1))&#123;// Open the directory we&apos;re going to watchdirFD = open([dirPath fileSystemRepresentation], O_EVTONLY);if (dirFD &gt;= 0)&#123;// Create a kqueue for our event messages...kq = kqueue();if (kq &gt;= 0)&#123;struct kevent eventToAdd;eventToAdd.ident = dirFD;eventToAdd.filter = EVFILT_VNODE;eventToAdd.flags = EV_ADD | EV_CLEAR;eventToAdd.fflags = NOTE_WRITE;eventToAdd.data = 0;eventToAdd.udata = NULL;int errNum = kevent(kq, &amp;eventToAdd, 1, NULL, 0, NULL);if (errNum == 0)&#123;CFFileDescriptorContext context = &#123; 0, (__bridge void *)(self), NULL, NULL, NULL &#125;;CFRunLoopSourceRef rls;// Passing true in the third argument so CFFileDescriptorInvalidate will close kq.dirKQRef = CFFileDescriptorCreate(NULL, kq, true, KQCallback, &amp;context);if (dirKQRef != NULL)&#123;rls = CFFileDescriptorCreateRunLoopSource(NULL, dirKQRef, 0);if (rls != NULL)&#123;CFRunLoopAddSource(CFRunLoopGetCurrent(), rls, kCFRunLoopDefaultMode);CFRelease(rls);CFFileDescriptorEnableCallBacks(dirKQRef, kCFFileDescriptorReadCallBack);// If everything worked, return early and bypass shutting things downreturn YES;&#125;// Couldn&apos;t create a runloop source, invalidate and release the CFFileDescriptorRefCFFileDescriptorInvalidate(dirKQRef);CFRelease(dirKQRef);dirKQRef = NULL;&#125;&#125;// kq is active, but something failed, close the handle...close(kq);kq = -1;&#125;// file handle is open, but something failed, close the handle...close(dirFD);dirFD = -1;&#125;&#125;return NO;&#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æŠŠæ—¶é—´å½“åšæœ‹å‹]]></title>
    <url>%2F2017%2F11%2F30%2F%E6%8A%8A%E6%97%B6%E9%97%B4%E5%BD%93%E5%81%9A%E6%9C%8B%E5%8F%8B%2F</url>
    <content type="text"><![CDATA[æ—¶é—´æ˜¯ä¸å¯èƒ½è¢«ç®¡ç†çš„ã€‚å¿…é¡»å¼€å¯å¿ƒæ™ºï¼Œçœ‹æ¸…æ¥šï¼Œæƒ³æ˜Žç™½ï¼šé—®é¢˜å‡ºåœ¨æˆ‘ä»¬è‡ªå·±èº«ä¸Šã€‚è€Œæˆ‘ä»¬æ‰€é¢ä¸´çš„é—®é¢˜ï¼Œä¸Žæ—¶é—´ã€ç®¡ç†æˆ–æ—¶é—´ç®¡ç†éƒ½æ²¡æœ‰å¤šå¤§çš„å…³ç³»ã€‚è§£å†³æ–¹æ¡ˆåªæœ‰ä¸€ä¸ªï¼Œé‚£å°±æ˜¯â€œä¸€åˆ‡éƒ½é ç§¯ç´¯â€ã€‚æ·±ä¿¡ç§¯ç´¯çš„åŠ›é‡ï¼Œæ—¶é—´å°±æ˜¯ä½ çš„æœ‹å‹ï¼Œå¦åˆ™å®ƒå°±æ˜¯ä½ çš„æ•Œäººã€‚ ä¸è¦å†è®©è‡ªå·±æˆä¸ºè‡ªå·±å¤§è„‘çš„å¥´éš¶ï¼Œè€Œæ˜¯é€‰æ‹©ç¿»èº«åšä¸»äºº ç®¡å®ƒå‘¢ï¼Œå­¦å‘—ï¼Œå­¦äº†æ€»æœ‰ç”¨å¤„ å‘Šè¯‰è‡ªå·±ï¼šæˆ‘æœ‰ä¸è¶³ï¼Œæˆ‘éœ€è¦æ—¶é—´ï¼Œæˆ‘æ²¡åŠžæ³•ä¸€è¹´è€Œå°±ã€‚å°±è¿™æ ·ã€‚ æ¯ä¸ªäººçš„èµ·ç‚¹ä¸åŒï¼Œæœ‰äº›äººçš„åœ°æ¿æ˜¯å¦å¤–ä¸€äº›äººçš„å¤©èŠ±æ¿ã€‚ä½†èµ·ç‚¹å°±æ˜¯èµ·ç‚¹ï¼Œå°½ç®¡ä¸åŒï¼Œæ¯ä¸ªäººéƒ½è¦ä»Žèµ·ç‚¹å¼€å§‹å¾€å‰èµ°ã€‚ æ‹¿å‡ºä¸€å¼ çº¸å°†å…¶åˆ’åˆ†ä¸ºå·¦å³ä¸¤ä¸ªéƒ¨åˆ†ï¼Œå·¦è¾¹æ ‡é¢˜æ˜¯â€œæˆ‘æœ‰çš„â€ï¼Œå³è¾¹æ ‡é¢˜æ˜¯â€œæˆ‘è¦çš„â€ã€‚é€ä¸€ç½—åˆ—ã€‚è€ŒåŽå°½é‡å®¢è§‚åœ°åˆ¤æ–­ï¼Œâ€œæˆ‘è¦çš„â€é‚£äº›æœ‰å“ªäº›æ˜¯ç”¨â€œæˆ‘æœ‰çš„â€æ— æ³•æ¢å–çš„â€”åˆ’æŽ‰ã€‚å†ä»”ç»†åˆ¤æ–­å‰©ä¸‹çš„èƒ½ç”¨â€œæˆ‘æœ‰çš„â€æ¢å–çš„é‚£äº›â€œæˆ‘è¦çš„â€ä¹‹ä¸­ç©¶ç«Ÿå“ªäº›æ˜¯å¿…é¡»çš„ã€å¿…è¦çš„ã€é‡è¦çš„ã€ä¸å¯æˆ–ç¼ºçš„â€”åŠ ä¸Šé‡ç‚¹æ ‡è®°ï¼Œæ¯”å¦‚æ˜Ÿå·ã€‚ æƒ³åˆ°â€œæˆ‘è¦ä»€ä¹ˆâ€çš„æ—¶å€™ï¼Œé©¬ä¸Šæé†’è‡ªå·±è¦èŠ±ä¸Šä¸‰å€çš„æ—¶é—´åŽ»æƒ³æƒ³â€œæˆ‘æœ‰ä»€ä¹ˆâ€ã€‚ åšä»»ä½•äº‹æƒ…çš„æ—¶å€™ï¼Œéƒ½éœ€è¦æ—¶æ—¶åˆ»åˆ»å¿å—å„ç§å„æ ·çš„ä¸å®Œç¾Ž ä¸ºäº†è¿›æ­¥ï¼Œæˆ‘ä»¬å¿…é¡»å¿å—ä¸€å®šçš„æœªçŸ¥ã€‚ å¿…é¡»æŽ¥å—è¿™ä¸ªçŽ°å®žï¼šæœªçŸ¥æ°¸è¿œå­˜åœ¨ã€‚è€ŒåŽåªèƒ½å¼€å§‹ä¸æ–­åœ°å°è¯•ç€åŽ»é€‚åº”â€œåœ¨æœªçŸ¥ä¸­ä¸æ–­å‰è¡Œâ€ã€‚ æœ‰é—®é¢˜è§£å†³ä¸äº†æ—¶ï¼Œæš‚æ—¶å…ˆæŠŠå®ƒè®°ä¸‹æ¥ï¼Œè€ŒåŽç»§ç»­å‰è¡Œã€‚æ³¨æ„ï¼Œä¸€å®šè¦è®°ä¸‹æ¥ å¯¹çŽ°çŠ¶ä¸æ»¡ï¼Œæ€¥äºŽæ‘†è„±çŽ°çŠ¶ï¼Œå¾€å¾€æ˜¯å¸¸äººæœ€å¸¸ä¸çŸ¥ä¸è§‰å°±æŽ‰è¿›åŽ»çš„é™·é˜± å°½ç®¡çŽ°å®žæ€»æ˜¯å¦‚æ­¤éš¾ä»¥æŽ¥å—ï¼Œåšå¼ºçš„ä½ å´åº”è¯¥å¦ç„¶ æœ€å¥½æ—¶å¸¸æŠŠè‡ªå·±çš„ä¸€äº›å¿µå¤´è®°å½•ä¸‹æ¥ ä¸ä»…è¦æŽ¥å—ï¼Œè¿˜è¦ç‰¢è®°ï¼›ä¸ä»…è¦ç‰¢è®°ï¼Œè¿˜è¦åšä¿¡ï¼Œä¸å®¹å¾—åŠç‚¹åŠ¨æ‘‡ã€‚ å®Œæˆä»»ä½•ä¸€ä¸ªä»»åŠ¡ï¼Œå¾€å¾€éƒ½éœ€è¦ä¸‰å€äºŽè®¡åˆ’çš„æ—¶é—´â€”å³ä¾¿ï¼Œä»Žä¸€å¼€å§‹å°±è€ƒè™‘åˆ°è¿™ä¸ªå› ç´ ã€‚ æƒ³è¦å‡ºç±»æ‹”èƒï¼Œå°±è¦åŠªåŠ›è‡³å°‘ä¸€ä¸‡å°æ—¶ã€‚ å¼€å§‹è¶Šå¥½â€æ›´å¥½çš„ç­”æ¡ˆæ˜¯â€œçŽ°åœ¨å°±å¼€å§‹â€ã€‚æ‰€è°“åšäº‹æ‹–æ‹‰ï¼Œä¸æ˜¯æ‹–æ‹–æ‹‰æ‹‰åœ°åšäº‹ï¼Œè€Œæ˜¯æ‹–æ‹–æ‹‰æ‹‰åœ°å°±æ˜¯ä¸å¼€å§‹åšæ­£äº‹ã€‚- æ‹–æ‹‰çš„äººæœ€æœ¬è´¨çš„åŽŸå› åœ¨äºŽææƒ§â€”æ— è®ºæ˜¯æ¥è‡ªå†…éƒ¨çš„ï¼ˆâ€œä¸æ±‚æœ‰åŠŸï¼Œä½†æ±‚æ— è¿‡â€ï¼‰ï¼Œè¿˜æ˜¯æ¥è‡ªå¤–éƒ¨çš„ï¼ˆè¿‡åˆ†åœ¨æ„å¤–ç•Œçš„è¯„ä»·ï¼‰ã€‚ åšäº‹çš„æ—¶å€™ï¼Œè‚¯å®šä¼šé‡åˆ°å›°éš¾ï¼Œè¶Šæ˜¯æœ‰ä»·å€¼çš„äº‹æƒ…ï¼Œå›°éš¾è¶Šå¤šè¶Šå¤§ã€‚ æ²¡æœ‰äººä»Žä¸€å¼€å§‹å°±èƒ½åšå¯¹ï¼Œæ²¡æœ‰äººä»Žä¸€å¼€å§‹å°±èƒ½åšå¥½ï¼åªè¦åšäº‹ï¼Œå°±ä¸€å®šä¼šå‡ºé—®é¢˜ã€‚ ç®€å•çš„éƒ¨åˆ†è¦è¿…é€Ÿåšå®Œï¼Œè€ŒåŽæŠŠèŠ‚çº¦å‡ºæ¥çš„æ—¶é—´æŠ•æ”¾åœ¨å¤„ç†å›°éš¾çš„éƒ¨åˆ†ä¸Šã€‚ ä»»åŠ¡æ²¡æœ‰å®Œæ•´å®Œæˆï¼Œæ‰€ä»¥ï¼Œæ ¹æœ¬è°ˆä¸ä¸Šæ•ˆçŽ‡ï¼ˆç›¸å½“äºŽåˆ†å­ç­‰äºŽé›¶ï¼‰ã€‚ ä¸ºäº†æé«˜æ•ˆçŽ‡ï¼Œæˆ‘ä»¬å¿…é¡»æŠŠè‡ªå·±çš„å¤§è„‘æ‰“é€ æˆä¸€ä¸ªâ€œå¤šä»»åŠ¡æ“ä½œç³»ç»Ÿï¼Œè¯•ç€æŠŠä¸€ä¸ªå¤æ‚è€Œåˆæœ‰æœºçš„ä»»åŠ¡ä¸Žä¸€ä¸ªç®€å•è€Œåˆæœºæ¢°çš„ä»»åŠ¡æ­é…èµ·æ¥ä¸€èµ·åšã€‚å°½é‡å¹¶è¡Œä¸¤ä¸ªä»»åŠ¡ï¼Œé‡è¦å‰ææ˜¯ï¼šè¿™ä¸¤ä¸ªä»»åŠ¡ä¹‹æ‰€ä»¥å¹¶è¡Œæ˜¯å› ä¸ºä½ å¯¹è‡ªå·±äº†è§£æ‰€ä»¥æ‰ä¸»åŠ¨å¦‚æ­¤å®‰æŽ’çš„ åœ¨åšä»»ä½•äº‹æƒ…ä¹‹å‰ï¼Œé€šè¿‡å…³æ³¨HOWè€Œåå¤æ‹†åˆ†ä»»åŠ¡ï¼Œæœ€ç»ˆç¡®è®¤æ¯ä¸ªå­ä»»åŠ¡éƒ½æ˜¯å¯å®Œæˆçš„ â€œ20åˆ†é’Ÿå·¥ä½œ+5åˆ†é’Ÿä¼‘æ¯â€ä½œä¸ºä¸€ä¸ªæ—¶é—´ç‰‡ï¼Œç„¶åŽå°±å¼€å§‹åƒCPUä¸€æ ·å¤„ç†ä»»åŠ¡ â€œæ²¡æ—¶é—´äº†â€ï¼Œå…¶å¯æ€•ç¨‹åº¦å‡ ä¹Žæ— å¼‚äºŽæ­»äº¡ã€‚ä¹Ÿè®¸æœ‰çš„æ—¶å€™ï¼Œå‘çŽ°è‡ªå·±å·²ç»æ™šäº†ï¼Œå”¯ä¸€çš„ç­–ç•¥ä¾ç„¶æ˜¯â€œçŽ°åœ¨å°±å¼€å§‹â€ï¼Œå¦åˆ™æ›´å¾…ä½•æ—¶ï¼Ÿ å¾ˆå¤šçš„æ—¶å€™ï¼Œâ€œè·Ÿç€æ„Ÿè§‰èµ°â€è‚¯å®šæ˜¯è¦åƒäºçš„ã€‚ æœŸæœ›é€Ÿæˆï¼Œä»ŽåŸºæœ¬çš„å±‚é¢ä¸Šæ¥çœ‹ï¼Œæœ‰ä¸¤ä¸ªä¸»è¦çš„åŽŸå› ã€‚ç¬¬ä¸€ä¸ªæ˜¯äººå¸Œæœ›è‡ªå·±çš„æ¬²æœ›é©¬ä¸Šå¾—åˆ°æ»¡è¶³çš„å¤©æ€§ï¼›å¦å¤–ä¸€ä¸ªæœŸæœ›é€Ÿæˆçš„åŽŸå› ï¼Œä¹Ÿæ˜¯æµ®èºçš„æ ¹æºï¼Œæ˜¯ä¸æ‡‚å¾—æœ‰äº›é˜¶æ®µå°±æ˜¯æ— æ³•è·¨è¶Š æ— è®ºå¯¹è°æ¥è®²ï¼Œæƒ³è¿›å…¥è‡ªå·±çš„æ¢¦æƒ³èŒä¸šéƒ½æ˜¯æˆæœ¬é«˜æ˜‚çš„ æŽ¥å—çŽ°çŠ¶æ‰æ˜¯æœ€ä¼˜ç­–ç•¥ ä¸è¦å¸¸å¸¸è§‰å¾—è‹¦ï¼Œè€Œæ˜¯è¦æƒ³åŠžæ³•åœ¨ä»»ä½•æƒ…å†µä¸‹æ‰¾åˆ°æƒ…è¶£â€”å¿«ä¹æ˜¯ä¸€ç§æœ¬äº‹ äº‹æƒ…æ˜¯å¦æ­£ç¡®ï¼Ÿçœ‹å®ƒæ˜¯å¦çŽ°å®žã€‚å‡ ä¹Žä¸€åˆ‡æ„šè ¢çš„è¡Œä¸ºéƒ½æ¥è‡ªäºŽå¦å®šçŽ°å®žé€ƒé¿çŽ°å®žã€‚ æŽ¥å—æƒ©ç½šå¾€å¾€æ˜¯ç§¯ç´¯ç»éªŒçš„èµ·ç‚¹ å¾ˆå¤šäººå®žé™…ä¸Šæ ¹æœ¬ä¸çŸ¥é“è‡ªå·±æ‰€è°“çš„â€œå–œæ¬¢åšæŸä»¶äº‹æƒ…â€å®žé™…ä¸Šæ›´å¯èƒ½åªä¸è¿‡æ˜¯å› ä¸ºé‚£ä»¶äº‹æƒ…ç›¸å¯¹ç®€å•ã€å®¹æ˜“èŽ·å¾—å¥–åŠ±è€Œå·² å¯¹äºŽé€ƒé¿å›°éš¾çš„äººæ¥è®²ï¼Œæœ€ä¸ºå…³é”®çš„å®žé™…ä¸Šä¸æ˜¯WHATï¼Œä¹Ÿä¸æ˜¯WHYï¼Œè€Œæ˜¯HOWã€‚ å‡å°‘è¿™ç§ä»¤äººæ¼ç«çš„æƒ…å†µï¼šè¢«å…¶ä»–äººçš„é”™è¯¯è€½è¯¯è‡ªå·±çš„æ—¶é—´ å…ˆåä¸‹æ¥åˆ¶å®šä¸€ä¸ªå·¥ä½œåˆ—è¡¨ï¼ŒæŠŠä»»åŠ¡éƒ½ç½—åˆ—ä¸‹æ¥ï¼Œè€ŒåŽæŠŠè‡ªå·±çš„æ—¶é—´åˆ‡ç‰‡ã€‚ åŸºäºŽè¿‡ç¨‹çš„â€œäº‹ä»¶-æ—¶é—´æ—¥å¿—â€è®°å½•å¯ä»¥è°ƒæ•´æˆ‘å¯¹æ—¶é—´çš„æ„Ÿè§‰ï¼Œåœ¨ä¼°ç®—ä»»ä½•å·¥ä½œé‡çš„æ—¶å€™ï¼Œéƒ½æ›´å®¹æ˜“ç¡®å®šâ€œçœŸæ­£çŽ°å®žå¯è¡Œçš„ç›®æ ‡â€ã€‚ æ—¢ç„¶â€œç®¡ç†æ—¶é—´â€æ˜¯ä¸å¯èƒ½çš„ï¼Œé‚£ä¹ˆè§£å†³æ–¹æ³•å°±åªèƒ½æ˜¯ï¼šæƒ³å°½ä¸€åˆ‡åŠžæ³•çœŸæ­£äº†è§£è‡ªå·±ï¼ŒçœŸæ­£äº†è§£æ—¶é—´ã€ç²¾ç¡®åœ°æ„ŸçŸ¥æ—¶é—´ï¼›è€ŒåŽå†æƒ³å°½ä¸€åˆ‡åŠžæ³•ä½¿è‡ªå·±ä»¥åŠè‡ªå·±çš„è¡Œä¸ºä¸Žæ—¶é—´â€œåˆæ‹â€ï¼Œå°±æ˜¯æˆ‘çš„è¯´æ³•â€”â€œä¸Žæ—¶é—´åšæœ‹å‹â€ã€‚ æ¯å¤©è®°å½•ä½ çš„æ—¶é—´å¼€é”€ï¼Œæ¯å¤©éƒ½è¦åˆ¶ä½œä½ çš„æ—¶é—´é¢„ç®—ã€‚åˆ¶ä½œä¸€ä¸ªåˆ—è¡¨ï¼ŒæŠŠä½ ä»Šå¤©éœ€è¦åšçš„äº‹æƒ…ç½—åˆ—å‡ºæ¥ã€‚ç»™åˆ—è¡¨ä¸­çš„æ¯é¡¹ä»»åŠ¡æ ‡ä¸Šæƒé‡å€¼â€”æ¯”å¦‚ï¼Œä½ å¯ä»¥ç”¨1~5åˆ†è¿›è¡Œæ ‡è®° ä¸è¦å®³æ€•ä¿®æ”¹ã€‚ç›¸ä¿¡æˆ‘ï¼Œå®Œæˆä»»ä½•ä¸€é¡¹ä»»åŠ¡çš„è¿‡ç¨‹ä¸­ï¼Œä¿®æ”¹éƒ½æ˜¯ä¸å¯æˆ–ç¼ºçš„å†…å®¹ã€‚ä½ åœ¨ä¿®æ”¹ï¼Œå°±è¯´æ˜Žä½ åœ¨è¿›æ­¥ åˆ¤æ–­æ¯é¡¹ä»»åŠ¡çš„çœŸå®žå±žæ€§ã€‚ç„¶åŽé€‰æ‹©â€œçœŸçš„é‡è¦çš„â€æˆ–è€…â€œæ˜¾å¾—ä¸é‡è¦çš„â€ã€‚â€œçœŸçš„é‡è¦â€ï¼Œå…¶å®žåªéœ€è¦ä¸€ä¸ªæ ‡å‡†ï¼šå°±æ˜¯çœ‹è¿™é¡¹ä»»åŠ¡çš„å®Œæˆæ˜¯å¦å¯¹ä½ çš„ç›®æ ‡è¾¾æˆç¡®å®žæœ‰ç›Š å¯¹åƒæˆ‘è¿™æ ·çš„æ™®é€šäººæ¥è®²ï¼Œè¯æ˜Žæˆ‘çš„ç›®æ ‡çŽ°å®žå¯è¡Œçš„æ–¹æ³•æ¯”è¾ƒç®€å•ï¼š1.å·²ç»æœ‰äººåšåˆ°äº†ï¼›2.æˆ‘ä¸Žé‚£äººæ²¡æœ‰å¤ªå¤§çš„å·®è·ã€‚ å¾€å¾€åªæœ‰å¼€å§‹è¡ŒåŠ¨äº†ä¹‹åŽï¼Œæ‰å¯ä»¥åšå‡ºæ­£ç¡®çš„åˆ¤æ–­ã€‚åœ¨è¡ŒåŠ¨è¿‡ç¨‹ä¸­ï¼Œå‘çŽ°æ—¢å®šçš„ç›®æ ‡ç¡®å®žæ˜¯ä¸çŽ°å®žçš„ã€ä¸å¯è¡Œçš„ï¼Œé‚£ä¹ˆï¼ŒåŠé€”è€ŒåºŸä¸ä»…å¹¶ä¸æ„å‘³ç€å¤±è´¥ï¼Œè¿˜æ„å‘³ç€è¯¥å†³ç­–è€…æ˜¯æ— æ¯”ç†æ™ºçš„ã€‚ æ—¶é—´çš„æµªè´¹ï¼Œå¾€å¾€æ˜¯å› ä¸ºa.ç›®æ ‡ä¸çŽ°å®žæˆ–è€…ç›®å‰æš‚æ—¶å°šä¸å¯è¡Œï¼›b.ä¸ºäº†è¾¾åˆ°ç›®æ ‡è€Œåˆ¶å®šçš„å®žæ–½ç­–ç•¥æœ‰è¯¯ã€‚ è®¡åˆ’æ€»æ˜¯è¢«å˜åŒ–æ‰“ä¹±ï¼Œæ›´æ·±å±‚æ¬¡çš„åŽŸå› åœ¨äºŽè®¡åˆ’è¿‡äºŽé•¿è¿œã€‚ è¶Šæ˜¯çŸ­æœŸçš„ç›®æ ‡ï¼Œè¶Šå®¹æ˜“æ¸…æ™°ã€‚è¶Šæ˜¯æ¸…æ™°çš„ç›®æ ‡è¶Šå®¹æ˜“å®žçŽ° ä¹è§‚æ˜¯é åŠªåŠ›å’ŒæŒ£æ‰Žæ‰å¯ä»¥èŽ·å¾—çš„ç»éªŒã€‚ ç”Ÿæ´»æœ¬èº«å……æ»¡äº†æ„å¤–ï¼Œå¹¶ä¸”ï¼Œæ€»æ˜¯æ„å¤–åˆ°æ— ä»¥å¤åŠ çš„åœ°æ­¥ã€‚ åšè®¡åˆ’çš„æ—¶å€™ï¼Œè¦çŸ¥é“è¿™æ ·ä¸€ä»¶äº‹ï¼šåšé•¿æœŸè®¡åˆ’æ˜¾ç„¶æ˜¯æ­£ç¡®çš„å¹¶ä¸”æ˜¯å¿…éœ€çš„ï¼Œä½†æ˜¯ï¼Œéœ€è¦æŒ£æ‰Žï¼Œéœ€è¦åŠªåŠ›ï¼Œéœ€è¦ä»Žä¸€ç‚¹ä¸€æ»´å¼€å§‹ã€‚ä¸è¦ä¸€ä¸Šæ¥å°±å¼€å§‹åˆ¶å®šè¿‡åˆ†é•¿æœŸçš„è®¡åˆ’ã€‚ æˆ‘çŸ¥é“é‚£åªä¸è¿‡æ˜¯æˆ‘çš„å¤§è„‘çš„æƒ³æ³•ï¼Œè€Œä¸åº”è¯¥æ˜¯æˆ‘çš„æƒ³æ³• æ²¡å¿…è¦åšè®¡åˆ’çš„åŽŸå› æœ‰ä¸¤ä¸ªï¼š1.å¤§å¤šæ•°è®¡åˆ’å…¶å®žéžå¸¸ç®€å•â€ï¼›2.â€œåˆå§‹çŠ¶æ€ä¸‹ï¼Œæˆ‘ä»¬å¾€å¾€å®žé™…ä¸Šå¹¶æ²¡æœ‰èƒ½åŠ›åŽ»åˆ¶å®šåˆç†æœ‰æ•ˆçš„è®¡åˆ’â€ã€‚ å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘çš„å»ºè®®æ˜¯è¿™æ ·çš„ï¼šå¦‚æžœä½ æƒ³æ”¹å˜ä½ è‡ªå·±ï¼Œæˆ–è€…ä½ ç›®å‰çš„å¤„å¢ƒå¹¶ä¸ä»¤äººæ»¡æ„ï¼Œé‚£å°±ä¸€åˆ‡ä»Žç®€â€”æ‰¾ä¸€ä¸ªä½ è§‰å¾—è¯¥ç»™ä½ å¸¦æ¥æ”¹å˜çš„è¡ŒåŠ¨ï¼Œç„¶åŽåŽ»åšå°±æ˜¯äº†ã€‚ä¸è¦æ€•ç¢°å£ï¼Œä¸è¦æ€•å¤±è´¥ï¼Œé‚£æ˜¯å¿…é¡»ç»åŽ†çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚è¿˜æ˜¯é‚£å¥è¯ï¼Œå¤±è´¥å¹¶ä¸å¯æ€•ï¼Œå› ä¸ºä½ æ€»æ˜¯è¦å¤±è´¥è®¸å¤šæ¬¡æ‰ä¼šæœ‰ç»“æžœï¼Œå¹¶ä¸”å…¨å¤©ä¸‹åˆä¸æ˜¯åªæœ‰ä½ ä¸€ä¸ªäººå¤±è´¥ï¼Œæ€•ä»€ä¹ˆï¼Ÿå…³é”®åœ¨äºŽåœ¨æ¯æ¬¡æŒ«æŠ˜ä¹‹åŽèƒ½å¦æ±²å–æ•™è®­ã€‚åªè¦èƒ½æ±²å–æ•™è®­ï¼Œç„¶åŽè‡ªæˆ‘è°ƒæ•´ï¼Œé‚£å°±æ˜¯è¿›æ­¥äº†ã€‚ åˆ¶ä½œä¸€ä¸ªåˆ—è¡¨ï¼Œå¾€å¾€ä¼šä½¿è‡ªå·±åšäº‹äº•äº•æœ‰æ¡ï¼Œå¹¶ä¿è¯è‡ªå·±ä¸ä¼šæ²¡å¿…è¦åœ°æµªè´¹æ—¶é—´ï¼Œåˆ—è¡¨æ²¡å¿…è¦å·¥æ•´ã€‚å…³é”®åœ¨äºŽè¦éšæ—¶å¯ä»¥çœ‹åˆ°ï¼Œéšæ—¶å¯ä»¥ä¹¦å†™å’Œæ ‡è®°ã€‚çœŸæ­£æœ€é‡è¦çš„ä»»åŠ¡æ°¸è¿œåªæœ‰ä¸€ä¸ªâ€”é‚£ä¸ªçœŸæ­£å¯¹ä½ çš„ç›®æ ‡å®žçŽ°æœ‰å¸®åŠ©çš„ä»»åŠ¡ã€‚çœŸæ­£ç´§æ€¥çš„äº‹å„¿å°‘ä¹‹åˆå°‘ï¼Œé™¤éžä¸‡ä¸å¾—å·²ï¼Œåƒä¸‡ä¸è¦åœ¨æ•´ä¸ªä»»åŠ¡å®Œæˆä¹‹å‰ä¸­é€”æ›´æ”¹åˆ—è¡¨ä¸­çš„é¡¹ç›®ã€‚ æœ‰äº†ä»€ä¹ˆæ–°é²œä¸»æ„ï¼Œå¯ç”¨å¦å¤–ä¸€ä¸ªæ–°çš„åˆ—è¡¨ï¼Œæ ‡é¢˜æ˜¯â€œä¸‹ä¸€é˜¶æ®µä»»åŠ¡åˆ—è¡¨â€ï¼ŒæŠŠä½ çš„æ–°é²œä¸»æ„è®°å½•åœ¨é‚£é‡Œï¼Œç„¶åŽé©¬ä¸Šå›žåˆ°å½“å‰çš„è¿™ä¸ªä»»åŠ¡åˆ—è¡¨ï¼Œä¸“æ³¨åœ¨å½“å‰åº”è¯¥å®Œæˆçš„ä»»åŠ¡ä¸Šã€‚ å…ˆåˆ¤æ–­ä½ çš„è¿™ä¸ªåˆ—è¡¨æ‰€ä»£è¡¨çš„é‚£ä¸ªä»»åŠ¡æ˜¯ä¸æ˜¯çŽ°å®žçš„ï¼Œå¦‚æžœä½ çœŸçš„è§‰å¾—ä½ èƒ½å¤Ÿã€ä¹Ÿåº”è¯¥å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œé‚£å°±å¼€å§‹åŽ»åšï¼›å¹¶ä¸”ä¸€å®šè¦åšåˆ°åº•ã€‚ æˆ‘ä»¬æ‰€é¢ä¸´çš„å¤§å¤šæ•°ä»»åŠ¡å…¶å®žéƒ½æ˜¯â€œé‡å¤æ€§â€çš„ã€‚åªè¦é‡åˆ°é‡å¤æ€§ä»»åŠ¡ï¼Œå°±è¦åœ¨åšè¿‡ä¸€æ¬¡ä¹‹åŽï¼Œé©¬ä¸Šæ€»ç»“æ•´ç†ï¼Œå°†å…¶æµç¨‹æ¢³ç†æ¸…æ¥šï¼Œè€ŒåŽç»è¿‡åŽæ¥çš„å®žè·µæŠŠå®ƒå˜æˆâ€œé—­ç€çœ¼ç›ä¹Ÿèƒ½åšå¥½â€çš„äº‹æƒ…ã€‚è¿™æ˜¯æé«˜æ•ˆçŽ‡ã€å‡å°‘å¤±è¯¯çš„æœ€æ ¹æœ¬æ‰‹æ®µã€‚ ä¸ºå¸¸è§ä»»åŠ¡åˆ¶å®šæµç¨‹ï¼Œæ˜¯å¿…é¡»å…»æˆçš„ä¹ æƒ¯ã€‚åœ¨æ¢³ç†æµç¨‹çš„è¿‡ç¨‹ä¸­ï¼Œä¼šä¸ç”±è‡ªä¸»åœ°æ€è€ƒä¸ªä¸­çš„ç»†èŠ‚ï¼Œ åœ¨åšä»»ä½•äº‹æƒ…ä¹‹å‰ï¼Œæˆ‘éƒ½ä¼šå°è¯•ç€æŠŠå°†è¦åšçš„äº‹æƒ…çš„æ•´ä¸ªè¿‡ç¨‹åœ¨å¤´è„‘ä¸­é¢„æ¼”ä¸€éç”šè‡³å¾ˆå¤šéã€‚æ‰§è¡Œçš„ä»»åŠ¡è¶Šé‡è¦ï¼Œè¿™ç§é¢„æ¼”å°±è¶Šå‘ä¸å¯æˆ–ç¼ºã€‚å­¦ä¹ çš„è¿‡ç¨‹å°±æ˜¯å¦‚æ­¤ï¼Œå®ƒå¾€å¾€ç»™ä½ å¸¦æ¥æ„æƒ³ é‡åˆ°ä»»ä½•ä»»åŠ¡ï¼Œéƒ½åº”è¯¥è®¤çœŸå®¡è§†è¯¥ä»»åŠ¡ï¼Œé—®è‡ªå·±ä¸€ä¸ªé—®é¢˜å¹¶æƒ³åŠžæ³•å›žç­”æ¸…æ¥šï¼šâ€œæ€Žæ ·æ‰ç®—åšå¥½ï¼Ÿ å­¦ä¹ æ˜¯æŠ•èµ„å›žæŠ¥çŽ‡æœ€é«˜çš„è¡Œä¸ºã€‚ é™¤äº†â€œè¯•é”™â€ã€â€œè§‚å¯Ÿâ€ã€â€œé˜…è¯»â€ä¹‹å¤–ï¼Œâ€œæ€è€ƒâ€ï¼Œå‡†ç¡®åœ°è¯´ï¼Œâ€œæ­£ç¡®åœ°æ€è€ƒâ€ï¼Œæ‰æ˜¯èŽ·å–çœŸæ­£æ„ä¹‰ä¸Šçš„çŸ¥è¯†çš„ä¸»è¦æ‰‹æ®µã€‚ æ¯ä¸ªäººå†…å¿ƒéƒ½å……æ»¡äº†ææƒ§ï¼Œæ‰€æœ‰çš„ææƒ§å…¶å®žéƒ½æºè‡ªäºŽæˆ‘ä»¬å®³æ€•æœªçŸ¥ã€‚äºŽæ˜¯ï¼Œææƒ§æ˜¯æ°¸æ’çš„ï¼Œå› ä¸ºæˆ‘ä»¬æ°¸è¿œä¸å¯èƒ½ä»€ä¹ˆéƒ½çŸ¥é“ã€‚ çŸ¥è¯†ä¼ é€’è¿‡ç¨‹ä¸­æœ€å¤§çš„éšœç¢â€”â€œç»éªŒä¸»ä¹‰â€ æŠŠé‚£äº›ç›®å‰æš‚æ—¶æ— æ³•ç†è§£çš„ã€æˆ–è€…æ”¯æŒçš„ã€æˆ–è€…åå¯¹çš„ï¼Œæˆ–è€…æ— æ‰€è°“çš„è®ºç‚¹è§‚ç‚¹è®°å½•ä¸‹æ¥ã€‚æ— æ³•ç†è§£çš„ï¼Œå†™ä¸‹è‡ªå·±å½“æ—¶çš„ç–‘æƒ‘ç©¶ç«Ÿåœ¨ä»€ä¹ˆåœ°æ–¹ï¼›æ”¯æŒçš„ï¼Œè®°å½•ä¸‹å‡ ä¸ªè‡ªå·±çš„æ”¯æŒç†ç”±æˆ–è€…å®žä¾‹ï¼›åå¯¹çš„ï¼Œä¹Ÿä¸€æ ·å¯ä»¥è®°å½•ä¸‹å‡ ä¸ªè‡ªå·±çš„åå¯¹ç†ç”±æˆ–è€…å®žä¾‹ï¼›ç”šè‡³é‚£äº›æ— æ‰€è°“çš„ï¼Œä¹Ÿå¯ä»¥å†™ä¸‹ä¸ºä»€ä¹ˆè‡ªå·±è§‰å¾—è¿™å®Œå…¨æ˜¯æ— æ‰€è°“çš„ åœ¨ä»»ä½•ä¸€ä¸ªé˜¶æ®µï¼Œæ€»æ˜¯æœ‰ä¸€æ®µæ—¶é—´è¿›å±•ç¼“æ…¢ï¼Œè®¸ä¹…è¿‡åŽï¼Œæ‰€è°“é‡å˜åˆ°è´¨å˜çš„æ•ˆæžœæ‰ä¼šå‡ºçŽ°ï¼Œæ‰å¯èƒ½æœ‰çªé£žçŒ›è¿›çš„æ„Ÿè§‰ ç‹¬ç«‹æ€è€ƒçš„é’¥åŒ™ä¹‹ä¸€æ˜¯è¿™æ ·çš„ï¼šé¦–å…ˆè¦äº†è§£ï¼šæƒå¨ä¸ä¸€å®šç­‰äºŽæ­£ç¡®ã€‚è¿›ä¸€æ­¥è¦æ˜Žç™½ï¼šå°±ç®—æƒå¨æ­£ç¡®ï¼Œä¹Ÿåªä¸è¿‡æ˜¯æƒå¨è¡¨è¾¾äº†æ­£ç¡®ï¼Œè€Œæ­£ç¡®å¹¶ä¸å±žäºŽæƒå¨ã€‚æœ€åŽè¦æ¸…æ¥šï¼šæ›´å‡†ç¡®åœ°æ¥è¯´ï¼Œæƒå¨åªæ˜¯æƒå¨ã€æ­£ç¡®å°±æ˜¯æ­£ç¡®ï¼Œå®ƒä»¬ä¿©ä»€ä¹ˆæ—¶å€™éƒ½ä¸æ˜¯ä¸€å›žäº‹å„¿ã€‚ æŽ¥åˆ°ä»»ä½•ä»»åŠ¡ä¹‹åŽï¼Œéƒ½å‹¤äºŽç¢ç£¨ï¼ŒåŽ»æ€è€ƒè¯¥ä»»åŠ¡çš„ç›®æ ‡ã€å®žè´¨ã€æ„ä¹‰ï¼Œè€ŒåŽå†æ ¹æ®å…¶ç›®æ ‡ã€å®žè´¨ã€æ„ä¹‰åŽ»æ€è€ƒè¯¥ä»»åŠ¡çš„å®Œæˆæ–¹æ³•ã€‚äºŽæ˜¯ï¼Œä»–ä»¬ä¸ºäº†å®Œæˆä»»åŠ¡ï¼Œå®žçŽ°ç›®æ ‡ï¼Œä¼šåŽ»åšå¾ˆå¤šé¢†å¯¼åŽŸæœ¬ç”šè‡³æœªæ›¾æƒ³è±¡è¿‡è¦äº¤ä»£çš„äº‹æƒ…ï¼Œæœ€ç»ˆï¼Œä¸ä»…å®Œæˆä»»åŠ¡ï¼Œè¿˜å¸¸å¸¸æœ‰å¾ˆå¤šæ„å¤–æ”¶èŽ·â€¦â€¦ å¯¼è‡´äººä»¬å¸¸å¸¸çŠ¯è¿™äº›é€»è¾‘é”™è¯¯ä¹‹ä¸­çš„æœ€é‡è¦æ ¹æºåªæœ‰ä¸¤ä¸ªï¼šæ¦‚å¿µä¸æ¸…å’Œæ‹’ç»æŽ¥å—ä¸ç¡®å®šæ€§ã€‚ å­¦ä¹ ä»»ä½•çŸ¥è¯†çš„æ—¶å€™ï¼Œæžæ¸…æ¥šæ‰€æœ‰å®ƒçš„åŸºç¡€æ¦‚å¿µæ˜¯æœ€é‡è¦çš„ â€œåè¿‡æ¥ä¸ä¸€å®šæˆç«‹â€è¿™å¥è¯ï¼Œå€¼å¾—ç‰¢è®°ã€‚ çˆ±è¿ªç”Ÿæ˜¯å¦æ˜¯ä¸€ä¸ªç‰¹åˆ«åŠªåŠ›çš„äººï¼Œæœ¬è´¨ä¸Šä¸Žæˆ‘ä»¬æ²¡ä»€ä¹ˆå…³ç³»ï¼Œæˆ‘ä»¬è¯¥åŠªåŠ›è¿˜å¾—åŠªåŠ›ï¼Œä¸åº”è¯¥ä»…ä»…å› ä¸ºåˆ«äººåŠªåŠ›æˆ–è€…ä¸åŠªåŠ›ï¼Œæˆ‘ä»¬å°±æ”¾å¼ƒåŠªåŠ›ã€‚ æŠ±æ€¨â€œä¸Šå¸çš„æ„šè ¢â€çš„äººåªæœ‰ä¸€ä¸ªå…±åŒç‰¹å¾ï¼šä»–ä»¬åªä¸è¿‡æ˜¯æŠŠâ€œä¸Šå¸å¾ˆæ„šè ¢â€ä½œä¸ºè‡ªå·±å·æ‡’çš„å€Ÿå£è€Œå·² è¦ä¹ˆæƒ³åŠžæ³•å¸®åŠ©ä¸Šå¸è§£å†³é—®é¢˜ï¼Œè¦ä¹ˆå°±åœ¨çˆ±èŽ«èƒ½åŠ©çš„æ—¶å€™é€‰æ‹©ç¦»å¼€åŽ»è‡ªè¡Œå…¶æ˜¯ã€‚ äººç±»æ‹¥æœ‰çš„æ™®éçš„è®¤çŸ¥åå·®ä¹‹ä¸€å°±æ˜¯ï¼šæŠŠæˆåŠŸæ½åˆ°è‡ªå·±èº«ä¸Šï¼ŒæŠŠå¤±è´¥å½’å’ŽäºŽåˆ«äººæˆ–è€…åè¿æ°”ã€‚ åŠªåŠ›ä»Žå¤±è´¥è€…èº«ä¸Šæ±²å–ç»éªŒã€‚æœ‰äº›æ—¶å€™ï¼Œâ€œæˆåŠŸè€…â€çš„ç»éªŒæ ¹æœ¬æ²¡æœ‰ç”¨ï¼Œå› ä¸ºé‚£äº›ç»éªŒæ ¹æœ¬å°±æ˜¯é”™è¯¯çš„ã€‚ äººå®¶è¯´ä»€ä¹ˆä½ å°±ä¿¡ä»€ä¹ˆï¼ŒæŒºå‚»çš„ã€‚ å¼ºä¸Žå¼±æ‰æ˜¯è‡ªç„¶ç•Œä¸­çœŸæ­£å­˜åœ¨çš„æœ¬è´¨ï¼Œå–„ä¸Žæ¶æ›´å¤šçš„æ—¶å€™åªä¸è¿‡æ˜¯å¼±è€…ä¸€åŽ¢æƒ…æ„¿çš„å®šä¹‰ã€‚ ä½œä¸ºæ³¨å®šä¼šè€åŽ»æ­»åŽ»çš„ç‰©ç§ä¹‹ä¸€ï¼Œäººæ€§ä¸­å¤©ç”Ÿå°±å……æ»¡äº†ææƒ§ è¿‡åŽ»çš„äº‹æƒ…æ˜¯æ— æ³•æ›´æ”¹çš„ï¼ŒçŽ°åœ¨çš„çƒ¦æ¼æ˜¯æ— æµŽäºŽäº‹çš„ã€‚ä½†æ˜¯ï¼Œå°†æ¥çš„å°´å°¬ä¹Ÿè®¸æ˜¯å¯ä»¥é¿å…çš„â€”å¦‚æžœçŽ°åœ¨çš„è¡ŒåŠ¨æ²¡æœ‰å‡ºé”™çš„è¯ å½“è„‘å­é‡Œé—ªå‡ºç±»ä¼¼â€œè¦æ˜¯â€¦â€¦å°±å¥½äº†ï¼â€çš„å¿µå¤´çš„æ—¶å€™ï¼Œè¦é©¬ä¸Šæé†’è‡ªå·±ï¼Œâ€œåœï¼è¿™ä¸ªå¿µå¤´æœ€è€½è¯¯äº‹å„¿äº†ï¼â€ äººä»¬åªèƒ½å¬åˆ°è‡ªå·±æƒ³å¬åˆ°çš„ï¼Œåªèƒ½çœ‹åˆ°è‡ªå·±æƒ³çœ‹åˆ°çš„ã€‚ æ—¥ç§¯æœˆç´¯çš„è¿‡ç¨‹ä¸­ï¼Œè¦å°½é‡æœ‰æ•ˆç”„åˆ«è‡ªå·±å¤§è„‘ä¸­æ‰€å­˜å‚¨çš„â€œå·²çŸ¥ä¿¡æ¯â€ï¼ˆå¤§å¤šæ˜¯Aç±»ï¼‰çš„æœ‰æ•ˆæ€§ã€‚ ä¸ºäº†çœŸæ­£åšåˆ°æœ‰æ•ˆå€¾å¬ï¼Œæœ€éœ€è¦å…‹åˆ¶çš„å°±æ˜¯â€œè¿‡æ—©è´¨ç–‘â€ã€‚å°±ç®—éœ€è¦è´¨ç–‘ä¹Ÿä¸€å®šè¦ç­‰åˆ°å¯¹æ–¹è¯´å®Œã€‚ ä¸€æ—¦å†³å®šå€¾å¬ï¼Œå°±è¦ä¸»åŠ¨å¸®åŠ©è®²è€…è¿›å…¥â€œå€¾è¯‰â€çŠ¶æ€ã€‚ ä¸ºäº†é¿å…åœ¨è®¨è®ºçš„è¿‡ç¨‹ä¸­å‡ºçŽ°ä¸å¿…è¦çš„éº»çƒ¦ï¼Œæµªè´¹ä¸å¿…è¦çš„æ—¶é—´[75]ï¼Œæˆ‘ä»¬å¿…é¡»æ·±åˆ»ç†è§£ä»¥ä¸‹ä¸‰ä¸ªåŽŸåˆ™ã€‚ Aï¼Œæœ‰æ„ä¹‰ä¹‹è®¨è®ºçš„å‰ææ˜¯åŒæ–¹ä¸ä»…è¦â€œç›¸äº’ç«žäº‰â€æ›´é‡è¦çš„æ˜¯è¿˜è¦â€œç›¸äº’åˆä½œâ€ã€‚å¦‚æžœä½ åœ¨ä»»ä½•è®¨è®ºä¸­å‘çŽ°å‚ä¸Žè€…é‡Œé¢æœ‰â€œè‡ªä»¥ä¸ºæ˜¯â€è€…å­˜åœ¨ï¼Œä½ å…¶å®žåªæœ‰ä¸€ä¸ªé€‰æ‹©ï¼Œé€€å‡ºè®¨è®º Bï¼šäº‹å®žã€çœŸç›¸ã€çœŸç†ã€é“ç†ï¼ˆå³æ‰€è°“çš„â€œTruthâ€ï¼›ä¸‹æ–‡ä¸­å…¨éƒ¨ä½¿ç”¨â€œTruthâ€è¿™ä¸ªè‹±æ–‡å•è¯æŒ‡ä»£ï¼‰æ˜¯ç‹¬ç«‹å­˜åœ¨çš„ï¼Œä»Žæ¥ä¸ä¼šä¾é™„äºŽä»»ä½•ä¸ªäººæˆ–è€…é›†ä½“å­˜åœ¨ã€‚ Cï¼šTruthä¸å˜ï¼Œä¹Ÿä¸ä¼šå› ä»»ä½•äººè€Œå˜ï¼›ä¸åœå˜åŒ–çš„åªæ˜¯äººä»¬å¯¹Truthçš„è§£é‡Šæˆ–è€…ç†è§£ é¿å…è‡ªä»¥ä¸ºæ˜¯åœ°è®¤ä¸ºè‡ªå·±è‚¯å®šç†è§£å¯¹äº†ï¼Œä¸å¦¨å¥—ç”¨ä»¥ä¸‹è¿™ä¸ªå¥å¼ï¼Œè¿›è¡ŒéªŒè¯ã€åé¦ˆï¼šâ€œä½ çš„æ„æ€æ˜¯â€¦â€¦ï¼Œæ˜¯ä¹ˆï¼Ÿâ€ æˆ–è€… â€œä½ çš„æ„æ€æ˜¯â€¦â€¦ï¼Œä½ çœ‹æˆ‘ç†è§£çš„å¯¹ä¹ˆï¼Ÿâ€ æ‘†è„±ç»éªŒä¸»ä¹‰çš„å±€é™ï¼Œä¸ä»…éœ€è¦å¯¹é“ç†æœ¬èº«çš„äº†è§£ï¼Œæœ€ç»ˆè¿˜éœ€è¦å‹‡æ°” æ·±åˆ»äº†è§£äº†ç»éªŒä¹‹å±€é™ä¹‹åŽï¼Œæ‰€éœ€è¦åšçš„å°±æ˜¯æ—¶æ—¶åˆ»åˆ»ä¿æŒè­¦æƒ• è§‚å¯Ÿä¸Žé˜…è¯»æ˜¯æ‰©å……æœ‰é™çš„è‡ªæˆ‘ç»éªŒçš„æœ€å¥½æ‰‹æ®µã€‚ ç»å¤§å¤šæ•°äººä»…å› ä¸ºè‡ªå·±çš„æ€åº¦è€Œå¤±åŽ»ç§¯ç´¯ã€æˆé•¿çš„å¯èƒ½ ç±»æ¯”æ€è€ƒå‡ ä¹Žæ˜¯è·¨è¶Šå·²çŸ¥ä¸ŽæœªçŸ¥ä¹‹é—´çš„é¸¿æ²Ÿçš„å”¯ä¸€æ‰‹æ®µã€‚ ä¸€å®šè¦é—®æ¸…æ¥šè‡ªå·±è¿™ä¸ªé—®é¢˜ï¼šæˆ‘ä¸å–œæ¬¢åšè¿™ä»¶äº‹æƒ…æœ‰æ²¡æœ‰å¯èƒ½ä»…ä»…æ˜¯å› ä¸ºè¿™ä»¶äº‹å„¿æˆ‘å¹¶æ²¡æœ‰åšå¥½ï¼Ÿåšå¥½è¿™ä»¶äº‹æƒ…ç©¶ç«Ÿå¯¹è‡ªå·±æœ‰æ²¡æœ‰æ„ä¹‰ï¼Ÿ å¹¶ä¸æ˜¯å¯¹æ­£åœ¨åšçš„äº‹æƒ…æ²¡æœ‰å…´è¶£ï¼Œè€Œæ˜¯æ²¡èƒ½åŠ›æŠŠç›®å‰æ­£åœ¨åšçš„äº‹æƒ…åšå¥½ï¼Œæœ€ç»ˆæ²¡æœ‰äººå–œæ¬¢è‡ªå·±åšä¸å¥½çš„äº‹æƒ…ã€‚ å¾€å¾€å¹¶ä¸æ˜¯æœ‰å…´è¶£æ‰èƒ½åšå¥½ï¼Œè€Œæ˜¯åšå¥½äº†æ‰æœ‰å…´è¶£ã€‚ æˆåŠŸï¼Œéƒ½åªé ä¸¤ä»¶äº‹ï¼šç­–ç•¥å’ŒåšæŒï¼Œè€ŒåšæŒæœ¬èº«å°±æ˜¯æœ€é‡è¦çš„ç­–ç•¥æ–¹æ³•å›ºç„¶é‡è¦ï¼Œä½†æ˜¯æ¯”èµ·â€œç”¨åŠŸâ€æ¥è¯´ï¼Œæ–¹æ³•å‡ ä¹Žå¯ä»¥å¿½ç•¥ä¸è®¡ã€‚è¯´ æ‰€è°“çš„â€œå¥½çš„æ–¹æ³•â€å®žé™…ä¸Šæ˜¯å› äººè€Œå¼‚çš„ã€‚é€‚åˆè¿™ä¸ªäººçš„æ–¹æ³•æ”¾åˆ°å¦å¤–ä¸€ä¸ªäººèº«ä¸Šå¾ˆå¯èƒ½é€‚å¾—å…¶åï¼Œé€‚åˆæ‰€æœ‰äººçš„æ–¹æ³•å¯èƒ½æ ¹æœ¬ä¸å­˜åœ¨ã€‚ä¸Žå…¶ä¸åœåœ°æ‰¾æ›´å¥½çš„æ–¹æ³•ï¼Œè¿˜ä¸å¦‚é©¬ä¸Šå¼€å§‹è¡ŒåŠ¨ï¼Œçœå¾—è™šåº¦æ›´å¤šçš„æ—¶é—´ã€‚ è‡ªå·±æ‰€é¢ä¸´çš„ç—›è‹¦å¹¶æ²¡æœ‰æ‰€æ„Ÿå—åˆ°çš„é‚£ä¹ˆå¼ºçƒˆï¼Œç¬¬ä¸€ç§åŠžæ³•æ˜¯å½“ä½ é¢ä¸´å°´å°¬çš„æ—¶å€™ï¼Œè®°å¾—ä¸€å®šè¦æ‹¿å‡ºçº¸ç¬”æ¥ï¼ŒæŠŠä½ æ‰€é‡åˆ°çš„å°´å°¬è®°å½•ä¸‹æ¥ï¼›å¦ä¸€ä¸ªåŠžæ³•æ˜¯ï¼Œåœ¨é¢ä¸´å°´å°¬çš„æ—¶å€™ï¼Œå°½é‡å¼±åŒ–ä½ çš„ç—›è‹¦ã€‚ å°½ç®¡æƒ…ç»ªæœ‰å¾ˆå¤šç§ï¼Œä½†æœ€éœ€è¦æŽ§åˆ¶çš„å¤§æŠµä¸Šåªæœ‰ä¸€ç§ï¼šç—›è‹¦ å¾ˆå¤šçš„æ—¶å€™ï¼Œæ¯”è¾ƒæ˜¯ä¸ªå‘ï¼Œå¤§å‘ã€‚å†å¹²è„†ç‚¹ï¼Œæ¯”è¾ƒå°±æ˜¯é™·é˜±æ¯”æˆåŠŸæ›´é‡è¦çš„æ˜¯æˆé•¿ã€‚ ä¸€å®šè¦æƒ³æ¸…æ¥šå¹¶è®°ä½è¿™ä»¶äº‹å„¿ï¼šç›¸ä¿¡è¿æ°”å…¶å®žæ˜¯ç¼ºä¹è‡ªåˆ¶åŠ›çš„è¡¨çŽ°ã€‚ æµªè´¹æ—¶é—´ã€è™šåº¦å¹´åŽçš„äººï¼Œæœ‰ä¸ªå…±åŒçš„ç‰¹å¾â€”ä»–ä»¬æ‹¼å‘½æƒ³æŽ§åˆ¶è‡ªå·±å®Œå…¨ä¸èƒ½æŽ§åˆ¶çš„ï¼Œå´åœ¨è‡ªå·±çœŸæ­£èƒ½æŽŒæŽ§çš„åœ°æ–¹å½»åº•å¤±æŽ§ã€‚ å¼±è€…ç›¸ä¿¡è¿æ°”ï¼Œå¼ºè€…åªç©¶å› æžœ åŠªåŠ›å¾€å¾€çœŸçš„ä¼šæ”¹å˜ä¸€ä¸ªäººçš„è¿æ°” åƒä¸‡ä¸è¦ç›¸ä¿¡â€œæœºä¸å¯å¤±ï¼Œæ—¶ä¸å†æ¥â€ã€‚å½“ä½ æ²¡æœ‰å‡†å¤‡å¥½çš„æ—¶å€™ï¼Œå¯¹ä½ æ¥è®²ï¼Œä¸å­˜åœ¨ä»»ä½•æœºä¼šã€‚ æ‰¿è®¤è‡ªå·±èƒ½åŠ›æœ‰é™ï¼Œæ˜¯å¿ƒç†å¥åº·çš„å‰æ â€œé‡åŠ›è€Œè¡Œâ€æ˜¯å¦‚æ­¤é«˜éš¾åº¦çš„è¡Œä¸ºæ¨¡å¼â€”a.æ‰¿è®¤è‡ªå·±èƒ½åŠ›æœ‰é™ï¼›b.ä¸æ€•åœ¨åˆ«äººé¢å‰éœ²æ€¯ï¼›c.æ•¢äºŽä¸åŽ»è¯æ˜Žè‡ªå·±æ˜¯â€œå¥½äººâ€ ç”Ÿæ´»çš„æ™ºæ…§å°±åœ¨äºŽï¼Œé›†ä¸­ç²¾åŠ›æ”¹å˜é‚£äº›èƒ½å¤Ÿæ”¹å˜çš„ï¼Œè€ŒæŠŠé‚£äº›ä¸èƒ½æ”¹å˜çš„æš‚æ—¶å¿½ç•¥æŽ‰ã€‚ä¸“å¿ƒæ‰“é€ è‡ªå·±ï¼ŒæŠŠè‡ªå·±æ‰“é€ æˆä¸€ä¸ªä¼˜ç§€çš„äººï¼Œä¸€ä¸ªæœ‰ç”¨çš„äººï¼Œä¸€ä¸ªç‹¬ç«‹çš„äººï¼Œæ¯”ä»€ä¹ˆéƒ½é‡è¦ã€‚æ‰“é€ è‡ªå·±ï¼Œå°±ç­‰äºŽæ‰“é€ äººè„‰ï¼Œå› ä¸ºåªæœ‰ä¼˜ç§€çš„äººæ‰æ‹¥æœ‰æœ‰æ•ˆçš„äººè„‰ã€‚ ä¸“å¿ƒåšå¯ä»¥æå‡è‡ªå·±çš„äº‹æƒ…ï¼Œå­¦ä¹ å¹¶æ‹¥æœ‰æ›´å¤šæ›´å¥½çš„æŠ€èƒ½ï¼Œæˆä¸ºä¸€ä¸ªå€¼å¾—äº¤å¾€çš„äººã€‚ åœæ­¢å˜²å¼„ä»–äººï¼Œå·±æ‰€ä¸æ¬²ï¼Œå‹¿æ–½äºŽäººâ€ ç´ æç§¯ç´¯å›ºç„¶éžå¸¸é‡è¦ï¼Œç„¶è€Œï¼Œå¦‚æžœæå‰ç¡®å®šä¸€ä¸ªæ–¹å‘æˆ–è€…ç›®æ ‡ï¼Œé‚£ä¹ˆå°±ç”šè‡³å¯ä»¥ç§¯ç´¯å¾ˆå¤šåŽŸæœ¬ä¸å¯èƒ½æƒ³è±¡çš„ç´ æâ€”æƒŠå–œè¿žè¿žã€‚ æ°¸è¿œé¼“åŠ±èº«è¾¹çš„äººï¼Œå“ªæ€•å¤šå°‘æœ‰äº›ç›²ç›®ã€‚ å½“ä½ ä¸åœåœ°é¼“åŠ±æ‰€æœ‰äººçš„æ—¶å€™ï¼Œæœ€å¤§çš„å—ç›Šè€…å…¶å®žæ˜¯ä½ è‡ªå·±ï¼Œå› ä¸ºæœ€ç»ˆä½ ä¼šå‘çŽ°ä½ å¼€å§‹è¿›å…¥ä¸€ç§ä»–äººæ— æ³•æƒ³è±¡çš„çŠ¶æ€ï¼šä½ æˆäº†ä¸€ä¸ªä¸éœ€è¦ä»–äººé¼“åŠ±çš„äººã€‚ è®°ä½ï¼Œä½ ä¸å¯èƒ½ç™¾åˆ†ä¹‹ç™¾åœ°æœ‰æ•ˆçŽ‡ï¼Œè‡³å°‘ä¸å¯èƒ½æ€»æ˜¯ç™¾åˆ†ä¹‹ç™¾åœ°æœ‰æ•ˆçŽ‡ åœ¨åšæ—¶é—´é¢„ç®—çš„æ—¶å€™ï¼Œä¸€å®šè¦ç•™æœ‰ç©ºé—´ã€‚a.ä½ å¿…é¡»æ¸…æ¥šè‚¯å®šä¼šæœ‰æ„å¤–äº‹ä»¶å‘ç”Ÿï¼Œb.ä½ å¿…é¡»ç”¨é€‚å½“çš„æ–¹æ³•ä¼‘æ¯ã€æ”¾æ¾ â€œç´¯â€è¿™ä¸ªäº‹å®žï¼Œé€ æˆä¸€ç§å¹»è§‰â€œæˆ‘ä¸€ç›´åœ¨åŠªåŠ›â€ã€‚ å‡¡æ˜¯å€¼å¾—åšçš„äº‹æƒ…ï¼Œéƒ½å€¼å¾—æ…¢æ…¢åšâ€”åšå¾ˆä¹…å¾ˆä¹…ã€‚ è¦æƒ³åŠžæ³•æå‰é¢„çŸ¥è‡ªå·±éœ€è¦æ€Žæ ·çš„æŠ€èƒ½ï¼Œç„¶åŽç¡®å®šé‚£æ˜¯ä¸€ä¸ªè‡ªå·±å¯ä»¥é€šè¿‡ç»ƒä¹ çœŸæ­£ç†Ÿç»ƒæŽŒæ¡çš„æŠ€èƒ½ï¼Œè€ŒåŽåˆ¶å®šé•¿æœŸè®¡åˆ’ï¼Œä¸€ç‚¹ä¸€ç‚¹åœ°æ‰§è¡Œè¯¥è®¡åˆ’ ä¸è¦ç›²ç›®åœ°è¯•å›¾å‡å°‘ç¡çœ æ—¶é—´ã€‚ å°½é‡ä¸è¦å‡å°‘ä¸Žå®¶åº­æˆå‘˜å’Œäº²å±žäº¤æµçš„æ—¶é—´ã€‚ æœ€å¥½ä¸è¦æ”¾å¼ƒä½ çš„ç¤¾äº¤æ—¶é—´ â€œè¯æ˜Žè‡ªå·±ç»™åˆ«äººçœ‹â€æ°æ°æ˜¯æœ€æµªè´¹ç”Ÿå‘½çš„ä¸€ç§è¡Œä¸ºã€‚ ä»»ä½•ç§¯ç´¯éƒ½éœ€è¦æ—¶é—´ï¼Œå¹¶ä¸”å¿…ç„¶éœ€è¦æ¼«é•¿çš„æ—¶é—´ã€‚ â€œå‡ºæ¥æ··çš„ï¼Œæ—©æ™šè¦è¿˜â€]]></content>
      <categories>
        <category>è¯»ä¹¦</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‡½æ•°å¼ç¼–ç¨‹å’Œé“¾å¼ç¼–ç¨‹]]></title>
    <url>%2F2017%2F11%2F12%2F%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E5%92%8C%E9%93%BE%E5%BC%8F%E7%BC%96%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;ç®€å•è¯´ä¸‹å‡½æ•°å¼ç¼–ç¨‹å’Œé“¾å¼ç¼–ç¨‹çš„ç†è§£ å‡½æ•°å¼ç¼–ç¨‹æ¦‚å¿µ&emsp;&emsp;å‡½æ•°å¼ç¼–ç¨‹æ‰€å¼ºè°ƒçš„å‡½æ•°ï¼Œä¸Šè¿°ä¸¤ç‚¹å¯ç¿»è¯‘ä¸ºï¼š1ã€ä¸ä¾èµ–å¤–éƒ¨çŠ¶æ€ï¼›2ã€ä¸æ”¹å˜å¤–éƒ¨çŠ¶æ€ ç†æƒ³çŠ¶æ€ä¸‹çš„çº¯å‡½æ•° å˜é‡ä½œç”¨åŸŸåœ¨å‡½æ•°å†…ï¼Œå¦‚æžœéœ€è¦å¤–éƒ¨å˜é‡éœ€è¦å½“åšå‡½æ•°çš„å‚æ•°ä¼ å…¥ ä¸ä¼šäº§ç”Ÿå‰¯ä½œç”¨ï¼Œä¸èƒ½æ”¹å˜è¢«è½¬å…¥æ•°æ®æˆ–å…¶ä»–æ•°æ® ç›¸åŒå…¥å‚ï¼Œè¿”å›žå€¼å¿…ç„¶ç›¸åŒ å‡½æ•°ä½œä¸ºä¸€ç­‰å…¬æ°‘ï¼Œè·Ÿswiftä¸€æ ·ç†è§£å³å¯ é«˜é˜¶å‡½æ•°ï¼šå¯ä»¥æŠŠå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•° ä¼˜åŒ–æŠ€æœ¯ï¼šå°¾è°ƒç”¨ä¼˜åŒ–æŠ€æœ¯ï¼Œå³æœ€åŽä¸€ä¸ªreturnè¿”å›žä¸€ä¸ªå‡½æ•°ï¼Œå‡å°‘åŽ‹æ ˆæ¬¡æ•°ï¼Œå‚è€ƒï¼šå°¾è°ƒç”¨ä¼˜åŒ– OCå®žçŽ°ï¼Œä»£è¡¨RAC12345678910111213141516171819202122232425262728293031@interface Person : NSObject- (Person *)walk:(NSString * (^)(void))hotel;- (Person *)eat:(NSString * (^)(NSArray *))food;- (Person *)sayGood;@end@implementation Person- (Person *)walk:(NSString * (^)(void))hotel &#123;NSLog(@&quot;go to %@&quot;,hotel());return self;&#125;- (Person *)eat:(NSString * (^)(NSArray *))food &#123;NSString *someFood = food(@[@&quot;apple&quot;,@&quot;banner&quot;,@&quot;potato&quot;]);NSLog(@&quot;eat %@&quot;,someFood);return self;&#125;- (Person *)sayGood &#123;NSLog(@&quot;the food is vear good!&quot;);return self;&#125;@end// ä½¿ç”¨Person *person = [[Person alloc] init];[[[person walk:^NSString * _Nonnull&#123;return @&quot;my home&quot;;&#125;] eat:^NSString * _Nonnull(NSArray * _Nonnull foods) &#123;return foods[1];&#125;] sayGood ]; é“¾å¼ç¼–ç¨‹&emsp;&emsp;å¤šä¸ªæ–¹æ³•ä½¿ç”¨ç‚¹è¯­æ³•é“¾æŽ¥èµ·æ¥ï¼Œè®©ä»£ç æ›´åŠ ç®€æ´ï¼Œå¯è¯»æ€§æ›´å¼º OCå®žçŽ°ï¼Œä»£è¡¨Masonry12345678910111213141516171819202122232425262728293031323334353637383940414243@class Person;typedef Person *_Nonnull(^actionBlock)(NSString *);@interface Person : NSObject@property (nonatomic, strong) NSMutableString *log;@property (nonatomic, copy) actionBlock walk;@property (nonatomic, copy) actionBlock eat;@property (nonatomic, copy) actionBlock sayGood;@end@implementation Person- (instancetype)init &#123;self = [super init];if (self) &#123;_log = [[NSMutableString alloc] init];&#125;return self;&#125;- (actionBlock)walk &#123;__block NSMutableString *log = _log;return ^(NSString *str)&#123;[log appendString:[NSString stringWithFormat:@&quot;go to %@&quot;,str]];return self;&#125;;&#125;- (actionBlock)eat &#123;__block NSMutableString *log = _log;return ^(NSString *str)&#123;[log appendString:[NSString stringWithFormat:@&quot; eat %@&quot;,str]];return self;&#125;;&#125;- (actionBlock)sayGood &#123;__block NSMutableString *log = _log;return ^(NSString *str)&#123;[log appendString:[NSString stringWithFormat:@&quot; the %@ is vear good!&quot;,str]];return self;&#125;;&#125;@endPerson *p = [[Person alloc] init];p.walk(@&quot;my home&quot;).eat(@&quot;apple&quot;).sayGood(@&quot;apple&quot;);NSLog(@&quot;%@&quot;,p.log); å‚è€ƒ https://www.cnblogs.com/zy1987/p/3788670.html http://mrpeak.cn/blog/functional/ https://blog.csdn.net/sinat_27706697/article/details/48946485 æ›´æ–°å‚è€ƒ https://mp.weixin.qq.com/s/0gErQ3tjDLZuD1bYOhi0mQ https://www.liaoxuefeng.com/article/1260118907809920]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[xibä¸Žä»£ç é¢œè‰²åå·®é—®é¢˜]]></title>
    <url>%2F2017%2F10%2F20%2Fxib%E4%B8%8E%E4%BB%A3%E7%A0%81%E9%A2%9C%E8%89%B2%E5%81%8F%E5%B7%AE%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;ä»Šå¤©è§†è§‰èµ°æŸ¥æ—¶å‘çŽ°ä¸€ä¸ªé—®é¢˜ï¼Œè§†è§‰ç»™çš„stechæ–‡ä»¶ç»™å‡ºäº†é¢œè‰²å€¼ï¼Œæ­£å¸¸æµç¨‹æ˜¯æ‹¿åˆ°é¢œè‰²å€¼ç›´æŽ¥æ‰”è¿‡åŽ»å°±ä¸ç®¡äº†ï¼ä½†ä»Šå¤©è¸©é›·äº†ï¼ŒUIçš„ç«çœ¼é‡‘ç›ç«Ÿç„¶å‘ä¸‹é¢œè‰²ä¸ä¸€æ ·ï¼Œä»£ç é‡Œæ•°å€¼æ˜Žæ˜Žéƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†ä»”ç»†è§‚å¯Ÿçš„è¯ï¼Œç¡®å®žæœ‰ä¸€ç‚¹ç‚¹çš„åŒºåˆ«ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ &emsp;&emsp;ç»è¿‡ä»”ç»†æŽ’æŸ¥ï¼Œæ²¡å‘çŽ°ä»»ä½•ç¨‹åºä¸Šçš„é—®é¢˜ï¼Œä¸”å‘çŽ°çº¯ä»£ç è®¾ç½®çš„é¢œè‰²æ˜¯æ­£ç¡®çš„ï¼Œåªæœ‰xib/SBè®¾ç½®çš„é¢œè‰²ä¸æ­£ç¡®ï¼Œé‚£æ˜¯ä¸æ˜¯xibè‡ªå·±çš„å‘ï¼Ÿ &emsp;&emsp;æ–°å»ºä¸€ä¸ªxibï¼Œéšä¾¿é€‰ä¸ªé¢œè‰²ï¼Œä¿å­˜ï¼Œå³é”®æŸ¥çœ‹xmlï¼Œå¾—åˆ°æºç å¦‚ä¸‹ï¼š12345&lt;view contentMode=&quot;scaleToFill&quot; id=&quot;iN0-l3-epB&quot;&gt;&lt;rect key=&quot;frame&quot; x=&quot;0.0&quot; y=&quot;0.0&quot; width=&quot;414&quot; height=&quot;896&quot;/&gt;&lt;autoresizingMask key=&quot;autoresizingMask&quot; widthSizable=&quot;YES&quot; heightSizable=&quot;YES&quot;/&gt;&lt;color key=&quot;backgroundColor&quot; red=&quot;0.0&quot; green=&quot;0.97680455450000003&quot; blue=&quot;0.0&quot; alpha=&quot;1&quot; colorSpace=&quot;custom&quot; customColorSpace=&quot;sRGB&quot;/&gt;&lt;/view&gt; &emsp;&emsp;ä»£ç è®¾ç½®é¢œè‰²çš„æ–¹æ³•å¦‚ä¸‹ï¼š123UIColor *colorFromRGB(float r, float g, float b, float alpha) &#123;return [UIColor colorWithRed:r/255.f green:g/255.f blue:b/255.f alpha:alpha];&#125; &emsp;&emsp;å¯¹æ¯”å‘çŽ°xibå¤šäº†ä¸€ä¸ªcolorSpaceï¼Œå³é¢œè‰²ç©ºé—´ï¼å¾ˆæœ‰å¯èƒ½æ˜¯è¿™ä¸ªé—®é¢˜ï¼Œå†æ¬¡æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ï¼Œå‘çŽ°å¦‚ä¸‹è§£é‡Š123+ (UIColor *)colorWithRed:(CGFloat)red green:(CGFloat)green blue:(CGFloat)blue alpha:(CGFloat)alpha;The color object. The color information represented by this object is in an RGB colorspace. On applications linked for iOS 10 or later, the color is specified in an extended range sRGB color space. On earlier versions of iOS, the color is specified in a device RGB colorspace. &emsp;&emsp;ç®€å•ç¿»è¯‘å°±æ˜¯iOS10ä¹‹åŽä½¿ç”¨sRGBé¢œè‰²ç©ºé—´ï¼ŒiOS10ä¹‹å‰è·Ÿéšç³»ç»Ÿé¢œè‰²ç©ºé—´è®¾ç½® &emsp;&emsp;é‚£iOS10ä¹‹å‰çš„é¢œè‰²ç©ºé—´æ˜¯ä»€ä¹ˆï¼ŸæŸ¥é˜…åˆ°.Xcode Interface Builder æŒ‡å®šé¡è‰²èˆ‡å¯¦éš›æœ‰å‡ºå…¥ Xib/Storyboardé»˜è®¤ç”¨çš„æ˜¯sRGBã€‚ Sketchç”¨çš„æ˜¯sRGBã€‚ PhotoShopé»˜è®¤ç”¨çš„æ˜¯Generic RGBã€‚ ä»£ç ä¸­çš„UIColorèµ‹å€¼ï¼Œç”¨çš„æ˜¯Generic RGBã€‚ &emsp;&emsp;å¾ˆæ˜Žæ˜¾äº†ï¼ä¿®æ”¹æ–¹å¼ä¹Ÿæ¯”è¾ƒç®€å•äº†ï¼ŒæŠŠé¢œè‰²ç©ºé—´æ”¹æˆsRGBå³å¯ &emsp;&emsp;æœ¬æ¥åˆ°è¿™ä¸ºæ­¢ï¼æˆ‘å·²ç»æ°´å®Œäº†ï¼å·²ç»å®Œæˆäº†æ°´ä¸€ç¯‡çš„ä»»åŠ¡ï¼ &emsp;&emsp;ä½†æ˜¯æˆ‘ä»¬çš„ .clræ–‡ä»¶é‡Œæœ‰ä¸€ç™¾å¤šä¸ªé¢œè‰²å€¼ï¼Œæˆ‘æ€Žä¹ˆæ”¹æ‰è¡Œï¼Ÿ æœ€ç†æƒ³ï¼šå†™ç®—æ³•æ‰¹é‡è½¬åŒ–ï¼ä½†æˆ‘ä¸æ‡‚é¢œè‰²ç©ºé—´çš„çŸ¥è¯†ï¼Œè€Œä¸”è¿™ä¸ªæ˜¯ä¸€æ¬¡æ€§æ“ä½œï¼Œä¸“é—¨åŽ»å­¦ä¹ æˆæœ¬å¤ªé«˜ï¼å¤±è´¥ é€€è€Œæ¬¡ä¹‹ï¼šç›´æŽ¥åœ¨xibé‡Œä¿®æ”¹é¢œè‰²å€¼çš„colorspaceï¼ä¸è¡Œï¼Œå› ä¸ºxibé‡Œç›´æŽ¥ä¿®æ”¹é¢œè‰²å€¼ï¼Œxcodeä¸ºäº†ä¿è¯é¢œè‰²ä¸€è‡´ï¼Œä¿®æ”¹äº†Redï¼ŒGreenå’ŒBlueçš„å€¼ï¼Œè€Œæˆ‘ä»¬çš„éœ€æ±‚æ˜¯Redï¼ŒGreenå’ŒBlueçš„å€¼æ˜¯æ­£ç¡®çš„ å†æ¬¡ä¹‹ï¼šæ‰‹åŠ¨è¾“å…¥Redï¼ŒGreenå’ŒBlueçš„å€¼ï¼Œå†é€‰æ‹©colorspaceï¼å¯ä»¥åšï¼Œä½†å·¥ä½œé‡æ¯”è¾ƒå¤§ï¼Œè€Œä¸”æ­¥éª¤è¾ƒå¤šï¼Œä»¥åŽæ–°å¢žé¢œè‰²å‡ºé—®é¢˜çš„å¯èƒ½æ€§æ¯”è¾ƒå¤§ï¼.clræ–‡ä»¶æ˜¯å…±äº«çš„ï¼Œç»´æŠ¤æˆæœ¬è¾ƒé«˜ &emsp;&emsp;ç»è¿‡æ•°æ¬¡è¯•éªŒå‘çŽ°ï¼šåœ¨xibé‡Œä½¿ç”¨å¸ç®¡æ¥å–é¢œè‰²å€¼ï¼Œèƒ½å¤Ÿæ­£ç¡®çš„å–åˆ°äº†Redï¼ŒGreenå’ŒBlueçš„å€¼ï¼Œå¹¶æ­£ç¡®è®¾ç½®colorspaceï¼ &emsp;&emsp;==ç»“è®ºï¼šä½¿ç”¨å¸ç®¡æ¥å¸é¢œè‰²æœ€é è°±ï¼Œå›¢é˜Ÿç»´æŠ¤æˆæœ¬ä¹Ÿè¾ƒä½Ž==]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>UI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[otoolå‘½ä»¤]]></title>
    <url>%2F2017%2F10%2F09%2Fotool%E5%91%BD%E4%BB%A4%2F</url>
    <content type="text"><![CDATA[1 ç®€ä»‹&emsp;&emsp;Otoolå¯ä»¥æå–å¹¶æ˜¾ç¤ºiosä¸‹ç›®æ ‡æ–‡ä»¶çš„ç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¤´éƒ¨ã€åŠ è½½å‘½ä»¤ã€å„ä¸ªæ®µã€å…±äº«åº“ã€åŠ¨æ€åº“ç­‰ã€‚Otoolæ‹¥æœ‰å¤§é‡çš„å‘½ä»¤é€‰é¡¹ï¼Œæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„åˆ†æžå·¥å…·ï¼Œä¹Ÿå¯ä»¥åæ±‡ç¼–ï¼å¸¸ç”¨äºŽé€†å‘å·¥ç¨‹ï¼Œè¿™é‡Œä¸å†™é€†å‘å·¥ç¨‹ï¼Œå°±å†™ç‚¹otoolå‘½ä»¤ &emsp;&emsp;ç¬¬ä¸€ä¸ªå‘½ä»¤æ°¸è¿œæ˜¯helpï¼Œä½†åˆšå¼€å¤´å°±å¡å£³äº†ï¼æ— è®ºotool -hï¼Œè¿˜æ˜¯otool -helpï¼Œéƒ½ä¼šæç¤ºé”™è¯¯ã€‚1error: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool: at least one file must be specified &emsp;&emsp;æˆ‘æƒ³ç ´è„‘è¢‹ä¹Ÿæ²¡æƒ³æ˜Žç™½æ€Žä¹ˆä¼šè¿™æ ·ï¼Ÿå…¸åž‹çš„åäººç±»è®¾è®¡ï¼ä¸è¿‡è¿˜æ˜¯å¯ä»¥çœ‹åˆ°ç›¸å…³çš„å‘½ä»¤è§£é‡Šçš„ï¼æ›´æ–°ï¼šotool+å›žè½¦ï¼Œæ‰æ˜¯æ­£ç¡®çš„helpå‘½ä»¤123456789101112131415161718192021222324252627282930313233Usage: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool [-arch arch_type] [-fahlLDtdorSTMRIHGvVcXmqQjCP] [-mcpu=arg] [--version] &lt;object file&gt; ...-f print the fat headers-a print the archive header-h print the mach header-l print the load commands-L print shared libraries used-D print shared library id name-t print the text section (disassemble with -v)-p &lt;routine name&gt; start dissassemble from routine name-s &lt;segname&gt; &lt;sectname&gt; print contents of section-d print the data section-o print the Objective-C segment-r print the relocation entries-S print the table of contents of a library (obsolete)-T print the table of contents of a dynamic shared library (obsolete)-M print the module table of a dynamic shared library (obsolete)-R print the reference table of a dynamic shared library (obsolete)-I print the indirect symbol table-H print the two-level hints table (obsolete)-G print the data in code table-v print verbosely (symbolically) when possible-V print disassembled operands symbolically-c print argument strings of a core file-X print no leading addresses or headers-m don&apos;t use archive(member) syntax-B force Thumb disassembly (ARM objects only)-q use llvm&apos;s disassembler (the default)-Q use otool(1)&apos;s disassembler-mcpu=arg use `arg&apos; as the cpu for disassembly-j print opcode bytes-P print the info plist section as strings-C print linker optimization hints--version print the version of /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool &emsp;&emsp;ç”±ä¸Šå¯çŸ¥ otoolåœ°å€ï¼š/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool å‰å¾€binç›®å½•å¾—çŸ¥otoolå…¶å®žæ˜¯llvm-otoolã€‚binç›®å½•ä¸‹è¿˜æœ‰å¾ˆå¤šå·¥å…·ï¼Œæˆ‘ä¼¼ä¹Žçœ‹åˆ°äº†å¥½å¤šæ°´æ–‡åœ¨å‘æˆ‘æ‹›æ‰‹ï¼Œå˜¿å˜¿â€¦ ä½¿ç”¨æ–¹å¼ï¼š otool [-arch arch_type] [-fahlLDtdorSTMRIHGvVcXmqQjCP] [-mcpu=arg] [â€“version] â€¦ 2 å¸¸ç”¨å‘½ä»¤ æŸ¥çœ‹Mach-Oå¤´ç»“æž„ 12otool -v -h a.outotool -h xxx.app/xxx æŸ¥çœ‹load commands 12otool -v -l a.outotool -l xxx.app/xxx æŸ¥çœ‹Objective-C segment 1otool -o xxx.app/xxx æŸ¥çœ‹Sectionä¸­çš„å†…å®¹ 1234// æŸ¥çœ‹__TEXT segnameçš„ __textæ®µotool -s __TEXT __text a.out // ç”±äºŽ -s __TEXT __text å¾ˆå¸¸è§ï¼Œotool å¯¹å…¶è®¾ç½®äº†ä¸€ä¸ªç¼©å†™ -totool -t a.out æ·»åŠ  -v æ¥æŸ¥çœ‹åæ±‡ç¼–ä»£ç  12// æŸ¥çœ‹åæ±‡ç¼–ä¹‹åŽçš„__TEXT segnameçš„ __textæ®µotool -v -t xxx.app/xxx èŽ·å–æ‰€æœ‰æ–¹æ³•åç§° 1otool -v -s __TEXT __objc_methname xxx.app/xxx æŸ¥çœ‹ä¾èµ–çš„åŠ¨æ€åº“ 1otool -L xxx.app/xxx æŸ¥çœ‹æ”¯æŒçš„æ¡†æž¶ 1otool -D xxx.app/xxx æŸ¥çœ‹è¯¥åº”ç”¨æ˜¯å¦åŠ å£³ 12otool -l xxx.app/xxx | grep -B 2 crypt// cryptid 0ï¼ˆç ¸å£³ï¼‰ 1ï¼ˆæœªç ¸å£³ï¼‰ 3 å¸¸è§çš„Section&emsp;&emsp;æ›´å¤šSectionä»‹ç» Section è§£é‡Š TEXT.text ä¸»ç¨‹åºä»£ç  TEXT.cstring C è¯­è¨€å­—ç¬¦ä¸² TEXT.const const å…³é”®å­—ä¿®é¥°çš„å¸¸é‡ TEXT.stubs ç”¨äºŽ Stub çš„å ä½ä»£ç ï¼Œå¾ˆå¤šåœ°æ–¹ç§°ä¹‹ä¸ºæ¡©ä»£ç ã€‚ TEXT.stubs_helper å½“ Stub æ— æ³•æ‰¾åˆ°çœŸæ­£çš„ç¬¦å·åœ°å€åŽçš„æœ€ç»ˆæŒ‡å‘ TEXT.objc_methname Objective-C æ–¹æ³•åç§° TEXT.objc_methtype Objective-C æ–¹æ³•ç±»åž‹ TEXT.objc_classname Objective-C ç±»åç§° DATA.data åˆå§‹åŒ–è¿‡çš„å¯å˜æ•°æ® DATA.la_symbol_ptr lazy binding çš„æŒ‡é’ˆè¡¨ï¼Œè¡¨ä¸­çš„æŒ‡é’ˆä¸€å¼€å§‹éƒ½æŒ‡å‘ __stub_helper __DATA.nl_symbol_ptr éž lazy binding çš„æŒ‡é’ˆè¡¨ï¼Œæ¯ä¸ªè¡¨é¡¹ä¸­çš„æŒ‡é’ˆéƒ½æŒ‡å‘ä¸€ä¸ªåœ¨è£…è½½è¿‡ç¨‹ä¸­ï¼Œè¢«åŠ¨æ€é“¾æœºå™¨æœç´¢å®Œæˆçš„ç¬¦å· DATA.const æ²¡æœ‰åˆå§‹åŒ–è¿‡çš„å¸¸é‡ DATA.cfstring ç¨‹åºä¸­ä½¿ç”¨çš„ Core Foundation å­—ç¬¦ä¸²ï¼ˆCFStringRefsï¼‰ DATA.bss BSSï¼Œå­˜æ”¾ä¸ºåˆå§‹åŒ–çš„å…¨å±€å˜é‡ï¼Œå³å¸¸è¯´çš„é™æ€å†…å­˜åˆ†é… DATA.common æ²¡æœ‰åˆå§‹åŒ–è¿‡çš„ç¬¦å·å£°æ˜Ž DATA.objc_classlist Objective-C ç±»åˆ—è¡¨ DATA.objc_protolist Objective-C åŽŸåž‹ DATA.objc_imginfo Objective-C é•œåƒä¿¡æ¯ DATA.objc_selfrefs Objective-C self å¼•ç”¨ DATA.objc_protorefs Objective-C åŽŸåž‹å¼•ç”¨ DATA.objc_superrefs Objective-C è¶…ç±»å¼•ç”¨]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>ç¼–è¯‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[dyldç¬”è®°]]></title>
    <url>%2F2017%2F09%2F23%2Fdyld%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;å‰ä¸€æ®µæ—¶é—´æ•´ç†äº†ä¸‹iOSçš„ç¼–è¯‘è¿‡ç¨‹ï¼Œå¯¹æ•´ä½“æµç¨‹æœ‰äº†ä¸ªå¤§æ¦‚å°è±¡ï¼ä½†åœ¨ç‚¹å‡» Run ä¹‹åŽå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿé‡Œæåˆ°äº†APPå¯åŠ¨ä¸­dyldçš„ä½œç”¨ï¼Œå¯¹æ­¤äº†è§£ä¸æ˜¯å¾ˆå¤šï¼Œåªæ˜¯çŸ¥é“dyldæ˜¯ç”¨æ¥åŠ è½½çš„ï¼Œæ­£å¥½çœ‹åˆ°å¤§ç¥žçš„ç›¸å…³æ–‡ç« ï¼Œè¿™æ¬¡å°±æ°´ä¸€æ°´dyldç¬”è®°å§ &emsp;&emsp;å…ˆä¸‹è½½dyldæºç  1 __dyld_start&emsp;&emsp;loadæ–¹æ³•æ‰“ä¸ªæ–­ç‚¹ï¼Œè°ƒç”¨æ ˆç¬¬ä¸€ä¸ªå°±æ˜¯æˆ‘ä»¬è¦è§‚å¯Ÿçš„__dyld_startçš„æ–¹æ³•ã€‚æ±‡ç¼–çœ‹ä¸æ‡‚(è™½ç„¶LLVM -diså¯ä»¥åæ±‡ç¼–ï¼Œä½†IRæ–‡ä»¶æ›´ä¸å¥½ç†è§£ï¼Œè€Œä¸”æ²¡å¿…è¦)ï¼Œä½†æœ‰æ³¨é‡Šå‘€1234567...# call dyldbootstrap::start(app_mh, argc, argv, slide, dyld_mh, &amp;startGlue)...# clean up stack and jump to &quot;start&quot; in main executable...# LC_MAIN case, set up stack for call to main()... &emsp;&emsp;æ‰©å±•ï¼šæ‰§è¡Œ__dyld_startä¹‹å‰æ‰§è¡Œäº†ä»€ä¹ˆï¼Ÿå‚è€ƒ:_dyld_startä¹‹å‰12345678910â–¼ execve // ç”¨æˆ·ç‚¹å‡»äº†app, ç”¨æˆ·æ€ä¼šå‘é€ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ execve åˆ°å†…æ ¸â–¼ __mac_execve // åˆ›å»ºçº¿ç¨‹â–¼ exec_activate_image // åœ¨ encapsulated_binary è¿™ä¸€æ­¥ä¼šæ ¹æ®imageçš„ç±»åž‹é€‰æ‹©imgactçš„æ–¹æ³•â–¼ exec_mach_imgactâ–¼ load_machfileâ–¶ï¸Ž parse_machfile //è§£æžä¸»äºŒè¿›åˆ¶machoâ–¼ load_dylinker // è§£æžå®Œ machoåŽï¼Œæ ¹æ®machoä¸­çš„ LC_LOAD_DYLINKER è¿™ä¸ªLoadCommandæ¥å¯åŠ¨è¿™ä¸ªäºŒè¿›åˆ¶çš„åŠ è½½å™¨ï¼Œå³ /usr/bin/dyldâ–¼ parse_machfile // è§£æž dyld è¿™ä¸ªmach-oæ–‡ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šè§£æžå‡ºentry_pointâ–¼ activate_exec_stateâ–¶ï¸Ž thread_setentrypoint // è®¾ç½®entry_pointã€‚ 2 dyldbootstrap::start æ–¹æ³•1234567891011//// This is code to bootstrap dyld. This work in normally done for a program by dyld and crt. // å°±æ˜¯å¯åŠ¨dyldçš„// In dyld we have to do this manually.//uintptr_t start(const struct macho_header* appsMachHeader, int argc, const char* argv[], intptr_t slide, const struct macho_header* dyldsMachHeader,uintptr_t* startGlue) &#123;// ä¸­é—´ä¸»è¦æ˜¯é‡ç»‘å®šåˆ¤æ–­ã€å‚æ•°è½¬åŒ–ç­‰// æœ€åŽè°ƒç”¨return dyld::_main(appsMachHeader, appsSlide, argc, argv, envp, apple, startGlue);&#125; 3 dyld::_main&emsp;&emsp;æœ‰å°†è¿‘500è¡Œä»£ç ,è¯´å®žè¯æ²¡å¤ªçœ‹æ‡‚ï¼Œè¿˜æ˜¯ç›´æŽ¥è´´å¤§ç¥žçš„æ€»ç»“å§ï¼å¦å¤–å†™ä¸€ç‚¹æˆ‘æ„Ÿå…´è¶£çš„å‡½æ•°123456789101. è®¾ç½®è¿è¡ŒçŽ¯å¢ƒï¼ŒçŽ¯å¢ƒå˜é‡2. åŠ è½½å…±äº«ç¼“å­˜3. å®žä¾‹åŒ–Image4. åŠ¨æ€åº“çš„ç‰ˆæœ¬åŒ–é‡è½½5. åŠ è½½æ’å…¥çš„åŠ¨æ€åº“6. linkä¸»ç¨‹åº7. linkæ’å…¥çš„åŠ¨æ€åº“8. weakBind9. initialize10.main 3.1 åŠ è½½dyld image å’Œ main imageï¼Œ&emsp;&emsp;ä¸çœ‹ä»£ç æˆ‘ä¸€ç›´ä»¥ä¸ºdyldbootstrap::starté˜¶æ®µå°±å·²ç»åŠ è½½dyld image123456// Trace dyld&apos;s loadnotifyKernelAboutImage((macho_header*)&amp;__dso_handle, _simple_getenv(apple, &quot;dyld_file&quot;));#if !TARGET_IPHONE_SIMULATOR// Trace the main executable&apos;s loadnotifyKernelAboutImage(mainExecutableMH, _simple_getenv(apple, &quot;executable_file&quot;));#endif 3.2 å¥‡æ€ªçš„æ³¨é‡Š&emsp;&emsp; çªç„¶é—´å‡ºçŽ° // could not use closure info, launch old way æ³¨é‡Šï¼Œä¹Ÿæ²¡æ‰¾åˆ°returnæˆ–elseå¤„ç†ï¼Œè¿™ä¸ªæ³¨é‡Šæ˜¯å•¥æ„æ€ï¼Ÿæ€Žä¹ˆlaunch old wayï¼Ÿ1234567// load shared cachecheckSharedRegionDisable((dyld3::MachOLoaded*)mainExecutableMH, mainExecutableSlide);// æŽ¥ä¸‹æ¥æ ¡éªŒclosureæ˜¯å¦éœ€è¦æ”¯æŒï¼Œä»¥åŠä¸€äº›æŽªæ–½// é—®é¢˜åœ¨è¿™ï¼Œ// could not use closure info, launch old way 3.3 instantiateFromLoadedImage&emsp;&emsp; isCompatibleMachO æ˜¯æ£€æŸ¥mach-oçš„subtypeæ˜¯å¦æ˜¯å½“å‰cpuå¯ä»¥æ”¯æŒï¼› instantiateMainExecutable å°±æ˜¯å®žä¾‹åŒ–å¯æ‰§è¡Œæ–‡ä»¶ï¼Œ è¿™ä¸ªæœŸé—´ä¼šè§£æžLoadCommandï¼Œ è¿™ä¸ªä¹‹åŽä¼šå‘é€ dyld_image_state_mapped é€šçŸ¥ï¼› addImage æ·»åŠ åˆ° allImagesä¸­ã€‚1234567891011static ImageLoader* instantiateFromLoadedImage(const macho_header* mh, uintptr_t slide, const char* path)&#123;// try mach-o loaderif ( isCompatibleMachO((const uint8_t*)mh, path) ) &#123;ImageLoader* image = ImageLoaderMachO::instantiateMainExecutable(mh, slide, path, gLinkContext);addImage(image);return image;&#125;throw &quot;main executable not a known format&quot;;&#125; 3.4 load libraries&emsp;&emsp; inserted çŽ¯å¢ƒ libraries, then main, then others.1234567891011121314151617181920212223242526272829303132333435363738394041// load any inserted librariesif ( sEnv.DYLD_INSERT_LIBRARIES != NULL ) &#123;for (const char* const* lib = sEnv.DYLD_INSERT_LIBRARIES; *lib != NULL; ++lib) loadInsertedDylib(*lib);&#125;// record count of inserted libraries so that a flat search will look at // inserted libraries, then main, then others.sInsertedDylibCount = sAllImages.size()-1;// link main executablegLinkContext.linkingMainExecutable = true;#if SUPPORT_ACCELERATE_TABLESif ( mainExcutableAlreadyRebased ) &#123;// previous link() on main executable has already adjusted its internal pointers for ASLR// work around that by rebasing by inverse amountsMainExecutable-&gt;rebase(gLinkContext, -mainExecutableSlide);&#125;#endiflink(sMainExecutable, sEnv.DYLD_BIND_AT_LAUNCH, true, ImageLoader::RPathChain(NULL, NULL), -1);sMainExecutable-&gt;setNeverUnloadRecursive();if ( sMainExecutable-&gt;forceFlat() ) &#123;gLinkContext.bindFlat = true;gLinkContext.prebindUsage = ImageLoader::kUseNoPrebinding;&#125;// link any inserted libraries// do this after linking main executable so that any dylibs pulled in by inserted // dylibs (e.g. libSystem) will not be in front of dylibs the program usesif ( sInsertedDylibCount &gt; 0 ) &#123;for(unsigned int i=0; i &lt; sInsertedDylibCount; ++i) &#123;ImageLoader* image = sAllImages[i+1];link(image, sEnv.DYLD_BIND_AT_LAUNCH, true, ImageLoader::RPathChain(NULL, NULL), -1);image-&gt;setNeverUnloadRecursive();&#125;// only INSERTED libraries can interpose// register interposing info after all inserted libraries are bound so chaining worksfor(unsigned int i=0; i &lt; sInsertedDylibCount; ++i) &#123;ImageLoader* image = sAllImages[i+1];image-&gt;registerInterposing(gLinkContext);&#125;&#125; 3.5 weakBind&emsp;&emsp; å¼ºç¬¦å·ï¼šå‡½æ•°å’Œå·²ç»åˆå§‹åŒ–çš„å…¨å±€å˜é‡;å¼±ç¬¦å·ï¼šæœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡ï¼å¼±ç¬¦å·å¯¹äºŽåº“æ¥è¯´ååˆ†æœ‰ç”¨ï¼Œæˆ‘ä»¬åœ¨å¼€å‘åº“æ—¶ï¼Œå¯ä»¥å°†æŸäº›ç¬¦å·å®šä¹‰ä¸ºå¼±ç¬¦å·ï¼Œè¿™æ ·å°±èƒ½å¤Ÿè¢«ç”¨æˆ·å®šä¹‰çš„å¼ºç¬¦å·è¦†ç›–ï¼Œä»Žè€Œä½¿å¾—ç¨‹åºå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰ç‰ˆæœ¬çš„å‡½æ•°ï¼Œå¢žåŠ äº†å¾ˆå¤§çš„çµæ´»æ€§ã€‚1sMainExecutable-&gt;weakBind(gLinkContext); æ€»ç»“ï¼šdyld ä½œç”¨é¡ºåºçš„æ¦‚æ‹¬ ä»Ž kernel ç•™ä¸‹çš„åŽŸå§‹è°ƒç”¨æ ˆå¼•å¯¼å’Œå¯åŠ¨è‡ªå·± å°†ç¨‹åºä¾èµ–çš„åŠ¨æ€é“¾æŽ¥åº“é€’å½’åŠ è½½è¿›å†…å­˜ï¼Œå½“ç„¶è¿™é‡Œæœ‰ç¼“å­˜æœºåˆ¶ non-lazy ç¬¦å·ç«‹å³ link åˆ°å¯æ‰§è¡Œæ–‡ä»¶ï¼Œlazy çš„å­˜è¡¨é‡Œ Runs static initializers for the executable æ‰¾åˆ°å¯æ‰§è¡Œæ–‡ä»¶çš„ main å‡½æ•°ï¼Œå‡†å¤‡å‚æ•°å¹¶è°ƒç”¨ ç¨‹åºæ‰§è¡Œä¸­è´Ÿè´£ç»‘å®š lazy ç¬¦å·ã€æä¾› runtime dynamic loading servicesã€æä¾›è°ƒè¯•å™¨æŽ¥å£ ç¨‹åºmainå‡½æ•° return åŽæ‰§è¡Œ static terminator æŸäº›åœºæ™¯ä¸‹ main å‡½æ•°ç»“æŸåŽè°ƒ libSystem çš„ _exit å‡½æ•° å…¶å®ƒï¼š objcçš„å¯åŠ¨&emsp;&emsp; _objc_initæºç 12345678910111213141516void _objc_init(void)&#123;static bool initialized = false;if (initialized) return;initialized = true;// å„ç§åˆå§‹åŒ–environ_init();tls_init();static_init();lock_init();// çœ‹äº†ä¸€ä¸‹exception_initæ˜¯ç©ºå®žçŽ°ï¼ï¼å°±æ˜¯è¯´objcçš„å¼‚å¸¸æ˜¯å®Œå…¨é‡‡ç”¨c++é‚£ä¸€å¥—çš„ã€‚exception_init();// æ³¨å†Œdyldäº‹ä»¶çš„ç›‘å¬_dyld_objc_notify_register(&amp;map_2_images, load_images, unmap_image);&#125; dyld å¼€å§‹å°†ç¨‹åºäºŒè¿›åˆ¶æ–‡ä»¶åˆå§‹åŒ– äº¤ç”± ImageLoader è¯»å– imageï¼Œå…¶ä¸­åŒ…å«äº†æˆ‘ä»¬çš„ç±»ã€æ–¹æ³•ç­‰å„ç§ç¬¦å· å†ç”±libsystem ä¸­çš„ä¸€ä¸ªinitializeæ–¹æ³• libsystem_initializerä¸­åˆå§‹åŒ–äº† libdispatch ç„¶åŽlibdispatchè°ƒç”¨äº†_os_object_int, æœ€ç»ˆè°ƒç”¨äº† _objc_initï¼Œå¹¶ç»‘å®šruntimeå›žè°ƒ ç”±äºŽ runtime å‘ dyld ç»‘å®šäº†å›žè°ƒï¼Œå½“ image åŠ è½½åˆ°å†…å­˜åŽï¼Œdyld ä¼šé€šçŸ¥ runtime è¿›è¡Œå¤„ç† runtime æŽ¥æ‰‹åŽè°ƒç”¨ map_images åšè§£æžå’Œå¤„ç†ï¼ŒæŽ¥ä¸‹æ¥ load_images ä¸­è°ƒç”¨ call_load_methods æ–¹æ³•ï¼ŒéåŽ†æ‰€æœ‰åŠ è½½è¿›æ¥çš„ Classï¼ŒæŒ‰ç»§æ‰¿å±‚çº§ä¾æ¬¡è°ƒç”¨ Class çš„ +load æ–¹æ³•å’Œå…¶ Category çš„ +load æ–¹æ³• å‚è€ƒ iOS ç¨‹åº main å‡½æ•°ä¹‹å‰å‘ç”Ÿäº†ä»€ä¹ˆ dyldä¸ŽObjC Dyldç³»åˆ—ä¹‹ä¸€ï¼š_dyld_startä¹‹å‰ Dyldä¹‹äºŒ: åŠ¨æ€é“¾æŽ¥è¿‡ç¨‹ dyld åŠ è½½ Mach-O iOSä¸­çš„dyldç¼“å­˜æ˜¯ä»€ä¹ˆï¼Ÿ]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>ç¼–è¯‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSç¼–è¯‘è¿‡ç¨‹]]></title>
    <url>%2F2017%2F09%2F16%2FiOS%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[1 ç¼–è¯‘ç®€ä»‹1.1 ç¼–è¯‘&emsp;&emsp;æŠŠé«˜çº§è¯­è¨€ç¿»è¯‘æˆæœºå™¨è¯­è¨€æˆ–æ±‡ç¼–è¯­è¨€ï¼Œå«ç¼–è¯‘ï¼ &emsp;&emsp;è¯­è¨€ç¿»è¯‘çš„ä¸¤ç§åŸºæœ¬å½¢æ€: ç¼–è¯‘å™¨ä¸Žè§£é‡Šå™¨ ç¼–è¯‘å™¨é‡‡ç”¨å…ˆç¿»è¯‘åŽæ‰§è¡Œ. ä¾‹å¦‚Cè¯­è¨€ .c -&gt; .o -&gt; å†è¿è¡Œï¼ç‰¹ç‚¹ï¼šå·¥ä½œæ•ˆçŽ‡é«˜,å¯ç§»æ¤æ€§å·®ï¼Œæ—¶é—´æ¢ç©ºé—´ è§£é‡Šå™¨é‡‡ç”¨è¾¹ç¿»è¯‘è¾¹æ‰§è¡Œ. ä¾‹å¦‚shell è¾¹å†™è¾¹æ‰§è¡Œï¼ç‰¹ç‚¹ï¼šå·¥ä½œæ•ˆçŽ‡ä½Ž,å¯ç§»æ¤æ€§å¥½ï¼Œç©ºé—´æ¢æ—¶é—´ &emsp;&emsp;ä¸€èˆ¬ç¼–è¯‘å™¨æœ‰ä»¥ä¸‹å·¥ä½œæ­¥éª¤ï¼š è¯æ³•åˆ†æžï¼ˆlexical analysisï¼‰ï¼šæ­¤é˜¶æ®µçš„ä»»åŠ¡æ˜¯ä»Žå·¦åˆ°å³ä¸€ä¸ªå­—ç¬¦ä¸€ä¸ªå­—ç¬¦åœ°è¯»å…¥æºç¨‹åºï¼Œä½¿ç”¨è¯æ³•åˆ†æžå™¨ï¼ˆæ‰«æå™¨ï¼‰å¯¹æž„æˆæºç¨‹åºçš„å­—ç¬¦æµè¿›è¡Œæ‰«æç„¶åŽæ ¹æ®è¯­è¨€çš„è¯æ³•è§„åˆ™è¯†åˆ«å•è¯ï¼ˆTokenï¼‰ï¼Œè‡³å°‘åˆ†ä»¥ä¸‹å‡ ç±»ï¼šå…³é”®å­—(ä¿ç•™å­—)ã€æ ‡è¯†ç¬¦ã€å­—é¢é‡ã€ç‰¹æ®Šç¬¦å· 1.1 è¯†åˆ«è®°å·å¹¶äº¤ç»™è¯­æ³•åˆ†æžå™¨(æ ¹æ®æ¨¡å¼è¯†åˆ«è®°å·) 1.2 æ»¤æŽ‰æºç¨‹åºä¸­çš„æ— ç”¨æˆåˆ†,å¦‚æ³¨é‡Šã€ç©ºæ ¼å’Œå›žè½¦ç­‰ 1.3 å¤„ç†ä¸Žå…·ä½“å¹³å°æœ‰å…³çš„è¾“å…¥(å¦‚æ–‡ä»¶ç»“æŸç¬¦çš„ä¸åŒè¡¨ç¤ºç­‰) è¯­æ³•åˆ†æžï¼ˆSyntactic analysisï¼Œä¹Ÿå« Parsingï¼‰ï¼š æ­¤é˜¶æ®µçš„ä¸»è¦ä»»åŠ¡æ˜¯ç”± è¯æ³•åˆ†æžå™¨ ç”Ÿæˆçš„å•è¯æž„å»º æŠ½è±¡è¯­æ³•æ ‘ï¼ˆAbstract Syntax Tree ï¼ŒASTï¼‰ï¼Œå®Œæˆæ­¤ä»»åŠ¡çš„ç»„ä»¶æ˜¯ è¯­æ³•åˆ†æžå™¨ï¼ˆParserï¼‰ è¯­ä¹‰åˆ†æžï¼ˆSyntax analysisï¼‰ï¼šæ ¹æ®è¯­ä¹‰è§„åˆ™å¯¹è¯­æ³•æ ‘ä¸­çš„è¯­æ³•å•å…ƒè¿›è¡Œé™æ€è¯­ä¹‰æ£€æŸ¥,å¦‚ç±»åž‹æ£€æŸ¥å’Œè½¬æ¢ç­‰,ç›®çš„æ˜¯ä¿è¯è¯­æ³•å’Œè¯­ä¹‰éƒ½æ­£ç¡®ï¼Œå› ä¸ºä¸€ä¸ªè¯­æ³•ä¸Šæ­£ç¡®çš„å¥å­ï¼Œå®ƒæ‰€ä»£è¡¨çš„æ„ä¹‰å¹¶ä¸ä¸€å®šæ­£ç¡®. ä¸­é—´ç ç”Ÿæˆï¼ˆå¯é€‰ï¼‰ï¼šç”Ÿæˆä¸€ç§æ—¢æŽ¥è¿‘ç›®æ ‡è¯­è¨€,åˆä¸Žå…·ä½“æœºå™¨æ— å…³çš„è¡¨ç¤º,ä¾¿äºŽä»£ç ä¼˜åŒ–ä¸Žä»£ç ç”Ÿæˆ.å¥½å¤„æ˜¯å‰åŽåˆ†ç¦»ï¼Œä¾¿äºŽæ‰©å±• ä¸­é—´ä»£ç ä¼˜åŒ–(å¯é€‰)ï¼šä¼˜åŒ–åŽåŠŸèƒ½ç›¸åŒï¼Œä½†åœ¨å ç”¨çš„ç©ºé—´ä¸Šå’Œç¨‹åºæ‰§è¡Œçš„æ—¶é—´ä¸Šéƒ½æ›´çœã€æ›´æœ‰æ•ˆ ç›®æ ‡ä»£ç ç”Ÿæˆï¼šä¸€èˆ¬åˆ†ä¸ºä¸‰ç§å½¢å¼ç›®æ ‡ä»£ç ï¼ŒA æ±‡ç¼–ï¼›B å¯é‡å®šä½äºŒè¿›åˆ¶ï¼›C å†…å­˜å½¢å¼ ç›®æ ‡ä»£ç  &emsp;&emsp;ç¼–è¯‘è¿‡ç¨‹ 1 è‡³ 6 é˜¶æ®µï¼Œéƒ½ä¼šç®¡ç†ç¬¦å·è¡¨ï¼Œä¾¿äºŽå„ä¸ªé˜¶æ®µçš„æŸ¥æ‰¾\å¡«å†™ç­‰å·¥ä½œï¼›å¦å¤–å„ä¸ªé˜¶æ®µéƒ½ä¼šæœ‰å‡ºé”™å¤„ç† &emsp;&emsp;ç¼–è¯‘å™¨å’Œè§£é‡Šå™¨çš„åŒºåˆ«å¾€å¾€æ˜¯åœ¨ç¬¬4æ­¥(ä¸­é—´ä»£ç )ä¹‹åŽå¼€å§‹çš„.ç¼–è¯‘åž‹è¯­è¨€çš„å¯æ‰§è¡Œç¨‹åºäº§ç”Ÿçš„æ˜¯ç›´æŽ¥æ‰§è¡Œæœºå™¨æŒ‡ä»¤ï¼Œè€Œè§£é‡Šåž‹è¯­è¨€çš„æ¯ä¸€å¥æºä»£ç éƒ½è¦ç»è¿‡è§£é‡Šå™¨è§£é‡Šä¸ºå¯ä»¥æ‰§è¡Œçš„æœºå™¨æŒ‡ä»¤ &emsp;&emsp;æœ€åŽï¼Œç¼–è¯‘å™¨å®Œæˆç¼–è¯‘åŽï¼Œç”±é“¾æŽ¥å™¨ï¼ˆLinkerï¼‰å°†ç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶é“¾æŽ¥æˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿™ä¸€æ­¥å¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œä¸€äº›ä¾èµ–äºŽè™šæ‹Ÿæœºè¿è¡Œçš„è¯­è¨€ï¼ˆå¦‚ Javaï¼ŒErlangï¼‰å°±ä¸éœ€è¦é“¾æŽ¥ã€‚ 1.2 é“¾æŽ¥&emsp;&emsp;é™æ€é“¾æŽ¥ï¼šåœ¨ç¼–è¯‘é“¾æŽ¥æœŸé—´å‘æŒ¥ä½œç”¨ï¼ŒæŠŠç›®æ ‡æ–‡ä»¶å’Œé™æ€åº“ä¸€èµ·é“¾æŽ¥å½¢æˆå¯æ‰§è¡Œæ–‡ä»¶ &emsp;&emsp;é“¾æŽ¥å™¨éœ€è¦å¯¹æºä»£ç è¿›è¡Œçš„å¤„ç†ï¼š å¯¹å„ä¸ªç›®æ ‡æ–‡ä»¶ä¸­æ²¡æœ‰å®šä¹‰çš„å˜é‡ï¼Œåœ¨å…¶ä»–ç›®æ ‡æ–‡ä»¶ä¸­å¯»æ‰¾åˆ°ç›¸å…³çš„å®šä¹‰ã€‚ æŠŠä¸åŒç›®æ ‡æ–‡ä»¶ä¸­ç”Ÿæˆçš„åŒç±»åž‹çš„æ®µè¿›è¡Œåˆå¹¶ã€‚ å¯¹ä¸åŒç›®æ ‡æ–‡ä»¶ä¸­çš„å˜é‡è¿›è¡Œåœ°å€é‡å®šä½ã€‚ 1.3 è£…è½½&emsp;&emsp;åŠ¨æ€é“¾æŽ¥åº“éœ€è¦ç¼–è¯‘å™¨åšçš„æœ€åŸºæœ¬çš„äº‹æƒ…ï¼š é“¾æŽ¥åº“åœ¨å°†ç›®æ ‡æ–‡ä»¶é“¾æŽ¥æˆå¯æ‰§è¡Œæ–‡ä»¶çš„æ—¶å€™å¦‚æžœå‘çŽ°æŸä¸€ä¸ªå˜é‡æˆ–è€…å‡½æ•°åœ¨ç›®æ ‡æ–‡ä»¶ä¸­æ‰¾ä¸åˆ°ï¼Œä¼šæŒ‰é¢„å®šä¹‰çš„åŠ¨æ€åº“å¯»æ‰¾è·¯å¾„å¯»æ‰¾åŠ¨æ€åº“ä¸­å®šä¹‰çš„å˜é‡æˆ–è€…å‡½æ•°ã€‚ å¦‚æžœé“¾æŽ¥åº“åœ¨æŸä¸€ä¸ªåŠ¨æ€é“¾æŽ¥åº“ä¸­æ‰¾åˆ°äº†è¯¥å˜é‡æˆ–è€…å‡½æ•°å®šä¹‰ï¼Œé“¾æŽ¥åº“é¦–å…ˆä¼šæŠŠè¿™ä¸ªåŠ¨æ€é“¾æŽ¥åº“å†™åˆ°å¯æ‰§è¡Œæ–‡ä»¶çš„ä¾èµ–åº“ä¸­ï¼Œç„¶åŽç”Ÿæˆè¿™ä¸ªå½“å‰å˜é‡æˆ–è€…å‡½æ•°çš„ä»£ç† symbol. åœ¨_GLOBAL_OFFSET_TABLE_ä»£ç ä¸­ç”ŸæˆçœŸæ­£çš„åŠ¨æ€è·³è½¬æŒ‡ä»¤ï¼Œå¹¶ä¸”åœ¨åº“å‡½æ•°ï¼ˆæ¯”å¦‚strncpy,printfï¼‰ä»£ç†symbolä¸­è·³è½¬åˆ°_GLOBAL_OFFSET_TABLE_ä¸­ç›¸åº”çš„åç§»ä½ç½®ã€‚ 2 iOSç¼–è¯‘&emsp;&emsp;iOSçš„ç¼–è¯‘å·¥å…·æ˜¯LLVM, Clang æ˜¯ LLVM çš„å­é¡¹ç›®ï¼Œæ˜¯ Cï¼ŒC++ å’Œ Objective-C ç¼–è¯‘å™¨ï¼Œå¯ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ç¼–è¯‘æºæ–‡ä»¶æœ‰å‡ ä¸ªé˜¶æ®µ1Clang æ˜¯ LLVM çš„å­é¡¹ç›®ï¼Œæ˜¯ Cï¼ŒC++ å’Œ Objective-C ç¼–è¯‘å™¨ 2.1 é¢„ç¼–è¯‘&emsp;&emsp;ä¸»è¦ç”¨æ¥å¤„ç†é‚£äº›æºæ–‡ä»¶ä¸­ä»¥#å¼€å¤´çš„é¢„ç¼–è¯‘å‘½ä»¤ï¼Œæ¯”å¦‚å®ã€#includeç­‰1clang -E main.m 2.2 è¯æ³•åˆ†æž1clang -fmodules -fsyntax-only -Xclang -dump-tokens main.m 2.3 è¯­æ³•åˆ†æž1clang -fmodules -fsyntax-only -Xclang -ast-dump main.m 2.4 è¯­ä¹‰åˆ†æž2.5 ç”Ÿæˆä¸­é—´ä»£ç  LLVM IR1clang -S -fobjc-arc -emit-llvm main.m -o main.ll 2.6 ä¸­é—´ä»£ç ä¼˜åŒ–(å¯é€‰)12// åœ¨ Xcode çš„ç¼–è¯‘è®¾ç½®é‡Œä¹Ÿå¯ä»¥è®¾ç½®ä¼˜åŒ–çº§åˆ«-01ï¼Œ-03ï¼Œ-0sclang -O3 -S -fobjc-arc -emit-llvm main.m -o main.ll 2.7 ç›®æ ‡ä»£ç ç”Ÿæˆ æ±‡ç¼–ä»£ç 1clang -S -fobjc-arc main.m -o main.s 2.8 ç›®æ ‡ä»£ç 1clang -fmodules -c main.m -o main.o 2.9 æ±‡ç¼–å™¨&emsp;&emsp;æ±‡ç¼–å™¨æŠŠæ±‡ç¼–ä»£ç è½¬æ¢ä¸ºæœºå™¨ä»£ç ï¼Œä½†å¤§ç¥žè¯´iOSæ²¡ç”¨æ±‡ç¼–å™¨ 2.9 é“¾æŽ¥&emsp;&emsp;è¿žæŽ¥å™¨æŠŠç¼–è¯‘äº§ç”Ÿçš„.oæ–‡ä»¶åˆå¹¶æˆä¸€ä¸ªmach-oæ–‡ä»¶ã€‚1é€šè¿‡ clang -ccc-print-bindings main.c -o main æ¥çœ‹çœ‹ Bind çš„ç»“æžœ 2.10 ç­¾å&emsp;&emsp;ç¨‹åºä¸€æ—¦ç­¾åï¼Œå°±æ²¡æœ‰åŠžæ³•æ›´æ”¹å…¶ä¸­çš„ä»»ä½•ä¸œè¥¿ï¼ŒåŒ…æ‹¬èµ„æºæ–‡ä»¶ï¼Œå¯æ‰§è¡Œæ–‡ä»¶ç­‰ï¼ŒiOSç³»ç»Ÿä¼šæ£€æŸ¥è¿™ä¸ªç­¾å æ€»ç»“å®Œæ•´æ­¥éª¤ï¼š ç¼–è¯‘ä¿¡æ¯å†™å…¥è¾…åŠ©æ–‡ä»¶ï¼Œåˆ›å»ºæ–‡ä»¶æž¶æž„ .app æ–‡ä»¶ å¤„ç†æ–‡ä»¶æ‰“åŒ…ä¿¡æ¯ æ‰§è¡Œ CocoaPod ç¼–è¯‘å‰è„šæœ¬ï¼ŒcheckPods Manifest.lock ç¼–è¯‘.mæ–‡ä»¶ï¼Œä½¿ç”¨ CompileC å’Œ clang å‘½ä»¤ é“¾æŽ¥éœ€è¦çš„ Framework ä¾‹å¦‚Foundation.framework ç¼–è¯‘ xib æ‹·è´ xib ï¼Œèµ„æºæ–‡ä»¶ ç¼–è¯‘ ImageAssets å¤„ç† info.plist æ‰§è¡Œ CocoaPod è„šæœ¬ æ‹·è´æ ‡å‡†åº“ åˆ›å»º .app æ–‡ä»¶å’Œç­¾å &emsp;&emsp;æœ€åŽå®‰åˆ©ä¸€æœ¬ä¹¦ç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»ï¼šé“¾æŽ¥ã€è£…è½½ä¸Žåº“ å‚è€ƒï¼š objcä¸­å›½ï¼šç¼–è¯‘å™¨ iOSç¼–è¯‘è¿‡ç¨‹çš„åŽŸç†å’Œåº”ç”¨ ç¼–è¯‘åŽŸç†ä¹‹è¯æ³•åˆ†æžç®€ä»‹ é«˜çº§è¯­è¨€çš„ç¼–è¯‘ï¼šé“¾æŽ¥åŠè£…è½½è¿‡ç¨‹ä»‹ç» ç‚¹å‡» Run ä¹‹åŽå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ æ·±å…¥å‰–æž iOS ç¼–è¯‘ Clang LLVM æ›´æ–°ä¸€ç¯‡æ¯”è¾ƒå¥½çš„æ–‡ç«  æ·±å…¥æµ…å‡ºiOSç¼–è¯‘]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>ç¼–è¯‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Clangç¬”è®°]]></title>
    <url>%2F2017%2F08%2F31%2FClang%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;å‰ä¸€æ®µæ—¶é—´å­¦äº†ä¸‹LLVMçš„çŸ¥è¯†ï¼ŒLLVMéžå¸¸å¼ºå¤§ï¼Œç¡®å®žå¾ˆå¥½çŽ©ï¼ä½†å­¦èµ·æ¥ç¡®å®žæŒºå¤šæŒºæž¯ç‡¥çš„ï¼Œä¹Ÿæ²¡å‘çŽ°æœ‰ä»€ä¹ˆç”¨å¤„ï¼ˆå…¶å®žå°±æ˜¯å•ƒä¸åŠ¨è‹±æ–‡æ–‡æ¡£äº†ï¼‰ï¼Œè¿‡äº†åˆšå¼€å§‹çš„å†²åŠ²ä¹Ÿå°±åœæ»žä¸å‰äº†ï¼Œå¹³æ—¶å¼€å‘è¿˜æ˜¯Clangç”¨çš„ç¨å¾®å¤šä¸€ç‚¹ï¼Œä»Šå¤©å°±æ°´æ°´clangå§ 1 ç®€ä»‹&emsp;&emsp;Clang æ˜¯ LLVM çš„å­é¡¹ç›®ï¼Œæ˜¯ Cï¼ŒC++ å’Œ Objective-C ç¼–è¯‘å™¨ï¼Œç›®çš„æ˜¯æä¾›æƒŠäººçš„å¿«é€Ÿç¼–è¯‘ï¼Œæ¯” GCC å¿«3å€ï¼Œå…¶ä¸­çš„ clang static analyzerä¸»è¦æ˜¯è¿›è¡Œè¯­æ³•åˆ†æžï¼Œè¯­ä¹‰åˆ†æžå’Œç”Ÿæˆä¸­é—´ä»£ç ï¼Œå½“ç„¶è¿™ä¸ªè¿‡ç¨‹ä¼šå¯¹ä»£ç è¿›è¡Œæ£€æŸ¥ï¼Œå‡ºé”™çš„å’Œéœ€è¦è­¦å‘Šçš„ä¼šæ ‡æ³¨å‡ºæ¥ã€‚å®˜æ–¹å…¥é—¨,è¯¦ç»†å†…å®¹å‚è€ƒï¼šå®˜ç½‘ &emsp;&emsp;Clangæ˜¯åŸºäºŽåº“çš„ï¼Œåœ¨Clangçš„å®˜æ–¹æ–‡æ¡£â€œClangâ€ CFE Internals Manualä¸­ï¼Œå¯¹Clangå†…éƒ¨çš„ä»‹ç»ä¹Ÿæ˜¯ä¾æ®åº“æ¥è¿›è¡Œåˆ†ç±»çš„ã€‚ 1.1 AST&emsp;&emsp;ä¸€èˆ¬ç¼–è¯‘å™¨æœ‰ä»¥ä¸‹å·¥ä½œæ­¥éª¤ï¼š è¯æ³•åˆ†æžï¼ˆLexical analysisï¼‰ï¼šæ­¤é˜¶æ®µçš„ä»»åŠ¡æ˜¯ä»Žå·¦åˆ°å³ä¸€ä¸ªå­—ç¬¦ä¸€ä¸ªå­—ç¬¦åœ°è¯»å…¥æºç¨‹åºï¼Œå¯¹æž„æˆæºç¨‹åºçš„å­—ç¬¦æµè¿›è¡Œæ‰«æç„¶åŽæ ¹æ®æž„è¯è§„åˆ™è¯†åˆ« å•è¯ï¼ˆTokenï¼‰ï¼Œå®Œæˆè¿™ä¸ªä»»åŠ¡çš„ç»„ä»¶æ˜¯ è¯æ³•åˆ†æžå™¨ï¼ˆLexical analyzerï¼Œç®€ç§°Lexerï¼‰ï¼Œä¹Ÿå« æ‰«æå™¨ï¼ˆScannerï¼‰ï¼› è¯­æ³•åˆ†æžï¼ˆSyntactic analysisï¼Œä¹Ÿå« Parsingï¼‰ï¼š æ­¤é˜¶æ®µçš„ä¸»è¦ä»»åŠ¡æ˜¯ç”± è¯æ³•åˆ†æžå™¨ ç”Ÿæˆçš„å•è¯æž„å»º æŠ½è±¡è¯­æ³•æ ‘ï¼ˆAbstract Syntax Tree ï¼ŒASTï¼‰ï¼Œå®Œæˆæ­¤ä»»åŠ¡çš„ç»„ä»¶æ˜¯ è¯­æ³•åˆ†æžå™¨ï¼ˆParserï¼‰ï¼› ç›®æ ‡ç ç”Ÿæˆï¼š æ­¤é˜¶æ®µç¼–è¯‘å™¨ä¼šéåŽ†ä¸Šä¸€æ­¥ç”Ÿæˆçš„æŠ½è±¡è¯­æ³•æ ‘ï¼Œç„¶åŽä¸ºæ¯ä¸ªèŠ‚ç‚¹ç”Ÿæˆ æœºå™¨ / å­—èŠ‚ç ã€‚ ç¼–è¯‘å™¨å®Œæˆç¼–è¯‘åŽï¼Œç”±é“¾æŽ¥å™¨ï¼ˆLinkerï¼‰å°†ç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶é“¾æŽ¥æˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿™ä¸€æ­¥å¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œä¸€äº›ä¾èµ–äºŽè™šæ‹Ÿæœºè¿è¡Œçš„è¯­è¨€ï¼ˆå¦‚ Javaï¼ŒErlangï¼‰å°±ä¸éœ€è¦é“¾æŽ¥ã€‚ &emsp;&emsp;å…³äºŽClang ASTï¼Œæœ‰ä¸€ä¸ªå®˜æ–¹æ–‡æ¡£ ã€‚åŸºäºŽASTå¯ä»¥è¿›è¡Œç¨‹åºè½¬æ¢ï¼ŒçŽ°åœ¨Clangä¸‹é¢å·²ç»æœ‰ä¸€äº›é¢å¤–çš„å·¥å…·ï¼šæ¯”å¦‚clang-modernizeå®žçŽ°çš„å°±æ˜¯å¯¹C+ +ç¨‹åºä¸­å¯ä»¥ä½¿ç”¨C ++ 11çš„åœ°æ–¹è¿›è¡Œè½¬æ¢ï¼Œè½¬æ¢æˆåœ¨è¿™äº›åœ°æ–¹ä½¿ç”¨C++11ç‰¹æ€§çš„ç¨‹åºï¼Œç­‰äºŽç›´æŽ¥åœ¨ç¨‹åºä¸Šè¿›è¡Œçš„ä¿®æ”¹ï¼Œæ˜¯ä¸€ä¸ªsource-to-sourceçš„è½¬æ¢å·¥å…·ã€‚ 1.2 libclang&emsp;&emsp;çŽ°åœ¨çš„Clangï¼Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªç¼–è¯‘å™¨å‰ç«¯ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªåº“ä½¿ç”¨ã€‚ä½œä¸ºä¸€ä¸ªåº“ä½¿ç”¨çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨å®ƒåŽ»åˆ†æžC/C++/ObjectCè¯­è¨€ä»£ç ï¼Œå¯ä»¥åˆ†æžæºç å¾—åˆ°ASTï¼Œä¹Ÿå¯ä»¥èŽ·å–å·²ç»åˆ†æžå¥½çš„ASTï¼Œä¹Ÿå¯ä»¥éåŽ†ASTï¼Œè¿˜å¯ä»¥èŽ·å–ASTä¸­åŸºæœ¬å…ƒç´ çš„ç‰©ç†æºç ä½ç½®ã€‚è¿™å°±æ˜¯libclangã€‚ &emsp;&emsp;å…¶å®ƒåº“ä»‹ç»ï¼š LLVM Support Library - LLVM libSupport åº“æä¾›äº†è®¸å¤šåº•å±‚åº“å’Œæ•°æ®ç»“æž„ï¼ŒåŒ…æ‹¬å‘½ä»¤è¡Œ option å¤„ç†ï¼Œå„ç§å®¹å™¨å’Œç³»ç»ŸæŠ½è±¡å±‚ï¼Œç”¨äºŽæ–‡ä»¶ç³»ç»Ÿè®¿é—®ã€‚ The Clang â€œBasicâ€ Library - æä¾›äº†è·Ÿè¸ªå’Œæ“çºµ source buffersï¼Œsource buffers çš„ä½ç½®ï¼Œdiagnosticsï¼Œtokens,æŠ½è±¡ç›®æ ‡ä»¥åŠç¼–è¯‘è¯­è¨€å­é›†ä¿¡æ¯çš„ low-level å®žç”¨ç¨‹åºã€‚è¿˜æœ‰éƒ¨åˆ†å¯ä»¥ç”¨åœ¨å…¶ä»–çš„éž c è¯­è¨€æ¯”å¦‚ SourceLocationï¼ŒSourceManagerï¼ŒDiagnositicsï¼ŒFileManager ç­‰ã€‚å…¶ä¸­ Diagnositics è¿™ä¸ªå­ç³»ç»Ÿæ˜¯ç¼–è¯‘å™¨å’Œæ™®é€šå†™ä»£ç äººäº¤æµçš„ä¸»è¦ç»„æˆéƒ¨åˆ†ï¼Œå®ƒä¼šè¯Šæ–­å½“å‰ä»£ç å“ªäº›ä¸æ­£ç¡®ï¼ŒæŒ‰ç…§ä¸¥é‡ç¨‹åº¦è€Œäº§ç”Ÿ WARNING æˆ– ERRORï¼Œæ¯ä¸ªè¯Šæ–­ä¼šæœ‰å”¯ä¸€ ID ï¼Œ SourceLocation ä¼šè´Ÿè´£ç®¡ç†ã€‚ The Driver Library - å’Œ Driver ç›¸å…³çš„åº“ï¼Œä¸Šé¢å·²ç»å¯¹å…¶åšäº†è¯¦ç»†çš„ä»‹ç»ã€‚ Precompiled Headers - Clang æ”¯æŒé¢„ç¼–è¯‘ headers çš„ä¸¤ä¸ªå®žçŽ°ã€‚ The Frontend Library - è¿™ä¸ªåº“é‡ŒåŒ…å«äº†åœ¨ Clang åº“ä¹‹ä¸Šæž„å»ºçš„åŠŸèƒ½ï¼Œæ¯”å¦‚è¾“å‡º diagnositics çš„å‡ ç§æ–¹æ³•ã€‚ The Lexer and Preprocessor Library - è¯æ³•åˆ†æžå’Œé¢„å¤„ç†çš„åº“ï¼ŒåŒ…å«äº† Tokenï¼ŒAnnotation Tokensï¼ŒTokenLexerï¼ŒLexer ç­‰è¯æ³•ç±»ï¼Œè¿˜æœ‰ Parser Library å’Œ AST è¯­æ³•æ ‘ç›¸å…³çš„æ¯”å¦‚ Typeï¼ŒASTContextï¼ŒQualTypeï¼ŒDeclarationNameï¼ŒDeclContext ä»¥åŠ CFG ç±»ã€‚ The Sema Library - è§£æžå™¨è°ƒç”¨æ­¤åº“æ—¶ï¼Œä¼šå¯¹è¾“å…¥è¿›è¡Œè¯­ä¹‰åˆ†æžã€‚ å¯¹äºŽæœ‰æ•ˆçš„ç¨‹åºï¼ŒSema ä¸ºè§£æžæž„é€ ä¸€ä¸ª ASTã€‚ The CodeGen Library - CodeGen ç”¨ AST ä½œä¸ºè¾“å…¥ï¼Œå¹¶ä»Žä¸­ç”Ÿæˆ LLVM IR ä»£ç ã€‚ 1.3 Clang driver&emsp;&emsp;Clang driveræ˜¯ä¸€ä¸ªé©±åŠ¨ï¼Œä¸€ä¸ªåŒ…å«ç¼–è¯‘å…¨éƒ¨é˜¶æ®µçš„é©±åŠ¨ï¼Œä¸åŒäºŽå‰ç«¯Clangï¼Œä¹Ÿä¸åŒäºŽç¼–è¯‘å™¨Clangã€‚å‘½ä»¤è¡Œä½¿ç”¨çš„â€œclangâ€å…¶å®žå¹¶ä¸æ˜¯å‰ç«¯Clangï¼Œè€Œæ˜¯æŒ‡çš„æ˜¯Clang driverï¼›åœ¨å‘½ä»¤è¡Œä½¿ç”¨çš„â€œClang cc1â€ä¹ŸæŒ‡çš„ä¸æ˜¯å‰ç«¯Clangï¼Œè€ŒæŒ‡çš„æ˜¯Clangç¼–è¯‘å™¨ï¼Œè¿™å…¶ä¸­ä¸ä»…åŒ…å«äº†å‰ç«¯Clangï¼Œè¿˜åŒ…å«äº†LLVM Coreéƒ¨åˆ†ç­‰ã€‚Clang driverä¸ä»…ä»…è°ƒç”¨äº†å‰ç«¯Clangï¼ŒåŒæ—¶è¿˜è°ƒç”¨äº†LLVM Core Clangå‘½ä»¤ï¼ˆå¤§å°å†™æ•æ„Ÿï¼‰å‘½ä»¤è§£é‡Š&emsp;&emsp;æœ€é‡è¦çš„å‘½ä»¤æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä¸ªäººè®¤ä¸ºï¼Œæ— è®ºä»€ä¹ˆè„šæœ¬è¯­è¨€ï¼Œæœ€é‡è¦çš„å‘½ä»¤æ°¸è¿œæ˜¯å¸®åŠ©ï¼šclang â€“helpã€‚Clangå‘½ä»¤é«˜è¾¾700+ï¼Œè¿™é‡Œä»…ä»‹ç»å¸¸ç”¨çš„123456789101112131415161718192021222324252627282930USAGE: clang [options] &lt;inputs&gt;OPTIONS:-### Print (but do not run) the commands to run for this compilation æŸ¥çœ‹æ“ä½œå†…éƒ¨å‘½ä»¤ï¼Œä¸€èˆ¬ç”¨äºŽåˆ†æžæµç¨‹--analyze Run the static analyzer è¿è¡Œé™æ€ä»£ç æ£€æŸ¥å™¨-B &lt;dir&gt; Add &lt;dir&gt; to search path for binaries and object files used implicitly å°†&lt;dir&gt;æ·»åŠ åˆ°æœç´¢è·¯å¾„-CC Include comments from within macros in preprocessed output åœ¨é¢„å¤„ç†çš„è¾“å‡ºä¸­åŒ…å«å®åœ¨å†…çš„æ³¨é‡Šï¼Œéžå¸¸é‡è¦--config &lt;value&gt; Specifies configuration file é…ç½®æ–‡ä»¶-C Include comments in preprocessed output åœ¨é¢„å¤„ç†çš„è¾“å‡ºä¸­åŒ…å«æ³¨é‡Šï¼Œéžå¸¸é‡è¦-c Only run preprocess, compile, and assemble steps ä»…è¿è¡Œé¢„å¤„ç†ã€ç¼–è¯‘å’Œç»„è£…æ­¥éª¤-emit-ast Emit Clang AST files for source inputs-E Only run the preprocessor åªè¿è¡Œé¢„å¤„ç†-fblocks Enable the &apos;blocks&apos; language feature-fcolor-diagnostics Use colors in diagnostics è¯Šæ–­ä¸­å¯ä»¥ä½¿ç”¨é¢œè‰²-fcxx-exceptions Enable C++ exceptions å¯ç”¨C++ç±»åž‹å¼‚å¸¸-fexceptions Enable support for exception handling å¯ç”¨å¼‚å¸¸-fmodules Enable the &apos;modules&apos; language feature å¯ç”¨â€œæ¨¡å—â€è¯­è¨€åŠŸèƒ½-fplugin=&lt;dsopath&gt; Load the named plugin (dynamic shared object) å¯ç”¨æ’ä»¶-ObjC++ Treat source input files as Objective-C++ inputs æŠŠæºæ–‡ä»¶å½“åšOC++-ObjC Treat source input files as Objective-C inputs æŠŠæºæ–‡ä»¶å½“åšOC-g Generate source-level debug information ç”Ÿæˆå®Œæ•´çš„è°ƒè¯•ä¿¡æ¯ã€‚-o &lt;file&gt; Write output to &lt;file&gt; è¾“å‡ºæ–‡ä»¶-print-file-name=&lt;file&gt; Print the full library path of &lt;file&gt; è¾“å‡ºæ–‡ä»¶æ‰€åœ¨è·¯å¾„-print-ivar-layout Enable Objective-C Ivar layout bitmap print trace å¯ç”¨OCçš„ivarå¸ƒå±€-pthread Support POSIX threads in generated code åœ¨ç”Ÿæˆçš„ä»£ç ä¸­æ”¯æŒPOSIXçº¿ç¨‹-rewrite-objc Rewrite Objective-C source to C++ å°†OCé‡å†™æˆC++-S Only run preprocess and compilation steps ä»…è¿è¡Œé¢„å¤„ç†å’Œç¼–è¯‘æ­¥éª¤--target=&lt;value&gt; Generate code for the given target ä¸ºç»™å®šç›®æ ‡ç”Ÿæˆä»£ç -w Suppress all warnings ç¦ç”¨è­¦å‘Š-Xclang &lt;arg&gt; Pass &lt;arg&gt; to the clang compiler å‘clangç¼–è¯‘å™¨ä¼ é€’å‚æ•° å¸¸ç”¨ç»„åˆå‘½ä»¤ æŸ¥çœ‹ç¼–è¯‘çš„å‡ ä¸ªé˜¶æ®µ 1clang -ccc-print-phases main.m æŸ¥çœ‹é¢„ç¼–è¯‘è¿‡ç¨‹ 1clang -E main.m æŸ¥çœ‹æ“ä½œå†…éƒ¨å‘½ä»¤ 1clang -### main.m -o main é‡å†™æˆC++ï¼ŒæŠ¥é”™ 1clang -rewrite-objc main.m ç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶ 123456789101112131415clang -fobjc-arc -framework Foundation HelloWord.m -o HelloWord/*-x ç¼–è¯‘è¯­è¨€æ¯”å¦‚objective-c-arch ç¼–è¯‘çš„æž¶æž„ï¼Œæ¯”å¦‚arm7-f ä»¥-få¼€å¤´çš„ã€‚-W ä»¥-Wå¼€å¤´çš„ï¼Œå¯ä»¥é€šè¿‡è¿™äº›å®šåˆ¶ç¼–è¯‘è­¦å‘Š-D ä»¥-Då¼€å¤´çš„ï¼ŒæŒ‡çš„æ˜¯é¢„ç¼–è¯‘å®ï¼Œé€šè¿‡è¿™äº›å®å¯ä»¥å®žçŽ°æ¡ä»¶ç¼–è¯‘-iPhoneSimulator10.1.sdk ç¼–è¯‘é‡‡ç”¨çš„iOS SDKç‰ˆæœ¬-I æŠŠç¼–è¯‘ä¿¡æ¯å†™å…¥æŒ‡å®šçš„è¾…åŠ©æ–‡ä»¶-F éœ€è¦çš„Framework-c æ ‡è¯†ç¬¦æŒ‡æ˜Žéœ€è¦è¿è¡Œé¢„å¤„ç†å™¨ï¼Œè¯­æ³•åˆ†æžï¼Œç±»åž‹æ£€æŸ¥ï¼ŒLLVMç”Ÿæˆä¼˜åŒ–ä»¥åŠæ±‡ç¼–ä»£ç ç”Ÿæˆ.oæ–‡ä»¶-o ç¼–è¯‘ç»“æžœ*/clang -x objective-c -arch x86_64 -fmessage-length=0 -fobjc-arcâ€¦ -Wno-missing-field-initializers â€¦ -DDEBUG=1 â€¦ -isysroot iPhoneSimulator10.1.sdk -fasm-blocks â€¦ -I -F -c AFSecurityPolicy.m -o AFSecurityPolicy.o å‚è€ƒ å®˜ç½‘ æ›´å¤šclangå·¥å…· æ·±å…¥ç ”ç©¶Clang]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LLVMå…¥é—¨]]></title>
    <url>%2F2017%2F08%2F20%2FLLVM%E5%85%A5%E9%97%A8%2F</url>
    <content type="text"><![CDATA[1 ç®€ä»‹&emsp;&emsp;LLVMæ˜¯ä¸€ä¸ªå¥½ç”¨ã€å¥½çŽ©ï¼Œè€Œä¸”è¶…å‰çš„ç³»ç»Ÿè¯­è¨€ï¼ˆæ¯”å¦‚Cå’ŒC++è¯­è¨€ï¼‰ç¼–è¯‘å™¨ã€‚LLVMçš„å®˜ç½‘ å’Œ ä¸­æ–‡ç‰ˆï¼Œæ­¤å¤–åˆå­¦å…¥é—¨å¯å‚è€ƒLLVMé›¶åŸºç¡€å­¦ä¹ çš„å­¦ä¹ æ€è·¯ &emsp;&emsp;LLVMå¼ºå¤§çš„åŽŸå› ï¼š1. LLVMçš„â€œä¸­é—´è¡¨ç¤ºâ€ï¼ˆIRï¼‰æ˜¯ä¸€é¡¹å¤§åˆ›æ–°ã€‚2. æ¨¡å—åŒ– &emsp;&emsp;Everything is a lib. Everything is a value. &emsp;&emsp;LLVMçš„ç»„æˆéƒ¨åˆ†ï¼š å‰ç«¯ï¼ŒèŽ·å–ä½ çš„æºä»£ç ç„¶åŽå°†å®ƒè½¬å˜ä¸ºæŸç§ä¸­é—´è¡¨ç¤ºã€‚Clangå…¶å®žå°±æ˜¯å‰ç«¯ æµç¨‹ï¼ˆPassï¼‰ï¼Œå°†ç¨‹åºåœ¨ä¸­é—´è¡¨ç¤ºä¹‹é—´äº’ç›¸å˜æ¢ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæµç¨‹ä¹Ÿç”¨æ¥ä¼˜åŒ–ä»£ç ï¼šæµç¨‹è¾“å‡ºçš„ï¼ˆä¸­é—´è¡¨ç¤ºï¼‰ç¨‹åºå’Œå®ƒè¾“å…¥çš„ï¼ˆä¸­é—´è¡¨ç¤ºï¼‰ç¨‹åºç›¸æ¯”åœ¨åŠŸèƒ½ä¸Šå®Œå…¨ç›¸åŒï¼Œåªæ˜¯åœ¨æ€§èƒ½ä¸Šå¾—åˆ°æ”¹è¿›ã€‚ åŽç«¯ï¼Œå¯ä»¥ç”Ÿæˆå®žé™…è¿è¡Œçš„æœºå™¨ç ã€‚ &emsp;&emsp;LLVM çš„ä¼˜ç‚¹ä¸»è¦å¾—ç›ŠäºŽå®ƒçš„ä¸‰å±‚å¼æž¶æž„ â€“ ç¬¬ä¸€å±‚æ”¯æŒå¤šç§è¯­è¨€ä½œä¸ºè¾“å…¥(ä¾‹å¦‚ C, ObjectiveC, C++ å’Œ Haskell)ï¼Œç¬¬äºŒå±‚æ˜¯ä¸€ä¸ªå…±äº«å¼çš„ä¼˜åŒ–å™¨(å¯¹ LLVM IR åšä¼˜åŒ–å¤„ç†)ï¼Œç¬¬ä¸‰å±‚æ˜¯è®¸å¤šä¸åŒçš„ç›®æ ‡å¹³å°(ä¾‹å¦‚ Intel, ARM å’Œ PowerPC)ã€‚åœ¨è¿™ä¸‰å±‚å¼çš„æž¶æž„ä¸­ï¼Œå¦‚æžœä½ æƒ³è¦æ·»åŠ ä¸€é—¨è¯­è¨€åˆ° LLVM ä¸­ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠé‡è¦ç²¾åŠ›é›†ä¸­åˆ°ç¬¬ä¸€å±‚ä¸Šï¼Œå¦‚æžœæƒ³è¦å¢žåŠ å¦å¤–ä¸€ä¸ªç›®æ ‡å¹³å°ï¼Œé‚£ä¹ˆä½ æ²¡å¿…è¦è¿‡å¤šçš„è€ƒè™‘è¾“å…¥è¯­è¨€ã€‚åœ¨ä¹¦ The Architecture of Open Source Applications ä¸­ LLVM çš„åˆ›å»ºè€… (Chris Lattner) å†™äº†ä¸€ç« å¾ˆæ£’çš„å†…å®¹ï¼šå…³äºŽï¼šLLVM æž¶æž„ 1.1 é‡è¦æ–‡æ¡£ è‡ªåŠ¨ç”Ÿæˆçš„Doxygenæ–‡æ¡£é¡µéžå¸¸é‡è¦ã€‚ LLVMçš„æ–‡æ¡£çš„åˆ†ç±»ç®€ä»‹ï¼Œå…¶ä¸­è¯­è¨€å‚è€ƒæ‰‹å†Œä¹Ÿéžå¸¸æœ‰ç”¨ å¼€å‘è€…æ‰‹å†Œæè¿°äº†ä¸€äº›LLVMç‰¹æœ‰çš„æ•°æ®ç»“æž„çš„å·¥å…·ï¼Œç¼–å†™LLVMæµç¨‹ ä¸è¿‡åœ¨åœ¨çº¿æµè§ˆLLVMä»£ç æ—¶ï¼Œè¿™ä¸ªGitHubé•œåƒæœ‰æ—¶ä¼šæ›´æ–¹ä¾¿ã€‚ æŽ¨èçš„å…¥é—¨ä¹¦ï¼šã€ŠGetting Started with LLVM Core Librariesã€‹ 1.2 LLVMçš„IR&emsp;&emsp;LLVM IRçš„ä»‹ç»ï¼ŒLLVMçš„IRæ˜¯ä¸­é—´æ–‡ä»¶ï¼Œæ˜¯é€šç”¨çš„ï¼Œä¾¿äºŽå‰åŽç«¯æ‰©å±•ã€‚LLVMçš„IRä¸»è¦æœ‰ä¸‰ç§æ ¼å¼ï¼šä¸€ç§æ˜¯åœ¨å†…å­˜ä¸­çš„ç¼–è¯‘ä¸­é—´è¯­è¨€ï¼›ä¸€ç§æ˜¯ç¡¬ç›˜ä¸Šå­˜å‚¨çš„äºŒè¿›åˆ¶ä¸­é—´è¯­è¨€ï¼ˆä»¥.bcç»“å°¾ï¼‰ï¼Œæœ€åŽä¸€ç§æ˜¯å¯è¯»çš„ä¸­é—´æ ¼å¼ï¼ˆä»¥.llç»“å°¾ï¼‰ã€‚è¿™ä¸‰ç§ä¸­é—´æ ¼å¼æ˜¯å®Œå…¨ç›¸ç­‰çš„ã€‚1234567hello.cæ–‡ä»¶//å¾—åˆ°äºŒè¿›åˆ¶çš„.bcæ–‡ä»¶clang -emit-llvm -c hello.c -o hello.bc // å¾—åˆ°å¯¹åº”çš„hello.llæ–‡ä»¶llvm-dis hello.bc &emsp;&emsp;TODO: LLVM IRçš„è¯­æ³•ç®€ä»‹ 1.3 LLVM çš„Pass&emsp;&emsp;åœ¨LLVMä¸­ä¼˜åŒ–ä»¥passå½¢å¼å®žçŽ°,æ¯ä¸€ä¸ªpassä»£è¡¨ä¸€ç§ä¼˜åŒ–,å¯ä»¥æŠŠæ¯ä¸ªPassçœ‹æˆä¸€ä¸ªå°æ¨¡å—ï¼Œå¯å•ç‹¬ä½¿ç”¨ä¹Ÿå¯ç»„åˆä½¿ç”¨ã€‚æ‰€æœ‰çš„Passéƒ½æ˜¯ç»§æ‰¿è‡ªPassç±»çš„, åŸºæœ¬ä¸Šåˆ†ä¸ºä¸¤ç±», ä¸€ç±»æ˜¯åˆ†æžanalysis pass (å­˜æ”¾åœ¨lib/Analysisä¸‹), è´Ÿè´£æ”¶é›†ä¿¡æ¯å…±å…¶å®ƒpassä½¿ç”¨, è¾…åŠ©è°ƒè¯•æˆ–ä½¿ç¨‹åºå¯è§†åŒ–; å¦ä¸€ç±»æ˜¯å˜æ¢transform pass (å­˜æ”¾åœ¨lib/Transformsä¸‹), æ”¹å˜ç¨‹åºçš„dataflow / controlflow. LLVMä¸­å®žçŽ°äº†å‡ åç§ä¼˜åŒ–pass, å…¶ä¸­è®¸å¤špassè¿è¡Œä¸æ­¢ä¸€æ¬¡ &emsp;&emsp;åœ¨æ–‡æ¡£ http://llvm.org/docs/Passes.html ä¸­ï¼Œåˆ—å‡ºäº†æ‰€æœ‰çš„PASSçš„å‘½ä»¤è¡Œå‚æ•°ä»¥åŠè¿™ä¸ªPASSä¸»è¦æ˜¯åšä»€ä¹ˆç”¨çš„ï¼Œæ€ç»´å¯¼å›¾ç‰ˆ 1.4 LLVMçš„æºç ç»“æž„&emsp;&emsp;å‚è€ƒï¼šhttps://blog.csdn.net/snsn1984/article/details/8170575 llvm/examples è¿™ä¸ªç›®å½•ä¸»è¦æ˜¯ä¸€äº›ç®€å•ä¾‹å­ï¼Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨LLVM IR å’Œ JITã€‚è¿˜æœ‰å»ºç«‹ä¸€ä¸ªç®€å•çš„ç¼–è¯‘å™¨çš„ä¾‹å­çš„ä»£ç ã€‚ llvm/include è¿™ä¸ªç›®å½•ä¸»è¦åŒ…å«LLVM libraryçš„å…¬å…±å¤´æ–‡ä»¶ã€‚ llvm/lib è¿™ä¸ªç›®å½•åŒ…å«äº†å¤§éƒ¨åˆ†çš„LLVMçš„æºç ã€‚åœ¨LLVMä¸­å¤§éƒ¨åˆ†çš„æºç éƒ½æ˜¯ä»¥åº“çš„å½¢å¼å­˜åœ¨çš„ï¼Œè¿™æ ·ä¸åŒçš„å·¥å…·ä¹‹å‰å°±å¾ˆå®¹æ˜“å…±ç”¨ä»£ç ã€‚ llvm/projects è¿™ä¸ªç›®å½•åŒ…å«ç€ä¸€äº›ä¾èµ–LLVMçš„å·¥ç¨‹ï¼Œè¿™äº›å·¥ç¨‹ä¸¥æ ¼æ¥è¯´åˆä¸ç®—LLVMä¸€éƒ¨åˆ†ã€‚ llvm/runtimes è¿™ä¸ªç›®å½•åŒ…å«äº†ä¸€äº›åº“ï¼Œè¿™äº›åº“ä¼šç¼–è¯‘æˆLLVMçš„bitcodeï¼Œç„¶åŽå½“clang linking ç¨‹åºçš„æ—¶å€™ä½¿ç”¨ã€‚ llvm/test è¿™ä¸ªç›®å½•æ˜¯LLVMçš„æµ‹è¯•å¥—ä»¶ï¼ŒåŒ…å«äº†å¾ˆå¤šæµ‹è¯•ç”¨ä¾‹ï¼Œè¿™äº›æµ‹è¯•ç”¨ä¾‹æ˜¯æµ‹è¯•LLVMçš„æ‰€æœ‰åŸºæœ¬åŠŸèƒ½çš„ã€‚ llvm/tools è¿™ä¸ªç›®å½•ç†æ˜¯å„ä¸ªå·¥å…·çš„æºç ï¼Œè¿™äº›å·¥å…·éƒ½æ˜¯å»ºç«‹åœ¨åˆšæ‰ä¸Šé¢çš„é‚£äº›åº“çš„åŸºç¡€ä¹‹ä¸Šçš„ã€‚ä¹Ÿæ˜¯ä¸»è¦çš„ç”¨æˆ·æŽ¥å£ llvm/utils è¿™ä¸ªç›®å½•åŒ…å«äº†ä¸€äº›å’ŒLLVMæºç ä¸€èµ·å·¥ä½œçš„åº”ç”¨ã€‚æœ‰äº›åº”ç”¨åœ¨LLVMçš„ç¼–è¯‘è¿‡ç¨‹ä¸­æ˜¯ä¸å¯æˆ–ç¼ºçš„ã€‚ 3 å¸¸ç”¨å‘½ä»¤3.1 åŸºæœ¬å‘½ä»¤ llvm-as è§£é‡Š LLVM assembler æ±‡ç¼–å™¨ llvm-dis è§£é‡Š LLVM disassembler åæ±‡ç¼–å™¨ opt è§£é‡Š LLVM optimizer ä¼˜åŒ–å™¨ llc è§£é‡Š LLVM static compiler é™æ€ç¼–è¯‘å™¨ lli è§£é‡Š directly execute programs from LLVM bitcode ç›´æŽ¥æ‰§è¡ŒLLVM å­—èŠ‚ç  llvm-link è§£é‡Š LLVM bitcode linker å­—èŠ‚ç è¿žæŽ¥å™¨ llvm-ar è§£é‡Š LLVM archiver å½’æ¡£å™¨ llvm-nm -list LLVM bitcode and object fileâ€™s symbol table åˆ—å‡ºLLVMå­—èŠ‚ç å’Œç›®æ ‡æ–‡ä»¶ä¸­çš„ç¬¦å·è¡¨ llvm-config è§£é‡Š Print LLVM compilation options æ‰“å°LLVMç¼–è¯‘é€‰é¡¹ llvm-diff è§£é‡Š LLVM structual â€˜diffâ€™ LLVMç»“æž„ä¸Šçš„diff llvm-cov è§£é‡Š emit coverage information çœç•¥è¦†ç›–ä¿¡æ¯ llvm-stress è§£é‡Š generate random .ll files ç”Ÿæˆéšæœºçš„.llæ–‡ä»¶ llvm-symbolizer è§£é‡Š convert addresses into source code locations æŠŠåœ°å€å€¼è½¬æ¢æˆæºä»£ç ä½ç½® 3.2 è°ƒè¯•å·¥å…· bugpoint è§£é‡Š automatic test case reduction tool è‡ªåŠ¨æµ‹è¯•ç”¨ä¾‹ä¸‹é™å·¥å…· llvm-extract è§£é‡Š extract a function from an LLVM module ä»ŽLLVMæ¨¡å—ä¸­æŠ½å–ä¸€ä¸ªå‡½æ•° llvm-bcanalyzer è§£é‡Š LLVM bitcode analyzer LLVMå­—èŠ‚ç åˆ†æžå™¨ 3.3 å¼€å‘è€…å·¥å…· FileCheck è§£é‡Š Flexible pattern matching file verifier å¼¹æ€§æ¨¡å¼åŒ¹é…çš„æ–‡ä»¶éªŒè¯å™¨ tblgen è§£é‡Š Target Description To C++ Code Generator ç›®æ ‡æè¿°åˆ°C++ä»£ç ç”Ÿæˆå™¨ lit è§£é‡Š LLVM Integrated Tester LLVMé›†æˆçš„æµ‹è¯•å™¨ llvm-build è§£é‡Š LLVM Project Build Utility LLVMé¡¹ç›®ç”Ÿæˆå·¥å…· llvm-readobj è§£é‡Š LLVM Object Reader LLVMç›®æ ‡æ–‡ä»¶é˜…è¯»å™¨ å‚è€ƒ å®˜ç½‘ å’Œ ä¸­æ–‡ç‰ˆ objcä¸­å›½ï¼šç¼–è¯‘å™¨ LLVMé›¶åŸºç¡€å­¦ä¹  LLVMæ¯æ—¥è°ˆ LLVM Weekly ä¸ºä»€ä¹ˆäººäººéƒ½è¯¥æ‡‚ç‚¹LLVM GETTING STARTED WITH LLVM/CLANG ON OS X]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>ç¼–è¯‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[APPè¿è¡Œç†è®º]]></title>
    <url>%2F2017%2F08%2F11%2FAPP%E8%BF%90%E8%A1%8C%E7%90%86%E8%AE%BA%2F</url>
    <content type="text"><![CDATA[è½¬è½½è‡ªï¼šhttps://zhidao.baidu.com/question/1370352051634002499.html main() æ‰§è¡Œå‰å‘ç”Ÿçš„äº‹Mach-O æ ¼å¼è™šæ‹Ÿå†…å­˜åŸºç¡€Mach-O äºŒè¿›åˆ¶çš„åŠ è½½ç†è®ºé€ŸæˆMach-O æœ¯è¯­Mach-O æ˜¯é’ˆå¯¹ä¸åŒè¿è¡Œæ—¶å¯æ‰§è¡Œæ–‡ä»¶çš„æ–‡ä»¶ç±»åž‹ã€‚æ–‡ä»¶ç±»åž‹ï¼šExecutableï¼š åº”ç”¨çš„ä¸»è¦äºŒè¿›åˆ¶Dylibï¼š åŠ¨æ€é“¾æŽ¥åº“ï¼ˆåˆç§° DSO æˆ– DLLï¼‰Bundleï¼š ä¸èƒ½è¢«é“¾æŽ¥çš„ Dylibï¼Œåªèƒ½åœ¨è¿è¡Œæ—¶ä½¿ç”¨ dlopen() åŠ è½½ï¼Œå¯å½“åš macOS çš„æ’ä»¶ã€‚Imageï¼š executableï¼Œdylib æˆ– bundleFrameworkï¼š åŒ…å« Dylib ä»¥åŠèµ„æºæ–‡ä»¶å’Œå¤´æ–‡ä»¶çš„æ–‡ä»¶å¤¹Mach-O é•œåƒæ–‡ä»¶Mach-O è¢«åˆ’åˆ†æˆä¸€äº› segementï¼Œæ¯ä¸ª segement åˆè¢«åˆ’åˆ†æˆä¸€äº› sectionã€‚segment çš„åå­—éƒ½æ˜¯å¤§å†™çš„ï¼Œä¸”ç©ºé—´å¤§å°ä¸ºé¡µçš„æ•´æ•°ã€‚é¡µçš„å¤§å°è·Ÿç¡¬ä»¶æœ‰å…³ï¼Œåœ¨ arm64 æž¶æž„ä¸€é¡µæ˜¯ 16KBï¼Œå…¶ä½™ä¸º 4KBã€‚section è™½ç„¶æ²¡æœ‰æ•´æ•°å€é¡µå¤§å°çš„é™åˆ¶ï¼Œä½†æ˜¯ section ä¹‹é—´ä¸ä¼šæœ‰é‡å ã€‚å‡ ä¹Žæ‰€æœ‰ Mach-O éƒ½åŒ…å«è¿™ä¸‰ä¸ªæ®µï¼ˆsegmentï¼‰ï¼š TEXT , DATA å’Œ LINKEDIT ï¼š TEXT åŒ…å« Mach headerï¼Œè¢«æ‰§è¡Œçš„ä»£ç å’Œåªè¯»å¸¸é‡ï¼ˆå¦‚C å­—ç¬¦ä¸²ï¼‰ã€‚åªè¯»å¯æ‰§è¡Œï¼ˆr-xï¼‰ã€‚DATA åŒ…å«å…¨å±€å˜é‡ï¼Œé™æ€å˜é‡ç­‰ã€‚å¯è¯»å†™ï¼ˆrw-ï¼‰ã€‚ LINKEDIT åŒ…å«äº†åŠ è½½ç¨‹åºçš„ã€Žå…ƒæ•°æ®ã€ï¼Œæ¯”å¦‚å‡½æ•°çš„åç§°å’Œåœ°å€ã€‚åªè¯»ï¼ˆrâ€“ï¼‰ã€‚Mach-O Universal æ–‡ä»¶FAT äºŒè¿›åˆ¶ æ–‡ä»¶ï¼Œå°†å¤šç§æž¶æž„çš„ Mach-O æ–‡ä»¶åˆå¹¶è€Œæˆã€‚å®ƒé€šè¿‡ Fat Header æ¥è®°å½•ä¸åŒæž¶æž„åœ¨æ–‡ä»¶ä¸­çš„åç§»é‡ï¼ŒFat Header å ä¸€é¡µçš„ç©ºé—´ã€‚æŒ‰åˆ†é¡µæ¥å­˜å‚¨è¿™äº› segement å’Œ header ä¼šæµªè´¹ç©ºé—´ï¼Œä½†è¿™æœ‰åˆ©äºŽè™šæ‹Ÿå†…å­˜çš„å®žçŽ°ã€‚è™šæ‹Ÿå†…å­˜è™šæ‹Ÿå†…å­˜å°±æ˜¯ä¸€å±‚é—´æŽ¥å¯»å€ï¼ˆindirectionï¼‰ã€‚è½¯ä»¶å·¥ç¨‹ä¸­æœ‰å¥æ ¼è¨€å°±æ˜¯ä»»ä½•é—®é¢˜éƒ½èƒ½é€šè¿‡æ·»åŠ ä¸€ä¸ªé—´æŽ¥å±‚æ¥è§£å†³ã€‚è™šæ‹Ÿå†…å­˜è§£å†³çš„æ˜¯ç®¡ç†æ‰€æœ‰è¿›ç¨‹ä½¿ç”¨ç‰©ç† RAM çš„é—®é¢˜ã€‚é€šè¿‡æ·»åŠ é—´æŽ¥å±‚æ¥è®©æ¯ä¸ªè¿›ç¨‹ä½¿ç”¨é€»è¾‘åœ°å€ç©ºé—´ï¼Œå®ƒå¯ä»¥æ˜ å°„åˆ° RAM ä¸Šçš„æŸä¸ªç‰©ç†é¡µä¸Šã€‚è¿™ç§æ˜ å°„ä¸æ˜¯ä¸€å¯¹ä¸€çš„ï¼Œé€»è¾‘åœ°å€å¯èƒ½æ˜ å°„ä¸åˆ° RAM ä¸Šï¼Œä¹Ÿå¯èƒ½æœ‰å¤šä¸ªé€»è¾‘åœ°å€æ˜ å°„åˆ°åŒä¸€ä¸ªç‰©ç† RAM ä¸Šã€‚é’ˆå¯¹ç¬¬ä¸€ç§æƒ…å†µï¼Œå½“è¿›ç¨‹è¦å­˜å‚¨é€»è¾‘åœ°å€å†…å®¹æ—¶ä¼šè§¦å‘ page faultï¼›ç¬¬äºŒç§æƒ…å†µå°±æ˜¯å¤šè¿›ç¨‹å…±äº«å†…å­˜ã€‚å¯¹äºŽæ–‡ä»¶å¯ä»¥ä¸ç”¨ä¸€æ¬¡æ€§è¯»å…¥æ•´ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨åˆ†é¡µæ˜ å°„ï¼ˆ mmap() ï¼‰çš„æ–¹å¼è¯»å–ã€‚ä¹Ÿå°±æ˜¯æŠŠæ–‡ä»¶æŸä¸ªç‰‡æ®µæ˜ å°„åˆ°è¿›ç¨‹é€»è¾‘å†…å­˜çš„æŸä¸ªé¡µä¸Šã€‚å½“æŸä¸ªæƒ³è¦è¯»å–çš„é¡µæ²¡æœ‰åœ¨å†…å­˜ä¸­ï¼Œå°±ä¼šè§¦å‘ page faultï¼Œå†…æ ¸åªä¼šè¯»å…¥é‚£ä¸€é¡µï¼Œå®žçŽ°æ–‡ä»¶çš„æ‡’åŠ è½½ã€‚ä¹Ÿå°±æ˜¯è¯´ Mach-O æ–‡ä»¶ä¸­çš„ TEXT æ®µå¯ä»¥æ˜ å°„åˆ°å¤šä¸ªè¿›ç¨‹ï¼Œå¹¶å¯ä»¥æ‡’åŠ è½½ï¼Œä¸”è¿›ç¨‹ä¹‹é—´å…±äº«å†…å­˜ã€‚ DATA æ®µæ˜¯å¯è¯»å†™çš„ã€‚è¿™é‡Œä½¿ç”¨åˆ°äº† Copy-On-Write æŠ€æœ¯ï¼Œç®€ç§° COWã€‚ä¹Ÿå°±æ˜¯å¤šä¸ªè¿›ç¨‹å…±äº«ä¸€é¡µå†…å­˜ç©ºé—´æ—¶ï¼Œä¸€æ—¦æœ‰è¿›ç¨‹è¦åšå†™æ“ä½œï¼Œå®ƒä¼šå…ˆå°†è¿™é¡µå†…å­˜å†…å®¹å¤åˆ¶ä¸€ä»½å‡ºæ¥ï¼Œç„¶åŽé‡æ–°æ˜ å°„é€»è¾‘åœ°å€åˆ°æ–°çš„ RAM é¡µä¸Šã€‚ä¹Ÿå°±æ˜¯è¿™ä¸ªè¿›ç¨‹è‡ªå·±æ‹¥æœ‰äº†é‚£é¡µå†…å­˜çš„æ‹·è´ã€‚è¿™å°±æ¶‰åŠåˆ°äº† clean/dirty page çš„æ¦‚å¿µã€‚dirty page å«æœ‰è¿›ç¨‹è‡ªå·±çš„ä¿¡æ¯ï¼Œè€Œ clean page å¯ä»¥è¢«å†…æ ¸é‡æ–°ç”Ÿæˆï¼ˆé‡æ–°è¯»ç£ç›˜ï¼‰ã€‚æ‰€ä»¥ dirty page çš„ä»£ä»·å¤§äºŽ clean pageã€‚Mach-O é•œåƒ åŠ è½½æ‰€ä»¥åœ¨å¤šä¸ªè¿›ç¨‹åŠ è½½ Mach-O é•œåƒæ—¶ TEXT å’Œ LINKEDIT å› ä¸ºåªè¯»ï¼Œéƒ½æ˜¯å¯ä»¥å…±äº«å†…å­˜çš„ã€‚è€Œ DATA å› ä¸ºå¯è¯»å†™ï¼Œå°±ä¼šäº§ç”Ÿ dirty pageã€‚å½“ dyld æ‰§è¡Œç»“æŸåŽï¼Œ LINKEDIT å°±æ²¡ç”¨äº†ï¼Œå¯¹åº”çš„å†…å­˜é¡µä¼šè¢«å›žæ”¶ã€‚å®‰å…¨ASLRï¼ˆAddress Space Layout Randomizationï¼‰ï¼šåœ°å€ç©ºé—´å¸ƒå±€éšæœºåŒ–ï¼Œé•œåƒä¼šåœ¨éšæœºçš„åœ°å€ä¸ŠåŠ è½½ã€‚è¿™å…¶å®žæ˜¯ä¸€äºŒåå¹´å‰çš„æ—§æŠ€æœ¯äº†ã€‚ä»£ç ç­¾åï¼šå¯èƒ½æˆ‘ä»¬è®¤ä¸º Xcode ä¼šæŠŠæ•´ä¸ªæ–‡ä»¶éƒ½åšåŠ å¯† hash å¹¶ç”¨åšæ•°å­—ç­¾åã€‚å…¶å®žä¸ºäº†åœ¨è¿è¡Œæ—¶éªŒè¯ Mach-O æ–‡ä»¶çš„ç­¾åï¼Œå¹¶ä¸æ˜¯æ¯æ¬¡é‡å¤è¯»å…¥æ•´ä¸ªæ–‡ä»¶ï¼Œè€Œæ˜¯æŠŠæ¯é¡µå†…å®¹éƒ½ç”Ÿæˆä¸€ä¸ªå•ç‹¬çš„åŠ å¯†æ•£åˆ—å€¼ï¼Œå¹¶å­˜å‚¨åœ¨ LINKEDIT ä¸­ã€‚è¿™ä½¿å¾—æ–‡ä»¶æ¯é¡µçš„å†…å®¹éƒ½èƒ½åŠæ—¶è¢«æ ¡éªŒç¡®å¹¶ä¿ä¸è¢«ç¯¡æ”¹ã€‚ä»Ž exec() åˆ° main()exec() æ˜¯ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ã€‚ç³»ç»Ÿå†…æ ¸æŠŠåº”ç”¨æ˜ å°„åˆ°æ–°çš„åœ°å€ç©ºé—´ï¼Œä¸”æ¯æ¬¡èµ·å§‹ä½ç½®éƒ½æ˜¯éšæœºçš„ï¼ˆå› ä¸ºä½¿ç”¨ ASLRï¼‰ã€‚å¹¶å°†èµ·å§‹ä½ç½®åˆ° 0x000000 è¿™æ®µèŒƒå›´çš„è¿›ç¨‹æƒé™éƒ½æ ‡è®°ä¸ºä¸å¯è¯»å†™ä¸å¯æ‰§è¡Œã€‚å¦‚æžœæ˜¯ 32 ä½è¿›ç¨‹ï¼Œè¿™ä¸ªèŒƒå›´ è‡³å°‘ æ˜¯ 4KBï¼›å¯¹äºŽ 64 ä½è¿›ç¨‹åˆ™ è‡³å°‘ æ˜¯ 4GBã€‚NULL æŒ‡é’ˆå¼•ç”¨å’ŒæŒ‡é’ˆæˆªæ–­è¯¯å·®éƒ½æ˜¯ä¼šè¢«å®ƒæ•èŽ·ã€‚dyld åŠ è½½ dylib æ–‡ä»¶Unix çš„å‰äºŒåå¹´å¾ˆå®‰é€¸ï¼Œå› ä¸ºé‚£æ—¶è¿˜æ²¡æœ‰å‘æ˜ŽåŠ¨æ€é“¾æŽ¥åº“ã€‚æœ‰äº†åŠ¨æ€é“¾æŽ¥åº“åŽï¼Œä¸€ä¸ªç”¨äºŽåŠ è½½é“¾æŽ¥åº“çš„å¸®åŠ©ç¨‹åºè¢«åˆ›å»ºã€‚åœ¨è‹¹æžœçš„å¹³å°é‡Œæ˜¯ dyld ï¼Œå…¶ä»– Unix ç³»ç»Ÿä¹Ÿæœ‰ld.so ã€‚ å½“å†…æ ¸å®Œæˆæ˜ å°„è¿›ç¨‹çš„å·¥ä½œåŽä¼šå°†åå­—ä¸º dyld çš„Mach-O æ–‡ä»¶æ˜ å°„åˆ°è¿›ç¨‹ä¸­çš„éšæœºåœ°å€ï¼Œå®ƒå°† PC å¯„å­˜å™¨è®¾ä¸º dyld çš„åœ°å€å¹¶è¿è¡Œã€‚ dyld åœ¨åº”ç”¨è¿›ç¨‹ä¸­è¿è¡Œçš„å·¥ä½œæ˜¯åŠ è½½åº”ç”¨ä¾èµ–çš„æ‰€æœ‰åŠ¨æ€é“¾æŽ¥åº“ï¼Œå‡†å¤‡å¥½è¿è¡Œæ‰€éœ€çš„ä¸€åˆ‡ï¼Œå®ƒæ‹¥æœ‰çš„æƒé™è·Ÿåº”ç”¨ä¸€æ ·ã€‚ä¸‹é¢çš„æ­¥éª¤æž„æˆäº† dyld çš„æ—¶é—´çº¿ï¼šLoad dylibs -&gt; Rebase -&gt; Bind -&gt; ObjC -&gt; InitializersåŠ è½½ Dylibä»Žä¸»æ‰§è¡Œæ–‡ä»¶çš„ header èŽ·å–åˆ°éœ€è¦åŠ è½½çš„æ‰€ä¾èµ–åŠ¨æ€åº“åˆ—è¡¨ï¼Œè€Œ header æ—©å°±è¢«å†…æ ¸æ˜ å°„è¿‡ã€‚ç„¶åŽå®ƒéœ€è¦æ‰¾åˆ°æ¯ä¸ª dylibï¼Œç„¶åŽæ‰“å¼€æ–‡ä»¶è¯»å–æ–‡ä»¶èµ·å§‹ä½ç½®ï¼Œç¡®ä¿å®ƒæ˜¯ Mach-O æ–‡ä»¶ã€‚æŽ¥ç€ä¼šæ‰¾åˆ°ä»£ç ç­¾åå¹¶å°†å…¶æ³¨å†Œåˆ°å†…æ ¸ã€‚ç„¶åŽåœ¨ dylib æ–‡ä»¶çš„æ¯ä¸ª segment ä¸Šè°ƒç”¨ mmap() ã€‚åº”ç”¨æ‰€ä¾èµ–çš„ dylib æ–‡ä»¶å¯èƒ½ä¼šå†ä¾èµ–å…¶ä»– dylibï¼Œæ‰€ä»¥ dyldæ‰€éœ€è¦åŠ è½½çš„æ˜¯åŠ¨æ€åº“åˆ—è¡¨ä¸€ä¸ªé€’å½’ä¾èµ–çš„é›†åˆã€‚ä¸€èˆ¬åº”ç”¨ä¼šåŠ è½½ 100 åˆ° 400 ä¸ª dylib æ–‡ä»¶ï¼Œä½†å¤§éƒ¨åˆ†éƒ½æ˜¯ç³»ç»Ÿ dylibï¼Œå®ƒä»¬ä¼šè¢«é¢„å…ˆè®¡ç®—å’Œç¼“å­˜èµ·æ¥ï¼ŒåŠ è½½é€Ÿåº¦å¾ˆå¿«ã€‚Fix-upsåœ¨åŠ è½½æ‰€æœ‰çš„åŠ¨æ€é“¾æŽ¥åº“ä¹‹åŽï¼Œå®ƒä»¬åªæ˜¯å¤„åœ¨ç›¸äº’ç‹¬ç«‹çš„çŠ¶æ€ï¼Œéœ€è¦å°†å®ƒä»¬ç»‘å®šèµ·æ¥ï¼Œè¿™å°±æ˜¯ Fix-upsã€‚ä»£ç ç­¾åä½¿å¾—æˆ‘ä»¬ä¸èƒ½ä¿®æ”¹æŒ‡ä»¤ï¼Œé‚£æ ·å°±ä¸èƒ½è®©ä¸€ä¸ª dylib çš„è°ƒç”¨å¦ä¸€ä¸ª dylibã€‚è¿™æ—¶éœ€è¦åŠ å¾ˆå¤šé—´æŽ¥å±‚ã€‚çŽ°ä»£ code-gen è¢«å«åšåŠ¨æ€ PICï¼ˆPosition Independent Codeï¼‰ï¼Œæ„å‘³ç€ä»£ç å¯ä»¥è¢«åŠ è½½åˆ°é—´æŽ¥çš„åœ°å€ä¸Šã€‚å½“è°ƒç”¨å‘ç”Ÿæ—¶ï¼Œcode-gen å®žé™…ä¸Šä¼šåœ¨ DATA æ®µä¸­åˆ›å»ºä¸€ä¸ªæŒ‡å‘è¢«è°ƒç”¨è€…çš„æŒ‡é’ˆï¼Œç„¶åŽåŠ è½½æŒ‡é’ˆå¹¶è·³è½¬è¿‡åŽ»ã€‚æ‰€ä»¥ dyld åšçš„äº‹æƒ…å°±æ˜¯ä¿®æ­£ï¼ˆfix-upï¼‰æŒ‡é’ˆå’Œæ•°æ®ã€‚Fix-up æœ‰ä¸¤ç§ç±»åž‹ï¼Œrebasing å’Œ bindingã€‚Rebasing å’Œ BindingRebasingï¼šåœ¨é•œåƒå†…éƒ¨è°ƒæ•´æŒ‡é’ˆçš„æŒ‡å‘Bindingï¼šå°†æŒ‡é’ˆæŒ‡å‘é•œåƒå¤–éƒ¨çš„å†…å®¹å¯ä»¥é€šè¿‡å‘½ä»¤è¡ŒæŸ¥çœ‹ rebase å’Œ bind ç­‰ä¿¡æ¯ï¼šxcrun dyldinfo -rebase -bind -lazy_bind myapp.app/myapp é€šè¿‡è¿™ä¸ªå‘½ä»¤å¯ä»¥æŸ¥çœ‹æ‰€æœ‰çš„ Fix-upã€‚rebaseï¼Œbindï¼Œweak_bindï¼Œlazy_bind éƒ½å­˜å‚¨åœ¨ LINKEDIT æ®µä¸­ï¼Œå¹¶å¯é€šè¿‡ LC_DYLD_INFO_ONLY æŸ¥çœ‹å„ç§ä¿¡æ¯çš„åç§»é‡å’Œå¤§å°ã€‚å»ºè®®ç”¨ MachOView æŸ¥çœ‹æ›´åŠ æ–¹ä¾¿ç›´è§‚ã€‚ä»Ž dyld æºç å±‚é¢ç®€è¦ä»‹ç»ä¸‹ Rebasing å’Œ Binding çš„æµç¨‹ã€‚ImageLoader æ˜¯ä¸€ä¸ªç”¨äºŽåŠ è½½å¯æ‰§è¡Œæ–‡ä»¶çš„åŸºç±»ï¼Œå®ƒè´Ÿè´£é“¾æŽ¥é•œåƒï¼Œä½†ä¸å…³å¿ƒå…·ä½“æ–‡ä»¶æ ¼å¼ï¼Œå› ä¸ºè¿™äº›éƒ½äº¤ç»™å­ç±»åŽ»å®žçŽ°ã€‚æ¯ä¸ªå¯æ‰§è¡Œæ–‡ä»¶éƒ½ä¼šå¯¹åº”ä¸€ä¸ª ImageLoaderå®žä¾‹ã€‚ ImageLoaderMachO æ˜¯ç”¨äºŽåŠ è½½ Mach-O æ ¼å¼æ–‡ä»¶çš„ ImageLoader å­ç±»ï¼Œè€ŒImageLoaderMachOClassic å’Œ ImageLoaderMachOCompressed éƒ½ç»§æ‰¿äºŽ ImageLoaderMachO ï¼Œåˆ†åˆ«ç”¨äºŽåŠ è½½é‚£äº› LINKEDIT æ®µä¸ºä¼ ç»Ÿæ ¼å¼å’ŒåŽ‹ç¼©æ ¼å¼çš„ Mach-O æ–‡ä»¶ã€‚å› ä¸º dylib ä¹‹é—´æœ‰ä¾èµ–å…³ç³»ï¼Œæ‰€ä»¥ ImageLoader ä¸­çš„å¥½å¤šæ“ä½œéƒ½æ˜¯æ²¿ç€ä¾èµ–é“¾é€’å½’æ“ä½œçš„ï¼ŒRebasing å’Œ Binding ä¹Ÿä¸ä¾‹å¤–ï¼Œåˆ†åˆ«å¯¹åº”ç€ recursiveBind() å’Œ recursiveBind() è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚å› ä¸ºæ˜¯é€’å½’ï¼Œæ‰€ä»¥ä¼šè‡ªåº•å‘ä¸Šåœ°åˆ†åˆ«è°ƒç”¨ doRebase() å’Œ doBind() æ–¹æ³•ï¼Œè¿™æ ·è¢«ä¾èµ–çš„ dylib æ€»æ˜¯å…ˆäºŽä¾èµ–å®ƒçš„ dylib æ‰§è¡Œ Rebasing å’Œ Bindingã€‚ä¼ å…¥ doRebase() å’Œ doBind() çš„å‚æ•°åŒ…å«ä¸€ä¸ª LinkContext ä¸Šä¸‹æ–‡ï¼Œå­˜å‚¨äº†å¯æ‰§è¡Œæ–‡ä»¶çš„ä¸€å †çŠ¶æ€å’Œç›¸å…³çš„å‡½æ•°ã€‚åœ¨ Rebasing å’Œ Binding å‰ä¼šåˆ¤æ–­æ˜¯å¦å·²ç» Prebindingã€‚å¦‚æžœå·²ç»è¿›è¡Œè¿‡é¢„ç»‘å®šï¼ˆPrebindingï¼‰ï¼Œé‚£å°±ä¸éœ€è¦ Rebasing å’Œ Binding è¿™äº› Fix-up æµç¨‹äº†ï¼Œå› ä¸ºå·²ç»åœ¨é¢„å…ˆç»‘å®šçš„åœ°å€åŠ è½½å¥½äº†ã€‚ImageLoaderMachO å®žä¾‹ ä¸ä½¿ç”¨é¢„ç»‘ å®šä¼šæœ‰å››ä¸ªåŽŸå› ï¼šMach-O Header ä¸­ MH_PREBOUND æ ‡å¿—ä½ä¸º 0é•œåƒåŠ è½½åœ°å€æœ‰åç§»ï¼ˆè¿™ä¸ªåŽé¢ä¼šè®²åˆ°ï¼‰ä¾èµ–çš„åº“æœ‰å˜åŒ–é•œåƒä½¿ç”¨ flat-namespaceï¼Œé¢„ç»‘å®šçš„ä¸€éƒ¨åˆ†ä¼šè¢«å¿½ç•¥LinkContext çš„çŽ¯å¢ƒå˜é‡ç¦æ­¢äº†é¢„ç»‘å®šImageLoaderMachO ä¸­ doRebase() åšçš„äº‹æƒ…å¤§è‡´å¦‚ä¸‹ï¼šå¦‚æžœä½¿ç”¨é¢„ç»‘å®šï¼Œ fgImagesWithUsedPrebinding è®¡æ•°åŠ ä¸€ï¼Œå¹¶ return ;å¦åˆ™è¿›å…¥ç¬¬äºŒæ­¥å¦‚æžœ MH_PREBOUND æ ‡å¿—ä½ä¸º 1 ï¼ˆä¹Ÿå°±æ˜¯å¯ä»¥é¢„ç»‘å®šä½†æ²¡ä½¿ç”¨ï¼‰ï¼Œä¸”é•œåƒåœ¨å…±äº«å†…å­˜ä¸­ï¼Œé‡ç½®ä¸Šä¸‹æ–‡ä¸­æ‰€æœ‰çš„ lazy pointerã€‚ï¼ˆå¦‚æžœé•œåƒåœ¨å…±äº«å†…å­˜ä¸­ï¼Œç¨åŽä¼šåœ¨ Binding è¿‡ç¨‹ä¸­ç»‘å®šï¼Œæ‰€ä»¥æ— éœ€é‡ç½®ï¼‰å¦‚æžœé•œåƒåŠ è½½åœ°å€åç§»é‡ä¸º0ï¼Œåˆ™æ— éœ€ Rebasingï¼Œç›´æŽ¥ return ï¼›å¦åˆ™è¿›å…¥ç¬¬å››æ­¥è°ƒç”¨ rebase() æ–¹æ³•ï¼Œè¿™æ‰æ˜¯çœŸæ­£åš Rebasing å·¥ä½œçš„æ–¹æ³•ã€‚å¦‚æžœå¼€å¯ TEXT_RELOC_SUPPORT å®ï¼Œä¼šå…è®¸ rebase() æ–¹æ³•å¯¹ TEXT æ®µåšå†™æ“ä½œæ¥å¯¹å…¶è¿›è¡Œ Fix-upã€‚æ‰€ä»¥å…¶å®ž TEXT åªè¯»å±žæ€§å¹¶ä¸æ˜¯ç»å¯¹çš„ã€‚ImageLoaderMachOClassic å’Œ ImageLoaderMachOCompressed åˆ†åˆ«å®žçŽ°äº†è‡ªå·±çš„doRebase() æ–¹æ³•ã€‚å®žçŽ°é€»è¾‘å¤§åŒå°å¼‚ï¼ŒåŒæ ·ä¼šåˆ¤æ–­æ˜¯å¦ä½¿ç”¨é¢„ç»‘å®šï¼Œå¹¶åœ¨çœŸæ­£çš„ Binding å·¥ä½œæ—¶åˆ¤æ–­ TEXT_RELOC_SUPPORT å®æ¥å†³å®šæ˜¯å¦å¯¹ TEXT æ®µåšå†™æ“ä½œã€‚æœ€åŽéƒ½ä¼šè°ƒç”¨ setupLazyPointerHandler åœ¨é•œåƒä¸­è®¾ç½® dyld çš„ entry pointï¼Œæ”¾åœ¨æœ€åŽè°ƒç”¨æ˜¯ä¸ºäº†è®©ä¸»å¯æ‰§è¡Œæ–‡ä»¶è®¾ç½®å¥½ dyld æˆ– program_vars ã€‚Rebasingåœ¨è¿‡åŽ»ï¼Œä¼šæŠŠ dylib åŠ è½½åˆ°æŒ‡å®šåœ°å€ï¼Œæ‰€æœ‰æŒ‡é’ˆå’Œæ•°æ®å¯¹äºŽä»£ç æ¥è¯´éƒ½æ˜¯å¯¹çš„ï¼Œ dyld å°±æ— éœ€åšä»»ä½• fix-up äº†ã€‚å¦‚ä»Šç”¨äº† ASLR åŽæ‚”å°† dylib åŠ è½½åˆ°æ–°çš„éšæœºåœ°å€(actual_address)ï¼Œè¿™ä¸ªéšæœºçš„åœ°å€è·Ÿä»£ç å’Œæ•°æ®æŒ‡å‘çš„æ—§åœ°å€(preferred_address)ä¼šæœ‰åå·®ï¼Œdyld éœ€è¦ä¿®æ­£è¿™ä¸ªåå·®(slide)ï¼Œåšæ³•å°±æ˜¯å°† dylib å†…éƒ¨çš„æŒ‡é’ˆåœ°å€éƒ½åŠ ä¸Šè¿™ä¸ªåç§»é‡ï¼Œåç§»é‡çš„è®¡ç®—æ–¹æ³•å¦‚ä¸‹ï¼šSlide = actual_address - preferred_addressç„¶åŽå°±æ˜¯é‡å¤ä¸æ–­åœ°å¯¹ DATA æ®µä¸­éœ€è¦ rebase çš„æŒ‡é’ˆåŠ ä¸Šè¿™ä¸ªåç§»é‡ã€‚è¿™å°±åˆæ¶‰åŠåˆ° page fault å’Œ COWã€‚è¿™å¯èƒ½ä¼šäº§ç”Ÿ I/O ç“¶é¢ˆï¼Œä½†å› ä¸º rebase çš„é¡ºåºæ˜¯æŒ‰åœ°å€æŽ’åˆ—çš„ï¼Œæ‰€ä»¥ä»Žå†…æ ¸çš„è§’åº¦æ¥çœ‹è¿™æ˜¯ä¸ªæœ‰æ¬¡åºçš„ä»»åŠ¡ï¼Œå®ƒä¼šé¢„å…ˆè¯»å…¥æ•°æ®ï¼Œå‡å°‘ I/O æ¶ˆè€—ã€‚BindingBinding æ˜¯å¤„ç†é‚£äº›æŒ‡å‘ dylib å¤–éƒ¨çš„æŒ‡é’ˆï¼Œå®ƒä»¬å®žé™…ä¸Šè¢«ç¬¦å·ï¼ˆsymbolï¼‰åç§°ç»‘å®šï¼Œä¹Ÿå°±æ˜¯ä¸ªå­—ç¬¦ä¸²ã€‚ä¹‹å‰æåˆ° LINKEDIT æ®µä¸­ä¹Ÿå­˜å‚¨äº†éœ€è¦ bind çš„æŒ‡é’ˆï¼Œä»¥åŠæŒ‡é’ˆéœ€è¦æŒ‡å‘çš„ç¬¦å·ã€‚ dyld éœ€è¦æ‰¾åˆ° symbol å¯¹åº”çš„å®žçŽ°ï¼Œè¿™éœ€è¦å¾ˆå¤šè®¡ç®—ï¼ŒåŽ»ç¬¦å·è¡¨é‡ŒæŸ¥æ‰¾ã€‚æ‰¾åˆ°åŽä¼šå°†å†…å®¹å­˜å‚¨åˆ° DATA æ®µä¸­çš„é‚£ä¸ªæŒ‡é’ˆä¸­ã€‚Binding çœ‹èµ·æ¥è®¡ç®—é‡æ¯” Rebasing æ›´å¤§ï¼Œä½†å…¶å®žéœ€è¦çš„ I/O æ“ä½œå¾ˆå°‘ï¼Œå› ä¸ºä¹‹å‰ Rebasing å·²ç»æ›¿ Binding åšè¿‡äº†ã€‚ObjC RuntimeObjective-C ä¸­æœ‰å¾ˆå¤šæ•°æ®ç»“æž„éƒ½æ˜¯é  Rebasing å’Œ Binding æ¥ä¿®æ­£ï¼ˆfix-upï¼‰çš„ï¼Œæ¯”å¦‚ Class ä¸­æŒ‡å‘è¶…ç±»çš„æŒ‡é’ˆå’ŒæŒ‡å‘æ–¹æ³•çš„æŒ‡é’ˆã€‚ObjC æ˜¯ä¸ªåŠ¨æ€è¯­è¨€ï¼Œå¯ä»¥ç”¨ç±»çš„åå­—æ¥å®žä¾‹åŒ–ä¸€ä¸ªç±»çš„å¯¹è±¡ã€‚è¿™æ„å‘³ç€ ObjC Runtime éœ€è¦ç»´æŠ¤ä¸€å¼ æ˜ å°„ç±»åä¸Žç±»çš„å…¨å±€è¡¨ã€‚å½“åŠ è½½ä¸€ä¸ª dylib æ—¶ï¼Œå…¶å®šä¹‰çš„æ‰€æœ‰çš„ç±»éƒ½éœ€è¦è¢«æ³¨å†Œåˆ°è¿™ä¸ªå…¨å±€è¡¨ä¸­ã€‚C++ ä¸­æœ‰ä¸ªé—®é¢˜å«åšæ˜“ç¢Žçš„åŸºç±»ï¼ˆfragile base classï¼‰ã€‚ObjC å°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºä¼šåœ¨åŠ è½½æ—¶é€šè¿‡ fix-up åŠ¨æ€ç±»ä¸­æ”¹å˜å®žä¾‹å˜é‡çš„åç§»é‡ã€‚åœ¨ ObjC ä¸­å¯ä»¥é€šè¿‡å®šä¹‰ç±»åˆ«ï¼ˆCategoryï¼‰çš„æ–¹å¼æ”¹å˜ä¸€ä¸ªç±»çš„æ–¹æ³•ã€‚æœ‰æ—¶ä½ æƒ³è¦æ·»åŠ æ–¹æ³•çš„ç±»åœ¨å¦ä¸€ä¸ª dylib ä¸­ï¼Œè€Œä¸åœ¨ä½ çš„é•œåƒä¸­ï¼ˆä¹Ÿå°±æ˜¯å¯¹ç³»ç»Ÿæˆ–åˆ«äººçš„ç±»åŠ¨åˆ€ï¼‰ï¼Œè¿™æ—¶ä¹Ÿéœ€è¦åšäº› fix-upã€‚ObjC ä¸­çš„ selector å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚InitializersC++ ä¼šä¸ºé™æ€åˆ›å»ºçš„å¯¹è±¡ç”Ÿæˆåˆå§‹åŒ–å™¨ã€‚è€Œåœ¨ ObjC ä¸­æœ‰ä¸ªå« +load çš„æ–¹æ³•ï¼Œç„¶è€Œå®ƒè¢«åºŸå¼ƒäº†ï¼ŒçŽ°åœ¨å»ºè®®ä½¿ç”¨ +initialize ã€‚å¯¹æ¯”è¯¦è§ï¼š http://stackoverflow.com/questions/13326435/nsobject-load-and-initialize-what-do-they-doçŽ°åœ¨æœ‰äº†ä¸»æ‰§è¡Œæ–‡ä»¶ï¼Œä¸€å † dylibï¼Œå…¶ä¾èµ–å…³ç³»æž„æˆäº†ä¸€å¼ å·¨å¤§çš„æœ‰å‘å›¾ï¼Œé‚£ä¹ˆæ‰§è¡Œåˆå§‹åŒ–å™¨çš„é¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿè‡ªé¡¶å‘ä¸Šï¼æŒ‰ç…§ä¾èµ–å…³ç³»ï¼Œå…ˆåŠ è½½å¶å­èŠ‚ç‚¹ï¼Œç„¶åŽé€æ­¥å‘ä¸ŠåŠ è½½ä¸­é—´èŠ‚ç‚¹ï¼Œç›´è‡³æœ€åŽåŠ è½½æ ¹èŠ‚ç‚¹ã€‚è¿™ç§åŠ è½½é¡ºåºç¡®ä¿äº†å®‰å…¨æ€§ï¼ŒåŠ è½½æŸä¸ª dylib å‰ï¼Œå…¶æ‰€ä¾èµ–çš„å…¶ä½™ dylib æ–‡ä»¶è‚¯å®šå·²ç»è¢«é¢„å…ˆåŠ è½½ã€‚æœ€åŽ dyld ä¼šè°ƒç”¨ main() å‡½æ•°ã€‚ main() ä¼šè°ƒç”¨ UIApplicationMain() ã€‚æ”¹å–„å¯åŠ¨æ—¶é—´ä»Žç‚¹å‡» App å›¾æ ‡åˆ°åŠ è½½ App é—ªå±ä¹‹é—´ä¼šæœ‰ä¸ªåŠ¨ç”»ï¼Œæˆ‘ä»¬å¸Œæœ› App å¯åŠ¨é€Ÿåº¦æ¯”è¿™ä¸ªåŠ¨ç”»æ›´å¿«ã€‚è™½ç„¶ä¸åŒè®¾å¤‡ä¸Š App å¯åŠ¨é€Ÿåº¦ä¸ä¸€æ ·ï¼Œä½†å¯åŠ¨æ—¶é—´æœ€å¥½æŽ§åˆ¶åœ¨ 400msã€‚éœ€è¦æ³¨æ„çš„æ˜¯å¯åŠ¨æ—¶é—´ä¸€æ—¦è¶…è¿‡ 20sï¼Œç³»ç»Ÿä¼šè®¤ä¸ºå‘ç”Ÿäº†æ­»å¾ªçŽ¯å¹¶æ€æŽ‰ App è¿›ç¨‹ã€‚å½“ç„¶å¯åŠ¨æ—¶é—´æœ€å¥½ä»¥ App æ‰€æ”¯æŒçš„æœ€ä½Žé…ç½®è®¾å¤‡ä¸ºå‡†ã€‚ç›´åˆ° applicationWillFinishLaunching è¢«è°ƒåŠ¨ï¼ŒApp æ‰å¯åŠ¨ç»“æŸã€‚æµ‹é‡å¯åŠ¨æ—¶é—´Warm launch: App å’Œæ•°æ®å·²ç»åœ¨å†…å­˜ä¸­Cold launch: App ä¸åœ¨å†…æ ¸ç¼“å†²å­˜å‚¨å™¨ä¸­å†·å¯åŠ¨ï¼ˆCold launchï¼‰è€—æ—¶æ‰æ˜¯æˆ‘ä»¬éœ€è¦æµ‹é‡çš„é‡è¦æ•°æ®ï¼Œä¸ºäº†å‡†ç¡®æµ‹é‡å†·å¯åŠ¨è€—æ—¶ï¼Œæµ‹é‡å‰éœ€è¦é‡å¯è®¾å¤‡ã€‚åœ¨ main() æ–¹æ³•æ‰§è¡Œå‰æµ‹é‡æ˜¯å¾ˆéš¾çš„ï¼Œå¥½åœ¨ dyld æä¾›äº†å†…å»ºçš„æµ‹é‡æ–¹æ³•ï¼šåœ¨ Xcode ä¸­ Edit scheme -&gt; Run -&gt; Auguments å°†çŽ¯å¢ƒå˜é‡ DYLD_PRINT_STATISTICS è®¾ä¸º 1 ã€‚æŽ§åˆ¶å°è¾“å‡ºçš„å†…å®¹å¦‚ä¸‹ï¼šTotal pre-main time:228.41 milliseconds (100.0%)dylib loading time:82.35 milliseconds (36.0%)rebase/binding time:6.12 milliseconds (2.6%)ObjC setup time:7.82 milliseconds (3.4%)initializer time:132.02 milliseconds (57.8%)slowest intializers :libSystem.B.dylib:122.07 milliseconds (53.4%)CoreFoundation:5.59 milliseconds (2.4%)ä¼˜åŒ–å¯åŠ¨æ—¶é—´å¯ä»¥é’ˆå¯¹ App å¯åŠ¨å‰çš„æ¯ä¸ªæ­¥éª¤è¿›è¡Œç›¸åº”çš„ä¼˜åŒ–å·¥ä½œã€‚åŠ è½½ Dylibä¹‹å‰æåˆ°è¿‡åŠ è½½ç³»ç»Ÿçš„ dylib å¾ˆå¿«ï¼Œå› ä¸ºæœ‰ä¼˜åŒ–ã€‚ä½†åŠ è½½å†…åµŒï¼ˆembeddedï¼‰çš„ dylib æ–‡ä»¶å¾ˆå æ—¶é—´ï¼Œæ‰€ä»¥å°½å¯èƒ½æŠŠå¤šä¸ªå†…åµŒ dylib åˆå¹¶æˆä¸€ä¸ªæ¥åŠ è½½ï¼Œæˆ–è€…ä½¿ç”¨ static archiveã€‚ä½¿ç”¨ dlopen() æ¥åœ¨è¿è¡Œæ—¶æ‡’åŠ è½½æ˜¯ä¸å»ºè®®çš„ï¼Œè¿™ä¹ˆåšå¯èƒ½ä¼šå¸¦æ¥ä¸€äº›é—®é¢˜ï¼Œå¹¶ä¸”æ€»çš„å¼€é”€æ›´å¤§ã€‚Rebase/Bindingä¹‹å‰æè¿‡ Rebaing æ¶ˆè€—äº†å¤§é‡æ—¶é—´åœ¨ I/O ä¸Šï¼Œè€Œåœ¨ä¹‹åŽçš„ Binding å°±ä¸æ€Žä¹ˆéœ€è¦ I/O äº†ï¼Œè€Œæ˜¯å°†æ—¶é—´è€—è´¹åœ¨è®¡ç®—ä¸Šã€‚æ‰€ä»¥è¿™ä¸¤ä¸ªæ­¥éª¤çš„è€—æ—¶æ˜¯æ··åœ¨ä¸€èµ·çš„ã€‚ä¹‹å‰è¯´è¿‡å¯ä»¥ä»ŽæŸ¥çœ‹ DATA æ®µä¸­éœ€è¦ä¿®æ­£ï¼ˆfix-upï¼‰çš„æŒ‡é’ˆï¼Œæ‰€ä»¥å‡å°‘æŒ‡é’ˆæ•°é‡æ‰ä¼šå‡å°‘è¿™éƒ¨åˆ†å·¥ä½œçš„è€—æ—¶ã€‚å¯¹äºŽ ObjC æ¥è¯´å°±æ˜¯å‡å°‘ Class , selector å’Œcategory è¿™äº›å…ƒæ•°æ®çš„æ•°é‡ã€‚ä»Žç¼–ç åŽŸåˆ™å’Œè®¾è®¡æ¨¡å¼ä¹‹ç±»çš„ç†è®ºéƒ½ä¼šé¼“åŠ±å¤§å®¶å¤šå†™ç²¾è‡´çŸ­å°çš„ç±»å’Œæ–¹æ³•ï¼Œå¹¶å°†æ¯éƒ¨åˆ†æ–¹æ³•ç‹¬ç«‹å‡ºä¸€ä¸ªç±»åˆ«ï¼Œå…¶å®žè¿™ä¼šå¢žåŠ å¯åŠ¨æ—¶é—´ã€‚å¯¹äºŽ C++ æ¥è¯´éœ€è¦å‡å°‘è™šæ–¹æ³•ï¼Œå› ä¸ºè™šæ–¹æ³•ä¼šåˆ›å»º vtableï¼Œè¿™ä¹Ÿä¼šåœ¨ DATA æ®µä¸­åˆ›å»ºç»“æž„ã€‚è™½ç„¶ C++ è™šæ–¹æ³•å¯¹å¯åŠ¨è€—æ—¶çš„å¢žåŠ è¦æ¯” ObjC å…ƒæ•°æ®è¦å°‘ï¼Œä½†ä¾ç„¶ä¸å¯å¿½è§†ã€‚æœ€åŽæŽ¨èä½¿ç”¨ Swift ç»“æž„ä½“ï¼Œå®ƒéœ€è¦ fix-up çš„å†…å®¹è¾ƒå°‘ã€‚ObjC Setupé’ˆå¯¹è¿™æ­¥æ‰€èƒ½äº‹æƒ…å¾ˆå°‘ï¼Œå‡ ä¹Žéƒ½é  Rebasing å’Œ Binding æ­¥éª¤ä¸­å‡å°‘æ‰€éœ€ fix-up å†…å®¹ã€‚å› ä¸ºå‰é¢çš„å·¥ä½œä¹Ÿä¼šä½¿å¾—è¿™æ­¥è€—æ—¶å‡å°‘ã€‚Initializeræ˜¾å¼åˆå§‹åŒ–ä½¿ç”¨ +initialize æ¥æ›¿ä»£ +loadä¸è¦ä½¿ç”¨ atribute((constructor)) å°†æ–¹æ³•æ˜¾å¼æ ‡è®°ä¸ºåˆå§‹åŒ–å™¨ï¼Œè€Œæ˜¯è®©åˆå§‹åŒ–æ–¹æ³•è°ƒç”¨æ—¶æ‰æ‰§è¡Œã€‚æ¯”å¦‚ä½¿ç”¨ dispatch_once() , pthread_once() æˆ– std::once() ã€‚ä¹Ÿå°±æ˜¯åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶æ‰åˆå§‹åŒ–ï¼ŒæŽ¨è¿Ÿäº†ä¸€éƒ¨åˆ†å·¥ä½œè€—æ—¶ã€‚éšå¼åˆå§‹åŒ–å¯¹äºŽå¸¦æœ‰ å¤æ‚ï¼ˆnon-trivialï¼‰æž„é€ å™¨ çš„ C++ é™æ€å˜é‡ï¼šåœ¨è°ƒç”¨çš„åœ°æ–¹ä½¿ç”¨åˆå§‹åŒ–å™¨ã€‚åªç”¨ç®€å•å€¼ç±»åž‹èµ‹å€¼ï¼ˆPOD:Plain Old Dataï¼‰ï¼Œè¿™æ ·é™æ€é“¾æŽ¥å™¨ä¼šé¢„å…ˆè®¡ç®—__DATA ä¸­çš„æ•°æ®ï¼Œæ— éœ€å†è¿›è¡Œ fix-up å·¥ä½œã€‚ä½¿ç”¨ç¼–è¯‘å™¨ warning æ ‡å¿— -Wglobal-constructors æ¥å‘çŽ°éšå¼åˆå§‹åŒ–ä»£ç ã€‚ä½¿ç”¨ Swift é‡å†™ä»£ç ï¼Œå› ä¸º Swift å·²ç»é¢„å…ˆå¤„ç†å¥½äº†ï¼Œå¼ºåŠ›æŽ¨èã€‚ä¸è¦åœ¨åˆå§‹åŒ–æ–¹æ³•ä¸­è°ƒç”¨ dlopen() ï¼Œå¯¹æ€§èƒ½æœ‰å½±å“ã€‚å› ä¸º dyld åœ¨ App å¼€å§‹å‰è¿è¡Œï¼Œç”±äºŽæ­¤æ—¶æ˜¯å•çº¿ç¨‹è¿è¡Œæ‰€ä»¥ç³»ç»Ÿä¼šå–æ¶ˆåŠ é”ï¼Œä½† dlopen() å¼€å¯äº†å¤šçº¿ç¨‹ï¼Œç³»ç»Ÿä¸å¾—ä¸åŠ é”ï¼Œè¿™å°±ä¸¥é‡å½±å“äº†æ€§èƒ½ï¼Œè¿˜å¯èƒ½ä¼šé€ æˆæ­»é”ä»¥åŠäº§ç”ŸæœªçŸ¥çš„åŽæžœã€‚æ‰€ä»¥ä¹Ÿä¸è¦åœ¨åˆå§‹åŒ–å™¨ä¸­åˆ›å»ºçº¿ç¨‹ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>å…¶ä»–</tag>
        <tag>ç¼–è¯‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é«˜æ•ˆç¨‹åºå‘˜çš„45ä¸ªä¹ æƒ¯]]></title>
    <url>%2F2017%2F07%2F31%2F%E9%AB%98%E6%95%88%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%8445%E4%B8%AA%E4%B9%A0%E6%83%AF%2F</url>
    <content type="text"><![CDATA[æ€åº¦å†³å®šä¸€åˆ‡ åšäº‹ï¼ŒæŠŠçŸ›å¤´å¯¹å‡†é—®é¢˜çš„è§£å†³åŠžæ³•ï¼Œè€Œä¸æ˜¯äººï¼Œè¿™æ˜¯çœŸæ­£æœ‰ç”¨å¤„çš„æ­£é¢æ•ˆåº” æ¬²é€Ÿåˆ™ä¸è¾¾ï¼Œè¦æŠ•å…¥æ—¶é—´å’Œç²¾åŠ›ä¿æŒä»£ç çš„æ•´æ´ã€æ•žäº® å¯¹äº‹ä¸å¯¹äººï¼Œè®©æˆ‘ä»¬éª„å‚²çš„åº”è¯¥æ˜¯è§£å†³äº†é—®é¢˜ï¼Œè€Œä¸æ˜¯æ¯”è¾ƒå‡ºè°çš„ä¸»æ„æ›´å¥½ æŽ’é™¤ä¸‡éš¾ï¼Œå¥‹å‹‡å‰è¿›ï¼Œè¦è¯šå®žæœ‰å‹‡æ°”åŽ»è¯´å‡ºå®žæƒ…ï¼Œæœ‰æ—¶å€™è¿™æ ·åšå¾ˆå›°éš¾ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æœ‰è¶³å¤Ÿçš„å‹‡æ°” å­¦æ— æ­¢å¢ƒ è·Ÿè¸ªå˜åŒ–ï¼Œä¸éœ€è¦ç²¾é€šæ‰€æœ‰æŠ€æœ¯ï¼Œä½†éœ€è¦æ¸…æ¥šçŸ¥é“è¡Œä¸šçš„åŠ¨å‘ï¼Œä»Žè€Œè§„åˆ’ä½ çš„é¡¹ç›®å’ŒèŒä¸šç”Ÿæ¶¯ å¯¹å›¢é˜ŸæŠ•èµ„ï¼Œé€šè¿‡åˆé¤ä¼šè®®å¯ä»¥å¢žè¿›æ¯ä¸ªäººçš„çŸ¥è¯†å’ŒæŠ€èƒ½ï¼Œå¹¶å¸®åŠ©å¤§å®¶èšé›†åœ¨ä¸€èµ·è¿›è¡Œæ²Ÿé€šäº¤æµã€‚å”¤èµ·äººä»¬å¯¹æŠ€æœ¯å’ŒæŠ€å·§çš„æ¿€æƒ…ï¼Œå°†ä¼šå¯¹é¡¹ç›®å¤§æœ‰è£¨ç›Šã€‚ æ‡‚å¾—ä¸¢å¼ƒï¼Œåœ¨å­¦ä¹ ä¸€é—¨æ–°æŠ€æœ¯çš„æ—¶å€™ï¼Œè¦ä¸¢åŽ»ä¼šé˜»æ­¢ä½ å‰è¿›çš„æ—§ä¹ æƒ¯ã€‚æ¯•ç«Ÿï¼Œæ±½è½¦è¦æ¯”é©¬è½¦å¼ºå¾—å¤šã€‚ æ‰“ç ´æ²™é”…é—®åˆ°åº•ï¼Œä¸èƒ½åªæ»¡è¶³ä¸Žåˆ«äººå‘Šè¯‰ä½ çš„è¡¨é¢çŽ°è±¡ã€‚è¦ä¸åœåœ°æé—®ç›´åˆ°ä½ æ˜Žç™½é—®é¢˜çš„æ ¹æºã€‚ æŠŠæ¡å¼€å‘èŠ‚å¥ï¼Œä¿æŒæ—¶é—´ä¹‹é—´ç¨³å®šé‡å¤çš„é—´éš”ï¼Œæ›´å®¹æ˜“è§£å†³å¸¸è§çš„é‡å¤ä»»åŠ¡ äº¤ä»˜ç”¨æˆ·æƒ³è¦çš„è½¯ä»¶ è®©å®¢æˆ·åšå†³å®šï¼Œå¼€å‘è€…ã€ç»ç†æˆ–è€…ä¸šåŠ¡åˆ†æžå¸ˆä¸åº”è¯¥åšä¸šåŠ¡æ–¹é¢çš„å†³å®šã€‚ç”¨ä¸šåŠ¡è´Ÿè´£äººèƒ½å¤Ÿç†è§£çš„è¯­è¨€ï¼Œå‘ä»–ä»¬è¯¦ç»†è§£é‡Šé‡åˆ°çš„é—®é¢˜ï¼Œå¹¶è®©ä»–ä»¬åšå†³å®šã€‚ è®©è®¾è®¡æŒ‡å¯¼è€Œä¸æ˜¯æ“çºµå¼€å‘ï¼Œè®¾è®¡æŒ‡å¼•ä½ å‘æ­£ç¡®çš„æ–¹å‘å‰è¿›ï¼Œå®ƒä¸æ˜¯æ®–æ°‘åœ°ï¼Œå®ƒä¸åº”è¯¥æ ‡è¯†å…·ä½“çš„è·¯çº¿ã€‚ä½ ä¸è¦è¢«è®¾è®¡ï¼ˆæˆ–è€…è®¾è®¡å¸ˆï¼‰æ“æŽ§ã€‚ é¦–å…ˆå†³å®šä»€ä¹ˆæ˜¯ä½ éœ€è¦çš„ï¼ŒæŽ¥ç€ä¸ºè¿™äº›å…·ä½“çš„é—®é¢˜è¯„ä¼°ä½¿ç”¨æŠ€æœ¯ï¼Œå¯¹ä»»ä½•è¦ä½¿ç”¨çš„æŠ€æœ¯ï¼Œå¤šé—®ä¸€äº›æŒ‘å‰”çš„é—®é¢˜ï¼Œå¹¶çœŸå®žåœ°ä½œå‡ºå›žç­”ã€‚æ–°æŠ€æœ¯å°±åº”è¯¥åƒæ˜¯æ–°çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°å·¥ä½œï¼Œå¥¹è‡ªå·±ä¸åº”è¯¥æ˜¯æˆä¸ºä½ çš„å·¥ä½œã€‚ ä¿æŒå¯ä»¥å‘å¸ƒï¼Œä¿è¯ä½ çš„ç³»ç»Ÿéšæ—¶å¯ä»¥ç¼–è¯‘ã€è¿è¡Œã€æµ‹è¯•å¹¶ç«‹å³éƒ¨ç½²ã€‚ ææ—©é›†æˆï¼Œé¢‘ç¹é›†æˆï¼Œä»£ç é›†æˆå¼ä¸»è¦çš„é£Žé™©æ¥æºã€‚è¦æƒ³è§„é¿è¿™ä¸ªé£Žé™©ï¼Œåªæœ‰ææ—©é›†æˆï¼ŒæŒç»­è€Œæœ‰è§„å¾‹åœ°è¿›è¡Œé›†æˆã€‚ ææ—©å®žçŽ°è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œä½¿ç”¨éƒ¨ç½²ç³»ç»Ÿå®‰è£…ä½ çš„åº”ç”¨ï¼Œåœ¨ä¸åŒçš„æœºå™¨ä¸Šç”¨ä¸åŒçš„é…ç½®æ–‡ä»¶æµ‹è¯•ä¾èµ–é—®é¢˜ã€‚è´¨é‡ä¿è¯äººå‘˜è¦åƒæµ‹è¯•åº”ç”¨ä¸€æ ·æµ‹è¯•éƒ¨ç½²ã€‚ ä½¿ç”¨æ¼”ç¤ºèŽ·å¾—é¢‘ç¹åé¦ˆï¼Œåœ¨å¼€å‘çš„æ—¶å€™ï¼Œè¦ä¿æŒåº”ç”¨å¯è§ï¼ˆè€Œä¸”å®¢æˆ·å¿ƒä¸­ä¹Ÿè¦äº†è§£ï¼‰ã€‚æ¯éš”ä¸€å‘¨æˆ–è€…ä¸¤å‘¨ï¼Œé‚€è¯·æ‰€æœ‰å®¢æˆ·ï¼Œç»™ä»–ä»¬æ¼”ç¤ºæœ€æ–°å®Œæˆçš„åŠŸèƒ½ï¼Œç§¯æžèŽ·å¾—ä»–ä»¬çš„åé¦ˆã€‚ ä½¿ç”¨çŸ­è¿­ä»£ï¼Œå¢žé‡å‘å¸ƒï¼Œå‘å¸ƒå¸¦æœ‰æœ€å°å´å¯ç”¨åŠŸèƒ½å—çš„äº§å“ã€‚æ¯ä¸ªå¢žé‡å¼€å‘ä¸­ï¼Œä½¿ç”¨1~4å‘¨å·¦å³çš„è¿­ä»£å‘¨æœŸã€‚ å›ºå®šçš„ä»·æ ¼å°±æ„å‘³ç€èƒŒå›æ‰¿è¯ºï¼Œè®©å›¢é˜Ÿå’Œå®¢æˆ·ä¸€èµ·ï¼ŒçœŸæ­£åœ°åœ¨å½“å‰é¡¹ç›®ä¸­å·¥ä½œï¼Œåšå…·ä½“å®žé™…çš„è¯„ä¼°ã€‚ç”±å®¢æˆ·æŽ§åˆ¶ä»–ä»¬è¦çš„åŠŸèƒ½å’Œé¢„ç®—ã€‚ æ•æ·åé¦ˆ å®ˆæŠ¤å¤©ä½¿ï¼Œå¥½çš„å•å…ƒæµ‹è¯•èƒ½å¤Ÿä¸ºä½ çš„ä»£ç é—®é¢˜æä¾›åŠæ—¶çš„è­¦æŠ¥ã€‚å¦‚æžœæ²¡æœ‰åˆ°ä½çš„å•å…ƒæµ‹è¯•ï¼Œä¸è¦è¿›è¡Œä»»ä½•çš„è®¾è®¡å’Œä»£ç ä¿®æ”¹ã€‚ å…ˆç”¨å®ƒå†å®žçŽ°å®ƒï¼Œä½¿ç”¨æµ‹è¯•é©±åŠ¨å¼€å‘ä½œä¸ºè®¾è®¡å·¥å…·ï¼Œå®ƒä¼šä¸ºä½ å¸¦æ¥æ›´ç®€å•æ›´å®žæ•ˆçš„è®¾è®¡ã€‚ çŽ¯å¢ƒä¸­è¿è¡Œå•å…ƒæµ‹è¯•ã€‚è¦ç§¯æžåœ°å¯»æ‰¾é—®é¢˜ï¼Œä¸ºä¸æ˜¯ç­‰é—®é¢˜æ¥æ‰¾ä½ ã€‚ è‡ªåŠ¨éªŒæ”¶æµ‹è¯•ï¼Œä¸ºæ ¸å¿ƒçš„ä¸šåŠ¡é€»è¾‘åˆ›å»ºæµ‹è¯•ï¼Œè®©ä½ çš„å®¢æˆ·å•ç‹¬éªŒè¯è¿™äº›æµ‹è¯•ï¼Œè¦è®©å®ƒä»¬åƒä¸€èˆ¬çš„æµ‹è¯•ä¸€æ ·å¯ä»¥è‡ªåŠ¨è¿è¡Œã€‚ åº¦é‡çœŸå®žçš„è¿›åº¦ï¼Œä¸è¦ç”¨ä¸æ°å½“çš„åº¦é‡æ¥æ¬ºéª—è‡ªå·±æˆ–è€…å›¢é˜Ÿã€‚è¦è¯„ä¼°é‚£äº›éœ€è¦å®Œæˆçš„å¾…åŠžäº‹é¡¹ã€‚ å€¾å¬ç”¨æˆ·çš„å£°éŸ³ï¼Œæ¯ä¸€ä¸ªæŠ±æ€¨çš„èƒŒåŽéƒ½éšè—äº†ä¸€ä¸ªäº‹å®žï¼Œæ‰¾å‡ºçœŸç›¸ï¼Œä¿®å¤çœŸæ­£çš„é—®é¢˜ã€‚ æ•æ·ç¼–ç  ä»£ç è¦æ¸…æ™°åœ°è¡¨è¾¾æ„å›¾ï¼Œå‘ä»£ç é˜…è¯»è€…æ˜Žç¡®è¡¨æ˜Žä½ çš„æ„å›¾ã€‚å¯è¯»æ€§å·®çš„ä»£ç ä¸€ç‚¹ä¹Ÿä¸èªæ˜Žã€‚ ç”¨ä»£ç æ²Ÿé€šï¼Œä½¿ç”¨ç»†å¿ƒé€‰æ‹©çš„ã€æœ‰æ„ä¹‰çš„å‘½åã€‚ç”¨æ³¨é‡Šæè¿°ä»£ç æ„å›¾å’Œçº¦æŸã€‚æ³¨é‡Šä¸èƒ½æ›¿ä»£ä¼˜ç§€çš„ä»£ç ã€‚ åŠ¨æ€è¯„ä¼°å–èˆï¼Œè€ƒè™‘æ€§èƒ½ã€ä¾¿åˆ©æ€§ã€ç”Ÿäº§åŠ›ã€æˆæœ¬å’Œä¸Šå¸‚æ—¶é—´ã€‚å¦‚æžœæ€§èƒ½è¡¨çŽ°è¶³å¤Ÿäº†ï¼Œå°±å°†æ³¨æ„åŠ›æ”¾åœ¨å…¶ä»–å› ç´ ä¸Šã€‚ä¸è¦ä¸ºäº†æ„Ÿè§‰ä¸Šçš„æ€§èƒ½æå‡æˆ–è€…è®¾è®¡çš„ä¼˜é›…ï¼Œè€Œå°†è®¾è®¡å¤æ‚åŒ–ã€‚ å¢žé‡å¼ç¼–ç¨‹ï¼Œåœ¨å¾ˆçŸ­çš„ç¼–è¾‘/æž„å»º/æµ‹è¯•å¾ªçŽ¯ä¸­ç¼–å†™ä»£ç ï¼Œè¿™è¦æ¯”èŠ±è´¹é•¿æ—¶é—´ä»…ä»…åšç¼–å†™ä»£ç çš„å·¥ä½œå¥½å¾—å¤šã€‚å¯ä»¥åˆ›å»ºæ›´åŠ æ¸…æ™°ã€ç®€å•ã€æ˜“äºŽç»´æŠ¤çš„ä»£ç ã€‚ ä¿æŒç®€å•ï¼Œé™¤éžæœ‰ä¸å¯è¾©é©³çš„åŽŸå› ï¼Œå¦åˆ™ä¸è¦ä½¿ç”¨æ¨¡å¼ã€åŽŸåˆ™å’Œé«˜éš¾åº¦æŠ€æœ¯ä¹‹ç±»çš„ä¸œè¥¿ã€‚ ç¼–å†™å†…èšçš„ä»£ç ï¼Œè®©ç±»çš„åŠŸèƒ½å°½é‡é›†ä¸­ï¼Œè®©ç»„ä»¶å°½é‡å°ã€‚è¦é¿å…åˆ›å»ºå¾ˆå¤§çš„ç±»æˆ–ç»„ä»¶ï¼Œä¹Ÿä¸è¦åˆ›å»ºæ— æ‰€ä¸åŒ…çš„å¤§æ‚çƒ©ç±»ã€‚ å‘ŠçŸ¥ï¼Œä¸è¦è¯¢é—®ï¼Œä¸è¦æŠ¢åˆ«çš„å¯¹è±¡æˆ–è€…æ˜¯ç»„ä»¶çš„å·¥ä½œã€‚å‘Šè¯‰å®ƒåšä»€ä¹ˆï¼Œç„¶åŽç›¯ç€ä½ è‡ªå·±çš„æŒ‡è´£å°±å¥½äº†ã€‚ æ ¹æ®å¥‘çº¦è¿›è¡Œæ›¿æ¢ï¼Œé€šè¿‡æ›¿æ¢éµå¾ªæŽ¥å£å¥‘çº¦çš„ç±»ï¼Œæ¥æ·»åŠ å¹¶æ”¹è¿›åŠŸèƒ½ç‰¹æ€§ã€‚è¦ä½¿ç”¨æ›´å¤šçš„å§”æ‰˜è€Œä¸æ˜¯ç»§æ‰¿ã€‚ æ•æ·è°ƒè¯• è®°å½•é—®é¢˜è§£å†³æ—¥å¿—ï¼Œä¿ç•™è§£å†³æ–¹æ¡ˆæ˜¯ä¿®å¤é—®é¢˜è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œä»¥åŽå‘ç”Ÿç›¸åŒæˆ–ç±»ä¼¼é—®é¢˜æ—¶ï¼Œå°±å¯ä»¥å¾ˆå¿«æ‰¾åˆ°å¹¶ä½¿ç”¨äº†ã€‚ è­¦å‘Šå°±æ˜¯é”™è¯¯ï¼Œç­¾å…¥å¸¦æœ‰è­¦å‘Šçš„ä»£ç ï¼Œå°±è·Ÿç­¾å…¥æœ‰é”™è¯¯æˆ–è€…æ²¡æœ‰é€šè¿‡æµ‹è¯•çš„ä»£ç ä¸€æ ·ï¼Œéƒ½æ˜¯æžå·®çš„åšæ³•ã€‚ç­¾å…¥æž„å»ºå·¥å…·ä¸­çš„ä»£ç ä¸åº”è¯¥äº§ç”Ÿä»»ä½•è­¦å‘Šä¿¡æ¯ã€‚ å¯¹é—®é¢˜å„ä¸ªå‡»ç ´ï¼Œåœ¨è§£å†³é—®é¢˜æ—¶ï¼Œè¦å°†é—®é¢˜åŸŸä¸Žå‘¨è¾¹éš”ç¦»å¼€ã€‚ç‰¹åˆ«æ˜¯åœ¨å¤§åž‹åº”ç”¨ä¸­ã€‚ æŠ¥å‘Šæ‰€æœ‰çš„å¼‚å¸¸ï¼Œä¸è¦å°†å®ƒä»¬åŽ‹åˆ¶ä¸ç®¡ï¼Œå°±ç®—æ˜¯ä¸´æ—¶è¿™æ ·åšä¹Ÿä¸è¡Œï¼Œåœ¨å†™ä»£ç æ—¶è¦ä¼°è®¡åˆ°ä¼šå‘ç”Ÿçš„é—®é¢˜ã€‚ æä¾›æœ‰ç”¨çš„é”™è¯¯ä¿¡æ¯ï¼Œæä¾›æ›´å¤šæ˜“äºŽæŸ¥æ‰¾é”™è¯¯ç»†èŠ‚çš„æ–¹å¼ï¼Œå‘ç”Ÿé—®é¢˜æ—¶ï¼Œè¦å±•ç¤ºå‡ºå°½é‡å¤šçš„æ”¯æŒç»†èŠ‚ï¼Œä¸è¿‡åˆ«è®©ç”¨æˆ·é™·å…¥å…¶ä¸­ã€‚ æ•æ·åä½œ å®šæœŸå®‰æŽ’ä¼šé¢æ—¶é—´ã€‚ä½¿ç”¨ç«‹ä¼š(ç«™ç€å¼€çš„ä¼šè®®)å¯ä»¥è®©å›¢é˜Ÿè¾¾æˆå…±è¯†ã€‚ä¿è¯ä¼šè®®çŸ­å°ç²¾æ‚ä¸è·‘é¢˜ã€‚ æž¶æž„å¸ˆå¿…é¡»å†™ä»£ç ã€‚ä¼˜ç§€çš„è®¾è®¡ä»Žç§¯æžçš„ç¨‹åºå‘˜é‚£é‡Œå¼€å§‹æ¼”åŒ–ã€‚ç§¯æžçš„ç¼–ç¨‹å¯ä»¥å¸¦æ¥æ·±å…¥çš„ç†è§£ã€‚ä¸è¦ä½¿ç”¨ä¸æ„¿æ„ç¼–ç¨‹çš„æž¶æž„å¸ˆâ€”â€”ä¸çŸ¥é“ç³»ç»Ÿçš„çœŸå®žæƒ…å†µã€‚æ˜¯æ— æ³•å±•å¼€è®¾è®¡çš„ã€‚ å®žè¡Œä»£ç é›†ä½“æ‰€æœ‰åˆ¶ã€‚è®©å¼€å‘äººå‘˜è½®æ¢å®Œæˆç³»ç»Ÿä¸åŒé¢†åŸŸä¸­ä¸åŒæ¨¡å—çš„ä¸åŒä»»åŠ¡ã€‚ æˆä¸ºæŒ‡å¯¼è€…ã€‚åˆ†äº«è‡ªå·±çš„çŸ¥è¯†å¾ˆæœ‰è¶£â€”â€”ä»˜å‡ºçš„åŒæ—¶ä¾¿æœ‰æ”¶èŽ·ã€‚è¿˜å¯ä»¥æ¿€åŠ±åˆ«äººèŽ·å¾—æ›´å¥½çš„æˆæžœï¼Œè€Œä¸”æå‡äº†æ•´ä¸ªå›¢é˜Ÿçš„å®žåŠ›ã€‚ å…è®¸å¤§å®¶è‡ªå·±æƒ³åŠžæ³•ã€‚æŒ‡ç»™ä»–ä»¬æ­£ç¡®çš„æ–¹å‘ï¼Œè€Œä¸æ˜¯ç›´æŽ¥æä¾›è§£å†³æ–¹æ¡ˆã€‚æ¯ä¸ªäººéƒ½èƒ½ä»Žä¸­å­¦åˆ°ä¸å°‘ä¸œè¥¿ã€‚ å‡†å¤‡å¥½åŽå†å…±äº«ä»£ç ã€‚ç»å¯¹ä¸è¦æäº¤å°šæœªå®Œæˆçš„ä»£ç ã€‚æ•…æ„ç­¾å…¥ç¼–è¯‘æœªé€šè¿‡æˆ–æ˜¯æ²¡æœ‰é€šè¿‡å•å…ƒæµ‹è¯•çš„ä»£ç ï¼Œå¯¹é¡¹ç›®æ¥è¯´ï¼Œåº”è¯¥è¢«è§†ä½œä¸ºçŽ©å¿½èŒå®ˆçš„çŠ¯ç½ªè¡Œä¸ºã€‚ åšä»£ç å¤æŸ¥ã€‚å¯¹äºŽæå‡ä»£ç è´¨é‡å’Œé™ä½Žé”™è¯¯çŽ‡æ¥è¯´ï¼Œä»£ç å¤æŸ¥æ˜¯æ— ä»·ä¹‹å®ã€‚å¦‚æžœä»¥æ­£ç¡®çš„æ–¹å¼è¿›è¡Œï¼Œå¤æŸ¥å¯ä»¥äº§ç”Ÿéžå¸¸å®žç”¨è€Œé«˜æ•ˆçš„æˆæžœã€‚è¦è®©ä¸åŒçš„å¼€å‘äººå‘˜åœ¨æ¯ä¸ªä»»åŠ¡å®ŒæˆåŽå¤æŸ¥ä»£ç ã€‚ åŠæ—¶é€šæŠ¥è¿›å±•ä¸Žé—®é¢˜ã€‚å‘å¸ƒè¿›å±•çŠ¶å†µï¼Œæ–°çš„æƒ³æ³•å’Œç›®å‰æ­£åœ¨å…³æ³¨çš„ä¸»é¢˜ã€‚ä¸è¦ç­‰ç€åˆ«äººæ¥é—®é¡¹ç›®çŠ¶æ€å¦‚ä½•ã€‚]]></content>
      <categories>
        <category>è¯»ä¹¦</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ¶ˆé™¤é¡¹ç›®è­¦å‘Š]]></title>
    <url>%2F2017%2F07%2F22%2F%E6%B6%88%E9%99%A4%E9%A1%B9%E7%9B%AE%E8%AD%A6%E5%91%8A%2F</url>
    <content type="text"><![CDATA[1 ä¿®å¤æ–¹æ³•1.1 Unused Entity Issues å®šäº†äº†ä½†æ²¡ä½¿ç”¨çš„å˜é‡ï¼Œè§£å†³æ–¹æ¡ˆï¼šåˆ¤æ–­ä¸Šä¸‹æ–‡ï¼Œå¦‚æžœçœŸæ²¡ç”¨åˆ°å°±æ³¨æŽ‰ï¼Œæœ€å¥½åˆ«åˆ æŽ‰ 1.2 User-Defined Issue è‡ªå®šä¹‰è­¦å‘Šï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯TODOï¼Ÿæ˜¯ä¸æ˜¯å¯ä»¥ç”¨NSAssertä»£æ›¿ï¼Ÿ 1.3 Lexical or Preprocessor Issue ä»¥å‰xcodeä¼ å…¥weakå¯¹è±¡ä¼šæœ‰è­¦å‘Šï¼ŒRACå°±åœ¨é‡Œé¢åšäº†å±è”½ï¼ŒçŽ°åœ¨xcodeå·²ç»æ²¡æœ‰è­¦å‘Šäº†ï¼ 1.4 Format String Issue æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„è­¦å‘Šï¼å¤„ç†åŠžæ³•ï¼Œç‚¹å‡»è­¦å‘Šï¼Œä½¿ç”¨xcodæŽ¨èçš„æ ¼å¼ 1.5 Apple Mach-O Linker (Id) Warning æ–‡ä»¶å¤¹è·¯å¾„æˆ–Frameworkè·¯å¾„æŠ¥é”™ 1ï¼ŒClick on your project (targets)ï¼›2ï¼Œ Click on Build Settings if your error includes the -L flag, then delete the values in Library Search Paths if your error includes the -F flag, then delete the values in Framework Search Paths å‚è€ƒï¼šhttps://stackoverflow.com/questions/9458739/ld-warning-directory-not-found-for-option?noredirect=1&amp;lq=1 1.6 Deprecations å·²ç»åºŸå¼ƒçš„æ–¹æ³• å¤„ç†åŠžæ³•ï¼šä½¿ç”¨æŽ¨èæ–¹æ³•æ›¿æ¢ 1.7 semantic issue è¯­æ³•é—®é¢˜ æ ¹æ®è­¦å‘Šæ·»åŠ ã€ä¿®æ”¹æˆ–æ³¨é‡Šç›¸å…³æ–¹æ³• 1.8 Unsupported Configuration https://stackoverflow.com/questions/26547399/xcode-storyboard-warning-constraint-referencing-items-turned-off-in-current-con https://blog.csdn.net/phantom2000x/article/details/56008709 https://stackoverflow.com/questions/13531035/xcode-scene-is-unreachable-due-to-lack-of-entry-points-but-cant-find-it 1.9 SBçš„pushæ–¹æ³• https://stackoverflow.com/questions/26417175/xcode-6-push-segues-are-deprecated-in-ios-8-0-and-later 1.10 Validate Project Settings é…ç½®æ–‡ä»¶æ›´æ–°åˆ°ios8 https://blog.csdn.net/isharestudio/article/details/20462737 https://stackoverflow.com/questions/9612226/any-way-to-make-validate-project-settings-warning-go-away-in-xcode-4-3-4-3-1 2 å±è”½æ–¹æ³•2.1 å±è”½æŸä¸ªè­¦å‘Š ç›¸å…³å‘½ä»¤èŽ·å–æ–¹å¼ï¼šrun -&gt; æ‰¾åˆ°å¯¹åº”è­¦å‘Š -&gt; å³å‡» -&gt; reveal in log -&gt; æ‰¾åˆ°ä¸€äº›å¸¦æ¡†çš„æ ‡è¯† [-Wunused-variable] [-Wenum-conversion] [-Wbool-conversion]ï¼Œ[]ä¹‹ä¸­çš„å°±æ˜¯å…³é”®å­— 12345clang diagnostic æ˜¯#pragma ç¬¬ä¸€ä¸ªå¸¸ç”¨å‘½ä»¤ï¼š#pragma clang diagnostic push#pragma clang diagnostic ignored &quot;å…³é”®å­—&quot;// ä½ è‡ªå·±çš„ä»£ç #pragma clang diagnostic pop å‚è€ƒï¼šhttps://blog.csdn.net/zww1984774346/article/details/53409033 2.2 å±è”½æŸä¸ªæ–‡ä»¶çš„æ‰€æœ‰è­¦å‘Šï¼ˆæ…Žç”¨ï¼‰ target -&gt; Build Phases -&gt; æœåˆ°ä½ è¦çš„æ–‡ä»¶ -&gt; compiler Flages -&gt; -w 2.3 å±è”½cocoapodçš„è­¦å‘Š åœ¨Profileæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç 123456789101112// 1. å…ˆç”¨ inhibit_all_warnings!æ ‡å¿—ä½inhibit_all_warnings!// 2. æ¶‰åŠé›„å…¼å®¹å¯ç”¨å¦‚ä¸‹æ–¹æ³•post_install do |installer|installer.pods_project.targets.each do |target|target.build_configurations.each do |config|if config.build_settings[&apos;IPHONEOS_DEPLOYMENT_TARGET&apos;].to_f &lt; 8.0config.build_settings[&apos;IPHONEOS_DEPLOYMENT_TARGET&apos;] = &apos;8.0&apos;endendendend 3 æŠŠæ‰€æœ‰è­¦å‘Šå½“åšé”™è¯¯ Build Setting -&gt; æœtreat -&gt; æŠŠTreat Warning as Errorçš„å€¼ä¸ºYES 4 ç›‘æŽ§ï¼Ÿ&emsp;&emsp;è¯´å®žè¯ï¼Œæˆ‘æƒ³æ¥æƒ³åŽ»ä¹Ÿæ²¡æƒ³åˆ°é™¤äº†Treat Warning as Erroræœ‰ä»€ä¹ˆå¥½çš„ç›‘æŽ§æ–¹æ¡ˆ]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å­çº¿ç¨‹ç»˜åˆ¶UIæ£€æŸ¥å·¥å…·]]></title>
    <url>%2F2017%2F07%2F07%2F%E5%AD%90%E7%BA%BF%E7%A8%8B%E7%BB%98%E5%88%B6UI%E6%A3%80%E6%9F%A5%E5%B7%A5%E5%85%B7%2F</url>
    <content type="text"><![CDATA[é—®é¢˜&emsp;&emsp;ä»Šå¤©UIèµ°æŸ¥ï¼Œå¯¹æ ·å¼è¿›è¡Œäº†å¤§é‡ä¿®æ”¹ï¼Œä½†æ”¹å®ŒåŽä¸€ä¸ªviewçš„èƒŒæ™¯è‰²ç­‰æ€»æ˜¯æ…¢åŠæ‹ï¼ä¸€å¼€å§‹æ²¡æ³¨æ„åˆ°è¿™ä¸ªé—®é¢˜ï¼Œç›´åˆ°UIç«¥éž‹ç»™æˆ‘æäº†BUGâ€¦ æŽ’æŸ¥æ­¥éª¤ æ˜¯ä¸æ˜¯ç½‘ç»œå»¶è¿Ÿçš„äº‹ï¼Ÿæ”¹ä¸ºå†™æ­»é¢œè‰²å€¼ï¼ç»“è®ºï¼šå¤çŽ° æ˜¯ä¸æ˜¯åŠ¨ç”»é€ æˆçš„ï¼Ÿåˆ é™¤ç›¸å…³åŠ¨ç”»ï¼Œä¿ç•™åŸºç¡€ä»£ç ï¼ç»“è®ºï¼šå¤çŽ° æ‰“ç‚¹åŽæŸ¥çœ‹æ—¥å¿—ï¼Œå‘çŽ° Main Thread Checker: UI API called on a background thread ï¼Œå­çº¿ç¨‹æ¸²æŸ“UIï¼æ”¹ä¸ºä¸»çº¿ç¨‹åˆ·æ–°ï¼Œè§£å†³é—®é¢˜ï¼ é—®é¢˜æ ¹æº æˆ‘ä¹ æƒ¯äºŽç½‘ç»œè¯·æ±‚æˆåŠŸåŽå›žè°ƒå‰åˆ‡æ¢åˆ°ä¸»çº¿ç¨‹å›žè°ƒï¼Œè¿™æ ·ä¸Šå±‚UIä¸éœ€è¦å…³å¿ƒçº¿ç¨‹é—®é¢˜ï¼Œæ‹¿æ¥æ•°æ®è¿›è¡Œæ¸²æŸ“å°±å¯ä»¥äº†ï¼æ¯•ç«ŸUIè¯·æ±‚æ—¶ä¹Ÿæ²¡åˆ‡æ¢åˆ°å­çº¿ç¨‹åŽ»è¯·æ±‚ åŒäº‹ä¹ æƒ¯äºŽç½‘ç»œè¯·æ±‚æˆåŠŸåŽå…ˆå›žè°ƒç»™UIï¼Œå¦‚æžœUIéœ€è¦æ¸²æŸ“åœ¨è‡ªå·±åˆ‡æ¢ä¸»çº¿ç¨‹â€¦â€¦æˆ‘å°±æ˜¯è¿™ä¹ˆæŽ‰å‘é‡Œçš„ è§£å†³æ–¹æ¡ˆ è‡ªå·±å†™äº†ä¸ªç®€å•çš„å­çº¿ç¨‹UIç»˜åˆ¶æ£€æŸ¥æ–¹æ¡ˆï¼Œå¦‚ä¸‹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556@implementation UIView (MainThread)#ifdef DEBUG+ (void)load &#123;static dispatch_once_t onceToken;dispatch_once(&amp;onceToken, ^&#123;[[self class] hookWithOriginalSelector:@selector(setNeedsLayout) swizzledSelector:@selector(mainThread_setNeedsLayout)];[[self class] hookWithOriginalSelector:@selector(setNeedsDisplay) swizzledSelector:@selector(mainThread_setNeedsDisplay)];[[self class] hookWithOriginalSelector:@selector(setNeedsDisplayInRect:) swizzledSelector:@selector(mainThread_setNeedsDisplayInRect:)];&#125;);&#125;- (void)mainThread_setNeedsLayout &#123;[self UIMainThreadCheck];[self mainThread_setNeedsLayout];&#125;- (void)mainThread_setNeedsDisplay &#123;[self UIMainThreadCheck];[self mainThread_setNeedsDisplay];&#125;- (void)mainThread_setNeedsDisplayInRect:(CGRect)rect &#123;[self UIMainThreadCheck];[self mainThread_setNeedsDisplayInRect:rect];&#125;- (void)UIMainThreadCheck &#123;NSString *desc = [NSString stringWithFormat:@&quot;%@ ç±»æ²¡åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œè¯·æ£€æŸ¥ç›¸å…³ä»£ç å®žçŽ°&quot;, self.class];NSAssert([NSThread isMainThread], desc);&#125;#endif+ (void)hookWithOriginalSelector:(SEL)originalSelector swizzledSelector:(SEL)swizzledSelector &#123;Class class = [self class];Method originalMethod = class_getInstanceMethod(class, originalSelector);Method swizzledMethod = class_getInstanceMethod(class, swizzledSelector);BOOL didAddMethod = class_addMethod(class,originalSelector,method_getImplementation(swizzledMethod),method_getTypeEncoding(swizzledMethod));if (didAddMethod) &#123;class_replaceMethod(class,swizzledSelector,method_getImplementation(originalMethod),method_getTypeEncoding(originalMethod));&#125;else &#123;method_exchangeImplementations(originalMethod, swizzledMethod);&#125;&#125;@end]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»£ç è§„èŒƒ]]></title>
    <url>%2F2017%2F06%2F30%2F%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83%2F</url>
    <content type="text"><![CDATA[è½¬è½½è‡ªhttps://github.com/samlaudev/Objective-C-Coding-Style#error-handling å…¶å®ƒå‚è€ƒï¼šObjective-Cç¼–ç è§„èŒƒ(è¯‘)ã€Googleä»£ç è§„èŒƒä»¥åŠä¸­æ–‡ç‰ˆã€ è¡¥å……æ›´æ–°ï¼šå¦‚ä½•æé«˜ä»£ç çš„å¯è¯»æ€§?ã€ä½•ä¸ºä»£ç è´¨é‡ï¼Ÿâ€”â€”ç”¨è„‘å­å†™ä»£ç ã€WordPressçš„OCè§„èŒƒå’ŒSwiftè§„èŒƒ &emsp;&emsp;çœ‹åˆ°ä¸€ä»½ä¸é”™çš„ä»£ç è§„èŒƒï¼Œæ‘˜å½•ä¸‹æ¥ï¼PSï¼šæ„Ÿè§‰æ¯”ç™¾åº¦çš„å¥½ ç›®å½• è¯­è¨€ ä»£ç ç»„ç»‡ ç©ºæ ¼ æ³¨é‡Š å‘½å ä¸‹åˆ’çº¿ æ–¹æ³• å˜é‡ å±žæ€§ç‰¹æ€§ ç‚¹ç¬¦å·è¯­æ³• å­—é¢å€¼ å¸¸é‡ æžšä¸¾ç±»åž‹ Caseè¯­å¥ ç§æœ‰å±žæ€§ å¸ƒå°”å€¼ æ¡ä»¶è¯­å¥ ä¸‰å…ƒæ“ä½œç¬¦ Initæ–¹æ³• ç±»æž„é€ æ–¹æ³• CGRectå‡½æ•° é»„é‡‘è·¯å¾„ é”™è¯¯å¤„ç† å•ä¾‹æ¨¡å¼ æ¢è¡Œç¬¦ Xcodeå·¥ç¨‹ è¯­è¨€åº”è¯¥ä½¿ç”¨USè‹±è¯­. åº”è¯¥: 1UIColor *myColor = [UIColor whiteColor]; ä¸åº”è¯¥: 1UIColor *myColour = [UIColor whiteColor]; ä»£ç ç»„ç»‡åœ¨å‡½æ•°åˆ†ç»„å’Œprotocol/delegateå®žçŽ°ä¸­ä½¿ç”¨#pragma mark -æ¥åˆ†ç±»æ–¹æ³•ï¼Œè¦éµå¾ªä»¥ä¸‹ä¸€èˆ¬ç»“æž„ï¼š 12345678910111213141516171819202122232425262728293031#pragma mark - Lifecycle- (instancetype)init &#123;&#125;- (void)dealloc &#123;&#125;- (void)viewDidLoad &#123;&#125;- (void)viewWillAppear:(BOOL)animated &#123;&#125;- (void)didReceiveMemoryWarning &#123;&#125;#pragma mark - Custom Accessors- (void)setCustomProperty:(id)value &#123;&#125;- (id)customProperty &#123;&#125;#pragma mark - IBActions/Event Response- (IBAction)submitData:(id)sender &#123;&#125;- (void)someButtonDidPressed:(UIButton*)button#pragma mark - Protocol conformance#pragma mark - UITextFieldDelegate#pragma mark - UITableViewDataSource#pragma mark - UITableViewDelegate#pragma mark - Public- (void)publicMethod &#123;&#125;#pragma mark - Private- (void)privateMethod &#123;&#125;#pragma mark - NSCopying- (id)copyWithZone:(NSZone *)zone &#123;&#125;#pragma mark - NSObject- (NSString *)description &#123;&#125; ç©ºæ ¼ ç¼©è¿›ä½¿ç”¨4ä¸ªç©ºæ ¼ï¼Œç¡®ä¿åœ¨Xcodeåå¥½è®¾ç½®æ¥è®¾ç½®ã€‚(raywenderlich.comä½¿ç”¨2ä¸ªç©ºæ ¼) æ–¹æ³•å¤§æ‹¬å·å’Œå…¶ä»–å¤§æ‹¬å·(if/else/switch/while ç­‰.)æ€»æ˜¯åœ¨åŒä¸€è¡Œè¯­å¥æ‰“å¼€ä½†åœ¨æ–°è¡Œä¸­å…³é—­ã€‚ åº”è¯¥: 12345if (user.isHappy) &#123;//Do something&#125; else &#123;//Do something else&#125; ä¸åº”è¯¥: 1234567if (user.isHappy)&#123;//Do something&#125;else &#123;//Do something else&#125; åœ¨æ–¹æ³•ä¹‹é—´åº”è¯¥æœ‰ä¸”åªæœ‰ä¸€è¡Œï¼Œè¿™æ ·æœ‰åˆ©äºŽåœ¨è§†è§‰ä¸Šæ›´æ¸…æ™°å’Œæ›´æ˜“äºŽç»„ç»‡ã€‚åœ¨æ–¹æ³•å†…çš„ç©ºç™½åº”è¯¥åˆ†ç¦»åŠŸèƒ½ï¼Œä½†é€šå¸¸éƒ½æŠ½ç¦»å‡ºæ¥æˆä¸ºä¸€ä¸ªæ–°æ–¹æ³•ã€‚ ä¼˜å…ˆä½¿ç”¨auto-synthesisã€‚ä½†å¦‚æžœæœ‰å¿…è¦ï¼Œ@synthesize å’Œ @dynamicåº”è¯¥åœ¨å®žçŽ°ä¸­æ¯ä¸ªéƒ½å£°æ˜Žæ–°çš„ä¸€è¡Œã€‚ åº”è¯¥é¿å…ä»¥å†’å·å¯¹é½çš„æ–¹å¼æ¥è°ƒç”¨æ–¹æ³•ã€‚å› ä¸ºæœ‰æ—¶æ–¹æ³•ç­¾åå¯èƒ½æœ‰3ä¸ªä»¥ä¸Šçš„å†’å·å’Œå†’å·å¯¹é½ä¼šä½¿ä»£ç æ›´åŠ æ˜“è¯»ã€‚è¯·ä¸è¦è¿™æ ·åšï¼Œå°½ç®¡å†’å·å¯¹é½çš„æ–¹æ³•åŒ…å«ä»£ç å—ï¼Œå› ä¸ºXcodeçš„å¯¹é½æ–¹å¼ä»¤å®ƒéš¾ä»¥è¾¨è®¤ã€‚ åº”è¯¥: 123456// blocks are easily readable[UIView animateWithDuration:1.0 animations:^&#123;// something&#125; completion:^(BOOL finished) &#123;// something&#125;]; ä¸åº”è¯¥: 12345678// colon-aligning makes the block indentation hard to read[UIView animateWithDuration:1.0animations:^&#123;// something&#125;completion:^(BOOL finished) &#123;// something&#125;]; æ³¨é‡Šå½“éœ€è¦æ³¨é‡Šæ—¶ï¼Œæ³¨é‡Šåº”è¯¥ç”¨æ¥è§£é‡Šè¿™æ®µç‰¹æ®Šä»£ç ä¸ºä»€ä¹ˆè¦è¿™æ ·åšã€‚ä»»ä½•è¢«ä½¿ç”¨çš„æ³¨é‡Šéƒ½å¿…é¡»ä¿æŒæœ€æ–°æˆ–è¢«åˆ é™¤ã€‚ ä¸€èˆ¬éƒ½é¿å…ä½¿ç”¨å—æ³¨é‡Šï¼Œå› ä¸ºä»£ç å°½å¯èƒ½åšåˆ°è‡ªè§£é‡Šï¼Œåªæœ‰å½“æ–­æ–­ç»­ç»­æˆ–å‡ è¡Œä»£ç æ—¶æ‰éœ€è¦æ³¨é‡Šã€‚ä¾‹å¤–ï¼šè¿™ä¸åº”ç”¨åœ¨ç”Ÿæˆæ–‡æ¡£çš„æ³¨é‡Š å‘½åAppleå‘½åè§„åˆ™å°½å¯èƒ½åšæŒï¼Œç‰¹åˆ«æ˜¯ä¸Žè¿™äº›ç›¸å…³çš„memory management rules (NARC)ã€‚ é•¿çš„ï¼Œæè¿°æ€§çš„æ–¹æ³•å’Œå˜é‡å‘½åæ˜¯å¥½çš„ã€‚ åº”è¯¥: 1UIButton *settingsButton; ä¸åº”è¯¥: 1UIButton *setBut; ä¸‰ä¸ªå­—ç¬¦å‰ç¼€åº”è¯¥ç»å¸¸ç”¨åœ¨ç±»å’Œå¸¸é‡å‘½åï¼Œä½†åœ¨Core Dataçš„å®žä½“åä¸­åº”è¢«å¿½ç•¥ã€‚å¯¹äºŽå®˜æ–¹çš„raywenderlich.comä¹¦ã€åˆå­¦è€…å·¥å…·åŒ…æˆ–æ•™ç¨‹ï¼Œå‰ç¼€â€™RWTâ€™åº”è¯¥è¢«ä½¿ç”¨ã€‚ å¸¸é‡åº”è¯¥ä½¿ç”¨é©¼å³°å¼å‘½åè§„åˆ™ï¼Œæ‰€æœ‰çš„å•è¯é¦–å­—æ¯å¤§å†™å’ŒåŠ ä¸Šä¸Žç±»åæœ‰å…³çš„å‰ç¼€ã€‚ åº”è¯¥: 1static NSTimeInterval const RWTTutorialViewControllerNavigationFadeAnimationDuration = 0.3; ä¸åº”è¯¥: 1static NSTimeInterval const fadetime = 1.7; å±žæ€§ä¹Ÿæ˜¯ä½¿ç”¨é©¼å³°å¼ï¼Œä½†é¦–å•è¯çš„é¦–å­—æ¯å°å†™ã€‚å¯¹å±žæ€§ä½¿ç”¨auto-synthesisï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨ç¼–å†™@ synthesizeè¯­å¥ï¼Œé™¤éžä½ æœ‰ä¸€ä¸ªå¥½çš„ç†ç”±ã€‚ åº”è¯¥: 1@property (strong, nonatomic) NSString *descriptiveVariableName; ä¸åº”è¯¥: 1id varnm; ä¸‹åˆ’çº¿å½“ä½¿ç”¨å±žæ€§æ—¶ï¼Œå®žä¾‹å˜é‡åº”è¯¥ä½¿ç”¨self.æ¥è®¿é—®å’Œæ”¹å˜ã€‚è¿™å°±æ„å‘³ç€æ‰€æœ‰å±žæ€§å°†ä¼šè§†è§‰æ•ˆæžœä¸åŒï¼Œå› ä¸ºå®ƒä»¬å‰é¢éƒ½æœ‰self.ã€‚ ä½†æœ‰ä¸€ä¸ªç‰¹ä¾‹ï¼šåœ¨åˆå§‹åŒ–æ–¹æ³•é‡Œï¼Œå®žä¾‹å˜é‡(ä¾‹å¦‚ï¼Œ_variableName)åº”è¯¥ç›´æŽ¥è¢«ä½¿ç”¨æ¥é¿å…getters/settersæ½œåœ¨çš„å‰¯ä½œç”¨ã€‚ å±€éƒ¨å˜é‡ä¸åº”è¯¥åŒ…å«ä¸‹åˆ’çº¿ã€‚ æ–¹æ³•åœ¨æ–¹æ³•ç­¾åä¸­ï¼Œåº”è¯¥åœ¨æ–¹æ³•ç±»åž‹(-/+ ç¬¦å·)ä¹‹åŽæœ‰ä¸€ä¸ªç©ºæ ¼ã€‚åœ¨æ–¹æ³•å„ä¸ªæ®µä¹‹é—´åº”è¯¥ä¹Ÿæœ‰ä¸€ä¸ªç©ºæ ¼(ç¬¦åˆAppleçš„é£Žæ ¼)ã€‚åœ¨å‚æ•°ä¹‹å‰åº”è¯¥åŒ…å«ä¸€ä¸ªå…·æœ‰æè¿°æ€§çš„å…³é”®å­—æ¥æè¿°å‚æ•°ã€‚ â€œandâ€è¿™ä¸ªè¯çš„ç”¨æ³•åº”è¯¥ä¿ç•™ã€‚å®ƒä¸åº”è¯¥ç”¨äºŽå¤šä¸ªå‚æ•°æ¥è¯´æ˜Žï¼Œå°±åƒinitWithWidth:heightä»¥ä¸‹è¿™ä¸ªä¾‹å­ï¼š åº”è¯¥:1234- (void)setExampleText:(NSString *)text image:(UIImage *)image;- (void)sendAction:(SEL)aSelector to:(id)anObject forAllCells:(BOOL)flag;- (id)viewWithTag:(NSInteger)tag;- (instancetype)initWithWidth:(CGFloat)width height:(CGFloat)height; ä¸åº”è¯¥: 12345-(void)setT:(NSString *)text i:(UIImage *)image;- (void)sendAction:(SEL)aSelector :(id)anObject :(BOOL)flag;- (id)taggedView:(NSInteger)tag;- (instancetype)initWithWidth:(CGFloat)width andHeight:(CGFloat)height;- (instancetype)initWith:(int)width and:(int)height; // Never do this. å˜é‡å˜é‡å°½é‡ä»¥æè¿°æ€§çš„æ–¹å¼æ¥å‘½åã€‚å•ä¸ªå­—ç¬¦çš„å˜é‡å‘½ååº”è¯¥å°½é‡é¿å…ï¼Œé™¤äº†åœ¨for()å¾ªçŽ¯ã€‚ æ˜Ÿå·è¡¨ç¤ºå˜é‡æ˜¯æŒ‡é’ˆã€‚ä¾‹å¦‚ï¼Œ NSString *text æ—¢ä¸æ˜¯ NSString* text ä¹Ÿä¸æ˜¯ NSString * textï¼Œé™¤äº†ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸‹å¸¸é‡ã€‚ ç§æœ‰å˜é‡ åº”è¯¥å°½å¯èƒ½ä»£æ›¿å®žä¾‹å˜é‡çš„ä½¿ç”¨ã€‚å°½ç®¡ä½¿ç”¨å®žä¾‹å˜é‡æ˜¯ä¸€ç§æœ‰æ•ˆçš„æ–¹å¼ï¼Œä½†æ›´åå‘äºŽä½¿ç”¨å±žæ€§æ¥ä¿æŒä»£ç ä¸€è‡´æ€§ã€‚ é€šè¿‡ä½¿ç”¨â€™backâ€™å±žæ€§(_variableï¼Œå˜é‡åå‰é¢æœ‰ä¸‹åˆ’çº¿)ç›´æŽ¥è®¿é—®å®žä¾‹å˜é‡åº”è¯¥å°½é‡é¿å…ï¼Œé™¤äº†åœ¨åˆå§‹åŒ–æ–¹æ³•(init, initWithCoder:, ç­‰â€¦)ï¼Œdealloc æ–¹æ³•å’Œè‡ªå®šä¹‰çš„setterså’Œgettersã€‚æƒ³äº†è§£å…³äºŽå¦‚ä½•åœ¨åˆå§‹åŒ–æ–¹æ³•å’Œdeallocç›´æŽ¥ä½¿ç”¨Accessoræ–¹æ³•çš„æ›´å¤šä¿¡æ¯ï¼ŒæŸ¥çœ‹è¿™é‡Œ åº”è¯¥: 12345@interface RWTTutorial : NSObject@property (strong, nonatomic) NSString *tutorialName;@end ä¸åº”è¯¥: 123@interface RWTTutorial : NSObject &#123;NSString *tutorialName;&#125; å±žæ€§ç‰¹æ€§æ‰€æœ‰å±žæ€§ç‰¹æ€§åº”è¯¥æ˜¾å¼åœ°åˆ—å‡ºæ¥ï¼Œæœ‰åŠ©äºŽæ–°æ‰‹é˜…è¯»ä»£ç ã€‚å±žæ€§ç‰¹æ€§çš„é¡ºåºåº”è¯¥æ˜¯storageã€atomicityï¼Œä¸Žåœ¨Interface Builderè¿žæŽ¥UIå…ƒç´ æ—¶è‡ªåŠ¨ç”Ÿæˆä»£ç ä¸€è‡´ã€‚ åº”è¯¥: 12@property (weak, nonatomic) IBOutlet UIView *containerView;@property (strong, nonatomic) NSString *tutorialName; ä¸åº”è¯¥: 12@property (nonatomic, weak) IBOutlet UIView *containerView;@property (nonatomic) NSString *tutorialName; NSStringåº”è¯¥ä½¿ç”¨copy è€Œä¸æ˜¯ strongçš„å±žæ€§ç‰¹æ€§ã€‚ ä¸ºä»€ä¹ˆï¼Ÿå³ä½¿ä½ å£°æ˜Žä¸€ä¸ªNSStringçš„å±žæ€§ï¼Œæœ‰äººå¯èƒ½ä¼ å…¥ä¸€ä¸ªNSMutableStringçš„å®žä¾‹ï¼Œç„¶åŽåœ¨ä½ æ²¡æœ‰æ³¨æ„çš„æƒ…å†µä¸‹ä¿®æ”¹å®ƒã€‚ åº”è¯¥: 1@property (copy, nonatomic) NSString *tutorialName; ä¸åº”è¯¥: 1@property (strong, nonatomic) NSString *tutorialName; ç‚¹ç¬¦å·è¯­æ³•ç‚¹è¯­æ³•æ˜¯ä¸€ç§å¾ˆæ–¹ä¾¿å°è£…è®¿é—®æ–¹æ³•è°ƒç”¨çš„æ–¹å¼ã€‚å½“ä½ ä½¿ç”¨ç‚¹è¯­æ³•æ—¶ï¼Œé€šè¿‡ä½¿ç”¨getteræˆ–setteræ–¹æ³•ï¼Œå±žæ€§ä»ç„¶è¢«è®¿é—®æˆ–ä¿®æ”¹ã€‚æƒ³äº†è§£æ›´å¤šï¼Œé˜…è¯»è¿™é‡Œ ç‚¹è¯­æ³•åº”è¯¥æ€»æ˜¯è¢«ç”¨æ¥è®¿é—®å’Œä¿®æ”¹å±žæ€§ï¼Œå› ä¸ºå®ƒä½¿ä»£ç æ›´åŠ ç®€æ´ã€‚[]ç¬¦å·æ›´åå‘äºŽç”¨åœ¨å…¶ä»–ä¾‹å­ã€‚ åº”è¯¥:123NSInteger arrayCount = [self.array count];view.backgroundColor = [UIColor orangeColor];[UIApplication sharedApplication].delegate; ä¸åº”è¯¥:123NSInteger arrayCount = self.array.count;[view setBackgroundColor:[UIColor orangeColor]];UIApplication.sharedApplication.delegate; å­—é¢å€¼NSString, NSDictionary, NSArray, å’Œ NSNumberçš„å­—é¢å€¼åº”è¯¥åœ¨åˆ›å»ºè¿™äº›ç±»çš„ä¸å¯å˜å®žä¾‹æ—¶è¢«ä½¿ç”¨ã€‚è¯·ç‰¹åˆ«æ³¨æ„nilå€¼ä¸èƒ½ä¼ å…¥NSArrayå’ŒNSDictionaryå­—é¢å€¼ï¼Œå› ä¸ºè¿™æ ·ä¼šå¯¼è‡´crashã€‚ åº”è¯¥: 1234NSArray *names = @[@"Brian", @"Matt", @"Chris", @"Alex", @"Steve", @"Paul"];NSDictionary *productManagers = @&#123;@"iPhone": @"Kate", @"iPad": @"Kamal", @"Mobile Web": @"Bill"&#125;;NSNumber *shouldUseLiterals = @YES;NSNumber *buildingStreetNumber = @10018; ä¸åº”è¯¥: 1234NSArray *names = [NSArray arrayWithObjects:@"Brian", @"Matt", @"Chris", @"Alex", @"Steve", @"Paul", nil];NSDictionary *productManagers = [NSDictionary dictionaryWithObjectsAndKeys: @"Kate", @"iPhone", @"Kamal", @"iPad", @"Bill", @"Mobile Web", nil];NSNumber *shouldUseLiterals = [NSNumber numberWithBool:YES];NSNumber *buildingStreetNumber = [NSNumber numberWithInteger:10018]; å¸¸é‡å¸¸é‡æ˜¯å®¹æ˜“é‡å¤è¢«ä½¿ç”¨å’Œæ— éœ€é€šè¿‡æŸ¥æ‰¾å’Œä»£æ›¿å°±èƒ½å¿«é€Ÿä¿®æ”¹å€¼ã€‚å¸¸é‡åº”è¯¥ä½¿ç”¨staticæ¥å£°æ˜Žè€Œä¸æ˜¯ä½¿ç”¨#defineï¼Œé™¤éžæ˜¾å¼åœ°ä½¿ç”¨å®ã€‚ åº”è¯¥: 123static NSString * const RWTAboutViewControllerCompanyName = @"RayWenderlich.com";static CGFloat const RWTImageThumbnailHeight = 50.0; ä¸åº”è¯¥: 123#define CompanyName @"RayWenderlich.com"#define thumbnailHeight 2 æžšä¸¾ç±»åž‹å½“ä½¿ç”¨enumæ—¶ï¼ŒæŽ¨èä½¿ç”¨æ–°çš„å›ºå®šåŸºæœ¬ç±»åž‹è§„æ ¼ï¼Œå› ä¸ºå®ƒæœ‰æ›´å¼ºçš„ç±»åž‹æ£€æŸ¥å’Œä»£ç è¡¥å…¨ã€‚çŽ°åœ¨SDKæœ‰ä¸€ä¸ªå®NS_ENUM()æ¥å¸®åŠ©å’Œé¼“åŠ±ä½ ä½¿ç”¨å›ºå®šçš„åŸºæœ¬ç±»åž‹ã€‚ ä¾‹å¦‚: 12345typedef NS_ENUM(NSInteger, RWTLeftMenuTopItemType) &#123;RWTLeftMenuTopItemMain,RWTLeftMenuTopItemShows,RWTLeftMenuTopItemSchedule&#125;; ä½ ä¹Ÿå¯ä»¥æ˜¾å¼åœ°èµ‹å€¼(å±•ç¤ºæ—§çš„k-styleå¸¸é‡å®šä¹‰)ï¼š 123456typedef NS_ENUM(NSInteger, RWTGlobalConstants) &#123;RWTPinSizeMin = 1,RWTPinSizeMax = 5,RWTPinCountMin = 100,RWTPinCountMax = 500,&#125;; æ—§çš„k-styleå¸¸é‡å®šä¹‰åº”è¯¥é¿å…é™¤éžç¼–å†™Core Foundation Cçš„ä»£ç ã€‚ ä¸åº”è¯¥: 1234enum GlobalConstants &#123;kMaxPinSize = 5,kMaxPinCount = 500,&#125;; Caseè¯­å¥å¤§æ‹¬å·åœ¨caseè¯­å¥ä¸­å¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œé™¤éžç¼–è¯‘å™¨å¼ºåˆ¶è¦æ±‚ã€‚å½“ä¸€ä¸ªcaseè¯­å¥åŒ…å«å¤šè¡Œä»£ç æ—¶ï¼Œå¤§æ‹¬å·åº”è¯¥åŠ ä¸Šã€‚ 12345678910111213141516switch (condition) &#123;case 1:// ...break;case 2: &#123;// ...// Multi-line example using bracesbreak;&#125;case 3:// ...break;default: // ...break;&#125; æœ‰å¾ˆå¤šæ¬¡ï¼Œå½“ç›¸åŒä»£ç è¢«å¤šä¸ªcasesä½¿ç”¨æ—¶ï¼Œä¸€ä¸ªfall-throughåº”è¯¥è¢«ä½¿ç”¨ã€‚ä¸€ä¸ªfall-throughå°±æ˜¯åœ¨caseæœ€åŽç§»é™¤â€™breakâ€™è¯­å¥ï¼Œè¿™æ ·å°±èƒ½å¤Ÿå…è®¸æ‰§è¡Œæµç¨‹è·³è½¬åˆ°ä¸‹ä¸€ä¸ªcaseå€¼ã€‚ä¸ºäº†ä»£ç æ›´åŠ æ¸…æ™°ï¼Œä¸€ä¸ªfall-throughéœ€è¦æ³¨é‡Šä¸€ä¸‹ã€‚ 12345678910switch (condition) &#123;case 1:// ** fall-through! **case 2:// code executed for values 1 and 2break;default: // ...break;&#125; å½“åœ¨switchä½¿ç”¨æžšä¸¾ç±»åž‹æ—¶ï¼Œâ€™defaultâ€™æ˜¯ä¸éœ€è¦çš„ã€‚ä¾‹å¦‚ï¼š 12345678910111213RWTLeftMenuTopItemType menuType = RWTLeftMenuTopItemMain;switch (menuType) &#123;case RWTLeftMenuTopItemMain:// ...break;case RWTLeftMenuTopItemShows:// ...break;case RWTLeftMenuTopItemSchedule:// ...break;&#125; ç§æœ‰å±žæ€§ç§æœ‰å±žæ€§åº”è¯¥åœ¨ç±»çš„å®žçŽ°æ–‡ä»¶ä¸­çš„ç±»æ‰©å±•(åŒ¿ååˆ†ç±»)ä¸­å£°æ˜Žï¼Œå‘½ååˆ†ç±»(æ¯”å¦‚RWTPrivateæˆ–private)åº”è¯¥ä»Žä¸ä½¿ç”¨é™¤éžæ˜¯æ‰©å±•å…¶ä»–ç±»ã€‚åŒ¿ååˆ†ç±»åº”è¯¥é€šè¿‡ä½¿ç”¨+Private.hæ–‡ä»¶çš„å‘½åè§„åˆ™æš´éœ²ç»™æµ‹è¯•ã€‚ ä¾‹å¦‚: 1234567@interface RWTDetailViewController ()@property (strong, nonatomic) GADBannerView *googleAdView;@property (strong, nonatomic) ADBannerView *iAdView;@property (strong, nonatomic) UIWebView *adXWebView;@end å¸ƒå°”å€¼Objective-Cä½¿ç”¨YESå’ŒNOã€‚å› ä¸ºtrueå’Œfalseåº”è¯¥åªåœ¨CoreFoundationï¼ŒCæˆ–C++ä»£ç ä½¿ç”¨ã€‚æ—¢ç„¶nilè§£æžæˆNOï¼Œæ‰€ä»¥æ²¡æœ‰å¿…è¦åœ¨æ¡ä»¶è¯­å¥æ¯”è¾ƒã€‚ä¸è¦æ‹¿æŸæ ·ä¸œè¥¿ç›´æŽ¥ä¸ŽYESæ¯”è¾ƒï¼Œå› ä¸ºYESè¢«å®šä¹‰ä¸º1å’Œä¸€ä¸ªBOOLèƒ½è¢«è®¾ç½®ä¸º8ä½ã€‚ è¿™æ˜¯ä¸ºäº†åœ¨ä¸åŒæ–‡ä»¶ä¿æŒä¸€è‡´æ€§å’Œåœ¨è§†è§‰ä¸Šæ›´åŠ ç®€æ´è€Œè€ƒè™‘ã€‚ åº”è¯¥: 12if (someObject) &#123;&#125;if (![anotherObject boolValue]) &#123;&#125; ä¸åº”è¯¥: 1234if (someObject == nil) &#123;&#125;if ([anotherObject boolValue] == NO) &#123;&#125;if (isAwesome == YES) &#123;&#125; // Never do this.if (isAwesome == true) &#123;&#125; // Never do this. å¦‚æžœBOOLå±žæ€§çš„åå­—æ˜¯ä¸€ä¸ªå½¢å®¹è¯ï¼Œå±žæ€§å°±èƒ½å¿½ç•¥â€isâ€å‰ç¼€ï¼Œä½†è¦æŒ‡å®šgetè®¿é—®å™¨çš„æƒ¯ç”¨åç§°ã€‚ä¾‹å¦‚ï¼š 1@property (assign, getter=isEditable) BOOL editable; æ–‡å­—å’Œä¾‹å­ä»Žè¿™é‡Œå¼•ç”¨Cocoa Naming Guidelines æ¡ä»¶è¯­å¥æ¡ä»¶è¯­å¥ä¸»ä½“ä¸ºäº†é˜²æ­¢å‡ºé”™åº”è¯¥ä½¿ç”¨å¤§æ‹¬å·åŒ…å›´ï¼Œå³ä½¿æ¡ä»¶è¯­å¥ä¸»ä½“èƒ½å¤Ÿä¸ç”¨å¤§æ‹¬å·ç¼–å†™(å¦‚ï¼Œåªç”¨ä¸€è¡Œä»£ç )ã€‚è¿™äº›é”™è¯¯åŒ…æ‹¬æ·»åŠ ç¬¬äºŒè¡Œä»£ç å’ŒæœŸæœ›å®ƒæˆä¸ºifè¯­å¥ï¼›è¿˜æœ‰ï¼Œeven more dangerous defectå¯èƒ½å‘ç”Ÿåœ¨ifè¯­å¥é‡Œé¢ä¸€è¡Œä»£ç è¢«æ³¨é‡Šäº†ï¼Œç„¶åŽä¸‹ä¸€è¡Œä»£ç ä¸çŸ¥ä¸è§‰åœ°æˆä¸ºifè¯­å¥çš„ä¸€éƒ¨åˆ†ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿™ç§é£Žæ ¼ä¸Žå…¶ä»–æ¡ä»¶è¯­å¥çš„é£Žæ ¼ä¿æŒä¸€è‡´ï¼Œæ‰€ä»¥æ›´åŠ å®¹æ˜“é˜…è¯»ã€‚ åº”è¯¥: 123if (!error) &#123;return success;&#125; ä¸åº”è¯¥: 12if (!error)return success; æˆ– 1if (!error) return success; ä¸‰å…ƒæ“ä½œç¬¦å½“éœ€è¦æé«˜ä»£ç çš„æ¸…æ™°æ€§å’Œç®€æ´æ€§æ—¶ï¼Œä¸‰å…ƒæ“ä½œç¬¦?:æ‰ä¼šä½¿ç”¨ã€‚å•ä¸ªæ¡ä»¶æ±‚å€¼å¸¸å¸¸éœ€è¦å®ƒã€‚å¤šä¸ªæ¡ä»¶æ±‚å€¼æ—¶ï¼Œå¦‚æžœä½¿ç”¨ifè¯­å¥æˆ–é‡æž„æˆå®žä¾‹å˜é‡æ—¶ï¼Œä»£ç ä¼šæ›´åŠ æ˜“è¯»ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæœ€å¥½ä½¿ç”¨ä¸‰å…ƒæ“ä½œç¬¦æ˜¯åœ¨æ ¹æ®æ¡ä»¶æ¥èµ‹å€¼çš„æƒ…å†µä¸‹ã€‚ Non-booleançš„å˜é‡ä¸ŽæŸä¸œè¥¿æ¯”è¾ƒï¼ŒåŠ ä¸Šæ‹¬å·()ä¼šæé«˜å¯è¯»æ€§ã€‚å¦‚æžœè¢«æ¯”è¾ƒçš„å˜é‡æ˜¯booleanç±»åž‹ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦æ‹¬å·ã€‚ åº”è¯¥: 12345NSInteger value = 5;result = (value != 0) ? x : y;BOOL isHorizontal = YES;result = isHorizontal ? x : y; ä¸åº”è¯¥: 1result = a &gt; b ? x = c &gt; d ? c : d : y; Initæ–¹æ³•Initæ–¹æ³•åº”è¯¥éµå¾ªAppleç”Ÿæˆä»£ç æ¨¡æ¿çš„å‘½åè§„åˆ™ã€‚è¿”å›žç±»åž‹åº”è¯¥ä½¿ç”¨instancetypeè€Œä¸æ˜¯id 1234567- (instancetype)init &#123;self = [super init];if (self) &#123;// ...&#125;return self;&#125; æŸ¥çœ‹å…³äºŽinstancetypeçš„æ–‡ç« Class Constructor Methods ç±»æž„é€ æ–¹æ³•å½“ç±»æž„é€ æ–¹æ³•è¢«ä½¿ç”¨æ—¶ï¼Œå®ƒåº”è¯¥è¿”å›žç±»åž‹æ˜¯instancetypeè€Œä¸æ˜¯idã€‚è¿™æ ·ç¡®ä¿ç¼–è¯‘å™¨æ­£ç¡®åœ°æŽ¨æ–­ç»“æžœç±»åž‹ã€‚ 123@interface Airplane+ (instancetype)airplaneWithType:(RWTAirplaneType)type;@end å…³äºŽæ›´å¤šinstancetypeä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹NSHipster.com CGRectå‡½æ•°å½“è®¿é—®CGRecté‡Œçš„x, y, width, æˆ– heightæ—¶ï¼Œåº”è¯¥ä½¿ç”¨CGGeometryå‡½æ•°è€Œä¸æ˜¯ç›´æŽ¥é€šè¿‡ç»“æž„ä½“æ¥è®¿é—®ã€‚å¼•ç”¨Appleçš„CGGeometry: åœ¨è¿™ä¸ªå‚è€ƒæ–‡æ¡£ä¸­æ‰€æœ‰çš„å‡½æ•°ï¼ŒæŽ¥å—CGRectç»“æž„ä½“ä½œä¸ºè¾“å…¥ï¼Œåœ¨è®¡ç®—å®ƒä»¬ç»“æžœæ—¶éšå¼åœ°æ ‡å‡†åŒ–è¿™äº›rectanglesã€‚å› æ­¤ï¼Œä½ çš„åº”ç”¨ç¨‹åºåº”è¯¥é¿å…ç›´æŽ¥è®¿é—®å’Œä¿®æ”¹ä¿å­˜åœ¨CGRectæ•°æ®ç»“æž„ä¸­çš„æ•°æ®ã€‚ç›¸åï¼Œä½¿ç”¨è¿™äº›å‡½æ•°æ¥æ“çºµrectangleså’ŒèŽ·å–å®ƒä»¬çš„ç‰¹æ€§ã€‚ åº”è¯¥: 1234567CGRect frame = self.view.frame;CGFloat x = CGRectGetMinX(frame);CGFloat y = CGRectGetMinY(frame);CGFloat width = CGRectGetWidth(frame);CGFloat height = CGRectGetHeight(frame);CGRect frame = CGRectMake(0.0, 0.0, width, height); ä¸åº”è¯¥: 1234567CGRect frame = self.view.frame;CGFloat x = frame.origin.x;CGFloat y = frame.origin.y;CGFloat width = frame.size.width;CGFloat height = frame.size.height;CGRect frame = (CGRect)&#123; .origin = CGPointZero, .size = frame.size &#125;; é»„é‡‘è·¯å¾„å½“ä½¿ç”¨æ¡ä»¶è¯­å¥ç¼–ç æ—¶ï¼Œå·¦æ‰‹è¾¹çš„ä»£ç åº”è¯¥æ˜¯â€goldenâ€ æˆ– â€œhappyâ€è·¯å¾„ã€‚ä¹Ÿå°±æ˜¯ä¸è¦åµŒå¥—ifè¯­å¥ï¼Œå¤šä¸ªè¿”å›žè¯­å¥ä¹Ÿæ˜¯OKã€‚ åº”è¯¥: 1234567- (void)someMethod &#123;if (![someOther boolValue]) &#123;return;&#125;//Do something important&#125; ä¸åº”è¯¥: 12345- (void)someMethod &#123;if ([someOther boolValue]) &#123;//Do something important&#125;&#125; é”™è¯¯å¤„ç†å½“æ–¹æ³•é€šè¿‡å¼•ç”¨æ¥è¿”å›žä¸€ä¸ªé”™è¯¯å‚æ•°ï¼Œåˆ¤æ–­è¿”å›žå€¼è€Œä¸æ˜¯é”™è¯¯å˜é‡ã€‚ åº”è¯¥:1234NSError *error;if (![self trySomethingWithError:&amp;error]) &#123;// Handle Error&#125; ä¸åº”è¯¥:12345NSError *error;[self trySomethingWithError:&amp;error];if (error) &#123;// Handle Error&#125; åœ¨æˆåŠŸçš„æƒ…å†µä¸‹ï¼Œæœ‰äº›Appleçš„APIsè®°å½•åžƒåœ¾å€¼(garbage values)åˆ°é”™è¯¯å‚æ•°(å¦‚æžœnon-NULL)ï¼Œé‚£ä¹ˆåˆ¤æ–­é”™è¯¯å€¼ä¼šå¯¼è‡´falseè´Ÿå€¼å’Œcrashã€‚ å•ä¾‹æ¨¡å¼å•ä¾‹å¯¹è±¡åº”è¯¥ä½¿ç”¨çº¿ç¨‹å®‰å…¨æ¨¡å¼æ¥åˆ›å»ºå…±äº«å®žä¾‹ã€‚ 12345678910+ (instancetype)sharedInstance &#123;static id sharedInstance = nil;static dispatch_once_t onceToken;dispatch_once(&amp;onceToken, ^&#123;sharedInstance = [[self alloc] init];&#125;);return sharedInstance;&#125; è¿™ä¼šé˜²æ­¢possible and sometimes prolific crashes. æ¢è¡Œç¬¦æ¢è¡Œç¬¦æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„ä¸»é¢˜ï¼Œå› ä¸ºå®ƒçš„é£Žæ ¼æŒ‡å—ä¸»è¦ä¸ºäº†æ‰“å°å’Œç½‘ä¸Šçš„å¯è¯»æ€§ã€‚ ä¾‹å¦‚: 1self.productsRequest = [[SKProductsRequest alloc] initWithProductIdentifiers:productIdentifiers]; ä¸€è¡Œå¾ˆé•¿çš„ä»£ç åº”è¯¥åˆ†æˆä¸¤è¡Œä»£ç ï¼Œä¸‹ä¸€è¡Œç”¨ä¸¤ä¸ªç©ºæ ¼éš”å¼€ã€‚ 12self.productsRequest = [[SKProductsRequest alloc] initWithProductIdentifiers:productIdentifiers]; Xcodeå·¥ç¨‹ç‰©ç†æ–‡ä»¶åº”è¯¥ä¸ŽXcodeå·¥ç¨‹æ–‡ä»¶ä¿æŒåŒæ­¥æ¥é¿å…æ–‡ä»¶æ‰©å¼ ã€‚ä»»ä½•Xcodeåˆ†ç»„çš„åˆ›å»ºåº”è¯¥åœ¨æ–‡ä»¶ç³»ç»Ÿçš„æ–‡ä»¶ä½“çŽ°ã€‚ä»£ç ä¸ä»…æ˜¯æ ¹æ®ç±»åž‹æ¥åˆ†ç»„ï¼Œè€Œä¸”è¿˜å¯ä»¥æ ¹æ®åŠŸèƒ½æ¥åˆ†ç»„ï¼Œè¿™æ ·ä»£ç æ›´åŠ æ¸…æ™°ã€‚ å°½å¯èƒ½åœ¨targetçš„Build Settingsæ‰“å¼€â€Treat Warnings as Errorsï¼Œå’Œå¯ç”¨ä»¥ä¸‹additional warningsã€‚å¦‚æžœä½ éœ€è¦å¿½ç•¥ç‰¹æ®Šçš„è­¦å‘Šï¼Œä½¿ç”¨ Clangâ€™s pragma featureã€‚ å…¶ä»–Objective-Cç¼–ç è§„èŒƒå¦‚æžœæˆ‘ä»¬çš„ç¼–ç è§„èŒƒä¸ç¬¦åˆä½ çš„å£å‘³ï¼Œå¯ä»¥æŸ¥çœ‹å…¶ä»–çš„ç¼–ç è§„èŒƒï¼š Robots &amp; Pencils New York Times Google GitHub Adium Sam Soffes CocoaDevCentral Luke Redpath Marcus Zarra]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>å…¶ä»–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[NSExceptionä»‹ç»]]></title>
    <url>%2F2017%2F06%2F17%2FNSException%E4%BB%8B%E7%BB%8D%2F</url>
    <content type="text"><![CDATA[1 ä»‹ç» name : å”¯ä¸€æ ‡è¯†ç¬¦ reason: å¼‚å¸¸åŽŸå› ï¼Œæœ€é‡è¦çš„å±žæ€§ï¼æ‰¾é—®é¢˜å°±é å®ƒäº† userInfoï¼šå½“å¼‚å¸¸è¢«æŠ›å‡ºæ—¶ï¼Œè¿”å›žåŽŸå› ç­‰çš„ä¸€ä¸ªå­—å…¸12345678@try &#123;// å¦‚æžœè¿™é‡Œé¢çš„ä»£ç æ‰§è¡ŒåŽä¼šå¯¼è‡´ç¨‹åºå´©æºƒï¼Œå°±ä¼šè·³åˆ°@catchè¿™ä¸ªæ–¹æ³•ä¸­// @throw someException&#125; @catch(NSException *exception) &#123;// å¤„ç†å¼‚å¸¸&#125;@finally&#123;// è¿™é‡Œçš„ä»£ç æ˜¯ä¸€å®šæ‰§è¡Œçš„&#125; 2 å¸¸è§å¼‚å¸¸2.1 NSGenericException é€šç”¨å¼‚å¸¸ï¼Ÿæˆ‘ä¹Ÿç¿»è¯‘ä¸å‡†è¿˜è¦çœ‹reasonï¼Œä¸èƒ½ä¸€æ¦‚è€Œè®ºï¼Œä¸è¿‡ä¸ªäººç†è§£å°±è·Ÿæžšä¸¾çš„ç¬¬ä¸€ä¸ªdefaultä¸€æ · æˆ‘åªè§ä¸€æ¬¡NSGenericExceptionï¼Œå¯¹æ•°ç»„è¿›è¡Œåˆ é™¤æ“ä½œæ—¶è§åˆ°çš„12345NSMutableArray *muArr = @[@1, @2, @3].mutableCopy;for (id elem in muArr) &#123;[muArr removeObject:elem];&#125;// Terminating app due to uncaught exception &apos;NSGenericException&apos;, reason: &apos;*** Collection &lt;__NSArrayM: 0x600002052310&gt; was mutated while being enumerated.&apos; 2.2 NSRangeExceptionè¶Šç•Œ ä¸€èˆ¬æ˜¯æ•°ç»„è¶Šç•Œï¼Œå­—ç¬¦åˆ›è¶Šç•Œä¸¤ç§ï¼Debugä¸‹æ‰“å¼€å…¨å±€æ–­ç‚¹åŸºæœ¬éƒ½æ˜¯å®šä½åˆ°ï¼Œreleaseä¸‹åˆ†æžå´©æºƒè¡Œä¸Šä¸‹æ–‡åŸºæœ¬ä¹Ÿèƒ½å¤„ç†123456// ç©ºæ•°ç»„NSMutableArray *photos = [NSMutableArray array];NSLog(@&quot;--- %@&quot;,photos[0]);// Crash// Terminating app due to uncaught exception &apos;NSRangeException&apos;, reason: &apos;*** -[__NSArrayM objectAtIndexedSubscript:]: index 0 beyond bounds for empty array&apos; 2.3 NSInvalidArgumentException éžæ³•å…¥å‚ å¼€å‘é˜¶æ®µå¯ç”¨NSAssertä»£æ›¿ï¼Œä½†ä½¿ç”¨NSInvalidArgumentExceptionå¯ä»¥ä¿è¯åœ¨releaseé˜¶æ®µä¹Ÿä¸ä¼šå‡ºçŽ°å…¥å‚é—®é¢˜çš„crash1234NSMutableArray *muArr = [[NSMutableArray alloc] init];NSString *str = nil;[muArr addObject:str];// erminating app due to uncaught exception &apos;NSInvalidArgumentException&apos;, reason: &apos;*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil&apos; 2.4 NSInternalInconsistencyException å†…éƒ¨çŸ›ç›¾å¼‚å¸¸ï¼Œä¸»è¦åœ¨æ–­è¨€å¤±è´¥æ—¶è‡ªåŠ¨è°ƒç”¨ï¼ å‡ºçŽ°è¿™ä¸ªå¼‚å¸¸ï¼Œä¸€èˆ¬éƒ½æ˜¯ç±»åž‹é—®é¢˜ï¼Œxibè¿žçº¿é—®é¢˜ï¼Œçº¦æŸé—®é¢˜ç­‰1NSAssert(NO, @&quot;this will call NSInternalInconsistencyException&quot;); 2.5 NSMallocException å†…å­˜ä¸è¶³ å†…å­˜ä¸è¶³çš„é—®é¢˜ï¼Œæ— æ³•åˆ†é…è¶³å¤Ÿçš„å†…å­˜ç©ºé—´,æ¯”å¦‚éœ€è¦åˆ†é…çš„å†…å­˜å¤§å°æ˜¯ä¸€ä¸ªä¸æ­£å¸¸çš„å€¼ï¼Œæ¯”è¾ƒå·¨å¤§æˆ–è€…è®¾å¤‡çš„å†…å­˜ç©ºé—´ä¸è¶³ä»¥åŠè€—å°½ 3 å°æŠ€å·§3.1 @throwçš„å¦™ç”¨ é™åˆ¶æŸæ–¹å¼ä½¿ç”¨ï¼Œç‰¹åˆ«æ˜¯åºŸå¼ƒçš„æ–¹æ³• 1234// å¼ºåˆ¶ä½¿ç”¨initWithPathä½œä¸ºåˆå§‹åŒ–ï¼Œä¹Ÿå¯ä»¥ç›´æŽ¥ç”¨NSAssert(NO, @&quot;åŽŸå› &quot;);@throw [NSException exceptionWithName:NSGenericExceptionreason:@&quot;`-init` unavailable. Use `-initWithReachability:` instead&quot;userInfo:nil]; å¼ºåˆ¶å­ç±»å®žçŽ°æŸä¸ªæ–¹æ³• 12345678// å¦‚æžœæ‰€æœ‰å­ç±»éƒ½å¿…é¡»å®žçŽ°æŸä¸ªæ–¹æ³•ï¼Œæ€Žä¹ˆåšæ‰å¥½ï¼Ÿ// ç¬¬ä¸€ç§æ–¹æ³•å£°æ˜Žåè®®ï¼Œçˆ¶ç±»éµå®ˆï¼Œå­ç±»å®žçŽ°ï¼›ä½†åè®®åªèƒ½äº§ç”Ÿè­¦å‘Šï¼Œä¸å¤Ÿå¼ºç¡¬ï¼è€Œä¸”ä¸€æ—¦çˆ¶ç±»å®žçŽ°äº†è¯¥æ–¹æ³•ï¼Œå­ç±»å®žçŽ°ä¸å®žçŽ°æ ¹æœ¬å°±æ— æ‰€è°“ï¼// ç¬¬äºŒç§æ–¹æ³•ï¼Œçˆ¶ç±»å®žçŽ°è¯¥æ–¹æ³•å¹¶æ·»åŠ @throwå¼ºåˆ¶å®žçŽ°å­ç±»åŽ»è‡ªå·±é‡è½½- (void)changeActivityState:(BOOL)active &#123;@throw [NSException exceptionWithName:NSInternalInconsistencyExceptionreason:[NSString stringWithFormat:@&quot;You must override %@ in %@&quot;, NSStringFromSelector(_cmd), self.class]userInfo:nil];&#125; 3.2 è‡ªå·±æ•èŽ·å¼‚å¸¸ æ³¨æ„ï¼Œå¾ˆå¤šä¸‰æ–¹SDKä¹Ÿç”¨åˆ°äº†è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†ï¼Œå’±ä»¬æ•èŽ·äº†è¦è½¬å‘å‡ºåŽ»1234567891011121314151617181920static NSUncaughtExceptionHandler *_previousHandler;// åœ¨ç¨‹åºå¼€å§‹è¿è¡Œå°±ç›‘æŽ§å¼‚å¸¸- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123;// ä¿å­˜ç¬¬ä¸‰æ–¹å¤„ç†å¼‚å¸¸çš„ handler_previousHandler = NSGetUncaughtExceptionHandler();// å°†ä¸‹é¢Cå‡½æ•°çš„å‡½æ•°åœ°å€å½“åšå‚æ•°NSSetUncaughtExceptionHandler(&amp;UncaughtExceptionHandler);return YES;&#125;// è®¾ç½®ä¸€ä¸ªCå‡½æ•°ï¼Œç”¨æ¥æŽ¥æ”¶å´©æºƒä¿¡æ¯void UncaughtExceptionHandler(NSException *exception)&#123;// å´©æºƒæ ˆNSArray *symbols = [exception callStackSymbols];NSString *reason = [exception reason];NSString *name = [exception name];// æœ¬åœ°è®°å½•å¹¶ä¸Šä¼ // è½¬å‘ä¸ºä¸‰æ–¹_previousHandler(exception);&#125; å‚è€ƒ https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Exceptions/Exceptions.html#//apple_ref/doc/uid/10000012-BAJGFBFB PS: NSException å¼‚å¸¸ï¼Œéžæ­£å¸¸ï¼Œæƒ³ä¸åˆ°çš„æ˜¯å¼‚å¸¸ NSError é”™è¯¯ï¼Œæµç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œæœ‰æ­£ç¡®å°±æœ‰é”™è¯¯ NSAssert æ–­è¨€ï¼Œä¿è¯æ­£ç¡®ï¼ˆæˆ–é”™è¯¯ï¼‰ï¼Œå°±æ˜¯ç¨‹åºå‘˜ç¡®å®šè¿™ä¸ªæ˜¯æ­£ç¡®çš„ï¼ˆæˆ–é”™è¯¯çš„ï¼‰ï¼Œå¸¸ç”¨æµ‹è¯•å’Œå‚æ•°æ ¡éªŒ]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æœ‰æ„æ€çš„@try@Catch]]></title>
    <url>%2F2017%2F06%2F10%2F%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84-try-Catch%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;ä»Šå¤©å’ŒåŒäº‹èŠå¤©ï¼ŒèŠåˆ°äº†tryCatchçš„ä½¿ç”¨ï¼Œä»–è¯´trycatchç”¨èµ·æ¥å¾ˆç®€å•ï¼æˆ‘é—®ä»–æœ‰é£Žé™©å—ï¼ä»–è¯´ï¼Œtrycatchæœ‰å•¥é£Žé™©ï¼Œéšä¾¿ç”¨ï¼å›žå¤´æƒ³æƒ³iOSçš„@try@catchï¼Œé¢â€¦ä¸æä¹Ÿâ€¦å“Žï¼Œå…¶å®žä¹Ÿæ˜¯å¯ä»¥æ°´ä¸€ç¯‡çš„å“ˆï¼ &emsp;&emsp;ç®€å•çš„æ¥è¯´ï¼ŒAppleè™½ç„¶åŒæ—¶æä¾›äº†é”™è¯¯å¤„ç†ï¼ˆNSErrorï¼‰å’Œå¼‚å¸¸å¤„ç†ï¼ˆexceptionï¼‰ä¸¤ç§æœºåˆ¶ï¼Œä½†æ˜¯Appleæ›´åŠ æå€¡å¼€å‘è€…ä½¿ç”¨NSErroræ¥å¤„ç†ç¨‹åºè¿è¡Œä¸­å¯æ¢å¤çš„é”™è¯¯ã€‚è€Œå¼‚å¸¸è¢«æŽ¨èç”¨æ¥å¤„ç†ä¸å¯æ¢å¤çš„é”™è¯¯ã€‚ &emsp;&emsp;å‚è€ƒï¼šå®˜ç½‘ Important: You should reserve the use of exceptions for programming or unexpected runtime errors such as out-of-bounds collection access, attempts to mutate immutable objects, sending an invalid message, and losing the connection to the window server. You usually take care of these sorts of errors with exceptions when an application is being created rather than at runtime.If you have an existing body of code (such as third-party library) that uses exceptions to handle error conditions, you may use the code as-is in your Cocoa application. But you should ensure that any expected runtime exceptions do not escape from these subsystems and end up in the callerâ€™s code. For example, a parsing library might use exceptions internally to indicate problems and enable a quick exit from a parsing state that could be deeply recursive; however, you should take care to catch such exceptions at the top level of the library and translate them into an appropriate return code or state. &emsp;&emsp;æ­¤å¤–tryCatchæ¯”è¾ƒè€—æ€§èƒ½ï¼Œä¸èƒ½ç”¨äºŽæµç¨‹æŽ§åˆ¶ https://stackoverflow.com/questions/3678438/try-catch-exception-handling-practice-for-iphone-objective-c ï¼›å®¹æ˜“é€ æˆå†…å­˜æ³„æ¼ https://stackoverflow.com/questions/27140891/why-does-try-catch-in-objective-c-cause-memory-leak ï¼›æ›´é‡è¦çš„æ˜¯tryCatchå¹²çš„æ´»ï¼ŒåŸºæœ¬ä¸ŠNSErrorå’Œæ–­ç‚¹éƒ½èƒ½å¹² https://stackoverflow.com/questions/13774611/try-catch-equivalent-in-objective-c &emsp;&emsp;å½“ç„¶è¿™ç¯‡æ°´æ–‡å…³æ³¨çš„ä¸æ˜¯tryCatchå°‘ç”¨çš„åŽŸå› ï¼ &emsp;&emsp;å…¶å®žæˆ‘æœ¬æ¥æ‰“ç®—ç ”ç©¶ä¸€ä¸‹tryCatchä¸ºä»€ä¹ˆè€—æ€§èƒ½çš„ï¼ä½†çœŸæ²¡ç ”ç©¶å‡ºæ¥ï¼Œä¸è¿‡åˆ°å‘çŽ°ä¸€ä¸ªå¥½çŽ©çš„ä¸œè¥¿ï¼Œæœ¬ç€æ°´ä¸€ç¯‡ç®—ä¸€ç¯‡ï¼Œæ°´ä¸€ä¼šç®—ä¸€ä¼šçš„ç²¾ç¥žï¼Œæˆ‘è¿˜æ˜¯æ°´äº†å‡ºæ¥ï¼ &emsp;&emsp;æµ‹è¯•ä»£ç 1234567891011@implementation Person- (void)test &#123;@try &#123;NSLog(@&quot;try&quot;);&#125; @catch (NSException *exception) &#123;NSLog(@&quot;catch&quot;);&#125; @finally &#123;NSLog(@&quot;finally&quot;);&#125;&#125;@end &emsp;&emsp;ç¼–è¯‘åŽå¾—åˆ°å¦‚ä¸‹ä»£ç ï¼š123456789101112131415161718192021222324252627282930313233// @implementation Personstatic void _I_Person_test(Person * self, SEL _cmd) &#123;&#123;id volatile _rethrow = 0;try &#123;// è¿™é‡Œå¯¹åº”@try @catchtry &#123;NSLog((NSString *)&amp;__NSConstantStringImpl__var_folders_gb__20zxxjd0p318c5gng983b6r0000gp_T_person_bc91d3_mi_0);&#125; catch (_objc_exc_NSException *_exception) &#123;/*ä»Žä»£ç ä¸Šçœ‹åªæ•èŽ·_objc_exc_NSExceptiontypedef struct objc_object NSException;typedef struct &#123;&#125; _objc_exc_NSException;*/NSException *exception = (NSException*)_exception;NSLog((NSString *)&amp;__NSConstantStringImpl__var_folders_gb__20zxxjd0p318c5gng983b6r0000gp_T_person_bc91d3_mi_1);&#125;&#125;catch (id e) &#123;// ç†è®ºä¸Šè®² éž _objc_exc_NSExceptionæ‰èƒ½èµ°åˆ°è¿™é‡Œ_rethrow = e;&#125;&#123; struct _FIN &#123; _FIN(id reth) : rethrow(reth) &#123;&#125;~_FIN() &#123; if (rethrow) objc_exception_throw(rethrow); &#125;id rethrow;&#125; _fin_force_rethow(_rethrow);NSLog((NSString *)&amp;__NSConstantStringImpl__var_folders_gb__20zxxjd0p318c5gng983b6r0000gp_T_person_bc91d3_mi_2);&#125;&#125;&#125;// @end &emsp;&emsp;å¤§å®¶å¯ç›´è§‚çš„è§‚å¯Ÿåˆ°åŒ…å«ä¸¤ä¸ªtrycatchï¼Œè¯´å®žè¯å“ˆï¼æˆ‘æ˜¯ç¬¬ä¸€æ¬¡è§åˆ°tryé‡Œé¢åµŒå¥—trycatchï¼Œå¾ˆä¹…ä»¥å‰å­¦ä¹ JAVAæ—¶è§è¿‡catchæˆ–finallyé‡Œé¢è¿˜æœ‰trycatchï¼Œä¸»è¦æ˜¯å› ä¸ºJAVAå¤„ç†å¼‚å¸¸æ—¶è¿˜å¯èƒ½å‘ç”Ÿåˆ«çš„å¼‚å¸¸ï¼Œæ‰€ä»¥å†åŠ ä¸€ä¸ªtrycatchæ¥æ•èŽ·å­å¼‚å¸¸ã€‚å»¶ä¼¸ä¸€ä¸‹ï¼Œtryé…åˆå¤šä¸ªcatch å’Œ trycatchåµŒå¥—æœ€ä¸»è¦çš„åŒºåˆ«å°±æ˜¯ä¸€ä¸ªtryå¤šä¸ªcatchåªèƒ½æ•èŽ·ä¸€æ¬¡å¼‚å¸¸ï¼›è€ŒtrycatchåµŒå¥—å¯ä»¥æ•èŽ·å¤šä¸ªå¼‚å¸¸ã€‚å½“ç„¶ä½ è¦ç¡¬è¯´ä¸€ä¸ªtryä¹Ÿå¯ä»¥æ•èŽ·å¤šä¸ªå¼‚å¸¸ï¼Œæˆ‘ä¹Ÿä¸åå¯¹ï¼Œæ¯•ç«Ÿè¿™ç§æ–¹å¼ä¸å¤ªå¸¸ç”¨ï¼ &emsp;&emsp;å¯ä»¥å‚è€ƒtry catché‡Œé¢try catchåµŒå¥—åŠ æ·±å¯¹trycatchåµŒå¥—çš„ç†è§£ï¼ä¸ªäººçŒœæµ‹ï¼Œä¹‹æ‰€ä»¥tryåµŒå¥—è¿˜æ˜¯ä¸ºäº†å°½å¯èƒ½çš„æ•èŽ·å¼‚å¸¸ï¼ˆæˆ‘ä¾ç„¶è®¤ä¸ºè¿™ä¹ˆå†™çš„æ„ä¹‰ä¸å¤§ï¼‰ï¼Œä½†å³ä¾¿å¦‚æ­¤@try@catchæ— æ³•æ•èŽ·UncaughtExceptionï¼Œè€Œocä¸­å¤§éƒ¨åˆ†crashå¦‚ï¼šå†…å­˜æº¢å‡ºã€é‡ŽæŒ‡é’ˆç­‰éƒ½æ˜¯æ— æ³•æ•èŽ·çš„ï¼Œè€Œèƒ½æ•èŽ·çš„åªæ˜¯åƒæ•°ç»„è¶Šç•Œä¹‹ç±»çš„ï¼Œæ‰€ä»¥@try@catchçœŸçš„æ¯”è¾ƒé¸¡è‚‹ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŽŸç†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CategoryåŽŸç†]]></title>
    <url>%2F2017%2F05%2F19%2FCategory%E5%8E%9F%E7%90%86%2F</url>
    <content type="text"><![CDATA[1 Categoryç»“æž„&emsp;&emsp;å…ˆçœ‹rutnimeé‡Œcategory_tçš„æºç 1234567891011121314151617struct category_t &#123;const char *name; // ç±»çš„åå­—classref_t cls; // ç±»struct method_list_t *instanceMethods; // å®žä¾‹æ–¹æ³•struct method_list_t *classMethods; // ç±»æ–¹æ³•struct protocol_list_t *protocols; // åè®®struct property_list_t *instanceProperties; // å±žæ€§// Fields below this point are not always present on disk.struct property_list_t *_classProperties;method_list_t *methodsForMeta(bool isMeta) &#123;if (isMeta) return classMethods;else return instanceMethods;&#125;property_list_t *propertiesForMeta(bool isMeta, struct header_info *hi);&#125;; &emsp;&emsp;å¾…æµ‹è¯•ä»£ç hæ–‡ä»¶1234567891011121314@interface Person : NSObject &#123;NSString *clsIvar;&#125;@property (nonatomic, copy) NSString *clsProperty1;@property (nonatomic, copy) NSString *clsProperty2;@end@interface Person (MyTest)@property (nonatomic, copy) NSString *clsProperty1;@end &emsp;&emsp;mæ–‡ä»¶1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253#import &quot;Person.h&quot;#import &lt;objc/runtime.h&gt;static NSString *kClsProperty1 = @&quot;kClsProperty1&quot;;static NSString *kClsProperty3 = @&quot;kClsProperty3&quot;;@interface Person () &#123;NSString *_extensionIvar;&#125;@property (nonatomic, copy) NSString *extensionProperty;@end@implementation Person- (void)method1 &#123;NSLog(@&quot;method1&quot;);&#125;- (void)method2 &#123;NSLog(@&quot;method2&quot;);&#125;@end@implementation Person (MyTest)- (void)method1 &#123;NSLog(@&quot;category method1&quot;);&#125;- (void)method3 &#123;NSLog(@&quot;category method3&quot;);&#125;- (void)setClsProperty1:(NSString*)propertyValue &#123;objc_setAssociatedObject(self, &amp;kClsProperty1, propertyValue, OBJC_ASSOCIATION_COPY_NONATOMIC);&#125;- (NSString *)clsProperty1 &#123;NSString *value = objc_getAssociatedObject(self, &amp;kClsProperty1);return value;&#125;- (void)setClsProperty3:(NSString*)propertyValue &#123;objc_setAssociatedObject(self, &amp;kClsProperty3, propertyValue, OBJC_ASSOCIATION_COPY_NONATOMIC);&#125;- (NSString *)clsProperty3 &#123;NSString *value = objc_getAssociatedObject(self, &amp;kClsProperty3);return value;&#125;@end &emsp;&emsp;æŸ¥çœ‹ç¼–è¯‘åŽæ–‡ä»¶123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298static NSString *kClsProperty1 = (NSString *)&amp;__NSConstantStringImpl__var_folders_gb__20zxxjd0p318c5gng983b6r0000gp_T_person_38d560_mi_0;static NSString *kClsProperty3 = (NSString *)&amp;__NSConstantStringImpl__var_folders_gb__20zxxjd0p318c5gng983b6r0000gp_T_person_38d560_mi_1;/** interface Person () &#123;NSString *_extensionIvar;**/ // @property (nonatomic, copy) NSString *extensionProperty;/* @end */// @implementation Personstatic void _I_Person_method1(Person * self, SEL _cmd) &#123;NSLog((NSString *)&amp;__NSConstantStringImpl__var_folders_gb__20zxxjd0p318c5gng983b6r0000gp_T_person_38d560_mi_2);&#125;static void _I_Person_method2(Person * self, SEL _cmd) &#123;NSLog((NSString *)&amp;__NSConstantStringImpl__var_folders_gb__20zxxjd0p318c5gng983b6r0000gp_T_person_38d560_mi_3);&#125;static NSString * _Nonnull _I_Person_clsProperty1(Person * self, SEL _cmd) &#123; return (*(NSString * _Nonnull __strong *)((char *)self + OBJC_IVAR_$_Person$_clsProperty1)); &#125;extern &quot;C&quot; __declspec(dllimport) void objc_setProperty (id, SEL, long, id, bool, bool);static void _I_Person_setClsProperty1_(Person * self, SEL _cmd, NSString * _Nonnull clsProperty1) &#123; objc_setProperty (self, _cmd, __OFFSETOFIVAR__(struct Person, _clsProperty1), (id)clsProperty1, 0, 1); &#125;static NSString * _Nonnull _I_Person_clsProperty2(Person * self, SEL _cmd) &#123; return (*(NSString * _Nonnull __strong *)((char *)self + OBJC_IVAR_$_Person$_clsProperty2)); &#125;static void _I_Person_setClsProperty2_(Person * self, SEL _cmd, NSString * _Nonnull clsProperty2) &#123; objc_setProperty (self, _cmd, __OFFSETOFIVAR__(struct Person, _clsProperty2), (id)clsProperty2, 0, 1); &#125;static NSString * _I_Person_extensionProperty(Person * self, SEL _cmd) &#123; return (*(NSString *__strong *)((char *)self + OBJC_IVAR_$_Person$_extensionProperty)); &#125;static void _I_Person_setExtensionProperty_(Person * self, SEL _cmd, NSString *extensionProperty) &#123; objc_setProperty (self, _cmd, __OFFSETOFIVAR__(struct Person, _extensionProperty), (id)extensionProperty, 0, 1); &#125;// @end// @implementation Person (MyTest)static void _I_Person_MyTest_method1(Person * self, SEL _cmd) &#123;NSLog((NSString *)&amp;__NSConstantStringImpl__var_folders_gb__20zxxjd0p318c5gng983b6r0000gp_T_person_38d560_mi_4);&#125;static void _I_Person_MyTest_method3(Person * self, SEL _cmd) &#123;NSLog((NSString *)&amp;__NSConstantStringImpl__var_folders_gb__20zxxjd0p318c5gng983b6r0000gp_T_person_38d560_mi_5);&#125;static void _I_Person_MyTest_setClsProperty1_(Person * self, SEL _cmd, NSString *__strong _Nonnull propertyValue) &#123;objc_setAssociatedObject(self, &amp;kClsProperty1, propertyValue, OBJC_ASSOCIATION_COPY_NONATOMIC);&#125;static NSString * _Nonnull _I_Person_MyTest_clsProperty1(Person * self, SEL _cmd) &#123;NSString *value = objc_getAssociatedObject(self, &amp;kClsProperty1);return value;&#125;static void _I_Person_MyTest_setClsProperty3_(Person * self, SEL _cmd, NSString *__strong _Nonnull propertyValue) &#123;objc_setAssociatedObject(self, &amp;kClsProperty3, propertyValue, OBJC_ASSOCIATION_COPY_NONATOMIC);&#125;static NSString * _Nonnull _I_Person_MyTest_clsProperty3(Person * self, SEL _cmd) &#123;NSString *value = objc_getAssociatedObject(self, &amp;kClsProperty3);return value;&#125;// @endstruct _prop_t &#123;const char *name;const char *attributes;&#125;;struct _protocol_t;struct _objc_method &#123;struct objc_selector * _cmd;const char *method_type;void *_imp;&#125;;struct _protocol_t &#123;void * isa; // NULLconst char *protocol_name;const struct _protocol_list_t * protocol_list; // super protocolsconst struct method_list_t *instance_methods;const struct method_list_t *class_methods;const struct method_list_t *optionalInstanceMethods;const struct method_list_t *optionalClassMethods;const struct _prop_list_t * properties;const unsigned int size; // sizeof(struct _protocol_t)const unsigned int flags; // = 0const char ** extendedMethodTypes;&#125;;struct _ivar_t &#123;unsigned long int *offset; // pointer to ivar offset locationconst char *name;const char *type;unsigned int alignment;unsigned int size;&#125;;struct _class_ro_t &#123;unsigned int flags;unsigned int instanceStart;unsigned int instanceSize;unsigned int reserved;const unsigned char *ivarLayout;const char *name;const struct _method_list_t *baseMethods;const struct _objc_protocol_list *baseProtocols;const struct _ivar_list_t *ivars;const unsigned char *weakIvarLayout;const struct _prop_list_t *properties;&#125;;struct _class_t &#123;struct _class_t *isa;struct _class_t *superclass;void *cache;void *vtable;struct _class_ro_t *ro;&#125;;struct _category_t &#123;const char *name;struct _class_t *cls;const struct _method_list_t *instance_methods;const struct _method_list_t *class_methods;const struct _protocol_list_t *protocols;const struct _prop_list_t *properties;&#125;;extern &quot;C&quot; __declspec(dllimport) struct objc_cache _objc_empty_cache;#pragma warning(disable:4273)extern &quot;C&quot; unsigned long int OBJC_IVAR_$_Person$clsIvar __attribute__ ((used, section (&quot;__DATA,__objc_ivar&quot;))) = __OFFSETOFIVAR__(struct Person, clsIvar);extern &quot;C&quot; unsigned long int OBJC_IVAR_$_Person$_extensionIvar __attribute__ ((used, section (&quot;__DATA,__objc_ivar&quot;))) = __OFFSETOFIVAR__(struct Person, _extensionIvar);extern &quot;C&quot; unsigned long int OBJC_IVAR_$_Person$_clsProperty1 __attribute__ ((used, section (&quot;__DATA,__objc_ivar&quot;))) = __OFFSETOFIVAR__(struct Person, _clsProperty1);extern &quot;C&quot; unsigned long int OBJC_IVAR_$_Person$_clsProperty2 __attribute__ ((used, section (&quot;__DATA,__objc_ivar&quot;))) = __OFFSETOFIVAR__(struct Person, _clsProperty2);extern &quot;C&quot; unsigned long int OBJC_IVAR_$_Person$_extensionProperty __attribute__ ((used, section (&quot;__DATA,__objc_ivar&quot;))) = __OFFSETOFIVAR__(struct Person, _extensionProperty);static struct /*_ivar_list_t*/ &#123;unsigned int entsize; // sizeof(struct _prop_t)unsigned int count;struct _ivar_t ivar_list[5];&#125; _OBJC_$_INSTANCE_VARIABLES_Person __attribute__ ((used, section (&quot;__DATA,__objc_const&quot;))) = &#123;sizeof(_ivar_t),5,&#123;&#123;(unsigned long int *)&amp;OBJC_IVAR_$_Person$clsIvar, &quot;clsIvar&quot;, &quot;@\&quot;NSString\&quot;&quot;, 3, 8&#125;,&#123;(unsigned long int *)&amp;OBJC_IVAR_$_Person$_extensionIvar, &quot;_extensionIvar&quot;, &quot;@\&quot;NSString\&quot;&quot;, 3, 8&#125;,&#123;(unsigned long int *)&amp;OBJC_IVAR_$_Person$_clsProperty1, &quot;_clsProperty1&quot;, &quot;@\&quot;NSString\&quot;&quot;, 3, 8&#125;,&#123;(unsigned long int *)&amp;OBJC_IVAR_$_Person$_clsProperty2, &quot;_clsProperty2&quot;, &quot;@\&quot;NSString\&quot;&quot;, 3, 8&#125;,&#123;(unsigned long int *)&amp;OBJC_IVAR_$_Person$_extensionProperty, &quot;_extensionProperty&quot;, &quot;@\&quot;NSString\&quot;&quot;, 3, 8&#125;&#125;&#125;;static struct /*_method_list_t*/ &#123;unsigned int entsize; // sizeof(struct _objc_method)unsigned int method_count;struct _objc_method method_list[8];&#125; _OBJC_$_INSTANCE_METHODS_Person __attribute__ ((used, section (&quot;__DATA,__objc_const&quot;))) = &#123;sizeof(_objc_method),8,&#123;&#123;(struct objc_selector *)&quot;method1&quot;, &quot;v16@0:8&quot;, (void *)_I_Person_method1&#125;,&#123;(struct objc_selector *)&quot;method2&quot;, &quot;v16@0:8&quot;, (void *)_I_Person_method2&#125;,&#123;(struct objc_selector *)&quot;clsProperty1&quot;, &quot;@16@0:8&quot;, (void *)_I_Person_clsProperty1&#125;,&#123;(struct objc_selector *)&quot;setClsProperty1:&quot;, &quot;v24@0:8@16&quot;, (void *)_I_Person_setClsProperty1_&#125;,&#123;(struct objc_selector *)&quot;clsProperty2&quot;, &quot;@16@0:8&quot;, (void *)_I_Person_clsProperty2&#125;,&#123;(struct objc_selector *)&quot;setClsProperty2:&quot;, &quot;v24@0:8@16&quot;, (void *)_I_Person_setClsProperty2_&#125;,&#123;(struct objc_selector *)&quot;extensionProperty&quot;, &quot;@16@0:8&quot;, (void *)_I_Person_extensionProperty&#125;,&#123;(struct objc_selector *)&quot;setExtensionProperty:&quot;, &quot;v24@0:8@16&quot;, (void *)_I_Person_setExtensionProperty_&#125;&#125;&#125;;static struct /*_prop_list_t*/ &#123;unsigned int entsize; // sizeof(struct _prop_t)unsigned int count_of_properties;struct _prop_t prop_list[2];&#125; _OBJC_$_PROP_LIST_Person __attribute__ ((used, section (&quot;__DATA,__objc_const&quot;))) = &#123;sizeof(_prop_t),2,&#123;&#123;&quot;clsProperty1&quot;,&quot;T@\&quot;NSString\&quot;,C,N,V_clsProperty1&quot;&#125;,&#123;&quot;clsProperty2&quot;,&quot;T@\&quot;NSString\&quot;,C,N,V_clsProperty2&quot;&#125;&#125;&#125;;static struct _class_ro_t _OBJC_METACLASS_RO_$_Person __attribute__ ((used, section (&quot;__DATA,__objc_const&quot;))) = &#123;1, sizeof(struct _class_t), sizeof(struct _class_t), (unsigned int)0, 0, &quot;Person&quot;,0, 0, 0, 0, 0, &#125;;static struct _class_ro_t _OBJC_CLASS_RO_$_Person __attribute__ ((used, section (&quot;__DATA,__objc_const&quot;))) = &#123;0, __OFFSETOFIVAR__(struct Person, clsIvar), sizeof(struct Person_IMPL), (unsigned int)0, 0, &quot;Person&quot;,(const struct _method_list_t *)&amp;_OBJC_$_INSTANCE_METHODS_Person,0, (const struct _ivar_list_t *)&amp;_OBJC_$_INSTANCE_VARIABLES_Person,0, (const struct _prop_list_t *)&amp;_OBJC_$_PROP_LIST_Person,&#125;;extern &quot;C&quot; __declspec(dllimport) struct _class_t OBJC_METACLASS_$_NSObject;extern &quot;C&quot; __declspec(dllexport) struct _class_t OBJC_METACLASS_$_Person __attribute__ ((used, section (&quot;__DATA,__objc_data&quot;))) = &#123;0, // &amp;OBJC_METACLASS_$_NSObject,0, // &amp;OBJC_METACLASS_$_NSObject,0, // (void *)&amp;_objc_empty_cache,0, // unused, was (void *)&amp;_objc_empty_vtable,&amp;_OBJC_METACLASS_RO_$_Person,&#125;;extern &quot;C&quot; __declspec(dllimport) struct _class_t OBJC_CLASS_$_NSObject;extern &quot;C&quot; __declspec(dllexport) struct _class_t OBJC_CLASS_$_Person __attribute__ ((used, section (&quot;__DATA,__objc_data&quot;))) = &#123;0, // &amp;OBJC_METACLASS_$_Person,0, // &amp;OBJC_CLASS_$_NSObject,0, // (void *)&amp;_objc_empty_cache,0, // unused, was (void *)&amp;_objc_empty_vtable,&amp;_OBJC_CLASS_RO_$_Person,&#125;;static void OBJC_CLASS_SETUP_$_Person(void ) &#123;OBJC_METACLASS_$_Person.isa = &amp;OBJC_METACLASS_$_NSObject;OBJC_METACLASS_$_Person.superclass = &amp;OBJC_METACLASS_$_NSObject;OBJC_METACLASS_$_Person.cache = &amp;_objc_empty_cache;OBJC_CLASS_$_Person.isa = &amp;OBJC_METACLASS_$_Person;OBJC_CLASS_$_Person.superclass = &amp;OBJC_CLASS_$_NSObject;OBJC_CLASS_$_Person.cache = &amp;_objc_empty_cache;&#125;#pragma section(&quot;.objc_inithooks$B&quot;, long, read, write)__declspec(allocate(&quot;.objc_inithooks$B&quot;)) static void *OBJC_CLASS_SETUP[] = &#123;(void *)&amp;OBJC_CLASS_SETUP_$_Person,&#125;;static struct /*_method_list_t*/ &#123;unsigned int entsize; // sizeof(struct _objc_method)unsigned int method_count;struct _objc_method method_list[6];&#125; _OBJC_$_CATEGORY_INSTANCE_METHODS_Person_$_MyTest __attribute__ ((used, section (&quot;__DATA,__objc_const&quot;))) = &#123;sizeof(_objc_method),6,&#123;&#123;(struct objc_selector *)&quot;method1&quot;, &quot;v16@0:8&quot;, (void *)_I_Person_MyTest_method1&#125;,&#123;(struct objc_selector *)&quot;method3&quot;, &quot;v16@0:8&quot;, (void *)_I_Person_MyTest_method3&#125;,&#123;(struct objc_selector *)&quot;setClsProperty1:&quot;, &quot;v24@0:8@16&quot;, (void *)_I_Person_MyTest_setClsProperty1_&#125;,&#123;(struct objc_selector *)&quot;clsProperty1&quot;, &quot;@16@0:8&quot;, (void *)_I_Person_MyTest_clsProperty1&#125;,&#123;(struct objc_selector *)&quot;setClsProperty3:&quot;, &quot;v24@0:8@16&quot;, (void *)_I_Person_MyTest_setClsProperty3_&#125;,&#123;(struct objc_selector *)&quot;clsProperty3&quot;, &quot;@16@0:8&quot;, (void *)_I_Person_MyTest_clsProperty3&#125;&#125;&#125;;static struct /*_prop_list_t*/ &#123;unsigned int entsize; // sizeof(struct _prop_t)unsigned int count_of_properties;struct _prop_t prop_list[2];&#125; _OBJC_$_PROP_LIST_Person_$_MyTest __attribute__ ((used, section (&quot;__DATA,__objc_const&quot;))) = &#123;sizeof(_prop_t),2,&#123;&#123;&quot;clsProperty1&quot;,&quot;T@\&quot;NSString\&quot;,C,N&quot;&#125;,&#123;&quot;clsProperty3&quot;,&quot;T@\&quot;NSString\&quot;,C,N&quot;&#125;&#125;&#125;;extern &quot;C&quot; __declspec(dllexport) struct _class_t OBJC_CLASS_$_Person;static struct _category_t _OBJC_$_CATEGORY_Person_$_MyTest __attribute__ ((used, section (&quot;__DATA,__objc_const&quot;))) = &#123;&quot;Person&quot;,0, // &amp;OBJC_CLASS_$_Person,(const struct _method_list_t *)&amp;_OBJC_$_CATEGORY_INSTANCE_METHODS_Person_$_MyTest,0,0,(const struct _prop_list_t *)&amp;_OBJC_$_PROP_LIST_Person_$_MyTest,&#125;;static void OBJC_CATEGORY_SETUP_$_Person_$_MyTest(void ) &#123;_OBJC_$_CATEGORY_Person_$_MyTest.cls = &amp;OBJC_CLASS_$_Person;&#125;#pragma section(&quot;.objc_inithooks$B&quot;, long, read, write)__declspec(allocate(&quot;.objc_inithooks$B&quot;)) static void *OBJC_CATEGORY_SETUP[] = &#123;(void *)&amp;OBJC_CATEGORY_SETUP_$_Person_$_MyTest,&#125;;static struct _class_t *L_OBJC_LABEL_CLASS_$ [1] __attribute__((used, section (&quot;__DATA, __objc_classlist,regular,no_dead_strip&quot;)))= &#123;&amp;OBJC_CLASS_$_Person,&#125;;static struct _category_t *L_OBJC_LABEL_CATEGORY_$ [1] __attribute__((used, section (&quot;__DATA, __objc_catlist,regular,no_dead_strip&quot;)))= &#123;&amp;_OBJC_$_CATEGORY_Person_$_MyTest,&#125;;static struct IMAGE_INFO &#123; unsigned version; unsigned flag; &#125; _OBJC_IMAGE_INFO = &#123; 0, 2 &#125;; &emsp;&emsp;é€šè¿‡è§‚å¯Ÿç¼–è¯‘ä»£ç å¾—çŸ¥ extensionä¸æ˜¯åŒ¿åCategoryï¼Œä¸¤è€…æ— å…³ï¼extensionæ˜¯ç¼–è¯‘åˆ°ç±»é‡Œçš„ ä½¿ç”¨categoryçš„æ–¹æ³•éœ€è¦å¼•å…¥å¯¹åº”çš„å¤´æ–‡ä»¶ï¼Œå› ä¸ºcategoryæ˜¯å•ç‹¬ç¼–è¯‘ï¼ˆå¦‚æžœæŠŠMyTestå•ç‹¬æˆä¸€ä¸ªæ–‡ä»¶ï¼Œç¼–è¯‘Personçš„æ—¶å€™æ˜¯çœ‹ä¸åˆ°MyTestç›¸å…³ä»£ç çš„ï¼‰ Categoryæ˜¯è¿è¡ŒæœŸå†³è®®çš„ï¼Œå› ä¸ºå¦‚æžœç¼–è¯‘é˜¶æ®µå°±å†³è®®å¿…ç„¶ä¼šæœ‰é‡åé”™è¯¯é—®é¢˜ categoryä¸èƒ½æ·»åŠ ivar, category_tæ•°æ®ç»“æž„é‡Œæ²¡æœ‰ï¼Œç¼–è¯‘åŽä»£ç ä¹Ÿæ²¡ç›¸å…³é€»è¾‘ æ‰€æœ‰ç±»å’Œcategoryç¼–è¯‘åŽéƒ½æ˜¯structç»“æž„ä½“ï¼Œåœ¨DATAæ®µä¸‹æœ‰ objc_classlist å’Œ objc_catlist ï¼Œå†é€šè¿‡OBJC$_CATEGORY_Person_$_MyTest.cls = &amp;OBJC_CLASS_$_Person;æ–¹å¼æŒ‡æ˜Žcategoryå’Œç±»çš„å…³ç³» categoryçš„hæ–‡ä»¶å£°æ˜Žçš„å±žæ€§å¦‚æžœæ²¡æ‰‹åŠ¨å®žçŽ°getterå’Œsetteræ–¹æ³•ä¼šæŠ¥é”™çš„åŽŸå› å°±æ˜¯ç¼–è¯‘å™¨æ²¡è‡ªåŠ¨ç”Ÿæˆï¼ˆåºŸè¯ï¼Œä½†è¿™æ¬¡æ˜¯ä»Žæºç è§’åº¦çœ‹çš„ï¼‰ 2 CategoryåŠ è½½&emsp;&emsp;categoryè¢«é™„åŠ åˆ°ç±»ä¸Šé¢æ˜¯åœ¨map_imagesçš„æ—¶å€™å‘ç”Ÿçš„ï¼Œåœ¨new-ABIçš„æ ‡å‡†ä¸‹ï¼Œ_objc_inité‡Œé¢çš„è°ƒç”¨çš„map_imagesæœ€ç»ˆä¼šè°ƒç”¨objc-runtime-new.mmé‡Œé¢çš„_read_imagesæ–¹æ³•ï¼Œè€Œåœ¨_read_imagesä¸­æœ‰å¯¹categoryçš„å¤„ç†ï¼Œæºç å¤ªé•¿äº†, åªè´´æŠŠcategoryçš„å®žä¾‹æ–¹æ³•ã€åè®®ä»¥åŠå±žæ€§æ·»åŠ åˆ°ç±»ä¸Šçš„ä»£ç , 123456789101112131415161718192021// Process this category.// First, register the category with its target class.// Then, rebuild the class&apos;s method lists (etc) if// the class is realized.bool classExists = NO;if (cat-&gt;instanceMethods || cat-&gt;protocols|| cat-&gt;instanceProperties)&#123;// addUnattachedCategoryForClassåªæ˜¯æŠŠç±»å’Œcategoryåšä¸€ä¸ªå…³è”æ˜ å°„addUnattachedCategoryForClass(cat, cls, hi);if (cls-&gt;isRealized()) &#123;remethodizeClass(cls);classExists = YES;&#125;if (PrintConnecting) &#123;_objc_inform(&quot;CLASS: found category -%s(%s) %s&quot;,cls-&gt;nameForLogging(), cat-&gt;name,classExists ? &quot;on existing class&quot; : &quot;&quot;);&#125;&#125;//æŽ¥ä¸‹æ¥æ˜¯æŠŠcategoryçš„ç±»æ–¹æ³•å’Œåè®®æ·»åŠ åˆ°ç±»çš„metaclassä¸Šçš„ä»£ç ï¼Œé€»è¾‘ä¸€æ ·å‚æ•°æ”¹æˆcls-&gt;ISA() &emsp;&emsp;remethodizeClassæœ€åŽä¼šæŠŠCategoryçš„methodã€propertieså’Œprotocolsæ·»åŠ åˆ°clsé‡Œ123// Attach method lists and properties and protocols from categories to a class.// Assumes the categories in cats are all loaded and sorted by load order, // oldest categories first. &emsp;&emsp;éœ€è¦æ³¨æ„çš„æ˜¯ categoryçš„æ–¹æ³•æ²¡æœ‰â€œå®Œå…¨æ›¿æ¢æŽ‰â€åŽŸæ¥ç±»å·²ç»æœ‰çš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æžœcategoryå’ŒåŽŸæ¥ç±»éƒ½æœ‰methodAï¼Œé‚£ä¹ˆcategoryé™„åŠ å®Œæˆä¹‹åŽï¼Œç±»çš„æ–¹æ³•åˆ—è¡¨é‡Œä¼šæœ‰ä¸¤ä¸ªmethodA categoryçš„æ–¹æ³•è¢«æ”¾åˆ°äº†æ–°æ–¹æ³•åˆ—è¡¨çš„å‰é¢ï¼Œè€ŒåŽŸæ¥ç±»çš„æ–¹æ³•è¢«æ”¾åˆ°äº†æ–°æ–¹æ³•åˆ—è¡¨çš„åŽé¢ï¼Œè¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¹³å¸¸æ‰€è¯´çš„categoryçš„æ–¹æ³•ä¼šâ€œè¦†ç›–â€æŽ‰åŽŸæ¥ç±»çš„åŒåæ–¹æ³•ï¼Œè¿™æ˜¯å› ä¸ºè¿è¡Œæ—¶åœ¨æŸ¥æ‰¾æ–¹æ³•çš„æ—¶å€™æ˜¯é¡ºç€æ–¹æ³•åˆ—è¡¨çš„é¡ºåºæŸ¥æ‰¾çš„ï¼Œå®ƒåªè¦ä¸€æ‰¾åˆ°å¯¹åº”åå­—çš„æ–¹æ³•ï¼Œå°±ä¼šç½¢ä¼‘^_^ï¼Œæ®Šä¸çŸ¥åŽé¢å¯èƒ½è¿˜æœ‰ä¸€æ ·åå­—çš„æ–¹æ³•ã€‚ 3 å…³è”å¯¹è±¡&emsp;&emsp;ä¸Šé¢è¯´åˆ°categoryæ²¡æ³•æ·»åŠ ivarï¼Œè€Œæˆ‘ä»¬éƒ½çŸ¥é“å¯ä»¥é€šè¿‡å…³è”å¯¹è±¡çš„æ–¹å¼ç»™categoryæ·»åŠ â€œå®žä¾‹å˜é‡â€ï¼Œå®ƒæ˜¯æ€Žä¹ˆå®žçŽ°çš„ï¼Ÿä»Žruntimeçš„objc_setAssociatedObjectå’Œobjc_getAssociatedObjectä¸¤ä¸ªå‡½æ•°å…¥æ‰‹æŸ¥çœ‹æºç 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849void objc_setAssociatedObject(id object, const void *key, id value, objc_AssociationPolicy policy) &#123;_object_set_associative_reference(object, (void *)key, value, policy);&#125;void _object_set_associative_reference(id object, void *key, id value, uintptr_t policy) &#123;// retain the new value (if any) outside the lock.ObjcAssociation old_association(0, nil);id new_value = value ? acquireValue(value, policy) : nil;&#123;AssociationsManager manager;AssociationsHashMap &amp;associations(manager.associations());disguised_ptr_t disguised_object = DISGUISE(object);if (new_value) &#123;// break any existing association.AssociationsHashMap::iterator i = associations.find(disguised_object);if (i != associations.end()) &#123;// secondary table existsObjectAssociationMap *refs = i-&gt;second;ObjectAssociationMap::iterator j = refs-&gt;find(key);if (j != refs-&gt;end()) &#123;old_association = j-&gt;second;j-&gt;second = ObjcAssociation(policy, new_value);&#125; else &#123;(*refs)[key] = ObjcAssociation(policy, new_value);&#125;&#125; else &#123;// create the new association (first time).ObjectAssociationMap *refs = new ObjectAssociationMap;associations[disguised_object] = refs;(*refs)[key] = ObjcAssociation(policy, new_value);object-&gt;setHasAssociatedObjects();&#125;&#125; else &#123;// setting the association to nil breaks the association.AssociationsHashMap::iterator i = associations.find(disguised_object);if (i != associations.end()) &#123;ObjectAssociationMap *refs = i-&gt;second;ObjectAssociationMap::iterator j = refs-&gt;find(key);if (j != refs-&gt;end()) &#123;old_association = j-&gt;second;refs-&gt;erase(j);&#125;&#125;&#125;&#125;// release the old value (outside of the lock).if (old_association.hasValue()) ReleaseValue()(old_association);&#125; &emsp;&emsp; ä¸ç”¨çœ‹å¼‚å¸¸é€»è¾‘ï¼Œä»£ç å¾ˆç®€å•ï¼Œç›´æŽ¥copyç¾Žå›¢çš„ç»“è®ºå§ï¼æ‰€æœ‰çš„å…³è”å¯¹è±¡éƒ½ç”±AssociationsManagerç®¡ç†ï¼ŒAssociationsManageré‡Œé¢æ˜¯ç”±ä¸€ä¸ªé™æ€AssociationsHashMapæ¥å­˜å‚¨æ‰€æœ‰çš„å…³è”å¯¹è±¡çš„ã€‚è¿™ç›¸å½“äºŽæŠŠæ‰€æœ‰å¯¹è±¡çš„å…³è”å¯¹è±¡éƒ½å­˜åœ¨ä¸€ä¸ªå…¨å±€mapé‡Œé¢ã€‚è€Œmapçš„çš„keyæ˜¯è¿™ä¸ªå¯¹è±¡çš„æŒ‡é’ˆåœ°å€ï¼ˆä»»æ„ä¸¤ä¸ªä¸åŒå¯¹è±¡çš„æŒ‡é’ˆåœ°å€ä¸€å®šæ˜¯ä¸åŒçš„ï¼‰ï¼Œè€Œè¿™ä¸ªmapçš„valueåˆæ˜¯å¦å¤–ä¸€ä¸ªAssociationsHashMapï¼Œé‡Œé¢ä¿å­˜äº†å…³è”å¯¹è±¡çš„kvå¯¹ã€‚ &emsp;&emsp; å¯¹è±¡çš„é”€æ¯é€»è¾‘é‡Œé¢ä¹Ÿä¼šæ¸…é™¤å…³è”å¯¹è±¡ 4 å…¶å®ƒé—®é¢˜4.1 åœ¨ç±»å’Œcategoryä¸­éƒ½å¯ä»¥æœ‰+loadæ–¹æ³•ï¼Œé‚£ä¹ˆæœ‰ä¸¤ä¸ªé—®é¢˜ï¼š åœ¨ç±»çš„+loadæ–¹æ³•è°ƒç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨categoryä¸­å£°æ˜Žçš„æ–¹æ³•ä¹ˆï¼Ÿå¯ä»¥è°ƒç”¨ï¼Œå› ä¸ºé™„åŠ categoryåˆ°ç±»çš„å·¥ä½œä¼šå…ˆäºŽ+loadæ–¹æ³•çš„æ‰§è¡Œ è¿™ä¹ˆäº›ä¸ª+loadæ–¹æ³•ï¼Œè°ƒç”¨é¡ºåºæ˜¯å’‹æ ·çš„å‘¢ï¼Ÿ +loadçš„æ‰§è¡Œé¡ºåºæ˜¯å…ˆç±»ï¼ŒåŽcategoryï¼Œè€Œcategoryçš„+loadæ‰§è¡Œé¡ºåºæ˜¯æ ¹æ®ç¼–è¯‘é¡ºåºå†³å®šçš„ 4.2 æ€Žä¹ˆè°ƒç”¨åˆ°åŽŸæ¥ç±»ä¸­è¢«categoryè¦†ç›–æŽ‰çš„æ–¹æ³•ï¼Ÿ&emsp;&emsp; å¯¹äºŽè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“categoryå…¶å®žå¹¶ä¸æ˜¯å®Œå…¨æ›¿æ¢æŽ‰åŽŸæ¥ç±»çš„åŒåæ–¹æ³•ï¼Œåªæ˜¯categoryåœ¨æ–¹æ³•åˆ—è¡¨çš„å‰é¢è€Œå·²ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦é¡ºç€æ–¹æ³•åˆ—è¡¨æ‰¾åˆ°æœ€åŽä¸€ä¸ªå¯¹åº”åå­—çš„æ–¹æ³•ï¼Œå°±å¯ä»¥è°ƒç”¨åŽŸæ¥ç±»çš„æ–¹æ³• 4.3 +initializeæ–¹æ³•ä»€ä¹ˆæ—¶å€™è°ƒç”¨&emsp;&emsp; initializeæ˜¯ç±»ç¬¬ä¸€æ¬¡æŽ¥æ”¶åˆ°æ¶ˆæ¯çš„æ—¶å€™è°ƒç”¨ï¼Œæ¯ä¸€ä¸ªç±»åªä¼šinitializeä¸€æ¬¡ï¼initializeå…ˆåˆå§‹åŒ–çˆ¶ç±»ï¼Œä¹‹åŽå†åˆå§‹åŒ–å­ç±»ã€‚å¦‚æžœåˆ†ç±»å®žçŽ°äº†+initializeï¼Œå°±è¦†ç›–ç±»æœ¬èº«çš„+initializeè°ƒç”¨ å‚è€ƒ&emsp;&emsp;ç¾Žå›¢çš„æ·±å…¥ç†è§£Objective-Cï¼šCategoryï¼Œå·®è·çœŸçš„ä¸æ˜¯ä¸€ç‚¹ç‚¹ï¼ç¾Žå›¢ç«¥éž‹åœ¨15å¹´å°±ç ”ç©¶è¿‡ç›¸å…³é—®é¢˜äº†ï¼Œæˆ‘åˆ°17å¹´æ‰çœ‹åˆ°â€¦]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŽŸç†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æžç®€ä¸»ä¹‰]]></title>
    <url>%2F2017%2F05%2F08%2F%E6%9E%81%E7%AE%80%E4%B8%BB%E4%B9%89%2F</url>
    <content type="text"><![CDATA[æžç®€ä¸»ä¹‰å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬éƒ½åœ¨å¯»æ‰¾å¤æ‚çš„è§£å†³åŠžæ³• å¸¸å¸¸é—®è‡ªå·±ï¼šè¦åšçš„ç®€å•çš„æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯å¦è¿˜æœ‰æ›´ç®€å•çš„ï¼Ÿ å°è¯•ç”¨25ä¸ªå­—ç®€å•æ˜Žäº†çš„æè¿°æ¸…æ¥šï¼Œä¸€ä»¶äº‹ï¼Œä¸€ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªæ–¹æ¡ˆï¼Œä¸€ä¸ªå»ºè®®ç­‰ å°è¯•30ç§’å†…å®Œæˆè¿™ä»¶äº‹ï¼Œâ€œç”µæ¢¯å…¬å…³â€æœ‰é™æ—¶é—´å†…å°†ä¿¡æ¯å®Œæ•´å‡†ç¡®çš„ä¼ é€’ å¦‚æžœå‘çŽ°é‡‡ç”¨äº†å¤æ‚çš„åŠžæ³•ï¼Œå°±è¦å®¡è§†æ˜¯å¦å¯ä»¥æ›´ç®€å•ç‚¹ åªé—®æœ€ç®€å•çš„é—®é¢˜ï¼šwho? what? when? where? why? how? ä½¿ç”¨æ°´å¹³æ€ç»´ï¼Œæ”¹å˜å›ºæœ‰æ€ç»´æ¨¡å¼ å¤§å¤šæ•°ä¼šè®®ï¼Œå¾€å¾€å€¾å‘äºŽå¤æ‚çš„æ“ä½œï¼Œè€Œä¸æ˜¯ç®€å•çš„ å¼„æ˜Žç™½è‡ªå·±è¦åšä»€ä¹ˆ åšä¸€ç‚¹è®¡åˆ’æ°¸è¿œæ¯”ç›²ç›®çš„å°è¯•å¥½å¾ˆå¤š çœŸæ­£ç†è§£ä½ åŠªåŠ›æƒ³åšçš„äº‹ï¼šè¿™ä¸ªå·¥ä½œæœ€ç»ˆè¦è¾¾åˆ°ä»€ä¹ˆç›®æ ‡ï¼Ÿä»€ä¹ˆäº‹ä»¶çš„å‡ºçŽ°æ ‡å¿—ç€è¿™é¡¹å·¥ä½œçš„ç»“æŸï¼Ÿ æžæ¸…æ¥šä½ æƒ³è¦èµ°çš„äº‹æƒ…æ˜¯å¦ä¹Ÿæ˜¯å…¶ä»–äººå¸Œæœ›åšçš„ï¼šè®©åˆ©ç›Šç›¸å…³è€…æ°¸è¿œå¼€å¿ƒæ˜¯æˆåŠŸçš„å…³é”®ï¼Œåˆ©ç›Šç›¸å…³è€…ä¹Ÿæ˜¯æœ‰æƒé‡çš„ã€‚ å…·ä½“å·¥ä½œå½¢è±¡åŒ–ï¼šå…¶å®žå°±æ˜¯å¹»æƒ³å‡ºè¦åšçš„äº‹æƒ…ï¼Œèƒ½æ˜Žç¡®åŠªåŠ›ç›®æ ‡ï¼Œç¼©å°èŒƒå›´è¿˜èƒ½å¤šè§’åº¦è§‚å¯Ÿè¦åšçš„äº‹æƒ… ä»»ä½•äº‹éƒ½æœ‰è¿žç»­æ€§ åˆ¶å®šå®å¤§çš„ç›®æ ‡ï¼Œå´å¯¹â€œæ€Žæ ·â€å®žçŽ°ç¼ºä¹å…³æ³¨,å³å¦‚æžœäº‹ä»¶ä¸å…·æœ‰è¿žç»­æ€§ï¼Œé‚£ä»€ä¹ˆä¹Ÿåšä¸äº† å»ºç«‹äº‹ä»¶è¿žç»­æ€§ï¼šä¸€å¼€å§‹å°±åšå¥½è®¡åˆ’ï¼›æŠŠè®¡åˆ’åšçš„è¯¦ç»†å‘¨åˆ°ï¼›æ¸…æ¥šçš„è¯´æ¸…è‡ªå·±çš„æ„å›¾ï¼›å–„äºŽè¿ç”¨çŸ¥è¯†å’Œå‡è®¾ï¼›æ‡‚å¾—è¿ç”¨å› æžœå…³ç³»ï¼›è®°å½•å·²ç»å‘ç”Ÿçš„äº‹æƒ… æŠŠè¦åšçš„äº‹æƒ…åˆ—æˆæ¸…å•å¹¶å®šæœŸæ›´æ–° äº‹æƒ…ä¼˜å…ˆçº§æŽ’åºï¼šå¦‚æžœæˆ‘çŽ°åœ¨åªèƒ½åšä¸€ä»¶äº‹ï¼Œåšä»€ä¹ˆå‘¢ï¼Ÿ åŠ å¿«é€Ÿåº¦ï¼Œæ—¶é—´é—´éš™å¯ä»¥åšä»€ä¹ˆï¼Ÿ å¦‚æžœä¸åŽ»åšï¼Œæ°¸è¿œè¦åšä¸å®Œ åˆ†è§£è½å®žåˆ°ç‚¹å¹¶æœ‰æ•ˆç®¡ç† å¤„ç†ç‚¹ä¸Žç‚¹ä¹‹é—´çš„å…³ç³»ä¸Žå†²çª å¿…é¡»å­¦ä¼šä¸åšæŸäº‹ äº‹æƒ…çš„ç»“æžœå¾€å¾€å’Œé¢„æœŸä¸ä¸€æ · è®¡åˆ’ä¸­å¿…é¡»è¦æœ‰åº”æ€¥é¢„æ¡ˆ é£Žé™©ç®¡ç†ä¸Žé¢„ç•™ä½™åœ°ï¼Œå¯¹äºŽæˆ‘ï¼Œæ„Ÿè§‰æ˜¯å¤šæƒ³æƒ³å’Œå¤šæƒ³æƒ³çš„åŒºåˆ« æ¸è¿›å¼å®Œæˆï¼Œå…ˆå®Œæˆå¿…é¡»è¦åšï¼Œåœ¨å®Œæˆåšäº†æ›´å¥½çš„ æ˜Žç¡®ç•Œå®šäº‹æƒ…çš„ç»“æžœ æ˜Žç¡®ä¸”æœ‰æ„ä¹‰çš„ç›®æ ‡ï¼šä»»åŠ¡ç»†åˆ†+å…·åŒ–é‡åŒ– è½¬ç§»åŽ‹åŠ›å’Œç¼“è§£åŽ‹åŠ› å­¦ä¼šä»Žä»–äººçš„è§’åº¦çœ‹é—®é¢˜ å°½å¯èƒ½æ»¡è¶³åˆ©ç›Šç›¸å…³è€…èŽ·åˆ©æ¡ä»¶]]></content>
      <categories>
        <category>è¯»ä¹¦</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[weakæºç ]]></title>
    <url>%2F2017%2F04%2F26%2Fweak%E6%BA%90%E7%A0%81%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;ç›´æŽ¥ä¸Šæºç å§ï¼Œæºç åœ°å€ï¼Œæˆ‘å°±å†™å†™æˆ‘æ„Ÿå…´è¶£çš„éƒ¨åˆ†å§ 1 å†…å­˜å±žæ€§ç±»åž‹123456789101112/*&quot;Unknown&quot; includes non-object ivars and non-ARC non-__weak ivars&quot;Strong&quot; includes ARC __strong ivars&quot;Weak&quot; includes ARC and new MRC __weak ivars&quot;Unretained&quot; includes ARC __unsafe_unretained and old GC+MRC __weak ivars*/typedef enum &#123;objc_ivar_memoryUnknown, // unknown / unknownobjc_ivar_memoryStrong, // direct access / objc_storeStrongobjc_ivar_memoryWeak, // objc_loadWeak[Retained] / objc_storeWeakobjc_ivar_memoryUnretained // direct access / direct access&#125; objc_ivar_memory_management_t; &emsp;&emsp;æé—®assignåº”è¯¥ç®—åˆ°å“ªä¸€ä¸ªï¼Ÿç­”æ¡ˆunknownï¼copyå‘¢ï¼Ÿ 2 æ·»åŠ weak123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117// Update a weak variable.// If HaveOld is true, the variable has an existing value // that needs to be cleaned up. This value might be nil.// If HaveNew is true, there is a new value that needs to be // assigned into the variable. This value might be nil.// If CrashIfDeallocating is true, the process is halted if newObj is // deallocating or newObj&apos;s class does not support weak references. // If CrashIfDeallocating is false, nil is stored instead.template &lt;bool HaveOld, bool HaveNew, bool CrashIfDeallocating&gt;static id storeWeak(id *location, objc_object *newObj)&#123;assert(HaveOld || HaveNew);if (!HaveNew) assert(newObj == nil);Class previouslyInitializedClass = nil;id oldObj;/*å£°æ˜Žæ–°æ—§ä¸¤ä¸ªæ•£åˆ—è¡¨ï¼Œé˜²æ­¢æ•°æ®æ±¡æŸ“SideTable ä¸‹é¢æœ‰ä»‹ç»*/SideTable *oldTable;SideTable *newTable;// Acquire locks for old and new values.// Order by lock address to prevent lock ordering problems. // Retry if the old value changes underneath us.retry:if (HaveOld) &#123;oldObj = *location;/*SideTablesçš„åˆå§‹åŒ–å¾ˆæœ‰æ„æ€ï¼Œæ—¢ä¸æ˜¯åœ¨C++ staticåˆå§‹åŒ–æ—¶å¹²çš„ï¼Œä¹Ÿä¸æ˜¯å…¨å±€åˆå§‹åŒ–æ—¶å¹²çš„è€Œæ˜¯åœ¨runtimeç¬¬ä¸€æ¬¡åˆå§‹åŒ–æ—¶å¹²çš„*/oldTable = &amp;SideTables()[oldObj];&#125; else &#123;oldTable = nil;&#125;if (HaveNew) &#123;newTable = &amp;SideTables()[newObj];&#125; else &#123;newTable = nil;&#125;SideTable::lockTwo&lt;HaveOld, HaveNew&gt;(oldTable, newTable);/*if (HaveOld &amp;&amp; *location != oldObj)æœ‰ä¸¤ä¸ªä½œç”¨ï¼š1ï¼Œå› ä¸ºæœ‰goto retryé‡è¯•æœºåˆ¶ï¼Œå¯ç”¨æ­¤ifæ¥åˆ¤æ–­æ˜¯å¦å¤„ç†è¿‡location2ï¼Œé¢„é˜²å¤šçº¿ç¨‹é—®é¢˜*/if (HaveOld &amp;&amp; *location != oldObj) &#123;SideTable::unlockTwo&lt;HaveOld, HaveNew&gt;(oldTable, newTable);goto retry;&#125;// Prevent a deadlock between the weak reference machinery// and the +initialize machinery by ensuring that no // weakly-referenced object has an un-+initialized isa.if (HaveNew &amp;&amp; newObj) &#123;Class cls = newObj-&gt;getIsa();if (cls != previouslyInitializedClass &amp;&amp; !((objc_class *)cls)-&gt;isInitialized()) &#123;SideTable::unlockTwo&lt;HaveOld, HaveNew&gt;(oldTable, newTable);/*æˆ‘å¯¹ä¸Šé¢è¯´é€šè¿‡initializeæ¥é˜²æ­¢deadlockå¾ˆæ„Ÿå…´è¶£ï¼Œåˆ°åº•æ€Žä¹ˆæ‰ä¼šæ­»é”ï¼Ÿåˆæ€Žä¹ˆé˜²æ­¢ï¼Ÿ*/_class_initialize(_class_getNonMetaClass(cls, (id)newObj));// If this class is finished with +initialize then we&apos;re good.// If this class is still running +initialize on this thread // (i.e. +initialize called storeWeak on an instance of itself)// then we may proceed but it will appear initializing and // not yet initialized to the check above.// Instead set previouslyInitializedClass to recognize it on retry.previouslyInitializedClass = cls;goto retry;&#125;&#125;// Clean up old value, if any.if (HaveOld) &#123;weak_unregister_no_lock(&amp;oldTable-&gt;weak_table, oldObj, location);&#125;// Assign new value, if any.if (HaveNew) &#123;newObj = (objc_object *)weak_register_no_lock(&amp;newTable-&gt;weak_table, (id)newObj, location, CrashIfDeallocating);// weak_register_no_lock returns nil if weak store should be rejected// Set is-weakly-referenced bit in refcount table.// å…³äºŽTaggedPointer https://www.infoq.cn/article/deep-understanding-of-tagged-pointerif (newObj &amp;&amp; !newObj-&gt;isTaggedPointer()) &#123;newObj-&gt;setWeaklyReferenced_nolock();&#125;// Do not set *location anywhere else. That would introduce a race.*location = (id)newObj;&#125;else &#123;// No new value. The storage is not changed.&#125;SideTable::unlockTwo&lt;HaveOld, HaveNew&gt;(oldTable, newTable);return (id)newObj;&#125; é—®é¢˜1 initialize deadlock1234567891011121314151617181920212223242526272829303132333435/************************************************************************ +initialize deadlock case when a class is marked initializing while * its superclass is initialized. Solved by completely initializing * superclasses before beginning to initialize a class.** OmniWeb class hierarchy:* OBObject * | ` OBPostLoader* OFObject* / \* OWAddressEntry OWController* | * OWConsoleController** Thread 1 (evil testing thread):* initialize OWAddressEntry* super init OFObject* super init OBObject * [OBObject initialize] runs OBPostLoader, which inits lots of classes...* initialize OWConsoleController* super init OWController - wait for Thread 2 to finish OWController init** Thread 2 (normal OmniWeb thread):* initialize OWController* super init OFObject - wait for Thread 1 to finish OFObject init** deadlock!** Solution: fully initialize super classes before beginning to initialize * a subclass. Then the initializing+initialized part of the class hierarchy* will be a contiguous subtree starting at the root, so other threads * can&apos;t jump into the middle between two initializing classes, and we won&apos;t * get stuck while a superclass waits for its subclass which waits for the * superclass.**********************************************************************/ é—®é¢˜2 weak_register_no_lock ä¸ºå•¥æ˜¯no_lockï¼Ÿ1å› ä¸ºä¸å…³å¿ƒï¼æŸ¥çœ‹æºç è¿‡ç¨‹ä¸­ï¼Œå‘çŽ°ä¼šæœ‰åˆ¤æ–­å„ç§å…¥å‚ï¼ é—®é¢˜3 weakçš„å¼•ç”¨è®¡æ•°ï¼Ÿä¸å…³å¿ƒï¼Œç›´æŽ¥åŠ åˆ°å“ˆå¸Œè¡¨é‡Œï¼åˆ°æ—¶å€™ç›´æŽ¥æ¸…ç©ºå“ˆå¸Œè¡¨12345678910111213141516171819202122232425/** * Add new_entry to the object&apos;s table of weak references.* Does not check whether the referent is already in the table.*/static void weak_entry_insert(weak_table_t *weak_table, weak_entry_t *new_entry)&#123;weak_entry_t *weak_entries = weak_table-&gt;weak_entries;assert(weak_entries != nil);size_t begin = hash_pointer(new_entry-&gt;referent) &amp; (weak_table-&gt;mask);size_t index = begin;size_t hash_displacement = 0;while (weak_entries[index].referent != nil) &#123;index = (index+1) &amp; weak_table-&gt;mask;if (index == begin) bad_weak_table(weak_entries);hash_displacement++;&#125;weak_entries[index] = *new_entry;weak_table-&gt;num_entries++;if (hash_displacement &gt; weak_table-&gt;max_hash_displacement) &#123;weak_table-&gt;max_hash_displacement = hash_displacement;&#125;&#125; 3 ç§»é™¤weak12345678910111213141516171819202122232425262728293031323334353637383940414243444546// dealloc -&gt; _objc_rootDeallocstatic id _object_dispose(id anObject) &#123;if (anObject==nil) return nil;objc_destructInstance(anObject);// è¿™ä¸ªæœ‰æ„æ€ï¼å°†isaæŒ‡å‘nilï¼Œé˜²æ­¢é”€æ¯â€œç±»å¯¹è±¡â€å’Œå…ƒç±»anObject-&gt;initIsa(_objc_getFreedObjectClass ()); free(anObject);return nil;&#125;// Slow path of clearDeallocating() // for objects with nonpointer isa// that were ever weakly referenced // or whose retain count ever overflowed to the side table.NEVER_INLINE voidobjc_object::clearDeallocating_slow()&#123;assert(isa.nonpointer &amp;&amp; (isa.weakly_referenced || isa.has_sidetable_rc));SideTable&amp; table = SideTables()[this];table.lock();if (isa.weakly_referenced) &#123;weak_clear_no_lock(&amp;table.weak_table, (id)this);&#125;if (isa.has_sidetable_rc) &#123;table.refcnts.erase(this);&#125;table.unlock();&#125;/** * Called by dealloc; nils out all weak pointers that point to the * provided object so that they can no longer be used.* * @param weak_table * @param referent The object being deallocated. */void weak_clear_no_lock(weak_table_t *weak_table, id referent_id) &#123;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŽŸç†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[weakSelfå’ŒstrongSelf]]></title>
    <url>%2F2017%2F04%2F08%2FweakSelf%E5%92%8CstrongSelf%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;å‰å‡ å¤©æ°´å®Œäº†__blockï¼Œè¿™æ¬¡æ°´æ°´weakselfå’Œstrongselfå§ 1 ä¸ä½¿ç”¨weak&emsp;&emsp;å¾…æµ‹è¯•ä»£ç 12345678910@implementation Person- (void)test &#123;// __weak typeof(self) weakSelf = self;void (^myblock)(void) = ^&#123;// __strong typeof(weakSelf)self = weakSelf;NSLog(@&quot;%@&quot;,weakSelf);&#125;;myblock();&#125;@end &emsp;&emsp;ä½¿ç”¨clangç¼–è¯‘å‘½ä»¤,å‚è€ƒ:How to use __weak reference in clang?1clang -rewrite-objc -fobjc-arc -stdlib=libc++ -mmacosx-version-min=10.7 -fobjc-runtime=macosx-10.7 -Wno-deprecated-declarations keke.m &emsp;&emsp;æ‰“å¼€ç¼–è¯‘åŽcppæ–‡ä»¶ï¼Œæ‰¾åˆ°@implementation Person1234567891011121314151617struct __Person__test_block_impl_0 &#123;struct __block_impl impl;struct __Person__test_block_desc_0* Desc;Person *const __strong self;__Person__test_block_impl_0(void *fp, struct __Person__test_block_desc_0 *desc, Person *const __strong _self, int flags=0) : self(_self) &#123;impl.isa = &amp;_NSConcreteStackBlock;impl.Flags = flags;impl.FuncPtr = fp;Desc = desc;&#125;&#125;;static void _I_Person_test(Person * self, SEL _cmd) &#123;void (*myblock)(void) = ((void (*)())&amp;__Person__test_block_impl_0((void *)__Person__test_block_func_0, &amp;__Person__test_block_desc_0_DATA, self, 570425344));((void (*)(__block_impl *))((__block_impl *)myblock)-&gt;FuncPtr)((__block_impl *)myblock);&#125; &emsp;&emsp;é€šè¿‡ç¼–è¯‘åŽæºç å¾—çŸ¥ï¼Œä¸ä½¿ç”¨weakæ—¶ï¼ŒBlockæ•èŽ·selfï¼Œå¹¶å¼ºæŒæœ‰! è¿™æ—¶å¦‚æžœselfä¹ŸæŒæœ‰Blockï¼Œå°±ä¼šé€ æˆå¾ªçŽ¯å¼•ç”¨1Person *const __strong self; 2 ä½¿ç”¨weakself&emsp;&emsp;åˆ é™¤ä¸Šé¢weakçš„æ³¨é‡Šï¼Œä½¿ç”¨clangç¼–è¯‘ &emsp;&emsp;æ‰“å¼€ç¼–è¯‘åŽcppæ–‡ä»¶ï¼Œæ‰¾åˆ°@implementation Personã€‚æ‰¾åˆ°weakselfç›¸å…³ä»£ç 123456789101112131415161718struct __Person__test_block_impl_0 &#123;struct __block_impl impl;struct __Person__test_block_desc_0* Desc;Person *const __weak weakSelf;__Person__test_block_impl_0(void *fp, struct __Person__test_block_desc_0 *desc, Person *const __weak _weakSelf, int flags=0) : weakSelf(_weakSelf) &#123;impl.isa = &amp;_NSConcreteStackBlock;impl.Flags = flags;impl.FuncPtr = fp;Desc = desc;&#125;&#125;;static void _I_Person_test(Person * self, SEL _cmd) &#123;__attribute__((objc_ownership(weak))) typeof(self) weakSelf = self;void (*myblock)(void) = ((void (*)())&amp;__Person__test_block_impl_0((void *)__Person__test_block_func_0, &amp;__Person__test_block_desc_0_DATA, weakSelf, 570425344));((void (*)(__block_impl *))((__block_impl *)myblock)-&gt;FuncPtr)((__block_impl *)myblock);&#125; &emsp;&emsp;objc_ownershipå­—é¢æ„æ€æ˜¯ï¼šå¯¹è±¡çš„æ‰€æœ‰æƒï¼Œå³Blockä¸­weakSelfçš„æ‰€æœ‰æƒä¸ºweak 3 ä½¿ç”¨weakselfï¼Œä¹Ÿä½¿ç”¨strongself&emsp;&emsp;åˆ é™¤ä¸Šé¢weakå’Œstrongçš„æ³¨é‡Šï¼Œä½¿ç”¨clangç¼–è¯‘ &emsp;&emsp;æ‰“å¼€ç¼–è¯‘åŽcppæ–‡ä»¶ï¼Œæ‰¾åˆ°@implementation Personã€‚123456789101112131415161718192021222324252627/***********è¿™æ®µå’Œ2 åªæœ‰weakæ²¡strongæ—¶ä¸€æ ·************/struct __Person__test_block_impl_0 &#123;struct __block_impl impl;struct __Person__test_block_desc_0* Desc;Person *const __weak weakSelf;__Person__test_block_impl_0(void *fp, struct __Person__test_block_desc_0 *desc, Person *const __weak _weakSelf, int flags=0) : weakSelf(_weakSelf) &#123;impl.isa = &amp;_NSConcreteStackBlock;impl.Flags = flags;impl.FuncPtr = fp;Desc = desc;&#125;&#125;;static void _I_Person_test(Person * self, SEL _cmd) &#123;__attribute__((objc_ownership(weak))) typeof(self) weakSelf = self;void (*myblock)(void) = ((void (*)())&amp;__Person__test_block_impl_0((void *)__Person__test_block_func_0, &amp;__Person__test_block_desc_0_DATA, weakSelf, 570425344));((void (*)(__block_impl *))((__block_impl *)myblock)-&gt;FuncPtr)((__block_impl *)myblock);&#125;/***********è¿™æ®µå’Œ2 åªæœ‰weakæ²¡strongæ—¶ä¸€æ ·************/static void __Person__test_block_func_0(struct __Person__test_block_impl_0 *__cself) &#123;Person *const __weak weakSelf = __cself-&gt;weakSelf; // bound by copy__attribute__((objc_ownership(strong))) typeof(weakSelf)self = weakSelf;NSLog((NSString *)&amp;__NSConstantStringImpl__var_folders_gb__20zxxjd0p318c5gng983b6r0000gp_T_person_883428_mi_0,self);&#125; &emsp;&emsp;ç»¼ä¸ŠBlockæ•èŽ·selfæ—¶æ˜¯weakçš„ï¼Œè¿™æ ·èƒ½æ‰“ç ´å¾ªçŽ¯å¼•ç”¨ï¼Œåœ¨Blockå‡½æ•°å†…éƒ¨åˆå¯¹selfå£°æ˜Žæ‰€æœ‰æƒä¸ºstrongï¼Œæ­¤æ—¶strongselfçš„ç”Ÿå‘½å‘¨æœŸåŒBlockå‡½æ•°ç”Ÿå‘½å‘¨æœŸä¸€ç›´ï¼Œä¿è¯äº†åœ¨Blackå‡½æ•°å†…éƒ¨selfæ˜¯å­˜åœ¨çš„ 4 weakselfæ˜¯ä¸æ˜¯å¿…é¡»çš„ï¼Ÿ&emsp;&emsp;å…ˆçŒ®ä¸Šå¤§ç¥žçš„æ–‡ç« ï¼š ä½¿ç”¨ Heap-Stack Dance æ›¿ä»£ Weak-Strong Danceï¼Œä¼˜é›…é¿å¼€å¾ªçŽ¯å¼•ç”¨ &emsp;&emsp;åŽŸç†ï¼šåˆ©ç”¨äº†â€œå‚æ•°â€çš„ç‰¹æ€§ï¼šå‚æ•°æ˜¯å­˜æ”¾åœ¨æ ˆä¸­çš„(æˆ–å¯„å­˜å™¨ä¸­)ï¼Œç³»ç»Ÿè´Ÿè´£å›žæ”¶ï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒã€‚å› ä¸ºè§£å†³é—®é¢˜çš„æ€è·¯æ˜¯ï¼šå°† block ä¼šæ•èŽ·å˜é‡åˆ°å †ä¸Šçš„é—®é¢˜ï¼ŒåŒ–è§£ä¸ºäº†ï¼šå˜é‡ä¼šè¢«åˆ†é…åˆ°æ ˆ(æˆ–å¯„å­˜å™¨ä¸­)ä¸Š &emsp;&emsp;å®žçŽ°æ–¹æ³•å°±æ˜¯ï¼šæŠŠselfå½“åšå‚æ•°æ‰‹åŠ¨ä¼ ç»™blockï¼Œè€Œä¸æ˜¯é€šè¿‡Blockçš„è¢«åŠ¨åŽ»æ•èŽ·self &emsp;&emsp;å…¶å®žæˆ‘ä»¬ä¸€ç›´åœ¨ç”¨åªæ˜¯æ²¡æœ‰æ³¨æ„åˆ°ï¼Œä¾‹å¦‚FMDBé‡Œ123456789- (void)inDatabase:(__attribute__((noescape)) void (^)(FMDatabase *db))block;- (void)inTransaction:(__attribute__((noescape)) void (^)(FMDatabase *db, BOOL *rollback))block;- (void)inDeferredTransaction:(__attribute__((noescape)) void (^)(FMDatabase *db, BOOL *rollback))block;- (void)inExclusiveTransaction:(__attribute__((noescape)) void (^)(FMDatabase *db, BOOL *rollback))block;- (void)inImmediateTransaction:(__attribute__((noescape)) void (^)(FMDatabase *db, BOOL *rollback))block; 5 @weakifyå’Œ@strongify&emsp;&emsp;å†™åˆ°weakselfå°±ä¸å¾—ä¸æåˆ°RACçš„@weakifyå’Œ@strongifyï¼è¯´æ¥æƒ­æ„§ï¼ŒæŽ¥è§¦RACå¾ˆé•¿ä¸€æ®µæ—¶é—´äº†ï¼Œæºç ä¹Ÿç ”ç©¶è¿‡ä¸€äº›ï¼ä½†å§‹ç»ˆä¹Ÿæ²¡å†™å‡ºç‚¹ä»€ä¹ˆï¼æ•´ä½“æ¡†æž¶å¤ªå¤§ï¼Œå†™ä¸äº†ï¼ç»†èŠ‚åˆå¤ªå°ï¼Œåˆä¸æƒ³å†™â€¦â€¦ &emsp;&emsp;å…ˆçœ‹çœ‹ä¸€èˆ¬æƒ…å†µä¸‹æ€Žä¹ˆå†™12#define BBWeakSelf(type) __weak typeof(type) weak##type = type#define BBStrongSelf(type) __strong typeof(type) type = weak##type &emsp;&emsp;æ˜¯ä¸æ˜¯å¾ˆlouï¼ŸçŽ°åœ¨æ‰“å¼€RACEXTScope.hæ–‡ä»¶ï¼Œæ‰¾åˆ°12345678910#define weakify(...) \rac_keywordify \metamacro_foreach_cxt(rac_weakify_,, __weak, __VA_ARGS__)#define strongify(...) \rac_keywordify \_Pragma(&quot;clang diagnostic push&quot;) \_Pragma(&quot;clang diagnostic ignored \&quot;-Wshadow\&quot;&quot;) \metamacro_foreach(rac_strongify_,, __VA_ARGS__) \_Pragma(&quot;clang diagnostic pop&quot;) &emsp;&emsp;å…ˆçœ‹rac_keywordifyï¼Œä½œç”¨æ˜¯æ·»åŠ @ç¬¦å·ï¼Œè¿™ä¹Ÿæ˜¯æ¯”BBWeakSelfç‰›é€¼çš„ä¸æ­¢ä¸€ç‚¹ç‚¹ï¼12345678910111213141516// Details about the choice of backing keyword://// The use of @try/@catch/@finally can cause the compiler to suppress// return-type warnings.// The use of @autoreleasepool &#123;&#125; is not optimized away by the compiler,// resulting in superfluous creation of autorelease pools.//// Since neither option is perfect, and with no other alternatives, the// compromise is to use @autorelease in DEBUG builds to maintain compiler// analysis, and to use @try/@catch otherwise to avoid insertion of unnecessary// autorelease pools.#if DEBUG#define rac_keywordify autoreleasepool &#123;&#125;#else#define rac_keywordify try &#123;&#125; @catch (...) &#123;&#125;#endif &emsp;&emsp;metamacro_foreachæœ€åŽä¹Ÿæ˜¯è°ƒçš„metamacro_foreach_cxtï¼Œç‚¹åˆ°æœ€åŽå‘çŽ°æ˜¯ A ## B ï¼Œ ## æ˜¯å®è¿žæŽ¥ç¬¦ï¼Œä¼šå°† ## å·¦å³ä¸¤è¾¹è¿žæŽ¥èµ·æ¥ï¼Œæ•´ä½“æ›¿æ¢ä¸‹æ¥æ˜¯12autoreleasepool &#123;&#125;metamacro_foreach_cxt1(rac_weakify_, , __weak, self) &emsp;&emsp;æŽ¥ç€çœ‹rac_weakify_æ˜¯æ€Žä¹ˆå›žäº‹12345#define rac_weakify_(INDEX, CONTEXT, VAR) \CONTEXT __typeof__(VAR) metamacro_concat(VAR, _weak_) = (VAR);#define rac_strongify_(INDEX, VAR) \__strong __typeof__(VAR) VAR = metamacro_concat(VAR, _weak_); &emsp;&emsp;æœ€ç»ˆæ›¿æ¢æˆå¦‚ä¸‹ä»£ç ï¼Œå’Œç¼–è¯‘åŽçš„weakå’Œstrongå‡ ä¹Žä¸€æ¨¡ä¸€æ ·123@autoreleasepool &#123;&#125; __attribute__((objc_ownership(weak))) __typeof__(self) self_weak_ = (self);@autoreleasepool &#123;&#125; __attribute__((objc_ownership(strong))) __typeof__(self) self = self_weak_; &emsp;&emsp;æŠ˜è…¾è¿™ä¹ˆä¸€å¤§åœˆçš„åŽŸå› æ˜¯@weakify(â€¦);å¯ä»¥æ”¯æŒæœ€å¤š20ä¸ªå‚æ•°1* For each consecutive variadic argument (up to twenty) &emsp;&emsp;å‚è€ƒï¼šå‰–æžRACä¸­çš„@weakifyã€@strongify]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŽŸç†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[__block]]></title>
    <url>%2F2017%2F04%2F02%2Fblock%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;æ°´ä¸€æ°´blockåˆ°åº•æ€Žä¹ˆå›žäº‹å§ï¼ &emsp;&emsp;å¾…æµ‹è¯•æ–¹æ³•12345678910#import &lt;Foundation/Foundation.h&gt;int main(int argc, char * argv[]) &#123;__block int age = 10;void (^myblock)(void) = ^&#123;NSLog(@&quot;%d&quot;,age);&#125;;age = 20;myblock();&#125; &emsp;&emsp;clangç¼–è¯‘æˆC++,å‚è€ƒï¼šHow to translate Objective-C code to C++ with ARC enabling1clang -rewrite-objc main.m &emsp;&emsp;æ‰“å¼€mian.cppæ–‡ä»¶æ‹‰åˆ°æœ€åŽå‘çŽ°å¦‚ä¸‹ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041struct __Block_byref_age_0 &#123;void *__isa;__Block_byref_age_0 *__forwarding;int __flags;int __size;int age;&#125;;struct __main_block_impl_0 &#123;struct __block_impl impl;struct __main_block_desc_0* Desc;__Block_byref_age_0 *age; // by ref__main_block_impl_0(void *fp, struct __main_block_desc_0 *desc, __Block_byref_age_0 *_age, int flags=0) : age(_age-&gt;__forwarding) &#123;impl.isa = &amp;_NSConcreteStackBlock;impl.Flags = flags;impl.FuncPtr = fp;Desc = desc;&#125;&#125;;static void __main_block_func_0(struct __main_block_impl_0 *__cself) &#123;__Block_byref_age_0 *age = __cself-&gt;age; // bound by refNSLog((NSString *)&amp;__NSConstantStringImpl__var_folders_gb__20zxxjd0p318c5gng983b6r0000gp_T_main_8a7d1e_mi_0,(age-&gt;__forwarding-&gt;age));&#125;static void __main_block_copy_0(struct __main_block_impl_0*dst, struct __main_block_impl_0*src) &#123;_Block_object_assign((void*)&amp;dst-&gt;age, (void*)src-&gt;age, 8/*BLOCK_FIELD_IS_BYREF*/);&#125;static void __main_block_dispose_0(struct __main_block_impl_0*src) &#123;_Block_object_dispose((void*)src-&gt;age, 8/*BLOCK_FIELD_IS_BYREF*/);&#125;static struct __main_block_desc_0 &#123;size_t reserved;size_t Block_size;void (*copy)(struct __main_block_impl_0*, struct __main_block_impl_0*);void (*dispose)(struct __main_block_impl_0*);&#125; __main_block_desc_0_DATA = &#123; 0, sizeof(struct __main_block_impl_0), __main_block_copy_0, __main_block_dispose_0&#125;;int main(int argc, char * argv[]) &#123;__attribute__((__blocks__(byref))) __Block_byref_age_0 age = &#123;(void*)0,(__Block_byref_age_0 *)&amp;age, 0, sizeof(__Block_byref_age_0), 10&#125;;void (*myblock)(void) = ((void (*)())&amp;__main_block_impl_0((void *)__main_block_func_0, &amp;__main_block_desc_0_DATA, (__Block_byref_age_0 *)&amp;age, 570425344));(age.__forwarding-&gt;age) = 20;((void (*)(__block_impl *))((__block_impl *)myblock)-&gt;FuncPtr)((__block_impl *)myblock);&#125;static struct IMAGE_INFO &#123; unsigned version; unsigned flag; &#125; _OBJC_IMAGE_INFO = &#123; 0, 2 &#125;; &emsp;&emsp;ç›´æŽ¥çœ‹mainå‡½æ•°ï¼Œå¯çŸ¥ä½¿ç”¨ blockåŽç¼–è¯‘å™¨å°†ageåŒ…è£…æˆ Block_byref_age_0å¯¹è±¡1234567struct __Block_byref_age_0 &#123;void *__isa; // ageç±»åž‹__Block_byref_age_0 *__forwarding; // é‡å®šä½ç”¨int __flags;int __size; // å†…å­˜å¤§å°int age; // å®žé™…ä¸Šçš„age&#125;; &emsp;&emsp;å†çœ‹myblockçš„æž„æˆ1void (*myblock)(void) = ((void (*)())&amp;__main_block_impl_0((void *)__main_block_func_0, &amp;__main_block_desc_0_DATA, (__Block_byref_age_0 *)&amp;age, 570425344)); &emsp;&emsp;æ ¸å¿ƒæ˜¯__main_block_impl_01234567891011struct __main_block_impl_0 &#123;struct __block_impl impl; struct __main_block_desc_0* Desc;__Block_byref_age_0 *age; // by ref__main_block_impl_0(void *fp, struct __main_block_desc_0 *desc, __Block_byref_age_0 *_age, int flags=0) : age(_age-&gt;__forwarding) &#123;impl.isa = &amp;_NSConcreteStackBlock;impl.Flags = flags;impl.FuncPtr = fp;Desc = desc;&#125;&#125;; &emsp;&emsp;__block_implæ˜¯blockçš„å…·ä½“ç±»åž‹123456struct __block_impl &#123;void *isa; // blockç±»åž‹ï¼Œåˆ†ä¸º3ç±»ï¼š__NSGlobalBlock__å…¨å±€åŒºï¼›__NSStackBlock__ æ ˆåŒºï¼›__NSMallocBlock__ å †åŒºint Flags; // æ ‡å¿—ä½int Reserved; // è¿™é‡Œä¸ºvoidvoid *FuncPtr; // blockå—é‡Œå…·ä½“æ‰§è¡Œä»£ç çš„åŒ¿åå‡½æ•°&#125;; &emsp;&emsp;main_block_func_0æ˜¯å…·ä½“å®žçŽ°çš„åŒ¿åå‡½æ•°ï¼›main_block_desc_0_DATAè¡¨ç¤ºå¯¹blockå†…éƒ¨å‚æ•°å˜é‡ç­‰çš„å¼•ç”¨è®¡æ•°ç®¡ç†(å¯éšä¾¿åŠ ä¸ªå˜é‡æ£€éªŒä¾‹å¦‚ __block int age = 10; ) &emsp;&emsp;ç»¼ä¸Šmain_block_impl_0å­˜å‚¨äº†blockæ•èŽ·çš„å¤–éƒ¨å˜é‡ageå¹¶åŒ…è£…äº†ä¸‹ï¼è¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆç”¨blockä¿®é¥°çš„å˜é‡å¯ä»¥åœ¨blockå†…éƒ¨ä¿®æ”¹ï¼Blockåªæœ‰çš„æ˜¯Block_byref_age_0å¯¹è±¡ï¼Œæ­¤å¯¹è±¡ä¸å¯å˜ï¼›ä½†Block_byref_age_0é€šè¿‡(age.forwarding-&gt;age) = 20;çš„æ–¹å¼å¯ä»¥æ“çºµ__Block_byref_age_0å¯¹è±¡å†…éƒ¨çš„ageå¯¹è±¡çš„æ•°å€¼]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŽŸç†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[__attribute__ç¬”è®°]]></title>
    <url>%2F2017%2F03%2F21%2Fattribute-%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[1 format123456#define NS_FORMAT_FUNCTION(F,A) __attribute__((format(__NSString__, F, A)))// â€œarchetypeâ€æŒ‡å®šæ˜¯å“ªç§é£Žæ ¼,è¿™é‡Œæ˜¯NSStringï¼›// â€œstring-indexâ€æŒ‡å®šä¼ å…¥å‡½æ•°çš„ç¬¬å‡ ä¸ªå‚æ•°æ˜¯æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼›// â€œfirst-to-checkâ€æŒ‡å®šç¬¬ä¸€ä¸ªå¯å˜å‚æ•°æ‰€åœ¨çš„ç´¢å¼•.format (archetype, string-index, first-to-check) 2 availability12345NS_DEPRECATED_IOS(2_0, 7_0, &quot;Use -sizeWithAttributes:&quot;)// å®å±•å¼€ä»¥åŽå¦‚ä¸‹__attribute__((availability(ios,introduced=2_0,deprecated=7_0,message=&quot;&quot;__VA_ARGS__)));// ä¾‹- (void)oldMethod:(NSString *)string __attribute__((availability(ios,introduced=2_0,deprecated=7_0,message=&quot;ç”¨ -newMethod: è¿™ä¸ªæ–¹æ³•æ›¿ä»£ &quot;))); 3 unavailable &amp; deprecated&emsp;&emsp;unavailableå‘Šè¯‰ç¼–è¯‘å™¨è¯¥æ–¹æ³•ä¸å¯ç”¨ï¼Œå¦‚æžœå¼ºè¡Œè°ƒç”¨ç¼–è¯‘å™¨ä¼šæç¤ºé”™è¯¯12- (void)method1 NS_UNAVAILABLE;- (void)method2 __attribute__((unavailable(&quot;ä¸èƒ½ç”¨äº†ï¼Œ&quot;))); &emsp;&emsp;deprecatedå‘Šè¯‰ç”¨æˆ·æ–¹æ³•è¢«åºŸå¼ƒï¼Œå¼ºè¡Œç”¨æç¤ºè­¦å‘Š12- (void)method1 DEPRECATED_ATTRIBUTE; - (void)method2:( NSString *)string __attribute__((deprecated(&quot;è­¦å‘Šä¸è¦ç”¨äº†ï¼Œå¯ç”¨xxx&quot;))); 4 nonnull &amp; nullable&emsp;&emsp;å‚è€ƒ1234567// å¯¹äºŽå±žæ€§ã€æ–¹æ³•è¿”å›žå€¼ã€æ–¹æ³•å‚æ•°çš„ä¿®é¥°ï¼Œä½¿ç”¨ï¼šnonnull/nullableï¼›@property(nonatomic, copy, nullable) NSString *str;- (nullable NSString*)method;- (void)formatString:(nullable NSString *)str;// å¯¹äºŽ C å‡½æ•°çš„å‚æ•°ã€Block çš„å‚æ•°ã€Block è¿”å›žå€¼çš„ä¿®é¥°ï¼Œä½¿ç”¨ï¼š_Nonnull/_Nullable- (void)methodWithBlock:(id _Nonnull (^ _Nullable)(id _Nullable params))block; 5 always_inline å¼ºåˆ¶å†…è”ï¼Œå¥½åƒæ²¡å•¥ç”¨12345678910/*å†…è”å‡½æ•°ä¸æ˜¯åœ¨è°ƒç”¨æ—¶å‘ç”ŸæŽ§åˆ¶è½¬ç§»(æ²¡æœ‰å¯»å€ã€åŽ‹æ ˆå…¥æ ˆç­‰æ“ä½œ)ï¼Œè€Œæ˜¯åœ¨ç¼–è¯‘æ—¶å°†å‡½æ•°ä½“åµŒå…¥åœ¨æ¯ä¸€ä¸ªè°ƒç”¨å¤„å¥½å¤„æ˜¯:å¿«ä»£ç çš„æ‰§è¡Œï¼Œå‡å°‘ç³»ç»Ÿå¼€é”€.é€‚ç”¨åœºæ™¯:A è¿™ä¸ªå‡½æ•°æ›´å°;Bè¿™ä¸ªå‡½æ•°ä¸è¢«ç»å¸¸è°ƒç”¨*/ // å†…è”å‡½æ•°çš„ä¸€èˆ¬å†™æ³•static inline void af_swizzleSelector(Class theClass, SEL originalSelector, SEL swizzledSelector) &#123;Method originalMethod = class_getInstanceMethod(theClass, originalSelector);Method swizzledMethod = class_getInstanceMethod(theClass, swizzledSelector);method_exchangeImplementations(originalMethod, swizzledMethod);&#125; 6 objc_requires_super&emsp;&emsp;å­ç±»å¤å†™çˆ¶ç±»æ–¹æ³•æ—¶å¿…é¡»è°ƒç”¨çˆ¶ç±»æ–¹æ³•1234567891011121314@interface Father : NSObject- (void)hailHydra __attribute__((objc_requires_super));@end@implementation Father- (void)hailHydra &#123;NSLog(@&quot;hail hydra!&quot;);&#125;@end@interface Son : Father@end@implementation Son- (void)hailHydra &#123;&#125; // &lt;--- Warning missing [super hailHydra]@end 7 cleanup&emsp;&emsp;å£°æ˜Žåˆ°ä¸€ä¸ªå˜é‡ä¸Šï¼Œå½“è¿™ä¸ªå˜é‡ä½œç”¨åŸŸç»“æŸæ—¶ï¼Œè°ƒç”¨æŒ‡å®šçš„ä¸€ä¸ªå‡½æ•°ï¼1234567891011121314- (void)test&#123;int a __attribute__((cleanup(intCleanup))) = 10;&#125;/*æ³¨æ„ç‚¹:æŒ‡å®šçš„å‡½æ•°ä¼ é€’çš„å‚æ•°æ˜¯å˜é‡çš„åœ°å€ä½œç”¨åŸŸçš„ç»“æŸåŒ…æ‹¬:å¤§æ‹¬å·ç»“æŸã€returnã€gotoã€breakã€exceptionç­‰æƒ…å†µå½“ä½œç”¨åŸŸå†…æœ‰å¤šä¸ªcleanupçš„å˜é‡æ—¶,éµå®ˆ å…ˆå…¥åŽå‡º çš„æ ˆå¼ç»“æž„.*///è¿™é‡Œä¼ é€’çš„å‚æ•°æ˜¯å˜é‡çš„åœ°å€void intCleanup(int *num)&#123;NSLog(@&quot;cleanup------%d&quot;,*num);&#125; &emsp;&emsp;,cleanupå…ˆäºŽå¯¹è±¡çš„deallocæ‰§è¡Œã€‚æ›´å¤šå¯çœ‹é»‘é­”æ³•attribute((cleanup)) 8 objc_subclassing_restricted&esmp;&emsp;ä½¿ç”¨è¿™ä¸ªå±žæ€§å¯ä»¥å®šä¹‰ä¸€ä¸ª Final Classï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªä¸å¯è¢«ç»§æ‰¿çš„ç±»1234__attribute__((objc_subclassing_restricted))@interface Eunuch : NSObject@end// çŽ°åœ¨æ²¡äººèƒ½ç»§æ‰¿Eunuch 9 enable_if&esmp;&emsp;å‚æ•°é™æ€æ£€æŸ¥ï¼Œåªèƒ½ç”¨åœ¨Cå‡½æ•°ä¸Š1234static void printValidAge(int age)__attribute__((enable_if(age &gt; 0 &amp;&amp; age &lt; 120, &quot;ä½ ä¸«ç«æ˜Ÿäººï¼Ÿ&quot;))) &#123;printf(&quot;%d&quot;, age);&#125; 10 overloadable&esmp;&emsp;Cå‡½æ•°å®žçŽ°ç±»ä¼¼javaçš„é‡è½½1234567__attribute__((overloadable)) void print(NSString *string)&#123;NSLog(@&quot;%@&quot;,string);&#125;__attribute__((overloadable)) void print(int num)&#123;NSLog(@&quot;%d&quot;,num);&#125; å‚è€ƒ Clang Attributes é»‘é­”æ³•å°è®° attribute æ€»ç»“ Objective-C ä¸­ nullableã€__nullableã€_Nullable çš„åŒºåˆ«]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RNåˆ†äº«ä¹‹åŽ]]></title>
    <url>%2F2017%2F03%2F11%2FRN%E5%88%86%E4%BA%AB%E4%B9%8B%E5%90%8E%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;RNå‡ºæ¥ä¹‹åŽï¼Œæˆ‘è‡ªå·±å­¦è¿‡ï¼Œå½“æ—¶ä¸ºäº†å­¦RNï¼Œè¿˜ä¸“é—¨å¤ä¹ äº†æ—©å°±å¿˜è®°çš„JavaScriptï¼Œä½†ä¸€ç›´æ²¡æœ‰æ­£å¼ç”¨åˆ°é¡¹ç›®ä¸Šï¼Œä»…é™äºŽè‡ªå·±å­¦ä¹ ï¼æ¥åº¦åŽ‚ä¹‹åŽæ­£å¥½ç»„å†…è¿˜æ²¡äººåˆ†äº«è¿‡RNçš„ä½¿ç”¨ï¼Œå°±å€Ÿè¿™ä¸ªæœºä¼šå¯¹RNè¿›è¡Œç®€å•çš„ä»‹ç»ï¼é¢„è®¡åˆ†äº«æ—¶é—´ä¸€ä¸ªå°æ—¶ï¼Œä¸»è¦å¬ä¼—æ˜¯iOSç«¥éž‹ã€å®‰å“ç«¥éž‹ä»¥åŠéƒ¨åˆ†FEç«¥éž‹ï¼ä½†æ•´ä¸ªåˆ†äº«è¿‡åŽï¼Œåº”è€…å¯¥å¯¥ï¼Œç”šè‡³å‡ºçŽ°äº†çŸ­æ—¶é—´çš„æ²‰é»˜ï¼Œä¸å¾—ä¸æå‰å‡ åˆ†é’Ÿå·¦å³ç»ˆæ­¢äº†åˆ†äº«ï¼å½“ç„¶å¼•å…¥RNè¿™ä»¶äº‹ä¹Ÿéšä¹‹åŒ–ä¸ºæ³¡å½±ï¼è™½ç„¶ä¼šåŽé¢†å¯¼è¿˜æ˜¯å¯¹æˆ‘çš„åˆ†äº«è¡¨ç¤ºäº†èµžæ‰¬ï¼Œä½†ä½œä¸ºè¯•ç”¨æœŸçš„ç¬¬ä¸€æ¬¡â€œéœ²è„¸â€è¿˜æ˜¯æ¯”è¾ƒå°´å°¬çš„ï¼ &emsp;&emsp;ä¼šåŽæˆ‘å¯¹åˆ†äº«å†…å®¹è¿›è¡Œäº†åæ€ï¼šé¦–å…ˆæˆ‘åˆ†äº«çš„æ˜¯RNå…¥é—¨çº§çŸ¥è¯†ï¼Œå¹¶æ²¡æœ‰ä»‹ç»JavaScriptè¯­è¨€ç»†èŠ‚ï¼Œä¹Ÿæ²¡æœ‰æ·±å…¥åŽ»æŽ¢è®¨RNçš„é«˜çº§ç”¨æ³•ï¼Œå¯¹äºŽæœ‰ä¸¤ä¸‰å¹´å¼€å‘ç»éªŒçš„RDåº”è¯¥ä¸å­˜åœ¨â€œé¸¿æ²Ÿâ€ï¼›å…¶æ¬¡æˆ‘ä¸»è¦ä»‹ç»RNçš„ä½¿ç”¨ä»¥åŠä¼˜åŠ¿ã€åŠ£åŠ¿å’Œå¼•å…¥æˆæœ¬ï¼Œä¼˜åŠ¿åŠ£åŠ¿å¼•å…¥æˆæœ¬è¿™äº›ä¸œè¥¿éƒ½ä¸æ¶‰åŠåˆ°å…·ä½“ä»£ç éƒ½æ˜¯ç†è®ºä¸Šçš„ä¸œè¥¿ï¼Œå¤§å¤šæ•°äººéƒ½åº”è¯¥èƒ½å¬æ‡‚ï¼›æœ€åŽæˆ‘çš„åˆ†äº«èŒƒå›´å¾ˆå°ï¼Œä»…é™äºŽå¤§å‰ç«¯ç»„å†…ç«¥éž‹çš„åå‡ ä¸ªäººï¼è€Œä¸”åœ¨æ•´ä¸ªåˆ†äº«è¿‡ç¨‹ä¸­æˆ‘è®¤ä¸ºæˆ‘æŠŠæˆ‘ç½—åˆ—çš„æçº²ï¼ŒåŸºæœ¬ä¸Šéƒ½è¯´å®Œäº†ï¼› &emsp;&emsp;å†åŽæ¥ä¸ŽåŒäº‹é—²èŠæ—¶å‘çŽ°ï¼Œæœ€å¤§çš„é—®é¢˜åœ¨äºŽï¼ŒiOSã€å®‰å“å’ŒFEç«¥éž‹ï¼Œä¸‰ä¸ªç«¯çš„åŒå­¦éƒ½åªçœ‹æ˜Žç™½ä¸€éƒ¨åˆ†ï¼šiOSå’Œå®‰å“ç«¥éž‹å¤§æ¦‚çœ‹æ˜Žç™½ç•Œé¢å±•ç¤ºï¼Œä½†å¯¹äºŽjavascriptåˆ™ä¸€çŸ¥åŠè§£ï¼›FEç«¥éž‹æ­£å¥½ç›¸åï¼›å¦‚æžœè¦å¼•å…¥RNï¼ŒiOSå’Œå®‰å“åŒå­¦éœ€è¦å­¦ä¹ javaScript, è€ŒFEç«¥éž‹åˆ™å¯èƒ½éœ€è¦äº†è§£iOSå’Œå®‰å“çŸ¥è¯†ï¼›å…¶å®žåªæ˜¯å­¦ä¹ æ–°è¯­è¨€å¯¹ç¨‹åºçŒ¿è€Œè¨€å¹¶ä¸æ˜¯ä»€ä¹ˆå¤§äº‹ï¼Œç¨‹åºçŒ¿æ¯å¤©éƒ½åœ¨å­¦ä¹ æ–°ä¸œè¥¿ï¼éº»çƒ¦çš„æ˜¯ä½¿ç”¨å’Œå­¦ä¹ RNï¼Œå¾ˆå¯èƒ½è¦å¯¹Javascriptã€iOSå’Œå®‰å“éƒ½æœ‰æ‰€æ¶‰çŒŽæ‰è¡Œï¼Œå¼ºç±»åž‹ä¸Žå¼±ç±»åž‹ä¹‹äº‰ã€å„ç§ç‰ˆæœ¬çš„iOSå®‰å“ç³»ç»Ÿçš„å‘ï¼Œå›°éš¾çš„è°ƒè¯•ç­‰é—®é¢˜å·²è¶³ä»¥è®©å›¢é˜Ÿæˆå‘˜æ”¾å¼ƒRNï¼Œæ›´ä½•å†µè¿˜æœ‰ä¸€æ¡åä¸‡åˆ†ä¹‹äºŒçš„crashçº¢çº¿â€¦ &emsp;&emsp;è¯´åˆ°åº•è¿™æ¬¡åˆ†äº«å†·åœºè¿˜æ˜¯è‡ªå·±çš„é—®é¢˜ï¼šé€‰é¢˜ä¸å¤ªå¥½ã€é—®é¢˜è€ƒè™‘çš„ä¸å¤ªå……åˆ†ã€æ²¡æœ‰æ­£ç¡®è®¤æ¸…äº§å“çŽ°çŠ¶ &emsp;&emsp;PS: å…¶å®žè¿™æ¬¡æˆ‘æœ¬æ¥æ‰“ç®—æ°´ä¸€æ°´RNçš„åŸºæœ¬ä½¿ç”¨ï¼Œä½†ç»åŽ†äº†å¤±è´¥çš„åˆ†äº«ï¼Œæ ‡é¢˜ä¹Ÿä»ŽRNå…¥é—¨å˜æˆäº†RNåˆ†äº«ä¹‹åŽï¼Œä½†ä¸ç®¡æ€Žæ ·ï¼ä¹Ÿç®—æ°´äº†ä¸€ç¯‡å§]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>å…¶ä»–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Gitå¸¸ç”¨æ“ä½œ]]></title>
    <url>%2F2017%2F03%2F02%2FGit%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;è¯´æ¥ä¹Ÿå¥‡è‘©ï¼Œå·¥ä½œäº†å¥½å‡ å¹´ä¸€ç›´ç”¨çš„svnï¼ŒGitåªæ˜¯å¬è¯´è¿‡æ²¡æœ‰è¿‡ï¼æ¥äº†åº¦åŽ‚å‘çŽ°éƒ½æ˜¯ç”¨çš„Gitï¼ˆç”šè‡³ç ç¥žè®­ç»ƒè¥è¿˜ä¸“é—¨è®²Gitçš„ä½¿ç”¨ï¼‰æ…¢æ…¢çš„æ‰å‘çŽ°GitçœŸå¥½ç”¨ï¼è¿™ä¸åˆä¸çŸ¥é“æ°´ä»€ä¹ˆäº†ï¼Œæ‹¿Gitå……æ•°å§ Git&emsp;&emsp;Gitæ˜¯ç›®å‰ä¸–ç•Œä¸Šæœ€å…ˆè¿›çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿï¼Linusï¼ˆåˆ›å»ºLinuxçš„å¤§ç‰›ï¼‰èŠ±äº†ä¸¤å‘¨æ—¶é—´ç”¨Cè¯­è¨€å†™äº†Gitï¼è€Œæˆ‘èŠ±äº†ä¸¤å‘¨éƒ½æ²¡å­¦ä¼šæ€Žä¹ˆç”¨ï¼ï¼ï¼ &emsp;&emsp;Macä¸Šå®‰è£…Gitæœ€ç®€å•çš„æ–¹å¼ï¼šå®‰è£…XCodeï¼Œè¿è¡ŒXcodeï¼Œé€‰æ‹©èœå•â€œXcodeâ€-&gt;â€œPreferencesâ€ï¼Œåœ¨å¼¹å‡ºçª—å£ä¸­æ‰¾åˆ°â€œDownloadsâ€ï¼Œé€‰æ‹©â€œCommand Line Toolsâ€ï¼Œç‚¹â€œInstallâ€å°±å¯ä»¥å®Œæˆå®‰è£…äº†ã€‚ &emsp;&emsp;æŽ¨èä½¿ç”¨SourceTreeç®¡ç†Gitï¼Œç®€å•ã€å¼ºå¤§åˆå…è´¹ï¼ä¼šç”¨SourceTreeçš„å¯ä»¥ä¸ç”¨çœ‹äº†ï¼ Gitå‘½ä»¤&emsp;&emsp;å®‰åˆ©ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼šiTermï¼Œæ„Ÿè§‰æ¯”è‡ªå¸¦çš„å¥½ åˆå§‹åŒ–ä¸€ä¸ªGitä»“åº“ 12// åˆ‡æ¢åˆ°ä¸€ä¸ªç›®å½•ï¼Œåˆ›å»ºç›®å½•åŒåä»“åº“git init æ·»åŠ æ–‡ä»¶åˆ°Gitä»“åº“ï¼Œåˆ†ä¸¤æ­¥ï¼š 1234567891011// æ”¾åˆ°æš‚å­˜åŒºgit add &lt;file&gt; æ·»åŠ ï¼Œå¯ä¸€æ¬¡æ·»åŠ å¤šä¸ªæ–‡ä»¶ï¼Œä¹Ÿå¯æ·»åŠ å¤šæ¬¡git add . æ·»åŠ æ‰€æœ‰ä¿®æ”¹æ–‡ä»¶// æäº¤åˆ°åˆ†æ”¯git commit -m &lt;message&gt; æäº¤ï¼Œmessageä¸ºå¤‡æ³¨// åˆå¹¶ä¸Šæ¬¡å’Œè¿™ä¸€æ¬¡ä¿®æ”¹åŽçš„ï¼Œä¸€èµ·æäº¤git commit --amend// æŠŠæœ¬åœ°åº“çš„å†…å®¹æŽ¨é€åˆ°è¿œç¨‹git push origin çŠ¶æ€ 1234// ä»“åº“å½“å‰çš„çŠ¶æ€git status// æŸ¥çœ‹æ–‡ä»¶ä¿®æ”¹å†…å®¹git diff &lt;file&gt; æŸ¥çœ‹åŽ†å²è®°å½• 1234567891011git log// ç®€åŒ–è¾“å‡ºä¿¡æ¯git log --pretty=oneline// æŸ¥è¯¢ç»“æžœå¦‚ä¸‹// HEADè¡¨ç¤ºå½“å‰ç‰ˆæœ¬ xxxxxå’Œyyyyæ˜¯åˆšæ‰commitçš„message9e5d99cf787fe37967247e67afce4e4686a3eeab (HEAD -&gt; Test1.4.2, origin/Test1.4.2) Motify xxxxxxxxxccacbbdd367438350515c55e26563b5f47a59e1f modify yyyyyyyyæŸ¥è¯¢è‡ªå·±ç”¨è¿‡çš„å‘½ä»¤ä¸æ˜¯æäº¤è®°å½•ï¼ˆä¸è¦ç”¨ä¸Šä¸‹é”®å•¦ï¼‰git reflog å¼ºåˆ¶ç‰ˆæœ¬å›žæ»š 1git reset --hard ccacbbdd367438350 ä¸€é”®è¿˜åŽŸ 123456// åªå›žæ»šå·¥ä½œåŒº// å¦‚æžœæš‚å­˜åŒºæœ‰ä¸œè¥¿ï¼ˆå³addè¿‡ï¼‰å›žæ»šåˆ°æš‚å­˜åŒºçŠ¶æ€ï¼›å¦‚æžœæš‚å­˜åŒºæ²¡ä¸œè¥¿ï¼Œå›žæ»šçº¿ä¸ŠçŠ¶æ€git checkout -- &lt;file&gt; // ä¸¤ä¸ªæ¨ªçº¿// ä¸€é”®è¿˜åŽŸå·¥ä½œåŒºå’Œæš‚å­˜åŒºæ–‡ä»¶git reset HEAD &lt;file&gt; åˆ é™¤æ–‡ä»¶ï¼ˆå…¶å®žæˆ‘ä¸€ç›´éƒ½æ˜¯ç›´æŽ¥addæ¥æ“ä½œçš„ï¼‰ 1ç”¨å‘½ä»¤git rmåˆ æŽ‰ï¼Œå¹¶ä¸”git commit åˆ†æ”¯ 12345678910111213141516171819// æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯git branch// æŸ¥çœ‹æœ¬åœ°å’Œè¿œç¨‹æ‰€æœ‰åˆ†æ”¯git branch -a// åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æœ¬åœ°åˆ†æ”¯devgit checkout -b dev // æ³¨æ„ä¸€ä¸ªæ¨ªçº¿// åˆ‡æ¢å›žmasteråˆ†æ”¯// ä¸€èˆ¬åº”ä¿è¯masteræ˜¯éžå¸¸ç¨³å®šçš„,å¹²æ´»éƒ½åœ¨devåˆ†æ”¯ä¸Šï¼Œdevåˆ†æ”¯æ˜¯ä¸ç¨³å®šçš„// Gitå·¥ä½œåŒºæœªæäº¤ä»£ç ï¼Œåˆ‡æ¢åˆ†æ”¯æ—¶ï¼Œèƒ½æäº¤çš„è¯å°±addå¹¶commitä¸€èµ·å…ˆæäº¤äº†ï¼Œä¸æäº¤çš„å°±stashä¿å­˜ä¸€ä¸‹ï¼Œå°±å¯ä»¥åˆ‡æ¢äº†git checkout master// åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ï¼Œä¸èƒ½çœ‹å‡ºæ¥git merge dev// åˆå¹¶åˆ†æ”¯ï¼Œèƒ½çœ‹å‡ºæ¥ï¼æŽ¨ègit merge --no-ff // æœ‰å†²çª &lt;&lt;&lt;&lt;&lt;&lt;&lt;ï¼Œ=======ï¼Œ&gt;&gt;&gt;&gt;&gt;&gt;&gt; å¿…é¡»é¦–å…ˆè§£å†³å†²çªï¼Œå†æäº¤ï¼Œåˆå¹¶å®Œæˆã€‚// æŸ¥çœ‹åˆ†æ”¯åˆå¹¶å›¾git log --graph// åˆ é™¤åˆ†æ”¯git branch -d &lt;name&gt; æš‚å­˜å·¥ä½œåŒºä¿®æ”¹ 123456// æš‚å­˜git stash// æŸ¥çœ‹æ‰€æœ‰æš‚å­˜git stash list// ä»Žæš‚å­˜ä¸­æ¢å¤git stash pop æ‹‰å–ä»£ç  123git pull// å¦‚æžœgit pullæç¤ºno trackinginformationï¼Œåˆ™è¯´æ˜Žæœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯çš„é“¾æŽ¥å…³ç³»æ²¡æœ‰åˆ›å»ºï¼Œç”¨å‘½ä»¤git branch --set-upstream-to &lt;branch-name&gt; origin/&lt;branch-name&gt; æ ‡ç­¾ 12345678// æ–°å»ºæ ‡ç­¾ï¼Œç”¨-aæŒ‡å®šæ ‡ç­¾åï¼Œ-mæŒ‡å®šè¯´æ˜Žæ–‡å­—git tag -a v0.1 -m &quot;version 0.1 released&quot; 1094adb// æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾git tag// åˆ é™¤æ ‡ç­¾git tag -d v0.1// æŽ¨é€æŸä¸ªæ ‡ç­¾åˆ°è¿œç¨‹git push origin &lt;tagname&gt; çœ‹æŸä¸ªå…·ä½“çš„ commit çš„æ”¹åŠ¨å†…å®¹ 1git show commitId å‚è€ƒ Gitæ•™ç¨‹ å»–é›ªå³°]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[äººæ€§çš„å¼±ç‚¹]]></title>
    <url>%2F2017%2F02%2F23%2F%E4%BA%BA%E6%80%A7%E7%9A%84%E5%BC%B1%E7%82%B9%2F</url>
    <content type="text"><![CDATA[äººç±»è‡ªç„¶çš„å¤©æ€§ï¼Œæ˜¯åšé”™äº‹åªä¼šè´£å¤‡åˆ«äººï¼Œè€Œç»ä¸ä¼šè´£å¤‡è‡ªå·± ä¸è¦è¯„è®®äººï¼Œå…å¾—ä¸ºäººæ‰€è¯„è®® ä¸è¦æ‰¹è¯„ä»–ä»¬ï¼Œæˆ‘ä»¬åœ¨ç›¸åŒçš„æƒ…å½¢ä¸‹ï¼Œä¹Ÿä¼šåƒä»–ä»¬ä¸€æ ·ã€‚ å°–é”çš„æ‰¹è¯„ã€æ–¥è´£ï¼Œã€æ°¸è¿œä¸ä¼šæœ‰æ•ˆæžœçš„ã€‚ æˆåŠŸçš„ç§˜è¯€ï¼Œæ˜¯ï¼šã€Œæˆ‘ä¸è¯´ä»»ä½•äººçš„ä¸å¥½ï¼ã€ä»–åˆè¿™æ ·è¯´ï¼šã€Œè€Œè¯´æˆ‘æ‰€çŸ¥é“çš„æ¯ä¸€ä¸ªäººçš„å¥½å¤„ï¼ã€ ä¸è¦æ‰¹è¯„ï¼Œè´£æ€ªæˆ–æŠ±æ€¨ã€‚ä»»ä½•ä¸€ä¸ªæ„šè ¢çš„äººï¼Œéƒ½ä¼šæ‰¹è¯„äººï¼Œæ–¥è´£äººï¼Œå’ŒæŠ±æ€¨äººåŒæ—¶ï¼Œä¹Ÿæ˜¯ç»å¤§éƒ¨ä»½æ„šè ¢çš„äººæ‰è¿™æ ·åšçš„ æˆ‘èƒ½å«ä½ åŽ»åšä»»ä½•äº‹æƒ…çš„å”¯ä¸€æ–¹æ³•ï¼Œé‚£å°±æ˜¯æŠŠä½ æ‰€éœ€è¦çš„ç»™ä½  äººç±»å¤©æ€§ä¸­æœ€æ·±åˆ‡çš„å†²åŠ¨ï¼Œé‚£æ˜¯ã€Œæˆä¸ºé‡è¦äººç‰©çš„æ¬²æœ›â€ äººç±»å¤©æ€§è‡³æ·±çš„æœ¬è´¨ï¼Œå°±æ˜¯æ¸´æ±‚ä¸ºäººæ‰€é‡è§†ã€‚ æ¯ä¸ªäººéƒ½å–œæ¬¢å—äººæ­ç»´ã€‚ ä¸–ç•Œä¸Šæœ€å®¹æ˜“æ‘§æ¯ä¸€ä¸ªäººå¿—å‘çš„ï¼Œé‚£å°±æ˜¯ä¸Šå¸æ‰€ç»™ä»–çš„æ‰¹è¯„ã€‚æˆ‘ä»Žæ¥ä¸æ‰¹è¯„ä»»ä½•äººï¼Œæˆ‘åªç»™äººä»¬å·¥ä½œçš„æ¿€åŠ±ã€‚æˆ‘æ˜¯æ€¥äºŽç§°èµžï¼Œè€Œè¿ŸäºŽå¯»é”™ï¼Œå¦‚æžœè¯´æˆ‘å–œæ¬¢ä»€ä¹ˆçš„è¯ï¼Œé‚£å°±æ˜¯è¯šäºŽå˜‰è®¸ï¼Œå®½äºŽç§°é“ã€‚ã€ èµžèµæ˜¯å‡ºäºŽçœŸè¯šï¼Œè€Œè°„åªšæ˜¯è™šä¼ªçš„ã€‚ åˆ«æ€•æ”»å‡»ä½ çš„æ•Œäººï¼Œæé˜²è°„åªšä½ çš„æœ‹å‹ è°„åªšæ˜¯æ˜Žç™½çš„å‘Šè¯‰åˆ«äººï¼Œä»–æƒ³åˆ°ä»–è‡ªå·±çš„ç§ç§ çŒ®å‡ºä½ çœŸå®žï¼Œè¯šæ³çš„èµžèµ æƒ³æƒ³åˆ«äººçš„ä¼˜ç‚¹ï¼›æˆ‘ä»¬å°±ä¸å¿…æŽªè¾žå‘è´±ã€è™šä¼ªï¼Œåœ¨è¯ ä¸–ç•Œä¸Šå”¯ä¸€èƒ½å½±å“å¯¹æ–¹çš„æ–¹æ³•ï¼Œå°±æ˜¯è°ˆè®ºä»–æ‰€è¦çš„ï¼Œè€Œä¸”è¿˜å‘Šè¯‰ä»–ï¼Œå¦‚ä½•æ‰èƒ½å¾—åˆ°å®ƒ. ä»Žä½ æ¥åˆ°ä¸–ç•Œä¸Šè¿™ä¸€å¤©å¼€å§‹ï¼Œä½ æ‰€æœ‰çš„æ¯ä¸€ç§ä¸¾åŠ¨ï¼Œå‡ºå‘ç‚¹éƒ½æ˜¯ä¸ºäº†ä½ è‡ªå·±ï¼Œéƒ½æ˜¯å› ä¸ºä½ éœ€è¦äº›ä»€ä¹ˆ å¦‚æžœæœ‰ä¸€ä¸ªæˆåŠŸç§˜è¯€çš„è¯ï¼Œé‚£å°±æ˜¯å¦‚ä½•å¾—åˆ°å¯¹æ–¹ç«‹åœºâ€ çš„èƒ½åŠ›ï¼Œç”±ä»–çš„è§‚ç‚¹è®¾æƒ³ï¼Œæ­£åŒç”±ä½ çš„è§‚ç‚¹ä¸€æ ·ã€‚ å¾ˆå¤šäººï¼Œè´¹åŽ»ä¸€ç”Ÿçš„å…‰é˜´åœ¨é”€å”®å·¥ä½œï¼Œå´ä¸ç«™åœ¨ä¹°ä¸»çš„ç«‹åœºè®ºäº‹ã€‚ä»–å¹¶æ²¡æœ‰æ³¨æ„åˆ°å¦‚ä½•å¸®åŠ©æˆ‘ï¼Œä»–ç¥‡æ˜¯æ³¨æ„å¸®åŠ©ä»–è‡ªå·± ä½ ä¼šæ°¸è¿œç«™åœ¨åˆ«äººç«‹åœºåŽ»æ‰“ç®—ã€è®¾æƒ³ï¼Œå¹¶ç”±å¯¹æ–¹çš„è§‚ç‚¹ï¼ŒåŽ»è§‚å¯Ÿäº‹ç‰©çš„è¶‹å‘ å…ˆæ¿€èµ·å¯¹æ–¹æŸç§è¿«åˆ‡çš„éœ€è¦ï¼Œè‹¥èƒ½åšåˆ°è¿™ç‚¹å°±å¯å·¦å³é€¢æºï¼Œå¦åˆ™åˆ°å¤„ç¢°å£ è¡¨çŽ°è‡ªå·±ï¼Œé‚£æ˜¯äººæ€§æœ€ä¸»è¦çš„éœ€è¦ã€‚ ä¸€ç§æ·±å…¥ã€å‰é©±çš„å­¦ä¹ æ¬²æœ›ï¼Œä¸€ä¸ªå¢žåŠ ä½ åº”ä»˜ä»–äººèƒ½åŠ›çš„å¼ºçƒˆå†³å¿ƒ æ¯å‘¨åçœæ¯”æˆ‘æ‰€å°è¯•çš„å…¶å®ƒä»»ä½•æ–¹æ³•ï¼Œéƒ½æ›´ä¸ºæœ‰ç›Šã€‚ å¦‚æžœä½ æ—¶åˆ»å…³å¿ƒåˆ«äººï¼Œå¯¹åˆ«äººå‘ç”Ÿå…´è¶£ï¼Œåœ¨ä¸¤ä¸ªæœˆçš„æ—¶é—´é‡Œæ‰€äº¤çš„æœ‹å‹ï¼Œè¦æ¯”åªæƒ³è®©åˆ«äººå…³å¿ƒä½ ï¼Œå¯¹ä½ å‘ç”Ÿå…´è¶£ï¼Œåœ¨ä¸¤å¹´çš„æ—¶é—´é‡Œæ‰€äº¤çš„æœ‹å‹è¿˜å¤š å¦‚æžœæˆ‘ä»¬åªæ˜¯æƒ³ä½¿äººæ³¨æ„ï¼Œä½¿äººå¯¹æˆ‘ä»¬å‘ç”Ÿå…´è¶£ï¼Œæˆ‘ä»¬ã€æ°´è¿œä¸ä¼šæœ‰å¾ˆå¤šçœŸè¯šçš„æœ‹å‹â€¦â€¦æœ‹å‹ï¼ŒçœŸæ­£çš„æœ‹å‹ï¼Œä¸æ˜¯é‚£æ ·é€ æˆçš„ å‡å¦‚æˆ‘ä»¬æƒ³äº¤æœ‹å‹ï¼Œåº”è¯¥å…ˆå‡ºæ¥æ›¿åˆ«äººåšäº›äº‹â€”â€”éœ€è¦æ—¶é—´ã€ç²¾åŠ›ã€å…¬ä¹‰ã€ä½“æ¤çš„äº‹ åˆ°äº†æœ‰äººç”Ÿæ—¥é‚£ä¸€å¤©ï¼Œæˆ‘å°±å‘ç»™ä»–ä¸€å°è´ºå‡½ï¼Œæˆ–æ˜¯è´ºç”µã€‚å½“é‚£äººæŽ¥åˆ°è´ºå‡½ï¼Œæˆ–æ˜¯è´ºç”µæ—¶ï¼Œä»–æ˜¯å¤šå¹ºé«˜å…´â€¦â€¦ï¼šï¼Žé™¤äº†ä»–çš„äº²äººä»¥å¤–ï¼Œæˆ‘æ˜¯ä¸–ç•Œä¸Šå”¯ä¸€çŸ¥é“ä»–ç”Ÿæ—¥çš„ä¸€ä¸ªæœ‹å‹ã€‚ æˆ‘çœŸå®žçš„å¯¹ä»–ï¼Œå°±ä»–çš„é—®é¢˜å‘ç”Ÿäº†å…´è¶£ï¼Œå…³å¿ƒä»–å’Œä»–åˆ‡èº«çš„é—®é¢˜ å¾®ç¬‘æ˜¯ä»Žå†…å¿ƒå‘å‡ºçš„ è‹¥å¹²äººï¼Œå¼€å§‹ä¸€æ¡©äº‹ä¸šçš„æ—¶å€™ï¼Œæ€€ç€æžå¤§çš„å¸Œæœ›å’Œå…´è¶£ï¼Œæ‰€ä»¥èƒ½åœ¨æ—©æœŸèŽ·å¾—éƒ¨ä»½çš„æˆå°±ã€‚å½“ä»–ä»¬å¯¹è¿™é¡¹å·¥ä½œï¼Œæ„Ÿåˆ°åŽŒçƒ¦ã€æ²‰é—·ï¼Œå¤±åŽ»äº†åŽŸæœ‰çš„å…´è¶£æ—¶ï¼Œä»–çš„äº‹ä¸šä¹Ÿæ¸æ¸èµ°å‘ä¸‹å¡ï¼Œç»ˆè‡³å¤±è´¥ã€‚ å¦‚æžœä½ å¸Œæœ›åˆ«äººç”¨ä¸€å‰¯é«˜å…´ã€æ¬¢æ„‰çš„ç¥žæƒ…æ¥æŽ¥å¾…ä½ ï¼Œé‚£ä¹ˆä½ è‡ªå·±å…ˆè¦ç”¨è¿™æ ·çš„ç¥žæƒ…åŽ»å¯¹åˆ«äººã€‚ æ”¹æŽ‰åŽŸæœ‰å¯¹äººçš„æ‰¹è¯„ï¼ŒæŠŠæ–¥è´£äººå®¶çš„è¯ï¼Œæ¢æˆèµžèµå’Œé¼“åŠ±ã€‚ å¿«ä¹æ˜¯å‡ºè‡ªè‡ªå·±å†…åœ¨çš„å¿ƒæƒ…ï¼Œä¸éœ€è¦å‘å¤–ç•Œå¯»æ±‚çš„ å¾®ç¬‘æ˜¯ã€æ°¸è¿œå—äººæ‰€æ¬¢è¿Žçš„ ä¿æŒä¸€ç§æ­£ç¡®çš„å¿ƒç†çŠ¶æ€â€”â€”å‹‡æ•¢ã€è¯šå®žï¼Œå’Œä¹è§‚ å¦‚æžœä½ å¸Œæœ›äººä»¬éƒ½å–œæ¬¢ä½ ï¼Œç¬¬ä¸€ã€å¼ºè¿«ä½ è‡ªå·±å¾®ç¬‘ï¼Œå¦‚æžœä½ å•ç‹¬ä¸€äººçš„æ—¶å€™ï¼Œå¹å¹å£å“¨ï¼Œå”±å”±æ­Œï¼Œå°½é‡è®©è‡ªå·±é«˜å…´èµ·æ¥ï¼›ç¬¬äºŒé¡¹è§„åˆ™æ˜¯ï¼šå¾®ç¬‘ï¼ äººä»¬å¦‚æžœè„¸ä¸Šæ²¡æœ‰å¸¦ç€ç¬‘å®¹ï¼Œåƒä¸‡åˆ«å¼€åº— ä¸€èˆ¬äººå¯¹è‡ªå·±çš„å§“åï¼Œæ¯”æ·ä¸–ç•Œä¸Šæ‰€æœ‰çš„å§“åå †åœ¨ä¸€èµ·çš„æ€»æ•°ï¼Œè¿˜æ„Ÿåˆ°é‡è¦ï¼Œå’Œå…³å¿ƒã€‚æŠŠä¸€ä¸ªäººçš„å§“åè®°ä½ï¼Œå¾ˆè‡ªç„¶çš„å«å‡ºå£æ¥ï¼Œä½ å·²å¯¹ä»–å«æœ‰å¾®å¦™çš„æ­ç»´ã€èµžèµçš„æ„å‘³ äººä»¬éƒ½é‡è§†è‡ªå·±çš„åå­—ï¼Œå°½é‡è®¾æ³•è®©è‡ªå·±çš„åå­—ç•™ä¼ ä¸‹åŽ»ï¼Œç”šè‡³æ„¿æ„ä»˜å‡ºä»»ä½•çš„ä»£ä»· ä¸€ç§æœ€ç®€å•ã€æœ€æ˜Žæ˜¾ã€è€Œåˆæ˜¯æœ€é‡è¦çš„å¦‚ä½•èŽ·å¾—å¥½æ„Ÿçš„æ–¹æ³•ï¼Œå°±æ˜¯è®°ä½å¯¹æ–¹çš„å§“åï¼Œä½¿åˆ«äººæ„Ÿåˆ°è‡ªå·±å¾ˆé‡è¦ æŠŠä¸€ä¸ªæ¼æ€’çš„äººï¼Œå˜æˆäº†ä¸€ä¸ªæ»¡æ„çš„é¡¾å®¢ã€‚ä»–æ˜¯å¦‚ä½•åšçš„ï¼Ÿä»–æŠŠè¿™æƒ…å½¢åˆ†æˆä¸‰ä¸ªæ­¥éª¤ï¼šç¬¬ä¸€ï¼Œä»–è®©æˆ‘ä»Žå¤´åˆ°å°¾ï¼Œè¯´å‡ºæˆ‘çš„ç»è¿‡ï¼Œä»–åˆ™é™é™å¬ç€ï¼Œæ²¡æœ‰æ’è¿›ä¸€å¥è¯æ¥ã€‚ç¬¬äºŒï¼Œå½“æˆ‘è®²å®Œé‚£äº›è¯åŽï¼Œé‚£ä¸¤ä¸ªåº—å‘˜åˆè¦å¼€å§‹ä¸Žæˆ‘äº‰è¾©äº†ã€‚å¯æ˜¯é‚£è´Ÿè´£äººï¼Œå´ç«™åœ¨æˆ‘çš„è§‚ç‚¹è·Ÿä»–ä»¬è¾©è®ºï¼›ç¬¬ä¸‰ï¼Œä»–æ‰¿è®¤ä¸çŸ¥é“è¿™å¥—è¡£æœï¼Œä¼šè¿™æ ·çš„å·®åŠ²ï¼Œè€Œæ˜¯å¦ç›´çš„å¯¹æˆ‘é”ï¼šã€Œä½ è®¤ä¸ºæˆ‘è¯¥å¦‚ä½•å¤„ç†è¿™å¥—è¡£æœï¼Œä½ å°½ç®¡å©å’ï¼Œæˆ‘å®Œå…¨å¯ä»¥ä¾ç…§ä½ çš„æ„æ€ã€‚ã€ æœ€çˆ±æŒ‘å‰”çš„äººï¼Œæœ€æ¿€çƒˆçš„æ‰¹è¯„è€…ï¼Œå¾€å¾€ä¼šåœ¨ä¸€ä¸ªæ€€æœ‰å¿è€ã€åŒæƒ…çš„é™å¬è€…é¢å‰è½¯åŒ–ä¸‹æ¥ï¼è¿™ä½é™å¬è€…ï¼Œå¿…é¡»è¦æœ‰è¿‡äººçš„æ²‰ç€ï¼Œä»–å¿…é¡»å½“ç€å¯»è¡…è€…åƒä¸€æ¡å¤§æ¯’è›‡å¼ å¼€å˜´å·´çš„æ—¶å€™â€“ é™å¬ å¦‚æžœä½ è¦æˆä¸ºä¸€ä¸ªè°ˆç¬‘é£Žç”Ÿï¼Œå—äººæ¬¢è¿Žçš„äººï¼Œä½ éœ€è¦é™å¬åˆ«äººçš„è°ˆè¯ã€‚å°±åƒæŽå¤«äººæ‰€è¯´çš„ï¼šã€Œè¦ä½¿åˆ«äººå¯¹ä½ æ„Ÿåˆ°å…´è¶£ï¼Œå…ˆè¦å¯¹åˆ«äººæ„Ÿåˆ°å…´è¶£ã€‚ã€é—®åˆ«äººæ‰€å–œæ¬¢å›žç­”çš„é—®é¢˜ï¼Œé¼“åŠ±ä»–è°ˆè°ˆä»–è‡ªå·±ï¼Œå’Œä»–çš„æˆå°±ã€‚ åšä¸€ä¸ªå–„äºŽé™å¬çš„äººï¼Œé¼“åŠ±åˆ«äººå¤šè°ˆè°ˆä»–ä»¬è‡ªå·±ã€‚ æ·±å…¥äººä»¬å¿ƒåº•çš„æœ€ä½³é€”å¾„ï¼Œå°±æ˜¯å¯¹é‚£äººè®²ä»–çŸ¥é“å¾—æœ€å¤šçš„äº‹ç‰© å°±åˆ«äººçš„å…´è¶£è°ˆè®ºã€‚æ°¸è¿œä½¿åˆ«äººæ„Ÿè§‰é‡è¦. ä½ å¸Œæœ›åˆ«äººæ€Žæ ·å¾…ä½ ï¼Œä½ å°±è¯¥æ€Žæ ·åŽ»å¯¹å¾…åˆ«äººã€‚ å¦‚ä½•åš?ä½•æ—¶åšï¼Ÿåœ¨ä»€ä¹ˆåœ°æ–¹åšï¼Ÿè¿™ä¸ªç­”æ¡ˆæ˜¯ï¼šã€Œæ‰€æœ‰çš„æ—¶é—´ï¼Œä»»ä½•åœ°ç‚¹ã€‚ã€ å¹³æ—¶å®¢æ°”çš„è¯ï¼Œåƒã€Œå¯¹ä¸èµ·ï¼Œéº»çƒ¦ä½ ï¼Œè¯·ä½ ï¼Œä½ ä¼šä»‹æ„å—ï¼Žï¼Žè°¢è°¢ä½ ï¼ã€è¿™äº›ç®€çŸ­çš„è¯ï¼Œå¯ä»¥å‡å°‘äººä¸Žäººä¹‹é—´çš„çº çº·ï¼ŒåŒæ—¶ä¹Ÿè‡ªç„¶åœ°è¡¨çŽ°å‡ºé«˜è´µçš„äººæ ¼æ¥ã€‚ å‡¡æˆ‘æ‰€é‡åˆ°çš„äººï¼Œéƒ½æœ‰æ¯”æˆ‘ä¼˜è¶Šçš„åœ°æ–¹ï¼Œè€Œåœ¨é‚£äº›æ–¹é¢ï¼Œæˆ‘èƒ½å‘ä»–å­¦ä¹ ã€‚ æœ‰ä¸€æ¡æœ€æ˜Žæ˜¾çš„çœŸç†ï¼Œå°±æ˜¯ä½ æ‰€é‡åˆ°çš„ä»»ä½•äººï¼Œå‡ ä¹Žæ¯ä¸ªäººï¼Œéƒ½è§‰å¾—è‡ªå·±æŸæ–¹é¢æ¯”ä½ ä¼˜ç§€ã€‚å¯æ˜¯æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥æ·±å…¥ä»–çš„å¿ƒåº•â€”â€”å°±æ˜¯è®©ä»–è§‰å¾—ä½ æ‰¿è®¤ä»–åœ¨è‡ªå·±çš„å°å¤©åœ°é‡Œï¼Œæ˜¯é«˜è´µé‡è¦çš„ï¼Œè¦çœŸè¯šçš„æ‰¿è®¤ ä½ åªè¦å¯¹å¥³äººè°ˆè®ºå¥¹è‡ªå·±å°±è¡Œäº†ã€‚ ä½¿åˆ«äººæ„Ÿè§‰åˆ°ä»–çš„é‡è¦â€”â€”å¿…éœ€çœŸè¯šçš„è¿™æ ·åšã€‚ ç¬¬ä¸€é¡¹è§„åˆ™ï¼šçœŸè¯šçš„å¯¹åˆ«äººå‘ç”Ÿå…´è¶£ã€‚ ç¬¬äºŒé¡¹è§„åˆ™ï¼šå¾®ç¬‘ã€‚ ç¬¬ä¸‰é¡¹è§„åˆ™ï¼šè®°ä½ä½ æ‰€æŽ¥è§¦ä¸­ï¼Œæ¯ä¸€ä¸ªäººçš„å§“åã€‚ ç¬¬å››é¡¹è§„åˆ™ï¼šåšä¸€ä¸ªå–„äºŽé™å¬çš„äººï¼Œé¼“åŠ±åˆ«äººå¤šè°ˆè°ˆä»–ä»¬è‡ªå·±ã€‚ ç¬¬äº”é¡¹è§„åˆ™ï¼šå°±åˆ«äººçš„å…´è¶£è°ˆè®ºã€‚ ç¬¬å…­é¡¹è§„åˆ™ï¼šä½¿åˆ«äººæ„Ÿè§‰åˆ°ä»–çš„é‡è¦â€”â€”å¿…éœ€çœŸè¯šçš„è¿™æ ·åšã€‚ ä½ ä¸å¯èƒ½åœ¨äº‰è¾©ä¸­èŽ·èƒœ æ°¸è¿œé¿å…æ­£é¢çš„å†²çªï¼Œé‚£æ‰æ˜¯å¯¹çš„ å¤©ä¸‹åªæœ‰ä¸€ç§æ–¹æ³•ï¼Œèƒ½å¾—åˆ°è¾©è®ºçš„æœ€å¤§èƒœåˆ©ï¼Œé‚£å°±æ˜¯å°½é‡é¿å…è¾©è®ºâ€¦â€¦â€¦é¿å…è¾©è®ºï¼Œå°±åƒé¿å¼€æ¯’è›‡å’Œåœ°éœ‡ä¸€æ ·ã€‚ ä½ å¿…éœ€è¦çŸ¥é“ï¼Œå½“äººä»¬é€†ç€è‡ªå·±çš„æ„è§ï¼Œè¢«äººå®¶è¯´æœæ—¶ï¼Œä»–ä»ç„¶ä¼šå›ºæ‰§çš„åšæŒè‡ªå·±æ˜¯å¯¹çš„ã€‚ ä¸€ä¸ªçœŸæ­£æˆåŠŸçš„æŽ¨é”€å‘˜ï¼Œä»–å†³ä¸ä¼šè·Ÿé¡¾å®¢äº‰è¾©ï¼Œå³ä½¿è½»å¾®çš„äº‰è¾©ï¼Œä¹ŸåŠ ä»¥é¿å…â€¦â€¦â€¦äººç±»çš„æ€æƒ³ï¼Œä¸æ˜¯é‚£ä¹ˆå®¹æ˜“æ”¹å˜çš„ å¦‚æžœä½ è¾©è®ºã€åé©³ï¼Œæˆ–è®¸ä½ ä¼šå¾—åˆ°èƒœåˆ©ï¼Œå¯æ˜¯é‚£èƒœåˆ©æ˜¯çŸ­æš‚ã€ç©ºè™šçš„â€¦â€¦â€¦ä½ æ°¸è¿œå¾—ä¸åˆ°ï¼Œå¯¹æ–¹ç»™ä½ çš„å¥½æ„Ÿ æˆ‘ä»¬è¦è®©é¡¾å®¢ã€çˆ±äººã€ä¸ˆå¤«ã€æˆ–è€…æ˜¯å¦»å­ï¼Œåœ¨ç»†å°çš„äº‰è®ºä¸Šï¼Œèƒœè¿‡æˆ‘ä»¬ã€‚ ä¸€ä¸ªæˆå¤§äº‹çš„äººï¼Œä¸èƒ½å¤„å¤„è®¡è¾ƒåˆ«äººï¼Œæ¶ˆè€—è‡ªå·±çš„æ—¶é—²åŽ»å’Œäººå®¶äº‰è®ºã€‚æ— è°“çš„äº‰è®ºï¼Œå¯¹è‡ªå·±æ€§æƒ…ä¸Šä¸ä½†æœ‰æ‰€æŸå®³ï¼Œä¸”ä¼šå¤±åŽ»è‡ªå·±çš„è‡ªåˆ¶åŠ›ã€‚åœ¨å°½å¯èƒ½çš„æƒ…å½¢ä¸‹ï¼Œä¸å¦¨å¯¹äººè°¦è®©ä¸€ç‚¹ã€‚ä¸Žå…¶è·Ÿä¸€åªç‹—å­è·¯èµ°ï¼Œä¸å¦‚è®©ç‹—å…ˆèµ°ä¸€æ­¥ã€‚å¦‚æžœç»™ç‹—å’¬äº†ä¸€å£ï¼Œä½ å³ä½¿æŠŠè¿™åªç‹—æ‰“æ­»ï¼Œä¹Ÿä¸èƒ½æ²»å¥½ä½ çš„ä¼¤å£ã€‚ åœ¨è¾©è®ºä¸­ï¼ŒèŽ·å¾—æœ€å¤§åˆ©ç›Šçš„å”¯ä¸€æ–¹æ³•ï¼Œå°±æ˜¯é¿å…è¾©è®ºã€‚ ä½ å¯ä»¥ç”¨ç¥žæ€ã€å£°è°ƒï¼Œæˆ–æ˜¯æ‰‹åŠ¿ï¼Œå‘Šè¯‰ä¸€ä¸ªäººä»–é”™äº†ï¼Œå°±åƒæˆ‘ä»¬ç”¨è¯ä¸€æ ·çš„æœ‰æ•ˆâ€¦â€¦è€Œå¦‚æžœä½ å‘Šè¯‰ä»–é”™äº†ï¼Œä½ ä»¥ä¸ºä»–ä¼šæ„Ÿæ¿€ä½ ï¼Ÿä¸ï¼Œæ°¸è¿œä¸ä¼šï¼å› ä¸ºä½ ä¼¤äº†ä»–çš„è‡ªå°Šã€‚ å¦‚æžœä½ è¦çº æ­£æŸäººçš„é”™è¯¯ï¼Œå°±ä¸åº”è¯¥ç›´çŽ‡çš„å‘Šè¯‰ä»–ï¼›è€Œè¦è¿ç”¨ä¸€ç§éžå¸¸å·§å¦™çš„æ–¹æ³•ï¼Œæ‰ä¸ä¼šæŠŠå¯¹æ–¹å¾—ç½ªäº†ã€‚ æ™®å¤©ä¸‹çš„äººï¼Œå†³ä¸ä¼šè´£æ€ªä½ è¯´è¿™æ ·çš„è¯ï¼šã€Œæˆ–è®¸æ˜¯ä¸å¯¹çš„ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ï¼Œç©¶ç«Ÿæ˜¯æ€Žä¹ˆä¸€å›žäº‹ï¼ã€ æˆ‘ä»¬æœ‰æ—¶å‘çŽ°è‡ªå·±ä¼šåœ¨æ¯«æ— æŠµæŠ—å’Œé˜»åŠ›ä¸­ï¼Œæ”¹å˜è‡ªå·±çš„æ„å¿µã€‚å¯æ˜¯ï¼Œå¦‚æžœæœ‰äººå‘Šè¯‰æˆ‘ä»¬æ‰€çŠ¯çš„é”™è¯¯ï¼Œæˆ‘ä»¬å´ä¼šæ„Ÿåˆ°æ‡Šæ¼å’Œæ€€æ¨ã€‚æˆ‘ä»¬ä¸ä¼šåŽ»æ³¨æ„ä¸€ç§æ„å¿µå…»æˆï¼Œå¯æ˜¯å½“æœ‰äººè¦æŠ¹åŽ»æˆ‘ä»¬é‚£è‚¡æ„å¿µæ—¶ï¼Œæˆ‘ä»¬å¯¹è¿™ä»½æ„å¿µçªç„¶åšå®žè€Œå›ºæ‰§èµ·æ¥ã€‚å¹¶éžæ˜¯æˆ‘ä»¬å¯¹é‚£ä»½æ„å¿µæœ‰å¼ºçƒˆçš„åçˆ±ï¼Œè€Œæ˜¯æˆ‘ä»¬è‡ªå°Šå—åˆ°äº†æŸä¼¤ã€‚ å¦‚æžœæœ‰äººç¡¬æŠŠä¸åˆèƒƒå£çš„äº‹å®žï¼Œå¾€æˆ‘ä»¬çš„å–‰å’™å¡žä¸‹åŽ»ï¼Œæˆ‘ä»¬æ˜¯æ— æ³•æŽ¥å—ä¸‹æ¥çš„ã€‚ æ¢å¥è¯è¯´ï¼Œåˆ«è·Ÿä½ çš„é¡¾å®¢ã€ä¸ˆå¤«ï¼Œæˆ–æ˜¯æ•Œæ‰‹äº‰è¾©ï¼Œåˆ«æŒ‡æ‘˜ä»–é”™äº†ï¼Œåˆ«æ¿€æ€’ä»–ï¼Œè€Œä¸å¦¨ç”¨ç‚¹å¤–äº¤æ‰‹è…•ã€‚ åˆ«è·Ÿä½ çš„é¡¾å®¢ã€ä¸ˆå¤«ï¼Œæˆ–æ˜¯æ•Œæ‰‹äº‰è¾©ï¼Œåˆ«æŒ‡æ‘˜ä»–é”™äº†ï¼Œåˆ«æ¿€æ€’ä»–ï¼Œè€Œä¸å¦¨ç”¨ç‚¹å¤–äº¤æ‰‹è…•ã€‚ å°Šé‡åˆ«äººçš„æ„è§ï¼Œæ°¸é€Ÿåˆ«æŒ‡æ‘˜å¯¹æ–¹æ˜¯é”™çš„ã€‚ å‡å¦‚æˆ‘ä»¬å·²çŸ¥é“ä¸€å®šè¦å—åˆ°è´£ç½šï¼Œé‚£æˆ‘ä»¬ä½•ä¸å…ˆè´£å¤‡è‡ªå·±ï¼Œæ‰¾å‡ºè‡ªå·±çš„ç¼ºç‚¹ï¼Œé‚£æ˜¯ä¸æ˜¯æ¯”ä»Žåˆ«äººå˜´îž¢è¯´å‡ºçš„æ‰¹è¯„ï¼Œè¦å¥½å—å¾—å¤š å½“æˆ‘ä»¬é”™è¯¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦å¿«é€Ÿçš„ã€å¦ç›´çš„æ‰¿è®¤æˆ‘ä»¬çš„é”™è¯¯ã€‚è¿ç”¨è¿™ç§æ–¹æ³•ï¼Œä¸ä½†èƒ½èŽ·å¾—æƒŠäººçš„æ•ˆæžœï¼Œè€Œä¸”åœ¨è‹¥å¹²æƒ…å½¢ä¸‹ï¼Œæ¯”æ›¿è‡ªå·±è¾©æŠ¤æ›´ä¸ºæœ‰è¶£ ç”¨äº‰å¤ºçš„æ–¹æ³•ï¼Œä½ æ°¸è¿œæ— æ³•å¾—åˆ°æ»¡è¶³ã€‚å¯æ˜¯å½“ä½ è°¦è®©çš„æ—¶å€™ï¼Œä½ å¯ä»¥å¾—åˆ°æ¯”ä½ æ‰€æœŸæœ›çš„æ›´å¤š å¦‚æžœä½ é”™äº†ï¼Œè¿…é€Ÿã€éƒ‘é‡çš„æ‰¿è®¤ä¸‹æ¥ã€‚ å¦‚æžœä½ æ¡ç´§äº†ä¸¤ä¸ªæ‹³å¤´æ¥æ‰¾æˆ‘ï¼Œæˆ‘å¯ä»¥å‘Šè¯‰ä½ ï¼Œæˆ‘çš„æ‹³å¤´ä¼šæ¡å¾—æ›´ç´§ã€‚ å‹å–„çš„å¯¹ä»–ï¼Œèµžè®¸ä»–ã€å¤¸å¥–ä»–ï¼Œç›¸ä¿¡è¿™åŠžæ³•ï¼Œä¸€å®šéžå¸¸æœ‰æ•ˆ æ¸©æŸ”ã€å‹å–„çš„åŠ›é‡ï¼Œæ°¸è¿œèƒœè¿‡æ„¤æ€’å’Œæš´åŠ›ã€‚ æ…ˆçˆ±ã€å‹å–„çš„æŽ¥è¿‘ï¼Œèƒ½ä½¿äººæ”¹å˜äº†ä»–åŽŸæœ‰çš„å¿ƒæ„ï¼Œé‚£æ¯”æš´åŠ›çš„æ”»å‡»æ›´ä¸ºæœ‰æ•ˆ ä»¥å‹å–„çš„æ–¹æ³•å¼€å§‹ã€‚ è·Ÿäººä»¬è°ˆè¯æ—¶ï¼Œåˆ«å¼€å§‹å°±è°ˆä½ ä»¬æ„è§ç›¸å·¦çš„äº‹ï¼Œä¸å¦¨è°ˆäº›å½¼æ­¤é—´èµžåŒçš„äº‹æƒ…ã€‚å¦‚æžœå¯èƒ½çš„è¯ï¼Œä½ æ›´åº”è¯¥æå‡ºä½ çš„è§è§£ï¼Œå‘Šè¯‰å¯¹æ–¹ï¼Œä½ ä»¬æ‰€è¿½æ±‚çš„æ˜¯åŒä¸€ä¸ªç›®æ ‡ï¼Œæ‰€å·®å¼‚çš„ç¥‡æ˜¯æ–¹æ³•è€Œå·²ã€‚ æœ‰è¯´è¯æŠ€å·§çš„äººï¼Œå¼€å§‹çš„æ—¶å€™å°±èƒ½å¾—åˆ°å¾ˆå¤šã€Œæ˜¯ã€çš„ååº”ï¼Œå”¯æœ‰å¦‚æ­¤ï¼Œä»–æ‰èƒ½å°†å¬è€…çš„å¿ƒåŸ‹ï¼Œå¯¼å‘æ­£é¢æ–¹å‘ã€‚ äº‰è¾©å¹¶ä¸æ˜¯ä¸€ä¸ªèªæ˜Žçš„åŠžæ³•ã€‚è¦ä»Žå¯¹æ–¹çš„è§‚ç‚¹åŽ»çœ‹äº‹ï¼Œè®¾æ³•è®©åˆ«äººå›žç­”ã€Žæ˜¯ï¼Œæ˜¯ã€ï¼Œé‚£æ‰æ˜¯ä¸€å¥—æˆåŠŸçš„åŠžæ³• å¤„ç†ä¸€ä¸ªæŠ±æ€¨è€…çš„å®‰å…¨æ‰‹æ³•ï¼Œå¿…éœ€è¦å¿è€çš„æ€€ç€èˆ’ç•…çš„å¿ƒæƒ…ï¼Œé™é™çš„å¬ç€ï¼Œè€Œä¸”ç”¨æœ€è¯šæ³çš„æ€åº¦é¼“åŠ±ä»–ï¼Œè®©ä»–æŠŠæ‰€è¦è¯´çš„è¯ï¼Œå®Œå…¨è¯´å®Œã€‚ å¦‚æžœä½ æƒ³å¾—åˆ°ä»‡äººï¼Œä½ å°±èƒœè¿‡ä½ çš„æœ‹å‹ï¼Œå¯æ˜¯ï¼Œå¦‚æžœæƒ³èŽ·å¾—æ›´å¤šçš„æœ‹å‹ï¼Œå°±è®©ä½ çš„æœ‹å‹èƒœè¿‡ä½  ä½ è¦èŽ·å¾—å¯¹æ–¹å¯¹ä½ çš„åŒæ„ï¼Œç¬¬å…­é¡¹è§„åˆ™æ˜¯ï¼šå°½é‡è®©å¯¹æ–¹æœ‰å¤šè¯´è¯çš„æœºä¼š ç”Ÿå‘½æ˜¯çŸ­ä¿ƒçš„ï¼Œåˆ«æŠŠæˆ‘ä»¬ä¸å€¼ä¸€æçš„æˆå°±ï¼Œä½œä¸ºè°ˆè¯çš„èµ„æ–™ï¼Œä»¤äººå¬äº†åŽŒçƒ¦ã€‚æˆ‘ä»¬è¦é¼“åŠ±åˆ«äººå¤šè¯´è¯ã€‚ä»”ç»†æƒ³ä¸€æƒ³ï¼Œä½ å®žåœ¨æ²¡æœ‰ä»€ä¹ˆå¯ä»¥å¤¸è€€çš„ã€‚ ä½ å¯¹ä½ è‡ªå·±æ‰€å‘çŽ°çš„æ„å¿µï¼Œæ˜¯ä¸æ˜¯æ¯”åˆ«äººä»£ä½ è¯´å‡ºçš„æ›´ä¿¡å¾—è¿‡ï¼Ÿå¦‚æžœæ˜¯çš„è¯ï¼Œä½ æŠŠä½ çš„æ„è§ï¼Œç¡¬ç”Ÿç”Ÿå¡žä¸‹åˆ«äººå–‰å’™é‡Œï¼Œè¿™æ˜¯ä¸æ˜¯é”™è¯¯çš„è§‚å¿µï¼Ÿå¦‚æžœæå‡ºæ„è§ï¼Œå¯å‘åˆ«äººè‡ªå·±åŽ»å¾—åˆ°ä»–çš„ç»“è®ºï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªæ›´èªæ˜Žçš„è¾¨æ³•å—ï¼Ÿ æ²¡æœ‰äººå–œæ¬¢å¼ºè¿«è‡ªå·±åŽ»ä¹°ä¸€æ ·ä¸œè¥¿ï¼Œæˆ–æ˜¯è¢«äººæ´¾é£åŽ»åšä¸€ä»¶äº‹ã€‚æˆ‘ä»¬éƒ½å–œæ¬¢éšè‡ªå·²çš„å¿ƒæ„¿ä¹°ä¸œè¥¿ï¼Œæˆ–æ˜¯ç…§ç€è‡ªå·±çš„æ„æ€åŽ»åšäº‹æƒ…ã€‚åŒæ—¶ï¼Œå¸Œæœ›æœ‰äººè·Ÿæˆ‘ä»¬è°ˆè°ˆæˆ‘ä»¬çš„æ„¿æœ›ã€éœ€è¦ã€æƒ³æ³• å‡¡æ˜¯éƒ½å¾ˆè´¹äº‹çš„åŽ»å¾æ±‚åˆ«äººçš„æ„è§ï¼Œä¸”å¯¹ä»–ä»¬çš„å»ºè®®è¡¨ç¤ºå°Šé‡ ä½ è¦å½±å“åˆ«äººè€Œä½¿äººåŒæ„äºŽä½ ï¼Œç¬¬ä¸ƒé¡¹è§„åˆ™æ˜¯ï¼šä½¿å¯¹æ–¹ä»¥ä¸ºè¿™æ˜¯ä»–çš„æ„å¿µã€‚ å½“å¯¹æ–¹å¹¶ä¸æ‰¿è®¤æœ‰é”™è¯¯æ—¶ï¼Œè¯•ç€åŽ»äº†è§£å¯¹æ–¹ï¼ŒåŽ»åŽŸè°…å¯¹æ–¹ã€‚ å¤šå­¦äº›å¾…äººçš„æŠ€å·§ï¼Œå­¦å­¦å„ç§ä¸Žäººç›¸å¤„çš„æ‰‹è…•ï¼Œå¸¸ä»Žåˆ«äººçš„è§‚ç‚¹åŽ»çœ‹äº‹ç‰© å½“æˆ‘ä»¬å¸Œæœ›åˆ«äººå®Œæˆä¸€ä»¶äº‹çš„æ—¶å€™ï¼Œä¸å¦¨é—­ä¸Šçœ¼ç›ï¼Œç¨å¾®æƒ³ä¸€æƒ³â€¦â€¦æŠŠæ•´ä¸ªçš„æƒ…å½¢ï¼Œç”±å¯¹æ–¹çš„å‡ºå‘ç‚¹æ¥æƒ³ä¸€æƒ³ï¼ç„¶åŽé—®è‡ªå·±ï¼šã€Œä»–ä¸ºä»€ä¹ˆè¦å¦‚æ­¤åšï¼Ÿ å½“ä½ æŽ¥è§¦åˆ°æ¯ä¸€ä»¶äº‹æ—¶ï¼Œä¼šå¤„å¤„æ›¿åˆ«äººç€æƒ³ã€‚è€Œä¸”ä»¥å¯¹æ–¹çš„è§‚ç‚¹ï¼ŒåŽ»è§‚å¯Ÿè¿™ä»¶äº‹æƒ… è¦çœŸè¯šçš„ä»¥ä»–äººçš„è§‚ç‚¹åŽ»çœ‹äº‹æƒ…ã€‚ å¯¹ä½ æ‰€æ„Ÿè§‰åˆ°çš„æƒ…å½¢ï¼Œæˆ‘ä¸€ç‚¹ä¹Ÿä¸ä¼šè´£æ€ªä½ ï¼Œå¦‚æžœæˆ‘æ˜¯ä½ çš„è¯ï¼Œæˆ‘ä¹Ÿæœ‰åŒæ ·çš„æ„Ÿè§‰ã€‚ ä½ æ˜Žå¤©é‡åˆ°çš„äººï¼Œå…¶ä¸­å¯èƒ½æœ‰å››åˆ†ä¹‹ä¸‰éƒ½é¥¥æ¸´ä¼¼çš„éœ€è¦åŒæƒ…â€¦ï¼Žï¼å¦‚æžœä½ åŒæƒ…ä»–ä»¬ï¼Œä»–ä»¬å°±ä¼šå–œæ¬¢ä½ ã€‚ åŒæƒ…æ˜¯æ¶ˆè§£æ¶æ„Ÿæœ€æœ‰æ•ˆçš„è¯ç‰© äººç±»æ™®éçš„è¿½æ±‚åŒæƒ…ï¼Œå­©å­ä»¬ä¼šæ€¥åˆ‡çš„æ˜¾ç¤ºä»–å—ä¼¤çš„åœ°æ–¹ã€‚æœ‰çš„ç”šè‡³äºŽæ•…æ„è‡ªå·±å‰²ä¼¤ã€å¼„ä¼¤ï¼Œä»¥åšå¾—å¤§äººä»¬çš„åŒæƒ… ä½ è¦èŽ·å¾—åˆ«äººå¯¹ä½ çš„åŒæ„ï¼Œç¬¬ä¹é¡¹è§„åˆ™æ˜¯ï¼šåŒæƒ…å¯¹æ–¹çš„æ„å¿µå’Œæ¬²æœ›ã€‚ è¦æ”¹å˜ä¸€ä¸ªäººçš„æ„å¿—ï¼Œéœ€è¦æ¿€å‘ä»–é«˜å°šçš„åŠ¨æœº ä½ è¦å½“é‚£ä½é¡¾å®¢æ˜¯æ³åˆ‡ã€è¯šå®žã€å¯é çš„ï¼Œä¸”ä»–æ˜¯æžæ„¿æ„ä»˜å¸çš„ã€‚ä¸€æ—¦ä½¿ä»–ç›¸ä¿¡é‚£å¸ç›®æ˜¯å¯¹çš„ï¼Œä»–ä¼šæ¯«ä¸è¿Ÿç–‘çš„ä¹æ„å€ºè¿˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œäººä»¬éƒ½æ˜¯è¯šå®žçš„ï¼Œè€Œä¸”æ„¿æ„å±¥è¡Œä»–ä»¬è¯¥æœ‰çš„ä¹‰åŠ¡ã€‚ å®žè¡Œã€æŽ¨è¿›ï¼Œåˆ«åœé¡¿ä¸‹æ¥ å¦‚æžœæˆ‘ä»¬æƒ³è¦å®Œæˆä¸€ä»¶äº‹ï¼Œå¿…é¡»é¼“åŠ±ç«žäº‰ï¼Œé‚£å¹¶ä¸æ˜¯è¯´äº‰ç€åŽ»èµšé’±ï¼Œè€Œæ˜¯è¦æœ‰ä¸€ç§èƒœè¿‡åˆ«äººçš„æ¬²æœ› äº‰èƒœçš„æ¬²æœ›åŠ ä¸ŠæŒ‘æˆ˜çš„å¿ƒç†ï¼Œå¯¹ä¸€ä¸ªæœ‰è¡€æ°”çš„äººæ¥è¯´ï¼Œæ˜¯ä¸€ç§æœ€æœ‰æ•ˆçš„æ¿€åŠ±ã€‚ ä»»ä½•ä¸€ä¸ªæˆåŠŸçš„äººï¼Œéƒ½å–œçˆ±çš„ç«žæŠ€ï¼Žï¼å› ä¸ºé‚£æ˜¯ä¸ªè¡¨çŽ°ä»–è‡ªå·±çš„æœºä¼šï¼Œè¯æ˜Žä»–çš„èƒ½åŠ›ã€ä»·å€¼èƒœè¿‡åˆ«äººã€‚ ç¬¬ä¸€é¡¹è§„åˆ™ï¼šåœ¨è¾©è®ºä¸­ï¼ŒèŽ·å¾—æœ€å¤§åˆ©ç›Šçš„å”¯ä¸€æ–¹æ³•ï¼Œå°±æ˜¯é¿å…è¾©è®ºã€‚ ç¬¬äºŒé¡¹è§„åˆ™ï¼šå°Šé‡åˆ«äººçš„æ„è§ï¼Œæ°¸è¿œåˆ«æŒ‡æ‘˜å¯¹æ–¹æ˜¯é”™çš„ã€‚ ç¬¬ä¸‰é¡¹è§„åˆ™ï¼šå¦‚æžœä½ é”™äº†ï¼Œè¿…é€Ÿã€éƒ‘é‡çš„æ‰¿è®¤ä¸‹æ¥ã€‚ ç¬¬å››é¡¹è§„åˆ™ï¼šä»¥å‹å–„çš„æ–¹æ³•å¼€å§‹ã€‚ ç¬¬äº”é¡¹è§„åˆ™ï¼šä½¿å¯¹æ–¹å¾ˆå¿«çš„å›žç­”ã€Œæ˜¯ï¼æ˜¯ï¼ã€ã€‚ ç¬¬å…­é¡¹è§„åˆ™ï¼šå°½é‡è®©å¯¹æ–¹ï¼Œæœ‰å¤šè¯´è¯çš„æœºä¼šã€‚ ç¬¬ä¸ƒé¡¼è§„åˆ™ï¼šä½¿å¯¹æ–¹ä»¥ä¸ºè¿™æ˜¯ä»–çš„æ„å¿µã€‚ ç¬¬å…«é¡¹è§„åˆ™ï¼šè¦çœŸè¯šçš„ä»¥ä»–äººçš„è§‚ç‚¹åŽ»çœ‹äº‹æƒ…ã€‚ ç¬¬ä¹é¡¹è§„åˆ™ï¼šåŒæƒ…å¯¹æ–¹çš„æ„å¿µå’Œæ¬²æœ›ã€‚ ç¬¬åé¡¹è§„åˆ™ï¼šæ¿€å‘æ›´é«˜å°šçš„åŠ¨æœºã€‚ ç¬¬åä¸€é¡¹è§„åˆ™ï¼šä½¿ä½ çš„æ„å¿µæˆå‰§åŒ–ã€‚ ç¬¬åäºŒé¡¹è§„åˆ™ï¼šæå‡ºä¸€ä¸ªæŒ‘æˆ˜ã€‚ å½“æˆ‘ä»¬å¬åˆ°åˆ«äººå¯¹æˆ‘ä»¬çš„ç§°èµžåŽï¼Œå¦‚æžœå†å¬åˆ°å…¶å®ƒä¸æ„‰å¿«çš„è¯ï¼Œå°±æ¯”è¾ƒå®¹æ˜“æŽ¥å—äº†ã€‚ ä¸ä½¿å¯¹æ–¹éš¾å ªã€åæ„Ÿï¼Œè€Œæ”¹å˜ä¸€ä¸ªäººçš„æ„å¿—ï¼Œç¬¬ä¸€é¡¹è§„åˆ™æ˜¯ï¼šç”¨ç§°èµžå’ŒçœŸè¯šçš„æ¬£èµä½œå¼€å§‹ã€‚ æˆ‘ä»¬è¦åŠé˜»ä¸€ä»¶äº‹ï¼Œæ°¸è¿œèº²å¼€æ­£é¢çš„æ‰¹è¯„è¿™æ˜¯å¿…éœ€è¦è®°ä½çš„ã€‚å¦‚æžœæœ‰è¿™ä¸ªå¿…è¦çš„è¯ï¼Œæˆ‘ä»¬ä¸å¦¨æ—æ•²ä¾§å‡»çš„åŽ»æš—ç¤ºå¯¹æ–¹ã€‚å¯¹äººæ­£é¢çš„æ‰¹è¯„ï¼Œé‚£ä¼šæ¯æŸäº†ä»–çš„è‡ªé‡ï¼Œå‰¥å¤ºäº†ä»–çš„è‡ªå°Šã€‚å¦‚æžœä½ æ—æ•²ä¾§å‡»ï¼Œå¯¹æ–¹çŸ¥é“ä½ ç”¨å¿ƒè‰¯å–„ï¼Œä»–ä¸ä½†æŽ¥å—ï¼Œè€Œä¸”è¿˜ä¼šæ„Ÿæ¿€ä½ ã€‚ æ‰€ä»¥è¦æ”¹å˜äººä»¬çš„æ„å¿—ï¼Œè€Œä¸å¼•èµ·å¯¹æ–¹çš„åæ„Ÿï¼Œç¬¬äºŒé¡¹è§„åˆ™æ˜¯ï¼šé—´æŽ¥çš„æŒ‡å‡ºäººä»¬çš„è¿‡é”™ã€‚ å¦‚æžœæ‰¹è¯„çš„äººï¼Œå¼€å§‹å…ˆè°¦å†²çš„æ‰¿è®¤è‡ªå·±ä¹Ÿä¸æ˜¯åå…¨åç¾Žçš„ã€æ— å¯æŒ‡è´£çš„ï¼Œç„¶åŽå†æŒ‡å‡ºäººä»¬çš„é”™è¯¯ï¼Œè¿™æ ·å°±æ¯”è¾ƒå®¹æ˜“è®©äººæŽ¥å—äº†ã€‚ åœ¨æ‰¹è¯„å¯¹æ–¹ä¹‹å‰ï¼Œä¸å¦¨å…ˆè°ˆè°ˆä½ è‡ªå·±çš„é”™è¯¯ã€‚ æŽªè¾žï¼Œå§‹ç»ˆæ˜¯å»ºè®®ï¼Œè€Œä¸æ˜¯å‘½ä»¤ å‘é—®æ—¶ï¼Œåˆ«ç”¨ç›´æŽ¥çš„å‘½ä»¤ã€‚ é¡¾å…¨åˆ°ä¸€ä¸ªäººçš„é¢å­ï¼Œé‚£æ˜¯å¤šä¹ˆé‡è¦ å³ä½¿åªæœ‰ç¨å¾®çš„è¿›æ­¥ï¼Œæˆ‘ä»¬ä¹Ÿè¦ç§°èµžï¼Œè¿™æ ·å¯ä»¥é¼“åŠ±åˆ«äººç»§ç»­è¿›æ­¥ã€‚ æˆ‘ä»¬å…·æœ‰å„ç§æ½œåœ¨çš„èƒ½åŠ›ï¼Œå¯æ˜¯å´æƒ¯äºŽä¸ä¼šåˆ©ç”¨ ç§°èµžæœ€ç»†å¾®çš„è¿›æ­¥ï¼Œè€Œä¸”ç§°èµžæ¯ä¸€ä¸ªè¿›æ­¥ã€‚ ä¸€èˆ¬äººï¼Œéƒ½ä¼šæ„¿æ„æŽ¥å—æŒ‡å¯¼ï¼Œå¦‚æžœä½ å¾—åˆ°ä»–çš„æ•¬é‡ï¼Œå¹¶ä¸”å¯¹ä»–çš„æŸç§èƒ½åŠ›è¡¨ç¤ºæ•¬é‡çš„è¯ã€‚ å¦‚æžœä½ æƒ³æ”¹å–„ä¸€ä¸ªäººæŸæ–¹é¢çš„ç¼ºç‚¹ï¼Œä½ è¦è¡¨ç¤ºå‡ºï¼Œä»–å·²ç»å…·æœ‰è¿™æ–¹é¢çš„ä¼˜ç‚¹äº† ç»™äººä¸€ä¸ªç¾Žåè®©ä»–åŽ»ä¿å…¨ï¼Œæ¯ä¸€ä¸ªäººéƒ½æ„¿æ„ç«­å°½å…¶æ‰€èƒ½ï¼Œä¿æŒåˆ«äººèµ äºˆä»–çš„ç¾Žèª‰ã€‚ å¤šç»™äººä»¬ä¸€äº›é¼“åŠ±ï¼ŒæŠŠäº‹æƒ…çœ‹æˆå¾ˆå®¹æ˜“ã€‚ä½¿å¯¹æ–¹çŸ¥é“ï¼Œä½ å¯¹ä»–æœ‰ä¿¡å¿ƒï¼Œä»–æœ‰å°šæœªå‘å±•å‡ºçš„æ‰å¹²ï¼Œé‚£ä»–å°±ä¼šä»˜å‡ºæœ€å¤§çš„åŠªåŠ›ï¼Œäº‰å–åˆ°è¿™ä¸ªèƒœåˆ©ã€‚ ç”¨é¼“åŠ±ï¼Œä½¿ä½ è¦æ”¹æ­£çš„é”™è¯¯ï¼Œçœ‹æ¥å¾ˆå®¹æ˜“åšåˆ°ï¼›ä½¿ä½ è¦å¯¹æ–¹æ‰€åšçš„äº‹ï¼Œå¥½è±¡å¾ˆå®¹æ˜“åšåˆ°ã€‚ æ°¸è¿œä½¿äººä»¬ä¹æ„åŽ»åšä½ æ‰€å»ºè®®çš„äº‹ã€‚ ç¬¬ä¸€é¡¹è§„åˆ™ï¼šç”¨ç§°èµžå’ŒçœŸè¯šçš„æ¬£èµä½œå¼€å§‹ã€‚ ç¬¬äºŒé¡¹è§„åˆ™ï¼šé—´æŽ¥çš„æŒ‡å‡ºäººä»¬çš„é”™è¯¯ã€‚ ç¬¬ä¸‰é¡¹è§„åˆ™ï¼šåœ¨æ‰¹è¯„å¯¹æ–¹ä¹‹å‰ï¼Œä¸å¦¨å…ˆè°ˆè°ˆä½ è‡ªå·±çš„è¿‡é”™ã€‚ ç¬¬å››é¡¹è§„åˆ™ï¼šå‘é—®æ—¶ï¼Œåˆ«ç”¨ç›´æŽ¥çš„å‘½ä»¤ã€‚ ç¬¬äº”é¡¹è§„åˆ™ï¼šé¡¾å…¨å¯¹æ–¹çš„é¢å­ã€‚ ç¬¬å…­é¡¹è§„åˆ™ï¼šç§°èµžæœ€ç»†å¾®çš„è¿›æ­¥ï¼Œè€Œä¸”ç§°èµžæ¯ä¸€ä¸ªè¿›æ­¥ã€‚ ç¬¬ä¸ƒé¡¹è§„åˆ™ï¼šç»™äººä»¬ä¸€ä¸ªç¾Žåè®©ä»–åŽ»ä¿å…¨ã€‚ ç¬¬å…«é¡¹è§„åˆ™ï¼šç”¨é¼“åŠ±ï¼Œä½¿ä½ è¦æ”¹æ­£çš„é”™è¯¯ï¼Œçœ‹æ¥å¾ˆæ˜“åšåˆ°ï¼›ä½¿ä½ è¦å¯¹æ–¹æ‰€åšçš„äº‹ï¼Œå¥½è±¡å¾ˆæ˜“åšåˆ°ã€‚ ç¬¬ä¹é¡¹è§„åˆ™ï¼šä½¿äººä»¬ä¹æ„åŽ»åšä½ æ‰€å»ºè®®çš„äº‹ã€‚ ä½¿å¯¹æ–¹æœ‰ä¸€ç§è‡ªé‡ã€é«˜è´µçš„æ„Ÿè§‰ æˆ‘ä»¬éœ€è¦å°½é‡é¼“èµ·å¯¹æ–¹çš„è‡ªå°Šå¿ƒï¼Œä½†ä¸æ˜¯è¿ç”¨è°„åªšï¼Œæˆ–æ˜¯è™šä¼ªï¼Œå¦‚æžœå¼•è¯¯äº†è¿™ä¸ªå‡ºå‘ç‚¹ï¼Œæ˜¯ç»ä¸ä¼šæœ‰æ•ˆæžœçš„ã€‚ å¿…éœ€è®°ä½ï¼šæˆ‘ä»¬æ¯ä¸€ä¸ªäººï¼Œéƒ½æ˜¯å¸Œæœ›å¦‚ä½•è¢«äººæ¬£èµã€å¦‚ä½•è¢«äººé‡è§†â€¦â€¦ç”šè‡³ä¼šä¸é¡¾ä¸€åˆ‡çš„åŽ»è¾¾åˆ°è¿™ä¸ªç›®çš„ã€‚å¯æ˜¯ï¼Œæ²¡æœ‰äººä¼šæŽ¥å—ä¸è¯šæ³çš„ã€è™šä¼ªçš„å¥‰æ‰¿ã€‚ æˆ‘æ„¿æ„å†è¯´ä¸€éï¼šè¿™ä¹¦ä¸­æ‰€å‘Šè¯‰ä½ çš„åŽŸåˆ™ï¼Œå¿…éœ€å‡ºè‡ªç”±è¡·æ‰ä¼šæœ‰æ•ˆæžœå‡ºçŽ°ã€‚æˆ‘ä¸å¸Œæœ›äººä»¬ç”¨å¥¸è¯¡çš„éª—æœ¯ï¼ŒåŽ»æ¬ºéª—äººå®¶;è€Œæˆ‘æ‰€è®²çš„ï¼Œåªæ˜¯ä¸€ç§æ–°çš„ç”Ÿæ´»æ–¹å¼ã€‚ ç”·äººç¦»å¼€å®¶åº­çš„ä¸€ä¸ªä¸»è¦åŽŸå› ï¼Œé‚£æ˜¯å› ä¸ºä»–ä»¬çš„å¦»å­åˆåµåˆé—¹ï¼Œå–‹å–‹ä¸ä¼‘ ä»Žæ¥ä¸æ‰¹è¯„å¥¹ï¼Œä»–åœ¨å¥¹é¢å‰ï¼Œä»Žä¸è¯´å‡ºä¸€å¥è´£å¤‡çš„è¯â€¦ï¼å¦‚æžœæœ‰äººå˜²ç¬‘å¥¹æ—¶ï¼Œä»–ç«‹å³ä¸ºå¥¹å¼ºçƒˆçš„è¾©æŠ¤ã€‚ è·Ÿäººä»¬äº¤ä½ï¼Œç¬¬ä¸€ä»¶åº”å­¦çš„äº‹ï¼Œé‚£æ˜¯ä¸å¹²æ¶‰äººä»¬è‡ªå·±åŽŸæœ‰é‚£ç§ç‰¹æ®Šå¿«ä¹çš„æ–¹æ³• å©šå§»çš„æˆåŠŸï¼Œé‚£ä¸ç¥—æ˜¯å¯»æ‰¾ä¸€ä¸ªé€‚å½“çš„äººï¼Œè€Œæ˜¯è‡ªå·²è¯¥å¦‚ä½•åšä¸€ä¸ªé€‚å½“çš„äºº åˆ«å°è¯•æ”¹é€ ä½ çš„ä¼´ä¾£ ä¸è¦æ‰¹è¯„ã€‚ ç»™äºˆçœŸè¯šçš„æ¬£èµã€‚ è‡ªå¤åˆ°çŽ°åœ¨ï¼Œé²œèŠ±æ˜¯ä»£è¡¨çˆ±æƒ…çš„è¯­è¨€ å¯¹ä½ æ‰€æ•¬çˆ±çš„äººï¼Œè¡¨ç¤ºä½ å¸¸æƒ³å¿µç€å¥¹ï¼Œä½ å¸Œæœ›å¥¹æ„‰å¿«ã€‚è€Œå¥¹çš„æ¬¢æ„‰ã€å¿«ä¹ï¼Œä¹Ÿä¼šä½¿ä½ æœ‰åŒæ ·çš„æ„Ÿå—ã€‚ è¿™æ¡è·¯ï¼Œæˆ‘åªèƒ½ç»è¿‡ä¸€æ¬¡ï¼Œæ‰€ä»¥ï¼Œå‡¡æˆ‘æ‰€èƒ½ä¸ºäººåšçš„ä»»ä½•å¥½äº‹ï¼Œä»»ä½•ä¸€ç‚¹ä»æ…ˆï¼Œè®©æˆ‘çŽ°åœ¨å°±åšå§ï¼ä¸è¦è¿Ÿå»¶ï¼Œä¸è¦å¿½ç•¥ï¼Œå› ä¸ºæˆ‘å°†ä¸ä¼šå†ä»Žè¿™é‡Œç»è¿‡äº†ã€‚ ç¤¼è²Œæ˜¯å†…å¿ƒçš„ä¸€ç§ç‰¹è´¨ï¼Œå®ƒå¯ä»¥æ•™äººå¿½ç•¥ç ´æ—§çš„å›­é—¨ï¼Œè€Œä¸“å¿ƒæ³¨æ„åˆ°å›­å†…çš„å¥½èŠ± ç¤¼è²Œåœ¨æˆ‘ä»¬å©šåŽçš„ç”Ÿæ´»ä¸­ï¼Œå°±åƒæ±½è½¦ç¦»ä¸å¼€æ±½æ²¹ä¸€æ ·ã€‚ ç¬¬ä¸€é¡¹è§„åˆ™ï¼šåˆ‡èŽ«å–‹å–‹ä¸ä¼‘ã€‚ ç¬¬äºŒé¡¹è§„åˆ™ï¼šåˆ«å°è¯•æ”¹é€ ä½ çš„ä¼´ä¾£ã€‚ ç¬¬ä¸‰é¡¹è§„åˆ™ï¼šä¸è¦ä»»æ„çš„æ‰¹è¯„ã€‚ ç¬¬å››é¡¹è§„åˆ™ï¼šç»™äºˆçœŸè¯šçš„æ¬£èµã€‚ ç¬¬äº”é¡¹è§„åˆ™ï¼šéšæ—¶æ³¨æ„çç¢Žã€ç»†å¾®çš„å°åœ°æ–¹ã€‚ ç¬¬å…­é¡¹è§„åˆ™ï¼šè¦æœ‰ç¤¼è²Œã€‚ ç¬¬ä¸ƒé¡¹è§„åˆ™ï¼šé˜…è¯»ä¸€æœ¬æœ‰å…³å©šå§»ä¸­æ€§ç”Ÿæ´»æ–¹é¢çš„å¥½ä¹¦ã€‚]]></content>
      <categories>
        <category>è¯»ä¹¦</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾å¤‡æ ‡è¯†ç¬¦]]></title>
    <url>%2F2017%2F01%2F24%2F%E8%AE%BE%E5%A4%87%E6%A0%87%E8%AF%86%E7%AC%A6%2F</url>
    <content type="text"><![CDATA[åˆ©ç”¨keyChainå’ŒUUIDæ°¸ä¹…èŽ·å¾—è®¾å¤‡çš„å”¯ä¸€æ ‡è¯†&emsp;&emsp;å°†èŽ·å–çš„UUIDæ°¸ä¹…å­˜å‚¨åœ¨è®¾å¤‡çš„KeyChainä¸­, è¿™ä¸ªæ–¹æ³•åœ¨åº”ç”¨ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶, å°†èŽ·å–çš„UUIDå­˜å‚¨è¿›KeyChainä¸­, æ¯æ¬¡å–çš„æ—¶å€™, æ£€æŸ¥æœ¬åœ°é’¥åŒ™ä¸²ä¸­æœ‰æ²¡æœ‰, å¦‚æžœæ²¡æœ‰åˆ™éœ€è¦å°†èŽ·å–çš„UUIDå­˜å‚¨è¿›åŽ»ã€‚å½“ä½ é‡å¯è®¾å¤‡, å¸è½½åº”ç”¨å†æ¬¡å®‰è£…,éƒ½ä¸å½±å“, åªæ˜¯å½“è®¾å¤‡åˆ·æœºæ—¶, KeyChainä¼šæ¸…ç©º, æ‰ä¼šæ¶ˆå¤±, æ‰ä¼šå¤±æ•ˆã€‚&emsp;&emsp;PSï¼šKeyChainä½¿ç”¨å·¥å…· SFHFKeychainUtils å…¶ä»–æ–¹æ¡ˆä»‹ç»IDFA å¹¿å‘Šæ ‡è¯†ç¬¦, ç”±äºŽå¹¿å‘Šæ˜¯è¦èµšé’±çš„ï¼Œæ‰€ä»¥å¹¿å‘Šæ ‡è¯†ç¬¦æ˜¯å”¯ä¸€çš„ã€‚ iOS 10ä¹‹åŽï¼Œå¦‚æžœç”¨æˆ·æ‰‹åŠ¨é™åˆ¶å¹¿å‘Šè·Ÿè¸ªï¼ˆé€šç”¨-&gt;éšç§-&gt;å¹¿å‘Š-&gt;é™åˆ¶å¹¿å‘Šè·Ÿè¸ªï¼‰çš„è¯ï¼ŒIDFAè¿”å›žçš„éƒ½æ˜¯0123456789#import &lt;AdSupport/AdSupport.h&gt;NSString *IDFA = [[[ASIdentifierManager sharedManager] advertisingIdentifier] UUIDString];//åˆ¤æ–­IDFAæ˜¯å¦ä¸ºç©ºBOOL isEmpty = [[IDFA stringByReplacingOccurrencesOfString:@&quot;-&quot; withString:@&quot;&quot;] stringByReplacingOccurrencesOfString:@&quot;0&quot; withString:@&quot;&quot;].length;if (isEmpty) &#123;NSLog(@&quot;å¹¿å‘Šæ ‡è¯†ä¸ä¸ºç©ºï¼š%@&quot;,IDFA);&#125; ä½¿ç”¨MACåœ°å€æ¥è¯†åˆ«è®¾å¤‡ï¼Œå› ä¸ºMACåœ°å€ä¹Ÿå”¯ä¸€çš„è¯†åˆ«äº†ä¸€å°è®¾å¤‡å¹¶ä¸”ä¸ä¼šè¢«ä¿®æ”¹ï¼Œä¸çŸ¥é“ä»¥åŽè‹¹æžœä¼šå¯¹æ­¤å¦‚ä½•æ“ä½œã€‚IDFV(identifierForVendor) identifierForVendor åº”ç”¨å¼€å‘å•†æ ‡è¯†ç¬¦, ä¸€ç§åº”ç”¨åŠ è®¾å¤‡ç»‘å®šäº§ç”Ÿçš„æ ‡è¯†ç¬¦ï¼Œç›¸å½“äºŽæ˜¯ï¼šZ(identifierForVendor) = X(æŸåº”ç”¨å¼€å‘å•†) + Y(æŸè®¾å¤‡)ã€‚ åŒä¸€ä¸ªåº”ç”¨å¼€å‘å•†(com.yourcompany.)ä¸‹æ‰€æœ‰çš„APPï¼ˆä¾‹com.yourcompany.a å’Œ com.yourcompany.bï¼‰çš„IDFVæ˜¯ä¸€æ ·çš„ï¼Œa UUID that may be used to uniquely identify the device, same across apps from a single vendor. å¦‚æžœç”¨æˆ·å°†å±žäºŽæ­¤Venderçš„æ‰€æœ‰Appå¸è½½ï¼Œåˆ™idfvçš„å€¼ä¼šè¢«é‡ç½®ï¼Œå³å†é‡è£…æ­¤Venderçš„Appï¼Œidfvçš„å€¼å’Œä¹‹å‰ä¸åŒã€‚1[[[UIDevice currentDevice] identifierForVendor] UUIDString]; UUID Universally Unique Identifier,ç¿»è¯‘è¿‡æ¥å°±æ˜¯é€šç”¨å”¯ä¸€æ ‡è¯†ç¬¦ã€‚ æ˜¯å˜åŒ–çš„ï¼Œåªæ˜¯è¡¨ç¤ºå½“å‰æ—¶é—´ç‚¹è¿™ä¸ªè®¾å¤‡çš„æ ‡è¯†ç¬¦ï¼ UUID could be changed ??12345678for (int i = 0; i &lt; 5 ;i++) &#123;NSLog(@&quot;time:%i , uuid: %@&quot;,i ,[[NSUUID UUID] UUIDString]);&#125;//time:0 , uuid: EBA63BC1-E9B2-4E01-B27F-1A28EF3E305C//time:1 , uuid: AD799085-ABAB-48D1-86BB-4C7444E40220//time:2 , uuid: BAA893A3-FC77-4E98-8523-9AC77E66503D//time:3 , uuid: 78FBB61A-E93A-44EC-BB25-85DF5B96FD71//time:4 , uuid: 4E1E419A-938A-474D-AE7B-88A865FC5930 UDID UDIDçš„å…¨åä¸º Unique Device Identifier :è®¾å¤‡å”¯ä¸€æ ‡è¯†ç¬¦ UDID å·²ç»è¢«ç¦æ­¢äº†ï¼Œä¸Šä¸äº†AppStore1//[[UIDevice cuurrent] uniqueIdenfier] MAC Address è¢«ç¦äº† OpenUDID è¢«ç¦äº† UDIDæ˜¯ç³»ç»Ÿç”Ÿæˆçš„ï¼ŒOpenUDIDæ˜¯é€šè¿‡ç¬¬ä¸€ä¸ªå¸¦æœ‰OpenUDID SDKåŒ…çš„Appç”Ÿæˆçš„ å‚è€ƒï¼š iOS-ç†è§£ : UDIDã€UUIDã€IDFAã€IDFV]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç•ªèŒ„å·¥ä½œæ³•å›¾è§£]]></title>
    <url>%2F2017%2F01%2F12%2F%E7%95%AA%E8%8C%84%E5%B7%A5%E4%BD%9C%E6%B3%95%E5%9B%BE%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[ä¸€æ¬¡åªåšä¸€ä»¶äº‹ 25åˆ†é’Ÿä¸“æ³¨äºŽä»»åŠ¡ï¼Œå¦‚æžœå“é“ƒå´æ²¡å®Œæˆä»»åŠ¡ï¼Œå¹¶ä¸ä»£è¡¨å¤±è´¥ï¼Œç›¸åè¿™æ˜¯å¯¹å·²ç»è¿žç»­ä¸“æ³¨25åˆ†é’Ÿçš„å–å½© æŠŠäº‹æ‹†åˆ†æˆ–ç»„åˆï¼Œé€šè¿‡ä»ªå¼æ„Ÿå‘ŠçŸ¥è‡ªå·±è¦ä¸“æ³¨ï¼Œç•ªèŒ„å·¥ä½œæ³•ä¸€å¤©ç»“æŸå‰è¦åšä¸‰ä»¶äº‹ï¼šè®°å½•ï¼Œå¤„ç†å’Œä¼˜åŒ– èƒŒæ™¯ é€šè¿‡æ‰§è¡Œä¸€å¥—ç›¸åŒçš„åŠ¨ä½œå’Œå‡†å¤‡ç¨‹åºï¼Œå¯ä»¥ä½¿å¤§è„‘è‡ªæˆ‘è°ƒæ•´ï¼Œè¿›å…¥æ‰§è¡ŒæŸç±»äº‹åŠ¡çš„æœ€ä½³çŠ¶æ€ é€šè¿‡è®­ç»ƒå¤§è„‘ï¼Œå¯ä»¥ä¸€æ‰­ç•ªèŒ„é’Ÿé©¬ä¸Šé›†ä¸­æ³¨æ„åŠ›ï¼Œå¬åˆ°å£°å“å°±æ”¾æ¾ æ³¨æ„åŠ›ä¸é›†ä¸­æ—¶ï¼Œè¦ä¹ˆè¿åŠ¨ï¼Œè¦ä¹ˆä¼‘æ¯ çŽ¯å¢ƒæˆ–ä»»åŠ¡çš„é¢‘ç¹åˆ‡æ¢å›žé™ä½Žç”Ÿäº§åŠ› å›žå¿†æ›²çº¿è¯æ˜Žæ—¶é—´è¶Šé•¿è®°å¾—è¶Šå·® 25åˆ†é’Ÿä¸“æ³¨+5åˆ†é’Ÿä¼‘æ¯å’Œè”æƒ³å›žå¿†èƒ½æé«˜ç”Ÿäº§åŠ›ï¼Œä¿ƒè¿›æ¶ˆåŒ–å¸æ”¶ å¯¹æœªçŸ¥ä¸å¯é¢„æµ‹çš„äº‹æƒ…ä¼šå¯¼è‡´ç„¦è™‘ï¼Œé™ä½Žç”Ÿäº§åŠ›ï¼Œå¦‚æžœå°†å…¶è§†ä¸ºä¸€è¿žä¸²çš„äº‹ä»¶å„ä¸ªå‡»ç ´ï¼Œç”Ÿäº§åŠ›å°†ä¼šæé«˜ çŸ­æš‚çš„å®šæœŸçš„ä¼‘æ¯ï¼Œèƒ½å¤Ÿä¿ƒè¿›èžä¼šè´¯é€šçš„èƒ½åŠ› é‡å¤çš„æ‰‹åŠ¿å’Œæƒ¯ä¾‹å°†å¸®åŠ©å¤§è„‘é€‚åº”çº¿ç¨‹æƒ…å†µ æžå…¶ä¸“æ³¨çš„å¿ƒæµçŠ¶æ€æ˜¯å¾ˆå¥½çš„ï¼Œ5åˆ†é’Ÿä¼‘æ¯æœ‰åŠ©äºŽä»Žæˆ˜ç•¥è§’åº¦åšå‡ºè°ƒæ•´ 5åˆ†é’Ÿä¼‘æ¯æœ‰åŠ©äºŽä¿æŒæƒ…ç»ªå’Œç²¾åŠ›ï¼ŒæŒç»­ç”Ÿäº§ï¼Œé™ä½Žé•¿æ—¶é—´çš„æž¯ç‡¥å’ŒåŽŒçƒ¦ ç»†åˆ†çš„ç•ªèŒ„é’Ÿæœ‰åŠ©äºŽç†æ¸…èµ·ç‚¹ç»ˆç‚¹ï¼Œæœ‰åŠ©äºŽç¼“è§£æ‹–å»¶ç—‡ ä¸“æ³¨å·¥ä½œä¸­åº”å½“åªå¯¹ç›¸å…³æŒ‡æ ‡åšæŒç»­è®°å½•ï¼Œå®šæœŸçš„ä¼šè®®å’Œå›žé¡¾æ‰æ˜¯ä¸“é—¨ç”¨æ¥åˆ†æžè°ƒæ•´çš„åœºåˆï¼Œåœ¨åˆ†æžè¿‡å¾€æ•°æ®çš„åŒæ—¶å±•æœ›æœªæ¥ï¼Œæ”¹å–„è‡ªå·± æ‹¥æŠ±å˜åŒ–ï¼Œé¢‘ç¹çš„æä¾›å’ŒæŽ¥å—åé¦ˆï¼Œä¸¥æ ¼æŽ§åˆ¶æˆ‘ä»¬å¿…é¡»å®Œæˆçš„å†…å®¹ï¼Œå¹¶ç»å¸¸æ€§çš„é‡æ–°è¯„ä¼°ï¼Œä»Žé•¿æœŸå’ŒçŸ­æœŸè§’åº¦é—®è‡ªå·±â€œå®Œæˆä»€ä¹ˆæ‰æ˜¯æœ€é‡è¦çš„â€ æ–¹æ³• ç•ªèŒ„å·¥ä½œè€…çš„ä¸€å¤©å…·æœ‰ä»¥ä¸‹5ä¸ªé˜¶æ®µï¼šAã€è®¡åˆ’ï¼šåœ¨ä¸€å¤©å¼€å§‹çš„æ—¶å€™ï¼Œä»Žæ´»åŠ¨æ¸…å•ä¸­æå–æœ€é‡è¦çš„æ´»åŠ¨ï¼Œå¡«å†™åˆ°ä»Šæ—¥å¾…åŠžè¡¨æ ¼ï¼Œè¿™å°±æ˜¯è‡ªå·±å¯¹è‡ªå·±å½“å¤©çš„æ‰¿è¯ºï¼›Bã€è·Ÿè¸ªï¼šåœ¨æ¯ä¸ªç•ªèŒ„é’Ÿçš„æ—¶é—´æ®µå†…ï¼Œè¦æ”¶é›†ä¸€äº›è¿‡ç¨‹æŒ‡æ ‡ï¼Œä¸­æ–­æ¬¡æ•°ï¼Œæ³¨æ„åŠ›ä¸é›†ä¸­â€¦ï¼›Cã€åœ¨ä¸€å¤©ç»“æŸçš„æ—¶å€™ï¼Œå°†å½“å¤©æ”¶é›†çš„æ•°æ®å½’æ¡£ï¼Œå†™å…¥è®°å½•è¡¨æ ¼ï¼›Dã€å¤„ç†ï¼šä»Žæ‰€è®°å½•çš„åŽŸå§‹æ•°æ®ä¸­æå–æœ‰ç”¨çš„ä¿¡æ¯ï¼›Eã€å¯è§†åŒ–ï¼šæœ€ç»ˆä½ è¦å°†ä¿¡æ¯ä»¥æŸç§æ–¹å¼ç»„ç»‡èµ·æ¥ï¼Œä»Žä¸­æ‰¾å‡ºæ”¹è¿›æµç¨‹çš„æ€è·¯ å‡†å¤‡ä¸‰å¼ çº¸ï¼šAã€â€œä»Šæ—¥å¾…åŠžâ€è¡¨æ ¼ï¼šå¡«å†™ä»Šå¤©çš„æ—¥æœŸã€åå­—ã€åˆ—å‡ºæ‰“ç®—ä»Šå¤©è¿›è¡Œçš„äº’åŠ¨ï¼ˆè¦è®¾ç½®è®¡åˆ’å¤–ç´§æ€¥çš„æ ç›®ï¼‰ã€‚æ¯å¤©æ—©ä¸Šéƒ½è¦æ›´æ–°ä»Šæ—¥å¾…åŠžï¼›Bã€â€œæ´»åŠ¨æ¸…å•â€è¡¨æ ¼ï¼šå¡«å†™åå­—ï¼Œåˆ—å‡ºæœ€è¿‘è¦è¿›è¡Œçš„æ´»åŠ¨ï¼Œéšæƒ³éšå¡«ï¼Œä¸ç”¨æŽ’åºã€‚åŒä¸€å¼ â€œæ´»åŠ¨æ¸…å•â€è¡¨æ ¼å¯ä»¥ç”¨å¾ˆå¤šå¤©ï¼Œå¢žåŠ æ–°çš„æ´»åŠ¨ï¼Œåˆ’æŽ‰å·²å®Œæˆçš„ï¼›Cã€â€œè®°å½•â€è¡¨æ ¼ï¼šè®°å½•æ‰€é‡‡é›†æ ·çš„æµç¨‹æŒ‡æ ‡ï¼Œä»¥ä¾¿å¯¹æµç¨‹è¿›è¡Œæ”¹è¿›ã€‚åŒä¸€å¼ â€œè®°å½•â€è¡¨æ ¼å¯ä»¥ç”¨å¾ˆå¤šå¤©ï¼Œä»¥ä¾¿æ¯”è¾ƒæ¯å¤©çš„è·Ÿè¸ªè®°å½• æ´»åŠ¨æ¸…å•ï¼šéšæƒ³éšå¡«ï¼Œä¸è¦æŽ’åºï¼Œä¸åˆ†è½»é‡ï¼Œä¸ç”¨å†™å…·ä½“åšæ³•ï¼Œåªè¦å†™ä¸Šè¦è¾¾æˆç›®æ ‡å’ŒdeadLineå°±å¥½ã€‚åæ­£æ˜¯ç»™è‡ªå·±çœ‹ï¼Œæ²¡ä»€ä¹ˆä¸èƒ½å†™ã€ä¸æ•¢å†™çš„ï¼Œèƒ½çœ‹æ‡‚çŸ¥é“æ˜¯å•¥å°±è¡Œäº†ã€‚ æ„Ÿè§‰åƒå¤´ä¸‡ç»ªçš„æ—¶å€™ï¼ŒæŠŠæœ€é‡è¦çš„äº‹æ”¾åœ¨ç¬¬ä¸€ä½ï¼Œå¼€å¯ç•ªèŒ„é’Ÿï¼Œå…¨åŠ›ä»¥èµ´çŽ°åœ¨å°±åšã€‚åœ¨å¿ƒç›®ä¸­å°†â€œå¿…é¡»çš„åšå®Œâ€å˜æˆâ€œä»Žå“ªé‡Œå¼€å§‹â€ï¼Œå°†â€œè¿™ä¸ªé¡¹ç›®å¾ˆå¤§å¾ˆé‡è¦â€å˜æˆâ€œæˆ‘å¯ä»¥èµ°å‡ºä¸€å°æ­¥â€ è¦ä¹ˆåšï¼Œè¦ä¹ˆä¸åšï¼çŽ°åœ¨åšçš„è¯ï¼Œè¦ä¹ˆåªæœ‰ä¸€ä»¶äº‹å¯åšï¼Œè¦ä¹ˆæ²¡äº‹å¯åšï¼å­¦ä¼šé€‰æ‹©ï¼Œå­¦ä¼šä¸“æ³¨ï¼Œå½“å†³å®šè¦åšä»€ä¹ˆçš„æ—¶å€™ï¼Œè¦æœ‰å…¨å±€çœ¼å…‰ï¼Œé¿å…é™·å…¥çäº‹å½“ä¸­ ä½¿ç”¨ç•ªèŒ„å·¥ä½œæ³•ï¼Œä¸ºåˆšæ‰25åˆ†é’Ÿçš„å·¥ä½œæ‰“ä¸ªå¥½è¯„ï¼Œèƒ½è®©æˆ‘ä»¬èŽ·å¾—ç«‹å³åé¦ˆ å¯ä»¥æŠŠå½“å‰è¦åšçš„äº‹æƒ…æ˜Žç¡®çš„å†™åœ¨ä¸€å¼ çº¸ä¸Šï¼Œæ”¾åœ¨çœ¼å‰ é’Ÿå“åŽï¼Œåº”ç«‹å³åœ¨ä»Šæ—¥å¾…åŠžè¡¨æ ¼çš„ç›¸åº”æ´»åŠ¨æ—è¾¹ç”»ä¸Šä¸€ä¸ªXï¼Œç„¶åŽä¼‘æ¯ä¸€ä¸‹ï¼Œä¸ªäººè§‰å¾—æœ€å¥½çš„ä¼‘æ¯ï¼Œæºœè¾¾ã€è¹²èµ·ã€å†¥æƒ³æˆ–è€…æµ…ç¡5åˆ†é’Ÿï¼›åœ¨ä¼‘æ¯æœŸé—´ï¼Œæ€è€ƒä¸Šä¸€ä¸ªç•ªèŒ„é’Ÿæˆ–ä¸‹ä¸€ä¸ªç•ªèŒ„é’Ÿçš„å·¥ä½œæ˜¯ä¸å…è®¸çš„ï¼Œé‡ç‚¹åº”è¯¥æ”¾åœ¨æ”¾æ¾ï¼ å°†4ä¸ªç•ªèŒ„é’Ÿä½œä¸ºä¸€ç»„ï¼Œæ¯ç»„è¿›è¡Œ15~30åˆ†é’Ÿé˜¶æ®µæ€§ä¼‘æ¯ å¿«é€Ÿç¡çœ ï¼šèˆ’æœçš„åºŠ + æ”¾æ¾çš„å§¿åŠ¿ + é—­çœ¼ + æƒ³è±¡æ‰«æä»ªæ‰«æå…¨èº« + è·Ÿç€æ‰«ææ”¾æ¾å…¨èº«è‚Œè‚‰ï¼Œå°¤å…¶æ˜¯çœ¼éƒ¨è‚Œè‚‰ åœ¨ç•ªèŒ„é’Ÿè¿›è¡Œä¸­ä¸åº”è¯¥åˆ‡æ¢æ´»åŠ¨ä¹Ÿä¸åº”è¯¥åœæ­¢å½“å‰æ´»åŠ¨ï¼Œå…³é”®ä¸åœ¨äºŽ25åˆ†é’Ÿå†…æ˜¯å¦åšå®Œï¼Œå…³é”®åœ¨äºŽ25åˆ†é’Ÿå†…å°½å¯èƒ½çš„åŠªåŠ›ã€‚ç•ªèŒ„é’Ÿå…·æœ‰åŽŸå­æ€§ï¼Œä¸€æ—¦åˆ‡æ¢æˆ–ä¸­æ–­éƒ½ä¸èƒ½ç®—ä¸€ä¸ªç•ªèŒ„é’Ÿäº†ã€‚ ä¸­æ–­ ä¸­æ–­æ—¶å¸¸æ€ï¼Œè¦å­¦ä¼šè®°å½•ï¼Œå­¦ä¼šæŽ¥å—å˜åŒ–ã€‚é’ˆå¯¹å†…éƒ¨ä¸­æ–­ï¼Œè‡ªå·±ä¸­æ–­è‡ªå·±çš„æƒ…å†µï¼šè¦æŽ¥å—å®ƒï¼Œè®°å½•å®ƒï¼Œç„¶åŽæŽ¥ç€è¿›è¡Œæ‰‹å¤´çš„å·¥ä½œï¼›å¤„ç†å¤–éƒ¨ä¸­æ–­ï¼Œå‘ŠçŸ¥ï¼ˆç•ªèŒ„é’Ÿå†…ï¼‰ï¼Œåå•†ï¼ˆç­‰ä¸€ä¸‹ï¼‰ï¼Œè®¡åˆ’ï¼ˆä»Šæ—¥æˆ–ä»¥åŽï¼‰ï¼Œç­”å¤ï¼ˆä¸­æ–­åœ¨å¼€å¯ä¸€ä¸ªï¼‰ï¼Œå‰ä¸‰é¡¹éƒ½è¦åœ¨ç®€çŸ­çš„äº’åŠ¨åŽå…¨åŠ›ä»¥èµ´çš„ç»§ç»­ç•ªèŒ„é’Ÿ é¢„ä¼° è¦ç»å¸¸å›žé¡¾ä¸Žåæ€ï¼Œè¦å†™æˆåŠŸæ—¥è®°å¢žå¼ºè‡ªä¿¡å¿ƒ é¢„ä¼°ä¸€ä¸ªæ´»åŠ¨éœ€è¦å¤šä¸ªç•ªèŒ„é’Ÿï¼Œé‚£æœ€å¥½æŠŠæ´»åŠ¨æ‹†åˆ†ä¸ºå¤šä¸ªï¼›å¦‚æžœä¸€ä¸ªæ´»åŠ¨ç”¨ä¸äº†ä¸€ä¸ªç•ªèŒ„é’Ÿï¼Œé‚£æœ€å¥½å¤šä¸ªä»»åŠ¡ç»„åˆæˆä¸€ä¸ªç•ªèŒ„é’Ÿ ç”¨ä¸åŒæ ‡è®°è®°å½•è¶…å‡ºæˆ–ä¸è¶³çš„ç•ªèŒ„é’Ÿï¼Œä½œä¸ºæ€è€ƒä¸Žä»¥åŽä¼˜åŒ–çš„ä¾æ® åº”å˜ å¾ªåºæ¸è¿›ï¼šç»å¸¸ä¸­æ–­æˆ–æ³¨æ„åŠ›ä¸é›†ä¸­ï¼Œé‚£æŠŠ25åˆ†é’Ÿç¼©çŸ­ å»ºç«‹ä¸€å¥—è‡ªå·±çš„ä»ªå¼æ–¹å¼ï¼Œè‡ªå·±çš„æ—¶é’Ÿç­‰ï¼Œå°½ä¿¡ä¹¦ä¸å¦‚æ— ä¹¦ï¼]]></content>
      <categories>
        <category>è¯»ä¹¦</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CoreImageåŸºæœ¬ç”¨æ³•]]></title>
    <url>%2F2017%2F01%2F05%2FCoreImage%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95%2F</url>
    <content type="text"><![CDATA[1 åŸºç¡€æ¦‚å¿µ Core Imageï¼Œå…è®¸ç¼–å†™è‡ªå®šä¹‰æ»¤é•œä¸Žç³»ç»Ÿæ»¤é•œï¼ˆæˆ–æ»¤é•œé“¾ï¼‰æ¥å¤„ç†é™æ­¢å’Œè§†é¢‘å›¾åƒ ä¸€ä¸ªæ»¤é•œæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæœ‰å¾ˆå¤šè¾“å…¥å’Œè¾“å‡ºï¼Œå¹¶æ‰§è¡Œä¸€äº›å˜æ¢ã€‚ä¾‹å¦‚ï¼Œæ¨¡ç³Šæ»¤é•œå¯èƒ½éœ€è¦è¾“å…¥å›¾åƒå’Œä¸€ä¸ªæ¨¡ç³ŠåŠå¾„æ¥äº§ç”Ÿé€‚å½“çš„æ¨¡ç³ŠåŽçš„è¾“å‡ºå›¾åƒã€‚ ä¸€ä¸ªæ»¤é•œå›¾è¡¨æ˜¯ä¸€ä¸ªé“¾æŽ¥åœ¨ä¸€èµ·çš„æ»¤é•œé“¾æ¡ï¼Œä½¿å¾—ä¸€ä¸ªæ»¤é•œçš„è¾“å‡ºå¯ä»¥æ˜¯å¦ä¸€ä¸ªæ»¤é•œçš„è¾“å…¥ã€‚ä»¥è¿™ç§æ–¹å¼ï¼Œå¯ä»¥å®žçŽ°ç²¾å¿ƒåˆ¶ä½œçš„æ•ˆæžœã€‚æˆ‘ä»¬å°†åœ¨ä¸‹é¢çœ‹åˆ°å¦‚ä½•è¿žæŽ¥æ»¤é•œæ¥åˆ›å»ºä¸€ä¸ªå¤å¤çš„æ‹ç…§æ•ˆæžœã€‚ å½“å¤šä¸ªæ»¤é•œè¿žæŽ¥æˆä¸€ä¸ªæ»¤é•œå›¾è¡¨ï¼ŒCore Image ä¾¿æŠŠå†…æ ¸ä¸²åœ¨ä¸€èµ·æ¥æž„å»ºä¸€ä¸ªå¯åœ¨ GPU ä¸Šè¿è¡Œçš„é«˜æ•ˆç¨‹åºã€‚åªè¦æœ‰å¯èƒ½ï¼ŒCore Image éƒ½ä¼šæŠŠå·¥ä½œå»¶è¿Ÿã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œç›´åˆ°æ»¤é•œå›¾è¡¨çš„æœ€åŽä¸€ä¸ªæ»¤é•œçš„è¾“å‡ºè¢«è¯·æ±‚ä¹‹å‰éƒ½ä¸ä¼šå‘ç”Ÿåˆ†é…æˆ–å¤„ç†ã€‚ å¸¸ç”¨ç±» CIImage ä¿å­˜å›¾åƒæ•°æ®çš„ç±»ï¼Œå¯ä»¥é€šè¿‡UIImageï¼Œå›¾åƒæ–‡ä»¶æˆ–è€…åƒç´ æ•°æ®æ¥åˆ›å»ºï¼ŒåŒ…æ‹¬æœªå¤„ç†çš„åƒç´ æ•°æ®ã€‚ CIFilter è¡¨ç¤ºåº”ç”¨çš„æ»¤é•œï¼Œè¿™ä¸ªæ¡†æž¶ä¸­å¯¹å›¾ç‰‡å±žæ€§è¿›è¡Œç»†èŠ‚å¤„ç†çš„ç±»ã€‚ç³»ç»Ÿæä¾›çš„æ»¤é•œåˆ—è¡¨ CIContext è¡¨ç¤ºä¸Šä¸‹æ–‡ï¼ŒCoreImageçš„ä¸Šä¸‹æ–‡ä¹Ÿæ˜¯å®žçŽ°å¯¹å›¾åƒå¤„ç†çš„å…·ä½“å¯¹è±¡ã€‚å¯ä»¥ä»Žå…¶ä¸­å–å¾—å›¾ç‰‡çš„ä¿¡æ¯ã€‚å»ºç«‹ä¸€ä¸ªä¸Šä¸‹æ–‡æ˜¯éžå¸¸æ˜‚è´µçš„ï¼Œæ‰€ä»¥ä½ ä¼šç»å¸¸æƒ³åˆ›å»ºä¸€ä¸ªåå¤ä½¿ç”¨çš„ä¸Šä¸‹æ–‡ã€‚æŽ¥ä¸‹æ¥æˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•åˆ›å»ºä¸€ä¸ªä¸Šä¸‹æ–‡ 2 ä½¿ç”¨ åŸºæœ¬ç”¨æ³• 12345678910111213141516171819202122232425262728- (UIImage *)filterImage:(UIImage *)originImage filterName:(NSString *)filterName &#123;/*æ³¨æ„ï¼š ç›´æŽ¥ä½¿ç”¨originImage.CIImageèŽ·å–CIImageå¯èƒ½ä¸ºnil@property(nullable,nonatomic,readonly) CIImage *CIImage NS_AVAILABLE_IOS(5_0); // returns underlying CIImage or nil if CGImageRef based*/CIImage *ciImage = [[CIImage alloc] initWithImage:originImage];if (!ciImage) &#123;return originImage;&#125;// åˆ›å»ºæ»¤é•œCIFilter *filter = [CIFilter filterWithName:filterName keysAndValues:kCIInputImageKey, ciImage, nil];// è®¾ç½®ç›¸å…³å‚æ•°[filter setValue:@(10.f) forKey:@&quot;inputRadius&quot;];// æ¸²æŸ“å¹¶è¾“å‡ºCIImageCIImage *outputImage = [filter outputImage];// å»ºç«‹ä¸€ä¸ªä¸Šä¸‹æ–‡æ˜¯éžå¸¸æ˜‚è´µçš„ï¼Œæœ€å¥½è®¾æˆå±žæ€§CIContext *context = [CIContext contextWithOptions:nil];/*æ³¨æ„ï¼š ç›´æŽ¥ ç”¨UIImage *image = [UIImage imageWithCGImage:outputImage]; ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†è¿™ç§æ–¹æ³•æœ‰ç‚¹è®©äººéƒé—·ï¼šå¦‚æžœä½ è¯•å›¾åœ¨ä¸€ä¸ª UIImageView ä¸Šæ˜¾ç¤ºè¿™æ ·çš„å›¾åƒï¼Œå…¶ contentMode å±žæ€§å°†è¢«å¿½ç•¥ã€‚ä½¿ç”¨è¿‡æ¸¡çš„ CGImage åˆ™éœ€è¦ä¸€ä¸ªé¢å¤–çš„æ­¥éª¤ï¼Œä½†å¯ä»¥çœåŽ»è¿™ä¸€çƒ¦æ¼ã€‚*/CGImageRef cgImage = [context createCGImage:outputImage fromRect:[outputImage extent]];UIImage *image = [UIImage imageWithCGImage:cgImage];// CIImageã€CIFilterå’ŒCIContextéƒ½æ˜¯ç»§æ‰¿NSObjectï¼Œæ•…åªéœ€è¦æ‰‹åŠ¨release CGImageCGImageRelease(cgImage);return image;&#125; æ»¤é•œå¤ªå¤šè®°ä¸ä½ï¼Ÿ 12345678910111213141516171819202122232425/*https://developer.apple.com/library/archive/documentation/GraphicsImaging/Reference/CoreImageFilterReference/index.htmlæŒ‰æ•ˆæžœåˆ†ç±»ï¼škCICategoryDistortionEffect æ‰­æ›²æ•ˆæžœï¼Œæ¯”å¦‚bumpã€æ—‹è½¬ã€holekCICategoryGeometryAdjustment å‡ ä½•å¼€ç€è°ƒæ•´ï¼Œæ¯”å¦‚ä»¿å°„å˜æ¢ã€å¹³åˆ‡ã€é€è§†è½¬æ¢kCICategoryCompositeOperation åˆå¹¶ï¼Œæ¯”å¦‚æºè¦†ç›–ï¼ˆsource overï¼‰ã€æœ€å°åŒ–ã€æºåœ¨é¡¶ï¼ˆsource atopï¼‰ã€è‰²å½©æ··åˆæ¨¡å¼kCICategoryHalftoneEffect Halftoneæ•ˆæžœï¼Œæ¯”å¦‚screenã€line screenã€hatchedkCICategoryColorAdjustment è‰²å½©è°ƒæ•´ï¼Œæ¯”å¦‚ä¼½é©¬è°ƒæ•´ã€ç™½ç‚¹è°ƒæ•´ã€æ›å…‰kCICategoryColorEffect è‰²å½©æ•ˆæžœï¼Œæ¯”å¦‚è‰²è°ƒè°ƒæ•´ã€posterizekCICategoryTransition å›¾åƒé—´è½¬æ¢ï¼Œæ¯”å¦‚dissolveã€disintegrate with maskã€swipekCICategoryTileEffect ç“¦ç‰‡æ•ˆæžœï¼Œæ¯”å¦‚parallelogramã€trianglekCICategoryGenerator å›¾åƒç”Ÿæˆå™¨ï¼Œæ¯”å¦‚stripesã€constant colorã€checkerboardkCICategoryGradient æ¸å˜ï¼Œæ¯”å¦‚è½´å‘æ¸å˜ã€ä»¿å°„æ¸å˜ã€é«˜æ–¯æ¸å˜kCICategoryStylize é£Žæ ¼åŒ–ï¼Œæ¯”å¦‚åƒç´ åŒ–ã€æ°´æ™¶åŒ–kCICategorySharpen é”åŒ–ã€å‘å…‰kCICategoryBlur æ¨¡ç³Šï¼Œæ¯”å¦‚é«˜æ–¯æ¨¡ç³Šã€ç„¦ç‚¹æ¨¡ç³Šã€è¿åŠ¨æ¨¡ç³ŠæŒ‰ä½¿ç”¨åœºæ™¯åˆ†ç±»ï¼škCICategoryStillImage ç”¨äºŽé™æ€å›¾åƒkCICategoryVideo ç”¨äºŽè§†é¢‘kCICategoryInterlaced ç”¨äºŽäº¤é”™å›¾åƒkCICategoryNonSquarePixels ç”¨äºŽéžçŸ©å½¢åƒç´ kCICategoryHighDynamicRange ç”¨äºŽHDR*/NSArray *names = [CIFilter filterNamesInCategory:kCICategoryBuiltIn]; æ»¤é•œå‚æ•°åœ¨å“ªé‡Œï¼Ÿ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546// ç‰¹åˆ«æ³¨æ„å…¥å‚çš„æ•°æ®ç±»åž‹ï¼Œé€šè¿‡KVCè®¾ç½®çš„ï¼Œæ²¡ç±»åž‹æ£€æŸ¥ï¼Œåˆ«å¼„é”™äº†CIFilter *filter = [CIFilter filterWithName:@&quot;CIMotionBlur&quot;];NSLog(@&quot;è¾“å…¥å‚æ•° : %@&quot;,[filter inputKeys]);NSLog(@&quot;è¾“å…¥å‚æ•°çš„è¯¦ç»†ä¿¡æ¯ : %@&quot;,[filter attributes]);NSLog(@&quot;è¾“å‡ºå‚æ•° : %@&quot;,[filter outputKeys]);// è¾“å…¥å‚æ•°çš„è¯¦ç»†ä¿¡æ¯// &#123;// &quot;CIAttributeFilterAvailable_Mac&quot; = &quot;10.4&quot;;// &quot;CIAttributeFilterAvailable_iOS&quot; = &quot;8.3&quot;;// CIAttributeFilterCategories = (// CICategoryBlur,// CICategoryStillImage,// CICategoryVideo,// CICategoryBuiltIn// );// CIAttributeFilterDisplayName = &quot;Motion Blur&quot;;// CIAttributeFilterName = CIMotionBlur;// CIAttributeReferenceDocumentation = &quot;http://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CoreImageFilterReference/index.html#//apple_ref/doc/filter/ci/CIMotionBlur&quot;;// inputAngle = &#123;// CIAttributeClass = NSNumber;// CIAttributeDefault = 0;// CIAttributeDescription = &quot;The angle of the motion determines which direction the blur smears.&quot;;// CIAttributeDisplayName = Angle;// CIAttributeIdentity = 0;// CIAttributeSliderMax = &quot;3.141592653589793&quot;;// CIAttributeSliderMin = &quot;-3.141592653589793&quot;;// CIAttributeType = CIAttributeTypeAngle;// &#125;;// inputImage = &#123;// CIAttributeClass = CIImage;// CIAttributeDescription = &quot;The image to use as an input image. For filters that also use a background image, this is the foreground image.&quot;;// CIAttributeDisplayName = Image;// CIAttributeType = CIAttributeTypeImage;// &#125;;// inputRadius = &#123;// CIAttributeClass = NSNumber;// CIAttributeDefault = 20;// CIAttributeDescription = &quot;The radius determines how many pixels are used to create the blur. The larger the radius, the blurrier the result.&quot;;// CIAttributeDisplayName = Radius;// CIAttributeIdentity = 0;// CIAttributeMin = 0;// CIAttributeSliderMax = 100;// CIAttributeSliderMin = 0;// CIAttributeType = CIAttributeTypeDistance;// &#125;;// &#125; æ˜¯å¦éœ€è¦æŒ‡å®šOpenGL 123456789/*ä½¿ç”¨nilæ–¹å¼åˆ›å»ºåŸºäºŽ GPU çš„ CIContext å¯¹è±¡æ˜¯æœ€ä¼˜é€‰æ‹©å®ƒå†…éƒ¨çš„æ¸²æŸ“å™¨ä¼šæ ¹æ®è®¾å¤‡æœ€ä¼˜é€‰æ‹©ã€‚ä¾æ¬¡ä¸º Metalï¼ŒOpenGLESï¼ŒCoreGraphicsã€‚*/ CIContext *context = [CIContext contextWithOptions: nil];// å¼ºåˆ¶ä½¿ç”¨OpenGLEAGLContext *eaglctx = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];context = [CIContext contextWithEAGLContext:eaglctx]; å‚è€ƒï¼š Core Image ä»‹ç» Core Image Filter Explorer &amp; Showcase Core Image ä½ éœ€è¦äº†è§£çš„é‚£äº›äº‹~ Core Image ä¹‹è‡ªå®šä¹‰ Filter~]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å°ç‹—é’±é’±]]></title>
    <url>%2F2016%2F12%2F31%2F%E5%B0%8F%E7%8B%97%E9%92%B1%E9%92%B1%2F</url>
    <content type="text"><![CDATA[å°ç‹—é’±é’± - å…¥é—¨çº§ç†è´¢ä¹¦ æƒ³è¦é‡‘é’±ï¼Œå¿…é¡»çœŸçš„æœ‰è¦é’±çš„æ„¿æœ›ï¼Œä¾‹å¦‚ï¼šå¿…é¡»æ‰¾åˆ°10ä¸ªæˆ‘æƒ³å˜å¯Œè£•çš„åŽŸå› ï¼Œå†æ‰¾å‡ºä¸‰ä¸ªæœ€é‡è¦çš„åŽŸå› ã€‚ å°è¯•çº¯ç²¹æ˜¯ä¸€ç§å€Ÿå£ï¼Œä½ è¿˜æ²¡æœ‰åšï¼Œå°±å·²ç»ç»™è‡ªå·±æƒ³å¥½äº†é€€è·¯ï¼Œä¸èƒ½è¯•éªŒï¼Œåªæœ‰ä¸¤ä¸ªé€‰æ‹©ï¼šåšæˆ–è€…ä¸åš åšåˆ°ä¸‰ä»¶äº‹ï¼Œ1ã€å‡†å¤‡ä¸€æœ¬ç›¸å†Œï¼Œè£…æ»¡ä¸Žæ¢¦æƒ³æœ‰å…³çš„ç…§ç‰‡ï¼›2ã€æ¯å¤©ç¿»çœ‹å‡ éç›¸å†Œï¼Œæƒ³è±¡ç€å·²ç»å®žçŽ°æ¢¦æƒ³çš„æƒ…æ™¯ï¼›3ã€ä¸ºæ¯ä¸€ä¸ªæ¢¦æƒ³å‡†å¤‡ä¸€ä¸ªæ¢¦æƒ³å‚¨è“„ç½ ä¹è§‚å‰è¡Œï¼Œä¸æ”¾å¼ƒï¼Œè¶Šæ˜¯è¢«åˆ«äººå˜²ç¬‘çš„æ¢¦æƒ³ï¼Œè¶Šå€¼å¾—åŽ»å®žçŽ° æ˜¯å¦èƒ½æŒ£åˆ°é’±ï¼Œæœ€å…³é”®çš„å¹¶ä¸åœ¨äºŽæœ‰æ²¡æœ‰ä¸€ä¸ªå¥½ç‚¹å­ï¼Œä¸åœ¨äºŽæœ‰å¤šèªæ˜Žï¼Œå†³å®šå› ç´ æ˜¯ä½ çš„è‡ªä¿¡ç¨‹åº¦ï¼›ä½ çš„è‡ªä¿¡ç¨‹åº¦å†³å®šäº†ä½ æ˜¯å¦ç›¸ä¿¡è‡ªå·±çš„èƒ½åŠ›ï¼Œæ˜¯å¦ç›¸ä¿¡è‡ªå·±ã€‚ä¸ç›¸ä¿¡è‡ªå·±ï¼Œæ€Žä¹ˆå¼€å§‹å¼€å§‹åšï¼Ÿæ€Žä¹ˆåšçš„å¥½ï¼Ÿ å»ºç«‹è‡ªä¿¡çš„æ–¹æ³•ï¼šæ‹¿ä¸€ä¸ªæœ¬å­ï¼Œå°±å«æˆåŠŸæ—¥è®°ï¼Œç„¶åŽå°±æŠŠæ‰€æœ‰æˆåŠŸçš„äº‹æƒ…è®°å½•è¿›åŽ»ï¼Œæœ€å¥½æ¯å¤©éƒ½åšï¼Œæ¯æ¬¡è‡³å°‘å†™5æ¡ä¸ªäººæˆæžœ ä¸¤ä¸ªé‡è¦çš„å»ºè®®ï¼š1ï¼Œå°è¯•ä¸ºåˆ«äººè§£å†³ä¸€ä¸ªéš¾é¢˜ï¼Œé‚£ä¹ˆä½ å°±èƒ½èµšåˆ°å¾ˆå¤šé’±ï¼›2ï¼ŒæŠŠç»ç†é›†ä¸­åœ¨ä½ çŸ¥é“ï¼Œä½ ä¼šçš„å’Œä½ æ‹¥æœ‰çš„ä¸œè¥¿ä¸Š æ— è®ºä»€ä¹ˆæ—¶å€™éƒ½ä¸èƒ½æŠŠå¸Œæœ›å¯„æ‰˜åœ¨ä¸€ä»½å·¥ä½œä¸Šï¼Œå®ƒæŒç»­æ—¶é—´ä¸ä¼šåƒä½ è®¾æƒ³çš„é‚£ä¹ˆé•¿ï¼Œæ‰€ä»¥ä½ è¦ç«‹å³å¯»æ‰¾ä¸€ä»½æ›¿ä»£çš„å·¥ä½œ æœ€å¥½æƒ³æ¸…æ¥šï¼Œä½ å–œæ¬¢åšä»€ä¹ˆï¼Œç„¶åŽåœ¨è€ƒè™‘ä½ æ€Žä¹ˆç”¨å®ƒæ¥æŒ£é’± é€†å¢ƒéœ€è¦åšæŒï¼Œé¡ºå¢ƒæ›´éœ€è¦åšæŒï¼ŒåŸ¹å…»è‡ªä¿¡ï¼Œæ†§æ†¬æ¢¦æƒ³ï¼ŒèŠ±è´¹ä¸è¶…è¿‡10åˆ†é’Ÿï¼Œä½†å°±è¿™10åˆ†é’Ÿï¼Œè®©ä½ ä¸Žä¼—ä¸åŒ å½“ä½ å†³å®šåšä¸€ä»¶äº‹çš„æ—¶å€™ï¼Œå¿…é¡»åœ¨72å°æ—¶å†…å®Œæˆå®ƒï¼Œå¦åˆ™å¾ˆå¯èƒ½å°±æ°¸è¿œä¸ä¼šåœ¨åšäº†ï¼æ²¡å¾—é€‰å°±æ˜¯æœ€å¥½çš„é€‰æ‹©ï¼Œæ—©åšæ—©è¶…ç”Ÿï¼ é™·å…¥å€ºåŠ¡çš„äººéœ€è¦å¬å–å››ä¸ªå¿ å‘Šï¼š1ã€æ¬ å€ºçš„äººåº”è¯¥é”€æ¯æ‰€æœ‰çš„ä¿¡ç”¨å¡ï¼Œå› ä¸ºä½¿ç”¨è™šæ‹Ÿçš„é’±æ—¶ï¼Œæ¯”ç”¨çŽ°é‡‘èŠ±çš„é’±è¦å¤šå¾—å¤šï¼›2ã€æ”¯ä»˜è®¸å¯èŒƒå›´å†…æœ€å°çš„åˆ†æœŸä»˜æ¬¾æ•°ç›®ï¼Œåº”å½“å°½å¯èƒ½å°‘çš„å¿è¿˜ä»–ä»¬çš„è´·æ¬¾ï¼›3ã€å°†æ‰£é™¤ç”Ÿæ´»è´¹ä¹‹åŽå¯Œä½™çš„é’±ä¸­50%å†å­˜èµ·æ¥ï¼Œå‰©ä¸‹çš„50%ç”¨äºŽæ”¯ä»˜æ¶ˆè´¹è´·æ¬¾ï¼Œæœ€å¥½æ ¹æœ¬ä¸è¦ç”³è¯·æ¶ˆè´¹è´·æ¬¾ï¼›4ã€æ¯æ¬¡èŠ±è´¹ä¹‹å‰é—®è‡ªå·±ï¼šâ€œè¿™çœŸçš„æœ‰å¿…è¦å—ï¼Ÿâ€ã€‚ è¦èŠ±é’±ï¼Œè¿™æ˜¯å¯¹çš„ï¼Œä½†å¦‚æžœæƒ³å˜å¾—å¯Œæœ‰ï¼ŒåŒæ—¶è¿˜è¦å­˜é’±ï¼Œè¿™ç¬”é’±æ˜¯ç”¨äºŽæŠ•èµ„é’±ç”Ÿé’±çš„ï¼›æœ€å¥½æ˜¯æŠ•èµ„çš„é’±ï¼ˆé•¿æœŸç›®æ ‡ï¼‰ï¼Œå‚¨è“„ç½çš„é’±ï¼ˆçŸ­æœŸç›®æ ‡ï¼‰ï¼Œå’Œç”¨äºŽç”Ÿæ´»çš„é’±æ¥åˆ’åˆ† å½“ä½ å®šä¸‹äº†å¤§ç›®æ ‡çš„æ—¶å€™ï¼Œå°±æ„å‘³ç€ä½ å¿…é¡»ä»˜å‡ºæ¯”åˆ«äººå¤šå¾—å¤šçš„åŠªåŠ› ä½ å¹²çš„æ´»æœ€å¤šåªå æŠ¥é…¬çš„ä¸€èˆ¬ï¼Œå¦ä¸€åŠæ˜¯å› ä¸ºä½ çš„æƒ³æ³•å’Œå®žæ–½è¿™ä¸ªæƒ³æ³•çš„å‹‡æ°” è¿æ°”å…¶å®žæ°¸è¿œæ˜¯å……åˆ†çš„å‡†å¤‡åŠ ä¸ŠåŠªåŠ›å·¥ä½œçš„ç»“æžœ ä¸€ä¸ªäººè¦æƒ³è¿‡å¾—æ›´å¹¸ç¦ã€æ›´æ»¡æ„çš„ç”Ÿæ´»ï¼Œå°±å¾—å¯¹è‡ªèº«è¿›è¡Œæ”¹å˜ã€‚ ä¸è¦æ€•ï¼Œææƒ§æ˜¯æ­£å¸¸çš„ï¼Œæ²¡å¿…è¦å› ä¸ºææƒ§è€Œæ‚²å“€ç—›è‹¦è‡ªæš´è‡ªå¼ƒï¼Œå…‹æœææƒ§ï¼Œåšäº†ä¸æ•¢åšçš„äº‹æ‰æ˜¯æœ€ç¾Žå¥½çš„ï¼Œä¸è¦æ€• æ¯å½“ä½ è§‰å¾—æœ‰äº›äº‹æƒ…ä¸å¥½åŠžçš„æ—¶å€™ï¼Œä½ å¯ä»¥åšä¸€ä»¶äº‹ï¼šç¿»ä¸€ç¿»æˆåŠŸæ—¥è®°ï¼Œä½ ä¼šä»Žè¿‡åŽ»çš„äº‹æƒ…ä¸­æ‰¾åˆ°æœªæ¥ä½ ä¹Ÿæœ‰èƒ½åŠ›å®Œæˆä»»ä½•äº‹æƒ…çš„è¯æ®ã€‚ææƒ§é‡è§†åœ¨æˆ‘ä»¬è®¾æƒ³äº‹æƒ…ä¼šå¦‚ä½•ä¸é¡ºçš„æ—¶å€™å‡ºçŽ°ï¼Œæˆ‘ä»¬å¯¹å¤±è´¥çš„å¯èƒ½æ€§æƒ³çš„è¶Šå¤šå°±è¶Šå®³æ€•ï¼Œå½“ä½ æœç€ç§¯æžçš„ç›®æ ‡åŽ»æ€è€ƒçš„æ—¶å€™ï¼Œå°±ä¸ä¼šå¿ƒç”Ÿç•æƒ§ æ€»ç»“ï¼š1ã€ç¡®å®šè‡ªå·±çš„å–œæ¬¢èŽ·å¾—è´¢åŠ¡ä¸Šçš„æˆåŠŸï¼›2ã€è‡ªä¿¡ï¼Œæœ‰æƒ³æ³•ï¼Œåšè‡ªå·±å–œæ¬¢åšçš„äº‹ï¼›3ã€æŠŠé’±åˆ†æˆæ—¥å¸¸å¼€é”€ã€æ¢¦æƒ³ç›®æ ‡å’Œå…¨é¹…è´¦æˆ·ä¸‰éƒ¨åˆ†ï¼›4ã€è¿›è¡Œæ˜Žæ™ºçš„æŠ•èµ„ï¼›5ã€äº«å—ç”Ÿæ´» æŠ•èµ„ï¼š1ã€åº”è¯¥æŠŠé’±æŠ•èµ„åœ¨å®‰å…¨çš„åœ°æ–¹ï¼›2ã€æˆ‘ä»¬å½“ç„¶æƒ³è¦æœ€ä¸°åŽšçš„åˆ©æ¯ï¼›3ã€æˆ‘ä»¬çš„æŠ•èµ„åº”è¯¥ç®€å•æ˜Žç™½ é•¿çº¿åŸºé‡‘å€¼å¾—æ‹¥æœ‰ï¼ŒæŒ‘é€‰åŸºé‡‘çš„æ³¨æ„äº‹é¡¹ï¼š1ã€åŸºé‡‘åº”è¯¥è‡³å°‘æœ‰åå¹´çš„åŽ†å²ï¼Œå‡å¦‚ä»¥å‰ä¸€ç›´ç›ˆåˆ©ï¼Œå¯ä»¥ç›¸ä¿¡ä»¥åŽä¹Ÿä¼šç›ˆåˆ©ï¼›2ã€åº”è¯¥é€‰æ‹©å¤§åž‹çš„è·¨å›½è‚¡ç¥¨åŸºé‡‘ï¼›3ã€å¯¹åŸºé‡‘èµ°åŠ¿å›¾è¿›è¡Œæ¯”è¾ƒï¼Œæˆ‘ä»¬åº”è¯¥è§‚å¯Ÿåœ¨è¿‡åŽ»10å¹´é—´å“ªäº›åŸºé‡‘çš„å¹´ç»ˆèŽ·åˆ©æœ€å¥½ å¹´æ”¶ç›ŠçŽ‡ / 72 = æŠ•èµ„ç¿»å€çš„å¹´æ•° åªæœ‰äº¤æ˜“å‡ºåŽ»æ‰èƒ½æ”¶ç›Šï¼Œæ‰æ˜¯èµ”é’±æˆ–è€…èµšé’±äº†ï¼ä¸äº¤æ˜“ï¼Œæ²¡æœ‰ä»»ä½•æ„ä¹‰ åº”è¯¥å§‹ç»ˆå‚¨å¤‡ä¸€äº›çŽ°é‡‘ï¼Œç»ä¸èƒ½æŠŠä½ å…¨éƒ¨çš„é’±éƒ½æŠ•èµ„åœ¨è‚¡ç¥¨æˆ–åŸºé‡‘ä¸Šé¢ 72 é™¤ä»¥ 3%çš„é€šè´§è†¨èƒ€çŽ‡ = 24ï¼Œå³24å¹´åŽï¼Œé’±åªå€¼çŽ°åœ¨çš„ä¸€åŠ ä¸è¦ç€æ€¥å¦è®¤ï¼Œè¦å¤šæƒ³ï¼Œæˆ‘åªèƒ½å‘Šè¯‰ä½ è¦å¤šæƒ³]]></content>
      <categories>
        <category>è¯»ä¹¦</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Crashåˆ†æžä¸Žæ€»ç»“]]></title>
    <url>%2F2016%2F12%2F18%2FCrash%E5%88%86%E6%9E%90%E4%B8%8E%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[1 Crashæ—¥å¿—æ ¼å¼1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556// 1 è¿›ç¨‹ä¿¡æ¯// 1.1 å´©æºƒæŠ¥å‘Šçš„å”¯ä¸€æ ‡è¯†ç¬¦Incident Identifier: AC8D216D-65CA-414C-B354-1E5AD05E6981// 1.2 è®¾å¤‡æ ‡è¯†ç¬¦ï¼Œæ³¨æ„ä¸æ˜¯çœŸæ­£çš„è®¾å¤‡æ ‡è¯†ç¬¦ï¼Œä½†å¯åšå”¯ä¸€æ ‡å¿—ä½¿ç”¨CrashReporter Key: bb1c1545a3cae67e42a2e210ae253f10096200e7// 1.3 è®¾å¤‡ç±»åž‹ï¼Œè¿™é‡Œæ˜¯iPhone 7 PlusHardware Model: iPhone9,2// 1.4 åº”ç”¨åç§°[é—ªé€€æ—¶çš„è¿›ç¨‹ID]Process: æœ‰é“äº‘ç¬”è®° [54279]// 1.5 åº”ç”¨è·¯å¾„Path: /private/var/containers/Bundle/Application/0A4AF891-56D6-4384-9B45-061500D6C8C3/æœ‰é“äº‘ç¬”è®°.app/æœ‰é“äº‘ç¬”è®°// 1.6 bound idIdentifier: com.youdao.note.iphone// 1.7 build &amp; versionVersion: 1213 (4.5.7)// 1.8 ä»¥ä¸‹é™¤äº†Code Type: ARM-64 (Native) ç¨å¾®æœ‰ç‚¹ç”¨ï¼Œå…¶å®ƒéƒ½ä¸ç”¨ç®¡AppStoreTools: 10G3AppVariant: 1:iPhone10,3:11Code Type: ARM-64 (Native)Role: Non UIParent Process: launchd [1]Coalition: com.youdao.note.iphone [9927]// 2 åŸºæœ¬ä¿¡æ¯// 2.1 å´©æºƒæ—¶é—´Date/Time: 2019-07-23 07:42:53.4906 +0800// 2.2 å¯åŠ¨æ—¶é—´Launch Time: 2019-07-23 07:42:33.4417 +0800// 2.3 iosç³»ç»Ÿç‰ˆæœ¬OS Version: iPhone OS 9.3.0 (16F203)Baseband Version: 3.60.01Report Version: 104// 3 å¼‚å¸¸// 3.1 å¼‚å¸¸ç±»åž‹Exception Type: EXC_CRASH (SIGKILL)// 3.2 å¼‚å¸¸ç¼–ç Exception Codes: 0x0000000000000000, 0x0000000000000000Exception Note: EXC_CORPSE_NOTIFYTermination Reason: Namespace SPRINGBOARD, Code 0x8badf00dTermination Description: SPRINGBOARD, scene-create watchdog transgression: com.youdao.note.iphone exhausted real (wall clock) time allowance of 19.59 seconds | ProcessVisibility: Foreground | ProcessState: Running | WatchdogEvent: scene-create | WatchdogVisibility: Foreground | WatchdogCPUStatistics: ( | &quot;Elapsed total CPU time (seconds): 13.190 (user 13.190, system 0.000), 11% CPU&quot;, | &quot;Elapsed application CPU time (seconds): 1.093, 1% CPU&quot; | )Triggered by Thread: 0// 4 çº¿ç¨‹å›žé¡¾// 4.1 çº¿ç¨‹ç¼–å·å’Œåç§°Thread 0 name: Dispatch queue: NSPersistentStoreCoordinator 0x2811a8080Thread 0 Crashed:// 4.2 è°ƒåŠ¨æ–¹æ³•é¡ºåºå’Œå„åˆ—å«ä¹‰//å¸§ç¼–å· | åº“çš„åç§° |æ–¹æ³•åœ°å€ | åŸºæœ¬åœ°å€å’Œåç§»é‡0 libsystem_kernel.dylib 0x00000001b164a400 __semwait_signal + 81 libsystem_c.dylib 0x00000001b15c156c nanosleep + 2122 libsystem_c.dylib 0x00000001b15c136c sleep + 443 CoreData 0x00000001b4524da4 -[NSXPCStore sendMessage:fromContext:interrupts:error:] + 8364 CoreData 0x00000001b4589bfc -[NSXPCStore loadMetadata:] + 3445 CoreData 0x00000001b466963c __91-[NSPersistentStoreCoordinator addPersistentStoreWithType:configuration:URL:options:error:]_block_invoke + 16166 CoreData 0x00000001b46751a4 æ³¨æ„: åœ¨åŽå°ä»»åŠ¡åˆ—è¡¨ä¸­å…³é—­å·²æŒ‚èµ·çš„åº”ç”¨ä¸ä¼šäº§ç”Ÿå´©æºƒæ—¥å¿—ã€‚ ä¸€æ—¦åº”ç”¨è¢«æŒ‚èµ·ï¼Œå®ƒä½•æ—¶è¢«ç»ˆæ­¢éƒ½æ˜¯åˆç†çš„ã€‚æ‰€ä»¥ä¸ä¼šäº§ç”Ÿå´©æºƒæ—¥å¿— 2 CPU type i386 æˆ– x86_64 ï¼šæ¨¡æ‹Ÿå™¨ armv6ï¼šiPhoneã€iPhone2ã€iPhone3Gã€iPod Touch(ç¬¬ä¸€ä»£)ã€iPod Touch(ç¬¬äºŒä»£) armv7ï¼šiPhone3Gsã€iPhone4ã€iPhone4sã€iPadã€iPad 2 armv7sï¼šiPhone5ã€iPhone5c arm64ï¼šiPhone5sã€iPhone6ã€iPhone6pã€iPhone6sã€iPhone6spã€iPhone7ã€iPhone7pã€iPhone8ã€iPhone8pã€iPhoneX arm64eï¼šiPhone XSã€iPhone XS Maxã€iPhone XR 3 Exception Codes 0x8badf00dï¼šè¯»åš â€œate bad foodâ€! (æŠŠæ•°å­—æ¢æˆå­—æ¯ï¼Œæ˜¯ä¸æ˜¯å¾ˆåƒ :p)è¯¥ç¼–ç è¡¨ç¤ºåº”ç”¨æ˜¯å› ä¸ºå‘ç”Ÿwatchdogè¶…æ—¶è€Œè¢«iOSç»ˆæ­¢çš„ 0xbad22222: è¯¥ç¼–ç è¡¨ç¤º VoIPï¼ˆç½‘ç»œè¯­éŸ³ç”µè¯ï¼‰ åº”ç”¨å› ä¸ºè¿‡äºŽé¢‘ç¹é‡å¯è€Œè¢«ç»ˆæ­¢ã€‚ 0xdead10cc: è¯»åš â€œdead lockâ€!è¯¥ä»£ç è¡¨æ˜Žåº”ç”¨å› ä¸ºåœ¨åŽå°è¿è¡Œæ—¶å ç”¨ç³»ç»Ÿèµ„æºï¼Œå¦‚é€šè®¯å½•æ•°æ®åº“ä¸é‡Šæ”¾è€Œè¢«ç»ˆæ­¢ ã€‚ 0xdeadfa11: è¯»åš â€œdead fallâ€! è¯¥ä»£ç è¡¨ç¤ºåº”ç”¨æ˜¯è¢«ç”¨æˆ·å¼ºåˆ¶é€€å‡ºçš„ã€‚æ ¹æ®è‹¹æžœæ–‡æ¡£, å¼ºåˆ¶é€€å‡ºå‘ç”Ÿåœ¨ç”¨æˆ·é•¿æŒ‰å¼€å…³æŒ‰é’®ç›´åˆ°å‡ºçŽ° â€œæ»‘åŠ¨æ¥å…³æœºâ€, ç„¶åŽé•¿æŒ‰ HomeæŒ‰é’®ã€‚å¼ºåˆ¶é€€å‡ºå°†äº§ç”Ÿ åŒ…å«0xdeadfa11 å¼‚å¸¸ç¼–ç çš„å´©æºƒæ—¥å¿—, å› ä¸ºå¤§å¤šæ•°æ˜¯å¼ºåˆ¶é€€å‡ºæ˜¯å› ä¸ºåº”ç”¨é˜»å¡žäº†ç•Œé¢ã€‚ 0xbaaaaaad è¡¨æ˜Žè¿™ä¸ªæ—¥å¿—æ˜¯æ•´ä¸ªç³»ç»Ÿçš„å †æ ˆè®°å½•ï¼Œè€Œä¸æ˜¯ä¸€ä»½å´©æºƒæŠ¥å‘Šã€‚ 0xc00010ff è¡¨æ˜Žè¿™ä¸ªåº”ç”¨ç”±äºŽè¿‡çƒ­äº‹ä»¶è¢«ç³»ç»Ÿæ€æŽ‰äº†ã€‚ 0x2bad45ec è¡¨æ˜Žç”±äºŽå®‰å…¨è¿è§„é—®é¢˜è¢«æ€æŽ‰äº† 4 Exception Type4.1 EXC_BAD_ACCESSã€SIGSEGVå’ŒSIGBUS é‡ŽæŒ‡é’ˆã€éžæ³•è®¿é—®ç­‰å†…å­˜é—®é¢˜ è§£å†³æ–¹æ¡ˆ å¼€å¯åƒµå°¸å¯¹è±¡ï¼šProducrt -&gt; Scheme -&gt; Edit Scheme -&gt; Diagnostics -&gt; Zombie object å¦‚æžœæœ‰ gpus_ReturnNotPermittedKillClientæ˜¯éžä¸»çº¿ç¨‹æ¸²æŸ“ï¼Œå‚è€ƒï¼š QA1766: How to fix OpenGL ES application crashes when moving to the background Address Sanitizer 4.2 EXC_BAD_INSTRUCTIONã€SIGILL éžæ³•çš„æŒ‡ä»¤ï¼Œå¾€å¾€æ˜¯è¿è¡ŒæŒ‡ä»¤çš„å‚æ•°ä¸å¯¹ 4.3 EXC_RESOURCE cpuä½¿ç”¨è¿‡é«˜ï¼Œä¸€èˆ¬éƒ½æœ‰cpu usageå­—æ®µ å†…å­˜ä¸è¶³ï¼Œä¸€èˆ¬éƒ½æœ‰ pageä¿¡æ¯ 4.4 EXC_GUARD Cå‡½æ•°å¼‚å¸¸ 4.5 SIGTRAP ä¸æ˜¯ä¸€ä¸ªçœŸæ­£çš„å´©æºƒä¿¡å· è§£å†³æ–¹æ¡ˆï¼šé‡å¯-&gt; clean -&gt; build 4.6 EXC_ARITHETIC è¢«é™¤æ•°æ˜¯0 5 å¸¸è§Crash5.1 doesNotRecognizeSelector æœªå®žçŽ°æ–¹æ³• ç±»åž‹é—®é¢˜ï¼Œå¸¸è§äºŽjsonå’Œidçš„ä½¿ç”¨ï¼Œä¾‹å¦‚NSArrayè°ƒç”¨äº†NSMutableArrayçš„addobjectæ–¹æ³•; .hå’Œ.m æ–‡ä»¶å£°æ˜Žæ–¹æ³•ä¸ä¸€è‡´ï¼›å¸¸è§çš„å°±æ˜¯.mæ–¹æ³•åæ”¹äº†å‡ æ¬¡ï¼Œ.hæ–‡ä»¶å¿˜æ”¹äº† é¢„é˜²ï¼šå¼ºåˆ¶æ¶ˆé™¤æ‰€æœ‰è­¦å‘Šï¼Œ è§£å†³æ–¹æ¡ˆï¼Œé¦–é€‰ï¼šæ·»åŠ ç›¸å…³æ–¹æ³•ï¼Œå¤‡é€‰ï¼šæ¶ˆæ¯è½¬å‘ 5.1 dNSRangeException è¶Šç•Œ æ•°ç»„è¶Šç•Œé—®é¢˜ï¼Œå¸¸è§å°±æ˜¯è¶…è¿‡æ•°ç»„èŒƒå›´ å­—ç¬¦ä¸²è¶Šç•Œé—®é¢˜ï¼Œå¸¸è§å­—ç¬¦ä¸²æˆªå–å’ŒNSAttributeStringçš„ä½¿ç”¨ è§£å†³æ–¹æ¡ˆï¼šå°½é‡ç”¨ç›¸å…³å±žæ€§ï¼Œè€Œä¸æ˜¯å†™æ­»çš„æ•°å€¼ 5.2 NSNULLé—®é¢˜ å¸¸è§jsonè½¬åŒ–æ—¶ï¼Œ è§£å†³åŠžæ³•ï¼šå¢žåŠ  [someValue isEqual:[NSNull null]åˆ¤æ–­ 5.3 æ•°ç»„å’Œå­—å…¸çš„nilé—®é¢˜ æ•°ç»„ addObject: nil ä¼šcrash å­—å…¸ setOejctï¼šnil ä¼šcrash 5.4 UIåœ¨éžä¸»çº¿ç¨‹ç»˜åˆ¶5.5 NSTimerå¿˜äº†åˆ é™¤5.6 KVOé‡å¤æ·»åŠ æˆ–å¿˜äº†åˆ é™¤5.7 é€šçŸ¥å¿˜äº†åˆ é™¤5.8 å­çº¿ç¨‹åˆ·æ–°UI ä¸€èˆ¬crashå­çº¿ç¨‹ï¼ˆéž0ï¼‰ä¼šæœ‰setNeedsDisplayç­‰æ–¹æ³• 5.9 å¤šçº¿ç¨‹é—®é¢˜å‚è€ƒ http://www.cocoachina.com/articles/6677 https://developer.apple.com/library/content/technotes/tn2151/_index.html#//apple_ref/doc/uid/DTS40008184-CH1-ANALYZING_CRASH_REPORTS]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[addChildViewController]]></title>
    <url>%2F2016%2F12%2F08%2FaddChildViewController%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;appleæŽ¨èçš„MVCæ˜¯ä¸€ä¸ªviewå¯¹åº”ä¸€ä¸ªControllerï¼Œä½†å®žé™…é¡¹ç›®å¼€å‘ä¸­å‡ ä¹Žéƒ½æ˜¯ä¸€å †viewå¯¹åº”ä¸€ä¸ªVCï¼Œè¿™å‡ å¤©æ­£å°è¯•é‡æž„éƒ¨åˆ†é¡µé¢æ—¶ï¼Œå› ä¸ºè¾‘å®žåœ¨æ˜¯æ¯”è¾ƒä¹±ï¼Œviewå±‚çº§åªèƒ½ç”¨ä¹±ä¸ƒå…«ç³Ÿæ¥å½¢å®¹ï¼å°±å°è¯•äº†ä¸€ä¸‹ä½¿ç”¨addChildViewControllerå°†ä¸€ä¸ªVCæ‹†åˆ†æˆå¤šä¸ªVCï¼Œä¹Ÿå‘çŽ°äº†å‡ ä¸ªå‘ï¼æ€»çš„æ¥è¯´ï¼ŒaddChildViewControlleræ–¹å¼å„æœ‰åˆ©å¼Šï¼Œå¦‚æžœé¡µé¢å¾ˆå¤æ‚è¿˜æ˜¯å€¼å¾—æ‹†åˆ†å‡ºæ¥çš„ï¼ 1 APIä»‹ç»12345678// æ·»åŠ childVCï¼ˆå¦‚æžœå·²è¢«åŠ åœ¨åˆ«çš„VCä¸Šäº†å…ˆç§»é™¤å†æ·»åŠ ï¼‰- (void)addChildViewController:(UIViewController *)childController NS_AVAILABLE_IOS(5_0);// selfä»Žçˆ¶VCä¸­ç§»é™¤ï¼Œæ³¨æ„iOS7ä¸­ä¼šå´©æºƒï¼Œios7ä¸­æœ€å¥½è®©çˆ¶ç±»åŽ»ç§»é™¤- (void)removeFromParentViewController NS_AVAILABLE_IOS(5_0);// çˆ¶VCåˆ‡æ¢ä¸¤ä¸ªå­ChildVC,fromViewController.view removeFromeSuperViewï¼›self.view addSubview:toViewController.viewã€‚- (void)transitionFromViewController:(UIViewController *)fromViewController toViewController:(UIViewController *)toViewController duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options animations:(void (^ __nullable)(void))animations completion:(void (^ __nullable)(BOOL finished))completion NS_AVAILABLE_IOS(5_0); å…³äºŽwillMoveToParentViewControlleræ–¹æ³•å’ŒdidMoveToParentViewControlleræ–¹æ³•çš„ä½¿ç”¨1234567891011121314151617181920212223- (void)willMoveToParentViewController:(nullable UIViewController *)parent NS_AVAILABLE_IOS(5_0);- (void)didMoveToParentViewController:(nullable UIViewController *)parent NS_AVAILABLE_IOS(5_0);/*1.è¿™ä¸¤ä¸ªæ–¹æ³•ç”¨åœ¨å­è¯•å›¾æŽ§åˆ¶å™¨äº¤æ¢çš„æ—¶å€™è°ƒç”¨ï¼å³è°ƒç”¨transitionFromViewController æ–¹æ³•æ—¶ï¼Œè°ƒç”¨ã€‚*/ /*2.å½“è°ƒç”¨willMoveToParentViewControlleræ–¹æ³•æˆ–didMoveToParentViewControlleræ–¹æ³•æ—¶ï¼Œè¦æ³¨æ„ä»–ä»¬çš„å‚æ•°ä½¿ç”¨ï¼šå½“æŸä¸ªå­è§†å›¾æŽ§åˆ¶å™¨å°†ä»Žçˆ¶è§†å›¾æŽ§åˆ¶å™¨ä¸­åˆ é™¤æ—¶ï¼Œparentå‚æ•°ä¸ºnilã€‚å³ï¼š[å°†è¢«åˆ é™¤çš„å­è¯•å›¾æŽ§åˆ¶å™¨ willMoveToParentViewController:nil];å½“æŸä¸ªå­è¯•å›¾æŽ§åˆ¶å™¨å°†åŠ å…¥åˆ°çˆ¶è§†å›¾æŽ§åˆ¶å™¨æ—¶ï¼Œparentå‚æ•°ä¸ºçˆ¶è§†å›¾æŽ§åˆ¶å™¨ã€‚å³ï¼š[å°†è¢«åŠ å…¥çš„å­è§†å›¾æŽ§åˆ¶å™¨ didMoveToParentViewController:çˆ¶è§†å›¾æŽ§åˆ¶å™¨];*/ /*3.æ— éœ€è°ƒç”¨[å­è§†å›¾æŽ§åˆ¶å™¨ willMoveToParentViewController:çˆ¶è§†å›¾æŽ§åˆ¶å™¨]æ–¹æ³•ã€‚å› ä¸ºæˆ‘ä»¬è°ƒç”¨[çˆ¶è§†å›¾æŽ§åˆ¶å™¨ addChildViewController:å­è§†å›¾æŽ§åˆ¶å™¨]æ—¶ï¼Œå·²ç»é»˜è®¤è°ƒç”¨äº†ã€‚åªéœ€è¦åœ¨transitionFromViewControlleræ–¹æ³•åŽï¼Œè°ƒç”¨[å­è§†å›¾æŽ§åˆ¶å™¨didMoveToParentViewController:çˆ¶è§†å›¾æŽ§åˆ¶å™¨];*//*4.æ— éœ€è°ƒç”¨[å­è§†å›¾æŽ§åˆ¶å™¨ didMoveToParentViewController:çˆ¶è§†å›¾æŽ§åˆ¶å™¨]æ–¹æ³•ã€‚å› ä¸ºæˆ‘ä»¬è°ƒç”¨[å­è§†å›¾æŽ§åˆ¶å™¨ removeFromParentViewController]æ—¶ï¼Œå·²ç»é»˜è®¤è°ƒç”¨äº†ã€‚åªéœ€è¦åœ¨transitionFromViewControlleræ–¹æ³•ä¹‹å‰è°ƒç”¨ï¼š[å­è§†å›¾æŽ§åˆ¶å™¨ willMoveToParentViewController:nil]ã€‚*/ 2 å­VCçš„ç”Ÿå‘½å‘¨æœŸ ç¤ºä¾‹ 12345678910111213JZKChildViewController *childVC1 = [[JZKChildViewController alloc] init];childVC1.view.backgroundColor = [UIColor yellowColor];childVC1.view.frame = CGRectMake(0, 100, 300, 300);// step 1[self addChildViewController:childVC1];// step 2[self.view addSubview:childVC1.view];dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;// step 3[childVC1.view removeFromSuperview];// step 4[childVC1 removeFromParentViewController];&#125;); step 1 æ—¶childVC1 123[JZKChildViewController initWithNibName:bundle:][JZKChildViewController loadView][JZKChildViewController viewDidLoad] step 2 æ—¶childVC1 123456[JZKChildViewController viewWillAppear:][JZKChildViewController viewWillLayoutSubviews][JZKChildViewController viewDidLayoutSubviews][JZKChildViewController viewWillLayoutSubviews][JZKChildViewController viewDidLayoutSubviews][JZKChildViewController viewDidAppear:] step 3 æ—¶childVC1 12[JZKChildViewController viewWillDisappear:][JZKChildViewController viewDidDisappear:] step 4 æ—¶childVC1 1[JZKChildViewController dealloc] 3 é—®é¢˜ddChildViewController VS addSubview å¾ˆç®€å•çš„ç›´æŽ¥ç”¨addsubviewï¼Œæ¯”è¾ƒå¤æ‚è€Œä¸”å¯å•ç‹¬å°è£…çš„ç”¨ddChildViewController Difference between addChildViewController and addSubview? å…¶å®ƒ What does addChildViewController actually do? When to use addChildViewController vs pushViewController]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ‹–å»¶å¿ƒç†å­¦]]></title>
    <url>%2F2016%2F12%2F01%2F%E6%8B%96%E5%BB%B6%E5%BF%83%E7%90%86%E5%AD%A6%2F</url>
    <content type="text"><![CDATA[å°æ­¥å¿«è·‘ã€æ·±å‘¼å¸ã€å¹³å¸¸å¿ƒã€å¤šè¿åŠ¨ã€å…è®¸ä¸å®Œç¾Žæ‹–å»¶VSè¡Œä¸ºäº†è§£ä½ è‡ªå·± æ‹–å»¶æƒ…ç»ªçš„æ ¹æºæ¶‰åŠåˆ°å†…å¿ƒæ„Ÿå—ã€ææƒ§ã€å¸Œæœ›ã€è®°å¿†ã€æ¢¦æƒ³ã€æ€€ç–‘ä»¥åŠåŽ‹åŠ›ã€‚ å¦ä¸€ä¸ªæ ¹æºæ˜¯æ‹–å»¶è€…ä¸Žæ—¶é—´çš„çº è‘›ï¼Œå¦‚æžœå°†æ—¶é—´çœ‹æˆä¸€ä¸ªéœ€è¦åˆ¶æœå’Œå–èƒœçš„å¯¹æ‰‹ï¼Œå°†æ›´åŠ æ‹–å»¶ï¼ ä»Žä½ çš„ç»éªŒä¸­å­¦ä¹ æ˜¯ä¸€ä»¶ä»¤äººå…´å¥‹çš„äº‹â€“ä¸å¦è®¤ã€ä¸é—å¿˜ã€ä¸åˆ¤æ–­ï¼Œè€Œæ˜¯å¦‚å®žçš„æŽ¥å—ï¼Œå¥½å¥½åˆ©ç”¨ï¼ ä¸ªäººç†è§£ï¼šå®³æ€•å°±æ˜¯è‡ªæ¬ºæ¬ºäººï¼Œäº‹å®žä¸Šæ²¡äººå…³å¿ƒä½ åˆ°åº•æ˜¯ä»€ä¹ˆæ ·å­ï¼Œå¦‚æžœè‡ªå·±å®³æ€•è‡ªå·±ï¼Œé‚£åªä¸è¿‡æ˜¯æ¬ºéª—è‡ªå·±ï¼ è´¨ç–‘æ‹–å»¶ æ™ºåŠ›å’Œæ‹–å»¶æ²¡æœ‰å…³ç³»ï¼ æ‹–å»¶æ€ªåœˆï¼šå¼€å§‹ä¿¡å¿ƒæ»¡æ»¡-&gt;å¤„ç†ä¸å¥½-&gt;æ‹–å»¶-&gt;æ‡Šæ¼-&gt;æ‰¾å€Ÿå£-&gt;å†æ¬¡ä¿¡å¿ƒæ»¡æ»¡ å…è®¸ä¸å®Œç¾Žï¼Œå­¦ä¼šä¸ææƒ§ï¼Œè¦æœ‰æ•¬ç•å¿ƒï¼Œé™å¿ƒæ…¢æ…¢æ¥ï¼ å®¡é—®æ‹–å»¶ ææƒ§å¤±è´¥ï¼Œè¿½æ±‚å®Œç¾Žï¼ä¸€ä¸ç‚¹çš„å¤±è¯¯ã€æŒ«æŠ˜ã€ç„¦è™‘ã€ç”šè‡³ææƒ§ï¼Œå°±ä»£è¡¨ç€ä¸å®Œç¾Žï¼Œä¸å®Œç¾Žå°±ä»£è¡¨ç€å¤±è´¥ï¼ æˆ‘è¡¨çŽ°çš„å¥½ï¼Œæˆ‘å¾ˆæœ‰èƒ½åŠ›ï¼Œæ‰€ä»¥æˆ‘å¾ˆå–œæ¬¢è‡ªå·±ï¼æˆ–æˆ‘è¡¨çŽ°çš„ä¸å¥½ï¼Œæˆ‘æ²¡æœ‰èƒ½åŠ›ï¼Œæ‰€ä»¥æˆ‘ä¸å–œæ¬¢è‡ªå·±ï¼äº‹å®žä¸Šæ˜¯è‡ªæˆ‘ä»·å€¼æ„Ÿ ç­‰äºŽ èƒ½åŠ› ä¸ç­‰äºŽ è¡¨çŽ°ï¼ å®Œç¾Žä¸»ä¹‰çš„ä¸–ç•Œï¼šå¯¹çŠ¯é”™æžä¸ºåœ¨æ„æˆ–å¯¹è‡ªå·±æœŸå¾…è¿‡é«˜ï¼Œä¸å¤ŸçŽ°å®žï¼›è‡ªå‘ï¼Œæ— æ³•å¿å—å¹³åº¸æˆ–è‡ªå¤§ï¼Œå‡¡äº‹ä¿¡æ‰‹æ‹ˆæ¥ï¼›ä¸€åˆ‡éƒ½è‡ªå·±æ¥ï¼Œè®¤ä¸ºæ±‚åŠ©æ˜¯è½¯å¼±çš„æ ‡å¿—ï¼›æ— æ³•å¿å—å¤±åŽ»ï¼›æ€»æœ‰ä¸€ä¸ªæ­£ç¡®çš„è§£å†³åŠžæ³•ï¼Œè¦ä¹ˆå…¨éƒ¨è¦ä¹ˆæ²¡æœ‰ï¼› å®Œç¾Žä¸»ä¹‰è€…å®¹æ˜“ç»å¯¹åŒ–ï¼Œå¸¸ä»¥ç¾éš¾æ€§çš„æ–¹å¼æ€è€ƒé—®é¢˜ï¼›è€Œå¹»æƒ³çš„ï¼Œçœ‹ä¸è§ï¼Œæ‘¸ä¸ç€çš„ç¾éš¾æ›´æ˜¾å¾—å¯æ€• å¯¹è¯æ‹–å»¶ï¼šæ‹–å»¶ä½ å¥½ï¼ŒæˆåŠŸå†è§ å®žé™…ä¸Šå¾ˆå¯èƒ½æ˜¯åœ¨ææƒ§æˆåŠŸï¼Œå¹¶åˆ©ç”¨æ‹–å»¶æ¥é¿å…æˆåŠŸçš„åˆ°æ¥ï¼ é€ƒé¿æˆåŠŸçš„ä¸€èˆ¬å¿ƒç†åŽŸå› ï¼šæˆåŠŸéœ€è¦å¤ªå¤šçš„ä»˜å‡ºï¼Œè¿™ä»¤æˆ‘æœ›è€Œå´æ­¥ï¼›æˆåŠŸæ˜¯å±é™©çš„ï¼Œæ€»æœ‰äººä¼šå—åˆ°ä¼¤å®³ï¼›æˆåŠŸæ˜¯ç¦åŒºï¼Œæˆ‘è§‰å¾—è‡ªå·±ä¸å¯¹åŠ²ï¼› æˆåŠŸä¸æ˜¯ä¸€è¹´è€Œå°±çš„ï¼Œé¡¾è™‘å®³æ€•éƒ½å¾ˆæ­£å¸¸ï¼Œä½†è¿™ä¸æ˜¯æ‹–å»¶çš„ç†ç”±ï¼Œé£Žé™©å’Œæœºé‡å¹¶å­˜ï¼Œjust do itï¼åšå¥½è‡ªå·±å°±ä¸é”™äº†ï¼Œå“ªæœ‰æ—¶é—´å’Œç²¾åŠ›åœ¨ä¹Žåˆ«äººæ€Žä¹ˆæƒ³çš„ï¼ æ‹–å»¶VSå¿ƒç†æŒ£æ‰Žä¸­çš„æ‹–å»¶è€…ï¼šææƒ§åœ¨äº‰å¤ºæˆ˜ä¸­å¤±è´¥ äº‰å¤ºæŽ§åˆ¶æƒçš„è¾ƒé‡ï¼Œæˆ‘åä¸å’Œæˆ‘å°±ä¸ï¼šè·Ÿè§„åˆ™æ–—ï¼Œè·Ÿåˆ«äººæ–—ï¼Œè·Ÿè‡ªå·±æ–—ï¼å…¶å®žæ˜¯ è‡ªæˆ‘ä»·å€¼æ„Ÿ = èƒ½åŠ›ï¼ˆå…·æœ‰ç‹¬ç«‹æ€§ï¼Œåå¯¹å—æŽ§åˆ¶ï¼‰= è¡¨çŽ°ï¼ˆé€šè¿‡æ‹–å»¶ï¼Œâ€œæˆ‘â€è¯´äº†ç®—ï¼‰ è¡¨çŽ°è‡ªå·±ï¼Œè¡¨çŽ°è‡ªå·±æ„å‘³ç€æš´éœ²è‡ªå·±çš„ç¼ºç‚¹ã€æ„å‘³ç€æ‰¿æ‹…è´£ä»»ã€æ„å‘³ç€çªå‡ºã€æ„å‘³ç€åˆä½œã€è¿˜æ„å‘³ç€å¯èƒ½çš„å¤±è´¥ç­‰ç­‰ï¼ä½†è¿™æ›´æ„å‘³ç€è¿›æ­¥ï¼ è¦çŸ¥é“æœªæ¥æ˜¯ä¸å¯ç¡®å®šçš„ï¼Œå³ä¾¿ä½ éžå¸¸è®¤åŒçš„æŸäº›è§‚ç‚¹ï¼Œéžå¸¸ç¡®å®šçš„äº‹æƒ…ï¼Œæœªæ¥ä¹Ÿæœ‰å¯èƒ½å‘ç”Ÿæ”¹å˜çš„ï¼ä½•å†µä¸€äº›äº‹æƒ…æœ¬æ¥å¹¶æ²¡æœ‰æƒ³è±¡çš„é‚£ä¹ˆå¯æ€•ã€é‚£ä¹ˆæ­»æ¿ï¼æ—¢ç„¶å¦‚æ­¤ï¼Œé‚£ä¸ºä½•ææƒ§ï¼Œä¸ºä½•å®³æ€•ï¼å…ˆå¹²äº†å†è¯´ï¼Œé‚£äº›é€‰æ‹©æ”¾å¼ƒçš„äººï¼Œä»–ä»¬ä¸ä¼šå¤±è´¥ï¼Œå› ä¸ºä¸€å¼€å§‹ä»–ä»¬å°±å¤±è´¥äº†ï¼ å¦‚æžœä¸èƒ½æŠ‰æ‹©ï¼Œå“ªä¸ºä»€ä¹ˆä¸å¬å–åˆ«äººçš„å»ºè®®ï¼Ÿé€‰æ‹©çš„æƒåˆ©åœ¨äºŽè‡ªå·±ï¼Œå¤šå¬å»ºè®®æ°¸è¿œæ˜¯å¥½çš„ï¼ å¿ƒç†èˆ’é€‚åŒºï¼šå¯¹äº²è¿‘ä¸Žç–è¿œçš„ææƒ§ å¯¹ç–è¿œçš„ææƒ§ï¼Œæˆ‘å†³ä¸ç‹¬è‡ªè¡Œèµ°ï¼šå®³æ€•å­¤ç‹¬ã€å®³æ€•è¿·èŒ«ã€å®³æ€•å¤±åŽ»ã€ ææƒ§äº²è¿‘ï¼Œå…³ç³»å¤ªè¿‘è®©äººä¸èˆ’æœ ä¸ªäººç†è§£ï¼šæ‰¯æ·¡ï¼Œè°è¿˜æ²¡ä¸ªå¿ƒç†èˆ’é€‚åŒºï¼Œä¸è€½æäº‹ä¸å°±å¾—äº†ï¼è¯¥æ¥çš„è‡ªç„¶ä¼šæ¥ï¼Œè¯¥èµ°çš„è‡ªç„¶ä¼šèµ°ï¼ä¸å¦‚æ„åä¹‹å…«ä¹ï¼Œä½†æ±‚ä¸€äºŒï¼ æ‹–å»¶æ—¶é’Ÿï¼šä½ çŸ¥é“çŽ°åœ¨å‡ ç‚¹å—ï¼Ÿ å®¢è§‚æ—¶é—´å’Œä¸»è§‚æ—¶é—´ï¼šæˆ‘è®¤ä¸ºèŠ±çš„æ—¶é—´å’Œå®žé™…ä¸ŠèŠ±çš„æ—¶é—´çš„å†²çªï¼Œé€ æˆç„¦è™‘å’Œæ‹–å»¶ï¼æ— è®ºæ˜¯æ²‰æµ¸åœ¨è¿‡åŽ»è¿˜æ˜¯æ²‰æµ¸åœ¨æœªæ¥ï¼Œéƒ½ä¸å¦‚æŠŠæ¡ä½çŽ°åœ¨ï¼ æ—¶é—´å°±åœ¨é‚£é‡Œï¼Œä¸é•¿ä¸çŸ­ï¼Œä¸å¿«ä¸æ…¢ï¼Œå”¯ä¸€å˜åŒ–çš„æ˜¯è‡ªå·±ï¼è¦å­¦ä¼šæŽ¥å—ï¼Œæ›´è¦æŽ¥å—é€‚åº”ï¼é€‚åº”ä¸»å®¢è§‚æ—¶é—´ï¼Œå¹¶æœ‰èƒ½åŠ›åœ¨ä¸¤è€…ä¹‹é—´æœ‰å¼¹æ€§ã€è‡ªç„¶çš„è¿‡æ¸¡å’Œå˜æ¢ æ‹–å»¶VSå¤§è„‘ä¸–ç•Œä¸Šå­˜åœ¨â€œæ‹–å»¶åŸºå› â€å— ä½ çš„å¤§è„‘å¤„åœ¨ä¸æ–­åœ°å˜åŒ–ä¸­ï¼šè¦å­¦ä¼šè·³å‡ºå›ºæœ‰æ¨¡å¼ï¼Œå­¦ä¹ æ‰¹åˆ¤æ€§æ€ç»´ æ„Ÿå—å¾ˆé‡è¦ï¼Œå³ä¾¿å®ƒå¤„äºŽæ— æ„è¯†ä¸­ï¼šæŽ¥å—å¹¶å¿ç€ï¼Œæ·±å‘¼å¸ï¼é‡è¦çš„æ˜¯ä¸‹ä¸€æ­¥æ€Žä¹ˆåšï¼Œè€Œä¸æ˜¯çŽ°åœ¨å¤šéš¾å—å¤šå®³æ€•ï¼ æ½œä¼è®°å¿†çš„å½±å“ï¼šæ·±å‘¼å¸ï¼Œå‘Šè¯‰è‡ªå·±æ´»åœ¨å½“ä¸‹ è”ç»“çš„é€šè·¯ï¼šæ²Ÿé€šä¸ç•…é€ æˆè‡ªå‘ï¼ å·¦é€†è½¬ï¼šå¤šé¼“åŠ±ï¼Œå¤šå¥–åŠ±ï¼Œå°‘è‡ªå˜²ï¼Œä¸è‡ªå¼ƒï¼ å¦‚ä½•æ‰“é€ å¤§è„‘çš„å…¨å±€é¢†å¯¼åŠ› æ‰§è¡ŒåŠŸèƒ½éšœç¢ï¼šåˆ†è§£æ‹†åˆ†ç›®æ ‡ï¼Œè‡ªå·±å¼€å¯¼è‡ªå·± æ³¨æ„åŠ›ç¼ºå¤±ç´Šä¹±ï¼šæ³¨æ„åŠ›åˆ†æ•£ã€å†²åŠ¨å’ŒèºåŠ¨ä¸å®‰ï¼æ ¹æœ¬åŽŸå› æ˜¯æ²¡æœ‰æŠ‘åˆ¶èƒ½åŠ›ï¼æ‰¾åˆ°å–œæ¬¢çš„ æˆ– è‚¾ä¸Šè…ºç´ â€“åŠ å¼ºè¿åŠ¨ï¼ æŠ‘éƒç—‡çš„å€¾å‘äºŽå˜ç§ï¼šå½“ä½ æŠ‘éƒæ—¶ï¼Œä½ ä¼šæ„Ÿåˆ°èƒ½é‡ä¸è¶³ï¼Œä¸æ„¿æ„å‚ä¸Žï¼Œå¤±åŽ»å…´è¶£ï¼Œæ²¡æœ‰ç›®æ ‡ï¼Œä¸åœ¨ä¹è§‚ï¼æ–¹æ³•ï¼šèŠå¤©+è¿åŠ¨ï¼Œæ¯”è¾ƒæœ‰æ•ˆ å¼ºè¿«ç—‡ï¼šäº‹æƒ…å·²ç»å·²ç»è§£å†³äº†ï¼Œè¿™æ˜¯æˆ‘çš„å¼ºè¿«ç—‡åœ¨ä½œæ€ªï¼ é‚‹é¢åˆ†å­å’Œå›¤ç§¯ç‹‚ï¼šä¼˜æŸ”å¯¡æ–­ + å¯¹çŠ¯é”™è¯¯çš„ææƒ§ = é‚‹é¢åˆ†å­ï¼Œé‚‹é¢åˆ†å­å‡çº§ä¸ºå›¤ç§¯ç‹‚ï¼æ–¹æ³•ï¼šè½¬ç§»æ³¨æ„åŠ›+å¿«åˆ€æ–©ä¹±éº» åŽ‹åŠ›å¯¹äººçš„å½±å“ï¼šåŽ‹åŠ›ï¼Œé¢å¯¹æˆ–é€ƒé¿ï¼Œéƒ½éœ€è¦æ—¶é—´æ¥æ¢å¤ç²¾åŠ› ç”Ÿç‰©èŠ‚å¥ï¼šè°ƒæ•´èŠ‚å¥ï¼Œä¼‘æ¯å’Œè¿åŠ¨åŒæ ·é‡è¦ ä½ æ˜¯æ€Žæ ·å˜æˆä¸€ä¸ªæ‹–å»¶è€…çš„ å®¶åº­å€¾å‘é€ æˆæ‹–å»¶ï¼šæ–½åŽ‹ã€æ€€ç–‘ã€æŽ§åˆ¶ã€ä¾é™„å’Œç–è¿œï¼æ ¹æœ¬å°±æ˜¯åŽ‹åŠ›å’Œå­¤ç‹¬ æ— æ¡ä»¶çš„æ”¯æŒä¹Ÿä¼šé€ æˆæ‹–å»¶ç—‡ï¼Œå› æ­¤åŽ‹åŠ›å¤ªå¤§äº†ï¼Œæ‰€æœ‰äººéƒ½æ”¯æŒä½ ï¼Œä½ å°±ä¸èƒ½å¤±è´¥ï¼Œä¸èƒ½çŠ¯é”™ï¼è€Œä¸å¤±è´¥ï¼Œä¸çŠ¯é”™æœ€å¥½çš„åŠžæ³•ä¼¼ä¹Žå°±æ˜¯æ‹–å»¶ æ‹–å»¶è¡Œä¸ºæ¨¡å¼çš„æ³•åº­å¤§è°ƒæŸ¥ å‹‡æ•¢ä¸æ˜¯æ²¡æœ‰ææƒ§ï¼Œè€Œæ˜¯å…‹æœææƒ§ï¼Œæˆ˜èƒœææƒ§ åŽ»è®¤è¯†é‚£ä¸ªæ‹–å»¶ä¹‹å¤–çš„ä½ å¾ˆé‡è¦ï¼Œé‚£ä¸ªä½ å°±å¯ä»¥æŒ‰ç…§ä½ è‡ªå·±çš„æœ¬æ¥é¢ç›®ï¼Œè€Œä¸æ˜¯æŒ‰ç…§ä½ æ‰€å¸Œæœ›æˆ–è€…ä½ è®¤ä¸ºçš„æ ·å­ï¼Œæ¥æŽ¥å—è‡ªå·±ï¼è¯šå®žçš„äº†è§£è‡ªå·±ï¼ŒçŽ°å®žçš„è¯„ä»·è‡ªå·±ï¼Œå¹¶æœ€ç»ˆæŽ¥å—ä½ æ‰€å‘çŽ°çš„é‚£ä¸ªè‡ªå·±ï¼ æœ€å¯æ€•çš„äº‹æƒ…å°±æ˜¯åŽ»å…¨ç„¶çš„æŽ¥å—è‡ªå·±ã€‚è¿™ä¸ªâ€œå¯æ€•â€çš„æŽ¥å—è‡ªå·±çš„è¿‡ç¨‹â€“æŽ¥å—æ‰€æœ‰çš„ç¼ºé™·ã€åˆ›ç—›å’Œä¼¤ç–¤ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥è®©ä½ å¦‚é‡Šè´Ÿé‡ï¼ é¢å¯¹çŽ°å®ž ç”Ÿç‰©çŽ°å®žï¼šå¯¹äºŽè‡ªå·±çš„å¼±é¡¹å¿ƒæ€€æ•¬ç•çš„ç»™äºˆå…³æ³¨ï¼Œå‹å–„çš„å¯¹å¾…è‡ªå·±ï¼Œå¹¶é€šè¿‡é”»ç‚¼æé«˜ç›¸åº”çš„æŠ€èƒ½ï¼ æƒ…æ„ŸçŽ°å®žï¼šåœ¨ä½ ç„¦å¤´çƒ‚é¢çš„æ—¶å€™ä¸è¦æŒ‡æœ›å¯ä»¥è¿…é€Ÿæˆ–è€…å®Œå…¨çš„ä»Žä¸­æ¢å¤è¿‡æ¥ï¼å…¶å®žæ„Ÿè§‰ä¸€ä¸ªæ¯”è¾ƒé è°±çš„åŠžæ³•å°±æ˜¯æ·±å‘¼å¸ï¼Œæ•°åˆ°20å†åšä¸‹ä¸€æ­¥ååº”ï¼ ä»·å€¼çŽ°å®žï¼šä»·å€¼è§‚æ˜¯å¦ç›¸åŒï¼Œæ˜¯å¦ç¬¦åˆå¿ƒæ„ï¼ä¹Ÿå°±æ˜¯æ‰¾å¿—è¶£ç›¸æŠ•çš„ ä¸è¦è‡ªæ¬ºæ¬ºäººï¼šä¸‡äº‹æ— ç¾Žå¥½ï¼›åŠªåŠ›å°è¯•æ˜¯ä¸€ä»¶å¥½äº‹ï¼Œè€Œä¸æ˜¯æ„šè ¢æˆ–è½¯å¼±çš„è¡¨çŽ°ï¼›å¤±è´¥å¹¶ä¸å±é™©ï¼Œå¤±è´¥æ‰æ˜¯ç”Ÿæ´»çš„å¸¸æ€ï¼›çœŸæ­£çš„å¤±è´¥æ˜¯ä¸æ•¢åŽ»ç»åŽ†ï¼Œæ¯ä¸ªäººéƒ½æ˜¯å±€é™ï¼ŒåŒ…æ‹¬æˆ‘è‡ªå·±ï¼›å¦‚æžœé‚£æ˜¯ä¸€ä»¶å€¼å¾—åŽ»åšçš„äº‹æƒ…ï¼Œé‚£ä¹ˆä¸ºå®ƒçŠ¯é”™è¯¯ä¹Ÿæ˜¯å€¼å¾—çš„ï¼›æŒ‘æˆ˜æœ‰åŠ©äºŽæˆ‘çš„æˆé•¿ï¼›æˆ‘æœ‰æˆåŠŸçš„æƒåˆ©ï¼Œæˆ‘ä¹Ÿèƒ½åº”å¯¹åˆ«äººå¯¹æ­¤çš„ååº”ï¼›å¦‚æžœè¿™ä¸€æ¬¡æˆ‘æ²¡æœ‰åšå¥½ï¼Œä¸‹ä¸€æ¬¡æˆ‘è¿˜æœ‰æœºä¼šï¼›éµå®ˆåˆ«äººçš„è§„åˆ™åŽ»åšäº‹ï¼Œå¹¶ä¸æ„å‘³ç€æˆ‘ä¸€ç‚¹æƒåˆ©ä¹Ÿæ²¡æœ‰ï¼›å½“æˆ‘å±•çŽ°å‡ºçœŸå®žçš„è‡ªæˆ‘ï¼ŒçœŸæ­£å–œæ¬¢æˆ‘çš„äººå°±ä¼šè·Ÿæˆ‘å¦è¯šç›¸å¯¹ï¼›ç­”æ¡ˆå¾ˆå¤šï¼Œä½†æˆ‘éœ€è¦æ‰¾åˆ°é‚£ä¸ªæœ€ç¬¦åˆæˆ‘çš„æ„Ÿè§‰çš„ç­”æ¡ˆ æ‹–å»¶VSå¾æœä¹‹æˆ˜é‡‡å–è¡ŒåŠ¨ è§‚å¯Ÿå¹¶è®°å½•ç—›ç‚¹ï¼Œæ‰¾åˆ°éœ€æ±‚ï¼Œjust do it ! æ”¹å˜æ˜¯ä¸€ä¸ªè¿‡ç¨‹ æ…¢æ…¢æ¥ï¼Œå¹³å¸¸å¿ƒï¼just do it ! æ‰¾å‡ºå¯¼è‡´æ‹–å»¶çš„å› ç´ ï¼š å¯¹æˆåŠŸæ‰€éœ€çš„èƒ½åŠ›ç¼ºä¹è‡ªä¿¡ï¼šå¯ä»¥è®¾ç«‹ä¸€ä¸ªæ¯”è¾ƒçŽ°å®žçš„ã€èƒ½å¤Ÿè¾¾æˆçš„ã€åŒæ—¶åˆå®¹æ˜“è¡¡é‡çš„ç›®æ ‡ï¼›å†ç»†åˆ†æˆå®¹æ˜“æ“ä½œçš„å°å•å…ƒã€‚ å¯¹è¦åŽ»å®Œæˆçš„æŸä¸ªä»»åŠ¡æœ‰åæ„Ÿå¿ƒç†ï¼Œè®¤å®šåšäº‹çš„è¿‡ç¨‹ä¸­ä¼šé­é‡å¾ˆå¤šå›°éš¾ï¼Œç»“å±€ä¹Ÿä¼šå¾ˆæƒ¨ï¼šè‡ªå·±å“è‡ªå·±ï¼Œæ”¾è½»æ¾ + å¥–åŠ± ç›®æ ‡å’Œå›žæŠ¥å¤ªé¥è¿œäº†ï¼Œæ„Ÿå—ä¸åˆ°å¯¹æˆ‘æœ‰ä»€ä¹ˆæ„ä¹‰ï¼šæ‹†åˆ†ç›®æ ‡ + å¥–åŠ± æ— æ³•è‡ªæˆ‘çº¦æŸ å¦‚ä½•è¿ç”¨è¿™äº›æŠ€å·§ï¼šä¸€æ¬¡å°è¯•ä¸€ä¸ªæŠ€å·§ã€æ…¢æ…¢æ¥ã€è§‚å¯Ÿå†…å¿ƒçš„æŠµæŠ—ã€å†™æ—¥è®°è®°å½•ä¼˜ç¼ºç‚¹è®°å½•å¿ƒæ€å˜åŒ–ç­‰ä½œæˆ˜å‰ä¼ ï¼šæ‹–å»¶å¤§æ¸…ç‚¹ ä¸è¦æ‰¹åˆ¤ï¼Œåªè¦æ¸…ç‚¹ ç›˜ç‚¹å†…å¿ƒçš„æŒ£æ‰Ž å–„æ„çš„å¯¹å¾…å†…åœ¨æˆ–å¤–åœ¨çš„ç»“æžœ æ‹–å»¶çš„é¢†åŸŸã€é£Žæ ¼ã€å€Ÿå£ ä½œæˆ˜æ­¦å™¨ï¼šæ˜Žç¡®çš„ç›®æ ‡ä¸Žå¯æ‰§è¡Œçš„è®¡åˆ’ å¯æ“ä½œç›®æ ‡ç‰¹æ€§ï¼šå¯è§‚å¯Ÿæ€§ã€å…·ä½“æ€§å’Œç‰¹æ®Šæ€§ã€å¯ä»¥è¢«åˆ†è§£æˆå‡ ä¸ªå°æ­¥éª¤ã€ç¬¬ä¸€æ­¥å¯ä»¥åœ¨äº”åˆ†é’Ÿå†…è¢«å®Œæˆã€ å¯åŠ¨è®¡åˆ’ã€ç•ªèŒ„25åˆ†é’Ÿã€5åˆ†é’Ÿä¼‘æ¯ã€å¿ å®žçš„è®°å½•ä¸­æ–­ä¸Žå€Ÿå£ã€æ€»ç»“å¥–åŠ±ä¸Žåæ€ã€ä¸‹ä¸€æ­¥è®¡åˆ’ çµæ´»å¯¹å¾…é¡¹ç›®ï¼ˆæ—¶é—´ã€è§„åˆ’ã€èšåˆæ‹†åˆ†ç­‰ï¼‰ã€æ— éœ€å®Œç¾Žåªéœ€è¿›æ­¥ çµæ´»å¯¹å¾…æ—¶é—´ï¼Œé€åŽ»çš„å·²ç»é€åŽ»ï¼Œä¸Žå…¶æ‡Šæ¼ä¸å¦‚æŠŠæ¡çŽ°åœ¨ï¼ ä½œæˆ˜æ–¹æ³•Aï¼šå­¦ä¼šæ€Žæ ·åˆ¤æ–­æ—¶é—´ æ—¶é—´æ˜¯å›ºå®šçš„ã€å¯è¡¡é‡çš„ã€æœ‰é™çš„ ä¸ªäººç†è§£ï¼šå¤§å¤šæ•°æƒ…å†µé¢„ä¼°æ—¶é—´éƒ½æ¯”å®žé™…èŠ±è´¹æ—¶é—´çŸ­ï¼Œæˆ‘çš„åŠžæ³•æ˜¯é¢„ä¼°æ—¶é—´*ç³»æ•° è®¡åˆ’å¹¶ä¸æ„å‘³ç€æ¯ä¸€å¤©æ¯ä¸€ä¸ªå°æ—¶éƒ½è¢«å æ®ï¼Œè¦æœ‰ç¼“å†²åŒºï¼è€Œä¸”è¦æå‰è€ƒè™‘æ„å¤–çš„æƒ…å†µï¼ è¦æƒ³è®¡åˆ’æˆä¸ºä½ çš„æœ‹å‹ï¼Œè®¡åˆ’åº”è¯¥åŠ¡å®žã€åˆç†ã€‚è®¡åˆ’å¿…é¡»å›´ç»•ç€è„šè¸å®žåœ°åšäº‹æƒ…è¿™ä¸ªæ ¸å¿ƒï¼Œè€Œä¸æ˜¯è€åœ¨ç›˜ç®—ä½ åº”è¯¥å¹²ä»€ä¹ˆ è·Ÿè¸ªç›®æ ‡è¿›åº¦ï¼Œå¡«å†™åˆ†æ®µæ—¶é—´è¡¨è®°å½•æ¯æ®µæ—¶é—´åšçš„å•¥ï¼è€Œä¸”æœ‰åŠ©äºŽæ›´æœ‰æ•ˆçš„åˆ©ç”¨ç¢Žç‰‡åŒ–æ—¶é—´ï¼Œå‘Šè¯‰è‡ªå·±ç¢Žç‰‡åŒ–æ—¶é—´ä¸æ˜¯ä¸€æ— æ‰€èŽ·ï¼è‡ªæˆ‘ç›‘æµ‹æœ‰åŠ©äºŽå¢žè¿›å·¥ä½œæ—¶é—´å’Œæå‡å·¥ä½œæˆå°± æå‡ä½ å®šæ—¶èƒ½åŠ›çš„æŠ€å·§ï¼šç»ƒä¹ åˆ¤æ–­æ—¶é—´ï¼Œé¢„ä¼°æ—¶é—´ä¸Žå®žé™…æ—¶é—´çš„å¯¹æ¯”æœ‰åŠ©äºŽæå‡æ—¶é—´åˆ¤æ–­ï¼å­¦ä¼šåˆ©ç”¨é›¶ç¢Žæ—¶é—´ï¼Œè€Œä¸æ˜¯æ¶ˆæžçš„ç­‰å¾…æ•´å—çš„æ—¶é—´æ®µå‡ºçŽ°ï¼Œä¸€æ­¥æ­¥å‘å‰æŒªï¼Œä¹Ÿæ˜¯å‰è¿›ï¼ èƒ¡èåœæ”¿ç­–è¦æ¯”å¤§æ£’æ”¿ç­–è¦ç®¡ç”¨çš„å¤šï¼ æ¯ä¸ªæ–¹æ¡ˆéƒ½æœ‰ä¼˜åŒ–ç©ºé—´ï¼Œä½†æœ€ä¸»è¦çš„æ˜¯è§£å†³é—®é¢˜å’Œæ€§ä»·æ¯”ï¼Œè®°ä½æ—¶é—´æ˜¯æ˜‚è´µçš„èµ„æºï¼Œä¸€ç›´åœ¨ç ”ç©¶æœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ¡ˆä¹ŸèŠ±è´¹å¾ˆå¤šçš„æ—¶é—´ ä¸è¦è¿‡åˆ†åˆ†æ•£ç²¾åŠ›ï¼Œä¸è¦åˆ©ç”¨å¿™ç¢Œæ¥é€ƒé¿æ›´é‡è¦çš„äº‹æƒ… æ‰¾å‡ºä½ çš„æœ€ä½³æ—¶é—´ï¼Œè€Œä¸æ˜¯å¹»æƒ³ç€æˆ‘è¦æ€Žæ ·æ€Žæ · å­¦ä¼šåœ¨è¿‡åŽ»ã€çŽ°åœ¨å’Œæœªæ¥ä¹‹é—´å–å¾—è®¤çŸ¥ä¸Šçš„å¹³è¡¡ï¼Œä¸è¦é»æ»žåœ¨æ—¶é—´ä¸­ï¼ äº«å—ä½ çš„â€œè‡ªç”±â€æ—¶é—´ã€‚â€œæ‹–å»¶â€ä¸æ˜¯â€œè‡ªç”±â€ï¼Œç”šè‡³æ‹–å»¶éƒ½ä¸èƒ½è®©ä½ å¼€å¿ƒï¼ ä½œæˆ˜æ–¹æ³•Bï¼šå­¦ä¼šæŽ¥å—å’Œæ‹’ç» æˆ‘ä»¬åº”è¯¥æœ‰æ„è¯†çš„æŽ¥å—é‚£äº›æé«˜æˆ‘ä»¬ç”Ÿæ´»å“è´¨çš„äº‹æƒ…ï¼Œè€Œæ‹’ç»é‚£äº›å¯¹æ­¤æ— ç›Šçš„äº‹æƒ…ï¼Œå¹¶ä¸”åº”è¯¥ç›´æŽ¥çš„è¡¨è¾¾å‡ºæ¥ï¼Œè€Œä¸åº”è¯¥é€šè¿‡æ‹–å»¶çš„æ–¹å¼æ¥æ‹’ç»ã€‚é‡è¦çš„æ˜¯çŸ¥é“æƒ³è¦ä»€ä¹ˆï¼Œä¸æƒ³è¦ä»€ä¹ˆ å­¦ä¼šæŽ¥å—æœ‰ç›ŠäºŽä½ çš„äººå’Œäº‹ï¼šé€‰å¯¹äººã€æ”¾å¼€å¿ƒèƒ¸ä¸è¦å¤„å¤„ä¸ºè‡ªå·±è¾©è§£ã€åšä¸€ä¸ªå…¬å¼€çš„æ‰¿è¯ºã€åšå®Œå°±è¦æŽ¥å—å¥–åŠ±ã€æ‹–å»¶å°±è¦å—åˆ°æƒ©ç½šã€è·Ÿåˆ«äººä¸€èµ·åˆ¶è®¢è®¡åˆ’ã€å°è¯•æ–°çš„æŒ‘æˆ˜ã€åšæ›´å¤šä½ æ‰€çƒ­çˆ±çš„äº‹æƒ…ã€ å½“ä½ å¯»æ±‚å¸®åŠ©çš„æ—¶å€™ï¼Œæ²¡å¿…è¦ä¸€å®šè¦é‡‡ç”¨å®ƒï¼›å½“åˆ«äººå¾ˆæœ‰æ´žå¯ŸåŠ›ï¼Œçœ‹åˆ°äº†ä¸€äº›ä½ çœ‹ä¸åˆ°çš„äº‹æƒ…ï¼Œä¸å¿…è‡ªå‘ï¼ äº¤è°ˆå¾ˆé‡è¦ï¼Œå¯ä»¥è¿›ä¸€æ­¥æ‹‰ä¸€ä¸ªäººè·Ÿä½ ä¸€èµ·åšäº‹(è‡³å°‘æœ‰äººè·Ÿä½ ä¸€å—å—ç½ªï¼Œå“ˆå“ˆ) å­¦ä¼šæ‹’ç»é‚£äº›æ²¡æ„ä¹‰çš„è¿½æ±‚ å¯¹æµªè´¹æ—¶é—´å’Œè®©ä½ é€€æ­¥çš„äººå’Œäº‹è¯´ä¸ï¼šå¯¹æ²¡æ„ä¹‰çš„äº‹æƒ…è¯´ä¸ã€ å¯¹ä¸å¿…è¦çš„äº‹æƒ…è¯´ä¸ï¼›ä¸èƒ½è¯´ä¸ï¼Œé‚£å°±å‡å°‘å½±å“ å¯¹æ‚ä¹±æ— åºè¯´ä¸ï¼šæ€Žæ ·æ‰èƒ½è¿‡çš„æ›´å¹¸ç¦ï¼Œå®šæœŸæ‰”ä¸œè¥¿ï¼ŒåŒ…æ‹¬çœŸå®žçš„æˆ–å¤´è„‘ä¸­è™šæ‹Ÿçš„ï¼å®šæœŸè‡ªæŸ¥è‡ªçœï¼ å¯¹ç”µå­ä¸Šç˜¾è¯´ä¸ï¼šæœ€ç®€å•æœ€æœ‰æ•ˆçš„æ–¹æ³•ï¼Œå…³æŽ‰æ‰‹æœºå…³æŽ‰ç”µè„‘ç­‰ åšæŒä¿¡æ¯å‡è‚¥ï¼š90%çš„ä¿¡æ¯éƒ½æ˜¯æ²¡æ„ä¹‰çš„ï¼Œåº”è¯¥åšæŒæ‰”æŽ‰ï¼ ä½œæˆ˜æ–¹æ³•C:åˆ©ç”¨ä½ çš„èº«ä½“å‡è½»æ‹–å»¶ é€šè¿‡è¿åŠ¨å¯åŠ¨ä½ çš„çŠ¶æ€ï¼šå°†è¿åŠ¨ä½œä¸ºè°ƒæ•´è‡ªèº«ï¼ˆæ‹–å»¶ã€æƒ…ç»ªã€èº«ä½“ç­‰ç­‰ï¼‰çš„ä¸€ç§æ–¹æ³•ï¼Œæ€»ä¹‹å°±æ˜¯æ„Ÿè§‰ä¸èˆ’æœæˆ–æ„Ÿè§‰å¤ªèˆ’æœï¼Œéƒ½è¦æ¥ç‚¹è¿åŠ¨ï¼è¿åŠ¨è¿˜èƒ½åˆºæ¿€å¤§è„‘ å†¥æƒ³: å¸¸ç»ƒå†¥æƒ³ï¼Œæœ‰åŠ©äºŽç²¾åŠ›ã€ç¡çœ ï¼ æ·±å‘¼å¸ï¼Œè¶Šç´§å¼ è¶Šå¤æ‚è¶Šæ€¥èºè¶Šè¦æ·±å‘¼å¸ï¼ æ‹–å»¶VSå»ºè®®å¯¹æ‚£æœ‰æ³¨æ„åŠ›ç¼ºå¤±ç´Šä¹±å’Œæ‰§è¡ŒåŠŸèƒ½éšœç¢æ‹–å»¶è€…çš„ä¸€äº›å»ºè®®ï¼š ä»Žå¤–åœ¨å¼€å§‹ï¼Œé€æ¸è½¬å‘å†…åœ¨ï¼šå€ŸåŠ©å·¥å…·ï¼Œå…»æˆä¹ æƒ¯ æ‰§è¡Œæç¤ºç‚¹ï¼šé€šè¿‡è§†è§‰ã€å¬è§‰ã€è§¦è§‰ç­‰æé†’è‡ªå·±è¦å¹²æ´»äº†ï¼Œå¹¶ç«‹å³é©¬ä¸Šjust do it æž¶æž„å’Œè·¯çº¿çš„é‡è¦æ€§ï¼štoDoListï¼›å›ºå®šæ—¶é—´å¤„ç†ä¸€äº›å›ºå®šäº‹åŠ¡ï¼Œä¾‹æ—©èµ·è·‘æ­¥ï¼›å°æ­¥å¿«è·‘ ä¸è¦æƒ³åœ¨ä½ çš„å¼±é¡¹ä¸Šè¡¨çŽ°ä¼˜å¼‚ï¼Œè€Œæ˜¯è¦åœ¨ä½ çš„å¼ºé¡¹ä¸Šæ›´ä¸Šä¸€å±‚æ¥¼ æ‹–å»¶å¤„ç†æŠ€å·§æ±‡ç¼– ç¡®ç«‹ä¸€ä¸ªå¯æ“ä½œçš„ç›®æ ‡ï¼ˆå¯è§‚å¯Ÿã€å…·ä½“è€Œå®žåœ¨çš„ï¼‰ï¼Œè€Œä¸æ˜¯é‚£ç§æ¨¡ç³Šè€ŒæŠ½è±¡çš„ç›®æ ‡ã€‚ è®¾å®šä¸€ä¸ªåŠ¡å®žçš„ç›®æ ‡ã€‚ä¸æ˜¯å¼‚æƒ³å¤©å¼€ï¼Œè€Œè¦ä»Žå°äº‹åšèµ·ã€‚ä¸è¦è¿‡äºŽç†æƒ³åŒ–ï¼Œè€Œè¦é€‰æ‹©ä¸€ä¸ªèƒ½æŽ¥å—çš„ç¨‹åº¦æœ€ä½Žçš„ç›®æ ‡ã€‚ å°†ç›®æ ‡åˆ†è§£æˆçŸ­å°å…·ä½“çš„è¿·ä½ ç›®æ ‡ã€‚æ¯ä¸ªè¿·ä½ ç›®æ ‡éƒ½è¦æ¯”å¤§ç›®æ ‡å®¹æ˜“è¾¾æˆï¼Œå°ç›®æ ‡å¯ä»¥ç´¯ç§¯æˆå¤§ç›®æ ‡ã€‚ çŽ°å®žçš„ï¼ˆè€Œä¸æ˜¯æŒ‰ç…§è‡ªå·±çš„æ„¿æœ›ï¼‰å¯¹å¾…æ—¶é—´ã€‚ just do it ! ä¸è¦æƒ³ä¸€ä¸‹å­åšå®Œæ•´ä»¶äº‹ï¼Œæ¯æ¬¡åªè¦è¿ˆå‡ºä¸€å°æ­¥ ç•ªèŒ„å·¥ä½œæ³•ï¼šåšæŒä¸€å°æ®µæ—¶é—´ï¼Œå¹¶é€æ­¥å¢žé•¿ï¼æ³¨æ„åˆ©ç”¨ç¢Žç‰‡åŒ–æ—¶é—´ ä¸ºå›°éš¾å’ŒæŒ«æŠ˜åšå¥½å¿ƒç†å‡†å¤‡ï¼å¤šæƒ³å¤šé—® å¯èƒ½çš„è¯ï¼Œå°†ä»»åŠ¡åˆ†æ´¾å‡ºåŽ»ï¼Œç”šè‡³æ‰”æŽ‰ä¸ç®¡ï¼ ä¿æŠ¤ä½ çš„æ—¶é—´ï¼Œå­¦ä¼šæ€Žä¹ˆæ ·è¯´ä¸ï¼Œä¸è¦åŽ»åšé¢å¤–çš„æˆ–ä¸å¿…è¦çš„äº‹æƒ… ç•™æ„ä½ çš„å€Ÿå£ å¥–åŠ±è¿›æ­¥ï¼Œå°†å¥–åŠ±èšç„¦äºŽåŠªåŠ›ï¼Œè€Œä¸æ˜¯ç»“æžœï¼å°å¿ƒéžæ­¤å³å½¼çš„æ€ç»´æ–¹å¼ï¼šä½ å¯ä»¥è¯´æ¯å­æ˜¯åŠç©ºçš„ï¼Œä¹Ÿå¯ä»¥è¯´ä»–æ˜¯åŠæ»¡çš„ï¼ å°†æ‹–å»¶çœ‹æˆä¸€ä¸ªä¿¡å·ï¼Œåœä¸‹æ¥é—®è‡ªå·±ï¼šæ‹–å»¶ä¼ é€’ç»™æˆ‘çš„æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ]]></content>
      <categories>
        <category>è¯»ä¹¦</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åœ†è§’é˜´å½±]]></title>
    <url>%2F2016%2F11%2F22%2F%E5%9C%86%E8%A7%92%E9%98%B4%E5%BD%B1%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;æ°´æ–‡ä¸€ç¯‡ï¼Œå…¶å®žæœ¬æ¥ä¹Ÿä¸æƒ³æ°´çš„ï¼ä½†çœŸå¿ƒå¿ä¸ä½åæ§½ä¸€ä¸‹UIçš„å®¡ç¾Žï¼šéƒ½å®¡ç¾Žå¹´ä»£äº†è¿˜åœ¨æžå¤§é˜´å½±ä¼ªç«‹ä½“çš„è®¾è®¡ï¼ï¼ï¼ä»¥ä¸‹ä¸ºæ­£æ–‡ &emsp;&emsp;æœ€ç®€å•çš„æ˜¯ç”¨å›¾ç‰‡!å›¾ç‰‡!å›¾ç‰‡! é‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼ä½†å¦‚æžœä½ é‡åˆ°äº†æˆ‘ä»¬è¿™ç§UIï¼Œæ›´å¹´æœŸæå‰ï¼è¦å¼ å›¾ç‰‡çœŸèƒ½è¦äº†å¥¹çš„å‘½â€¦ä¸€å¼ å›¾ç‰‡æ‹–äº†ä¸‰å¤©å°±æ˜¯ä¸ç»™â€¦æ›´å¹´æœŸçš„å¥³äººæƒ¹ä¸èµ·å‘€ &emsp;&emsp;å¾ˆæ—©ä¹‹å‰ï¼ŒUIè¿‡æ¥è¯´ç»™åŠ ä¸ªé˜´å½±å§ï¼å½“ç„¶æ²¡é—®é¢˜ï¼Œç®€å•çš„å¾ˆï¼123view.layer.shadowColor = [UIColor licaiColor_E9EDF7].CGColor;view.layer.shadowOpacity = 1.0f;view.layer.shadowOffset = CGSizeMake(1, 1); &emsp;&emsp;&emsp;&emsp;ä»Šå¤©UIåˆæ¥äº†ï¼Œè¿˜æ˜¯åŠ é˜´å½±ï¼ä¸è¿‡åŠ çš„ä½ç½®æ¯”è¾ƒæ¶å¿ƒï¼Œæ˜¯ä¸€ä¸ªsectionç»„åŠ ä¸€ä¸ªé˜´å½±ã€‚è¿™æ„å‘³ç€ï¼šç¬¬ä¸€ä¸ªcellè¦å·¦ä¸Šå³ä¸‰ä¸ªæ–¹å‘æœ‰é˜´å½±ï¼›æœ€åŽä¸€ä¸ªcellè¦å·¦ä¸‹å³ä¸‰ä¸ªæ–¹å‘æœ‰é˜´å½±ï¼›ä¸­é—´çš„cellè¦å·¦å³ä¸¤ä¸ªæ–¹å‘æœ‰é˜´å½±â€¦è„‘å­é‡Œçš„ç¬¬ä¸€ç§æ–¹æ¡ˆæ¯”è¾ƒç®€å•ï¼Œå·§ç”¨clipsToBoundsï¼Œé˜´å½±viewåšçš„é•¿ä¸€ç‚¹é€šè¿‡superViewè£å‰ªæ¥å®žçŽ°ç›¸åº”çš„æ•ˆæžœï¼Œä»£ç å¾ˆç®€å•ï¼è‡ªç„¶æ˜¯ä¸è¡Œçš„ï¼Œå¯ä»¥çš„è¯å°±æ²¡å¿…è¦æ°´äº†ï¼ä¸»è¦é—®é¢˜ï¼šsuperViewè®¾ç½®clipsToBoundsï¼Œå­viewè¿˜è¦å®žçŽ°é˜´å½±æ•ˆæžœå¿…ç„¶ä¼šå¯¹åŽŸæœ‰å¸ƒå±€è¿›è¡Œç§»åŠ¨ä¿®æ”¹ï¼ä¸å¯å–ï¼ &emsp;&emsp;é‚£åªå‰©ä¸‹è‡ªå·±ç”»è¿™æ¡è·¯äº†ï¼Œå…¶å®žä¹Ÿå¾ˆç®€å•ï¼https://stackoverflow.com/questions/3690972/why-maskstobounds-yes-prevents-calayer-shadow1234567891011121314151617181920212223242526@implementation UIView (shadow)- (void)setShadowColor:(UIColor *)coloropacity:(CGFloat)opacityoffset:(CGSize)offsetblurRadius:(CGFloat)blurRadiuscorners:(UIRectCorner)cornerscornerRadious:(CGFloat)cornerRadious &#123;UIBezierPath *bPath = [UIBezierPath bezierPathWithRoundedRect:self.boundsbyRoundingCorners:corners cornerRadii:CGSizeMake(cornerRadious, cornerRadious)];[self.layer setShadowColor:color.CGColor];[self.layer setShadowOpacity:opacity];[self.layer setShadowOffset:offset];// [self.layer setShadowRadius:blurRadius];[self.layer setShadowPath:bPath.CGPath];CAShapeLayer *imageSketch = [CAShapeLayer layer];imageSketch.path = bPath.CGPath;imageSketch.fillRule = kCAFillRuleEvenOdd;imageSketch.fillColor = self.backgroundColor.CGColor;[self.layer addSublayer:imageSketch];self.backgroundColor = [UIColor clearColor];&#125; &emsp;&emsp;UIåˆæ¥äº†ï¼Œè¯´è¦æŠŠä¸€ä¸ªsectionéƒ½æ”¾åˆ°ä¸€ä¸ªé˜´å½±é‡Œï¼è¿™ä¸ªæ›´æ¶å¿ƒï¼Œæ„å‘³ç€ç¬¬ä¸€ä¸ªcellè¦æ˜¾ç¤ºå·¦ä¸Šå³ä¸‰ä¸ªè¾¹çš„é˜´å½±ï¼›æœ€åŽä¸€ä¸ªcellè¦æ˜¾ç¤ºå·¦ä¸‹å³ä¸‰ä¸ªå˜é˜´å½±ï¼›ä¸­é—´cellè¦æ˜¾ç¤ºå·¦å³ä¸¤è¾¹é˜´å½±ï¼›è€Œä¸”ç¬¬ä¸€ä¸ªå’Œæœ€åŽä¸€ä¸ªcelléœ€è¦æŠŠclipsToBoundsè®¾ä¸ºNoï¼Œç”¨äºŽæ˜¾ç¤ºå¤–é˜´å½±ï¼›æˆ‘ä¸€å¼€å§‹æ‰“ç®—ç›´æŽ¥ç”¨UIBezierPathç”»ä¸€ä¸‹ï¼Œä¹Ÿä¸éº»çƒ¦æ— éžå°±æ˜¯ä¸‰ä¸ªè¾¹å’Œä¸¤ä¸ªåœ†è§’ï¼Œå°±è¡Œäº†ï¼ä½†å®žéªŒå‘çŽ°ä¸è¡Œã€‚å³ä¾¿æˆ‘ç”»çš„pathæ˜¯ä¸é—­åˆçš„Uå­—å½¢ï¼Œè®¾ç½®é˜´å½±ä¹‹åŽå°±é˜´å½±å°±è‡ªå·±é—­åˆäº†ï¼è¿™ä¸ªå¥½æ¶å¿ƒå‘€ï¼æƒ³æ¥æƒ³åŽ»æ²¡ä»€ä¹ˆå¥½åŠžæ³•ï¼Œåªèƒ½å…ˆç”»é˜´å½±å†ç”¨clipsToBoundsæŠŠç”¨ä¸åˆ°çš„é˜´å½±è£æŽ‰æ‰è¡Œã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135@interface JZKCornerShadowView ()@property (nonatomic, strong) UIView *shadowView;@property (nonatomic, strong) UIView *clipView;@end#define kShadowOffset 20@implementation JZKCornerShadowView- (void)shadowWithSize:(CGSize)sizeshadowColor:(UIColor *)shadowColorcorners:(UIRectCorner)cornerscornerRadious:(CGFloat)cornerRadious&#123;BOOL topLeft = corners &amp; UIRectCornerTopLeft ? YES : NO;BOOL topRight = corners &amp; UIRectCornerTopRight ? YES : NO;BOOL bottomLeft = corners &amp; UIRectCornerBottomLeft ? YES : NO;BOOL bottomRight = corners &amp; UIRectCornerBottomRight ? YES : NO;// å››ä¸ªè§’if (topLeft &amp;&amp; topRight &amp;&amp; bottomLeft &amp;&amp; bottomRight) &#123;[self.layer setShadowColor:[UIColor yellowColor].CGColor];[self.layer setShadowOpacity:1.0];[self.layer setShadowOffset:CGSizeMake(1, 1)];[self layoutIfNeeded];return;&#125;self.clipsToBounds = NO;self.superview.clipsToBounds = NO;[self setUpShadowView:size shadowColor:shadowColor corners:corners cornerRadious:cornerRadious];// å¯¹è§’æˆ–ä¸‰ä¸ªè§’if ((topLeft &amp;&amp; bottomRight) || (topRight &amp;&amp; bottomLeft)) &#123;[self layoutIfNeeded];return;&#125;// ä¸¤ä¸ªè§’if (topLeft &amp;&amp; topRight) &#123;[_clipView mas_updateConstraints:^(MASConstraintMaker *make) &#123;make.bottom.equalTo(self.mas_bottom);&#125;];&#125;else if (bottomLeft &amp;&amp; bottomRight) &#123;[_clipView mas_updateConstraints:^(MASConstraintMaker *make) &#123;make.top.equalTo(self.mas_top);&#125;];&#125;else if (topLeft &amp;&amp; bottomLeft) &#123;[_clipView mas_updateConstraints:^(MASConstraintMaker *make) &#123;make.right.equalTo(self.mas_right);&#125;];&#125;else if (topRight &amp;&amp; bottomRight) &#123;[_clipView mas_updateConstraints:^(MASConstraintMaker *make) &#123;make.left.equalTo(self.mas_left);&#125;];&#125;else &#123;// ä¸€ä¸ªè§’if (topLeft) &#123;[_clipView mas_updateConstraints:^(MASConstraintMaker *make) &#123;make.right.equalTo(self.mas_right);make.bottom.equalTo(self.mas_bottom);&#125;];&#125;else if (topRight) &#123;[_clipView mas_updateConstraints:^(MASConstraintMaker *make) &#123;make.left.equalTo(self.mas_left);make.bottom.equalTo(self.mas_bottom);&#125;];&#125;else if (bottomLeft) &#123;[_clipView mas_updateConstraints:^(MASConstraintMaker *make) &#123;make.right.equalTo(self.mas_right);make.top.equalTo(self.mas_top);&#125;];&#125;else if (bottomRight)&#123;[_clipView mas_updateConstraints:^(MASConstraintMaker *make) &#123;make.left.equalTo(self.mas_left);make.top.equalTo(self.mas_top);&#125;];&#125;&#125;[self layoutIfNeeded];self.backgroundColor = [UIColor clearColor];return;&#125;- (void)setUpClipView &#123;if (_clipView) &#123;return;&#125;_clipView = [[UIView alloc] init];_clipView.backgroundColor = [UIColor clearColor];_clipView.clipsToBounds = YES;[self addSubview:_clipView];[_clipView mas_makeConstraints:^(MASConstraintMaker *make) &#123;make.top.equalTo(self.mas_top).offset(-kShadowOffset);make.left.equalTo(self.mas_left).offset(-kShadowOffset);make.bottom.equalTo(self.mas_bottom).offset(kShadowOffset);make.right.equalTo(self.mas_right).offset(kShadowOffset);&#125;];&#125;- (void)setUpShadowView:(CGSize)size shadowColor:(UIColor *)shadowColor corners:(UIRectCorner)corners cornerRadious:(CGFloat)cornerRadious&#123;if (_shadowView) &#123;return;&#125;if (!_clipView) &#123;[self setUpClipView];&#125;_shadowView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, size.width, size.height)];UIBezierPath *bPath = [UIBezierPath bezierPathWithRoundedRect:_shadowView.boundsbyRoundingCorners:corners cornerRadii:CGSizeMake(cornerRadious, cornerRadious)];[_shadowView.layer setShadowColor:shadowColor.CGColor];[_shadowView.layer setShadowOpacity:1.0];[_shadowView.layer setShadowOffset:CGSizeMake(1, 1)];[_shadowView.layer setShadowPath:bPath.CGPath];CAShapeLayer *imageSketch = [CAShapeLayer layer];imageSketch.path = bPath.CGPath;imageSketch.fillRule = kCAFillRuleEvenOdd;imageSketch.fillColor = self.backgroundColor.CGColor;[_shadowView.layer addSublayer:imageSketch];_shadowView.backgroundColor = [UIColor clearColor];[_clipView addSubview:_shadowView];[_shadowView mas_makeConstraints:^(MASConstraintMaker *make) &#123;make.centerX.equalTo(self.mas_centerX);make.centerY.equalTo(self.mas_centerY);make.width.equalTo(@(size.width));make.height.equalTo(@(size.height));&#125;];&#125;@end &emsp;&emsp;å¦å¤–é™„å½•CALayerçš„å­ç±» CAShapeLayerèƒ½é€šè¿‡CGPathæ¥è¡¨ç¤ºå½¢çŠ¶ CATextLayerä½¿ç”¨äº†Core textï¼Œç”¨äºŽæ–‡å­—ç»˜åˆ¶ CATransformLayer è§£å†³3Då˜åŒ– CAGradientLayeræ˜¯ç”¨æ¥ç”Ÿæˆä¸¤ç§æˆ–æ›´å¤šé¢œè‰²å¹³æ»‘æ¸å˜çš„ CAReplicatorLayerçš„ç›®çš„æ˜¯ä¸ºäº†é«˜æ•ˆç”Ÿæˆè®¸å¤šç›¸ä¼¼çš„å›¾å±‚ï¼Œä½¿ç”¨CAReplicatorLayerå¹¶åº”ç”¨ä¸€ä¸ªè´Ÿæ¯”ä¾‹å˜æ¢äºŽä¸€ä¸ªå¤åˆ¶å›¾å±‚ï¼Œä½ å°±å¯ä»¥åˆ›å»ºæŒ‡å®šè§†å›¾ï¼ˆæˆ–æ•´ä¸ªè§†å›¾å±‚æ¬¡ï¼‰å†…å®¹çš„é•œåƒå›¾ç‰‡ï¼Œè¿™æ ·å°±åˆ›å»ºäº†ä¸€ä¸ªå®žæ—¶çš„ã€Žåå°„ã€æ•ˆæžœ CATiledLayerä¸ºè½½å…¥å¤§å›¾é€ æˆçš„æ€§èƒ½é—®é¢˜æä¾›äº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼šå°†å¤§å›¾åˆ†è§£æˆå°ç‰‡ç„¶åŽå°†ä»–ä»¬å•ç‹¬æŒ‰éœ€è½½å…¥ CAEmitterLayeræ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ç²’å­å¼•æ“Žï¼Œè¢«ç”¨æ¥åˆ›å»ºå®žæ—¶ä¾‹å­åŠ¨ç”»å¦‚ï¼šçƒŸé›¾ï¼Œç«ï¼Œé›¨ç­‰ç­‰è¿™äº›æ•ˆæžœ CAEAGLLayeræ˜¯CALayerçš„ä¸€ä¸ªå­ç±»ï¼Œç”¨æ¥æ˜¾ç¤ºä»»æ„çš„OpenGLå›¾å½¢ UIScrollViewå¹¶æ²¡æœ‰ç”¨CAScrollLayer]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç¦»å±æ¸²æŸ“]]></title>
    <url>%2F2016%2F11%2F02%2F%E7%A6%BB%E5%B1%8F%E6%B8%B2%E6%9F%93%2F</url>
    <content type="text"><![CDATA[ç¦»å±æ¸²æŸ“GPUæ¸²æŸ“æœºåˆ¶&emsp;&emsp;CPU è®¡ç®—å¥½æ˜¾ç¤ºå†…å®¹æäº¤åˆ° GPUï¼ŒGPUæ¸²æŸ“å®ŒæˆåŽå°†æ¸²æŸ“ç»“æžœæ”¾å…¥å¸§ç¼“å†²åŒºï¼ŒéšåŽè§†é¢‘æŽ§åˆ¶å™¨ä¼šæŒ‰ç…§VSyncä¿¡å·é€è¡Œè¯»å–å¸§ç¼“å†²åŒºçš„æ•°æ®ï¼Œç»è¿‡å¯èƒ½çš„æ•°æ¨¡è½¬æ¢ä¼ é€’ç»™æ˜¾ç¤ºå™¨æ˜¾ç¤ºã€‚ ä¸ºä»€ä¹ˆä¼šå¡é¡¿æŽ‰å¸§&emsp;&emsp;åž‚ç›´åŒæ­¥çš„æœºåˆ¶ï¼Œå¦‚æžœåœ¨ä¸€ä¸ªVSyncæ—¶é—´å†…ï¼ŒCPUæˆ–è€…GPUæ²¡æœ‰å®Œæˆå†…å®¹æäº¤ï¼Œåˆ™é‚£ä¸€å¸§å°±ä¼šè¢«ä¸¢å¼ƒï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡æœºä¼šå†æ˜¾ç¤ºï¼Œè€Œè¿™æ—¶æ˜¾ç¤ºå±ä¼šä¿ç•™ä¹‹å‰çš„å†…å®¹ä¸å˜ã€‚è¿™å°±æ˜¯ç•Œé¢å¡é¡¿çš„åŽŸå› ã€‚å³å¡é¡¿åŽŸå› ï¼š 1ï¼ŒCPUæ²¡æäº¤ï¼Œå³CPUæ²¡å®Œæˆè®¡ç®—æ˜¾ç¤ºå†…å®¹ï¼Œæ¯”å¦‚è§†å›¾çš„åˆ›å»ºã€å¸ƒå±€è®¡ç®—ã€å›¾ç‰‡è§£ç ã€æ–‡æœ¬ç»˜åˆ¶ç­‰å·¥ä½œ 2ï¼ŒGPUæ²¡æäº¤ï¼Œå³GPUæ²¡å®Œæˆå˜æ¢ã€åˆæˆã€æ¸²æŸ“ã€‚éšåŽ GPU ä¼šæŠŠæ¸²æŸ“ç»“æžœæäº¤åˆ°å¸§ç¼“å†²åŒºç­‰å·¥ä½œ GPUå±å¹•æ¸²æŸ“çš„æ–¹å¼: On-Screen Rendering (å½“å‰å±å¹•æ¸²æŸ“) æŒ‡çš„æ˜¯GPUçš„æ¸²æŸ“æ“ä½œæ˜¯åœ¨å½“å‰ç”¨äºŽæ˜¾ç¤ºçš„å±å¹•ç¼“å†²åŒºè¿›è¡Œã€‚ Off-Screen Rendering (ç¦»å±æ¸²æŸ“) æŒ‡çš„æ˜¯åœ¨GPUåœ¨å½“å‰å±å¹•ç¼“å†²åŒºä»¥å¤–å¼€è¾Ÿä¸€ä¸ªç¼“å†²åŒºè¿›è¡Œæ¸²æŸ“æ“ä½œã€‚ä»£ä»·å¾ˆé«˜ï¼š1ï¼Œåˆ›å»ºæ–°ç¼“å†²åŒºï¼Œè¦æƒ³è¿›è¡Œç¦»å±æ¸²æŸ“ï¼Œé¦–å…ˆè¦åˆ›å»ºä¸€ä¸ªæ–°çš„ç¼“å†²åŒºï¼›2ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œç¦»å±æ¸²æŸ“çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œéœ€è¦å¤šæ¬¡åˆ‡æ¢ä¸Šä¸‹æ–‡çŽ¯å¢ƒ CPUä¸­çš„ç¦»å±æ¸²æŸ“ï¼ˆç‰¹æ®Šç¦»å±æ¸²æŸ“ï¼Œå³ä¸åœ¨GPUä¸­çš„æ¸²æŸ“ï¼‰ï¼Œå¦‚æžœæˆ‘ä»¬é‡å†™äº†drawRectæ–¹æ³•ï¼Œå¹¶ä¸”ä½¿ç”¨ä»»ä½•Core Graphicsçš„æŠ€æœ¯è¿›è¡Œäº†ç»˜åˆ¶æ“ä½œï¼Œå°±æ¶‰åŠåˆ°äº†CPUæ¸²æŸ“ å¦‚ä½•æ£€æµ‹ç¦»å±æ¸²æŸ“ æ¨¡æ‹Ÿå™¨åœ¨å·¥ä½œæ ä¸Šé¢çš„Debug -&gt; Color Off-Screen Rendered çœŸæœºåœ¨å·¥ä½œæ ä¸Šé¢çš„Debug -&gt; View Debugging -&gt; Rendering -&gt; Color Off-Screen Rendered Yellow Core Animationå·¥å…·æ£€æµ‹ç¦»å±æ¸²æŸ“ Color Blended Layersï¼šçº¢è‰²çš„æ˜¯layeré€æ˜Žçš„ï¼Œç»¿è‰²æ˜¯layerä¸é€æ˜Žçš„ã€‚ Color Hits Green and Misses Redï¼šçº¢è‰²æ²¡å¤ç”¨ç¼“å­˜ï¼Œç»¿è‰²å¤ç”¨ç¼“å­˜ Color Misaligned Imagesï¼šç¼©æ”¾å›¾ç‰‡æ ‡è®°ä¸ºé»„è‰²ï¼Œåƒç´ æ²¡å¯¹é½åˆ™æ ‡è®°ä¸ºç´«è‰² Color Offscreen-Rendered Yellowï¼šæ£€æµ‹ç¦»å±æ¸²æŸ“çš„ï¼Œé»„è‰²è¡¨ç¤ºæœ‰ç¦»å±æ¸²æŸ“ã€‚ Flash Updated Regionsï¼šå½“å¯¹å›¾å±‚é‡ç»˜çš„æ—¶å€™æ˜¾ç¤ºé»„è‰²ï¼Œé¢‘ç¹é‡ç»˜éœ€åŠ ç¼“å­˜ã€‚ å¼•å‘ç¦»å±æ¸²æŸ“å› ç´  ä¸ºå›¾å±‚è®¾ç½®é®ç½©ï¼ˆlayer.maskï¼‰ å°†å›¾å±‚çš„layer.masksToBounds / view.clipsToBoundså±žæ€§è®¾ç½®ä¸ºtrue å°†å›¾å±‚layer.allowsGroupOpacityå±žæ€§è®¾ç½®ä¸ºYESå’Œlayer.opacityå°äºŽ1.0 ä¸ºå›¾å±‚è®¾ç½®é˜´å½±ï¼ˆlayer.shadow *ï¼‰ã€‚ ä¸ºå›¾å±‚è®¾ç½®layer.shouldRasterize=true å…·æœ‰layer.cornerRadiusï¼Œlayer.edgeAntialiasingMaskï¼Œlayer.allowsEdgeAntialiasingçš„å›¾å±‚ æ–‡æœ¬ï¼ˆä»»ä½•ç§ç±»ï¼ŒåŒ…æ‹¬UILabelï¼ŒCATextLayerï¼ŒCore Textç­‰ï¼‰ã€‚ ä½¿ç”¨CGContextåœ¨drawRect :æ–¹æ³•ä¸­ç»˜åˆ¶å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¼šå¯¼è‡´ç¦»å±æ¸²æŸ“ï¼Œç”šè‡³ä»…ä»…æ˜¯ä¸€ä¸ªç©ºçš„å®žçŽ°ã€‚ ä¼˜åŒ–åœ†è§’ä¼˜åŒ– åˆ©ç”¨CAShapeLayeræ¸²æŸ“æ˜¯ç›´æŽ¥ç”¨çš„GPUï¼Œå‡å°‘CPUå¯¹åœ†è§’çš„å¤§é‡è®¡ç®—12345678910UIImageView *imageView = [[UIImageView alloc]initWithFrame:CGRectMake(100, 100, 100, 100)];imageView.image = [UIImage imageNamed:@&quot;myImg&quot;];UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:imageView.bounds byRoundingCorners:UIRectCornerAllCorners cornerRadii:imageView.bounds.size];CAShapeLayer *maskLayer = [[CAShapeLayer alloc]init];//è®¾ç½®å¤§å°maskLayer.frame = imageView.bounds;//è®¾ç½®å›¾å½¢æ ·å­maskLayer.path = maskPath.CGPath;imageView.layer.mask = maskLayer;[self.view addSubview:imageView]; é˜´å½±ä¼˜åŒ– å¦‚æžœå›¾å±‚æ˜¯ä¸ªç®€å•çš„å‡ ä½•å›¾å½¢æˆ–è€…åœ†è§’å›¾å½¢ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®shadowPathæ¥ä¼˜åŒ–æ€§èƒ½12345imageView.layer.shadowColor = [UIColor grayColor].CGColor;imageView.layer.shadowOpacity = 1.0;imageView.layer.shadowRadius = 2.0;UIBezierPath *path = [UIBezierPath bezierPathWithRect:imageView.frame];imageView.layer.shadowPath = path.CGPath; å…¶å®ƒå»ºè®® éœ€è¦åœ†è§’æ•ˆæžœæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸€å¼ ä¸­é—´é€æ˜Žå›¾ç‰‡è’™ä¸ŠåŽ»ï¼Œè¿™æ˜¯æ•ˆçŽ‡æœ€é«˜çš„ä¸€ç§æ–¹æ¡ˆ å°½é‡ä½¿ç”¨ä¸åŒ…å«é€æ˜Žï¼ˆalphaï¼‰é€šé“çš„å›¾ç‰‡èµ„æº ç¡®ä¿å›¾ç‰‡å¤§å°å’Œframeä¸€è‡´ï¼Œä¸è¦åœ¨æ»‘åŠ¨æ—¶ç¼©æ”¾å›¾ç‰‡ã€‚ ç¡®ä¿å›¾ç‰‡é¢œè‰²æ ¼å¼è¢«GPUæ”¯æŒï¼Œé¿å…CPUè½¬æ¢ã€‚ ç¡®ä¿æŽ§ä»¶çš„opaqueå±žæ€§è®¾ç½®ä¸ºtrueï¼Œç¡®ä¿backgroundColorå’Œçˆ¶è§†å›¾é¢œè‰²ä¸€è‡´ä¸”ä¸é€æ˜Žã€‚å¦‚æ— ç‰¹æ®Šéœ€è¦ï¼Œä¸è¦è®¾ç½®ä½ŽäºŽ1çš„alphaå€¼ã€‚ å°½é‡è®¾ç½®frameçš„å¤§å°å€¼ä¸ºæ•´å½¢å€¼ï¼Œé¿å…CPUè¿›è¡Œå¤§é‡å¤æ‚è®¡ç®— è®¾ç½®é˜´å½±æ•ˆæžœæ—¶,ä½¿ç”¨ShadowPathæŒ‡å®šlayeré˜´å½±æ•ˆæžœè·¯å¾„ å‚è€ƒï¼š iOS ä¿æŒç•Œé¢æµç•…çš„æŠ€å·§]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[whistleä½¿ç”¨]]></title>
    <url>%2F2016%2F10%2F20%2Fwhistle%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;ä½¿ç”¨charleså·²ç»å¥½å‡ å¹´äº†ï¼Œä¸€ç›´è§‰å¾—æŒºå¥½ç”¨çš„ï¼ä½†å…¥èŒæ–°å…¬å¸æ‰å‘çŽ°ï¼Œæˆ‘åˆoutäº†ï¼Œå¤§å®¶éƒ½ç”¨whistleï¼å¦å¤–ç”±äºŽç™¾åº¦ä¸å…è®¸è‡ªå·±å¸¦ç”µè„‘ï¼Œæ–°å‘çš„ç”µè„‘é‡Œæ‰€æœ‰çš„çŽ¯å¢ƒéƒ½éœ€è¦é‡æ–°å®‰è£…ä¸€ä¸‹ï¼Œcharlesä¸‹è½½äº†ä¸¤ä¸ªå´éƒ½æ²¡ç ´è§£ 1 Whistleå®‰è£…æ–¹æ³•1.1 å®‰è£…Nodeï¼š Windowsæˆ–Macç³»ç»Ÿï¼Œè®¿é—®https://nodejs.org/ï¼Œå®‰è£…LTSç‰ˆæœ¬çš„Nodeï¼Œé»˜è®¤å®‰è£…å³å¯ã€‚ Linuxä¸‹æŽ¨èä½¿ç”¨æºç å®‰è£…: ä»ŽNodeå®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆçš„SourceCode(æˆ–è€…ç”¨wgetå‘½ä»¤ä¸‹è½½)ï¼Œè§£åŽ‹æ–‡ä»¶(tar -xzvf node-vx.y.z.tar.gz)åŽè¿›å…¥è§£åŽ‹åŽçš„æ ¹ç›®å½•(node-vx.y.z)ï¼Œä¾æ¬¡æ‰§è¡Œ./configureã€./makeå’Œ./make installã€‚ 1.2 å®‰è£…Whistle:&emsp;&emsp;Nodeå®‰è£…æˆåŠŸåŽï¼Œæ‰§è¡Œå¦‚ä¸‹npmå‘½ä»¤å®‰è£…whistle12//Macæˆ–Linuxçš„éžrootç”¨æˆ·éœ€è¦åœ¨å‘½ä»¤è¡Œå‰é¢åŠ sudoï¼Œå¦‚ï¼šsudo npm install -g whistle$ npm install -g whistle &emsp;&emsp;npmé»˜è®¤é•œåƒæ˜¯åœ¨å›½å¤–ï¼Œæœ‰æ—¶å€™å®‰è£…é€Ÿåº¦å¾ˆæ…¢æˆ–è€…å‡ºçŽ°å®‰è£…ä¸äº†çš„æƒ…å†µï¼Œå¦‚æžœæ— æ³•å®‰è£…æˆ–è€…å®‰è£…å¾ˆæ…¢ï¼Œå¯ä»¥ä½¿ç”¨taobaoçš„é•œåƒå®‰è£…ï¼š12$ npm install cnpm -g --registry=https://registry.npm.taobao.org$ cnpm install -g whistle &emsp;&emsp;æˆ–è€…ç›´æŽ¥æŒ‡å®šé•œåƒå®‰è£…ï¼š1$ npm install whistle -g --registry=https://registry.npm.taobao.org &emsp;&emsp;whistleå®‰è£…å®ŒæˆåŽï¼Œæ‰§è¡Œå‘½ä»¤ whistle help æˆ– w2 helpï¼ŒæŸ¥çœ‹whistleçš„å¸®åŠ©ä¿¡æ¯1$ w2 help &emsp;&emsp;å¦‚æžœèƒ½æ­£å¸¸è¾“å‡ºwhistleçš„å¸®åŠ©ä¿¡æ¯ï¼Œè¡¨ç¤ºwhistleå·²å®‰è£…æˆåŠŸã€‚ 3.å¯åŠ¨Whistle&emsp;&emsp;å¯åŠ¨whistle:12$ w2 start// å¦‚æžœè¦é˜²æ­¢å…¶ä»–äººè®¿é—®é…ç½®é¡µé¢ï¼Œå¯ä»¥åœ¨å¯åŠ¨æ—¶åŠ ä¸Šç™»å½•ç”¨æˆ·åå’Œå¯†ç  -n yourusername -w yourpasswordã€‚ &emsp;&emsp;é‡å¯whsitle:1$ w2 restart &emsp;&emsp;åœæ­¢whistle:1$ w2 stop &emsp;&emsp;è°ƒè¯•æ¨¡å¼å¯åŠ¨whistle(ä¸»è¦ç”¨äºŽæŸ¥çœ‹whistleçš„å¼‚å¸¸åŠæ’ä»¶å¼€å‘):1$ w2 run 2 ä»£ç†&emsp;&emsp;ä½¿ç”¨Chromeè®¿é—®æœ¬åœ°çš„8899ç«¯å£ï¼Œhttp://127.0.0.1:8899/ï¼Œè¿›å…¥Whistleçš„ä¸»é¡µï¼æ²¡å•¥å¯è¯´çš„ï¼Œå°±ä¸¤ç‚¹ï¼š1ã€å¯ä»¥è‡ªå»ºruleä¿å­˜ä»¥å¾€çš„é…ç½®æ–‡ä»¶ï¼›2ã€ç‚¹å‡»httpsï¼Œä¸‹è½½è®¤è¯è¯ä¹¦ &emsp;&emsp;é‡ç‚¹ï¼šhttp://wproxy.org/whistle/rules ç»‘å®šè½¬å‘ 12345678910111213141516171819202122## disable,å¯¹æŸäº›åŸŸåä¸æ‹¦æˆª## ä¸€èˆ¬æ”¾åˆ° Default åˆ†ç»„/wx.qq.com/ disable://intercept## filter,åœ¨Networkä¸ä¼šå‡ºçŽ°æŸäº›åŸŸåçš„è¯·æ±‚/qq.com/ filter://hide## socks## ä¸€èˆ¬æ”¾åˆ° Default åˆ†ç»„/facebook/ socks://127.0.0.1:1080/vk.com/ socks://127.0.0.1:1080/google/ socks://127.0.0.1:1080## ä¸€èˆ¬åœºæ™¯æ˜¯è°ƒè¯•å†…åµŒAPPé¡µé¢ï¼ŒAPPå†…æœ‰ä¸€ä¸ªå…¥å£é“¾æŽ¥aï¼Œè€Œè°ƒè¯•çš„ç›®æ ‡é¡µé¢æ˜¯b## é€šè¿‡ä»¥ä¸‹ä¸€è¡Œé…ç½®ï¼Œé¡µé¢aä¼šè‡ªåŠ¨æ¢æˆé¡µé¢bm.aliexpress.com/a.html m.aliexpress.com/b.html## ç»‘å®š## a.b.c.d æ˜¯æŸä¸ªçŽ¯å¢ƒçš„ipåœ°å€## æœ‰æ—¶é€šè¿‡å¤šä¸ªåŸŸåçš„æ–¹å¼æ¥éƒ¨ç½²å¤šå¥—å¼€å‘çŽ¯å¢ƒ## é€šè¿‡ä»¥ä¸‹ä¸¤è¡Œé…ç½®å¯ä»¥å±è”½å¼€å‘çŽ¯å¢ƒåŸŸåä¸Žçº¿ä¸Šä¸ä¸€è‡´çš„æƒ…å†µm.aliexpress.com mm.aliexpress.commm.aliexpress.com a.b.c.d req 12345678910111213141516171819202122232425## uam.aliexpress.com ua://&#123;wp_ua&#125;#m.aliexpress.com ua://&#123;ali_ua&#125;## referrerm.aliexpress.com referer://https://vk.com/## referrer null#m.aliexpress.com referer://## reqHeadersï¼Œä¿®æ”¹è¯·æ±‚å¤´## uaã€refereråè®®éƒ½å¯ä»¥é€šè¿‡reqHeadersæ¥å®Œæˆm.aliexpress.com reqHeaders://&#123;req-headers&#125;## values&#123;wp_ua&#125;Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; RM-1113) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/13.10586&#123;req-headers&#125;&#123;&quot;X-Forwarded-For&quot;:&quot; 188.146.171.71&quot;,&quot;X-Real-IP&quot;:&quot; 188.146.171.71&quot;,&quot;X-Client-Scheme&quot;:&quot;https&quot;,&quot;referer&quot;:&quot;https://vk.com/&quot;,&quot;User-Agent&quot;:&quot;Mozilla/5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1 AliApp(H/5)&quot;&#125; res 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364## fileï¼Œæœ¬åœ°è°ƒè¯•æ˜¯å…¶å…¸åž‹çš„ä½¿ç”¨åœºæ™¯m.aliexpress.com/sw.js file:///path/to/your/local/sw.js## xfile#m.aliexpress.com/sw.js xfile:///path/to/your/local/sw.js## tplï¼Œå¸¸ç”¨äºŽmock jsonpè¯·æ±‚aliexpress.com/query.jsonp tpl://&#123;res-jsonp&#125;## xtplï¼ŒåŒtplï¼Œæœ¬åœ°ä¸å­˜åœ¨æ—¶èµ°çº¿ä¸Šaliexpress.com/query.jsonp xtpl://&#123;res-jsonp&#125;## resHeadersï¼Œä¿®æ”¹å“åº”å¤´ae01.alicdn.com resHeaders://&#123;res-cors&#125;## htmlï¼Œå¾€htmlæ–‡æ¡£(&lt;/body&gt;ä¹‹å‰)è¿½åŠ htmlæ ‡ç­¾(script,style or normal html tag)m.aliexpress.com html://&#123;html-test&#125;## jsï¼Œå¾€jså“åº”è¿½åŠ è„šæœ¬ï¼Œå¦‚æžœå“åº”æ˜¯htmlæ–‡æ¡£ï¼Œåˆ™è‡ªåŠ¨ç”¨`&lt;script&gt;&lt;/script&gt;`åŒ…è£…åŽæ’å…¥m.aliexpress.com/sw.js js://&#123;js-test&#125;## cssï¼Œå¾€csså“åº”è¿½åŠ æ ·å¼ï¼Œå¦‚æžœå“åº”æ˜¯htmlæ–‡æ¡£ï¼Œåˆ™è‡ªåŠ¨ç”¨`&lt;style&gt;&lt;/style&gt;`åŒ…è£…åŽæ’å…¥## `/`å¯ä»¥èµ·åˆ°ä»…å¯¹é¦–é¡µè¿½åŠ çš„æ•ˆæžœm.aliexpress.com/ css://&#123;css-test&#125;## resReplaceï¼Œæ›¿æ¢å“åº”çš„æŸäº›å­—ç¬¦ä¸²## ä¸€èˆ¬å¯ç”¨æ¥å¿«é€ŸéªŒè¯æŸäº›åŠŸèƒ½m.aliexpress.com resReplace://&#123;res-replace&#125;## values&#123;res-jsonp&#125;: whistleä¼šç”¨è¯·æ±‚å¯¹åº”çš„callbackå€¼æ¥æ›¿æ¢&#123;callback&#125;&#123;callback&#125;(&#123;&quot;ec&quot;: 0,&quot;list&quot;:[&#123;&quot;id&quot;:1,&quot;price&quot;:&quot;US $100&quot;,&quot;stock&quot;:&quot;100&quot;,&quot;imgUrl&quot;:&quot;https://ae01.alicdn.com/kf/HTB12x0CLpXXXXajaXXX760XFXXXS.png_640x640.png&quot;&#125;,...]&#125;);&#123;html-test&#125;&lt;script&gt;// make an errorx.x;&lt;/script&gt;&#123;js-test&#125;fetch(&quot;/&quot;).then(res=&gt;&#123;console.log(&quot;fetched!&quot;)&#125;);&#123;css-test&#125;body&#123;font-size:15px;&#125;&#123;res-cors&#125;&#123;&quot;access-control-allow-origin&quot;:&quot;*&quot;,&quot;access-control-expose-headers&quot;:&quot;Via&quot;&#125;&#123;res-replace&#125;&lt;meta name=&quot;screen-orientation&quot; content=&quot;portrait&quot;&gt;: &lt;meta name=&quot;apple-itunes-app&quot; content=&quot;app-id=436672029&quot;&gt; debugging 123456m.aliexpress.com weinre://debugm.aliexpress.com log://&#123;log-test&#125;## values&#123;log-test&#125;console.log(&quot;Yeah!&quot;) å‚è€ƒï¼šhttps://github.com/avwo/whistle#whistlehttps://avwo.github.io/whistle/install.html]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CocoaPodé—®é¢˜]]></title>
    <url>%2F2016%2F10%2F16%2FCocoaPod%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;ä»Šå¤©pod install é‡åˆ° Unable to add a source with urlé—®é¢˜ï¼Œç€å®žæŠ˜è…¾äº†åŠå¤©æ‰å¼„å¥½ï¼æƒ³æƒ³cocoapodé‡åˆ°çš„å‘ä¹Ÿæœ‰ä¸å°‘ï¼Œåœ¨æ­¤è®°å½•ä¸€ä¸‹å§ï¼æœ€æœ€ä¸»è¦çš„æ˜¯æ²¡æ°´è¿‡cocoapodï¼Œå“ˆå“ˆï¼Œä¸€ä¸¾å¤šå¾—ï¼ å®˜ç½‘ Cocoapodå®˜ç½‘ Podfileè¯­æ³• cocoapodå®‰è£…é—®é¢˜ å‡çº§rubyï¼šsudo gem update â€“system æºï¼šgen sources åŽæŽ¥ -l æŸ¥çœ‹å‘½ä»¤ â€“remove ç§»é™¤å‘½ä»¤ â€“add æ·»åŠ å‘½ä»¤ 123gem sources --remove https://rubygems.org/gem sources -a https://gems.ruby-china.org/gem sources -l å®‰è£…ï¼š sudo gem install cocoapods å½“å‡ºçŽ°not permittedä¹Ÿå°±æ˜¯æ²¡æƒé™çš„æ—¶å€™ï¼Œå¯ä»¥æŒ‡å®šå®‰è£…åˆ°binä¸‹ç›®å½•ï¼š sudo gem install -n /usr/local/bin cocoapods pod setup å‘½ä»¤çš„é€Ÿåº¦å¤ªæ…¢ï¼šç›´æŽ¥åŽ» https://github.com/CocoaPods/Specs/archive/master.zip ç„¶åŽè§£åŽ‹ç¼©åˆ°~/.cocoapods/repos/master pod install é‡åˆ° Unable to add a source with urlé—®é¢˜ å¤šä¸ªxcodeçš„è¯ï¼Œéœ€è¦xcode -&gt; preferences -&gt; locations -&gt; commond line tools æŒ‡å®šxcode podçš„é—®é¢˜ï¼Œæœ€å¥½å¸è½½é‡è£…ï¼Œå¸è½½å‘½ä»¤ï¼šwitch pod ç„¶åŽç”¨ sudo gem uninstall å¸è½½æ‰€æœ‰cocoapodç›¸å…³çš„ æƒé™çš„é—®é¢˜ï¼ŒSSHæ˜¯å¦é…ç½®äº†ï¼Ÿç”¨æˆ·åç­‰configï¼ˆåœ¨~/.sshç›®å½•ä¸‹ï¼‰æ˜¯å¦é…å¯¹äº†ï¼Ÿå¤šä¸ªhostçš„è¯éœ€è¦åœ¨configä¸­å¤šæ¬¡æŒ‡å®š xcode-select -â€“install å®‰è£…XcodeCommandLineTools ä½¿ç”¨brewå®‰è£…carthageæ—¶ç¢°åˆ°æŠ¥é”™ Error: Permission denied @ dir_s_mkdir - /usr/local/Frameworks å¤„ç†åŠžæ³• sudo mkdir /usr/local/Frameworksï¼›sudo chown $(whoami):admin /usr/local/Frameworks pod repo updateæ˜¯å•¥ï¼Ÿ æ„æ€æ˜¯æœ¬åœ°æ²¡æœ‰ç›¸åº”ç‰ˆæœ¬çš„åº“ï¼Œéœ€è¦æ›´æ–°æœ¬åœ°åº“ç´¢å¼•ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰§è¡Œpod installä¸ä¼šè‡ªåŠ¨æ‰§è¡Œpod repo updateå‘½ä»¤ pod install ? pod update ? pod update åº“å æ¥æ›´æ–°æŸä¸ªç‰¹å®šçš„åº“ï¼Œæˆ–å…¬å¸å†…éƒ¨çš„åº“ pod install ç¬¬ä¸€æ¬¡ä½¿ç”¨æˆ–æ–°å¢žåº“ æ–°å»ºPodfileæ–‡ä»¶ åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨pod initå‘½ä»¤å¯ä»¥ç›´æŽ¥äº§ç”Ÿä¸€ä¸ªPodfileæ–‡ä»¶ binç›®å½•æƒé™é—®é¢˜ ä¸€èˆ¬æƒ…å†µï¼šsudo chmod -R 777 ä½ è¦ä¿®æ”¹æ–‡ä»¶ä¸Šå±‚ç›®å½•çš„è·¯å¾„ ä½†å¦‚æžœç”µè„‘å¯ç”¨äº†SIPï¼ˆSystem Integrity Protectionï¼‰ï¼Œå¢žåŠ äº†rootlessæœºåˆ¶ Aï¼Œé‡å¯ï¼Œè¿‡ç¨‹ä¸­æŒ‰ä½ command+Rï¼Œè¿›å…¥ä¿æŠ¤æ¨¡å¼ Bï¼Œæ‰“å¼€terminalç»ˆç«¯ï¼Œè¾“å…¥ csrutil disable Cï¼Œå†æ¬¡é‡å¯ï¼Œå³å¯å¯¹ usr/bin ç›®å½•ä¸‹æ–‡ä»¶è¿›è¡Œä¿®æ”¹ å¦‚æžœè¦æ¢å¤ä¿æŠ¤æœºåˆ¶ï¼Œé‡æ–°è¿›å…¥ä¿æŠ¤æ¨¡å¼ï¼Œè¾“å…¥ csrutil enable]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é«˜æ€§èƒ½çš„iosåº”ç”¨å¼€å‘]]></title>
    <url>%2F2016%2F10%2F07%2F%E9%AB%98%E6%80%A7%E8%83%BD%E7%9A%84ios%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%2F</url>
    <content type="text"><![CDATA[1 ç§»åŠ¨åº”ç”¨çš„æ€§èƒ½æ€§èƒ½æŒ‡æ ‡ å†…å­˜RAMï¼šå¹³å‡å€¼ã€æ³„æ¼å’Œå³°å€¼ è€—ç”µé‡ï¼šCPUã€ç¡¬ä»¶(ä½ç½®ç­‰) åˆå§‹åŒ–æ—¶é—´ï¼šmianå‰å’ŒmainåŽ æ‰§è¡Œé€Ÿåº¦ï¼š å“åº”é€Ÿè¯»ï¼š æœ¬åœ°å­˜å‚¨ï¼šæ›´æ–°é¢‘çŽ‡ã€å¼‚å¸¸ã€æ¸…é™¤ç­–ç•¥ äº’æ“ä½œæ€§ï¼š ç½‘ç»œçŽ¯å¢ƒï¼š å¸¦å®½ æ•°æ®åˆ·æ–°ï¼šåˆ·æ–°é¢‘çŽ‡*æ•°æ®é‡ï¼Œæµé‡ å¤šç”¨æˆ·æ”¯æŒï¼šåˆ‡æ¢è¿…é€Ÿã€æ•°æ®éš”ç¦» å•ç‚¹ç™»å½•ï¼šæ•°æ®å…±äº«å’ŒåŒæ­¥ å®‰å…¨ï¼š åº”ç”¨æ€§èƒ½åˆ†æž é‡‡æ · åŸ‹ç‚¹ æµ‹é‡ æž„å»ºå’Œå‘å¸ƒï¼šä¸€é”®æ‰“åŒ… å¯æµ‹è¯•æ€§ï¼šå•å…ƒæµ‹è¯•ã€åŠŸèƒ½æµ‹è¯• è®¾ç½®å´©æºƒæŠ¥å‘Šï¼š å¯¹åº”ç”¨åŸ‹ç‚¹ï¼š æ—¥å¿—ï¼šæ—¥å¿—è´¯ç©¿ç”Ÿå‘½å‘¨æœŸï¼ŒåŸ‹ç‚¹åº”åªåœ¨å¼€å‘ç‰¹å®šé˜¶æ®µ 2 å†…å­˜ç®¡ç†å†…å­˜æ¶ˆè€—æ ˆå¤§å°æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸“å±žæ ˆç©ºé—´ï¼Œæ ˆå¤§å°å½±å“å› ç´ ï¼š æ–¹æ³•æ•°ï¼Œæ¯ä¸ªæ–¹æ³•è°ƒç”¨å…¶å®ƒæ–¹æ³•éƒ½ä¼šå…¥æ ˆï¼ŒTail Call ä¸€ä¸ªæ–¹æ³•ä¸­æœ€å¤šå¯ç”¨å˜é‡æ•° è§†å›¾å±‚çº§æ·±åº¦ å †å¤§å° æ¯ä¸ªè¿›ç¨‹çš„æ‰€æœ‰çº¿ç¨‹å…±äº«ä¸€ä¸ªå †ã€‚ ä»Žæ ˆå¤åˆ¶åˆ°å †ï¼Œå’Œä»Žå †å¤åˆ¶åˆ°æ ˆï¼Œéƒ½æ˜¯ä»£ä»·æ˜‚è´µçš„æ“ä½œ ä¸è¦å¿½è§† didReceiveMemoryWarningä¿¡å· å†…å­˜ç®¡ç†æ¨¡å¼ å¼•ç”¨è®¡æ•°ï¼šMRC å’Œ ARC è‡ªåŠ¨é‡Šæ”¾ï¼š @autoreleasepool å¼•ç”¨ç±»åž‹ï¼šassignï¼Œretainï¼Œcopyï¼Œatomicï¼Œnonatomicï¼Œreadonlyï¼Œreadwriteä»¥åŠstrongï¼Œweak åƒµå°¸å¯¹è±¡ï¼šscheme -ã€‹ edit sheme -ã€‹ enable zombie objects å¾ªçŽ¯å¼•ç”¨ï¼š delegateï¼ˆä¾‹å¦‚animationï¼‰å’Œblockï¼Œè§£å†³åŠžæ³•ï¼šä¸´æ—¶å˜é‡ï¼Œæ‰‹åŠ¨ç½®nil å’Œ weakå¤„ç†ï¼›ä½¿ç”¨NSTimerå’ŒNSThreadæ€»åº”è¯¥é€šè¿‡é—´æŽ¥å±‚ï¼ˆWeakProxyï¼‰å®žçŽ°é”€æ¯ è§‚å¯Ÿè€…ï¼šaddObserveræ–¹æ³•ä¸ä¼šæŒæœ‰è§‚å¯Ÿã€è¢«è§‚å¯Ÿå¯¹è±¡çš„å¼ºå¼•ç”¨ã€‚æƒ³æƒ³KVOåŽŸç†ï¼Ÿå†æƒ³æƒ³ä¸ºå•¥æ²¡ç§»é™¤ä¸ºcrashï¼Ÿ å’Œé€šçŸ¥ä¸­å¿ƒä¸€æ ·ï¼Œé¿å…çš„æ–¹æ³•å°±æ˜¯ä¸­é—´åŠ å±‚ æŸæ–¹æ³•æŽ¥æ”¶NSError*å‚æ•°æ—¶ï¼Œå¿…é¡»å†™æˆ NSError __autoreleasing *error è­¦æƒ•idç±»åž‹ åˆç†æ—¶å€™ç”¨å…¨å±€å˜é‡ï¼šæ²¡æœ‰è¢«å…¶å®ƒå¯¹è±¡æŒæœ‰ã€ä¸æ˜¯å¸¸é‡ã€æ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ªè€Œä¸æ˜¯æ¯ä¸ªç»„ä»¶ä¸€ä¸ª å•ä¾‹ï¼šé¿å…æ»¥ç”¨å•ä¾‹ iOSä¾èµ–æ³¨å…¥ ç¦ç”¨ARCï¼Œä½¿ç”¨retainæ‰¾åˆ°ç¥žç§˜æŒæœ‰è€…12345if !__has_feature(objc_arc)-(id) retain &#123;NSLog(@&quot;%s %@&quot;, __PRETTY_FUNCTION__, [NSThread callStackSymbols]);return [super retain];&#125; ä»£ç æ„ŸçŸ¥123456789101112131415161718192021// å·²ç”¨å†…å­˜vm_size_t getUsedMemory() &#123;task_basic_info_data_t info;mach_msg_type_number_t size = sizeof(info);kern_return_t kerr = task_info(mach_task_self(), TASK_BASIC_INFO, (task_info_t)&amp;info, &amp;size);if (kerr == KERN_SUCCESS) &#123;return info.resident_size;&#125;else &#123;return 0;&#125;&#125;// å¯ç”¨å†…å­˜vm_size_t getFreeMemory() &#123;mach_port_t host = mach_host_self();mach_msg_type_number_t size = sizeof(vm_statistics_data_t) / sizeof(integer_t) ;vm_size_t pagesize;vm_statistics_data_t vmstat;host_page_size(host, &amp;pagesize);host_statistics(host, HOST_VM_INFO, (host_info_t)&amp;vmstat, &amp;size);return vmstat.free_count * pagesize;&#125; 3 èƒ½è€—CPU å°½é‡å°‘çš„ï¼Œå¿«çš„å¤„ç†æ•°æ® ä¼˜åŒ–é™æ€ç¼–è¯‘å¤„ç†ï¼Œä¾‹å¦‚tableviewè®¾å¤‡ä¸Šå¯æ¸²æŸ“Næ¡æ•°æ®ï¼Œåˆ™å¤„ç†3Næ•°æ®è€Œä¸æ˜¯å…¨éƒ¨æ•°æ®ï¼Œå¿«é€Ÿæ»‘åŠ¨æ—¶ç­‰é€Ÿåº¦é™ä¸‹æ¥å†å¤„ç†ç­‰ ç½‘ç»œ èœ‚çªç½‘ç»œè€—ç”µé«˜äºŽwifiï¼Œå› èœ‚çªæ•°æ®è¿žæŽ¥ä¼šå®šæœŸæ‰«æä»¥å¯»æ‰¾æ›´å¼ºä¿¡å·ã€‚ æ— ç½‘æ—¶ï¼Œåº”æŽ¨è¿ŸåŽç»­ç½‘ç»œè¯·æ±‚ï¼ŒçŸ¥é“ç½‘ç»œæ¢å¤ã€‚å®žçŽ°æ–¹æ¡ˆï¼šå¾…å®š,ä½†æ„Ÿè§‰æ²¡æœ‰ç›´æŽ¥è¿”å›žé”™è¯¯ï¼Œç½‘ç»œæ¢å¤é‡è¦æŽ¥å£å†è¯·æ±‚å¥½ å‡å°‘Reachabilityç½‘ç»œçŠ¶æ€æ£€æŸ¥é¢‘æ¬¡ã€‚ æ•°æ®æºæ›´æ–°é¢‘çŽ‡ä½Žæ—¶ï¼Œå‡å°‘é‡å¤è¯·æ±‚é¢‘æ¬¡ï¼šæœ€ç®€å•çš„ç®—æ³•ï¼šæ•°æ®ç›¸åŒï¼Œè¯·æ±‚é—´éš”ç´¯åŠ  åº”å®šæœŸé›†ä¸­çŸ­æš‚çš„ä½¿ç”¨ç½‘ç»œï¼Œè€Œä¸æ˜¯æŒç»­çš„ä¿æŒæ´»åŠ¨çš„æ•°æ®æµï¼Œåªæœ‰è¿™æ ·ï¼Œç½‘ç»œç¡¬ä»¶æ‰æœ‰æœºä¼šå…³é—­ å®šä½ç®¡ç†å™¨å’ŒGPS distanceFilter ç§»åŠ¨æœ€å°è·ç¦»ï¼Œä¸ä¼šå‡å°‘GPSæŽ¥æ”¶å™¨ä½¿ç”¨ï¼Œä½†ä¼šå½±å“CPUçš„ä½¿ç”¨ desiredAccuracy å½±å“ä½¿ç”¨å¤©çº¿ä¸ªæ•°ï¼Œç²¾åº¦é«˜ç”¨çš„å¤©çº¿å¤šï¼Œæ›´è€—èƒ½ å°½é‡å…³é—­ä½ç½®è·Ÿè¸ªã€‚åœ¨éœ€è¦è·Ÿè¸ªæ—¶è°ƒç”¨startUpdatingLocationï¼Œä¸éœ€è¦æ—¶è°ƒstopUpdatingLocation åŽå°é•¿è·ç¦»æŒç»­è·Ÿè¸ªç”¨ startMonitoringSignificantLocationChangesï¼Œç²¾åº¦è·ŸdesiredAccuracyå’ŒdistanceFilteræ— å…³ã€‚æ¯”è¾ƒå¥½çš„åŠžæ³•æ˜¯ï¼Œå‰å°ç”¨startUpdatingLocationï¼ŒåŽå°ç”¨startMonitoringSignificantLocationChanges å› ç¼ºä¹èµ„æºï¼ŒåŽå°åº”ç”¨è¢«å…³é—­ã€‚æ­¤çŠ¶å†µä¸‹ä¸€æ—¦å‘ç”Ÿä½ç½®å˜åŒ–ï¼Œåº”ç”¨ä¼šé‡å¯ï¼Œå› ä¸ºéœ€è¦é‡æ–°åˆå§‹åŒ–ä½ç½®ç›‘å¬123456- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123;if (launchOptions[UIApplicationLaunchOptionsLocationKey]) &#123;// é‡å¯[LocaitonManager startMonitoringSignificantLocationChanges];&#125;&#125; å±å¹• å‰å°ä½¿ç”¨åŠ¨ç”»ï¼Œä¸€æ—¦ç¨‹åºè¿›å…¥åŽå°åº”ç«‹å³æš‚åœåŠ¨ç”» è§†é¢‘æ’­æ”¾ï¼Œä½¿ç”¨UIApplicationå¯¹è±¡çš„idleTimerDisabled = YES å®žçŽ°å¸¸äº®ï¼Œå½“å‰ä¹Ÿå¯æ ¹æ®å‰åŽå°åˆ‡æ¢æ¥è®¾ç½®æ˜¯å¦èŽ·å–é” å¤šå±å¹•ï¼Œå½“å¤–éƒ¨å±å¹•æ’­æ”¾ç”µå½±ç­‰æ—¶æ‰‹æœºå±å¹•å¯ä¿ç•™æœ€åŸºæœ¬æŽ§åˆ¶ï¼Œä»¥å‡å°‘å±å¹•æ›´æ–°ï¼Œå»¶é•¿ç”µæ± ä½¿ç”¨ å…¶å®ƒç¡¬ä»¶ è“ç‰™ã€ç›¸æœºã€æ‰¬å£°å™¨ã€éº¦å…‹é£Žç­‰ï¼ŒåŽŸåˆ™æ˜¯å½“åº”ç”¨å¤„äºŽå‰å°æ‰ä¸Žè¿™äº›ç¡¬ä»¶äº¤äº’ï¼Œåº”ç”¨å¤„äºŽåŽå°åº”åœæ­¢äº¤äº’ åˆ†æžç”µé‡ä½¿ç”¨ instruments ç²¾å‡†ç”µé‡ï¼šmonsoon solutions å·¥å…· ä»£ç æ„ŸçŸ¥123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354// ç”µæ± æ„ŸçŸ¥ï¼Œios8å‰åªèƒ½ç²¾ç¡®åŠ¨5%ï¼Œä»¥åŽå¯ç²¾ç¡®åˆ°1%- (BOOL)shouldProceedWithMinLevel:(NSUInteger)minLevel &#123;UIDevice *device = [UIDevice currentDevice];device.batteryMonitoringEnabled = YES;UIDeviceBatteryState state = device.batteryState;// å……ç”µæˆ–æ»¡ç”µif (state == UIDeviceBatteryStateCharging || state == UIDeviceBatteryStateFull) &#123;return YES;&#125;NSUInteger batteryLevel = (NSUInteger)(device.batteryLevel * 100);if (batteryLevel &gt;= minLevel) &#123;return YES;&#125;return NO;&#125;// cpuåˆ©ç”¨çŽ‡- (float)appCPUUsage &#123;kern_return_t kr;task_info_data_t info;mach_msg_type_number_t infoCount = TASK_INFO_MAX;kr = task_info(mach_host_self(), TASK_BASIC_INFO, (task_info_t)info, &amp;infoCount);if (kr != KERN_SUCCESS) &#123;return -1;&#125;thread_array_t thread_list;mach_msg_type_number_t thread_count;thread_info_data_t thinfo;mach_msg_type_number_t thread_info_count;thread_basic_info_t basic_info_th;kr = task_threads(mach_host_self(), &amp;thread_list, &amp;thread_count);if (kr != KERN_SUCCESS) &#123;return -1;&#125;long total_time = 0;long total_userTime = 0;CGFloat total_cpu = 0;int j;for (j = 0; j &lt; (int)thread_count; j++) &#123;thread_info_count = THREAD_INFO_MAX;kr = thread_info(thread_list[j], THREAD_BASIC_INFO, (thread_info_t)thinfo, &amp;thread_info_count);if (kr != KERN_SUCCESS) &#123;return -1;&#125;basic_info_th = (thread_basic_info_t)thinfo;if (!(basic_info_th-&gt;flags &amp; TH_FLAGS_IDLE)) &#123;total_time = total_time + basic_info_th-&gt;user_time.seconds + basic_info_th-&gt;system_time.seconds;total_userTime = total_userTime + basic_info_th-&gt;user_time.microseconds + basic_info_th-&gt;system_time.microseconds;total_cpu = total_cpu + basic_info_th-&gt;cpu_usage / (float)TH_USAGE_SCALE * 100.0;&#125;&#125;vm_deallocate(mach_host_self(), (vm_offset_t)thread_list, thread_count * sizeof(thread_t));return total_cpu;&#125; 4 å¹¶å‘ç¼–ç¨‹çº¿ç¨‹å¼€é”€ ä¸»çº¿ç¨‹æ ˆç©ºé—´1Mï¼ŒäºŒçº§çº¿ç¨‹é»˜è®¤åˆ†é…512Kçš„æ ˆç©ºé—´ï¼ˆå¯æ”¹ï¼‰ï¼Œä½†æŸä¸ªæ—¶é—´ç‚¹çš„å®žé™…ä½¿ç”¨æ ˆç©ºé—´è¦å°çš„å¤š åˆ›å»ºçº¿ç¨‹å¾ˆè€—æ—¶ï¼Œå¹³å±€åœ¨30æ¯«ç§’å·¦å³ï¼Œå› å¤šæ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢ dispatch_async å‡½æ•°åˆ†å‘åˆ°å…¨å±€é˜Ÿåˆ—ä¸ä¸€å®šä¼šæ–°å»ºçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œå…¨å±€é˜Ÿåˆ—åº•å±‚çº¿ç¨‹æ± ä¸Šé™æ˜¯64ä¸ªï¼Œå¦‚æžœçº¿ç¨‹æ± æ»¡äº†ï¼Œé‚£ä¹ˆåŽç»­çš„ä»»åŠ¡ä¼šè¢«é˜»å¡žï¼Œæœ‰å¯èƒ½crash æ“ä½œå’Œé˜Ÿåˆ— GCDã€NSOperationQueue å’Œ NSthreadç®€ä»‹ é”çš„åº”ç”¨ GCDå¯ä»¥è®¾ç½®ä¼˜å…ˆçº§ï¼Œä¹Ÿå¯ä»¥cancel canceléƒ½æ˜¯è®¾ç½®æ ‡å¿—ä½ï¼Œå¯¹å·²å¼€å§‹çš„æ— æ•ˆ çº¿ç¨‹å®‰å…¨çš„ä»£ç  åŽŸå­æ€§ atomic é»˜è®¤çš„ï¼Œä½†ä¼šå¢žåŠ å¼€é”€ @synchronized åŒæ­¥å—ï¼Œå¯ä»¥åˆ›å»ºä¿¡å·é‡å¹¶è¿›å…¥ä¸´ç•ŒåŒºï¼Œè¿‡åº¦ä½¿ç”¨@synchronizedä¼šæ‹–æ…¢è¿è¡Œé€Ÿåº¦ï¼Œå› ä¸ºä»»ä½•æ—¶é—´éƒ½åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨ä¸´ç•ŒåŒºå†…æ‰§è¡Œã€‚ é”ï¼šNSLockï¼ŒNSRecursiveLockï¼ŒNSCondition å°†è¯»å†™é”åº”ç”¨äºŽå¹¶å‘è¯»å†™ dispatch_barrier é˜»å¡žæ“ä½œç”¨äºŽå†™ ä½¿ç”¨ä¸å¯å˜å®žä½“ï¼Œä¸åªæ˜¯NSArrayç­‰ï¼Œä¹ŸåŒ…æ‹¬æ€Žä¹ˆä¿è¯è‡ªå®šä¹‰ç±»çš„ä¸å¯å˜æ€§ï¼Ÿä½¿ç”¨å»ºé€ è€…æ¨¡å¼ ä½¿ç”¨é›†ä¸­çš„çŠ¶æ€æ›´æ–°æœåŠ¡ swiftä¸­å°½é‡ä¸ä½¿ç”¨ç±»ã€‚ å†°æ£’ä¸å¯å˜å®žä½“ï¼šå³ä½¿ç”¨ä¸€ä¸ªfrozençš„boolå±žæ€§æ ‡è®°æ­¤å¯¹è±¡æ˜¯å¦å¯å˜ï¼Œæ‰€æœ‰å±žæ€§setteræ–¹æ³•å‡æ£€æŸ¥frozenæ¥åˆ¤æ–­æ˜¯å¦å¯æ›´æ”¹ã€‚ çŠ¶æ€è§‚å¯Ÿä¸Žé€šçŸ¥ï¼šRAC å¼‚æ­¥ä¼˜äºŽåŒæ­¥ï¼Œä½¿ç”¨promiseæ˜¯æœ€å¥½çš„æ–¹å¼ åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸAppDelegateåº”ç”¨å¯åŠ¨ ç¬¬ä¸€æ¬¡å®‰è£…ä½¿ç”¨ï¼Œåå¤æ‹†è§£ä»»åŠ¡åŽŸåˆ™ï¼šç¡®å®šåœ¨å±•ç¤ºUIå‰å¿…é¡»æ‰§è¡Œçš„ä»»åŠ¡ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œï¼Œå°†ä»»åŠ¡åˆ†ä¸ºå¿…é¡»åœ¨mainæ‰§è¡Œå’Œå¯åœ¨å…¶å®ƒçº¿ç¨‹æ‰§è¡Œï¼Œå…¶å®ƒä»»åŠ¡å¯ä»¥åœ¨åŠ è½½UIåŽæ‰§è¡Œæˆ–å¼‚æ­¥æ‰§è¡Œ å†·å¯åŠ¨ï¼šå°½å¯èƒ½å°‘çš„è¯·æ±‚å’Œå±•ç¤ºæ•°æ®ï¼Œé€‚å½“å¢žåŠ æç¤º çƒ­å¯åŠ¨ï¼š å‡çº§åŽå¯åŠ¨ï¼šæ³¨æ„ç¼“å­˜é—®é¢˜ æŽ¨é€é€šçŸ¥ è¿œç¨‹é€šçŸ¥ï¼šé™é»˜æ›´æ–°ï¼Œå¯Œæ–‡æœ¬æ ·å¼ï¼Œé€šçŸ¥è°ƒç”¨é¡ºåºï¼Œå½“å‰appçŠ¶æ€ å…ˆé™é»˜ä¸‹è½½æ›´æ–°ï¼Œåœ¨æœ¬åœ°é€šçŸ¥ç”¨æˆ·æ‰“å¼€ï¼Œå¯ä»¥æ›´å¿«æ˜¾ç¤ºå†…å®¹ åŽå°æ‹‰å– applicationï¼šperformFetchWith ä»»åŠ¡å¿…é¡»åœ¨30ç§’å†…å®Œæˆï¼Œå°½é‡å°‘æ‹‰å–æ²¡ç”¨çš„ä¸œè¥¿ï¼Œä½¿ç”¨NSURLSession åŽå°æ‹‰å–æ—¶å…¶å®ƒæŒ‚èµ·çš„é˜Ÿåˆ—ä¹Ÿå¯èƒ½æ¢å¤ï¼Œå¦‚æžœå…¶å®ƒé˜Ÿåˆ—è¶…æ—¶å¯èƒ½crash åŽå°æ‹‰å–é—´éš”å—ç³»ç»Ÿå› ç´ å½±å“ï¼Œä¸è¦è¿‡åˆ†ä¾èµ–èµ·è§„å¾‹ ç”¨æˆ·ç•Œé¢è§†å›¾æŽ§åˆ¶å™¨ VCç”Ÿå‘½å‘¨æœŸï¼šinitâ€”&gt;loadViewâ€”&gt;viewDidLoadâ€”&gt;viewWillApperâ€”&gt;viewDidApperâ€”&gt;viewWillDisapperâ€”&gt;viewDidDisapperâ€”&gt;viewWillUnload-&gt;viewDidUnloadâ€”&gt;dealloc ä¿æŒVCè½»é‡ï¼šåªæ˜¯çº½å¸¦ï¼Œä¸æ˜¯å­˜æ”¾æ‰€æœ‰é€»è¾‘çš„åœ°æ–¹ ä¸è¦åœ¨VCä¸­å†™åŠ¨ç”»ï¼šç‹¬ç«‹åŠ¨ç”»ç±»ï¼ŒVCä½œä¸ºå‚æ•° ä½¿ç”¨æ•°æ®æºå’Œå§”æ‰˜åè®®ï¼Œå°†ä»£ç æŒ‰ç…§æ•°æ®æ£€ç´¢ã€æ•°æ®æ›´æ–°å’Œå…¶å®ƒä¸šåŠ¡é€»è¾‘è¿›è¡Œåˆ†ç¦»ï¼ŒVCåªèƒ½ç”¨æ¥é€‰æ‹©æ­£ç¡®çš„è§†å›¾ï¼Œå¹¶å°†ä»–ä»¬é“¾æŽ¥åˆ°ä¾›åº”æºã€‚ VCå“åº”æ¥è‡ªè§†å›¾çš„äº‹ä»¶ï¼Œç„¶åŽé“¾æŽ¥åˆ°æ•°æ®æŽ¥æ”¶å™¨ VCå“åº”ç³»ç»Ÿçº§UIç›¸å…³äº‹ä»¶ï¼Œä¾‹å¦‚æ–¹å‘å’Œä½Žå†…å­˜ç­‰ ä¸è¦ç¼–å†™è‡ªå®šä¹‰çš„initä»£ç  VCä¸­ä¸è¦ä»£ç å¸ƒå±€UIï¼Œä¹Ÿä¸è¦æŠŠæ‰€æœ‰å¸ƒå±€éƒ½æ”¾åˆ°VCé‡Œ åˆ›å»ºBaseVC ä¹Ÿå¯ä½¿ç”¨categoryåˆ›å»ºå¯å¤ç”¨ä»£ç  å¦‚æžœè½½å…¥æ—¶é—´è¿‡é•¿ï¼Œå¯åŠ å…¥ç­‰å¾…åŠ¨ç”»ï¼Œå‡å°‘ç”¨æˆ·ç„¦è™‘ è§†å›¾åŠ è½½ loadView è‡ªå®šä¹‰UIçš„æ³¨æ„äº‹é¡¹ï¼šå°†viewå±žæ€§è®¾ç½®åˆ°è§†å›¾å±‚çº§çš„æ ¹ä¸Šï¼Œç¡®ä¿è§†å›¾æ­£è¢«å…¶å®ƒVCå…±äº«ï¼›ä¸è¦è°ƒç”¨super loadView å°½é‡ä¸è¦é‡å†™loadView viewDidLoadè¦å°½å¯èƒ½çŸ­ è§†å›¾å±‚çº§ è§†å›¾ç»“æž„å’Œæ¸²æŸ“æ­¥éª¤ï¼š1ï¼Œæž„é€ å­è§†å›¾ï¼›2ï¼Œè®¡ç®—å¹¶æä¾›çº¦æŸï¼›3ï¼Œä¸ºå­è§†å›¾é€’å½’æ‰§è¡Œæ­¥éª¤1å’Œ2ï¼›4ï¼Œé€’å½’æ¸²æŸ“ å‡å°‘å±‚çº§ï¼Œå¼‚æ­¥è®¡ç®— è§†å›¾å¯è§æ€§ viewWillAppear è¿‡æ¸¡åŠ¨ç”»æœªå¼€å§‹ï¼Œä¸è¦å¯åŠ¨ä»»ä½•è§†å›¾åŠ¨ç”» viewDidAppear VCå±•ç¤ºä¸”è¿‡æ¸¡åŠ¨ç”»ç»“æŸï¼Œå¯åŠ¨è§†å›¾åŠ¨ç”» viewWillDisappear åˆ¤æ–­å‡ºæ ˆè¿˜æ˜¯å…¥æ ˆ 123456789- (void)viewWillDisappear:(BOOL)animated &#123;NSInteger index = [self.navigationController.viewControllers indexOfObject:self];if (index == NSNotFound) &#123;// å‡ºæ ˆï¼Œé”€æ¯&#125;else &#123;// å…¥æ ˆï¼Œä¿å­˜ï¼Œæš‚åœ&#125;[super viewWillDisappear:animated];&#125; viewDidAppear è§†å›¾ å°½é‡å‡å°‘åœ¨miançº¿ç¨‹ä¸­æ‰€åšçš„å·¥ä½œ é¿å…è¾ƒå¤§çš„nibæˆ–æ•…äº‹æ¿ï¼Œæ‹†åˆ†æˆå°çš„ï¼ŒæŒ‰éœ€åŠ è½½ é¿å…å¤šå±‚åµŒå¥—ï¼Œä¿æŒæ‰å¹³åŒ– å»¶è¿ŸåŠ è½½å’Œé‡ç”¨ å¯¹äºŽå¤æ‚çš„UIè€Œè¨€ï¼Œæœ€å¥½ä½¿ç”¨è‡ªå®šä¹‰ç»˜å›¾ï¼Œdrawrect å‡å°‘cleanColorä½¿ç”¨ï¼Œå‡å°‘é€æ˜Žåº¦ä½¿ç”¨ï¼Œå‡å°‘åœ†è§’ä½¿ç”¨ UILabel è‡ªå®šä¹‰å­—ä½“ï¼Œæ£€æŸ¥å®½åº¦æˆ–é«˜åº¦ç­‰éƒ½æ˜¯å¾ˆè´¹æ—¶çš„ä»»åŠ¡ çº¯æ–‡æœ¬å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰ç»˜å›¾ UIButtonUIImageView ä½¿ç”¨ imageNameï¼šåŠ è½½å·²çŸ¥å›¾åƒ å°å›¾ï¼Œå¤ç”¨ï¼Œä½¿ç”¨èµ„æºåŒ… .xcassets ä¸€æ¬¡æ€§å¤§å›¾ç”¨å®Œå°±æ‰”ï¼Œä½¿ç”¨imageWithContentsOfFile ä½¿ç”¨SDWebImage,ä¸è¦ä½¿ç”¨ç¡¬ç¼–ç  å°½é‡ä¸è¦åŽ‹ç¼©æˆ–æ‹‰ä¼¸å›¾åƒï¼Œå›¾åƒå¤šå¤§æ˜¾ç¤ºå¤šå¤§æ€§èƒ½æœ€é«˜ å¤„ç†å›¾åƒæœ€å¥½åœ¨ä¸€ä¸ªå•ç‹¬çš„ä¸“ç”¨é˜Ÿåˆ—ä¸­è¿›è¡Œã€‚ UITableView ä½¿ç”¨cellçš„é‡ç”¨æœºåˆ¶ å°½é‡é¿å…åŠ¨æ€é«˜åº¦å•å…ƒæ ¼ï¼Œå¦‚æžœå¿…é¡»ä½¿ç”¨åŠ¨æ€é«˜åº¦ï¼Œæ ‡è®°å“ªäº›æ˜¯è„çš„ï¼Œå‡å°‘ä¸å¿…è¦æ¸²æŸ“ ä½¿ç”¨è‡ªå®šä¹‰è§†å›¾é‡ç”¨cellæ˜¯é¿å…è°ƒç”¨ layoutIfNeededæ¯æ¬¡éƒ½å¸ƒå±€ é¿å…é€æ˜Žå­è§†å›¾ å¿«é€Ÿæ»šåŠ¨ä½¿ç”¨å¤–å£³cellï¼ˆå³æ¨¡ç³Šæ•ˆæžœçš„cellï¼‰ï¼Œæ»šåŠ¨å¿«ç»“æŸå†åˆ·æ–°å¯è§†èŒƒå›´cell é¿å…æ¸å˜ã€å›¾åƒç¼©æ”¾ä»¥åŠä»»ä½•å±å¹•å¤–çš„ç»˜åˆ¶ã€‚ è‡ªå®šä¹‰è§†å›¾ drawRectæ–¹æ³•ä¸ä½†å¯ä»¥ä½¿ç”¨CoreGraphicsï¼Œä¹Ÿå¯ä»¥åˆå§‹åŒ–å†å­è§†å›¾è°ƒdrawInRectæ–¹æ³•ç»˜åˆ¶ è‡ªåŠ¨å¸ƒå±€ å°½é‡ç”¨ ç½‘ç»œæŒ‡æ ‡å’Œæµ‹é‡DNSæŸ¥æ‰¾æ—¶é—´ å‘èµ·é“¾æŽ¥å¾—ç¬¬ä¸€æ­¥æ˜¯DNSæŸ¥æ‰¾ å‡å°‘æŸ¥æ‰¾æ—¶é—´ï¼šå‡å°‘ä¸“æœ‰åŸŸåæ•°é‡ï¼Œå¯åŠ¨æ—¶åªé“¾æŽ¥å…³é”®åŸŸåï¼Œ SSLæ¡æ‰‹æ—¶é—´ å‡å°‘åº”ç”¨å‘èµ·çš„è¿žæŽ¥æ•°ï¼›ä¸ºæ‰€æœ‰çš„httpsè¯·æ±‚æ·»åŠ å¤´Connection:keep-alive; ä½¿ç”¨åŸŸåˆ†ç‰‡ ç½‘ç»œç±»åž‹ Wifiï¼Œ4G,3G,2G è®¾è®¡æ—¶è€ƒè™‘ä¸åŒç½‘ç»œçš„å¯ç”¨æ€§ï¼›å‡ºçŽ°å¤±è´¥æ—¶ï¼Œåœ¨éšæœºçš„ã€ä»¥æŒ‡æ•°å¢žé•¿çš„å»¶è¿ŸåŽè¿›è¡Œé‡è¯•ï¼Œå¹¶è®¾ç½®æœ€å¤šé‡è¯•æ¬¡æ•°ï¼›è®¾å®šå¼ºåˆ¶åˆ·æ–°ä¹‹é—´çš„æœ€çŸ­æ—¶é—´ï¼›ç›‘æŽ§ç½‘ç»œçŠ¶æ€å˜åŒ–ä½†ä¸è¦ç¼“å­˜ç½‘ç»œçŠ¶æ€ï¼›åŸºäºŽç½‘ç»œç±»åž‹ä¸‹è½½å†…å®¹ï¼›é¢„ä¸‹è½½é¢„ç¼“å­˜ï¼› å»¶è¿Ÿ å»¶è¿Ÿ = è¯·æ±‚æ€»æ—¶é—´ - æœåŠ¡å™¨è¯è´¹æ—¶é—´ åº”ç”¨éƒ¨ç½²æœåŠ¡å™¨è¯·æ±‚ ä¸è¦ä¸ºæ¯ä¸ªæ“ä½œéƒ½è¿›è¡Œä¸€æ¬¡è¯·æ±‚ï¼Œä½¿ç”¨æ‰¹é‡è¯·æ±‚ ä½¿ç”¨httpç¼“å­˜å¤´è®¾ç½®æ­£ç¡®çš„ç¼“å­˜çº§åˆ« å‡å°‘ä¸å¿…è¦çš„è¯·æ±‚ï¼Œå¦‚æžœæœ‰å¿…è¦å¯é™å®šè¯·æ±‚é—´éš”ï¼Œè¯·æ±‚é‡å¤æ•°æ®å¯å»¶é•¿é—´éš”ï¼Œè¯·æ±‚å¤±è´¥ä»¥æŒ‡æ•°å¢žé•¿å»¶é•¿é‡è¯•é—´éš” æ•°æ®æ ¼å¼ åŽ‹ç¼© PBï¼Ÿ å·¥å…·ç½‘ç»œé“¾æŽ¥è°ƒèŠ‚å™¨AT&amp;Tåº”ç”¨èµ„æºä¼˜åŒ–å™¨charles || whistleæ•°æ®å…±äº«æ·±å±‚é“¾æŽ¥ ä½¿ç”¨ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼Œå…¶é“¾æŽ¥åˆ°åº”ç”¨å†…çš„ç‰¹å®šä½ç½® å‰ªåˆ‡æ¿ ä¸å¯æŽ§ï¼šä¼ é€’ä¸é‡è¦çš„æ¶ˆæ¯ é¿å…å¤§æ•°æ®ï¼Œ è¿›å…¥åŽå°åŽæœ€å¥½æ¸…é™¤å‰ªåˆ‡æ¿ å®‰å…¨ åŒ¿åç”¨æˆ·è®¾å¤‡id || ç”¨æˆ·è®¤è¯å•ç‚¹ç™»å½• ä½¿ç”¨https æœ¬åœ°æ•æ„Ÿæ•°æ®åŠ å¯†]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSé”ç›¸å…³]]></title>
    <url>%2F2016%2F09%2F18%2FiOS%E9%94%81%E7%9B%B8%E5%85%B3%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;å‰å‡ å¤©å¶ç„¶çœ‹åˆ°ä¸å†å®‰å…¨çš„ OSSpinLockï¼Œé‡Œé¢ä»‹ç»äº†9ç§é”ï¼Œè€Œæˆ‘è‡ªå·±çŸ¥é“çš„åªè¦ä¸‰ä¸ªï¼šNSLockï¼Œdispatch_semaphoreå’Œ@synchronizedï¼Œä»Šå¤©æŠ½æ—¶é—´æŸ¥äº†ä¸‹ç›¸å…³é”çš„ä½¿ç”¨ï¼Œè®°å½•å¦‚ä¸‹ 1 é”çš„ç§ç±» ä¸´ç•ŒåŒºï¼šæŒ‡çš„æ˜¯ä¸€å—å¯¹å…¬å…±èµ„æºè¿›è¡Œè®¿é—®çš„ä»£ç ï¼Œå¹¶éžä¸€ç§æœºåˆ¶æˆ–æ˜¯ç®—æ³•ã€‚ è‡ªæ—‹é”ï¼šåå¤æ£€æŸ¥(while(1)å¾ªçŽ¯)é”å˜é‡æ˜¯å¦å¯ç”¨ã€‚å¿™ç­‰è™½ç„¶å ç”¨CPUï¼Œä½†é¿å…äº†ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ï¼Œæ‰€ä»¥åªé€‚ç”¨äºŽé˜»å¡žæ—¶é—´å¾ˆçŸ­çš„ä»»åŠ¡ äº’æ–¥é”ï¼ˆMutexï¼‰ï¼šå½“ä¸€ä¸ªçº¿ç¨‹æ— æ³•èŽ·å¾—äº’æ–¥é‡æ—¶ç›´æŽ¥æŒ‚èµ·ï¼Œå½“äº’æ–¥é‡å¯ç”¨æ—¶ç³»ç»Ÿåœ¨æ¿€æ´»è¯¥çº¿ç¨‹ é€’å½’é”ï¼šå¯é‡å¤åŠ é”å¹¶è®°å½•ä¸Šé”å’Œè§£é”çš„æ¬¡æ•°ï¼Œå½“äºŒè€…å¹³è¡¡çš„æ—¶å€™ï¼Œæ‰ä¼šé‡Šæ”¾é”ï¼Œå…¶å®ƒçº¿ç¨‹æ‰å¯ä»¥ä¸Šé”æˆåŠŸã€‚æ‰€ä»¥è¿™ä¸ªé”å¯ä»¥è¢«åŒä¸€çº¿ç¨‹å¤šæ¬¡è¯·æ±‚ï¼Œè€Œä¸ä¼šå¼•èµ·æ­»é” è¯»å†™é”ï¼šå¤šè¯»è€…-å•å†™è€…é”ï¼Œè¯»æ“ä½œå¯å¹¶å‘é‡å…¥ï¼Œå†™æ“ä½œæ˜¯äº’æ–¥çš„ã€‚ è¯»å†™é”é€šå¸¸ç”¨äº’æ–¥é”ã€æ¡ä»¶å˜é‡ã€ä¿¡å·é‡å®žçŽ°ã€‚ ä¿¡å·é‡ï¼ˆsemaphoreï¼‰ï¼šæ˜¯ä¸€ç§æ›´é«˜çº§çš„åŒæ­¥æœºåˆ¶ï¼Œäº’æ–¥é”å¯ä»¥è¯´æ˜¯semaphoreåœ¨ä»…å–å€¼0/1æ—¶çš„ç‰¹ä¾‹ã€‚ä¿¡å·é‡å¯ä»¥æœ‰æ›´å¤šçš„å–å€¼ç©ºé—´ï¼Œç”¨æ¥å®žçŽ°æ›´åŠ å¤æ‚çš„åŒæ­¥ï¼Œè€Œä¸å•å•æ˜¯çº¿ç¨‹é—´äº’æ–¥ã€‚ æ¡ä»¶é”ï¼šé¡¾åæ€ä¹‰ï¼Œä¸ç¬¦åˆæ¡ä»¶ï¼šé”ä½ï¼Œç¬¦åˆæ¡ä»¶ï¼šå¼€é”ï¼Œç»§ç»­è¿è¡Œ æ­»é”ï¼šç”±äºŽç«žäº‰èµ„æºç›¸äº’é˜»å¡žï¼Œè°ä¹ŸåŠ¨ä¸äº†å°±æ˜¯æ­»é” 2 äº’æ–¥é” 2.1 NSlock æ”¾å¿ƒç”¨AFNå°±åœ¨ç”¨ 12345678910111213141516// NSLockçš„lockå’Œunlockéœ€è¦åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸‹// NSLockå†…éƒ¨å°è£…äº†ä¸€ä¸ª pthread_mutexï¼Œå› æ­¤æ¯”è¾ƒæ…¢@property (readwrite, nonatomic, strong) NSLock *lock;// åˆå§‹åŒ–self.lock = [[NSLock alloc] init];self.lock.name = @&quot;com.compony.xxx.lock&quot;;// ä½¿ç”¨[self.lock lock];// do something[self.lock unlock];// è¯•å›¾èŽ·å–ä¸€ä¸ªé”ï¼Œä½†æ˜¯å¦‚æžœé”ä¸å¯ç”¨çš„æ—¶å€™ï¼Œå®ƒä¸ä¼šé˜»å¡žçº¿ç¨‹ï¼Œç›¸åï¼Œå®ƒåªæ˜¯è¿”å›žNO[self.lock tryLock];// å°è¯•åœ¨ç»™å®šæ—¶é—´å†…èŽ·å¾—é”[self.lock lockBeforeDate:[NSDate dateWithTimeIntervalSinceNow:100]]; 2.2 pthread_mutex 1234567891011121314151617181920// C è¯­è¨€ä¸‹å¤šçº¿ç¨‹åŠ äº’æ–¥é”çš„æ–¹å¼@interface JZKManager ()&#123;pthread_mutex_t _pLock;&#125;- (instancetype)init &#123;self = [super init];if (self) &#123;pthread_mutex_init(&amp;_pLock, NULL);&#125;return self;&#125;- (void)test &#123;pthread_mutex_lock(&amp;_pLock);// do somethingpthread_mutex_unlock(&amp;_pLock);&#125;- (void)dealloc &#123;pthread_mutex_destroy(&amp;_pLock);&#125; 2.3 @synchronized æ…Žç”¨,æ›´å¤šå†…å®¹ï¼šå…³äºŽ @synchronizedï¼Œè¿™å„¿æ¯”ä½ æƒ³çŸ¥é“çš„è¿˜è¦å¤š 1234// objä¸ºè¯¥é”çš„å”¯ä¸€æ ‡è¯†,åªæœ‰å½“æ ‡è¯†ç›¸åŒæ—¶ï¼Œæ‰æ»¡è¶³äº’æ–¥@synchronized (obj) &#123;// do something&#125; 3 é€’å½’é” 3.1 NSRecursiveLock 12345// NSRecursiveLockä¸ŽNSLockä½¿ç”¨æ–¹å¼ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽå†…éƒ¨å°è£…çš„ pthread_mutex_t å¯¹è±¡çš„ç±»åž‹ä¸åŒï¼Œå‰è€…çš„ç±»åž‹ä¸º PTHREAD_MUTEX_RECURSIVENSRecursiveLock *lock = [[NSRecursiveLock alloc] init];[lock lock];// dosomething [lock unlock]; 3.2 pthread_mutex(recursive) 12345678910111213141516171819202122232425262728293031/*PTHREAD_MUTEX_NORMAL ç¼ºçœç±»åž‹ï¼Œä¹Ÿå°±æ˜¯æ™®é€šé”ã€‚å½“ä¸€ä¸ªçº¿ç¨‹åŠ é”ä»¥åŽï¼Œå…¶ä½™è¯·æ±‚é”çš„çº¿ç¨‹å°†å½¢æˆä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼Œå¹¶åœ¨è§£é”åŽå…ˆè¿›å…ˆå‡ºåŽŸåˆ™èŽ·å¾—é”ã€‚PTHREAD_MUTEX_ERRORCHECK æ£€é”™é”ï¼Œå¦‚æžœåŒä¸€ä¸ªçº¿ç¨‹è¯·æ±‚åŒä¸€ä¸ªé”ï¼Œåˆ™è¿”å›žEDEADLKï¼Œå¦åˆ™ä¸Žæ™®é€šé”ç±»åž‹åŠ¨ä½œç›¸åŒã€‚è¿™æ ·å°±ä¿è¯å½“ä¸å…è®¸å¤šæ¬¡åŠ é”æ—¶ä¸ä¼šå‡ºçŽ°åµŒå¥—æƒ…å†µä¸‹çš„æ­»é”ã€‚PTHREAD_MUTEX_RECURSIVE é€’å½’é”ï¼Œå…è®¸åŒä¸€ä¸ªçº¿ç¨‹å¯¹åŒä¸€ä¸ªé”æˆåŠŸèŽ·å¾—å¤šæ¬¡ï¼Œå¹¶é€šè¿‡å¤šæ¬¡ unlock è§£é”ã€‚PTHREAD_MUTEX_DEFAULT é€‚åº”é”ï¼ŒåŠ¨ä½œæœ€ç®€å•çš„é”ç±»åž‹ï¼Œä»…ç­‰å¾…è§£é”åŽé‡æ–°ç«žäº‰ï¼Œæ²¡æœ‰ç­‰å¾…é˜Ÿåˆ—*/@interface JZKManager ()&#123;pthread_mutex_t _pLock;&#125;- (instancetype)init &#123;self = [super init];if (self) &#123;pthread_mutexattr_t attr;pthread_mutexattr_init (&amp;attr);pthread_mutexattr_settype (&amp;attr, PTHREAD_MUTEX_RECURSIVE);pthread_mutex_init (&amp;_lock, &amp;attr);pthread_mutexattr_destroy (&amp;attr);&#125;return self;&#125;- (void)test &#123;pthread_mutex_lock(&amp;_lock);// do somethingpthread_mutex_unlock(&amp;_lock);&#125;- (void)dealloc &#123;pthread_mutex_destroy(&amp;_lock);&#125; 4 ä¿¡å·é‡ 4.1 dispatch_semaphore æ”¾å¿ƒç”¨SDå°±åœ¨ç”¨1234567891011// å¸¸ç”¨å®å®šä¹‰,SDæºç #define LOCK(lock) dispatch_semaphore_wait(lock, DISPATCH_TIME_FOREVER);#define UNLOCK(lock) dispatch_semaphore_signal(lock);// ä½¿ç”¨@property (nonatomic, strong, nonnull) dispatch_semaphore_t weakCacheLock; // a lock to keep the access to `weakCache` thread-safe// call At self initself.weakCacheLock = dispatch_semaphore_create(1);// useLOCK(self.weakCacheLock);// do somethingUNLOCK(self.weakCacheLock); 5 è¯»å†™é” 5.1 pthread_rwlock 12345678910111213141516171819202122232425// è·Ÿpthread_mutexç±»ä¼¼ï¼Œå”¯ä¸€åŒºåˆ«æ˜¯ä¸Šé”æ—¶åˆ†ä¸ºè¯»é”è¿˜æ˜¯å†™é”@interface JZKManager ()&#123;pthread_rwlock_t _rwlock;&#125;- (instancetype)init &#123;self = [super init];if (self) &#123;pthread_rwlock_init(&amp;_rwlock, NULL);&#125;return self;&#125;- (void)read &#123;pthread_rwlock_rdlock(&amp;_rwlock);// do somethingpthread_rwlock_unlock(&amp;_rwlock);&#125;- (void)write &#123;pthread_rwlock_wrlock(&amp;_rwlock);// do somethingpthread_rwlock_unlock(&amp;_rwlock);&#125;- (void)dealloc &#123;pthread_rwlock_destroy(&amp;_rwlock);&#125; 5.2 å¦ç±»æ€è·¯ï¼šdispatch_barrier_async / dispatch_barrier_sync 123456789/ ä¸»è¦ç”¨äºŽè§£å†³å¤šçº¿ç¨‹å¹¶å‘è¯»å†™åŒä¸€ä¸ªèµ„æºå‘ç”Ÿæ­»é”// dispatchbarrier\(a)syncåªåœ¨è‡ªå·±åˆ›å»ºçš„å¹¶å‘é˜Ÿåˆ—ä¸Šæœ‰æ•ˆï¼Œåœ¨å…¨å±€(Global)å¹¶å‘é˜Ÿåˆ—ã€ä¸²è¡Œé˜Ÿåˆ—ä¸Šï¼Œæ•ˆæžœè·Ÿdispatch_(a)syncæ•ˆæžœä¸€æ ·ã€‚dispatch_queue_t queue = dispatch_queue_create(&quot;com.example.MyQueue&quot;, DISPATCH_QUEUE_CONCURRENT);// å…¶å®ƒå¼‚æ­¥æ“ä½œa b cdispatch_barrier_async(queue, ^&#123;// å”¯æˆ‘ç‹¬å°Šï¼Œè¿™ä¸ªæ—¶é—´æ®µé˜Ÿåˆ—åªè¿è¡Œè¿™ä¸ªblock&#125;);// å…¶å®ƒå¼‚æ­¥æ“ä½œ e f 6 æ¡ä»¶é” NSConditionLock1234NSConditionLock *cLock = [[NSConditionLock alloc] initWithCondition:0];if([cLock tryLockWhenCondition:0])&#123;[cLock unlockWithCondition:1];&#125; 7 è‡ªæ—‹é” OSSpinLock å·²åºŸå¼ƒ å‚è€ƒæˆ–å…¶ä»–ä¼˜ç§€åšå®¢ å…³äºŽ @synchronizedï¼Œè¿™å„¿æ¯”ä½ æƒ³çŸ¥é“çš„è¿˜è¦å¤š ä¸å†å®‰å…¨çš„ OSSpinLock å®žçŽ°é”çš„å¤šç§æ–¹å¼å’Œé”çš„é«˜çº§ç”¨æ³• https://stackoverflow.com/questions/2065747/pthreads-mutex-vs-semaphore æ­£ç¡®ä½¿ç”¨å¤šçº¿ç¨‹åŒæ­¥é”@synchronized è°ˆè°ˆiOSå¤šçº¿ç¨‹çš„é” ç™½å¤œè¿½å‡¶ï¼Œæ­å¼€iOSé”çš„ç§˜å¯† æŠ›å¼€æ€§èƒ½ï¼Œè°ˆè°ˆä¸è¯¥ç”¨@Synchronizedçš„åŽŸå› ]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Runloop]]></title>
    <url>%2F2016%2F09%2F11%2FRunloop%2F</url>
    <content type="text"><![CDATA[1 ä»‹ç»1 Runloop&emsp;&emsp;Runloopæ˜¯ç”¨äºŽçº¿ç¨‹è°ƒåº¦çš„ï¼Œè®©çº¿ç¨‹æœ‰â€œäº‹â€å¹²æ´»ï¼Œæ²¡â€œäº‹â€ä¼‘æ¯ï¼æ–¹å¼å°±æ˜¯æ‰§è¡Œä¸€ä¸ªwhileå¾ªçŽ¯ â€œæŽ¥å—æ¶ˆæ¯-&gt;ç­‰å¾…-&gt;å¤„ç†â€ï¼Œç›´åˆ°è¿™ä¸ªå¾ªçŽ¯ç»“æŸï¼ˆæ¯”å¦‚ä¼ å…¥quitçš„æ¶ˆæ¯ï¼‰ï¼Œå‡½æ•°è¿”å›žã€‚CFRunLoopRefæ˜¯å¼€æºçš„ï¼Œå¯ä»¥åœ¨ https://opensource.apple.com/tarballs/CF/ ä¸‹è½½åˆ°æ•´ä¸ª CoreFoundation çš„æºç 123456789101112int main(int argc, char * argv[]) &#123;//ç¨‹åºä¸€ç›´è¿è¡ŒçŠ¶æ€while (AppIsRunning) &#123;//ç¡çœ çŠ¶æ€ï¼Œç­‰å¾…å”¤é†’äº‹ä»¶id whoWakesMe = SleepForWakingUp();//å¾—åˆ°å”¤é†’äº‹ä»¶id event = GetEvent(whoWakesMe);//å¼€å§‹å¤„ç†äº‹ä»¶HandleEvent(event);&#125;return 0;&#125; 2 Runloopä¸Žçº¿ç¨‹&emsp;&emsp;çº¿ç¨‹å’ŒRunLoopä¹‹é—´æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œé™¤ä¸»çº¿ç¨‹å¤–ï¼ˆä¸»çº¿ç¨‹é»˜è®¤å¼€å¯runloopï¼‰å…¶å®ƒçº¿ç¨‹éœ€è¦æ‰‹åŠ¨å¼€å¯runloopï¼Œå³éœ€è¦æ‰‹åŠ¨èŽ·å–ä¸€ä¸‹runloopï¼Œç³»ç»Ÿä¼šè‡ªå·±å¼€å¯runloop123456// èŽ·å–ä¸»çº¿ç¨‹runloop[NSRunLoop mainRunLoop];// 1ã€å¼€è¾Ÿæ–°çº¿ç¨‹// 2ã€èŽ·å–æ–°çº¿ç¨‹çš„runloop[NSRunLoop currentRunLoop]; 3 Runloopç»„æˆ&emsp;&emsp;åœ¨ CoreFoundation é‡Œé¢å…³äºŽ RunLoop æœ‰5ä¸ªç±»:CFRunLoopRefã€CFRunLoopModeRefã€CFRunLoopSourceRefã€CFRunLoopTimerRefã€CFRunLoopObserverRefï¼Œå‚è€ƒï¼šç›—çš„å¤§ç¥žçš„å›¾1234567891011121314151617181920typedef struct __CFRunLoop * CFRunLoopRef;struct __CFRunLoop &#123;// å…¶å®ƒå˜é‡.....pthread_t _pthread; // çº¿ç¨‹å’ŒRunLoopä¹‹é—´æ˜¯ä¸€ä¸€å¯¹åº”çš„uint32_t _winthread;CFMutableSetRef _commonModes; // Set &lt;ModeName&gt;CFMutableSetRef _commonModeItems; // Set &lt;Source/Observer/Timer&gt;CFRunLoopModeRef _currentMode; // Current Runloop Mode// å…¶å®ƒå˜é‡.....&#125;;typedef struct __CFRunLoopMode *CFRunLoopModeRef;struct __CFRunLoopMode &#123;// å…¶å®ƒå˜é‡.....CFMutableSetRef _sources0; // å¤„ç†å¦‚UIEventï¼ŒCFSocketè¿™æ ·çš„äº‹ä»¶CFMutableSetRef _sources1; // Mach porté©±åŠ¨ï¼ŒCFMachportï¼ŒCFMessagePortCFMutableArrayRef _observers; // typedef struct __CFRunLoopObserver * CFRunLoopObserverRef;CFMutableArrayRef _timers; // typedef struct CF_BRIDGED_MUTABLE_TYPE(NSTimer) __CFRunLoopTimer * CFRunLoopTimerRef;// å…¶å®ƒå˜é‡.....&#125;; 3.1 CFRunLoopModeRef&emsp;&emsp;CFRunLoopModeRefåªèƒ½é€šè¿‡ mode name æ¥æ“ä½œå†…éƒ¨çš„ modeï¼Œå½“ä½ ä¼ å…¥ä¸€ä¸ªæ–°çš„ mode name ä½† RunLoop å†…éƒ¨æ²¡æœ‰å¯¹åº” mode æ—¶ï¼ŒRunLoopä¼šè‡ªåŠ¨å¸®ä½ åˆ›å»ºå¯¹åº”çš„ CFRunLoopModeRefã€‚å¯¹äºŽä¸€ä¸ª RunLoop æ¥è¯´ï¼Œå…¶å†…éƒ¨çš„ mode åªèƒ½å¢žåŠ ä¸èƒ½åˆ é™¤ã€‚ NSDefaultRunLoopModeï¼šé»˜è®¤ï¼Œç©ºé—²çŠ¶æ€ UITrackingRunLoopModeï¼šScrollViewæ»‘åŠ¨æ—¶ UIInitializationRunLoopModeï¼šå¯åŠ¨æ—¶ NSRunLoopCommonModesï¼šModeé›†åˆTimerè®¡æ—¶ä¼šè¢«scrollViewçš„æ»‘åŠ¨å½±å“çš„é—®é¢˜å¯ä»¥é€šè¿‡å°†timeræ·»åŠ åˆ°NSRunLoopCommonModesæ¥è§£å†³ 3.2 CFRunLoopSourceRef _sources0; // å¤„ç†å¦‚UIEventï¼ŒCFSocketè¿™æ ·çš„äº‹ä»¶ _sources1; // Mach porté©±åŠ¨ï¼ŒCFMachportï¼ŒCFMessagePort 3.3 CFRunLoopObserverRef12345678910/* Run Loop Observer Activities */typedef CF_OPTIONS(CFOptionFlags, CFRunLoopActivity) &#123;kCFRunLoopEntry = (1UL &lt;&lt; 0), // å³å°†è¿›å…¥loopkCFRunLoopBeforeTimers = (1UL &lt;&lt; 1), // å³å°†å¤„ç† TimerkCFRunLoopBeforeSources = (1UL &lt;&lt; 2),// å³å°†å¤„ç† SourcekCFRunLoopBeforeWaiting = (1UL &lt;&lt; 5),// å³å°†è¿›å…¥ä¼‘çœ kCFRunLoopAfterWaiting = (1UL &lt;&lt; 6), // åˆšä»Žä¼‘çœ ä¸­å”¤é†’kCFRunLoopExit = (1UL &lt;&lt; 7), // å³å°†é€€å‡ºLoopkCFRunLoopAllActivities = 0x0FFFFFFFU&#125;; 3.4 CFRunLoopTimerRef&emsp;&emsp; å’Œ NSTimer æ˜¯toll-free bridged çš„ï¼Œå¯ä»¥æ··ç”¨ã€‚å…¶åŒ…å«ä¸€ä¸ªæ—¶é—´é•¿åº¦å’Œä¸€ä¸ªå›žè°ƒï¼ˆå‡½æ•°æŒ‡é’ˆï¼‰ã€‚å½“å…¶åŠ å…¥åˆ° RunLoop æ—¶ï¼ŒRunLoopä¼šæ³¨å†Œå¯¹åº”çš„æ—¶é—´ç‚¹ï¼Œå½“æ—¶é—´ç‚¹åˆ°æ—¶ï¼ŒRunLoopä¼šè¢«å”¤é†’ä»¥æ‰§è¡Œé‚£ä¸ªå›žè°ƒã€‚ 2 RunLoopä½¿ç”¨1 ç¤ºä¾‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081int test() &#123;pthread_t t;pthread_create(&amp;t, NULL, &amp;runLoopStart, NULL);pthread_join(t, NULL);return 1;&#125;static void *runLoopStart() &#123;CFRunLoopRef runLoop = CFRunLoopGetCurrent();CFRunLoopSourceContext *context = malloc(sizeof(CFRunLoopSourceContext));CFRunLoopSourceContext contextTemplate = &#123;0,NULL,NULL,NULL,NULL,NULL,NULL,RunloopSourceSchedule,RunloopSourceCancel,RunloopSourcePerform&#125;;memcpy(context, &amp;contextTemplate, sizeof(CFRunLoopSourceContext));CFRunLoopSourceRef source = CFRunLoopSourceCreate(kCFAllocatorDefault, 0, context);CFRunLoopAddSource(runLoop, source, kCFRunLoopDefaultMode);CFRunLoopSourceSignal(source);CFRunLoopObserverRef observer = CFRunLoopObserverCreateWithHandler(kCFAllocatorDefault, kCFRunLoopAllActivities, YES, 0, ^(CFRunLoopObserverRef observer, CFRunLoopActivity activity) &#123;switch (activity) &#123;case kCFRunLoopEntry:NSLog(@&quot;observer: loop entry&quot;);break;case kCFRunLoopBeforeTimers:NSLog(@&quot;observer: before timers&quot;);break;case kCFRunLoopBeforeSources:NSLog(@&quot;observer: before sources&quot;);break;case kCFRunLoopBeforeWaiting:NSLog(@&quot;observer: before waiting&quot;);break;case kCFRunLoopAfterWaiting:NSLog(@&quot;observer: after waiting&quot;);break;case kCFRunLoopExit:NSLog(@&quot;observer: exit&quot;);break;case kCFRunLoopAllActivities:NSLog(@&quot;observer: all activities&quot;);break;default:break;&#125;&#125;);CFRunLoopAddObserver(runLoop, observer, kCFRunLoopDefaultMode);CFRunLoopWakeUp(runLoop);NSTimeInterval theFuture = [NSDate timeIntervalSinceReferenceDate] + 4.0;while ([NSDate timeIntervalSinceReferenceDate] &lt; theFuture) &#123;CFRunLoopRunInMode(kCFRunLoopDefaultMode, 0.0, YES);sleep(1);&#125;CFRunLoopRemoveSource(runLoop, source, kCFRunLoopDefaultMode);CFRunLoopRemoveObserver(runLoop, observer, kCFRunLoopDefaultMode);free(context);CFRelease(source);CFRelease(observer);return NULL;&#125;void RunloopSourceSchedule(void *info, CFRunLoopRef rl, CFRunLoopMode mode) &#123;NSLog(@&quot;Schedule routine: source is added to runloop&quot;);&#125;void RunloopSourceCancel(void *info, CFRunLoopRef rl, CFRunLoopMode mode) &#123;NSLog(@&quot;Cancel Routine: source removed from runloop&quot;);&#125;void RunloopSourcePerform(void *info) &#123;NSLog(@&quot;Perform Routine: source has fired&quot;);&#125; 2 å¤§ç¥žæ€»ç»“çš„é—®é¢˜ï¼Œæ‘˜å½•åœ¨æ­¤ AutoreleasePoolä»€ä¹ˆæ—¶å€™é‡Šæ”¾ï¼Ÿ kCFRunLoopEntryã€kCFRunLoopBeforeWaitingå’ŒkCFRunLoopExitæ—¶ä¼šè‡ªåŠ¨é‡Šæ”¾AutoreleasePool äº‹ä»¶å“åº”è·Ÿrunloopå…³ç³»ï¼Ÿè‹¹æžœæ³¨å†Œäº†ä¸€ä¸ª Source1 (åŸºäºŽ mach port çš„) ç”¨æ¥æŽ¥æ”¶ç³»ç»Ÿäº‹ä»¶ï¼Œå…¶å›žè°ƒå‡½æ•°ä¸º __IOHIDEventSystemClientQueueCallback()ï¼Œè¿›è¡Œäº‹ä»¶çš„åŒ…è£…å¤„ç†å’Œåˆ†å‘ æ‰‹åŠ¿è¯†åˆ«ï¼Œè‹¹æžœæ³¨å†Œäº†ä¸€ä¸ª Observer ç›‘æµ‹ BeforeWaiting (Loopå³å°†è¿›å…¥ä¼‘çœ ) äº‹ä»¶ï¼Œè¿™ä¸ªObserverçš„å›žè°ƒå‡½æ•°æ˜¯ _UIGestureRecognizerUpdateObserver() ç•Œé¢æ›´æ–°ï¼Œè‹¹æžœæ³¨å†Œäº†ä¸€ä¸ª Observer ç›‘å¬ BeforeWaiting(å³å°†è¿›å…¥ä¼‘çœ ) å’Œ Exit (å³å°†é€€å‡ºLoop) äº‹ä»¶ï¼Œå›žè°ƒåŽ»æ‰§è¡Œä¸€ä¸ªå¾ˆé•¿çš„å‡½æ•°ï¼š_ZN2CA11Transaction17observer_callbackEP19__CFRunLoopObservermPv()ã€‚è¿™ä¸ªå‡½æ•°é‡Œä¼šéåŽ†æ‰€æœ‰å¾…å¤„ç†çš„ UIView/CAlayer ä»¥æ‰§è¡Œå®žé™…çš„ç»˜åˆ¶å’Œè°ƒæ•´ï¼Œå¹¶æ›´æ–° UI ç•Œé¢ã€‚ å®šæ—¶å™¨ï¼Œä¸€ä¸ª NSTimer æ³¨å†Œåˆ° RunLoop åŽï¼ŒRunLoop ä¼šä¸ºå…¶é‡å¤çš„æ—¶é—´ç‚¹æ³¨å†Œå¥½äº‹ä»¶ PerformSelecterï¼Œå½“è°ƒç”¨ NSObject çš„ performSelecter:afterDelay: åŽï¼Œå®žé™…ä¸Šå…¶å†…éƒ¨ä¼šåˆ›å»ºä¸€ä¸ª Timer å¹¶æ·»åŠ åˆ°å½“å‰çº¿ç¨‹çš„ RunLoop ä¸­ã€‚æ‰€ä»¥å¦‚æžœå½“å‰çº¿ç¨‹æ²¡æœ‰ RunLoopï¼Œåˆ™è¿™ä¸ªæ–¹æ³•ä¼šå¤±æ•ˆã€‚å½“è°ƒç”¨ performSelector:onThread: æ—¶ï¼Œå®žé™…ä¸Šå…¶ä¼šåˆ›å»ºä¸€ä¸ª Timer åŠ åˆ°å¯¹åº”çš„çº¿ç¨‹åŽ»ï¼ŒåŒæ ·çš„ï¼Œå¦‚æžœå¯¹åº”çº¿ç¨‹æ²¡æœ‰ RunLoop è¯¥æ–¹æ³•ä¹Ÿä¼šå¤±æ•ˆã€‚ 3 RunLoopå†…éƒ¨é€»è¾‘&emsp;&emsp;å…ˆæŠŠå¤§ç¥žçš„ç»“è®ºæ”¾å‡ºæ¥:ç›—çš„å¤§ç¥žçš„å›¾ æºç é‡Œæ ¸å¿ƒæ–¹æ³•æ˜¯ __CFRunLoopRunï¼Œè¯´å®žè¯ä¸å‚ç…§å¤§ç¥žç»™çš„ä»£ç æ³¨è§£ï¼ŒçœŸå¿ƒä¸å¥½çœ‹æ‡‚æ­¤å‡½æ•°æœ‰300å¤šè¡Œï¼Œæˆ‘å°±ä¸æ˜¾ä¸‘äº†ï¼Œæ„Ÿå…´è¶£çš„è‡ªå·±åŽ»ç ”ç©¶æºç å§!æŠ„å½•å¤§ç¥žçš„æ³¨è§£123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110/// ç”¨DefaultModeå¯åŠ¨void CFRunLoopRun(void) &#123;CFRunLoopRunSpecific(CFRunLoopGetCurrent(), kCFRunLoopDefaultMode, 1.0e10, false);&#125;/// ç”¨æŒ‡å®šçš„Modeå¯åŠ¨ï¼Œå…è®¸è®¾ç½®RunLoopè¶…æ—¶æ—¶é—´int CFRunLoopRunInMode(CFStringRef modeName, CFTimeInterval seconds, Boolean stopAfterHandle) &#123;return CFRunLoopRunSpecific(CFRunLoopGetCurrent(), modeName, seconds, returnAfterSourceHandled);&#125;/// RunLoopçš„å®žçŽ°int CFRunLoopRunSpecific(runloop, modeName, seconds, stopAfterHandle) &#123;/// é¦–å…ˆæ ¹æ®modeNameæ‰¾åˆ°å¯¹åº”modeCFRunLoopModeRef currentMode = __CFRunLoopFindMode(runloop, modeName, false);/// å¦‚æžœmodeé‡Œæ²¡æœ‰source/timer/observer, ç›´æŽ¥è¿”å›žã€‚if (__CFRunLoopModeIsEmpty(currentMode)) return;/// 1. é€šçŸ¥ Observers: RunLoop å³å°†è¿›å…¥ loopã€‚__CFRunLoopDoObservers(runloop, currentMode, kCFRunLoopEntry);/// å†…éƒ¨å‡½æ•°ï¼Œè¿›å…¥loop__CFRunLoopRun(runloop, currentMode, seconds, returnAfterSourceHandled) &#123;Boolean sourceHandledThisLoop = NO;int retVal = 0;do &#123;/// 2. é€šçŸ¥ Observers: RunLoop å³å°†è§¦å‘ Timer å›žè°ƒã€‚__CFRunLoopDoObservers(runloop, currentMode, kCFRunLoopBeforeTimers);/// 3. é€šçŸ¥ Observers: RunLoop å³å°†è§¦å‘ Source0 (éžport) å›žè°ƒã€‚__CFRunLoopDoObservers(runloop, currentMode, kCFRunLoopBeforeSources);/// æ‰§è¡Œè¢«åŠ å…¥çš„block__CFRunLoopDoBlocks(runloop, currentMode);/// 4. RunLoop è§¦å‘ Source0 (éžport) å›žè°ƒã€‚sourceHandledThisLoop = __CFRunLoopDoSources0(runloop, currentMode, stopAfterHandle);/// æ‰§è¡Œè¢«åŠ å…¥çš„block__CFRunLoopDoBlocks(runloop, currentMode);/// 5. å¦‚æžœæœ‰ Source1 (åŸºäºŽport) å¤„äºŽ ready çŠ¶æ€ï¼Œç›´æŽ¥å¤„ç†è¿™ä¸ª Source1 ç„¶åŽè·³è½¬åŽ»å¤„ç†æ¶ˆæ¯ã€‚if (__Source0DidDispatchPortLastTime) &#123;Boolean hasMsg = __CFRunLoopServiceMachPort(dispatchPort, &amp;msg)if (hasMsg) goto handle_msg;&#125;/// é€šçŸ¥ Observers: RunLoop çš„çº¿ç¨‹å³å°†è¿›å…¥ä¼‘çœ (sleep)ã€‚if (!sourceHandledThisLoop) &#123;__CFRunLoopDoObservers(runloop, currentMode, kCFRunLoopBeforeWaiting);&#125;/// 7. è°ƒç”¨ mach_msg ç­‰å¾…æŽ¥å— mach_port çš„æ¶ˆæ¯ã€‚çº¿ç¨‹å°†è¿›å…¥ä¼‘çœ , ç›´åˆ°è¢«ä¸‹é¢æŸä¸€ä¸ªäº‹ä»¶å”¤é†’ã€‚/// â€¢ ä¸€ä¸ªåŸºäºŽ port çš„Source çš„äº‹ä»¶ã€‚/// â€¢ ä¸€ä¸ª Timer åˆ°æ—¶é—´äº†/// â€¢ RunLoop è‡ªèº«çš„è¶…æ—¶æ—¶é—´åˆ°äº†/// â€¢ è¢«å…¶ä»–ä»€ä¹ˆè°ƒç”¨è€…æ‰‹åŠ¨å”¤é†’__CFRunLoopServiceMachPort(waitSet, &amp;msg, sizeof(msg_buffer), &amp;livePort) &#123;mach_msg(msg, MACH_RCV_MSG, port); // thread wait for receive msg&#125;/// 8. é€šçŸ¥ Observers: RunLoop çš„çº¿ç¨‹åˆšåˆšè¢«å”¤é†’äº†ã€‚__CFRunLoopDoObservers(runloop, currentMode, kCFRunLoopAfterWaiting);/// æ”¶åˆ°æ¶ˆæ¯ï¼Œå¤„ç†æ¶ˆæ¯ã€‚handle_msg:/// 9.1 å¦‚æžœä¸€ä¸ª Timer åˆ°æ—¶é—´äº†ï¼Œè§¦å‘è¿™ä¸ªTimerçš„å›žè°ƒã€‚if (msg_is_timer) &#123;__CFRunLoopDoTimers(runloop, currentMode, mach_absolute_time())&#125; /// 9.2 å¦‚æžœæœ‰dispatchåˆ°main_queueçš„blockï¼Œæ‰§è¡Œblockã€‚else if (msg_is_dispatch) &#123;__CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE__(msg);&#125; /// 9.3 å¦‚æžœä¸€ä¸ª Source1 (åŸºäºŽport) å‘å‡ºäº‹ä»¶äº†ï¼Œå¤„ç†è¿™ä¸ªäº‹ä»¶else &#123;CFRunLoopSourceRef source1 = __CFRunLoopModeFindSourceForMachPort(runloop, currentMode, livePort);sourceHandledThisLoop = __CFRunLoopDoSource1(runloop, currentMode, source1, msg);if (sourceHandledThisLoop) &#123;mach_msg(reply, MACH_SEND_MSG, reply);&#125;&#125;/// æ‰§è¡ŒåŠ å…¥åˆ°Loopçš„block__CFRunLoopDoBlocks(runloop, currentMode);if (sourceHandledThisLoop &amp;&amp; stopAfterHandle) &#123;/// è¿›å…¥loopæ—¶å‚æ•°è¯´å¤„ç†å®Œäº‹ä»¶å°±è¿”å›žã€‚retVal = kCFRunLoopRunHandledSource;&#125; else if (timeout) &#123;/// è¶…å‡ºä¼ å…¥å‚æ•°æ ‡è®°çš„è¶…æ—¶æ—¶é—´äº†retVal = kCFRunLoopRunTimedOut;&#125; else if (__CFRunLoopIsStopped(runloop)) &#123;/// è¢«å¤–éƒ¨è°ƒç”¨è€…å¼ºåˆ¶åœæ­¢äº†retVal = kCFRunLoopRunStopped;&#125; else if (__CFRunLoopModeIsEmpty(runloop, currentMode)) &#123;/// source/timer/observerä¸€ä¸ªéƒ½æ²¡æœ‰äº†retVal = kCFRunLoopRunFinished;&#125;/// å¦‚æžœæ²¡è¶…æ—¶ï¼Œmodeé‡Œæ²¡ç©ºï¼Œloopä¹Ÿæ²¡è¢«åœæ­¢ï¼Œé‚£ç»§ç»­loopã€‚&#125; while (retVal == 0);&#125;/// 10. é€šçŸ¥ Observers: RunLoop å³å°†é€€å‡ºã€‚__CFRunLoopDoObservers(rl, currentMode, kCFRunLoopExit);&#125; &emsp;&emsp;: å¥½çŽ©çš„CFRuntimeBaseæ˜¯å•¥ï¼Ÿæ˜¯æ‰€æœ‰CF â€œinstancesâ€çš„â€œæ ¹ç±»â€12345678910111213/* All CF &quot;instances&quot; start with this structure. Never refer to* these fields directly -- they are for CF&apos;s use and may be added* to or removed or change format without warning. Binary* compatibility for uses of this struct is not guaranteed from* release to release.*/typedef struct __CFRuntimeBase &#123;uintptr_t _cfisa;uint8_t _cfinfo[4];#if __LP64__uint32_t _rc;#endif&#125; CFRuntimeBase; å‚è€ƒ https://blog.ibireme.com/2015/05/18/runloop/ https://github.com/ming1016/study/wiki/CFRunLoop å…¶å®ƒä¼˜è´¨åšå®¢ http://mrpeak.cn/blog/ios-runloop/ https://juejin.im/post/5afcf305f265da0b8e7f9b74#comment https://juejin.im/post/5a951cb26fb9a0633229d4ec#comment]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[runtimeçš„ä½¿ç”¨]]></title>
    <url>%2F2016%2F09%2F02%2Fruntime%E7%9A%84%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;Objc Runtimeä½¿å¾—Cå…·æœ‰äº†é¢å‘å¯¹è±¡èƒ½åŠ›ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶åˆ›å»ºï¼Œæ£€æŸ¥ï¼Œä¿®æ”¹ç±»ã€å¯¹è±¡å’Œå®ƒä»¬çš„æ–¹æ³•ã€‚Runtimeæ˜¯Cå’Œæ±‡ç¼–ç¼–å†™çš„ï¼Œè¿™é‡Œ https://opensource.apple.com/tarballs/objc4/ å¯ä¸‹è½½æºç  å¸¸ç”¨APIä»‹ç» ç±»ç›¸å…³ 1234567891011121314151617181920212223242526// èŽ·å–ç±»çš„ç±»åconst char * class_getName ( Class cls );// èŽ·å–ç±»çš„çˆ¶ç±»ï¼Œå½“clsä¸ºNilæˆ–è€…clsä¸ºæ ¹ç±»æ—¶ï¼Œè¿”å›žNilClass class_getSuperclass ( Class cls );// åˆ¤æ–­ç»™å®šçš„Classæ˜¯å¦æ˜¯ä¸€ä¸ªå…ƒç±»ï¼Œå¦‚æžœæ˜¯clsæ˜¯å…ƒç±»ï¼Œåˆ™è¿”å›žYESBOOL class_isMetaClass ( Class cls );// åˆ›å»ºä¸€ä¸ªæ–°ç±»å’Œå…ƒç±»ï¼Œå¦‚æžœæˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ªæ ¹ç±»ï¼Œåˆ™superclassæŒ‡å®šä¸ºNilã€‚extraBytesé€šå¸¸æŒ‡å®šä¸º0ï¼Œè¯¥å‚æ•°æ˜¯åˆ†é…ç»™ç±»å’Œå…ƒç±»å¯¹è±¡å°¾éƒ¨çš„ç´¢å¼•ivarsçš„å­—èŠ‚æ•°ã€‚Class objc_allocateClassPair ( Class superclass, const char *name, size_t extraBytes );// é”€æ¯ä¸€ä¸ªç±»åŠå…¶ç›¸å…³è”çš„ç±»ï¼Œå¦‚æžœç¨‹åºè¿class_conformsToProtocolè¡Œä¸­è¿˜å­˜åœ¨ç±»æˆ–å…¶å­ç±»çš„å®žä¾‹ï¼Œåˆ™ä¸èƒ½è°ƒç”¨é’ˆå¯¹ç±»è°ƒç”¨è¯¥æ–¹æ³•void objc_disposeClassPair ( Class cls );// åœ¨åº”ç”¨ä¸­æ³¨å†Œç”±objc_allocateClassPairåˆ›å»ºçš„ç±»void objc_registerClassPair ( Class cls );// èŽ·å–å·²æ³¨å†Œçš„ç±»å®šä¹‰çš„åˆ—è¡¨int objc_getClassList ( Class *buffer, int bufferCount );// åˆ›å»ºå¹¶è¿”å›žä¸€ä¸ªæŒ‡å‘æ‰€æœ‰å·²æ³¨å†Œç±»çš„æŒ‡é’ˆåˆ—è¡¨Class * objc_copyClassList ( unsigned int *outCount );// è¿”å›žæŒ‡å®šç±»çš„ç±»å®šä¹‰ï¼Œå¦‚æžœç±»åœ¨è¿è¡Œæ—¶æœªæ³¨å†Œï¼Œåˆ™objc_lookUpClassä¼šè¿”å›žnilï¼Œ// è€Œobjc_getClassä¼šè°ƒç”¨ç±»å¤„ç†å›žè°ƒï¼Œå¹¶å†æ¬¡ç¡®è®¤ç±»æ˜¯å¦æ³¨å†Œï¼Œå¦‚æžœç¡®è®¤æœªæ³¨å†Œï¼Œå†è¿”å›žnil// è€Œobjc_getRequiredClasså‡½æ•°çš„æ“ä½œä¸Žobjc_getClassç›¸åŒï¼Œåªä¸è¿‡å¦‚æžœæ²¡æœ‰æ‰¾åˆ°ç±»ï¼Œåˆ™ä¼šæ€æ­»è¿›ç¨‹ã€‚Class objc_lookUpClass ( const char *name );Class objc_getClass ( const char *name );Class objc_getRequiredClass ( const char *name );// è¿”å›žæŒ‡å®šç±»çš„å…ƒç±»Class objc_getMetaClass ( const char *name ); ivar 123456789101112131415// èŽ·å–ç±»ä¸­æŒ‡å®šåç§°å®žä¾‹æˆå‘˜å˜é‡çš„ä¿¡æ¯ï¼Œè¿”å›žä¸€ä¸ªæŒ‡å‘åŒ…å«nameæŒ‡å®šçš„æˆå‘˜å˜é‡ä¿¡æ¯çš„objc_ivarç»“æž„ä½“çš„æŒ‡é’ˆ(Ivar)ã€‚Ivar class_getInstanceVariable ( Class cls, const char *name );// èŽ·å–ç±»æˆå‘˜å˜é‡çš„ä¿¡æ¯ï¼Œä¸€èˆ¬è®¤ä¸ºObjective-Cä¸æ”¯æŒç±»å˜é‡ã€‚æ³¨æ„ï¼Œè¿”å›žçš„åˆ—è¡¨ä¸åŒ…å«çˆ¶ç±»çš„æˆå‘˜å˜é‡å’Œå±žæ€§ã€‚Ivar class_getClassVariable ( Class cls, const char *name );// æ·»åŠ æˆå‘˜å˜é‡ï¼Œåªèƒ½åœ¨objc_allocateClassPairå‡½æ•°ä¸Žobjc_registerClassPairä¹‹é—´è°ƒç”¨BOOL class_addIvar ( Class cls, const char *name, size_t size, uint8_t alignment, const char *types );// èŽ·å–æ•´ä¸ªæˆå‘˜å˜é‡åˆ—è¡¨ï¼Œä½†ä¸åŒ…å«åœ¨çˆ¶ç±»ä¸­å£°æ˜Žçš„å˜é‡ï¼Œå¿…é¡»ä½¿ç”¨free()æ¥é‡Šæ”¾ã€‚outCountæŒ‡é’ˆè¿”å›žæ•°ç»„çš„å¤§å°Ivar * class_copyIvarList ( Class cls, unsigned int *outCount );// èŽ·å–æˆå‘˜å˜é‡åconst char * ivar_getName ( Ivar v );// èŽ·å–æˆå‘˜å˜é‡ç±»åž‹ç¼–ç const char * ivar_getTypeEncoding ( Ivar v );// èŽ·å–æˆå‘˜å˜é‡çš„åç§»é‡ptrdiff_t ivar_getOffset ( Ivar v ); property 123456789101112131415161718// èŽ·å–æŒ‡å®šçš„å±žæ€§objc_property_t class_getProperty ( Class cls, const char *name );// èŽ·å–å±žæ€§åˆ—è¡¨objc_property_t * class_copyPropertyList ( Class cls, unsigned int *outCount );// ä¸ºç±»æ·»åŠ å±žæ€§BOOL class_addProperty ( Class cls, const char *name, const objc_property_attribute_t *attributes, unsigned int attributeCount );// æ›¿æ¢ç±»çš„å±žæ€§void class_replaceProperty ( Class cls, const char *name, const objc_property_attribute_t *attributes, unsigned int attributeCount );// èŽ·å–å±žæ€§åconst char * property_getName ( objc_property_t property );// èŽ·å–å±žæ€§ç‰¹æ€§æè¿°å­—ç¬¦ä¸²const char * property_getAttributes ( objc_property_t property );// èŽ·å–å±žæ€§ä¸­æŒ‡å®šçš„ç‰¹æ€§ï¼Œå¿…é¡»ä½¿ç”¨free()æ¥é‡Šæ”¾ã€‚char * property_copyAttributeValue ( objc_property_t property, const char *attributeName );// èŽ·å–å±žæ€§çš„ç‰¹æ€§åˆ—è¡¨ï¼Œå¿…é¡»ä½¿ç”¨free()æ¥é‡Šæ”¾ã€‚objc_property_attribute_t * property_copyAttributeList ( objc_property_t property, unsigned int *outCount ); æ–¹æ³• 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859// æ·»åŠ æ–¹æ³•ï¼Œå¦‚æžœæœ¬ç±»ä¸­åŒ…å«ä¸€ä¸ªåŒåçš„å®žçŽ°ï¼Œåˆ™å‡½æ•°ä¼šè¿”å›žNOï¼// https://stackoverflow.com/questions/49003493/objc-class-addmethod-does-not-check-argument-type?r=SearchResultsBOOL class_addMethod ( Class cls, SEL name, IMP imp, const char *types );// ç§»é™¤æ–¹æ³•ï¼Ÿä¸èƒ½ï¼Œå‚è€ƒï¼šhttps://stackoverflow.com/questions/1315169/how-do-i-remove-instance-methods-at-runtime-in-objective-c-2-0// èŽ·å–å®žä¾‹æ–¹æ³•ï¼Œä¼šåŽ»æœç´¢çˆ¶ç±»çš„å®žçŽ°Method class_getInstanceMethod ( Class cls, SEL name );// èŽ·å–ç±»æ–¹æ³•ï¼Œä¼šåŽ»æœç´¢çˆ¶ç±»çš„å®žçŽ°Method class_getClassMethod ( Class cls, SEL name );// èŽ·å–æ‰€æœ‰å®žä¾‹æ–¹æ³•çš„æ•°ç»„ï¼Œä½†ä¸ä¼šåŽ»æœç´¢çˆ¶ç±»çš„å®žçŽ°ï¼Œå¿…é¡»ä½¿ç”¨free()æ¥é‡Šæ”¾ã€‚outCountæŒ‡é’ˆè¿”å›žæ•°ç»„çš„å¤§å°// èŽ·å–ç±»æ–¹æ³•ï¼Œåˆ™å¯ä»¥ä½¿ç”¨class_copyMethodList(object_getClass(cls), &amp;count)å› ä¸ºä¸€ä¸ªç±»çš„å®žä¾‹æ–¹æ³•æ˜¯å®šä¹‰åœ¨å…ƒç±»é‡Œé¢Method * class_copyMethodList ( Class cls, unsigned int *outCount );// æ›¿ä»£æ–¹æ³•çš„å®žçŽ°ï¼Œå¦‚æžœä¸å­˜åœ¨åŒåæ–¹æ³•åˆ™ç±»ä¼¼class_addMethodæ·»åŠ æ–¹æ³•ï¼Œå­˜åœ¨åˆ™ç±»ä¼¼method_setImplementationæ›¿ä»£åŽŸæ–¹æ³•çš„å®žçŽ°IMP class_replaceMethod ( Class cls, SEL name, IMP imp, const char *types );// è¿”å›žæ–¹æ³•çš„å…·ä½“å®žçŽ°ï¼Œä¸€ä¸ªæŒ‡å‘æ–¹æ³•å®žçŽ°å‡½æ•°çš„æŒ‡é’ˆã€‚æ¯”method_getImplementation(class_getInstanceMethod(cls, name))æ›´å¿«IMP class_getMethodImplementation ( Class cls, SEL name );IMP class_getMethodImplementation_stret ( Class cls, SEL name );// ç±»å®žä¾‹æ˜¯å¦å“åº”æŒ‡å®šçš„selectorBOOL class_respondsToSelector ( Class cls, SEL sel );// Objective-Cåœ¨ç¼–è¯‘æ—¶ï¼Œä¼šä¾æ®æ¯ä¸€ä¸ªæ–¹æ³•çš„åå­—ã€å‚æ•°åºåˆ—ï¼Œç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„æ•´åž‹æ ‡è¯†(Intç±»åž‹çš„åœ°å€)ï¼Œè¿™ä¸ªæ ‡è¯†å°±æ˜¯SELã€‚// å·¥ç¨‹ä¸­çš„æ‰€æœ‰çš„SELç»„æˆä¸€ä¸ªSeté›†åˆï¼Œè¿™ä¹Ÿæ˜¯ä¸ºå•¥OCï¼Œä¸åŒç±»ï¼ˆæ— è®ºæ˜¯å¦ç»§æ‰¿ï¼‰ä¸èƒ½æœ‰åŒåæ–¹æ³•ï¼SELæ–¹æ³•ç­¾å// IMPå®žé™…ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼ŒæŒ‡å‘æ–¹æ³•å®žçŽ°çš„é¦–åœ°å€// è°ƒç”¨æŒ‡å®šæ–¹æ³•çš„å®žçŽ°id method_invoke ( id receiver, Method m, ... );// è°ƒç”¨è¿”å›žä¸€ä¸ªæ•°æ®ç»“æž„çš„æ–¹æ³•çš„å®žçŽ°void method_invoke_stret ( id receiver, Method m, ... );// èŽ·å–æ–¹æ³•åSEL method_getName ( Method m );// è¿”å›žæ–¹æ³•çš„å®žçŽ°IMP method_getImplementation ( Method m );// èŽ·å–æè¿°æ–¹æ³•å‚æ•°å’Œè¿”å›žå€¼ç±»åž‹çš„å­—ç¬¦ä¸²const char * method_getTypeEncoding ( Method m );// èŽ·å–æ–¹æ³•çš„è¿”å›žå€¼ç±»åž‹çš„å­—ç¬¦ä¸²char * method_copyReturnType ( Method m );// èŽ·å–æ–¹æ³•çš„æŒ‡å®šä½ç½®å‚æ•°çš„ç±»åž‹å­—ç¬¦ä¸²char * method_copyArgumentType ( Method m, unsigned int index );// é€šè¿‡å¼•ç”¨è¿”å›žæ–¹æ³•çš„è¿”å›žå€¼ç±»åž‹å­—ç¬¦ä¸²void method_getReturnType ( Method m, char *dst, size_t dst_len );// è¿”å›žæ–¹æ³•çš„å‚æ•°çš„ä¸ªæ•°unsigned int method_getNumberOfArguments ( Method m );// é€šè¿‡å¼•ç”¨è¿”å›žæ–¹æ³•æŒ‡å®šä½ç½®å‚æ•°çš„ç±»åž‹å­—ç¬¦ä¸²void method_getArgumentType ( Method m, unsigned int index, char *dst, size_t dst_len );// è¿”å›žæŒ‡å®šæ–¹æ³•çš„æ–¹æ³•æè¿°ç»“æž„ä½“struct objc_method_description * method_getDescription ( Method m );// è®¾ç½®æ–¹æ³•çš„å®žçŽ°IMP method_setImplementation ( Method m, IMP imp );// äº¤æ¢ä¸¤ä¸ªæ–¹æ³•çš„å®žçŽ°void method_exchangeImplementations ( Method m1, Method m2 );// è¿”å›žç»™å®šé€‰æ‹©å™¨æŒ‡å®šçš„æ–¹æ³•çš„åç§°const char * sel_getName ( SEL sel );// åœ¨Objective-C Runtimeç³»ç»Ÿä¸­æ³¨å†Œä¸€ä¸ªæ–¹æ³•ï¼Œå°†æ–¹æ³•åæ˜ å°„åˆ°ä¸€ä¸ªé€‰æ‹©å™¨ï¼Œå¹¶è¿”å›žè¿™ä¸ªé€‰æ‹©å™¨SEL sel_registerName ( const char *str );// åœ¨Objective-C Runtimeç³»ç»Ÿä¸­æ³¨å†Œä¸€ä¸ªæ–¹æ³•SEL sel_getUid ( const char *str );// æ¯”è¾ƒä¸¤ä¸ªé€‰æ‹©å™¨BOOL sel_isEqual ( SEL lhs, SEL rhs ); åè®® 12345678910111213141516171819202122232425262728293031323334353637// æ·»åŠ åè®®BOOL class_addProtocol ( Class cls, Protocol *protocol );// è¿”å›žç±»æ˜¯å¦å®žçŽ°æŒ‡å®šçš„åè®®, ä¸æ£€æµ‹çˆ¶ç±»ä¸­å®žçŽ°çš„Protocol,è€Œ [NSObject conformsToProtocol:] æ£€æµ‹æ‰€æœ‰ç»§æ‰¿ç±»ä¸­å®žçŽ°çš„ProtocolBOOL class_conformsToProtocol ( Class cls, Protocol *protocol );// è¿”å›žç±»å®žçŽ°çš„åè®®åˆ—è¡¨ï¼Œä½†ä¸åŒ…å«åœ¨çˆ¶ç±»çš„åè®®ï¼Œå¿…é¡»ä½¿ç”¨free()æ¥é‡Šæ”¾ã€‚outCountæŒ‡é’ˆè¿”å›žæ•°ç»„çš„å¤§å°Protocol * class_copyProtocolList ( Class cls, unsigned int *outCount );// è¿”å›žæŒ‡å®šçš„åè®®,å¦‚æžœä»…ä»…æ˜¯å£°æ˜Žäº†ä¸€ä¸ªåè®®ï¼Œè€Œæœªåœ¨ä»»ä½•ç±»ä¸­å®žçŽ°è¿™ä¸ªåè®®ï¼Œåˆ™è¯¥å‡½æ•°è¿”å›žçš„æ˜¯nilProtocol * objc_getProtocol ( const char *name );// èŽ·å–è¿è¡Œæ—¶æ‰€çŸ¥é“çš„æ‰€æœ‰åè®®çš„æ•°ç»„,ï¼Œå¿…é¡»ä½¿ç”¨free()æ¥é‡Šæ”¾Protocol ** objc_copyProtocolList ( unsigned int *outCount );// åˆ›å»ºæ–°çš„åè®®å®žä¾‹ï¼Œå¦‚æžœåŒåçš„åè®®å·²ç»å­˜åœ¨ï¼Œåˆ™è¿”å›žnilProtocol * objc_allocateProtocol ( const char *name );// åœ¨è¿è¡Œæ—¶ä¸­æ³¨å†Œæ–°åˆ›å»ºçš„åè®®ï¼Œåè®®æ³¨å†ŒåŽä¾¿å¯ä»¥ä½¿ç”¨ï¼Œä½†ä¸èƒ½å†åšä¿®æ”¹ï¼Œå³æ³¨å†Œå®ŒåŽä¸èƒ½å†å‘åè®®æ·»åŠ æ–¹æ³•æˆ–åè®®void objc_registerProtocol ( Protocol *proto );// ä¸ºåè®®æ·»åŠ æ–¹æ³•void protocol_addMethodDescription ( Protocol *proto, SEL name, const char *types, BOOL isRequiredMethod, BOOL isInstanceMethod );// æ·»åŠ ä¸€ä¸ªå·²æ³¨å†Œçš„åè®®åˆ°åè®®ä¸­void protocol_addProtocol ( Protocol *proto, Protocol *addition );// ä¸ºåè®®æ·»åŠ å±žæ€§void protocol_addProperty ( Protocol *proto, const char *name, const objc_property_attribute_t *attributes, unsigned int attributeCount, BOOL isRequiredProperty, BOOL isInstanceProperty );// è¿”å›žåè®®åconst char * protocol_getName ( Protocol *p );// æµ‹è¯•ä¸¤ä¸ªåè®®æ˜¯å¦ç›¸ç­‰BOOL protocol_isEqual ( Protocol *proto, Protocol *other );// èŽ·å–åè®®ä¸­æŒ‡å®šæ¡ä»¶çš„æ–¹æ³•çš„æ–¹æ³•æè¿°æ•°ç»„struct objc_method_description * protocol_copyMethodDescriptionList ( Protocol *p, BOOL isRequiredMethod, BOOL isInstanceMethod, unsigned int *outCount );// èŽ·å–åè®®ä¸­æŒ‡å®šæ–¹æ³•çš„æ–¹æ³•æè¿°struct objc_method_description protocol_getMethodDescription ( Protocol *p, SEL aSel, BOOL isRequiredMethod, BOOL isInstanceMethod );// èŽ·å–åè®®ä¸­çš„å±žæ€§åˆ—è¡¨objc_property_t * protocol_copyPropertyList ( Protocol *proto, unsigned int *outCount );// èŽ·å–åè®®çš„æŒ‡å®šå±žæ€§objc_property_t protocol_getProperty ( Protocol *proto, const char *name, BOOL isRequiredProperty, BOOL isInstanceProperty );// èŽ·å–åè®®é‡‡ç”¨çš„åè®®Protocol ** protocol_copyProtocolList ( Protocol *proto, unsigned int *outCount );// æŸ¥çœ‹åè®®æ˜¯å¦é‡‡ç”¨äº†å¦ä¸€ä¸ªåè®®BOOL protocol_conformsToProtocol ( Protocol *proto, Protocol *other ); å®žä¾‹å¯¹è±¡ 1234567891011121314151617181920212223242526// èŽ·å–å®žä¾‹å¤§å°size_t class_getInstanceSize ( Class cls );// è¿”å›žç»™å®šå¯¹è±¡çš„ç±»åconst char * object_getClassName ( id obj );// è¿”å›žå¯¹è±¡çš„ç±»Class object_getClass ( id obj );// è®¾ç½®å¯¹è±¡çš„ç±»Class object_setClass ( id obj, Class cls );// è¿”å›žæŒ‡å®šå¯¹è±¡çš„ä¸€ä»½æ‹·è´id object_copy ( id obj, size_t size );// é‡Šæ”¾æŒ‡å®šå¯¹è±¡å ç”¨çš„å†…å­˜id object_dispose ( id obj );// ä¿®æ”¹ç±»å®žä¾‹çš„å®žä¾‹å˜é‡çš„å€¼Ivar object_setInstanceVariable ( id obj, const char *name, void *value );// èŽ·å–å¯¹è±¡å®žä¾‹å˜é‡çš„å€¼Ivar object_getInstanceVariable ( id obj, const char *name, void **outValue );// è¿”å›žæŒ‡å‘ç»™å®šå¯¹è±¡åˆ†é…çš„ä»»ä½•é¢å¤–å­—èŠ‚çš„æŒ‡é’ˆvoid * object_getIndexedIvars ( id obj );// è¿”å›žå¯¹è±¡ä¸­å®žä¾‹å˜é‡çš„å€¼id object_getIvar ( id obj, Ivar ivar );// è®¾ç½®å¯¹è±¡ä¸­å®žä¾‹å˜é‡çš„å€¼void object_setIvar ( id obj, Ivar ivar, id value ); å…³è”å¯¹è±¡ 123456// è®¾ç½®å…³è”å¯¹è±¡void objc_setAssociatedObject ( id object, const void *key, id value, objc_AssociationPolicy policy );// èŽ·å–å…³è”å¯¹è±¡id objc_getAssociatedObject ( id object, const void *key );// ç§»é™¤å…³è”å¯¹è±¡void objc_removeAssociatedObjects ( id object ); ç¼–ç ç±»åž‹,@encodeè¿”å›žè¿™ä¸ªç±»åž‹çš„å­—ç¬¦ä¸²ç¼–ç  12345// ç¼–è¯‘å™¨å°†æ¯ä¸ªæ–¹æ³•çš„è¿”å›žå€¼å’Œå‚æ•°ç±»åž‹ç¼–ç ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶ä¸Žæ–¹æ³•çš„selectorå…³è”åœ¨ä¸€èµ·,@encodeè¿”å›žè¿™ä¸ªç±»åž‹çš„å­—ç¬¦ä¸²ç¼–ç const char *argType = [self.methodSignature getArgumentTypeAtIndex:index];if (strcmp(argType, @encode(int)) == 0) &#123;// return value is int &#125; block 123456// åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆå‡½æ•°çš„æŒ‡é’ˆï¼Œè¯¥å‡½æ•°è°ƒç”¨æ—¶ä¼šè°ƒç”¨ç‰¹å®šçš„blockï¼Œå‚æ•°blockçš„ç­¾åå¿…é¡»æ˜¯method_return_type ^(id self, method_args â€¦)å½¢å¼çš„ã€‚IMP imp_implementationWithBlock ( id block );// è¿”å›žä¸ŽIMP(ä½¿ç”¨imp_implementationWithBlockåˆ›å»ºçš„)ç›¸å…³çš„blockid imp_getBlock ( IMP anImp );// è§£é™¤blockä¸ŽIMP(ä½¿ç”¨imp_implementationWithBlockåˆ›å»ºçš„)çš„å…³è”å…³ç³»ï¼Œå¹¶é‡Šæ”¾blockçš„æ‹·è´BOOL imp_removeBlock ( IMP anImp ); å¸¸ç”¨ Method Swizzle 123456789101112static void SwizzleMethod(Class cls, SEL ori, SEL rep) &#123;Method oriMethod = class_getInstanceMethod(cls, ori);Method repMethod = class_getInstanceMethod(cls, rep);BOOL flag = class_addMethod(cls, ori, method_getImplementation(repMethod), method_getTypeEncoding(repMethod));if (flag) &#123;class_replaceMethod(cls, rep, method_getImplementation(oriMethod), method_getTypeEncoding(oriMethod));&#125; else &#123;method_exchangeImplementations(oriMethod, repMethod);&#125;&#125; æ‰“å°æ‰€æœ‰ä¿¡æ¯ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172- (void)print:(Class)cls &#123;unsigned int outCount = 0;NSLog(@&quot;===========================&quot;);NSLog(@&quot;----------------------&quot;);Class tempCls = cls;while (tempCls != NULL) &#123;NSLog(@&quot;class name: %s&quot;,class_getName(tempCls));// isaæŒ‡é’ˆæ˜¯å•¥ï¼Ÿå®žä¾‹å¯¹è±¡çš„isaæŒ‡é’ˆæŒ‡å‘ç±»å¯¹è±¡ï¼Œç±»å¯¹è±¡çš„isaæŒ‡é’ˆæŒ‡å‘å…ƒç±»å¯¹è±¡ã€‚Class meta_class = objc_getMetaClass(class_getName(tempCls));NSLog(@&quot;%s&apos;s meta-class is %s&quot;, class_getName(tempCls), class_getName(meta_class));tempCls = class_getSuperclass(tempCls);&#125;NSLog(@&quot;----------------------&quot;);Ivar *ivars = class_copyIvarList(cls, &amp;outCount);for (int i = 0; i &lt; outCount; i++) &#123;Ivar ivar = ivars[i];NSLog(@&quot;ivar : %s type:%s at index: %d&quot;, ivar_getName(ivar) , ivar_getTypeEncoding(ivar), i);&#125;free(ivars);Ivar shoolNum = class_getInstanceVariable(cls, &quot;_schoolNum&quot;);if (shoolNum != NULL) &#123;NSLog(@&quot;ivar _schoolNum is exist&quot;);&#125;NSLog(@&quot;----------------------&quot;);objc_property_t *propertys = class_copyPropertyList(cls, &amp;outCount);for (int i = 0; i &lt; outCount; i++) &#123;objc_property_t p = propertys[i];NSLog(@&quot;property : %s attributes:%s at index: %d&quot;, property_getName(p) , property_getAttributes(p), i);&#125;free(propertys);objc_property_t name = class_getProperty(cls, &quot;name&quot;);if (name != NULL) &#123;NSLog(@&quot;property name is exist&quot;);&#125;NSLog(@&quot;----------------------&quot;);Method *methods = class_copyMethodList(cls, &amp;outCount);for (int i = 0; i &lt; outCount; i++) &#123;Method m = methods[i];NSLog(@&quot;Method : %s typeEncoding:%s&quot;,method_getName(m), method_getTypeEncoding(m));unsigned int argCount = method_getNumberOfArguments(m);for (int j = 0; j &lt; argCount; j++) &#123;char *argType = method_copyArgumentType(m, j);NSLog(@&quot;Method %s arg: %s at index: %i&quot;,method_getName(m), argType , j);free(argType);&#125;char *returnType = method_copyReturnType(m);NSLog(@&quot;Method %s return: %s&quot;,method_getName(m),returnType);free(returnType);&#125;free(methods);Method walk = class_getInstanceMethod(cls, @selector(walk));if (walk != NULL) &#123;NSLog(@&quot;method %s&quot;, method_getName(walk));&#125;Method sleep = class_getClassMethod(cls, @selector(sleep));if (sleep != NULL) &#123;NSLog(@&quot;class method : %s&quot;, method_getName(sleep));&#125;if (class_respondsToSelector(cls, @selector(eat))) &#123;IMP eat = class_getMethodImplementation(cls, @selector(eat));eat();&#125;NSLog(@&quot;----------------------&quot;);Protocol * __unsafe_unretained * protocols = class_copyProtocolList(cls, &amp;outCount);for (int i = 0; i &lt; outCount; i++) &#123;Protocol *p = protocols[i];NSLog(@&quot;protocol name: %s&quot;, protocol_getName(p));&#125;if (class_conformsToProtocol(cls, @protocol(UITableViewDelegate))) &#123;class_addProtocol(cls, @protocol(UITableViewDelegate));&#125;&#125; æ·»åŠ æ–°ç±» 1234567891011121314151617181920212223242526272829303132333435363738394041424344- (void)addNewClass &#123;Class newClass = objc_allocateClassPair([Person class], &quot;XiaoHong&quot;, 0);/*Type Encodingsï¼šhttps://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html#//apple_ref/doc/uid/TP40008048-CH100-SW1*/class_addIvar(newClass, &quot;_shoes&quot;, sizeof(int), rint(log2(sizeof(int))), @encode(int));/*å±žæ€§çš„ç‰¹æ€§å­—ç¬¦ä¸² ä»¥ T@encode(type) å¼€å¤´typeç±»åž‹åˆ†ä¸ºä»¥ä¸‹å‡ ç§1ã€æ‰€æœ‰ç±»ï¼ŒåŒ…æ‹¬NSOjbectï¼Œæ˜¯ä»€ä¹ˆç±»åž‹å°± @â€œç±»åž‹â€å³å¯2ã€åŸºç¡€ç±»åž‹ï¼šNSInteger-&gt;qã€NSUInteger-&gt;Qã€int-&gt;iã€float-&gt;fã€double-&gt;dã€BOOL-&gt;B3ã€Block -&gt; @?*/objc_property_attribute_t type = &#123;&quot;T&quot;, &quot;q&quot;&#125;;/*ä¸­é—´ä»¥ç‰¹æ€§ç¼–ç å¡«å……R-&gt;readonlyã€C-&gt;copyã€&amp;-&gt;retainã€N-&gt;nonatomicã€G(name)-&gt;getter=(name)ã€S(name)-ã€‹setter=(name)ã€D-&gt;@dynamicã€W-&gt;weak*/objc_property_attribute_t ownership = &#123; &quot;N&quot;, &quot;&quot; &#125;;//ä»¥ Vå®žä¾‹å˜é‡åç§° ç»“å°¾ï¼Œæ³¨æ— æ³•åŠ¨æ€æ³¨å†Œå…³è”å¯¹è±¡ä¹Ÿæ²¡å¿…è¦objc_property_attribute_t backingivar = &#123; &quot;V&quot;, &quot;_shoes&quot;&#125;;objc_property_attribute_t attrs[] = &#123;type, ownership, backingivar&#125;;class_addProperty(newClass, &quot;shoes&quot;, attrs, 3);// method_getTypeEncoding/*https://stackoverflow.com/questions/11491947/what-are-the-digits-in-an-objc-method-type-encoding-stringhttps://stackoverflow.com/questions/43492021/runtime-what-does-this-mean-in-class-addmethod?r=SearchResultsç»“è®º: &quot;v@:@&quot;ï¼švï¼šæ˜¯voidï¼› @è¡¨ç¤ºæ˜¯id(å³self) ï¼šè¡¨ç¤º_cmd @è¡¨ç¤ºï¼šç¬¬ä¸€ä¸ªå‚æ•°ç±»åž‹ï¼ˆæ­¤ä¸ºidï¼‰ï¼Œå…¶ä»–å¯å‚ç…§Type Encodingsï¼Œæ‰€ä»¥ &quot;v@:&quot; å³æ— å‚æ•°https://stackoverflow.com/questions/20735814/adding-objective-c-method-to-class-at-runtime?r=SearchResultsç»“è®º: colorWithWhite:alpha: -&gt; @@:ff*/ class_addMethod(newClass, @selector(submethod1), (IMP)imp_submethod1, &quot;v@:&quot;);class_replaceMethod(newClass, @selector(method1), (IMP)imp_submethod1, &quot;v@:&quot;);objc_registerClassPair(newClass);id instance = [[newClass alloc] init];[instance performSelector:@selector(submethod1)];[instance performSelector:@selector(method1)];&#125; æ·»åŠ æ–°åè®® 12345678910- (void)addNewProtocol &#123;Protocol *newP = objc_allocateProtocol(&quot;MyDelete&quot;);protocol_addMethodDescription(newP, @selector(submethod1), &quot;v@:&quot;, NO, NO);objc_property_attribute_t type = &#123;&quot;T&quot;, &quot;q&quot;&#125;;objc_property_attribute_t ownership = &#123; &quot;N&quot;, &quot;&quot; &#125;;objc_property_attribute_t backingivar = &#123; &quot;V&quot;, &quot;_shoes&quot;&#125;;objc_property_attribute_t attrs[] = &#123;type, ownership, backingivar&#125;;protocol_addProperty(newP, &quot;shoes&quot;, attrs, 3, NO, NO);objc_registerProtocol(newP);&#125; çˆ¶ç±»åˆ°å­ç±»çš„å¼ºè½¬æ˜¯æ€Žä¹ˆè¿›è¡Œçš„ï¼Ÿ 12345// æŠŠNSObjectçš„å®žä¾‹ï¼ˆå†…å­˜ç©ºé—´å°ï¼‰è½¬ä¸ºMyClassï¼ˆå†…å­˜ç©ºé—´å¤§ï¼‰ï¼Œå³å¼ºåˆ¶è½¬æ¢NSObject *a = [[NSObject alloc] init];id newB = object_copy(a, class_getInstanceSize(MyClass.class));object_setClass(newB, MyClass.class);object_dispose(a); å‚è€ƒ http://southpeak.github.io/2014/10/25/objective-c-runtime-1/ http://southpeak.github.io/2014/10/30/objective-c-runtime-2/ http://southpeak.github.io/2014/11/03/objective-c-runtime-3/ http://southpeak.github.io/2014/11/06/objective-c-runtime-4/ http://southpeak.github.io/2014/11/08/objective-c-runtime-5/ http://southpeak.github.io/2014/11/09/objective-c-runtime-6/ https://github.com/ming1016/study/wiki/Objc-Runtime]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŠ¨ç”»3ï¼šæ ¸å¿ƒåŠ¨ç”»é«˜çº§æŠ€å·§ç¬”è®°]]></title>
    <url>%2F2016%2F08%2F25%2F%E5%8A%A8%E7%94%BB3%EF%BC%9A%E6%A0%B8%E5%BF%83%E5%8A%A8%E7%94%BB%E9%AB%98%E7%BA%A7%E6%8A%80%E5%B7%A7%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[å‚è€ƒï¼šhttps://github.com/qunten/iOS-Core-Animation-Advanced-Techniques UIViewå’ŒCAlayerå…³ç³»ï¼šUIViewå¤„ç†äº¤äº’ï¼ŒCAlayerå¤„ç†æ¸²æŸ“ CALayerçš„contentså±žæ€§ï¼Œå¦‚æžœèµ‹å€¼ä¸æ˜¯CGImageï¼Œé‚£ä¹ˆå›¾å±‚å°†æ˜¯ç©ºç™½çš„ CALayerçš„contentsGravityå±žæ€§å†³å®šå¡«å……æ ·å¼ layer.contentsScale = [UIScreen mainScreen].scale; contentsRect è£åˆ‡æ˜¾ç¤ºä¸€éƒ¨åˆ† contentsCenter å®šä¹‰äº†å›ºå®šè¾¹ç•Œå’Œå¯æ‹‰ä¼¸åŒºåŸŸ CALayerDelegate anchorPoint é”šç‚¹ åæ ‡è½¬åŒ–ï¼šconvertPoint: fromLayer åŒ convertPoint: fromView: zPosition å¯ä»¥è®¾ç½®layeræ˜¾ç¤ºå±‚çº§ï¼Œä½†æœ€å¥½ä¸ç”¨ CALayerä¸æ”¯æŒè‡ªåŠ¨å¸ƒå±€ï¼Œæƒ³è¦è°ƒæ•´æœ€å¥½ç”¨delegateæ–¹æ³•layoutSublayersOfLayer cornerRadius åœ†è§’ masksToBound å‰ªåˆ‡ borderWidth å’Œ borderColor shadowColorï¼ŒshadowOffsetå’ŒshadowRadius maskè’™å±‚çš„colorå…¶å®žæ— å…³ç´§è¦ï¼Œé‡è¦çš„æ˜¯å®žå¿ƒéƒ¨åˆ†ä¼šä¿ç•™ï¼Œå…¶å®ƒæŠ›å¼ƒ CALayerä¸ºæ­¤æä¾›äº†ä¸‰ç§æ‹‰ä¼¸è¿‡æ»¤æ–¹æ³•ï¼Œä»–ä»¬æ˜¯ï¼škCAFilterLinearï¼ŒkCAFilterNearestï¼ŒkCAFilterTrilinearã€‚minificationï¼ˆç¼©å°å›¾ç‰‡ï¼‰å’Œmagnificationï¼ˆæ”¾å¤§å›¾ç‰‡ï¼‰é»˜è®¤çš„è¿‡æ»¤å™¨éƒ½æ˜¯kCAFilterLinear ä½¿ç”¨shouldRasterizeå±žæ€§è§£å†³ç»„é€æ˜Žé—®é¢˜ CAShapeLayerèƒ½é€šè¿‡CGPathæ¥è¡¨ç¤ºå½¢çŠ¶ CATextLayerä½¿ç”¨äº†Core textï¼Œç”¨äºŽæ–‡å­—ç»˜åˆ¶ CATransformLayer è§£å†³3Då˜åŒ– CAGradientLayeræ˜¯ç”¨æ¥ç”Ÿæˆä¸¤ç§æˆ–æ›´å¤šé¢œè‰²å¹³æ»‘æ¸å˜çš„ CAReplicatorLayerçš„ç›®çš„æ˜¯ä¸ºäº†é«˜æ•ˆç”Ÿæˆè®¸å¤šç›¸ä¼¼çš„å›¾å±‚ï¼Œä½¿ç”¨CAReplicatorLayerå¹¶åº”ç”¨ä¸€ä¸ªè´Ÿæ¯”ä¾‹å˜æ¢äºŽä¸€ä¸ªå¤åˆ¶å›¾å±‚ï¼Œä½ å°±å¯ä»¥åˆ›å»ºæŒ‡å®šè§†å›¾ï¼ˆæˆ–æ•´ä¸ªè§†å›¾å±‚æ¬¡ï¼‰å†…å®¹çš„é•œåƒå›¾ç‰‡ï¼Œè¿™æ ·å°±åˆ›å»ºäº†ä¸€ä¸ªå®žæ—¶çš„ã€Žåå°„ã€æ•ˆæžœ UIScrollViewå¹¶æ²¡æœ‰ç”¨CAScrollLayer CATiledLayerä¸ºè½½å…¥å¤§å›¾é€ æˆçš„æ€§èƒ½é—®é¢˜æä¾›äº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼šå°†å¤§å›¾åˆ†è§£æˆå°ç‰‡ç„¶åŽå°†ä»–ä»¬å•ç‹¬æŒ‰éœ€è½½å…¥ CAEmitterLayeræ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ç²’å­å¼•æ“Žï¼Œè¢«ç”¨æ¥åˆ›å»ºå®žæ—¶ä¾‹å­åŠ¨ç”»å¦‚ï¼šçƒŸé›¾ï¼Œç«ï¼Œé›¨ç­‰ç­‰è¿™äº›æ•ˆæžœ CAEAGLLayeræ˜¯CALayerçš„ä¸€ä¸ªå­ç±»ï¼Œç”¨æ¥æ˜¾ç¤ºä»»æ„çš„OpenGLå›¾å½¢ AVPlayerLayeræ˜¯ç”¨æ¥åœ¨iOSä¸Šæ’­æ”¾è§†é¢‘çš„ [CATransaction begin]; ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ [CATransaction commit]; åŠ¨ç”»è¿‡ç¨‹ä¸­å¯ä»¥é€šè¿‡-presentationLayeræ–¹æ³•æ¥è®¿é—®å›¾å±‚ï¼Œä½†æ˜¯å®ƒçš„å±žæ€§å€¼ä»£è¡¨äº†åœ¨ä»»ä½•æŒ‡å®šæ—¶åˆ»å½“å‰å¤–è§‚æ•ˆæžœ æŠŠå›¾å±‚çš„speedè®¾ç½®æˆ0ï¼Œå®ƒä¼šæš‚åœä»»ä½•æ·»åŠ åˆ°å›¾å±‚ä¸Šçš„åŠ¨ç”»ã€‚ç±»ä¼¼çš„ï¼Œè®¾ç½®speedå¤§äºŽ1.0å°†ä¼šå¿«è¿›ï¼Œè®¾ç½®æˆä¸€ä¸ªè´Ÿå€¼å°†ä¼šå€’å›žåŠ¨ç”» è®¾ç½®speedä¸º0ï¼Œç„¶åŽæ¥ä½¿ç”¨timeOffsetè®©ä½ æ‰‹åŠ¨æŽ§åˆ¶åŠ¨ç”» å¼‚æ­¥ç»˜åˆ¶ï¼Œç„¶åŽå°†ç”±æ­¤ç»˜å‡ºçš„å›¾ç‰‡ç›´æŽ¥è®¾ç½®ä¸ºå›¾å±‚çš„å†…å®¹ã€‚Core Animationæä¾›äº†ä¸€äº›é€‰æ‹©ï¼šCATiledLayerå’ŒdrawsAsynchronouslyå±žæ€§]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è‡ªå®šä¹‰UIPickerView]]></title>
    <url>%2F2016%2F08%2F05%2F%E8%87%AA%E5%AE%9A%E4%B9%89UIPickerView%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;ä¸ºå•¥è¦å†™è¿™ç¯‡æ–‡ç« ï¼Ÿæ°´è‚¯å®šæ˜¯å¿…ç„¶çš„ï¼æ›´ä¸»è¦çš„åŽŸå› æ˜¯ç¢°åˆ°äº†äºŒé€¼UIï¼Œéžè¯´ç³»ç»Ÿè‡ªå¸¦çš„3Dæ•ˆæžœæ»šè½®ä¸å¥½çœ‹ï¼Œéžè¦åšæˆå®‰å“çš„æ ·å­ï¼ˆå®‰å“ç”¨çš„ä¸‰æ–¹åº“ï¼‰ï¼iOSæ²¡æœ‰çŽ°æˆçš„ä¸‰æ–¹åº“ï¼ˆçœ‹åˆ°æ²¡ï¼Œä¼°è®¡è¿™UIå¤§å§æ˜¯è®¾è®¡ç•Œé‡Œç¬¬ä¸€ä¸ªè§‰å¾—iOSç³»ç»Ÿpickerviewä¸‘çš„â€œå¤§ç¥žâ€ï¼Œè¦ä¸ç„¶æ€Žä¹ˆå¯èƒ½æ²¡æœ‰å¼€æºåº“ï¼ï¼‰ï¼ŒUIåˆåšæŒå°±è¦å®‰å“çš„æ ·å­ï¼Œç”šè‡³é—¹åˆ°äº†è€å¤§é‚£é‡Œâ€¦ï¼Œè€å¤§é—®æˆ‘èƒ½ä¸èƒ½å®žçŽ°ï¼Ÿå‘µå‘µï¼æˆ‘èƒ½å’‹åŠžâ€¦èƒ½å®žçŽ°ï¼ï¼ˆå…¶å®žæˆ‘æ˜¯æƒ³è¯´ä¸ï¼Œä½†è€å¤§æƒ³æ¯äº‹å®äººï¼Œè¿˜æ˜¯ä¸è¯´äº†è°è®©è‡ªå·±æ˜¯å†œæ°‘å·¥å‘¢â€¦ï¼‰ è‡ªå®šä¹‰PickerViewHæ–‡ä»¶1234567891011121314151617181920212223242526272829303132333435// è‡ªå®šä¹‰picker#import &lt;UIKit/UIKit.h&gt;NS_ASSUME_NONNULL_BEGIN@class BFPickerView;@protocol BFPickerViewDataSource&lt;NSObject&gt;@required- (NSInteger)numberOfComponentsInPickerView:(BFPickerView *)pickerView;- (NSInteger)pickerView:(BFPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component;@end@protocol BFPickerViewDelegate&lt;NSObject&gt;@required- (NSString *)pickerView:(BFPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component;@optional- (CGFloat)pickerView:(BFPickerView *)pickerView widthForComponent:(NSInteger)component;- (CGFloat)pickerView:(BFPickerView *)pickerView rowHeightForComponent:(NSInteger)component;- (void)pickerView:(BFPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component;@end@interface BFPickerView : UIView&lt;NSCoding&gt;@property(nullable,nonatomic,weak) id&lt;BFPickerViewDataSource&gt; dataSource;@property(nullable,nonatomic,weak) id&lt;BFPickerViewDelegate&gt; delegate;- (void)reloadAllComponents;- (void)reloadComponent:(NSInteger)component;- (void)selectRow:(NSInteger)row inComponent:(NSInteger)component;- (NSInteger)selectedRowInComponent:(NSInteger)component;@end Mæ–‡ä»¶123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280#import &quot;BFPickerView.h&quot;#import &lt;Masonry.h&gt;#import &quot;UIColor+LicaiColor.h&quot;#import &quot;UIFont+Licai.h&quot;#define kPickerSubscrollViewTag 8486@interface BFPickerView ()&lt;UIScrollViewDelegate&gt;@property (nonatomic, strong) UIImageView *upImageView;@property (nonatomic, strong) UIView *upLineView;@property (nonatomic, strong) UIImageView *downImageView;@property (nonatomic, strong) UIView *downLineView;@property (nonatomic, assign) BOOL isSubViewLayouted;@property (nonatomic, assign) NSInteger componentCount;@property (nonatomic, strong) NSMutableDictionary *selectDic;@end@implementation BFPickerView- (instancetype)init &#123;self = [super init];if (self) &#123;[self setUp];&#125;return self;&#125;- (void)selectRow:(NSInteger)row inComponent:(NSInteger)component&#123;[self reloadComponent:component];CGFloat cellHeight = [self rowHeightForComponent:component];// UITableViewå­˜åœ¨å¤ç”¨æœºåˆ¶ï¼Œå¯èƒ½ä¼šé—ªæˆ–è€…æ¶ˆå¤±UIScrollView *scrollView = [self scrollViewFromComponent:component];[scrollView setContentOffset:CGPointMake(0, cellHeight * row) animated:NO];&#125;//- (NSInteger)selectedRowInComponent:(NSInteger)component &#123;return [[self.selectDic objectForKey:@(component + kPickerSubscrollViewTag)] integerValue];&#125;- (BOOL)verifyComponent:(NSInteger)component &#123;if (component &gt;= 0 &amp;&amp; component &lt; [self numberOfComponent]) &#123;return YES;&#125;else &#123;return NO;&#125;&#125;//- (BOOL)verifyrow:(NSInteger)row inComponent:(NSInteger)component &#123;if (row &gt;= 0 &amp;&amp; row &lt; [self numberOfRowsInComponent:component]) &#123;return YES;&#125;else &#123;return NO;&#125;&#125;#pragma mark reload- (void)reloadAllComponents &#123;for (int i = 0; i &lt; [self numberOfComponent]; i++) &#123;[self reloadComponent:i];&#125;&#125;- (void)reloadComponent:(NSInteger)component &#123;if (![self verifyComponent:component]) &#123;return;&#125;UIScrollView *scrollView = [self scrollViewFromComponent:component];CGFloat width = [self widthForComponent:component];if (scrollView) &#123;[scrollView mas_updateConstraints:^(MASConstraintMaker *make) &#123;make.width.equalTo(@(width));&#125;];&#125;else &#123;scrollView = [self makescrollView];scrollView.tag = kPickerSubscrollViewTag + component;CGFloat cellHeight = [self rowHeightForComponent:component];[self addSubview:scrollView];if (component == 0) &#123;[scrollView mas_makeConstraints:^(MASConstraintMaker *make) &#123;make.centerY.equalTo(self.mas_centerY);make.left.equalTo(@0);make.width.equalTo(@(width));make.height.equalTo(@(cellHeight));&#125;];&#125;else &#123;UIScrollView *prevscrollView = [self scrollViewFromComponent:component - 1];if (prevscrollView) &#123;[scrollView mas_makeConstraints:^(MASConstraintMaker *make) &#123;make.centerY.equalTo(self.mas_centerY);make.left.equalTo(prevscrollView.mas_right);make.width.equalTo(@(width));make.height.equalTo(@(cellHeight));&#125;];&#125;&#125;&#125;[self refreshScrollView:scrollView inComponent:component];[self layoutIfNeeded];&#125;- (void)refreshScrollView:(UIScrollView *)scrollView inComponent:(NSInteger)component&#123;[scrollView.subviews makeObjectsPerformSelector:@selector(removeFromSuperview)];NSInteger count = [self numberOfRowsInComponent:component];CGFloat totalHeight = 0.0;CGFloat width = [self widthForComponent:component];CGFloat height = [self rowHeightForComponent:component];for (int row = 0; row &lt; count; row++) &#123;UILabel *label = [self makeLabel];label.text = [self titleForRow:row forComponent:component];label.frame = CGRectMake(0, totalHeight, width, height);[scrollView addSubview:label];totalHeight += height;&#125;scrollView.contentSize = CGSizeMake(width, totalHeight);[scrollView layoutIfNeeded];&#125;- (UILabel *)makeLabel &#123;UILabel *label = [[UILabel alloc] init];label.backgroundColor = [UIColor clearColor];label.textColor = [UIColor licaiColor_121C32];label.font = [UIFont licai_PFMediumOfSize:kScaledValueX(15)];label.textAlignment = NSTextAlignmentCenter;return label;&#125;#pragma mark scrollView- (UIScrollView *)makescrollView&#123;UIScrollView *scrollView = [[UIScrollView alloc] init];scrollView.backgroundColor = [UIColor clearColor];scrollView.delegate = self;scrollView.showsVerticalScrollIndicator = NO;scrollView.showsHorizontalScrollIndicator = NO;scrollView.pagingEnabled = YES;scrollView.layer.masksToBounds = NO;scrollView.clipsToBounds = NO;return scrollView;&#125;- (UIScrollView *)scrollViewFromComponent:(NSInteger)component &#123;NSInteger tag = kPickerSubscrollViewTag + component;return (UIScrollView *)[self viewWithTag:tag];&#125;- (NSInteger)componentFromscrollView:(UIScrollView *)scrollView &#123;if (scrollView) &#123;NSInteger component = scrollView.tag - kPickerSubscrollViewTag;if ([self verifyComponent:component]) &#123;return component;&#125;&#125;return -1;&#125;#pragma mark BFPickerViewDelegate- (CGFloat)widthForComponent:(NSInteger)component &#123;if (self.delegate &amp;&amp; [self verifyComponent:component] &amp;&amp; [self.delegate respondsToSelector:@selector(pickerView:widthForComponent:)]) &#123;return [self.delegate pickerView:self widthForComponent:component];&#125;else &#123;if (self.componentCount &gt; 1) &#123;return (kScreenWidth - 20*2) / self.componentCount;&#125;else &#123;return kScreenWidth - 20*2;&#125;&#125;&#125;- (CGFloat)rowHeightForComponent:(NSInteger)component &#123;if (self.delegate &amp;&amp; [self verifyComponent:component] &amp;&amp; [self.delegate respondsToSelector:@selector(pickerView:rowHeightForComponent:)]) &#123;CGFloat height = [self.delegate pickerView:self rowHeightForComponent:component];if (height &gt; 0) &#123;return height;&#125;&#125;return 60.0;&#125;- (NSString *)titleForRow:(NSInteger)row forComponent:(NSInteger)component &#123;if (self.delegate &amp;&amp; [self verifyComponent:component] &amp;&amp; [self verifyrow:row inComponent:component] &amp;&amp; [self.delegate respondsToSelector:@selector(pickerView:titleForRow:forComponent:)]) &#123;NSString *title = [self.delegate pickerView:self titleForRow:row forComponent:component];if (STRINGHASVALUE(title)) &#123;return title;&#125;&#125;return @&quot;&quot;;&#125;#pragma mark BFPickerViewDataSource- (NSInteger)numberOfComponent &#123;if (self.dataSource &amp;&amp; [self.dataSource respondsToSelector:@selector(numberOfComponentsInPickerView:)]) &#123;return [self.dataSource numberOfComponentsInPickerView:self];&#125;else &#123;return 1;&#125;&#125;- (NSInteger)numberOfRowsInComponent:(NSInteger)component &#123;if (self.dataSource &amp;&amp; [self verifyComponent:component] &amp;&amp; [self.dataSource respondsToSelector:@selector(pickerView:numberOfRowsInComponent:)]) &#123;return [self.dataSource pickerView:self numberOfRowsInComponent:component];&#125;return 0;&#125;#pragma mark scrollDelegate- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset &#123;NSInteger component = [self componentFromscrollView:scrollView];CGFloat offsetY = targetContentOffset-&gt;y;CGFloat cellHeight = [self rowHeightForComponent:component];NSInteger index = offsetY / cellHeight;[self.selectDic setObject:@(index) forKey:@(kPickerSubscrollViewTag + component)];NSLog(@&quot;scrollViewWillEndDragging--jzk %ld&quot;,(long)index);if (self.delegate &amp;&amp; [self.delegate respondsToSelector:@selector(pickerView:didSelectRow:inComponent:)]) &#123;[self.delegate pickerView:self didSelectRow:index inComponent:component];&#125;&#125;#pragma mark setUp- (void)setUp &#123;self.selectDic = [[NSMutableDictionary alloc] init];self.clipsToBounds = YES;self.layer.masksToBounds = YES;_upImageView = [[UIImageView alloc] init];_upImageView.backgroundColor = [UIColor yellowColor];[self addSubview:_upImageView];[_upImageView mas_makeConstraints:^(MASConstraintMaker *make) &#123;make.top.equalTo(@0);make.left.equalTo(@0);make.right.equalTo(@0);make.height.equalTo(@(kScaledValueX(120)));&#125;];_upLineView = [[UIView alloc] init];_upLineView.backgroundColor = [UIColor licaiColor_E1E4EB];[self addSubview:_upLineView];[_upLineView mas_makeConstraints:^(MASConstraintMaker *make) &#123;make.top.equalTo(self.upImageView.mas_bottom);make.left.equalTo(@20);make.right.equalTo(@(-20));make.height.equalTo(@0.5);&#125;];_downImageView = [[UIImageView alloc] init];_downImageView.backgroundColor = [UIColor yellowColor];[self addSubview:_downImageView];[_downImageView mas_makeConstraints:^(MASConstraintMaker *make) &#123;make.bottom.equalTo(@0);make.left.equalTo(@0);make.right.equalTo(@0);make.height.equalTo(@(kScaledValueX(120)));&#125;];_downLineView = [[UIView alloc] init];_downLineView.backgroundColor = [UIColor licaiColor_E1E4EB];[self addSubview:_downLineView];[_downLineView mas_makeConstraints:^(MASConstraintMaker *make) &#123;make.bottom.equalTo(self.downImageView.mas_top);make.left.equalTo(@20);make.right.equalTo(@(-20));make.height.equalTo(@0.5);&#125;];&#125;@end è¡¥å……æ›´æ”¹UIPickerViewçš„ä¸Šä¸‹ä¸¤æ¡çº¿12345678910111213141516171819- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view &#123;UILabel *label = (UILabel*)view;if (label == nil) &#123;label = [[UILabel alloc] init];label.backgroundColor = [UIColor whiteColor];label.textAlignment = NSTextAlignmentCenter;label.textColor = [UIColor licaiColor_121C32];label.font = [UIFont licai_PFMediumOfSize:kScaledValueX(15)];&#125;label.text = [self pickerView:pickerView titleForRow:row forComponent:component];if (_pickerView.subviews.count &gt;= 3) &#123;[_pickerView.subviews objectAtIndex:1].backgroundColor = [UIColor licaiColor_E1E4EB];[_pickerView.subviews objectAtIndex:2].backgroundColor = [UIColor licaiColor_E1E4EB];&#125;return label;&#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ¨¡æ€è§†å›¾çš„åŠé€æ˜ŽèƒŒæ™¯é—®é¢˜]]></title>
    <url>%2F2016%2F08%2F03%2F%E6%A8%A1%E6%80%81%E8%A7%86%E5%9B%BE%E7%9A%84%E5%8D%8A%E9%80%8F%E6%98%8E%E8%83%8C%E6%99%AF%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;è¿™ä¸¤å¤©åšä¸€ä¸ªéœ€æ±‚ï¼Œå¼¹å‡ºpickeræŽ§ä»¶ï¼Œæœ¬æ¥å¾ˆç®€å•çš„éœ€æ±‚ï¼Œä½†å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°ä¸€ä¸ªå‘ï¼šèƒŒæ™¯è‰²æ€Žä¹ˆå¼„éƒ½æ²¡æœ‰åŠé€æ˜Žæ•ˆæžœï¼ŸæŸ¥æ¥æŸ¥åŽ»æ‰å‘çŽ°æ˜¯presentViewControllerçš„å‘ æ¨¡æ€è§†å›¾ç›¸å…³ å¼¹å‡ºå’Œæ¶ˆå¤±æ–¹æ³• 123- (void)presentViewController:(UIViewController *)viewControllerToPresent animated: (BOOL)flag completion:(void (^ __nullable)(void))completion NS_AVAILABLE_IOS(5_0);// The completion handler, if provided, will be invoked after the dismissed controller&apos;s viewDidDisappear: callback is invoked.- (void)dismissViewControllerAnimated: (BOOL)flag completion: (void (^ __nullable)(void))completion NS_AVAILABLE_IOS(5_0); å¼¹å‡ºæ¨¡æ€è§†å›¾ç›¸å…³å±žæ€§ 1234567891011121314151617181920212223242526272829303132333435363738/*Defines the transition style that will be used for this view controller when it is presented modally. Setthis property on the view controller to be presented, not the presenter. Defaults toUIModalTransitionStyleCoverVertical.*/// å¼¹å‡ºæ¨¡æ€ViewControlleræ—¶çš„å››ç§åŠ¨ç”»é£Žæ ¼typedef NS_ENUM(NSInteger, UIModalTransitionStyle) &#123;// ä»Žåº•éƒ¨æ»‘å…¥UIModalTransitionStyleCoverVertical = 0,// æ°´å¹³ç¿»è½¬UIModalTransitionStyleFlipHorizontal __TVOS_PROHIBITED,// äº¤å‰æº¶è§£UIModalTransitionStyleCrossDissolve,// ç¿»é¡µæ•ˆæžœUIModalTransitionStylePartialCurl NS_ENUM_AVAILABLE_IOS(3_2) __TVOS_PROHIBITED,&#125;;@property(nonatomic,assign) UIModalTransitionStyle modalTransitionStyle NS_AVAILABLE_IOS(3_0);// å¼¹å‡ºæ¨¡æ€ViewControlleræ—¶å¼¹å‡ºé£Žæ ¼typedef NS_ENUM(NSInteger, UIModalPresentationStyle) &#123;// ç”±ä¸‹åˆ°ä¸Š,å…¨å±è¦†ç›–UIModalPresentationFullScreen = 0,// è®¾å¤‡æ¨ªå±ï¼ŒVCçš„æ˜¾ç¤ºæ–¹å¼åˆ™ä»Žæ¨ªå±ä¸‹æ–¹å¼€å§‹UIModalPresentationPageSheet NS_ENUM_AVAILABLE_IOS(3_2) __TVOS_PROHIBITED,// VCæ˜¾ç¤ºéƒ½æ˜¯ä»Žåº•éƒ¨ï¼Œå®½åº¦å’Œå±å¹•å®½åº¦ä¸€æ ·UIModalPresentationFormSheet NS_ENUM_AVAILABLE_IOS(3_2) __TVOS_PROHIBITED,// VCçš„å¼¹å‡ºæ–¹å¼å’ŒVCçˆ¶VCçš„å¼¹å‡ºæ–¹å¼ç›¸åŒUIModalPresentationCurrentContext NS_ENUM_AVAILABLE_IOS(3_2),// è‡ªå®šä¹‰è§†å›¾å±•ç¤ºé£Žæ ¼,UIModalPresentationCustom NS_ENUM_AVAILABLE_IOS(7_0),// å¦‚æžœè§†å›¾æ²¡æœ‰è¢«å¡«æ»¡,åº•å±‚è§†å›¾å¯ä»¥é€è¿‡UIModalPresentationOverFullScreen NS_ENUM_AVAILABLE_IOS(8_0),// è§†å›¾å…¨éƒ¨è¢«é€è¿‡UIModalPresentationOverCurrentContext NS_ENUM_AVAILABLE_IOS(8_0),UIModalPresentationPopover NS_ENUM_AVAILABLE_IOS(8_0) __TVOS_PROHIBITED,UIModalPresentationNone NS_ENUM_AVAILABLE_IOS(7_0) = -1,&#125;;@property(nonatomic,assign) UIModalPresentationStyle modalPresentationStyle NS_AVAILABLE_IOS(3_2); ç¤ºä¾‹ï¼šå¼¹å‡ºåŠé€æ˜Žçš„æ¨¡æ€è§†å›¾ 1234567// presentViewControllerå¹¶ä¸”éœ€è¦åŠé€æ˜Žæ—¶UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:VC];[VC setModalPresentationStyle:UIModalPresentationCustom];[nav setModalPresentationStyle:UIModalPresentationCustom];self.modalPresentationStyle = UIModalPresentationCustom;[self presentViewController:nav animated:NO completion:nil];// presentViewControllerå¿…é¡»æ‰‹å†™ï¼Œä½¿ç”¨xibæˆ–storyéƒ½ä¼šæœ‰ä¸å¯é¢„æµ‹bug]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CoreTextç»ƒä¹ ]]></title>
    <url>%2F2016%2F07%2F26%2FCoreText%E7%BB%83%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;å‰ä¸¤å¤©çœ‹åˆ°ä¸€ç¯‡æ–‡ç« åŸºäºŽ CoreText å®žçŽ°çš„é«˜æ€§èƒ½ UITableViewï¼Œæ€è·¯æ¯”è¾ƒæ¸…å¥‡ï¼ä»¥å‰æ°´è¿‡NSAttributedStringçš„ä½¿ç”¨ï¼Œä¸€èˆ¬çš„æ–‡å­—æŽ’ç‰ˆå·²ç»èƒ½æ»¡è¶³éœ€æ±‚ã€‚ä½†æ›´å¤æ‚çš„æ–‡å­—æŽ’ç‰ˆå°±ç”¨åˆ°äº†CoreTextï¼Œæ­£å¥½è¿™å—ä¹Ÿä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œæ­£å¥½å­¦ä¹ ä¸€ä¸‹ 1 CoreTextç®€ä»‹&emsp;&emsp;CoreTextæ˜¯ç”¨äºŽå¤„ç†æ–‡å­—å’Œå­—ä½“çš„åº•å±‚æŠ€æœ¯ã€‚å·¥ä½œåœ¨Core Graphicsä¹‹ä¸Šã€‚Quartzèƒ½å¤Ÿç›´æŽ¥å¤„ç†å­—ä½“ï¼ˆfontï¼‰å’Œå­—å½¢ï¼ˆglyphsï¼‰ï¼Œå°†æ–‡å­—æ¸²æŸ“åˆ°ç•Œé¢ä¸Šï¼Œå®ƒæ˜¯åŸºç¡€åº“ä¸­å”¯ä¸€èƒ½å¤Ÿå¤„ç†å­—å½¢çš„æ¨¡å—ã€‚å› æ­¤CoreTextå…·æœ‰æ›´é«˜æ•ˆçš„æŽ’ç‰ˆåŠŸèƒ½ã€‚è¯¦ç»†å†…å®¹å‚è€ƒAbout Core Text &emsp;&emsp;CoreTextå’ŒUIWebviewä¸¤ç§æŽ’ç‰ˆæ–¹æ¡ˆå¯¹æ¯” CoreTextå ç”¨å†…å­˜æ›´å°‘ï¼Œæ¸²æŸ“é€Ÿåº¦æ›´å¿«ï¼ŒUIWebViewå ç”¨å†…å­˜å¤šï¼Œæ¸²æŸ“é€Ÿåº¦æ…¢ã€‚ CoreTextåœ¨æ¸²æŸ“ç•Œé¢å‰å°±å¯ä»¥ç²¾ç¡®åœ°èŽ·å¾—æ˜¾ç¤ºå†…å®¹çš„é«˜åº¦ï¼ˆåªè¦æœ‰äº†CTFrameå³å¯ï¼‰ï¼Œè€ŒUIWebViewåªæœ‰æ¸²æŸ“å‡ºå†…å®¹åŽï¼Œæ‰èƒ½èŽ·å¾—å†…å®¹çš„é«˜åº¦ï¼ˆè€Œä¸”è¿˜éœ€è¦é€šè¿‡JavaScriptä»£ç æ¥èŽ·å–ï¼‰ã€‚ CoreTextçš„CTFrameå¯ä»¥åœ¨åŽå°çº¿ç¨‹æ¸²æŸ“ï¼ŒUIWebViewçš„å†…å®¹åªèƒ½åœ¨ä¸»çº¿ç¨‹ï¼ˆUIçº¿ç¨‹ï¼‰æ¸²æŸ“ã€‚ CoreTextåªæ”¯æŒæ¸²æŸ“ä¸æ”¯æŒé•¿æŒ‰å¤åˆ¶ï¼ŒUIWebviewå¯ä»¥æ”¯æŒ 2 æ–‡å­—æŽ’ç‰ˆçš„åŸºç¡€æ¦‚å¿µ&emsp;&emsp;ç›—å›¾å®˜ç½‘ å­—ä½“(Font)ï¼šéœ€è¦æ³¨æ„çš„æ˜¯ç²—ä½“ã€æ–œä½“ç­‰éƒ½æ˜¯ä¸åŒå­—ä½“ï¼Œè¿™ä¹Ÿè§£é‡Šäº†ä¸ºå•¥UIè‡ªå®šä¹‰å­—ä½“æ—¶è¦ç»™å¥½å‡ å¥—ï¼Œç²—ä½“æ–œä½“éƒ½æœ‰å¯¹åº”çš„å­—ä½“æ–‡ä»¶ å­—ä½“é›†(Font family):æ˜¯ä¸€ç»„ç›¸å…³å­—ä½“ å­—ç¬¦(Character)å’Œå­—å½¢(Glyphs)ï¼šå­—ç¬¦å°±æ˜¯å­—é¢æ„ä¸€èˆ¬å°±æ˜¯æŒ‡æŸç§ç¼–ç ï¼Œå¦‚Unicodeç¼–ç ï¼Œè€Œå­—å½¢åˆ™æ˜¯è¿™äº›ç¼–ç å¯¹åº”çš„å›¾ç‰‡ è¾¹æ¡†(Bounding Box)ï¼šä¸€ä¸ªå‡æƒ³çš„è¾¹æ¡†ï¼Œå°½å¯èƒ½åœ°å®¹çº³æ•´ä¸ªå­—å½¢ã€‚ ç£…å€¼(Weight):ç”¨äºŽæè¿°å­—ä½“ç²—åº¦ åŸºçº¿(Baseline)ï¼šä¸€æ¡å‡æƒ³çš„å‚ç…§çº¿ï¼Œä»¥æ­¤ä¸ºåŸºç¡€è¿›è¡Œå­—å½¢çš„æ¸²æŸ“ã€‚ä¸€èˆ¬æ¥è¯´æ˜¯ä¸€æ¡æ¨ªçº¿ã€‚ åŸºç¡€åŽŸç‚¹(Origin)ï¼šåŸºçº¿ä¸Šæœ€å·¦ä¾§çš„ç‚¹ã€‚ ä¸Šè¡Œé«˜åº¦(Ascent)å’Œä¸‹è¡Œé«˜åº¦(Decent)ï¼šä¸€ä¸ªå­—å½¢æœ€é«˜ç‚¹å’Œæœ€ä½Žç‚¹åˆ°åŸºçº¿çš„è·ç¦»ï¼Œå‰è€…ä¸ºæ­£æ•°ï¼Œè€ŒåŽè€…ä¸ºè´Ÿæ•°ã€‚lineHeight = Ascent + |Decent| + Leadingã€‚ xé«˜åº¦(X height):æŒ‡å°å†™å­—æ¯çš„å¹³å‡é«˜åº¦(ä»¥xä¸ºåŸºå‡†)ã€‚ç£…å€¼ç›¸åŒçš„ä¸¤å­—æ¯,xé«˜åº¦è¶Šå¤§çš„å­—æ¯çœ‹èµ·æ¥æ¯”xé«˜åº¦å°çš„å­—æ¯è¦å¤§ Capé«˜åº¦(Cap height):ä¸Žxé«˜åº¦ç›¸ä¼¼ã€‚æŒ‡å¤§å†™å­—æ¯çš„å¹³å‡é«˜åº¦(ä»¥Cä¸ºåŸºå‡†) æè¾¹(Stroke):ç»„æˆå­—ç¬¦çš„çº¿æˆ–æ›²çº¿ã€‚å¯ä»¥åŠ ç²—æˆ–æ”¹å˜å­—ç¬¦å½¢çŠ¶ è¡Œé—´è·(Leading)ï¼šè¡Œä¸Žè¡Œä¹‹é—´çš„é—´è·ã€‚ å­—é—´è·(Kerning)ï¼šå­—ä¸Žå­—ä¹‹é—´çš„è·ç¦»ï¼Œä¸ºäº†æŽ’ç‰ˆçš„ç¾Žè§‚ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„å­—å½¢ä¹‹é—´çš„è·ç¦»éƒ½æ˜¯ä¸€è‡´çš„ï¼Œä½†æ˜¯è¿™ä¸ªåŸºæœ¬æ­¥å½±å“åˆ°æˆ‘ä»¬çš„æ–‡å­—æŽ’ç‰ˆã€‚ 3 CoreTextä¸­å¸¸ç”¨ç±» CTFont | Core Textå­—ä½“å¯¹è±¡ã€‚å­—ä½“å¯¹è±¡è¡¨ç¤ºåº”ç”¨ç¨‹åºçš„å­—ä½“ï¼Œæä¾›å¯¹å­—ä½“ç‰¹å¾çš„è®¿é—®ï¼Œä¾‹å¦‚ç£…å€¼ï¼Œå˜æ¢çŸ©é˜µå’Œå…¶ä»–å±žæ€§ CTFrame | æƒ³è±¡æˆç”»å¸ƒï¼Œå¯åŒ…å«å¤šè¡Œæ–‡æœ¬ CTFramesetter | CTFrameçš„ä¸€ä¸ªFactoryï¼Œé€šè¿‡ä¼ å…¥CGPathç”Ÿæˆç›¸åº”çš„CTFrameå¹¶ä½¿ç”¨å®ƒè¿›è¡Œæ¸²æŸ“ CTLine | è¡¨ç¤ºä¸€è¡Œæ–‡æœ¬ã€‚ CTParagraphStyle | æ®µè½å±žæ€§ CTRun | ç»˜åˆ¶çš„æœ€å°å•å…ƒï¼ŒCTRunDelegateå®žçŽ°å›¾æ–‡æ··æŽ’çš„åŽŸç†ï¼šç”¨ä¸€ä¸ªç©ºç™½å­—ç¬¦ä½œä¸ºå›¾ç‰‡çš„å ä½ç¬¦ï¼Œè®¾å¥½Delegateï¼Œå å¥½ä½ç½®ï¼Œç„¶åŽç”¨CoreGraphicsè¿›è¡Œå›¾ç‰‡çš„ç»˜åˆ¶ &emsp;&emsp;ä¸€ä¸ªCTFrameæ˜¯ç”±ä¸€è¡Œä¸€è¡Œçš„CLineç»„æˆï¼Œæ¯ä¸ªCTLineåˆä¼šåŒ…å«è‹¥å¹²ä¸ªCTRun(æ—¢å­—å½¢ç»˜åˆ¶çš„æœ€å°å•å…ƒ)ï¼Œé€šè¿‡ç›¸åº”çš„æ–¹æ³•å¯ä»¥èŽ·å–åˆ°ä¸åŒä½ç½®çš„CTRunå’ŒCTLineï¼Œä»¥å®žçŽ°å¯¹ä¸åŒä½ç½®touchäº‹ä»¶çš„å“åº”ã€‚æ³¨æ„ï¼šä½ ä¸éœ€è¦è‡ªå·±åˆ›å»ºCTRunï¼ŒCoreTextå°†æ ¹æ®NSAttributedStringçš„å±žæ€§æ¥è‡ªåŠ¨åˆ›å»ºCTRunã€‚ 4 ç»˜åˆ¶4.1 å¸¸ç”¨æ–‡æœ¬ç»˜åˆ¶12345678910111213141516171819202122232425262728293031323334353637383940414243444546- (void)drawRect:(CGRect)rect &#123;CGContextRef context = UIGraphicsGetCurrentContext();CGContextSetTextMatrix(context , CGAffineTransformIdentity);CGContextTranslateCTM(context , 0 ,self.bounds.size.height);CGContextScaleCTM(context, 1.0 ,-1.0);NSString *str = @&quot;core text dome string. å¯Œæ–‡æœ¬æµ‹è¯•&quot;;NSMutableAttributedString *mabstring = [[NSMutableAttributedString alloc]initWithString:str];[mabstring beginEditing];/*kCTCharacterShapeAttributeName;//å­—ä½“å½¢çŠ¶å±žæ€§ å¿…é¡»æ˜¯CFNumberRefå¯¹è±¡é»˜è®¤ä¸º0ï¼Œéž0åˆ™å¯¹åº”ç›¸åº”çš„å­—ç¬¦å½¢çŠ¶å®šä¹‰ï¼Œå¦‚1è¡¨ç¤ºä¼ ç»Ÿå­—ç¬¦å½¢çŠ¶kCTFontAttributeName;//å­—ä½“å±žæ€§ å¿…é¡»æ˜¯CTFontå¯¹è±¡kCTKernAttributeName;//å­—ç¬¦é—´éš”å±žæ€§ å¿…é¡»æ˜¯CFNumberRefå¯¹è±¡kCTForegroundColorAttributeName; //å­—ä½“é¢œè‰²å±žæ€§ å¿…é¡»æ˜¯CGColorå¯¹è±¡ï¼Œé»˜è®¤ä¸ºblackkCTForegroundColorFromContextAttributeName //ä¸Šä¸‹æ–‡çš„å­—ä½“é¢œè‰²å±žæ€§ å¿…é¡»ä¸ºCFBooleanRef é»˜è®¤ä¸ºFalse,kCTParagraphStyleAttributeName //æ®µè½æ ·å¼å±žæ€§ å¿…é¡»æ˜¯CTParagraphStyleå¯¹è±¡ é»˜è®¤ä¸ºNILkCTStrokeWidthAttributeName //ç¬”ç”»çº¿æ¡å®½åº¦ å¿…é¡»æ˜¯CFNumberRefå¯¹è±¡ï¼Œé»˜ä¸º0.0fï¼Œæ ‡å‡†ä¸º3.0fkCTStrokeColorAttributeName //ç¬”ç”»çš„é¢œè‰²å±žæ€§ å¿…é¡»æ˜¯CGColorRef å¯¹è±¡ï¼Œé»˜è®¤ä¸ºå‰æ™¯è‰²kCTSuperscriptAttributeName //è®¾ç½®å­—ä½“çš„ä¸Šä¸‹æ ‡å±žæ€§ å¿…é¡»æ˜¯CFNumberRefå¯¹è±¡ é»˜è®¤ä¸º0,å¯ä¸º-1ä¸ºä¸‹æ ‡,1ä¸ºä¸Šæ ‡ï¼Œéœ€è¦å­—ä½“æ”¯æŒæ‰è¡Œã€‚å¦‚æŽ’åˆ—ç»„åˆçš„æ ·å¼Cn1kCTUnderlineColorAttributeName //å­—ä½“ä¸‹åˆ’çº¿é¢œè‰²å±žæ€§ å¿…é¡»æ˜¯CGColorRefå¯¹è±¡ï¼Œé»˜è®¤ä¸ºå‰æ™¯è‰²kCTUnderlineStyleAttributeName //å­—ä½“ä¸‹åˆ’çº¿æ ·å¼å±žæ€§ å¿…é¡»æ˜¯CFNumberRefå¯¹è±¡,é»˜ä¸ºkCTUnderlineStyleNone å¯ä»¥é€šè¿‡CTUnderlineStypleModifiers è¿›è¡Œä¿®æ”¹ä¸‹åˆ’çº¿é£Žæ ¼kCTVerticalFormsAttributeName//æ–‡å­—çš„å­—å½¢æ–¹å‘å±žæ€§ å¿…é¡»æ˜¯CFBooleanRef é»˜è®¤ä¸ºfalseï¼Œfalseè¡¨ç¤ºæ°´å¹³æ–¹å‘ï¼Œtrueè¡¨ç¤ºç«–ç›´æ–¹å‘kCTGlyphInfoAttributeName //å­—ä½“ä¿¡æ¯å±žæ€§ å¿…é¡»æ˜¯CTGlyphInfoå¯¹è±¡kCTRunDelegateAttributeName //CTRun å§”æ‰˜å±žæ€§ å¿…é¡»æ˜¯CTRunDelegateå¯¹è±¡*/NSMutableDictionary *attributes = [NSMutableDictionary dictionaryWithObject:(id)[UIColor redColor].CGColor forKey:(id)kCTForegroundColorAttributeName];CTFontRef font = CTFontCreateWithName((CFStringRef)[UIFont italicSystemFontOfSize:40].fontName, 40, NULL);[attributes setObject:(__bridge id)font forKey:(id)kCTFontAttributeName];[attributes setObject:(id)[NSNumber numberWithInt:kCTUnderlineStyleDouble] forKey:(id)kCTUnderlineStyleAttributeName];[mabstring addAttributes:attributes range:NSMakeRange(0, 4)];[mabstring endEditing];CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)mabstring);CGMutablePathRef Path = CGPathCreateMutable();CGPathAddRect(Path, NULL ,CGRectMake(0 , 0 ,self.bounds.size.width , self.bounds.size.height));CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), Path, NULL);CGContextSaveGState(context);CTFrameDraw(frame,context);CGPathRelease(Path);CFRelease(framesetter);UIGraphicsPushContext(context);&#125; 4.2 å›¾æ–‡æ··æŽ’&emsp;&emsp;ä»¥ä¸‹ä»£ç æ‘˜è‡ªCoreTextå®žçŽ°å›¾æ–‡æ··æŽ’ï¼ç›´æŽ¥çœ‹ä»£ç å§ä¸éš¾ï¼Œæ ¸å¿ƒï¼šç”¨ä¸€ä¸ªç©ºç™½å­—ç¬¦ä½œä¸ºå›¾ç‰‡çš„å ä½ç¬¦ï¼Œè®¾å¥½Delegateï¼Œå å¥½ä½ç½®ï¼Œç„¶åŽç”¨CoreGraphicsè¿›è¡Œå›¾ç‰‡çš„ç»˜åˆ¶ã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485-(void)drawRect:(CGRect)rect&#123;[super drawRect:rect];CGContextRef context = UIGraphicsGetCurrentContext();CGContextSetTextMatrix(context, CGAffineTransformIdentity); CGContextTranslateCTM(context, 0, self.bounds.size.height);CGContextScaleCTM(context, 1.0, -1.0);NSMutableAttributedString * attributeStr = [[NSMutableAttributedString alloc] initWithString:@&quot;\nè¿™é‡Œåœ¨æµ‹è¯•å›¾æ–‡æ··æŽ’ï¼Œ\næˆ‘æ˜¯ä¸€ä¸ªå¯Œæ–‡æœ¬&quot;];CTRunDelegateCallbacks callBacks;callBacks.version = kCTRunDelegateVersion1;callBacks.getAscent = ascentCallBacks;callBacks.getDescent = descentCallBacks;callBacks.getWidth = widthCallBacks;NSDictionary * dicPic = @&#123;@&quot;height&quot;:@129,@&quot;width&quot;:@400&#125;;CTRunDelegateRef delegate = CTRunDelegateCreate(&amp; callBacks, (__bridge void *)dicPic);unichar placeHolder = 0xFFFC;NSString * placeHolderStr = [NSString stringWithCharacters:&amp;placeHolder length:1];NSMutableAttributedString * placeHolderAttrStr = [[NSMutableAttributedString alloc] initWithString:placeHolderStr];CFAttributedStringSetAttribute((CFMutableAttributedStringRef)placeHolderAttrStr, CFRangeMake(0, 1), kCTRunDelegateAttributeName, delegate);CFRelease(delegate);[attributeStr insertAttributedString:placeHolderAttrStr atIndex:12];CTFramesetterRef frameSetter = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)attributeStr);CGMutablePathRef path = CGPathCreateMutable();CGPathAddRect(path, NULL, self.bounds);NSInteger length = attributeStr.length;CTFrameRef frame = CTFramesetterCreateFrame(frameSetter, CFRangeMake(0, length), path, NULL);CTFrameDraw(frame, context);UIImage * image = [UIImage imageNamed:@&quot;bd_logo1&quot;];CGRect imgFrm = [self calculateImageRectWithFrame:frame];CGContextDrawImage(context,imgFrm, image.CGImage);CFRelease(frame);CFRelease(path);// CFRelease(frameSetter);&#125;static CGFloat ascentCallBacks(void * ref)&#123;return [(NSNumber *)[(__bridge NSDictionary *)ref valueForKey:@&quot;height&quot;] floatValue];&#125;static CGFloat descentCallBacks(void * ref)&#123;return 0;&#125;static CGFloat widthCallBacks(void * ref)&#123;return [(NSNumber *)[(__bridge NSDictionary *)ref valueForKey:@&quot;width&quot;] floatValue];&#125;-(CGRect)calculateImageRectWithFrame:(CTFrameRef)frame&#123;NSArray * arrLines = (NSArray *)CTFrameGetLines(frame);NSInteger count = [arrLines count];CGPoint points[count];CTFrameGetLineOrigins(frame, CFRangeMake(0, 0), points);for (int i = 0; i &lt; count; i ++) &#123;CTLineRef line = (__bridge CTLineRef)arrLines[i];NSArray * arrGlyphRun = (NSArray *)CTLineGetGlyphRuns(line);for (int j = 0; j &lt; arrGlyphRun.count; j ++) &#123;CTRunRef run = (__bridge CTRunRef)arrGlyphRun[j];NSDictionary * attributes = (NSDictionary *)CTRunGetAttributes(run);CTRunDelegateRef delegate = (__bridge CTRunDelegateRef)[attributes valueForKey:(id)kCTRunDelegateAttributeName];if (delegate == nil) &#123;continue;&#125;NSDictionary * dic = CTRunDelegateGetRefCon(delegate);if (![dic isKindOfClass:[NSDictionary class]]) &#123;continue;&#125;CGPoint point = points[i];CGFloat ascent;CGFloat descent;CGRect boundsRun;boundsRun.size.width = CTRunGetTypographicBounds(run, CFRangeMake(0, 0), &amp;ascent, &amp;descent, NULL);boundsRun.size.height = ascent + descent;CGFloat xOffset = CTLineGetOffsetForStringIndex(line, CTRunGetStringRange(run).location, NULL);boundsRun.origin.x = point.x + xOffset;boundsRun.origin.y = point.y - descent;CGPathRef path = CTFrameGetPath(frame);CGRect colRect = CGPathGetBoundingBox(path);CGRect imageBounds = CGRectOffset(boundsRun, colRect.origin.x, colRect.origin.y);return imageBounds;&#125;&#125;return CGRectZero;&#125; å‚è€ƒ CoreTextå®žçŽ°å›¾æ–‡æ··æŽ’ åŸºäºŽ CoreText å®žçŽ°çš„é«˜æ€§èƒ½ UITableView]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CoreGraphics2ï¼šè¿›é˜¶]]></title>
    <url>%2F2016%2F07%2F19%2FCoreGraphics2%EF%BC%9A%E8%BF%9B%E9%98%B6%2F</url>
    <content type="text"><![CDATA[3.3 Quartzå˜æ¢å‡½æ•° å¹³ç§»ç»˜å›¾ 1CGContextTranslateCTM(context, 100, 200); æ—‹è½¬ç»˜å›¾ 1CGContextRotateCTM(context, M_PI_4); ç¼©æ”¾ç»˜å›¾ 1CGContextScaleCTM(context, 0.5, 0.8); å¦‚æžœæƒ³è¦å³å¹³ç§»åˆæ—‹è½¬æ€Žä¹ˆåŠžï¼Ÿ 123456789101112131415161718192021222324252627/*CGAffineTransform å¤„ç†å½¢å˜çš„ç±»,äºŒç»´åæ ‡ç³»,å³å‘å³ä¸ºxè½´æ­£æ–¹å‘,å‘ä¸Šä¸ºyè½´æ­£æ–¹å‘æ–¹æ³•ç®€ä»‹ï¼šCGAffineTransformTranslate // xè½´æ–¹å‘ä¸Šå¹³ç§»xå•ä½,åœ¨yè½´æ–¹å‘ä¸Šå¹³ç§»yå•ä½CGAffineTransformScale // xè½´æ–¹å‘ä¸Šç¼©æ”¾xå€,åœ¨yè½´æ–¹å‘ä¸Šç¼©æ”¾yå€CGAffineTransformRotate // é€†æ—¶é’ˆæ—‹è½¬å¼§åº¦,M_PI=180è§’åº¦)ä»¥ä¸‹éƒ½æ˜¯é’ˆå¯¹è§†å›¾çš„åŽŸå®šæœ€åˆä½ç½®çš„ä¸­å¿ƒç‚¹ä¸ºèµ·å§‹å‚ç…§è¿›è¡Œç›¸åº”æ“ä½œçš„ï¼ŒCGAffineTransformMakeTranslation // å°†åæ ‡ç³»ç»Ÿxè½´æ–¹å‘ä¸Šå¹³ç§»xå•ä½,åœ¨yè½´æ–¹å‘ä¸Šå¹³ç§»yå•ä½CGAffineTransformMakeScale // å°†åæ ‡ç³»ç»Ÿxè½´æ–¹å‘ä¸Šç¼©æ”¾xå€,åœ¨yè½´æ–¹å‘ä¸Šç¼©æ”¾yå€CGAffineTransformMakeRotation // å°†åæ ‡ç³»ç»Ÿé€†æ—¶é’ˆæ—‹è½¬å¼§åº¦,M_PI=180è§’åº¦)*/CGAffineTransform transform = CGAffineTransformIdentity;transform = CGAffineTransformTranslate(transform, newSize.width, newSize.height);transform = CGAffineTransformRotate(transform, M_PI);// å¾—åˆ°ä¸€ä¸ªå€’ç½®çŸ©é˜µã€‚åº”ç”¨å€’ç½®çŸ©é˜µå°†æŠµæ¶ˆåŽŸçŸ©é˜µçš„å˜æ¢æ•ˆæžœã€‚// CGAffineTransform invertTransform = CGAffineTransformInvert(transform);// åˆ¤æ–­ä»¿å°„å˜æ¢æ˜¯å¦ç›¸ç­‰ã€‚// CGAffineTransformEqualToTransform(invertTransform, transform) // åˆ¤æ–­ä»¿å°„å˜æ¢æ˜¯å¦ä¸ºå•ä½å˜æ¢ã€‚å•ä½å˜æ¢æ²¡æœ‰å¹³ç§»ã€ç¼©æ”¾å’Œæ—‹è½¬æ“ä½œã€‚// CGAffineTransformIsIdentity(invertTransform)// åˆå¹¶å¤šä¸ªå˜æ¢å‡½æ•°CGContextConcatCTM(context, invertTransform);// åœ¨æ“ä½œç»“æŸä¹‹åŽå¯å¯¹è®¾ç½®é‡è¿›è¡Œè¿˜åŽŸï¼šview.transformï¼CGAffineTransformIdentity; 3.4 é¢œè‰²ä¸Žé¢œè‰²ç©ºé—´ åˆ›å»ºè®¾å¤‡ä¾èµ–é¢œè‰²ç©ºé—´ 1234567// åˆ›å»ºè®¾å¤‡ä¾èµ–RGBé¢œè‰²ç©ºé—´ã€‚// CGColorSpaceCreateDeviceGray(); CGColorSpaceCreateDeviceCMYK();CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();// è®¾ç½®å¡«å……çš„é¢œè‰²ç©ºé—´CGContextSetFillColorSpace(context, colorSpace);// è®¾ç½®æè¾¹çš„é¢œè‰²ç©ºé—´CGContextSetStrokeColorSpace(context, colorSpace); åˆ›å»ºå¹¶å¡«å……é¢œè‰² 1234567891011121314// 1, ä½¿ç”¨é¢œè‰²ç©ºé—´åˆ›å»ºé¢œè‰²CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();CGFloat components[] = &#123;250/255.0, 100/255.0, 70/255.0, 1.0&#125;;CGColorRef color = CGColorCreate(colorspace, components);CGContextSetStrokeColorWithColor(context, color);CGContextSetFillColorWithColor(context, color);// 2ï¼Œå¿«é€Ÿè®¾ç½®ä¾èµ–RGBé¢œè‰²çš„é¢œè‰²å€¼ã€‚CGContextSetRGBStrokeColor(context, 1, 0, 0, 1);CGContextSetRGBFillColor(context, 1, 0, 0, 1);// 3, ä½¿ç”¨UIå‡½æ•°è®¾ç½®é¢œè‰²å€¼CGContextSetStrokeColorWithColor(context, [UIColor redColor].CGColor));CGContextSetFillColorWithColor(context, [UIColor redColor].CGColor); 3.5 é˜´å½± é˜´å½±è¢«è®¾ç½®åŽï¼Œä»»ä½•ç»˜åˆ¶çš„å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªé˜´å½±ï¼Œå¦‚æžœéœ€å¤šä¸ªé˜´å½±æŠ•å°„åœ¨ä¸€èµ·ï¼Œå¯ä½¿ç”¨ä¸€ä¸ªé€æ˜Žå±‚ï¼›è¯¥å›¾å±‚ç±»ä¼¼ä¸€ä¸ªå…ˆæ˜¯å åŠ æ‰€æœ‰ç»˜å›¾ç„¶åŽåŠ ä¸Šé˜´å½±çš„ä¸€ä¸ªå­ä¸Šä¸‹æ–‡ å…³é—­é˜´å½±ï¼šå¦‚æžœåœ¨è®¾ç½®é˜´å½±ä¹‹å‰ä¿å­˜äº†å›¾å½¢çŠ¶æ€ï¼Œå°±å¯ä»¥é€šè¿‡æ¢å¤å›¾å½¢çŠ¶æ€æ¥å…³é—­é˜´å½±ã€‚ä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½®é˜´å½±é¢œè‰²ä¸º NULL æ¥å…³é—­é˜´å½±ã€‚1234// é˜´å½±çš„ä½ç½®è¡¨ç¤ºä¸ºCGSizeï¼Œå¦‚æžœCGSizeçš„ä¸¤ä¸ªå€¼éƒ½æ˜¯æ­£æ•°ï¼Œåˆ™è¡¨ç¤ºé˜´å½±æ˜¯æœä¸‹å’Œæœå³çš„ã€‚æ¨¡ç³Šåº¦è¢«è¡¨ç¤ºä¸ºä»»ä½•ä¸€ä¸ªæ­£æ•°CGContextSetShadowWithColor(myContext, CGSizeMake(15, 20), 5, [UIColor redColor].CGColor);// é»˜è®¤é¢œè‰² RGBA å€¼ &#123;0, 0, 0, 1.0 / 3.0&#125;CGContextSetShadow(context, CGSizeMake(15, 20), 5); 3.6 æ¸å˜ CGGradient ç»˜åˆ¶å¾„å‘å’Œè½´å‘æ¸å˜ 1234567891011121314151617181920212223242526272829303132333435// ç»˜åˆ¶æ¸å˜// é¢œè‰²æ•°ç»„å’Œä½ç½®æ•°ç»„å¿…é¡»ä¸€ä¸€å¯¹åº”ï¼Œæœ€å°‘ä¸¤ä¸ªï¼šèµ·ç‚¹å’Œç»ˆç‚¹CGFloat locs[3] = &#123; 0.0, 0.5, 1.0 &#125;;CGFloat colors[12] = &#123;0.3,0.3,0.3,0.8, // å¼€å§‹é¢œè‰²0.0,0.0,0.0,1.0, // ä¸­é—´é¢œè‰²0.3,0.3,0.3,0.8 // æœ«å°¾é¢œè‰²&#125;;CGColorSpaceRef sp = CGColorSpaceCreateDeviceRGB();CGGradientRef grad = CGGradientCreateWithColorComponents (sp, colors, locs, 3);// ç»˜åˆ¶è½´å‘æ¸å˜/*CGContextRef cg_nullable c,CGGradientRef cg_nullable gradient,CGPoint startPoint, èµ·ç‚¹CGPoint endPoint, ç»ˆç‚¹CGGradientDrawingOptions optionskCGGradientDrawsBeforeStartLocation å‘å¤–æ¸å˜kCGGradientDrawsAfterEndLocation å‘é‡Œæ¸å˜*/// CGContextDrawLinearGradient(context, grad, CGPointMake(50,0), CGPointMake(100,0), 0);// ç»˜åˆ¶å¾„å‘æ¸å˜/*CGContextRef cg_nullable c,CGGradientRef cg_nullable gradient,CGPoint startCenter, å¤–åœˆä¸­å¿ƒç‚¹CGFloat startRadius, å¤–åœˆåŠå¾„CGPoint endCenter, å†…åœˆä¸­å¿ƒç‚¹CGFloat endRadius, å†…åœˆåŠå¾„CGGradientDrawingOptions options*/CGContextDrawRadialGradient(context, grad, CGPointMake(100, 200), 5, CGPointMake(100, 200), 50, 0);CGColorSpaceRelease(sp);CGGradientRelease(grad); CGShading ç»˜åˆ¶å¾„å‘å’Œè½´å‘æ¸å˜ 1// to do 3.7 é€æ˜Žå±‚ é€æ˜Žå±‚é€šè¿‡ç»„åˆä¸¤ä¸ªæˆ–å¤šä¸ªå¯¹è±¡æ¥ç”Ÿæˆä¸€ä¸ªç»„åˆå›¾å½¢ã€‚æŠŠå®ƒå½“åœºä¸€ä¸ªå•ç‹¬å¯¹è±¡1234567891011// ç»™ä¸¤ä¸ªåœ†ç»„æˆçš„å¤§çœ¼ç›ç»˜åˆ¶é˜´å½±CGContextSetShadowWithColor(context, CGSizeZero, 10, [UIColor grayColor].CGColor);// å¼€å§‹é€æ˜Žå±‚ï¼Œbeginå’Œendä¹‹é—´çš„å½“åšä¸€ä¸ªå•ç‹¬å¯¹è±¡å¯¹å¾…CGContextBeginTransparencyLayer(context, NULL);// æ·»ç‚¹æ–™CGContextSetFillColorWithColor(context, [UIColor redColor].CGColor);CGContextFillEllipseInRect(context, CGRectMake(100, 150, 100, 100));CGContextSetFillColorWithColor(context, [UIColor blueColor].CGColor);CGContextFillEllipseInRect(context, CGRectMake(150, 150, 100, 100));// ç»“æŸé€æ˜Žå±‚ï¼Œç”Ÿæˆä¸€ä¸ªç»„åˆå›¾å±‚ï¼Œbeginå’Œendå¿…é¡»ä¸€ä¸€å¯¹åº”CGContextEndTransparencyLayer(context); 3.8 æŠ—é”¯é½¿1CGContextSetShouldAntialias(context, YES); // æ‰“å¼€æŠ—é”¯é½¿ 3.9æ¨¡æ¿ æ¨¡æ¿è¡¨ç¤ºä¸ºCGPatternï¼ˆå…·ä½“ç±»åž‹ä¸ºCGPatternRefï¼‰ã€‚ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªæ¨¡æ¿å¹¶ä½¿ç”¨å®ƒè¿›è¡Œæè¾¹æˆ–å¡«å……ã€‚è·Ÿå¸–ç“·ç –å·®ä¸å¤š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152void drawTile(void *info,CGContextRef context) &#123;CGContextSetFillColorWithColor(context, [UIColor redColor].CGColor);CGContextFillRect(context, CGRectMake(0, 0, 30, 30));CGContextSetFillColorWithColor(context, [UIColor grayColor].CGColor);CGContextFillRect(context, CGRectMake(0, 30, 30, 30));CGContextSetFillColorWithColor(context, [UIColor blueColor].CGColor);CGContextFillRect(context, CGRectMake(30, 0, 30, 30));CGContextSetFillColorWithColor(context, [UIColor purpleColor].CGColor);CGContextFillRect(context, CGRectMake(30, 30, 30, 30));&#125;- (void)drawRect:(CGRect)rect &#123;CGContextRef context = UIGraphicsGetCurrentContext();//å¡«å……æ¨¡å¼å›žè°ƒå‡½æ•°ç»“æž„ä½“/*version å›žè°ƒç»“æž„ä½“çš„ç‰ˆæœ¬å·ï¼Œå¯ä»¥è®¾ç½®ä¸º 0drawPattern æŒ‡å‘ç»˜åˆ¶å›žè°ƒçš„æŒ‡é’ˆã€‚releaseInfo è¯¥å›žè°ƒåœ¨é‡Šæ”¾ CGPatternRef å¯¹è±¡æ—¶è¢«è°ƒç”¨ï¼Œå¦‚æžœä¸ç”¨å¯ä¼ NULL*/ CGPatternCallbacks callback = &#123;0,drawTile,NULL&#125;;//è®¾ç½®ç –å—æ ·å¼/*void *infoCGRectbounds æ¯å—ç“·ç –çš„å¤§å°CGAffineTransform matrix å˜æ¢çŸ©é˜µï¼Œå¦‚æžœä¸ç”¨å˜æ¢å¯ä»¥ä¼ å…¥CGAffineTransformIdentityCGFloat xStep, CGFloat yStep æŒ‡å®šç“·ç –å—æ¨ªå‘å’Œçºµå‘çš„é—´è·ï¼Œå¦‚æžœå¤§äºŽç“·ç –å¤§å°ï¼Œç“·ç –é—´ä¼šæœ‰é—´éš™CGPatternTiling tiling å¹³é“ºæ¨¡å¼ kCGPatternTilingNoDistortion æ— å¤±çœŸ,kCGPatternTilingConstantSpacingMinimalDistortion æ’å®šé—´è·çš„æœ€å°å¤±çœŸ,kCGPatternTilingConstantSpacingæ’å®šé—´è·å¹³é“ºbool isColored ç“·ç –æ˜¯å¦æœ‰é¢œè‰²const CGPatternCallbacks *callbacks å›žè°ƒå‡½æ•°ç»“æž„ä½“*/CGPatternRef pattern = CGPatternCreate(NULL, CGRectMake(0, 0, 60, 60), CGAffineTransformIdentity, 60, 60, kCGPatternTilingNoDistortion, true, &amp;callback);//è®¾ç½®é¢œè‰²ç©ºé—´//è®¾å¤‡æ— å…³çš„é¢œè‰²ç©ºé—´ CGColorSpaceCreateDeviceRGB();//æ¨¡å¼å¡«å……é¢œè‰²ç©ºé—´,æ³¨æ„å¯¹äºŽæœ‰é¢œè‰²å¡«å……æ¨¡å¼ï¼Œè¿™é‡Œä¼ NULLCGColorSpaceRef colorSpace = CGColorSpaceCreatePattern(NULL);CGContextSetFillColorSpace(context, colorSpace);CGContextSetStrokeColorSpace(context, colorSpace);float alpha = 1;////æœ€åŽä¸€ä¸ªå‚æ•°å¯¹äºŽæœ‰é¢œè‰²ç“·ç –æŒ‡å®šä¸ºé€æ˜Žåº¦çš„å‚æ•°åœ°å€ï¼Œå¯¹äºŽæ— é¢œè‰²ç“·ç –åˆ™æŒ‡å®šå½“å‰é¢œè‰²ç©ºé—´å¯¹åº”çš„é¢œè‰²æ•°ç»„CGContextSetFillPattern(context, pattern, &amp;alpha);CGContextSetStrokePattern(context, pattern, &amp;alpha);//ç»˜åˆ¶CGContextFillRect(context, CGRectMake(0, 20, 155, 155));CGContextStrokeRectWithWidth(context, CGRectMake(165,20, 155, 155), 5);&#125; 3.10 æ€Žä¹ˆç»˜åˆ¶1åƒç´ çš„çº¿ Core Graphicsåšäº†å¤§é‡æ“ä½œï¼Œä¸€èˆ¬ä¸éœ€è¦å…³æ³¨x yåæ ‡ä¸­ç‚¹å’Œå®žé™…ä¸Šå±å¹•æ˜¾ç¤ºçš„åƒç´ å…³ç³»ï¼ åƒç´ åˆ°ç‚¹çš„è½¬åŒ–ï¼Œå¯ä»¥é€šè¿‡ é™¤ä»¥ UIViewçš„contentScaleFactorå±žæ€§ æœ€ç²¾ç¡®çš„æ–¹å¼ç»˜åˆ¶ä¸€æ¡æ°´å¹³æˆ–åž‚ç›´çš„çº¿æ¡çš„æ–¹å¼ä¸æ˜¯æè¾¹è·¯å¾„ï¼Œè€Œæ˜¯å¡«å……è·¯å¾„1CGContextFillRect(context, CGRectMake(0,0,1.0/self.contentScaleFactor,100)); 3.11 æ¯æ¬¡éƒ½setNeedsDisplayå¥½çƒ¦å‘€ å¯ä»¥é€šè¿‡ä¿®æ”¹viewçš„contentModeä¸ºUIViewContentModeRedrawï¼Œè¿™å°†å¼•èµ·ç¼“å­˜å†…å®¹çš„è‡ªåŠ¨ç¼©æ”¾å’Œé‡å®šä½è¢«å…³é—­ï¼Œæœ€ç»ˆç»“æžœæ˜¯è§†å›¾çš„setNeedsDisplayæ–¹æ³•å°†è¢«è°ƒç”¨ï¼Œè§¦å‘drawRectï¼šæ–¹æ³•é‡ç»˜è§†å›¾å†…å®¹ 1View.contentMode = UIViewContentModeRedraw; å¦‚æžœåªæ˜¯æš‚æ—¶è°ƒæ•´å¤§å°ï¼Œä¾‹å¦‚åŠ¨ç”»å˜å¤§å†è¿˜åŽŸï¼Œæ­£ç¡®è®¾ç½®contentModeçš„å€¼æ˜¯UIViewContentModeScaleToFillï¼Œè¢«ä¼¸ç¼©çš„å†…å®¹ä»…ä»…æ˜¯è§†å›¾å†…å®¹çš„ä¸€å‰¯ç¼“å­˜å›¾ç‰‡ï¼Œæ‰€ä»¥å®ƒè¿è¡Œèµ·æ¥ååˆ†çš„é«˜æ•ˆ]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CoreGraphics1ï¼šåŸºç¡€]]></title>
    <url>%2F2016%2F07%2F17%2FCoreGraphics1%EF%BC%9A%E5%9F%BA%E7%A1%80%2F</url>
    <content type="text"><![CDATA[åºï¼šCoreGraphics ä¸Ž Quartz 2D Core Graphicæ¡†æž¶æ˜¯ä¸€ç»„åŸºäºŽCçš„APIï¼ŒUIKitç”¨Core Graphicså°†â€œæ˜¾ç¤ºâ€ç»˜åˆ¶åœ¨å±å¹•ä¸Š Quartz 2D APIæ˜¯Core Graphicæ¡†æž¶çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤å…¶ä¸­çš„å¾ˆå¤šæ•°æ®ç±»åž‹å’Œæ–¹æ³•éƒ½æ˜¯ä»¥CGå¼€å¤´çš„ã€‚ä¼šç»å¸¸è§åˆ°Quartz 2Dï¼ˆQuartzï¼‰å’ŒCore Graphicsä¸¤ä¸ªæœ¯è¯­äº¤äº’ä½¿ç”¨ï¼Quartz 2Dä¸Žåˆ†è¾¨çŽ‡å’Œè®¾å¤‡æ— å…³ï¼Œå› æ­¤åœ¨ä½¿ç”¨Quartz 2Dç»˜å›¾æ—¶ï¼Œæ— éœ€è€ƒè™‘æœ€ç»ˆç»˜å›¾çš„ç›®æ ‡è®¾å¤‡ Core Graphicæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥å¼‚æ­¥ç»˜åˆ¶å›žè°ƒåˆ·æ–° å®˜æ–¹dome 1 Quartz 2Dæ•°æ®ç±»åž‹1.1 å¸¸ç”¨ç±»åž‹è§£é‡Š CGPathRefï¼šç”¨äºŽå‘é‡å›¾ï¼Œå¯åˆ›å»ºè·¯å¾„ï¼Œå¹¶è¿›è¡Œå¡«å……æˆ–æç”»(stroke) CGImageRefï¼šç”¨äºŽè¡¨ç¤ºbitmapå›¾åƒå’ŒåŸºäºŽé‡‡æ ·æ•°æ®çš„bitmapå›¾åƒé®ç½© CGLayerRefï¼šç”¨äºŽè¡¨ç¤ºå¯ç”¨äºŽé‡å¤ç»˜åˆ¶(å¦‚èƒŒæ™¯)å’Œå¹•åŽ (offscreen)ç»˜åˆ¶çš„ç»˜ç”»å±‚ CGShadingRefã€CGGradientRefï¼šç”¨äºŽç»˜åˆ¶æ¸å˜ CGFunctionRefï¼šç”¨äºŽå®šä¹‰å›žè°ƒå‡½æ•°ï¼Œè¯¥å‡½æ•°åŒ…å«ä¸€ä¸ªéšæœºçš„æµ®ç‚¹å€¼å‚æ•°ã€‚å½“ä¸ºé˜´å½±åˆ›å»ºæ¸å˜æ—¶ä½¿ç”¨è¯¥ç±»åž‹ CGColorRef, CGColorSpaceRefï¼šä¸€èˆ¬ç”¨[UIColor redColor].CGColorä¹‹ç±» CGImageSourceRef,CGImageDestinationRefï¼šç”¨äºŽåœ¨Quartzä¸­ç§»å…¥ç§»å‡ºæ•°æ® CGFontRefï¼šç”¨äºŽç»˜åˆ¶æ–‡æœ¬ CGPatternRefï¼šç”¨äºŽé‡ç»˜å›¾ 1.2 å†…å­˜ç®¡ç† è°å¼€è¾Ÿè°é‡Šæ”¾ï¼ˆç±»ä¼¼MRCåŽŸåˆ™ï¼‰ï¼Œä½¿ç”¨å«æœ‰â€Createâ€æˆ–â€œCopyâ€å•è¯çš„å‡½æ•°èŽ·å–ä¸€ä¸ªå¯¹è±¡ï¼Œå½“ä½¿ç”¨å®ŒåŽå¿…é¡»é‡Šæ”¾ xxxReleaseã€‚å…¶å®ƒæƒ…å†µä¸ç”¨é‡Šæ”¾ ä¹Ÿå¯ä»¥ç”¨è¿‡ retainå’Œrelease æ¥æŒæœ‰ä¸€ä¸ªå¯¹è±¡ ä¸èƒ½ä¼ NULLå€¼æ¥é‡Šæ”¾ï¼Œå¿…é¡»é€šè¿‡å¯¹åº”çš„releaseæ–¹æ³• 2 ä¸Šä¸‹æ–‡2.1 æ³¨æ„äº‹é¡¹ Quartzæä¾›äº† 5 ç§ç±»åž‹çš„ Graphics Contextã€‚Bitmap Graphics Contextã€PDF Graphics Contextã€Window Graphics Contextã€Layer Contextã€Post Graphics Contextã€‚ ä½¿ç”¨Core Graphicsä¹‹å‰éœ€è¦æŒ‡å®šä¸€ä¸ªç”¨äºŽç»˜å›¾çš„å›¾å½¢ä¸Šä¸‹æ–‡ï¼ˆCGContextRefï¼‰ é€šè¿‡drawRectã€drawRect: inContext å¯ç”¨UIGraphicsGetCurrentContextèŽ·å¾—å½“å‰UIViewçš„ç»˜å›¾ä¸Šä¸‹æ–‡ï¼Œç›´æŽ¥ç»˜å›¾ ä½¿ç”¨UIGraphicsBeginImageContextWithOptionsæ—¶ï¼Œä¸ä»…åˆ›å»ºäº†ä¸€ä¸ªç»˜å›¾ä¸Šä¸‹æ–‡ï¼Œå¹¶ä¸”è¯¥ä¸Šä¸‹æ–‡ä¹Ÿå±žäºŽå½“å‰ä¸Šä¸‹æ–‡ å›žè°ƒæ–¹æ³•æ‰€æŒæœ‰çš„contextï¼šå‚æ•°å¹¶ä¸ä¼šè®©ä»»ä½•ä¸Šä¸‹æ–‡æˆä¸ºå½“å‰å›¾å½¢ä¸Šä¸‹æ–‡ã€‚åªæ˜¯å¼•ç”¨äº†ä¸€ä¸‹ã€‚ å¦‚æžœæƒ³æŒæœ‰ä¸€ä¸ªåˆ«äººçš„contextæ—¶ï¼Œå¿…é¡»é€šè¿‡UIGraphicsPushContext å°†è¯¥ä¸Šä¸‹æ–‡è½¬åŒ–ä¸ºå½“å‰ä¸Šä¸‹æ–‡ï¼Œæœ€åŽé€šè¿‡UIGraphicsPopContextæ¢å¤ä¸Šä¸‹æ–‡çŽ¯å¢ƒ 2.2 èŽ·å–ä¸Šä¸‹æ–‡çš„æ–¹å¼ drawRectèŽ·å– ä¸åº”è¯¥æ‰‹åŠ¨è°ƒç”¨drawRectï¼šæ–¹æ³• åœ¨UIViewå­ç±»çš„drawRectï¼šæ–¹æ³•ä¸­æ— éœ€è°ƒç”¨super å¦‚æžœä½ æƒ³è°ƒç”¨drawRectï¼šæ–¹æ³•æ›´æ–°è§†å›¾ï¼Œåªéœ€å‘é€setNeedsDisplayæ–¹æ³• ä¸è¦è¦†ç›–drawRectï¼šä¾‹ï¼Œåœ¨UIImageViewå­ç±»ä¸­è¦†ç›–drawRectï¼šæ–¹æ³•æ˜¯ä¸åˆæ³•çš„ï¼Œä½ å°†å¾—ä¸åˆ°ä½ ç»˜åˆ¶çš„å›¾å½¢ã€‚ å½“è§†å›¾çš„backgroundColorä¸ºnilå¹¶ä¸”opaqueå±žæ€§ä¸ºYESï¼Œè§†å›¾çš„èƒŒæ™¯é¢œè‰²å°±ä¼šå˜æˆé»‘è‰² 12345- (void) drawRect: (CGRect) rect &#123; CGContextRef con = UIGraphicsGetCurrentContext();// ç”¨ä¸åˆ°å¯ä¸èŽ·å–ï¼Œä¾‹å¦‚ç›´æŽ¥ç”¨UIBezierPathç”»ä¸ªåœˆ// do something&#125; UIGraphicsBeginImageContextWithOptions 12345678910// sizeåŒºåŸŸå¤§å°ï¼Œopaqueæ˜¯å¦é€æ˜Žï¼Œscaleå±å¹•åˆ†è¾¨çŽ‡, 0è¡¨ç¤º [UIScreen mainScreen].scaleUIGraphicsBeginImageContextWithOptions(CGSizeMake(100,100), NO, 0); // UIGraphicsBeginImageContext(CGSize size);æ–¹æ³•ç›¸å½“äºŽopaqueå‚æ•°ä¸ºNO,scaleä¸º1.0ã€‚CGContextRef context = UIGraphicsGetCurrentContext();// ç”¨ä¸åˆ°å¯ä¸èŽ·å–ï¼Œä¾‹å¦‚ç›´æŽ¥ç”¨UIBezierPathç”»ä¸ªåœˆ// do something// only return a 8-bit per channel context in the DeviceRGB color space.UIImage* im = UIGraphicsGetImageFromCurrentImageContext(); UIGraphicsEndImageContext(); drawLayer:inContextï¼šæ²¡ç”¨è¿‡ 2.3 åæ ‡é—®é¢˜ Core GraphicsæºäºŽMac OS Xç³»ç»Ÿï¼Œåœ¨Mac OS Xä¸­Yè½´æ˜¯æœä¸Šçš„ï¼Œè€Œåœ¨iOSä¸­Yè½´æ˜¯æœä¸‹çš„ï¼Œæ­£å¥½ç›¸åï¼éœ€ç”¨CTMè½¬æ¢åˆ°ç›®æ ‡è®¾å¤‡ ä»¥ä¸‹æƒ…å†µä¸è¦CTMï¼Œä¸éœ€è¦è½¬æ¢ åˆ«äººç»™ä½ çš„ï¼Œå³å½“åšå‚æ•°ä¼ è¿‡æ¥çš„ï¼ŒåŒ…æ‹¬ç³»ç»Ÿåˆ›å»ºçš„ ä½¿ç”¨ UIGraphicsBeginImageContextWithOptions è¿”å›žçš„ç»˜å›¾ [UIImage imageWithCGImage:];è¿”å›žçš„ç»˜å›¾ 3 ç»˜å›¾3.1 ä¸€èˆ¬ç»˜å›¾æ¨¡å¼ ç»˜å›¾çš„ä¸€èˆ¬è¿‡ç¨‹æ˜¯å…ˆè®¾å®šå¥½å›¾å½¢ä¸Šä¸‹æ–‡å‚æ•°ï¼Œç„¶åŽç»˜å›¾ã€‚æ¯”æ–¹è¯´ï¼Œè¦ç”»ä¸€æ ¹çº¢çº¿ï¼ŒæŽ¥ç€ç”»ä¸€æ ¹è“çº¿ã€‚é‚£ä¹ˆé¦–å…ˆéœ€è¦å°†ä¸Šä¸‹æ–‡çš„çº¿æ¡é¢œè‰²å±žæ€§è®¾å®šä¸ºä¸ºçº¢è‰²ï¼Œç„¶åŽç”»çº¢çº¿ï¼›æŽ¥ç€è®¾ç½®ä¸Šä¸‹æ–‡çš„çº¿æ¡é¢œè‰²å±žæ€§ä¸ºè“è‰²ï¼Œå†ç”»å‡ºè“çº¿ã€‚è¡¨é¢ä¸Šçœ‹,çº¢çº¿å’Œè“çº¿æ˜¯åˆ†å¼€çš„ï¼Œä½†äº‹å®žä¸Šï¼Œåœ¨ä½ ç”»æ¯ä¸€æ¡çº¿æ—¶ï¼Œçº¿æ¡é¢œè‰²å´æ˜¯æ•´ä¸ªä¸Šä¸‹æ–‡çš„å±žæ€§ åœ¨ç»˜å›¾ä¹‹å‰è°ƒç”¨CGContextSaveGStateå‡½æ•°ä¿å­˜å½“å‰çŠ¶æ€ï¼ŒæŽ¥ç€æ ¹æ®éœ€è¦è®¾ç½®æŸäº›ä¸Šä¸‹æ–‡çŠ¶æ€ï¼Œç„¶åŽç»˜å›¾ï¼Œæœ€åŽè°ƒç”¨CGContextRestoreGStateå‡½æ•°å°†å½“å‰çŠ¶æ€æ¢å¤åˆ°ç»˜å›¾ä¹‹å‰çš„çŠ¶æ€ã€‚è¦æ³¨æ„çš„æ˜¯ï¼ŒCGContextSaveGStateå‡½æ•°å’ŒCGContextRestoreGStateå‡½æ•°å¿…é¡»æˆå¯¹å‡ºçŽ°ï¼Œå¦åˆ™ç»˜å›¾å¾ˆå¯èƒ½å‡ºçŽ°æ„æƒ³ä¸åˆ°çš„é”™è¯¯ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„åšæ³•é¿å…è¿™ç§æƒ…å†µã€‚ä»£ç å¦‚ä¸‹ï¼š12345678910- (void)drawRect:(CGRect)rect &#123;CGContextRef ctx = UIGraphicsGetCurrentContext();CGContextSaveGState(ctx);&#123;// ç»˜å›¾ä»£ç &#125;CGContextRestoreGState(ctx);&#125; 3.2 path è®¾ç½®èµ·ç‚¹ 1CGContextMoveToPoint(context, 0, 0); æ·»åŠ å‡ æ¡ç›´çº¿ 12345CGContextAddLineToPoint(context, 200, 0);CGPoint point2 = CGPointMake(200, 200);CGPoint point3 = CGPointMake(200, 0);CGPoint points[2] = &#123;point2, point3&#125;;CGContextAddLines(context, points, 2); è®¾ç½®è™šçº¿æ ·å¼ 12345CGFloat dashWidth = 5; // çº¿å®½åº¦CGFloat spaceWidth = 3; // é—´éš”å®½åº¦CGFloat lengths[2] = &#123;dashWidth, spaceWidth&#125;;// phaseè¡¨ç¤ºåœ¨ç¬¬ä¸€ä¸ªè™šçº¿ç»˜åˆ¶çš„æ—¶å€™è·³è¿‡å¤šå°‘ä¸ªç‚¹, lengths ç»˜åˆ¶è§„åˆ™ï¼Œcount è¡¨ç¤ºlengthsæ•°ç»„countCGContextSetLineDash(context, 0, lengths, 2); ç”»åœ†å½¢æˆ–çŸ©å½¢ 12345// ç”»ä¸€ä¸ªæ¤­åœ†æˆ–åœ†å½¢CGContextAddEllipseInRect(context, CGRectMake(0, 0, 100, 200));// ç”»ä¸€ä¸ªçŸ©å½¢CGContextAddRect(context, CGRectMake(200, 400, 100, 200));// CGContextAddRects ç”»åœ†å¼§ 1234// æ ¹æ®åœ†å½¢å’Œå¼§åº¦ç”»å¼§çº¿CGContextAddArc(context, 200, 200, 100, 0, M_PI_2, 0);// å½“å‰ç‚¹åˆ°(x1, y1)ï¼Œå½“å‰ç‚¹åˆ°(x2, y2)çš„ä¸¤æ¡åˆ‡çº¿ å’Œ åœ†å¼§åŠå¾„ç”»å¼§çº¿CGContextAddArcToPoint(context, 200, 400, 400, 400, 100); ç”»è´å¡žå°”æ›²çº¿ 1234// é€šè¿‡ä¸€ä¸ªæŽ§ç‚¹ç”»è´å¡žå°”æ›²çº¿CGContextAddQuadCurveToPoint(context, 0, 100, 200, 100);// é€šè¿‡ä¸¤ä¸ªæŽ§ç‚¹ç”»è´å¡žå°”æ›²çº¿CGContextAddCurveToPoint(context, 100, 400, 200, 300, 100, 200); ç”»è™šçº¿ 12345CGFloat dashWidth = 5; // çº¿å®½åº¦CGFloat spaceWidth = 3; // é—´éš”å®½åº¦CGFloat lengths[2] = &#123;dashWidth, spaceWidth&#125;;// phaseè¡¨ç¤ºåœ¨ç¬¬ä¸€ä¸ªè™šçº¿ç»˜åˆ¶çš„æ—¶å€™è·³è¿‡å¤šå°‘ä¸ªç‚¹, lengths ç»˜åˆ¶è§„åˆ™ï¼Œcount è¡¨ç¤ºlengthsæ•°ç»„countCGContextSetLineDash(context, 0, lengths, 2); çº¿çš„å±žæ€§ 1234567891011121314151617// è®¾ç½®çº¿å®½CGContextSetLineWidth(context, 20);// è®¾ç½®çº¿å¸½ï¼Œå³çº¿æ¡çš„èµ·å§‹ç‚¹æ ·å¼// kCGLineCapButtï¼šæ— ç«¯ç‚¹// kCGLineCapRoundï¼šåœ†å½¢ç«¯ç‚¹// kCGLineCapSquareï¼šæ–¹å½¢ç«¯ç‚¹ï¼ˆæ ·å¼ä¸Šå’ŒkCGLineCapButtæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æ¯”kCGLineCapButté•¿ä¸€ç‚¹ï¼‰CGContextSetLineCap(context, kCGLineCapButt);//è®¾ç½®çº¿æ¡çš„æ‹è§’çš„æ ·å¼// kCGLineJoinMiter, å°–è§’// kCGLineJoinRound, åœ†è§’// kCGLineJoinBevel ç¼ºè§’CGContextSetLineJoin(context, kCGLineJoinRound);//// kCGLineJoinMiter ä¸‹æœ€å¤§å€¾æ–œé•¿åº¦ï¼Œè¾¹è§’çš„è§’åº¦è¶Šå°ï¼Œæ–œæŽ¥é•¿åº¦å°±ä¼šè¶Šå¤§CGContextSetMiterLimit(context, 10); å¡«å……é¢œè‰² 12345678// çº¿æ¡é¢œè‰²(æè¾¹)// CGContextSetRGBStrokeColorã€CGContextSetGrayStrokeColoræ²¡ç”¨è¿‡CGContextSetStrokeColorWithColor(context, [UIColor redColor].CGColor);// å¡«å……é¢œè‰²// CGContextSetRGBFillColorã€CGContextSetGrayFillColorCGContextSetFillColorWithColor(context, [UIColor yellowColor].CGColor);// è®¾ç½®é¢œè‰²æ··åˆæ¨¡å¼CGContextSetBlendMode(context, kCGBlendModeNormal); é€æ˜Žåº¦ 1234// æ•´ä½“é€æ˜Žåº¦CGContextSetAlpha(context, 0.5);// æ“¦é™¤ä¸€ä¸ªåŒºåŸŸå†…çš„æ‰€æœ‰å·²å­˜åœ¨çš„ç»˜å›¾,ä¸Šä¸‹æ–‡é¢œè‰²å¦‚æžœä¸æ˜¯é€æ˜Žçš„ï¼Œå‰ªåˆ‡åŒºåŸŸæ˜¾ç¤ºé»‘è‰²ï¼Œå¦‚æžœæ˜¯é€æ˜Žçš„ï¼Œåˆ™æ˜¾ç¤ºé€æ˜Žçš„CGContextClearRect(context, CGRectMake(10, 10, 100, 200)); å¡«å……è·¯å¾„è§„åˆ™ 123456789101112131415// ä½¿ç”¨å¥‡å¶è§„åˆ™å¡«å……å½“å‰è·¯å¾„,ç­‰äºŽCGContextDrawPath(context, kCGPathFill);// CGContextEOFillPath(context);// ä½¿ç”¨éžé›¶ç»•æ•°è§„åˆ™å¡«å……å½“å‰è·¯å¾„// CGContextFillPath(context);// æ³¨æ„ï¼šCGContextStrokePath(context) å’Œ CGContextFillPath(context) ä¸èƒ½åŒæ—¶ä½¿ç”¨ã€‚CGContextStrokePath(context);/*kCGPathFill å¡«å……è·¯å¾„kCGPathEOFill ä½¿ç”¨å¥‡å¶è§„åˆ™å¡«å……è·¯å¾„kCGPathStroke æè¾¹è·¯å¾„kCGPathFillStroke å¡«å……å¹¶æè¾¹è·¯å¾„kCGPathEOFillStroke ä½¿ç”¨å¥‡å¶è§„åˆ™å¡«å……å¹¶æè¾¹*/CGContextDrawPath(context, kCGPathStroke); é—­åˆè·¯å¾„ 1234// é—­åˆè·¯å¾„ï¼Œå¦‚æžœä½ æ‰“ç®—å¡«å……ä¸€æ®µè·¯å¾„ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦ä½¿ç”¨è¯¥å‘½ä»¤ï¼Œå› ä¸ºè¯¥å‘½ä»¤ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚CGContextClosePath(context); // å½“ç”»å®Œä¸€éƒ¨åˆ†ï¼Œéœ€æŠ¬èµ·ç”»ç¬”ç”»å¦ä¸€éƒ¨åˆ†çš„æ—¶å€™ï¼ˆä¾‹ï¼šåŒå¿ƒåœ†ï¼‰éœ€CGContextBeginPath(context); æœ€åŽåˆ«å¿˜äº†é‡Šæ”¾å†…å­˜ 123// xxxReleaseCGColorRelease(color);CGFontRelease(cgFont);]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[UIBezierPathè¯¦è§£]]></title>
    <url>%2F2016%2F07%2F10%2FUIBezierPath%E8%AF%A6%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[UIBezierPath&emsp;&emsp;iOSé‡Œæ¶‰åŠåˆ°â€œè·¯å¾„â€ç»•ä¸å¼€UIBezierPathï¼ŒUIBezierPathå·²ç»æ»¡è¶³äº†ç»å¤§éƒ¨åˆ†çš„å¼€å‘éœ€æ±‚ï¼Œå»ºè®®å¤§å®¶è‡ªå·±åŠ¨æ‰‹åŽ»å®žéªŒä¸€ä¸‹ï¼Œçœ‹çœ‹åˆ°åº•ä»€ä¹ˆæ•ˆæžœï¼ &emsp;&emsp;ä¸€èˆ¬è‡ªå®šä¹‰è¯•å›¾çš„éƒ½éœ€è¦é‡å†™drawRectæ–¹æ³•123- (void)drawRect:(CGRect)rect &#123;// Drawing code&#125; 1.1 åˆå§‹åŒ–123456789101112131415161718192021222324252627282930313233+ (instancetype)bezierPath;// åˆå§‹åŒ–ä¸€ä¸ªçŸ©å½¢+ (instancetype)bezierPathWithRect:(CGRect)rect;/*åˆå§‹åŒ–ä¸€ä¸ªæ¤­åœ†rectçš„widthå’Œheightåˆ†åˆ«è¡¨ç¤ºæ¤­åœ†çš„é•¿è½´å’ŒçŸ­è½´ï¼Œå½“ç„¶å®½é«˜ç›¸ç­‰æ„å‘³ç€åœ†å½¢*/ + (instancetype)bezierPathWithOvalInRect:(CGRect)rect;/*åˆå§‹åŒ–ä¸€ä¸ªæ‰€æœ‰è§’éƒ½æ˜¯åœ†è§’çš„çŸ©å½¢cornerRadiusè¡¨ç¤ºåœ†è§’åŠå¾„*/ + (instancetype)bezierPathWithRoundedRect:(CGRect)rect cornerRadius:(CGFloat)cornerRadius; // rounds all corners with the same horizontal and vertical radius/*åˆå§‹åŒ–ä¸€ä¸ªæŒ‡å®šè§’ï¼ˆä¸€ä¸ªæˆ–å¤šä¸ªï¼‰æ˜¯åœ†è§’çš„çŸ©å½¢ï¼Œcornersæ˜¯åœ†è§’çš„ä½ç½®ï¼ŒcornerRadiusè¡¨ç¤ºåœ†è§’åŠå¾„*/ + (instancetype)bezierPathWithRoundedRect:(CGRect)rect byRoundingCorners:(UIRectCorner)corners cornerRadii:(CGSize)cornerRadii;/*æŒ‡å®šä¸­å¿ƒåŒ–ç”»åœ†å¼§center åœ†å¿ƒradius åœ†çš„åŠå¾„startAngle å’Œ endAngle å¼€å§‹å’Œç»“æŸçš„å¼§åº¦ï¼Œä¸€èˆ¬éƒ½ç”¨ M_PI å³180åº¦æ¥è®¡ç®—ï¼æ°´å¹³å‘å³æ˜¯0åº¦ï¼Œæ°´å¹³å‘å·¦å°±æ˜¯180åº¦å³M_PIclockwise clockæ—¶é’Ÿï¼Œclockwiseç”¨äºŽè¡¨ç¤ºé¡ºæ—¶é’ˆæ–¹å‘è¿˜æ˜¯é€†æ—¶é’ˆæ–¹å‘ç»˜åˆ¶*/ + (instancetype)bezierPathWithArcCenter:(CGPoint)center radius:(CGFloat)radius startAngle:(CGFloat)startAngle endAngle:(CGFloat)endAngle clockwise:(BOOL)clockwise;+ (instancetype)bezierPathWithCGPath:(CGPathRef)CGPath; 1.2 æž„é€ path1234567891011121314151617181920212223242526272829303132333435363738394041/*å½“å‰æœ‰æ­£åœ¨ç»˜åˆ¶çš„å­è·¯å¾„, è¯¥æ–¹æ³•åˆ™ä¼šéšå¼çš„ç»“æŸå½“å‰è·¯å¾„ï¼Œå¹¶å°†å½“å‰ç‚¹è®¾ç½®ä¸ºç»ˆç‚¹å½“ä¸Šä¸€æ¡å­è·¯å¾„è¢«ç»ˆæ­¢, è¯¥æ–¹æ³•å¹¶ä¸ä¼šåŽ»é—­åˆä¸Šä¸€æ¡å­è·¯å¾„ï¼Œå³å­è·¯å¾„èµ·ç‚¹ç»ˆç‚¹æ²¡è¿žæŽ¥å¤§éƒ¨åˆ†æƒ…å†µä¸‹ç»˜åˆ¶ç›´çº¿æˆ–æ›²çº¿ä¹‹å‰, éœ€è¦å…ˆè°ƒç”¨è¿™ä¸ªæ–¹æ³•.*/ - (void)moveToPoint:(CGPoint)point;// æ·»åŠ ä¸€æ¡ç›´çº¿ï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯èµ·ç‚¹æ˜¯ä¸Šæ–‡æä¾›çš„ï¼Œä¸Šæ–‡çš„ç»ˆç‚¹å³æ­¤æ¬¡çš„èµ·ç‚¹- (void)addLineToPoint:(CGPoint)point;/*ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•æ˜¯ç”¨äºŽç»˜åˆ¶è´å¡žå°”æ›²çº¿ï¼è¯´å®žè¯ï¼Œç½‘ä¸Šå…¶ä»–çš„ä»‹ç»éƒ½æ˜¯ç›—å›¾ç›´æŽ¥ä¸Šï¼Œè°ˆä¸ä¸Šç†è§£ï¼è€Œæˆ‘é«˜æ•°æ—©å°±è¿˜ç»™è€å¸ˆäº†ï¼Œä¸çŒ®ä¸‘äº†ä½†åˆ†äº«ä¸€ä¸ªcssçš„è°ƒè¯•ç½‘ç«™ï¼šhttps://cubic-bezier.com/#.17,.67,.83,.67*/ - (void)addCurveToPoint:(CGPoint)endPoint controlPoint1:(CGPoint)controlPoint1 controlPoint2:(CGPoint)controlPoint2;- (void)addQuadCurveToPoint:(CGPoint)endPoint controlPoint:(CGPoint)controlPoint;/*æ·»åŠ ä¸€æ®µåœ†å¼§center åœ†å¿ƒradius åœ†çš„åŠå¾„startAngle å’Œ endAngle å¼€å§‹å’Œç»“æŸçš„å¼§åº¦ï¼Œä¸€èˆ¬éƒ½ç”¨ M_PI å³180åº¦æ¥è®¡ç®—ï¼æ°´å¹³å‘å³æ˜¯0åº¦ï¼Œæ°´å¹³å‘å·¦å°±æ˜¯180åº¦å³M_PIclockwise clockæ—¶é’Ÿï¼Œclockwiseç”¨äºŽè¡¨ç¤ºé¡ºæ—¶é’ˆæ–¹å‘è¿˜æ˜¯é€†æ—¶é’ˆæ–¹å‘ç»˜åˆ¶*/ - (void)addArcWithCenter:(CGPoint)center radius:(CGFloat)radius startAngle:(CGFloat)startAngle endAngle:(CGFloat)endAngle clockwise:(BOOL)clockwise NS_AVAILABLE_IOS(4_0);// é—­åˆè·¯å¾„ï¼Œç»ˆç‚¹å’Œèµ·ç‚¹è¿žä¸€æ¡ç›´çº¿- (void)closePath;// ç§»é™¤æ‰€æœ‰çš„æŽ§åˆ¶ç‚¹ï¼Œä¹Ÿå°±æ˜¯åˆ é™¤äº†æ‰€æœ‰çš„å­è·¯å¾„- (void)removeAllPoints;// æ·»åŠ å¦ä¸€ä¸ªè·¯å¾„ã€‚å¾ˆé‡è¦çš„æ–¹æ³•- (void)appendPath:(UIBezierPath *)bezierPath;// åè½¬è·¯å¾„ï¼šå½¢çŠ¶ä¸€æ ·ï¼Œç»˜åˆ¶æ–¹å‘ç›¸å- (UIBezierPath *)bezierPathByReversingPath NS_AVAILABLE_IOS(6_0);// ç”¨æŒ‡å®šçš„ä»¿å°„å˜æ¢çŸ©é˜µå˜æ¢è·¯å¾„çš„æ‰€æœ‰ç‚¹- (void)applyTransform:(CGAffineTransform)transform; 1.3 Path info123456789101112131415161718192021// Returns an immutable CGPathRef which is only valid until the UIBezierPath is further mutated.// Setting the path will create an immutable copy of the provided CGPathRef, so any further mutations on a provided CGMutablePathRef will be ignored./*å®˜æ–¹è§£é‡Šå¾ˆæ¸…æ¥šäº†1ã€CGPathçš„getterå…¶å®žæ˜¯å½“å‰è¿™ä¸€åˆ»çš„è·¯å¾„ä¿¡æ¯2ã€CGPathå¯ç†è§£ä¸ºcopyä¿®é¥°çš„ä¸å¯å˜å¯¹è±¡*/@property(nonatomic) CGPathRef CGPath;- (CGPathRef)CGPath NS_RETURNS_INNER_POINTER CF_RETURNS_NOT_RETAINED;// è·¯å¾„æ˜¯å¦ä¸ºç©ºã€‚éœ€è¦æ³¨æ„çš„æ˜¯å°±ç®—åªè°ƒç”¨äº† moveToPoint æ–¹æ³•å½“å‰è·¯å¾„ä¹Ÿä¸ä¸ºç©º.@property(readonly,getter=isEmpty) BOOL empty;// ä¸€ä¸ªèƒ½è¦†ç›–æ‰€æœ‰æŽ§åˆ¶ç‚¹çš„æœ€å°çŸ©å½¢ï¼ŒåŒ…æ‹¬è´å¡žå°”æ›²çº¿çš„æŽ§åˆ¶ç‚¹1ã€2@property(nonatomic,readonly) CGRect bounds;// å½“å‰ç‚¹ï¼Œç”¨ç¬”ç”»ç”»ï¼Œå½“å‰ç¬”å°–çš„ä½ç½®ï¼æ¯æ¬¡moveã€addå’Œappendç­‰éƒ½ä¼šæ›´æ–°currentPoint@property(nonatomic,readonly) CGPoint currentPoint;// é—­åˆè·¯å¾„æ˜¯å¦åŒ…å«ï¼ˆè¾¹æ¡†å’Œå†…éƒ¨ï¼‰æŸä¸ªç‚¹ï¼Œå¼€æ”¾è·¯å¾„åªæ£€æµ‹æ˜¯å¦åœ¨è¾¹æ¡†ä¸Š- (BOOL)containsPoint:(CGPoint)point; 1.4 Drawing properties123456789101112131415161718192021222324252627282930313233343536// çº¿å®½@property(nonatomic) CGFloat lineWidth;/*çº¿å¤´æ ·å¼kCGLineCapButt, // é»˜è®¤kCGLineCapRound, // åœ†è§’kCGLineCapSquare // æ­£æ–¹å½¢*/@property(nonatomic) CGLineCap lineCapStyle;/* çº¿è¿žæŽ¥å¤„æ ·å¼kCGLineJoinMiter, // é»˜è®¤kCGLineJoinRound, // åœ†æ¶¦kCGLineJoinBevel // æ–œè§’*/@property(nonatomic) CGLineJoin lineJoinStyle;// æœ€å¤§æ–œæŽ¥é•¿åº¦ åªåœ¨lineJoinStyle æ˜¯ kCGLineJoinMiteræ—¶ä½¿ç”¨@property(nonatomic) CGFloat miterLimit; // å¼¯æ›²è·¯å¾„çš„æ¸²æŸ“ç²¾åº¦ï¼Œé»˜è®¤ä¸º0.6ï¼Œè¶Šå°ç²¾åº¦è¶Šé«˜ï¼Œç›¸åº”çš„æ›´åŠ æ¶ˆè€—æ€§èƒ½ã€‚@property(nonatomic) CGFloat flatness;// å•åŒæ•°åœˆè§„åˆ™æ˜¯å¦ç”¨äºŽç»˜åˆ¶è·¯å¾„ï¼Œé»˜è®¤æ˜¯NO@property(nonatomic) BOOL usesEvenOddFillRule; // Default is NO. When YES, the even-odd fill rule is used for drawing, clipping, and hit testing./*è®¾ç½®è™šçº¿pattern Cè¯­è¨€ç±»åž‹çš„æ•°ç»„count patternæ•°ç»„çš„ä¸ªæ•°phase èµ·å§‹ä½ç½®*/- (void)setLineDash:(nullable const CGFloat *)pattern count:(NSInteger)count phase:(CGFloat)phase;// æ£€ç´¢çº¿æ®µç±»åž‹- (void)getLineDash:(nullable CGFloat *)pattern count:(nullable NSInteger *)count phase:(nullable CGFloat *)phase; 1.5 å…¶ä»–123456789101112131415// å¡«å……é¢œè‰²- (void)fill;// è·¯å¾„ç»˜åˆ¶- (void)stroke;// These methods do not affect the blend mode or alpha of the current graphics context// ç”¨æŒ‡å®šçš„æ··åˆæ¨¡å¼å’Œé€æ˜Žåº¦å€¼æ¥æç»˜å—æŽ¥æ”¶è·¯å¾„æ‰€åŒ…å›´çš„åŒºåŸŸ- (void)fillWithBlendMode:(CGBlendMode)blendMode alpha:(CGFloat)alpha;// ä½¿ç”¨æŒ‡å®šçš„æ··åˆæ¨¡å¼å’Œé€æ˜Žåº¦å€¼æ²¿ç€æŽ¥æ”¶å™¨è·¯å¾„ã€‚ç»˜åˆ¶ä¸€è¡Œ- (void)strokeWithBlendMode:(CGBlendMode)blendMode alpha:(CGFloat)alpha;// å‰ªåˆ‡è¢«æŽ¥æ”¶è€…è·¯å¾„åŒ…å›´çš„åŒºåŸŸè¯¥è·¯å¾„æ˜¯å¸¦æœ‰å‰ªåˆ‡è·¯å¾„çš„å½“å‰ç»˜å›¾ä¸Šä¸‹æ–‡ã€‚ä½¿å¾—å…¶æˆä¸ºæˆ‘ä»¬å½“å‰çš„å‰ªåˆ‡è·¯å¾„- (void)addClip; CGPath&emsp;&emsp;CGPathçš„å¤§éƒ¨åˆ†ç”¨æ³•å’ŒUIBezierPathå·®ä¸å¤šï¼Œæ„Ÿå…´è¶£çš„ç«¥éž‹å¯ä»¥è‡ªå·±åŽ»çœ‹çœ‹ï¼ä¸€çœ¼å°±èƒ½çœ‹æ‡‚ï¼Œä¸ªåˆ«éœ€è¦æ³¨æ„çš„ï¼š1ã€ç”±äºŽCGæ²¡æœ‰ARCï¼Œéœ€è¦æ‰‹åŠ¨é‡Šæ”¾CGReleaseï¼›2ã€CGMutablePathRefæ‰èƒ½è¿›è¡Œmoveã€addç­‰æ“ä½œï¼›]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ‰‹åŠ¿2ï¼šè¿›é˜¶]]></title>
    <url>%2F2016%2F06%2F24%2F%E6%89%8B%E5%8A%BF2%EF%BC%9A%E8%BF%9B%E9%98%B6%2F</url>
    <content type="text"><![CDATA[1 UIGestureRecognizer&emsp;&emsp;æ‰‹åŠ¿è¯†åˆ«å™¨ï¼Œå‰é¢ä»‹ç»çš„åŸºæœ¬æ‰‹åŠ¿çš„çˆ¶ç±»ï¼Œæ³¨æ„UIGestureRecognizer : NSObject UIGestureRecognizerState å®˜æ–¹æ³¨é‡Šç¿»è¯‘ 1234567UIGestureRecognizerStatePossible, // é»˜è®¤ï¼Œè¿˜æ²¡è¯†åˆ«ï¼Œå¯èƒ½æ­£åœ¨éåŽ†runloopUIGestureRecognizerStateBegan, // æ‰‹åŠ¿å¼€å§‹è¢«è¯†åˆ«ï¼Œä¸‹ä¸ªrunloopä¼šå›žè°ƒæ–¹æ³•UIGestureRecognizerStateChanged, // æ‰‹åŠ¿è¯†åˆ«å‘ç”Ÿæ”¹å˜çš„çŠ¶æ€ï¼Œä¸‹ä¸ªrunloopä¼šå›žè°ƒæ–¹æ³•UIGestureRecognizerStateEnded, // æ‰‹åŠ¿è¯†åˆ«ç»“æŸï¼Œä¸‹ä¸ªrunloopä¼šå›žè°ƒæ–¹æ³•ï¼Œé‡ç½®ä¸ºUIGestureRecognizerStatePossibleUIGestureRecognizerStateCancelled, // æ‰‹åŠ¿è¯†åˆ«å–æ¶ˆï¼Œä¸‹ä¸ªrunloopä¼šå›žè°ƒæ–¹æ³•ï¼Œé‡ç½®ä¸ºUIGestureRecognizerStatePossibleUIGestureRecognizerStateFailed, // è¯†åˆ«å¤±è´¥ï¼Œæ–¹æ³•å°†ä¸ä¼šè¢«è°ƒç”¨ï¼Œé‡ç½®ä¸ºUIGestureRecognizerStatePossibleUIGestureRecognizerStateRecognized = UIGestureRecognizerStateEnded UIGestureRecognizerStateChangedä¸ºå•¥æ€»è°ƒ 1https://stackoverflow.com/questions/14227465/whats-the-different-between-uigesturerecognizerstatechanged-and-touchesmoved?r=SearchResults æ˜¯å¦æ‰‹åŠ¿éƒ½æœ‰UIGestureRecognizerStateBeganï¼Ÿå¦ 1234567// UITapGestureRecognizer åªæœ‰ä¸€ä¸ªUIGestureRecognizerStateEndedçŠ¶æ€// UIGestureRecognizerStateçš„å®˜æ–¹è§£é‡Šå¦‚ä¸‹// Discrete Gestures â€“ gesture recognizers that recognize a discrete event but do not report changes (for example, a tap) do not transition through the Began and Changed states and can not fail or be cancelled// éžè¿žç»­æ‰‹åŠ¿æ²¡æœ‰beginï¼Œchangedçš„è¿‡æ¸¡ï¼Œä¹Ÿä¸èƒ½å¤±è´¥æˆ–å–æ¶ˆ// äº‹å®žä¸ŠUIGestureRecognizerStateè¡¨ç¤ºå¯èƒ½çš„çŠ¶æ€ï¼Œä¸è¦è¢«beginï¼Œchangedï¼Œendç­‰å­—çœ¼è¿·æƒ‘ å‡ ä¸ªå®¹æ˜“ä¹±çš„å±žæ€§ @property(nullable, nonatomic,readonly) UIView *view; // è¡¨ç¤ºæ·»åŠ æ‰‹åŠ¿çš„viewï¼Œå¹¶ä¸æ˜¯å“åº”è¿žä¸Šçš„view @property(nonatomic) BOOL cancelsTouchesInView; // é»˜è®¤YESï¼Œå³ä¸€æ—¦å“åº”æ‰‹åŠ¿å°±ç»ˆæ­¢å“åº”è¿ž @property(nonatomic) BOOL delaysTouchesBegan;// é»˜è®¤ä¸ºNOï¼Œä¸ä¼šå»¶è¿Ÿå“åº”è§¦æ‘¸äº‹ä»¶ï¼Œå¦‚æžœæˆ‘ä»¬è®¾ç½®ä¸ºYESï¼Œåœ¨æ‰‹åŠ¿æ²¡æœ‰è¢«è¯†åˆ«å¤±è´¥å‰ï¼Œéƒ½ä¸ä¼šç»™äº‹ä»¶ä¼ é€’é“¾å‘é€æ¶ˆæ¯ã€‚ @property(nonatomic) BOOL delaysTouchesEnded;//é»˜è®¤ä¸ºYESï¼Œæ‰‹åŠ¿è¯†åˆ«å¤±è´¥ç«‹é©¬è°ƒç”¨touchEnd:withEventã€‚è®¾ç½®ä¸ºNOï¼Œä¼šç­‰å¾…ä¸€ä¸ªå¾ˆçŸ­çš„æ—¶é—´ï¼Œå¦‚æžœæ²¡æœ‰æŽ¥æ”¶åˆ°æ–°çš„æ‰‹åŠ¿è¯†åˆ«ä»»åŠ¡ï¼Œæ‰ä¼šå‘é€touchesEndedæ¶ˆæ¯åˆ°äº‹ä»¶ä¼ é€’é“¾ã€‚ iOS9ä¹‹åŽçš„ @property(nonatomic, copy) NSArray *allowedTouchTypes NS_AVAILABLE_IOS(9_0); // Array of UITouchTypes as NSNumbers. @property(nonatomic, copy) NSArray *allowedPressTypes NS_AVAILABLE_IOS(9_0); // Array of UIPressTypes as NSNumbers. 123456typedef NS_ENUM(NSInteger, UITouchType) &#123;UITouchTypeDirect, // A direct touch from a finger (on a screen)UITouchTypeIndirect, // An indirect touch (not a screen)UITouchTypePencil NS_AVAILABLE_IOS(9_1), // Add pencil name variantUITouchTypeStylus NS_AVAILABLE_IOS(9_1) = UITouchTypePencil, // A touch from a stylus (deprecated name, use pencil)&#125; NS_ENUM_AVAILABLE_IOS(9_0); @property (nonatomic) BOOL requiresExclusiveTouchType NS_AVAILABLE_IOS(9_2); // defaults to YES 12345// Indicates whether the gesture recognizer will consider touches of different touch types simultaneously.// If NO, it receives all touches that match its allowedTouchTypes.// NO, åŒä¸€æ—¶åˆ»æŽ¥æ”¶æ‰€æœ‰å…è®¸çš„è§¦æ‘¸ç±»åž‹// If YES, once it receives a touch of a certain type, it will ignore new touches of other types, until it is reset to UIGestureRecognizerStatePossible.// YES, åŒä¸€æ—¶åˆ»åªæŽ¥å—ä¸€ç§è§¦æ‘¸ç±»åž‹ ä¸¤ä¸ªæ–¹æ³• è®¾ç½®æ‰‹åŠ¿ä¼˜å…ˆçº§ requireGestureRecognizerToFail 123456789101112131415161718192021222324// [A requireGestureRecognizerToFailï¼šB] ä¼˜å…ˆå“åº”Bï¼Œå†å°è¯•å“åº”Aï¼Œéƒ½å¤±è´¥çš„è¯åˆ™å“åº”å¤±è´¥// å®žçŽ°ä¸€ä¸ªViewï¼Œå³å“åº”åŒå‡»ï¼Œåˆå“åº”å•å‡»// å‚è€ƒï¼šhttps://stackoverflow.com/questions/8876202/uitapgesturerecognizer-single-tap-and-double-tap?r=SearchResults- (void)addSingleAndDoubleTapGestureRecognizersToView:(UIView *)view &#123;// single tap UITapGestureRecognizer *singleTapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget: tableViewController action: @selector(handleSingleTapOnView:)]; // must set 1 [singleTapRecognizer setNumberOfTouchesRequired:1];[view addGestureRecognizer: singleTapRecognizer];// double tap UITapGestureRecognizer *doubleTapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget: tableViewController action: @selector (handleDoubleTapOnView:)]; // must set 2[doubleTapRecognizer setNumberOfTouchesRequired:2]; [singleTapRecognizer requireGestureRecognizerToFail: doubleTapRecognizer];[view addGestureRecognizer: doubleTapRecognizer]; &#125;- (void)handleSingleTapOnView:(id)sender&#123;&#125;- (void)handleDoubleTapOnView:(id)sender&#123;&#125; æ‰‹æŒ‡åœ¨viewä¸­çš„ä½ç½® 1234567891011121314151617// å•ç‚¹ä½ç½®UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tap:)];[imageView addGestureRecognizer:tap];- (void)tap:(UITapGestureRecognizer *)tapGesture &#123;CGPoint location = [tapGesture locationInView:self.view];&#125;// å¤šæ ¹æ‰‹æŒ‡UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tap:)];tap.numberOfTouchesRequired = 2;[imageView addGestureRecognizer:tap];- (void)tap:(UITapGestureRecognizer *)tapGesture &#123;NSInteger touchsCount = [tapGesture numberOfTouches];for (int index = 0; index &lt; touchsCount; index++) &#123;CGPoint point = [tapGesture locationOfTouch:index inView:self.view];&#125;&#125; 2 UIGestureRecognizerDelegate æ˜¯å¦è¯†åˆ«æ‰‹åŠ¿ 12345678//å°†è¦å¼€å§‹æ—¶è°ƒç”¨ï¼ˆPossibleå°†è¦å˜æˆBeganï¼‰ï¼Œè¿”å›žNOï¼Œåˆ™æ‰‹åŠ¿è¯†åˆ«å¤±è´¥- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer;// touchesBegan:withEvent:ä¹‹å‰è°ƒç”¨ï¼Œè¿”å›žNOï¼Œåˆ™æ‰‹åŠ¿ä¸è¯†åˆ«è¿™ä¸ªtouch- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch;// pressesBegan:withEvent:ä¹‹å‰è°ƒç”¨ï¼Œè¿”å›žNOï¼Œåˆ™æ‰‹åŠ¿ä¸è¯†åˆ«è¿™ä¸ªpress- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceivePress:(UIPress *)press; å¤šæ‰‹åŠ¿å†²çªæ€Žä¹ˆåŠž 12345678910111213141516171819//æ˜¯å¦æ”¯æŒåŒæ—¶å¤šä¸ªæ‰‹åŠ¿è§¦å‘,é»˜è®¤NO//è¿”å›žYESï¼Œåˆ™å¯ä»¥å¤šä¸ªæ‰‹åŠ¿ä¸€èµ·è§¦å‘æ–¹æ³•ï¼Œè¿”å›žNOåˆ™ä¸ºäº’æ–¥, ä½†ä¸ä¿è¯ä¸€å®šäº’æ–¥ï¼Œå› ä¸ºotherGestureRecognizerå¯èƒ½è¿”å›žYES- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer;//è¿”å›žYESï¼Œç¬¬äºŒä¸ªæ‰‹åŠ¿çš„ä¼˜å…ˆçº§é«˜äºŽç¬¬ä¸€ä¸ªæ‰‹åŠ¿- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRequireFailureOfGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer //è¿”å›žYESï¼Œç¬¬ä¸€ä¸ªæ‰‹åŠ¿çš„ä¼˜å…ˆçº§é«˜äºŽç¬¬äºŒä¸ªæ‰‹åŠ¿- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldBeRequiredToFailByGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer// æ‰€ä»¥ä¸ºä»€ä¹ˆè¦è®¾ç½®ä¸¤ä¸ªæ–¹æ³•å‘¢ï¼Ÿä¸€ä¸ªæ–¹æ³•è¿”å›žYESæˆ–NOä¸å°±è¡Œäº†ï¼Ÿå› ä¸ºè¿”å›žYESèƒ½ä¿è¯ä¼˜å…ˆçº§æ”¹å˜ï¼Œä½†è¿”å›žNOä¸ä¿è¯ä¼˜å…ˆçº§ï¼Œå› ä¸ºå…¶ä»–çš„å¯èƒ½è¿”å›žNO// note: returning YES is guaranteed to set up the failure requirement. returning NO does not guarantee that there will not be a failure requirement as the other gesture&apos;s counterpart delegate or subclass methods may return YES è‡ªå®šä¹‰æ‰‹åŠ¿1 ç»„åˆ é€šè¿‡ç»„åˆå¤šæ‰‹åŠ¿å’Œä¼˜å…ˆçº§å®žçŽ°å¤æ‚æ‰‹åŠ¿æ“ä½œ1// ç•¥ï¼Œå‚è§ä¸Šæ–‡ requireGestureRecognizerToFail éƒ¨åˆ†ä»£ç  2 æ‰©å±• å®žçŽ°ä¸€ä¸ªåªèƒ½æ¨ªå‘æˆ–çºµå‘çš„æ‹–åŠ¨æ‰‹åŠ¿1234567891011121314// å‚è€ƒï¼šhttps://stackoverflow.com/questions/7100884/uipangesturerecognizer-only-vertical-or-horizontal?r=SearchResultsUIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(pan:)];pan.delegate = self;[imageView addGestureRecognizer:pan];- (void)pan:(UIPanGestureRecognizer *)panGesture &#123;&#125;- (BOOL)gestureRecognizerShouldBegin:(UIPanGestureRecognizer *)panGestureRecognizer &#123;CGPoint velocity = [panGestureRecognizer velocityInView:self.view];return fabs(velocity.y) &gt; fabs(velocity.x);&#125; 3 è‡ªå®šä¹‰ ä¸»è¦æ­¥éª¤ 123456781ã€åˆ›å»ºä¸€ä¸ªUIGestureRecognizerçš„å­ç±»2ã€åŒ…å«å¤´æ–‡ä»¶#import &lt;UIKit/UIGestureRecognizerSubclass.h&gt;3ã€ä½¿ç”¨touchç›¸å…³æ–¹æ³•åˆ¤æ–­æ‰‹æŒ‡è½¨è¿¹- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event;- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event;4ã€è½¨è¿¹å®ŒæˆåŽè®¾ç½®self.state = UIGestureRecognizerStateEnded;å°±ä¼šè‡ªåŠ¨è°ƒç”¨ç›¸å…³å›žè°ƒ ä¾‹ï¼šå®žçŽ°ä¸€ä¸ªæ¾å¼€è°ƒç”¨çš„tapç±» 123456789101112131415161718192021222324252627282930313233343536373839// å‚è€ƒ: https://stackoverflow.com/questions/15628133/uitapgesturerecognizer-make-it-work-on-touch-down-not-touch-up?r=SearchResultsTouchDownGestureRecognizer.h#import &lt;UIKit/UIKit.h&gt;@interface TouchDownGestureRecognizer : UIGestureRecognizer@endTouchDownGestureRecognizer.m#import &quot;TouchDownGestureRecognizer.h&quot;#import &lt;UIKit/UIGestureRecognizerSubclass.h&gt;@implementation TouchDownGestureRecognizer-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event&#123;if (self.state == UIGestureRecognizerStatePossible) &#123;self.state = UIGestureRecognizerStateRecognized;&#125;&#125;-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event&#123;self.state = UIGestureRecognizerStateFailed;&#125;-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event&#123;self.state = UIGestureRecognizerStateFailed;&#125;@endimplementation:#import &quot;TouchDownGestureRecognizer.h&quot;TouchDownGestureRecognizer *touchDown = [[TouchDownGestureRecognizer alloc] initWithTarget:self action:@selector(handleTouchDown:)];[yourView addGestureRecognizer:touchDown];-(void)handleTouchDown:(TouchDownGestureRecognizer *)touchDown&#123;NSLog(@&quot;Down&quot;);&#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ‰‹åŠ¿1ï¼šå¸¸ç”¨]]></title>
    <url>%2F2016%2F06%2F23%2F%E6%89%8B%E5%8A%BF1%EF%BC%9A%E5%B8%B8%E7%94%A8%2F</url>
    <content type="text"><![CDATA[1 ç‚¹æŒ‰æ‰‹åŠ¿ UITapGestureRecognizer åˆ›å»º 1234567// åˆ›å»ºä¸¤æ ¹æ‰‹æŒ‡ï¼Œè¿žç»­ç‚¹å‡»ä¸‰æ¬¡çš„æ‰‹åŠ¿ï¼Œå¸¸ç”¨äºŽè°ƒå‡ºè°ƒè¯•é¡µé¢ç­‰UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tap:)];// ç‚¹å‡»æ•°ï¼ŒDefault is 1.tap.numberOfTapsRequired = 3;// æ‰‹æŒ‡æ•°ï¼ŒDefault is 1..tap.numberOfTouchesRequired = 2;[view addGestureRecognizer:tap]; å›žè°ƒ 123- (void)tap:(UITapGestureRecognizer *)tapGesture&#123;NSLog(@&quot;è°ƒå‡ºè°ƒè¯•é¡µé¢&quot;);&#125; 2 æ‹–æ‹½æ‰‹åŠ¿ UIPanGestureRecognizer å®žçŽ° 123456UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(pan:)];// default is 1. the minimum number of touches required to matchpan.minimumNumberOfTouches = 1;// default is UINT_MAX. the maximum number of touches that can be downpan.maximumNumberOfTouches = 1;[view addGestureRecognizer:pan]; ä»£ç† 1234567891011- (void)pan:(UIPanGestureRecognizer *)panGesture &#123;// translationInView : æ‰‹æŒ‡åœ¨è§†å›¾ä¸Šç§»åŠ¨çš„åç§»é‡CGPoint point1 = [panGesture translationInView:self.view];NSLog(@&quot;translationInView x: %f y:%f&quot;,point1.x , point1.y);// locationInView ï¼š æ‰‹æŒ‡åœ¨è§†å›¾ä¸Šçš„ä½ç½®CGPoint point2 = [panGesture locationInView:self.view];NSLog(@&quot;locationInView x: %f y:%f&quot;,point2.x , point2.y);// velocityInViewï¼š æ‰‹æŒ‡åœ¨è§†å›¾ä¸Šç§»åŠ¨çš„é€Ÿåº¦, æ­£è´Ÿä¹Ÿæ˜¯ä»£è¡¨æ–¹å‘ï¼ŒCGPoint point3 = [panGesture velocityInView:self.view];NSLog(@&quot;velocityInView x: %f y:%f&quot;,point3.x , point3.y);&#125; 3 æ¸…æ‰«æ‰‹åŠ¿ UISwipeGestureRecognizer å®žçŽ° 12345678910111213UISwipeGestureRecognizer *swipeUp = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipe:)];// æ‰‹æŒ‡æ•°ï¼Œdefault is 1swipeUp.numberOfTouchesRequired = 1;// æ³¨æ„ï¼Œæ‰‹åŠ¿æ–¹å‘è™½ç„¶æ˜¯NS_OPTIONSï¼Œä½†ä¸è¦ä½¿ç”¨ æˆ– æ–¹å¼è®¾ç½®ï¼Œç½‘ä¸Šéƒ½æ˜¯é”™çš„// https://stackoverflow.com/questions/3319209/setting-direction-for-uiswipegesturerecognizer// swipeUp.direction = UISwipeGestureRecognizerDirectionUp | UISwipeGestureRecognizerDirectionDown;// æ‰‹åŠ¿æ–¹å‘åªæ˜¯è¯†åˆ«ä¸€ä¸ªæ–¹å‘ï¼Œéœ€è¦å¤šä¸ªæ–¹å‘å¯è®¾ç½®å¤šä¸ªæ¸…æ‰«æ‰‹åŠ¿ï¼Œå®žçŽ°ä¸€ä¸ªä»£ç†swipeUp.direction = UISwipeGestureRecognizerDirectionUp | UISwipeGestureRecognizerDirectionDown;[view addGestureRecognizer: swipeUp];UISwipeGestureRecognizer *swipeDown = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipe:)];swipeDown.direction = UISwipeGestureRecognizerDirectionDown;[view addGestureRecognizer: swipeDown]; ä»£ç† 12345678910111213141516- (void)swipe:(UISwipeGestureRecognizer *)swipeGesture&#123;switch (swipeGesture.direction) &#123;case UISwipeGestureRecognizerDirectionLeft:NSLog(@&quot;å‘å·¦æ¸…æ‰«&quot;);break;case UISwipeGestureRecognizerDirectionRight:NSLog(@&quot;å‘å³æ¸…æ‰«&quot;);break;case UISwipeGestureRecognizerDirectionUp:NSLog(@&quot;å‘ä¸Šæ¸…æ‰«&quot;);break;case UISwipeGestureRecognizerDirectionDown:NSLog(@&quot;å‘ä¸‹æ¸…æ‰«&quot;);break;&#125;&#125; 4 é•¿æŒ‰æ‰‹åŠ¿ UILongPressGestureRecognizer å®žçŽ° 1234567891011UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPress:)];// è¯†åˆ«é•¿æŒ‰æ‰‹åŠ¿å‰éœ€è¦ç‚¹å‡»å‡ æ¬¡ï¼ŒDefault is 0ï¼Œ PS:ä»Žæ²¡è§è¿‡è¿™ä¸ªå±žæ€§çš„ä½¿ç”¨longPress.numberOfTapsRequired = 1;// æ‰‹æŒ‡æ•°longPress.numberOfTouchesRequired = 1;// æœ€çŸ­æŒ‰å¤šé•¿æ—¶é—´æ‰è¯†åˆ«é•¿æŒ‰æ‰‹åŠ¿ Default is 0.5ç§’longPress.minimumPressDuration = 1;// è¯†åˆ«é•¿æŒ‰æ‰‹åŠ¿å‰å…è®¸çš„æœ€å¤§ç§»åŠ¨è·ç¦»ï¼ŒDefault is 10ï¼Œæ‰‹åŠ¿è¯†åˆ«åŽæ— æ•ˆlongPress.allowableMovement = 20;[view addGestureRecognizer:longPress]; ä»£ç† 123456789// æ³¨æ„å›žè°ƒå¤„ç†- (void)longPress:(UILongPressGestureRecognizer *)longPressGesture &#123;if (sender.state == UIGestureRecognizerStateEnded) &#123;// ç»“æŸ&#125;else if (sender.state == UIGestureRecognizerStateBegan)&#123;// å¼€å§‹&#125;&#125; 5 æ—‹è½¬æ‰‹åŠ¿ UIRotationGestureRecognizer å®žçŽ° 12UIRotationGestureRecognizer *rotation = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(rotation:)];[view addGestureRecognizer:rotation]; ä»£ç† 12345678910- (void)rotation:(UIRotationGestureRecognizer *)rotationGesture &#123;//èŽ·å–æ—‹è½¬çš„è§’åº¦CGFloat scale = rotationGesture.rotation;//èŽ·å–æ—‹è½¬çš„é€Ÿåº¦ radians/secondNSLog(@&quot;è½¬é€Ÿï¼š %f&quot;, rotationGesture.velocity);// è®¾ç½®viewçš„è§’åº¦,ä½¿ç”¨transformè®¾ç½®rotationGesture.view.transform = CGAffineTransformRotate(rotationGesture.view.transform, scale);// å¤ä½,å¦åˆ™æ—‹è½¬è§’åº¦ä¼šå åŠ ï¼Œä¼šç–¯ç‹‚è½¬åœˆrotationGesture.rotation = 0;&#125; 6 ç¼©æ”¾ UIPinchGestureRecognizer å®žçŽ° 12UIPinchGestureRecognizer *pinch = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(pinch:)];[view addGestureRecognizer:pinch]; ä»£ç† 123456- (void)pinch:(UIPinchGestureRecognizer *)pinchGesture &#123;CGFloat scale = pinchGesture.scale;pinchGesture.view.transform = CGAffineTransformScale(pinchGesture.view.transform, scale, scale);// å¤ä½pinchGesture.state = 1;&#125; 7 å±å¹•è¾¹ç¼˜è½»æ‰« UIScreenEdgePanGestureRecognizer å®žçŽ° 12UIScreenEdgePanGestureRecognizer *screenPan = [[UIScreenEdgePanGestureRecognizer alloc]initWithTarget:self action:@selector(screenEdgePan:)];[view addGestureRecognizer:screenPan]; ä»£ç† 1234//åˆ›å»ºè¾¹ç¼˜äº‹ä»¶-(void)screenEdgePan:(UIScreenEdgePanGestureRecognizer *)screenEdgePanGesture &#123;NSLog(@&quot;è¾¹ç¼˜&quot;);&#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å›¾ç‰‡å¤„ç†2ï¼šCGImage]]></title>
    <url>%2F2016%2F06%2F15%2F%E5%9B%BE%E7%89%87%E5%A4%84%E7%90%862%EF%BC%9ACGImage%2F</url>
    <content type="text"><![CDATA[åº UIImageã€CGImageä¸ŽCIImage UIImageï¼šUIKitçš„å°è£…ï¼Œæœ€å¸¸ç”¨ CGImageï¼šUIImageç±»çš„Core Graphicsç‰ˆæœ¬çš„ç»“æž„ä½“æŒ‡é’ˆï¼Œç”¨Cè¯­è¨€ç¼–å†™ï¼Œåªèƒ½è¡¨ç¤ºä½å›¾ CIImageï¼šå¹¶ä¸æ˜¯ä¸€å¼ å›¾ç‰‡ã€‚å®ƒåŒ…å«äº†æ‰€æœ‰ç”Ÿæˆä¸€å¼ å›¾ç‰‡æ‰€æœ‰çš„å¿…è¦ä¿¡æ¯ã€‚CIImageå¯¹è±¡é€šå¸¸ç”¨åœ¨CIFilter,CIContext,CIColor,CIVectorã€‚è·ŸGPUçš„å¤„ç†ç›¸å…³ã€‚ CGImageç»˜åˆ¶å›¾ç‰‡çš„æ–¹å¼ æ ¹æ®æ•°æ®æºåˆ›å»ºä½å›¾CGImageCreate 1234567891011121314151617181920212223242526272829303132333435363738394041424344/*// å›¾ç‰‡å®½åº¦ï¼Œå•ä½åƒç´ , CGImageGetWidth(imageRef);size_t width// å›¾ç‰‡é«˜åº¦ï¼Œå•ä½åƒç´ , CGImageGetHeight(imageRef);size_t height// æ¯ä¸ªé¢œè‰²çš„æ¯”ç‰¹æ•°ï¼Œåœ¨rgba-32æ¨¡å¼ä¸‹ä¸º 8, CGImageGetBitsPerComponent(imageRef)size_t bitsPerComponent// æ¯ä¸ªåƒç´ çš„æ€»æ¯”ç‰¹æ•°ï¼ŒThe number of bytes per pixel is equal to `(bitsPerComponent * number of components + 7)/8&apos; ï¼Œå‚ç…§CGBitmapContextCreateçš„æ³¨é‡Šï¼Œ CGImageGetBitsPerPixel(imageRef)size_t bitsPerPixel,// æ¯ä¸€è¡Œå ç”¨çš„å­—èŠ‚æ•°ï¼Œæ³¨æ„å•ä½æ˜¯å­—èŠ‚,`bytesPerRow&apos; bytes, which must be at least width * bytes per pixel&apos; bytes å³ width * bitsPerPixel / BYTE_SIZE ï¼Œå‚ç…§CGBitmapContextCreateçš„æ³¨é‡Šï¼Œé€šå¸¸1å­—èŠ‚=8ä½,CGImageGetBytesPerRow(imageRef)size_t bytesPerRow,// é¢œè‰²ç©ºé—´,iOSä¸­ä¸€èˆ¬ä¸ºCGColorSpaceCreateDeviceRGBï¼Œ CGImageGetColorSpace(imageRef)CGColorSpaceRef cg_nullable space,// ä½å›¾çš„å¸ƒå±€ä¿¡æ¯ï¼ŒiOSä¸Šä¸€èˆ¬ä¸ºå°ç«¯32ä½åºï¼ŒèŽ·å–æ–¹å¼å‚è§ å¤‡æ³¨2CGBitmapInfo bitmapInfo,// æ•°æ®æä¾›è€… ï¼ŒCGDataProviderCreateWithCFData((__bridge CFDataRef)data);CGDataProviderRef cg_nullable provider,// å›ºå®šä¸ºNULLï¼Œå³ä¸å…è®¸é‡æ–°æ˜ å°„é¢œè‰²å€¼const CGFloat * __nullable decode,// å›ºå®šä¸ºfalseï¼Œå³ä¸é‡‡ç”¨æ’å€¼ç®—æ³•ï¼Œé«˜åˆ†è¾¨çŽ‡ä¸Šå¯èƒ½ä¼šæ˜¾ç¤ºé”¯é½¿bool shouldInterpolate,// æ¸²æŸ“æ„å›¾ï¼ŒkCGRenderingIntentDefaultCGColorRenderingIntent intent*/CGImageRef image = CGImageCreate(width, height, bitsPerComponent, bitsPerPixel, bytesPerRow, YYCGColorSpaceGetDeviceRGB(), bitmapInfo, provider, NULL, false, kCGRenderingIntentDefault);// å¤‡æ³¨1ï¼šsize_t åœ¨64ä½æœºå™¨ä¸Šä¸º8å­—èŠ‚ï¼Œ32ä½æœºå™¨ä¸Šä¸º4å­—èŠ‚// å¤‡æ³¨2ï¼šç›´æŽ¥ä½¿ç”¨CGImageGetBitmapInfo(imageRef)èŽ·å¾—çš„CGBitmapInfo ä½å›¾å¸ƒå±€ä¿¡æ¯æ˜¯ä¸å‡†çš„ï¼Œä»¥ä¸‹æ˜¯AFNetworkçš„ä»£ç // CGColorSpaceModel colorSpaceModel = CGColorSpaceGetModel(colorSpace);// CGBitmapInfo bitmapInfo = CGImageGetBitmapInfo(imageRef);//// if (colorSpaceModel == kCGColorSpaceModelRGB) &#123;// uint32_t alpha = (bitmapInfo &amp; kCGBitmapAlphaInfoMask);//#pragma clang diagnostic push//#pragma clang diagnostic ignored &quot;-Wassign-enum&quot;// if (alpha == kCGImageAlphaNone) &#123;// bitmapInfo &amp;= ~kCGBitmapAlphaInfoMask;// bitmapInfo |= kCGImageAlphaNoneSkipFirst;// &#125; else if (!(alpha == kCGImageAlphaNoneSkipFirst || alpha == kCGImageAlphaNoneSkipLast)) &#123;// bitmapInfo &amp;= ~kCGBitmapAlphaInfoMask;// bitmapInfo |= kCGImageAlphaPremultipliedFirst;// &#125;//#pragma clang diagnostic pop// &#125; é€šè¿‡ä¸Šä¸‹æ–‡åˆ›å»ºä½å›¾ 1234567// åŒæ—¶è®¾dataä¸ºNULLã€bytesPerRowä¸º0 ï¼ˆå¿…é¡»ä¸¤ä¸ªéƒ½è®¾ï¼‰ï¼Œè¡¨ç¤ºç³»é‡‡ç”¨ç»Ÿä¼šè‡ªåŠ¨åˆ†é…ä¸€æ®µåˆé€‚çš„å†…å­˜ï¼Œä¿å­˜ä½å›¾æ•°æ®CGContextRef context = CGBitmapContextCreate(NULL, width, height, 8, 0, YYCGColorSpaceGetDeviceRGB(), bitmapInfo);if (!context) return NULL;CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef); // decodeCGImageRef newImage = CGBitmapContextCreateImage(context);CFRelease(context);// å¦‚æžœæœ‰å›¾åƒæ•°æ®äº†ï¼Œå½“ç„¶ç”¨CGImageCreateï¼Œæ¯•ç«Ÿç”¨CGBitmapContextCreateè¿˜éœ€è¦æ‹·è´å•¥çš„æ¯”è¾ƒè€—æ—¶ UIGraphicsBeginImageContext 12345678// ç”Ÿæˆçº¯è‰²å›¾ç‰‡CGRect rect=CGRectMake(0,0, 1, 1);UIGraphicsBeginImageContext(rect.size);CGContextRef context = UIGraphicsGetCurrentContext();CGContextSetFillColorWithColor(context, [color CGColor]);CGContextFillRect(context, rect);UIImage *theImage = UIGraphicsGetImageFromCurrentImageContext();UIGraphicsEndImageContext(); å…¶å®ƒæ–¹æ³• è’™å±‚ 1234// åˆ›å»ºmaskå›¾ç‰‡å›¾å±‚,å‚æ•°å’ŒCGImageCreateä¸€æ ·CGImageMaskCreate(size_t width, size_t height, size_t bitsPerComponent, size_t bitsPerPixel, size_t bytesPerRow,CGDataProviderRef cg_nullable provider, const CGFloat * __nullable decode, bool shouldInterpolate)//è°ƒç”¨CGImageCreateWithMaskå¹¶æŒ‡å®šå›¾åƒä½œä¸ºè’™ç‰ˆï¼Œåˆ™å¿…é¡»ä½¿ç”¨è®¾å¤‡ç°è‰²é¢œè‰²ç©ºé—´å®šä¹‰å›¾åƒã€‚CGImageCreateWithMask(CGImageRef cg_nullable image, CGImageRef cg_nullable mask) æˆªå›¾ 1CGImageCreateWithImageInRect(CGImageRef cg_nullable image, CGRect rect) ä»ŽNSDataç”ŸæˆCGImageRef 1234567891011121314151617181920// ä»¥ä¸‹ä¸ºAFNetworkæºç CGImageRef imageRef = NULL;CGDataProviderRef dataProvider = CGDataProviderCreateWithCFData((__bridge CFDataRef)data);if ([response.MIMEType isEqualToString:@&quot;image/png&quot;]) &#123;imageRef = CGImageCreateWithPNGDataProvider(dataProvider, NULL, true, kCGRenderingIntentDefault);&#125; else if ([response.MIMEType isEqualToString:@&quot;image/jpeg&quot;]) &#123;imageRef = CGImageCreateWithJPEGDataProvider(dataProvider, NULL, true, kCGRenderingIntentDefault);if (imageRef) &#123;CGColorSpaceRef imageColorSpace = CGImageGetColorSpace(imageRef);CGColorSpaceModel imageColorSpaceModel = CGColorSpaceGetModel(imageColorSpace);// CGImageCreateWithJPEGDataProvider does not properly handle CMKY, so fall back to AFImageWithDataAtScaleif (imageColorSpaceModel == kCGColorSpaceModelCMYK) &#123;CGImageRelease(imageRef);imageRef = NULL;&#125;&#125;&#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å›¾ç‰‡å¤„ç†1ï¼šå¸¸ç”¨å·¥å…·]]></title>
    <url>%2F2016%2F06%2F12%2F%E5%9B%BE%E7%89%87%E5%A4%84%E7%90%861%EF%BC%9A%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%2F</url>
    <content type="text"><![CDATA[123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300//// UIImage+tool.m// test//// Created by JZK on 2016/7/4.// Copyright Â© 2016 test. All rights reserved.//#import &quot;UIImage+tool.h&quot;static inline CGFloat DegreesToRadians(CGFloat degrees) &#123;return M_PI * (degrees / 180.0);&#125;@implementation UIImage (tool)#pragma mark è£å‰ª- (UIImage *)clipInRect:(CGRect)rect &#123;CGImageRef imageRef = CGImageCreateWithImageInRect([self CGImage], rect);UIImage *croppedImage = [UIImage imageWithCGImage:imageRef];CGImageRelease(imageRef);return croppedImage;&#125;#pragma mark ç¼©æ”¾//- (UIImage *)scaleToSize:(CGSize)size &#123;UIGraphicsBeginImageContext(size);[self drawInRect:CGRectMake(0 ,0 ,size.width ,size.height)];UIImage *result = UIGraphicsGetImageFromCurrentImageContext();UIGraphicsEndImageContext();return result;&#125;// æ•´ä½“ç¼©æ”¾ç­‰æ¯”ç¼©æ”¾- (UIImage *) scaleImageByScale:(float)scaleSize &#123;UIGraphicsBeginImageContext(CGSizeMake(self.size.width * scaleSize, self.size.height * scaleSize));[self drawInRect:CGRectMake(0, 0, self.size.width * scaleSize, self.size.height * scaleSize)];UIImage *scaledImage = UIGraphicsGetImageFromCurrentImageContext();UIGraphicsEndImageContext();return scaledImage;&#125;// æ ¹æ®ç»™å®šboundç”»æœ€é«˜è´¨é‡çš„å›¾ç‰‡- (UIImage *)resizedImageInBounds:(CGSize)bounds &#123;return [self resizedImageInBounds:bounds quality:kCGInterpolationHigh];&#125;- (UIImage *)resizedImageInBounds:(CGSize)bounds quality:(CGInterpolationQuality)quality &#123;// UIViewContentModeScaleAspectFitCGFloat horizontalRatio = bounds.width / self.size.width;CGFloat verticalRatio = bounds.height / self.size.height;CGFloat ratio = MIN(horizontalRatio, verticalRatio);CGSize newSize = CGSizeMake(self.size.width * ratio, self.size.height * ratio);CGAffineTransform transform = [self transformForOrientation:newSize];CGRect newRect = CGRectIntegral(CGRectMake(0, 0, newSize.width, newSize.height));CGRect toRect = CGRectMake(0, 0, newRect.size.height, newRect.size.width);CGImageRef imageRef = self.CGImage;CGContextRef bitmap = CGBitmapContextCreate(NULL,newRect.size.width,newRect.size.height,8,0,CGImageGetColorSpace(imageRef),kCGImageAlphaNoneSkipLast);CGContextConcatCTM(bitmap, transform);CGContextSetInterpolationQuality(bitmap, quality);CGContextDrawImage(bitmap, toRect, imageRef);// æˆ– UIGraphicsGetImageFromCurrentImageContextCGImageRef newImageRef = CGBitmapContextCreateImage(bitmap);UIImage *newImage = [UIImage imageWithCGImage:newImageRef];CGContextRelease(bitmap);CGImageRelease(newImageRef);return newImage;&#125;#pragma mark æ‹‰ä¼¸// ä½¿ç”¨ä¸­å¿ƒç‚¹æ‹‰ä¼¸- (UIImage *)stretchableImageByCenter &#123;CGFloat leftCapWidth = floorf(self.size.width / 2);if (leftCapWidth == self.size.width / 2) &#123;leftCapWidth--;&#125;CGFloat topCapHeight = floorf(self.size.height / 2);if (topCapHeight == self.size.height / 2) &#123;topCapHeight--;&#125;return [self stretchableImageWithLeftCapWidth:leftCapWidthtopCapHeight:topCapHeight];&#125;/*æ³¨æ„äº‹é¡¹ï¼š1ï¼ŒUIEdgeInsets ä¸Š å·¦ ä¸‹ å³2ï¼ŒUIImageResizingMode è§£é‡ŠUIImageResizingModeTileï¼šå¹³é“ºæ¨¡å¼ï¼Œé€šè¿‡ é‡å¤ UIEdgeInsetsæŒ‡å®šçš„çŸ©å½¢åŒºåŸŸæ¥å¡«å……å›¾UIImageResizingModeStretchï¼šæ‹‰ä¼¸æ¨¡å¼ï¼Œé€šè¿‡ æ‹‰ä¼¸ UIEdgeInsetsæŒ‡å®šçš„çŸ©å½¢åŒºåŸŸæ¥å¡«å……å›¾ç‰‡[originImage resizableImageWithCapInsets:UIEdgeInsetsMake(10, 10, 10, 10) resizingMode:UIImageResizingModeStretch];*/#pragma mark æ—‹è½¬å›¾ç‰‡/*UIImageOrientationUp, // é»˜è®¤æ–¹å‘UIImageOrientationDown, // è®©é»˜è®¤æ–¹å‘æ—‹è½¬180åº¦UIImageOrientationLeft, // è®©é»˜è®¤æ–¹å‘é€†æ—¶é’ˆæ—‹è½¬90åº¦UIImageOrientationRight, // è®©é»˜è®¤æ–¹å‘é¡ºæ—¶é’ˆæ—‹è½¬90åº¦UIImageOrientationUpMirrored, // é»˜è®¤æ–¹å‘çš„ç«–çº¿é•œåƒ//ï¼ˆå³ä»¥åŽŸå›¾çš„å·¦(æˆ–å³)è¾¹çš„ç«–çº¿ä¸ºå¯¹ç§°è½´ï¼Œå¯¹åŽŸå›¾è¿›è¡Œå¯¹ç§°æŠ•å½±å¾—åˆ°çš„é•œåƒï¼‰UIImageOrientationDownMirrored, // è®©é•œåƒæ—‹è½¬180åº¦UIImageOrientationLeftMirrored, // è®©é•œåƒé€†æ—¶é’ˆæ—‹è½¬90åº¦UIImageOrientationRightMirrored, // è®©é•œåƒé¡ºæ—¶é’ˆæ—‹è½¬90åº¦*/// æŒ‰æ–¹å‘æ—‹è½¬å›¾ç‰‡- (UIImage *)rotatedByOrientation:(UIImageOrientation)orientation &#123;return [UIImage imageWithCGImage:self.CGImage scale:self.scale orientation:orientation];&#125;// æŒ‰è§’åº¦æ—‹è½¬å›¾ç‰‡- (UIImage *)rotatedByDegrees:(CGFloat)degrees&#123;UIView *rotatedViewBox = [[UIView alloc] initWithFrame:CGRectMake(0,0,self.size.width, self.size.height)];// é€†æ—¶é’ˆæ—‹è½¬angleå¼§åº¦CGAffineTransform t = CGAffineTransformMakeRotation(DegreesToRadians(degrees));rotatedViewBox.transform = t;CGSize rotatedSize = rotatedViewBox.frame.size;UIGraphicsBeginImageContext(rotatedSize);CGContextRef context = UIGraphicsGetCurrentContext();CGContextTranslateCTM(context, rotatedSize.width/2, rotatedSize.height/2);CGContextRotateCTM(context, DegreesToRadians(degrees));CGContextScaleCTM(context, 1.0, -1.0);CGContextDrawImage(context, CGRectMake(-self.size.width / 2, -self.size.height / 2, self.size.width, self.size.height), [self CGImage]);UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();UIGraphicsEndImageContext();return newImage;&#125;#pragma mark ä¿®æ­£å›¾ç‰‡æ–¹å‘- (UIImage *)imageFixOrientation &#123;if (self.imageOrientation == UIImageOrientationUp) return self;CGAffineTransform transform = [self transformForOrientation:self.size];CGFloat width = self.size.width;CGFloat height = self.size.height;size_t bits = CGImageGetBitsPerComponent(self.CGImage);CGColorSpaceRef colorSpace = CGImageGetColorSpace(self.CGImage);CGColorSpaceModel colorSpaceModel = CGColorSpaceGetModel(colorSpace);CGBitmapInfo bitmapInfo = CGImageGetBitmapInfo(self.CGImage);if (colorSpaceModel == kCGColorSpaceModelRGB) &#123;uint32_t alpha = (bitmapInfo &amp; kCGBitmapAlphaInfoMask);#pragma clang diagnostic push#pragma clang diagnostic ignored &quot;-Wassign-enum&quot;if (alpha == kCGImageAlphaNone) &#123;bitmapInfo &amp;= ~kCGBitmapAlphaInfoMask;bitmapInfo |= kCGImageAlphaNoneSkipFirst;&#125; else if (!(alpha == kCGImageAlphaNoneSkipFirst || alpha == kCGImageAlphaNoneSkipLast)) &#123;bitmapInfo &amp;= ~kCGBitmapAlphaInfoMask;bitmapInfo |= kCGImageAlphaPremultipliedFirst;&#125;#pragma clang diagnostic pop&#125;CGContextRef ctx = CGBitmapContextCreate(NULL, width, height, bits, 0, colorSpace, bitmapInfo);if (ctx == NULL) &#123;return self;&#125;CGContextConcatCTM(ctx, transform);switch (self.imageOrientation) &#123;case UIImageOrientationLeft:case UIImageOrientationLeftMirrored:case UIImageOrientationRight:case UIImageOrientationRightMirrored:// Grr...CGContextDrawImage(ctx, CGRectMake(0,0,self.size.height,self.size.width), self.CGImage);break;default:CGContextDrawImage(ctx, CGRectMake(0,0,self.size.width,self.size.height), self.CGImage);break;&#125;// And now we just create a new UIImage from the drawing contextCGImageRef cgimg = CGBitmapContextCreateImage(ctx);UIImage *img = [UIImage imageWithCGImage:cgimg];CGContextRelease(ctx);CGImageRelease(cgimg);return img;&#125;//- (CGAffineTransform)transformForOrientation:(CGSize)newSize &#123;/*CGAffineTransform å¤„ç†å½¢å˜çš„ç±»,äºŒç»´åæ ‡ç³»,å³å‘å³ä¸ºxè½´æ­£æ–¹å‘,å‘ä¸Šä¸ºyè½´æ­£æ–¹å‘æ–¹æ³•ç®€ä»‹ï¼šCGAffineTransformTranslate // xè½´æ–¹å‘ä¸Šå¹³ç§»xå•ä½,åœ¨yè½´æ–¹å‘ä¸Šå¹³ç§»yå•ä½CGAffineTransformScale // xè½´æ–¹å‘ä¸Šç¼©æ”¾xå€,åœ¨yè½´æ–¹å‘ä¸Šç¼©æ”¾yå€CGAffineTransformRotate // é€†æ—¶é’ˆæ—‹è½¬å¼§åº¦,M_PI=180è§’åº¦)ä»¥ä¸‹éƒ½æ˜¯é’ˆå¯¹è§†å›¾çš„åŽŸå®šæœ€åˆä½ç½®çš„ä¸­å¿ƒç‚¹ä¸ºèµ·å§‹å‚ç…§è¿›è¡Œç›¸åº”æ“ä½œçš„ï¼ŒCGAffineTransformMakeTranslation // å°†åæ ‡ç³»ç»Ÿxè½´æ–¹å‘ä¸Šå¹³ç§»xå•ä½,åœ¨yè½´æ–¹å‘ä¸Šå¹³ç§»yå•ä½CGAffineTransformMakeScale // å°†åæ ‡ç³»ç»Ÿxè½´æ–¹å‘ä¸Šç¼©æ”¾xå€,åœ¨yè½´æ–¹å‘ä¸Šç¼©æ”¾yå€CGAffineTransformMakeRotation // å°†åæ ‡ç³»ç»Ÿé€†æ—¶é’ˆæ—‹è½¬å¼§åº¦,M_PI=180è§’åº¦)åœ¨æ“ä½œç»“æŸä¹‹åŽå¯å¯¹è®¾ç½®é‡è¿›è¡Œè¿˜åŽŸï¼šview.transformï¼CGAffineTransformIdentity;*/CGAffineTransform transform = CGAffineTransformIdentity;switch(self.imageOrientation) &#123;case UIImageOrientationDown:case UIImageOrientationDownMirrored:transform = CGAffineTransformTranslate(transform, newSize.width, newSize.height);transform = CGAffineTransformRotate(transform, M_PI);break;case UIImageOrientationLeft:case UIImageOrientationLeftMirrored:transform = CGAffineTransformTranslate(transform, newSize.width, 0);transform = CGAffineTransformRotate(transform, M_PI_2);break;case UIImageOrientationRight:case UIImageOrientationRightMirrored:transform = CGAffineTransformTranslate(transform, 0, newSize.height);transform = CGAffineTransformRotate(transform, -M_PI_2);break;default:break;&#125;switch(self.imageOrientation) &#123;case UIImageOrientationUpMirrored:case UIImageOrientationDownMirrored:transform = CGAffineTransformTranslate(transform, newSize.width, 0);transform = CGAffineTransformScale(transform, -1, 1);break;case UIImageOrientationLeftMirrored:case UIImageOrientationRightMirrored:transform = CGAffineTransformTranslate(transform, newSize.height, 0);transform = CGAffineTransformScale(transform, -1, 1);break;default:break;&#125;return transform;&#125;#pragma mark ç”Ÿæˆimage+ (UIImage *)createImageWithView:(UIView *)view&#123;// sizeåŒºåŸŸå¤§å°ï¼Œopaqueæ˜¯å¦é€æ˜Žï¼Œå±å¹•åˆ†è¾¨çŽ‡ 0è¡¨ç¤º [UIScreen mainScreen].scaleUIGraphicsBeginImageContextWithOptions(view.bounds.size, view.opaque, 0.0);// å°†viewçš„layeræ¸²æŸ“åˆ°å½“å‰çš„ç»˜åˆ¶çš„ä¸Šä¸‹æ–‡ä¸­[view.layer renderInContext:UIGraphicsGetCurrentContext()];UIImage *image = UIGraphicsGetImageFromCurrentImageContext();UIGraphicsEndImageContext();return image;&#125;#pragma mark æ°´å°// å›¾ç‰‡æ°´å°- (UIImage *)waterImage:(UIImage *)otherImage &#123;// å³ä¸‹è§’CGFloat x = self.size.width - (self.size.width - otherImage.size.width)/2;CGFloat y = self.size.height - (self.size.height - otherImage.size.height)/2;return [self mergeImage:otherImage center:CGPointMake(x, y)];&#125;- (UIImage *)mergeImage:(UIImage *)otherImage center:(CGPoint)center&#123;UIGraphicsBeginImageContext(self.size);[self drawInRect:CGRectMake(0, 0, self.size.width, self.size.height)];CGFloat width = otherImage.size.width;CGFloat height = otherImage.size.height;[otherImage drawInRect:CGRectMake(center.x - width/2, center.y - height/2, width, height)];UIImage *resultingImage = UIGraphicsGetImageFromCurrentImageContext();UIGraphicsEndImageContext();return resultingImage;&#125;#warning TODOï¼šå®žçŽ°ä¸€ä¸ªæ–‡å­—ç‰ˆæ°´å°æ•ˆæžœ@end]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ¶ˆæ¯ä¼ é€’2ï¼šæœºåˆ¶]]></title>
    <url>%2F2016%2F05%2F22%2F%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%922%EF%BC%9A%E6%9C%BA%E5%88%B6%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;åˆšå­¦OCæ—¶æ°´è¿‡ä¸€æ¬¡ä¸ºå•¥å«æ¶ˆæ¯å‘é€ï¼Œå…·ä½“å°±ä¸è´´äº†ï¼çœ‹äº†çœ‹å®žåœ¨æ˜¯æ°´çš„ä¸è¡Œï¼å‰äº›å¤©ä¸“é—¨å†™äº†ç‚¹æ¶ˆæ¯å‘é€çš„æ–¹å¼ä»¥åŠæ³¨æ„äº‹é¡¹ï¼ä»Šå¤©å°±æ°´ä¸€æ°´ï¼Œæ¶ˆæ¯å‘é€çš„æœºåˆ¶æ˜¯ä»€ä¹ˆ 1 åŠ¨æ€ç»‘å®šVSé™æ€ç»‘å®š1.1 é™æ€ç»‘å®š-å°±æ˜¯ç¼–è¯‘æ—¶å·²ç»å†™æ­»äº†è°ƒç”¨å‡½æ•°ï¼Œç¡¬ç¼–ç çš„ï¼Œä¸ä¼šå˜1234567891011121314151617181920/*********** ä¾‹1 é™æ€ç»‘å®š ***********/#import &lt;stdio.h&gt;void printHello() &#123;printf(&quot;Hello, world!\n&quot;);&#125;void printGoodbye() &#123;printf(&quot;Goodbye, world!\n&quot;);&#125;void saySomething(int type) &#123;/*é‡ç‚¹ä¸æ˜¯ifï¼Œè€Œæ˜¯å†™æ­»çš„printHello();å’ŒprintGoodbye();è¿™ä¸¤ä¸ªå‡½æ•°åœ¨ç¼–è¯‘æ—¶å·²ç»ç¡¬ç¼–ç è¿›äº†ç¨‹åºï¼Œæ˜¯ä¸ä¼šæ”¹å˜çš„*/ if (type == 0) &#123;printHello();&#125; else &#123;printGoodbye();&#125;return 0;&#125; 1.2 åŠ¨æ€ç»‘å®š æ˜¯è¿è¡Œæ—¶å†ç»‘å®šå®žé™…çš„è°ƒç”¨å‡½æ•°ï¼ŒOCå°±æ˜¯é€šè¿‡æ¶ˆæ¯ä¼ é€’çš„æ–¹å¼æ¥åŠ¨æ€ç»‘å®šçš„123456789101112131415161718192021/*********** ä¾‹2 åŠ¨æ€ç»‘å®š ***********/#import &lt;stdio.h&gt;void printHello() &#123;printf(&quot;Hello, world!\n&quot;);&#125;void printGoodbye() &#123;printf(&quot;Goodbye, world!\n&quot;);&#125;void saySomething(int type) &#123;/*é€šè¿‡å‡½æ•°æŒ‡é’ˆçš„æ–¹å¼è°ƒç”¨printHello();å’ŒprintGoodbye();å‡½æ•°å°†å…·ä½“è°ƒç”¨å“ªä¸ªå‡½æ•°æŽ¨è¿Ÿåˆ°äº†è¿è¡Œæ—¶å†ç¡®å®šï¼Œæˆ‘ä»¬å¯ä¿®æ”¹å‡½æ•°æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªprintLog();å‡½æ•°æ¥å®žçŽ°åŠ¨æ€æ•ˆæžœï¼Œè€Œä¸éœ€è¦ä¿®æ”¹ç¡¬ç¼–ç */ void (*func)();if (type == 0) &#123;func = printHello;&#125; else &#123;func = printGoodbye;&#125;func();return 0;&#125; 1.3 PS:å‡½æ•°æŒ‡é’ˆå’ŒæŒ‡é’ˆå‡½æ•°1234// å‡½æ•°æŒ‡é’ˆï¼šå‡½æ•°çš„æŒ‡é’ˆint (*fun)(int x,int y);// æŒ‡é’ˆå‡½æ•°ï¼šæŒ‡é’ˆä¸¤å­—åœ¨å‰é¢ï¼Œæ‰€ä»¥è¿”å›žå€¼æ˜¯æŒ‡é’ˆint * fun(int x,int y)ï¼› 2 objc_msgSend2.1 å‘æŸä¸ªOCå¯¹è±¡å‘é€æ¶ˆæ¯123456// OCå†™æ³•id returnValue = [someObject messageName:parameter];// ç¼–è¯‘å™¨è½¬åŒ–ä¸ºCè¯­è¨€è°ƒç”¨id returnValue = objc_msgSend(someObject,@selector(messageName:),parameter); 2.2 objc_msgSendåŽŸåž‹ï¼Œ å‚è€ƒ: https://opensource.apple.com/source/objc4/objc4-723/runtime/Messengers.subproj/objc-msg-arm.s.auto.html1234// selfè¡¨ç¤ºè°ƒç”¨å‡½æ•°çš„å®žä¾‹å¯¹è±¡// SELè¡¨ç¤ºè°ƒç”¨çš„å‡½æ•°æŒ‡é’ˆ// ...è¡¨ç¤ºå¯¹åº”çš„å‚æ•°ï¼Œæ”¯æŒå¤šå‚æ•°id objc_msgSend(id self, SEL _cmd, ...); 3 æ¶ˆæ¯ä¼ é€’æµç¨‹3.1 ä¸€èˆ¬æµç¨‹&emsp;&emsp;ç”±äºŽåŠ¨æ€ç»‘å®šéœ€åœ¨è¿è¡Œæ—¶ç¡®å®šå…·ä½“å‡½æ•°åœ°å€ï¼Œä¹Ÿå°±å­˜åœ¨ä¸€ä¸ªæŸ¥æ‰¾å†…å­˜åœ°å€çš„è¿‡ç¨‹ï¼š1231. ä»Žæ–¹æ³•ç¼“å­˜é‡Œæ‰¾ï¼ä¸ºå•¥è¦ç¼“å­˜ï¼Ÿå½“æ—¶æ˜¯ä¸ºäº†åŠ å¿«æ£€ç´¢é€Ÿåº¦ï¼Œæ¯•ç«Ÿå¸¸ç”¨æ–¹æ³•å°±é‚£ä¹ˆå‡ ä¸ªï¼Œæ¯æ¬¡éƒ½éåŽ†ä¸€éæ‰€æœ‰æ–¹æ³•å¾ˆè€—æ—¶è€—æ€§èƒ½çš„2. ä»Žç±»çš„æ‰€æœ‰æ–¹æ³•å½¢æˆçš„åˆ—è¡¨é‡Œæ‰¾ï¼æ‰¾åˆ°åˆ™å†™å…¥ç¼“å­˜ï¼Œæ–¹ä¾¿ä¸‹æ¬¡æŸ¥æ‰¾3. æ²¿ç€ç»§æ‰¿é“¾ä»Žçˆ¶ç±»ç±»ä¸­æŸ¥æ‰¾ &emsp;&emsp;æ­£å¸¸æµç¨‹ä¸‹ï¼Œå¦‚æžœéåŽ†äº†æ‰€æœ‰çˆ¶ç±»ä¾ç„¶æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•å°±ä¼šCrashï¼Œå¹¶ç»™å‡ºunrecognized selector sent to instanceçš„Crashä¿¡æ¯ï¼Œä½†OCè´´å¿ƒçš„ä¸ºæˆ‘ä»¬æä¾›äº†è¡¥æ•‘æŽªæ–½ 3.2 è¡¥æ•‘æŽªæ–½ åŠ¨æ€æ–¹æ³•è§£æžï¼ŒOCæä¾›äº†ä¸¤ä¸ªæ–¹æ³•ç”¨äºŽå¤„ç†æ‰¾ä¸åˆ°æ–¹æ³•çš„æƒ…å†µ123456789101112131415161718192021222324252627// ç”¨äºŽè§£å†³ç±»æ–¹æ³•æ‰¾ä¸åˆ°çš„æƒ…å†µ+ (BOOL)resolveClassMethod:(SEL)sel OBJC_AVAILABLE(10.5, 2.0, 9.0, 1.0, 2.0);// ç”¨äºŽè§£å†³å®žä¾‹æ–¹æ³•æ‰¾ä¸åˆ°çš„æƒ…å†µ+ (BOOL)resolveInstanceMethod:(SEL)sel OBJC_AVAILABLE(10.5, 2.0, 9.0, 1.0, 2.0);// ç¤ºä¾‹- (void)viewDidLoad &#123;[super viewDidLoad];[self performSelector:@selector(unrecognizedSelector)];&#125;+ (BOOL)resolveInstanceMethod:(SEL)sel &#123;NSString *selectorString = NSStringFromSelector(sel);if ([selectorString isEqualToString:@&quot;unrecognizedSelector&quot;]) &#123;// å°†selçš„å‡½æ•°æŒ‡é’ˆæŒ‡å‘recognizedOtherSelectorçš„åœ°å€class_addMethod(self,sel,(IMP)recognizedOtherSelector,&quot;&quot;);return YES;&#125;return NO;&#125;void recognizedOtherSelector() &#123;NSLog(@&quot;----&quot;);&#125; æ²¡æœ‰å®žçŽ°åŠ¨æ€æ–¹æ³•è§£æžï¼Œåˆ™æŸ¥çœ‹æœ‰æ²¡æœ‰å¤‡ç”¨æŽ¥å—è€…12345678// å…¶å®žå°±æ˜¯æ‰¾ä¸ªèƒ½å“åº”aSelectoræ–¹æ³•çš„æ›¿æ­»é¬¼- (id)forwardingTargetForSelector:(SEL)aSelector &#123;NSString *selectorString = NSStringFromSelector(aSelector);if ([selectorString isEqualToString:@&quot;unrecognizedSelector&quot;]) &#123;return @&quot;èƒ½å¤Ÿå“åº”unrecognizedSelectorçš„å¯¹è±¡&quot;;&#125;return nil;&#125; æ¶ˆæ¯è½¬å‘123456789101112131415161718192021222324å¿…é¡»è¦è¦†ç›–ä¸¤ä¸ªæ–¹æ³•åœ¨methodSignatureForSelectorå’ŒforwardInvocation// åˆ›å»ºä¸€ä¸ªæœ‰æ•ˆçš„ç­¾å- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector &#123;NSMethodSignature *signature = [super methodSignatureForSelector:aSelector];if (!signature) &#123;return [NSMethodSignature signatureWithObjCTypes:&quot;v@:@&quot;];&#125;return signature;&#125;// è½¬å‘ç»™æŸä¸ªæ–¹æ³•- (void)forwardInvocation:(NSInvocation *)anInvocation &#123;[anInvocation setSelector:@selector(forwardTo:)];NSString *arg1;[anInvocation getArgument:&amp;arg1 atIndex:2];[anInvocation invokeWithTarget:self];&#125;- (void)forwardTo:(NSString *)arg1 &#123;NSLog(@&quot;%@&quot;,arg1);&#125; 4 æ€»ç»“&emsp;&emsp;è°ƒç”¨ä¸€ä¸ªobjc_msgSend(id theReceiver, SEL selectot,â€¦â€¦)`æ–¹æ³•ç³»ç»Ÿæ‰§è¡Œçš„æ­¥éª¤ä¸º: åˆ¤æ–­receiveræ˜¯å¦ä¸ºnilï¼Œå¦‚æžœæ˜¯nilçš„è¯åˆ™ä¸å¾€ä¸‹æ‰§è¡Œï¼Œè¿”å›žnilï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ocä¸­ä¸€ä¸ªnilå‘é€æ¶ˆæ¯ä¸ä¼šå¼•èµ·å¥”æºƒã€‚ ä»Žæ–¹æ³•çš„ç¼“å­˜ä¸­æŸ¥æ‰¾è¢«è°ƒç”¨è¿‡çš„æ–¹æ³•ä¼šå­˜åœ¨ç¼“å­˜é‡Œé¢ï¼Œæ¯ä¸ªç±»éƒ½ä¼šæœ‰ä¸€ä¸ªè¡¨æ¥å­˜è¢«è°ƒç”¨è¿‡çš„æ–¹æ³•ï¼Œä»¥ä¾¿ä¸‹æ¬¡æ›´å¿«çš„è°ƒç”¨ã€‚ ä»Žæœ¬ç±»çš„æ–¹æ³•è¡¨ä¸­æŸ¥æ‰¾æ–¹æ³•å¯»æ‰¾selectorï¼Œæ‰¾åˆ°åˆ™å†™å…¥ç¼“å­˜ï¼Œè¿”å›žæ–¹æ³•ã€‚å¦åˆ™å†ä»Žçˆ¶ç±»ä¸­æŸ¥æ‰¾æ–¹æ³•ï¼Œå¦‚æ­¤å¾€å¤ï¼Œç›´åˆ°è¾¾åˆ°åŸºç±»ã€‚å¦‚æžœæ‰¾ä¸åˆ°åˆ™æ‰§è¡Œæ–¹æ³•çš„åŠ¨æ€è§£æžã€‚ æ–¹æ³•çš„åŠ¨æ€è§£æžï¼š è°ƒç”¨+(BOOL)resolveInstanceMethod:(SEL)selæ–¹æ³•æ¥æŸ¥çœ‹æ˜¯å¦èƒ½å¤Ÿè¿”å›žä¸€ä¸ªselectorï¼Œå¦‚æžœå­˜åœ¨åˆ™è¿”å›žselectorã€‚ä¸å­˜åœ¨è¿›å…¥ä¸‹ä¸€æ­¥ã€‚ å¤‡ç”¨æŽ¥å—è€… - (id)forwardingTargetForSelector:(SEL)aSelectorè¿™ä¸ªæ–¹æ³•æ¥è¯¢é—®æ˜¯å¦æœ‰æŽ¥å—è€…å¯ä»¥æŽ¥å—è¿™ä¸ªæ–¹æ³•å‘€ã€‚å¦‚æžœæœ‰äººæŽ¥å—ï¼Œåˆ™äº¤ç»™å®ƒå¤„ç†ï¼Œå°±å¥½åƒä¸€åˆ‡éƒ½æ²¡å‘ç”Ÿè¿‡ä¸€æ ·ã€‚ æ–¹æ³•çš„è½¬å‘ï¼š å¦‚æžœåˆ°è¿™ä¸€æ­¥è¿˜ä¸èƒ½å¤Ÿæ‰¾åˆ°ç›¸åº”çš„Selectorçš„è¯ï¼Œå°±è¦è¿›è¡Œå®Œæ•´çš„æ–¹æ³•è½¬å‘è¿‡ç¨‹ã€‚è°ƒç”¨æ–¹æ³•(void)forwardInvocation:(NSInvocation *)anInvocation æœ€åŽè¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°çš„è¯å°±åªæœ‰å‘µå‘µäº†ï¼Œè¿™æ—¶å€™unrecognized selector sent to instance 0x100111df0â€™çš„é”™è¯¯å°±æ¥äº†ã€‚ å‚è€ƒ https://www.jianshu.com/p/64ed325c1f19 https://www.zybuluo.com/MicroCai/note/64270]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ¶ˆæ¯ä¼ é€’1ï¼šæ–¹å¼]]></title>
    <url>%2F2016%2F05%2F20%2F%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%921%EF%BC%9A%E6%96%B9%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;å‰å‡ å¤©åšCRæ—¶å‘çŽ°ï¼Œä¸€ä¸ªåŒäº‹ç‰¹åˆ«å–œæ¬¢Blockï¼Œç”šè‡³åœ¨Baseé‡Œæ·»åŠ äº†å‡ ä¸ªæ–¹æ³•ï¼ŒæŠŠtableviewçš„å¸¸ç”¨ä»£ç†æ–¹æ³•éƒ½ç”¨blockå®žçŽ°äº†ä¸€éï¼Œæˆ‘å¯¹æ­¤æå‡ºäº†å¼‚è®®ï¼ä½†å…¶ä»–åŒäº‹è§‰å¾—æ²¡ä»€ä¹ˆï¼Œä¸ªäººå–œå¥½è€Œå·²ï¼ä½ ä¸å–œæ¬¢å¯ä»¥ä¸ç”¨å‘€ï¼é¢â€¦â€¦å¥½å§ï¼Œæˆ‘ä¸å–œæ¬¢ï¼Œæˆ‘å¯ä»¥ä¸ç”¨â€¦â€¦ã€‚é‚£ä¹ˆå’±ä»¬å°±è®¨è®ºä¸€ä¸‹iOSé‡Œä¸€å…±æœ‰å‡ ç§æ¶ˆæ¯ä¼ é€’æ–¹å¼ï¼Ÿå„è‡ªçš„ä¼˜ç¼ºç‚¹ä»¥åŠä½¿ç”¨åœºæ™¯ï¼Ÿ 1 å¸¸è§æ–¹å¼ä»¥åŠä»‹ç»1.1 KVO å«ä¹‰ï¼šå±žæ€§è§‚å¯Ÿå™¨ï¼Œå½“å¯¹è±¡ä¸­çš„æŸä¸ªå±žæ€§å€¼å‘ç”Ÿäº†æ”¹å˜ï¼Œå¯ä»¥å¯¹è¿™äº›å€¼çš„è§‚å¯Ÿè€…åšå‡ºé€šçŸ¥ã€‚ ä¼˜ç‚¹ï¼š ç®€å•çš„æ–¹æ³•å®žçŽ°æ˜ å°„å…³ç³»ï¼Œå¾ˆæ–¹ä¾¿çš„å®žçŽ°â€œè”åŠ¨â€æ•ˆæžœ èƒ½å¤Ÿå¯¹éžâ€œæˆ‘æ—ç±»â€œè¿›è¡Œè§‚å¯Ÿè§‚æµ‹ï¼Œæ–¹ä¾¿è¿›è¡Œè°ƒè¯•æˆ–åŠæ—¶å“åº” èƒ½å¤Ÿè§‚å¯ŸåµŒå¥—çš„å±žæ€§ï¼Œæ–¹ä¾¿çª¥æŽ¢ç§æœ‰å±žæ€§ã€‚ä¾‹å¦‚CAAnimationå¯ç”¨@â€transform.scaleâ€çš„æ–¹å¼è¿›è¡Œç¼©æ”¾ è€¦åˆä½Žï¼Œå› è¢«è§‚å¯Ÿå±žæ€§æ ¹æœ¬å°±ä¸çŸ¥é“å·²ç»è¢«å·çª¥äº† ç¼ºç‚¹ï¼š keyPathå¿…é¡»æ˜¯NSStringï¼Œå¾ˆå®¹æ˜“å†™é”™ä¸”XCodeä¸ä¼šæ£€æŸ¥ è§‚å¯Ÿå¤šä¸ªå±žæ€§æ—¶ï¼Œifå¤„ç†é€»è¾‘éžå¸¸å¤æ‚ï¼Œå®¹æ˜“å‡ºé”™ ä¾èµ–è¢«è§‚å¯Ÿå±žæ€§ï¼Œä¸€æ—¦æ”¹åå°±æ²¡ç”¨äº† ä¸èƒ½é‡å¤addObserver, deallocæ—¶å¿…é¡»removeObserver æ²¡æœ‰è¿”å›žå€¼ï¼Œå½“ç„¶ä¹Ÿä¸éœ€è¦ æ³¨æ„äº‹é¡¹ï¼šä¸èƒ½é‡å¤addObserver, deallocæ—¶å¿…é¡»removeObserver 1.2 Notification å«ä¹‰ï¼šé€šçŸ¥ï¼ˆå¹¿æ’­ï¼‰ï¼Œå…¸åž‹çš„â€ç®¡æ€ä¸ç®¡åŸ‹â€œ ä¼˜ç‚¹ï¼š è§£è€¦ï¼Œæœ€è§£è€¦çš„æ¶ˆæ¯ä¼ é€’æ–¹å¼ ç®€å•ï¼Œä¸€ä¸ª[NSNotificationCenter defaultCenter]èµ°å¤©ä¸‹ ä¸€å¯¹å¤š å‚æ•°ä¼ é€’æ¯”è¾ƒç®€å•ï¼Œé»˜è®¤æä¾›ä¸€ä¸ªidç±»åž‹çš„objectï¼Œä¹Ÿå¯ä»¥ç”¨è¿‡aUserInfoå­—å…¸ä¼ é€’ ç¼ºç‚¹ï¼š æ²¡æœ‰ç¼–è¯‘æ£€æŸ¥,è™½ç„¶å¯ä»¥é€šè¿‡NSString const name = @â€nameâ€;extern NSString const name; çš„æ–¹å¼å‡å°‘å¤±è¯¯ åŒä¸€ä¸ªçº¿ç¨‹è°ƒç”¨ï¼Œå¸¸è§é—®é¢˜æ˜¯å¼‚æ­¥çº¿ç¨‹postNotificationï¼Œä¸»çº¿ç¨‹æŽ¥æ”¶é€ æˆUIç»˜åˆ¶å‡ºé—®é¢˜ åŒæ­¥è°ƒç”¨ï¼Œæ³¨æ„NSNotificaitonæ˜¯åŒæ­¥è°ƒç”¨ æ— è®ºé€šè¿‡idç±»åž‹çš„objectè¿˜æ˜¯é€šè¿‡userInfoå­—å…¸ä¼ é€’å‚æ•°éƒ½å¿…é¡»åšâ€è‹›åˆ»â€œçš„å‚æ•°æ ¡éªŒï¼Œå¦åˆ™å¾ˆå®¹æ˜“å‡ºçŽ°ç±»åž‹è½¬æ¢é—®é¢˜ æ²¡æœ‰è¿”å›žå€¼ï¼Œé€šçŸ¥ï¼ˆå¹¿æ’­ï¼‰ç”šè‡³éƒ½ä¸å…³å¿ƒæ˜¯å¦æœ‰â€äººâ€œå“åº” deallocå¿…é¡»ç§»é™¤observer æ³¨æ„äº‹é¡¹ï¼šåŒä¸€çº¿ç¨‹åŒæ­¥è°ƒç”¨ï¼Œdeallocå¿…é¡»ç§»é™¤observer12345678910111213141516- (void)viewDidLoad &#123;[super viewDidLoad];[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(notTest) name:@&quot;notTest&quot; object:nil];dispatch_async(dispatch_get_global_queue(0, 0), ^&#123;NSLog(@&quot;------ 1&quot;);[[NSNotificationCenter defaultCenter] postNotificationName:@&quot;notTest&quot; object:nil];NSLog(@&quot;------ 3&quot;);&#125;);&#125;- (void)notTest &#123;NSLog(@&quot;------ 2&quot;);NSLog(@&quot;current queue:%@&quot;,[NSThread currentThread]);&#125;- (void)dealloc &#123;[[NSNotificationCenter defaultCenter] removeObserver:self];&#125; 1.3 åè®®delegateï¼ˆä»£ç†ï¼‰ å·²ç»æ˜¯è®¾è®¡æ¨¡å¼äº† ä¼˜ç‚¹ï¼š å¼ºåˆ¶æ€§ç¼–è¯‘å™¨æ£€æŸ¥ï¼Œé»˜è®¤éƒ½æ˜¯@requiredï¼Œé™¤éžç‰¹æ®Šæ ‡æ˜Ž@optional ä»£ç å¯è¯»æ€§å¥½ï¼Œä¸€èˆ¬éƒ½æŒ‰ç…§UITableViewDataSourceçš„æ ¼å¼å†™ï¼Œè€Œä¸”ä¸€èˆ¬éƒ½ä¼šå°†senderä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ å›žåŽ» å‚æ•°ä»¥åŠè¿”å›žå€¼ç±»åž‹æ˜Žç¡®ï¼Œæ˜¯çš„å¯ä»¥æœ‰è¿”å›žå€¼ æ²¡æœ‰å¾ªçŽ¯å¼•ç”¨ï¼Œå› ä¸ºä¸€èˆ¬delegateéƒ½è®¾ç½®ä¸ºweakå±žæ€§ è°ƒè¯•æ¯”è¾ƒæ–¹ä¾¿ï¼Œå› ä¸ºâ€æ•°æ®â€œæµå‘å¾ˆæ¸…æ™° è€¦åˆåº¦æ¯”è¾ƒä½Ž ç¼ºç‚¹ï¼š ä¹¦å†™å¤æ‚ï¼Œæ¯”è¾ƒè€ƒéªŒå‘½åä»¥åŠæ–¹æ³•çš„æ‹†åˆ†èƒ½åŠ› å‘é€å¯¹è±¡å’Œå›žè°ƒæ–¹æ³•åœ¨ä»£ç ä¸Šæ˜¯â€åˆ†å¼€â€œçš„ï¼Œä¸èƒ½ä¸€çœ¼å°±çœ‹å‡ºæ¥é€»è¾‘å…³ç³» delegateä¸€èˆ¬ç”¨weakä¿®é¥°ï¼Œé¿å…é‡ŽæŒ‡é’ˆé—®é¢˜ @optionalæ–¹æ³•éœ€è¦åˆ¤æ–­delegateæ˜¯å¦å®žçŽ° æ³¨æ„äº‹é¡¹ï¼š@optionalæ–¹æ³•éœ€è¦åˆ¤æ–­delegateæ˜¯å¦å®žçŽ°ï¼Œdelegateä¸€èˆ¬ç”¨weakä¿®é¥° 1.4 Block ä»£ç å— ä¼˜ç‚¹ ç®€å•ï¼Œä¸éœ€è¦æå‰å£°æ˜Žï¼Œä¸éœ€è¦addObserver ç±»åž‹å®‰å…¨ï¼Œblockå£°æ˜Žæ—¶å·²ç»æŒ‡å®šäº†å‚æ•°å’Œè¿”å›žå€¼ç±»åž‹ï¼Œå¯¹å¯ä»¥æœ‰è¿”å›žå€¼ å¯è¯»æ€§å¼ºï¼Œæ›´æœ‰è¿žè´¯æ€§ å‡å°‘å‘½åææƒ§ç—‡ï¼Œå› ä¸ºå¯ä»¥ä¸å‘½å ä¸ŽGCDé…åˆè§£å†³å¤šçº¿ç¨‹é—®é¢˜ ç¼ºç‚¹ å°å¿ƒå¾ªçŽ¯å¼•ç”¨é—®é¢˜ å¤šå±‚blocåµŒå¥—æ—¶ï¼Œé€»è¾‘æ¯”è¾ƒä¹± å°å¿ƒblockçš„æ•èŽ·å¤–éƒ¨å˜é‡è¡Œä¸º ä½œä¸ºå±žæ€§æ—¶éœ€è¦ç”¨copyä¿®é¥° è€¦åˆåº¦é«˜ éœ€è¦åˆ¤æ–­blockæ˜¯å¦ä¸ºnil æ³¨æ„äº‹é¡¹ï¼šå¾ªçŽ¯å¼•ç”¨é—®é¢˜ 1.5 Target-Action Target-Actionä¸»è¦è¢«ç”¨äºŽå“åº”ç”¨æˆ·ç•Œé¢äº‹ä»¶æ—¶æ‰€éœ€è¦ä¼ é€’çš„æ¶ˆæ¯ä¸­ã€‚ iOSä¸­çš„UIControlå’ŒMacä¸­çš„NSControl/NSCelléƒ½æ”¯æŒè¿™ç§æœºåˆ¶ã€‚Target-Actionåœ¨æ¶ˆæ¯çš„å‘é€è€…å’ŒæŽ¥æ”¶è€…ä¹‹é—´å»ºç«‹äº†ä¸€ä¸ªéžå¸¸æ¾æ•£è€¦åˆã€‚æ¶ˆæ¯çš„æŽ¥æ”¶è€…ä¸çŸ¥é“å‘é€è€…ï¼Œç”šè‡³æ¶ˆæ¯çš„å‘é€è€…ä¸éœ€è¦é¢„å…ˆçŸ¥é“æ¶ˆæ¯çš„æŽ¥æ”¶è€…ã€‚å¦‚æžœtargetæ˜¯nilï¼Œactionä¼šåœ¨å“åº”é“¾(responder chain)ä¸­è¢«ä¼ é€’ï¼ŒçŸ¥é“æ‰¾åˆ°æŸä¸ªèƒ½å¤Ÿå“åº”è¯¥acitonçš„å¯¹è±¡ã€‚åœ¨iOSä¸­ï¼Œæ¯ä¸ªæŽ§ä»¶éƒ½èƒ½å…³è”å¤šä¸ªtarget-actionã€‚ åŸºäºŽtarget-actionæ¶ˆæ¯ä¼ é€’çš„æœºåˆ¶æœ‰ä¸€ä¸ªå±€é™å°±æ˜¯å‘é€çš„æ¶ˆæ¯ä¸èƒ½æºå¸¦è‡ªå®šä¹‰çš„payloadã€‚åœ¨Macçš„actionæ–¹æ³•ä¸­ï¼ŒæŽ¥æ”¶è€…æ€»æ˜¯è¢«æ”¾åœ¨ç¬¬ä¸€ä¸ªå‚æ•°ä¸­ã€‚è€Œåœ¨iOSä¸­ï¼Œå¯ä»¥é€‰æ‹©æ€§çš„å°†å‘é€è€…å’Œå’Œè§¦å‘actionçš„äº‹ä»¶ä½œä¸ºå‚æ•°ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæ²¡æœ‰åˆ«çš„åŠžæ³•å¯ä»¥å¯¹å‘é€actionæ¶ˆæ¯å†…å®¹åšæŽ§åˆ¶ã€‚ 2 ä½¿ç”¨æ–¹å¼2.1 å…¶å®ƒåšå®¢æŽ¨èæ–¹å¼ ä»¥ä¸‹å›¾ç‰‡æ˜¯ç ´èˆ¹ç¿»è¯‘çš„Communication Patternsï¼Œå·²ç»ç»™å‡ºäº†è¯¦ç»†çš„è®¾è®¡æ–¹å‘ï¼Œå¯ç²¾è¯»ã€‚å‚è€ƒï¼šhttp://www.cocoachina.com/articles/7543 2.2 ä¸ªäººæ€»ç»“ KVOï¼šå±žæ€§è§‚å¯Ÿå™¨ã€åå°„ Notificationï¼šè·¨å±‚çº§é€šä¿¡ã€ä¸€å¯¹å¤šé€šä¿¡ åè®®delegateï¼šé€šä¿¡äº‹ä»¶æ¯”è¾ƒå¤šã€å¼ºåˆ¶ç”¨æˆ·å®žçŽ° Blockï¼šä¸€æ¬¡æ€§ä½¿ç”¨ã€ç®€å•çš„ä¼ å€¼æ“ä½œ Target-Actionï¼šUIæŽ§ä»¶ã€è‡ªå®šä¹‰æŽ§ä»¶ä¸“ç”¨ ç»“è®º&emsp;&emsp;ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘è®¤ä¸ºåœ¨Baseé‡ŒæŠŠtableviewçš„å¸¸ç”¨ä»£ç†æ–¹æ³•éƒ½ç”¨blockå®žçŽ°äº†ä¸€éæ˜¯å¾—ä¸å¿å¤±çš„ï¼Œæ’‡å¼€Baseæ›´åŠ è‡ƒè‚¿å’Œå¯èƒ½å­˜åœ¨çš„å¾ªçŽ¯å¼•ç”¨ä¸è°ˆï¼ç”¨blockä»£æ›¿tableviewçš„delegateæ–¹æ³•å¹¶ä¸èƒ½ä¿è¯è°ƒç”¨è€…ä¸€ä¼šå®žçŽ°ä½ çš„blockï¼Œå¢žåŠ äº†è°ƒç”¨è€…ä½¿ç”¨éš¾åº¦ å‚è€ƒ http://www.cocoachina.com/articles/7543]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å“åº”é“¾]]></title>
    <url>%2F2016%2F05%2F03%2F%E5%93%8D%E5%BA%94%E9%93%BE%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;å“åº”é“¾æ˜¯å•¥ï¼Ÿæˆ‘ä¹Ÿè¯´ä¸æ¸…ï¼Œä¸ç®¡äº†ï¼Œæˆ‘å°±å†™ç‚¹æˆ‘çŸ¥é“çš„å§ &emsp;&emsp;æœ€ç®€å•çš„æŸ¥çœ‹å“åº”é“¾çš„æ–¹æ³•å°±æ˜¯é€’å½’æ‰“å°nextResponder, å¯è§é¡ºåºæ˜¯å½“å‰viewä¸€ç›´åˆ°UIApplicationçš„é¡ºåºï¼Œæœ‰viewå“åº”åˆ™æ­¤é“¾ä¸­æ–­123456789101112131415161718192021222324252627- (void)viewDidLoad &#123;[super viewDidLoad];UIButton *btn1 = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 300, 500)];btn1.backgroundColor = [UIColor redColor];[self.view addSubview:btn1];UIButton *btn2 = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 250, 400)];btn2.backgroundColor = [UIColor blueColor];[btn1 addSubview:btn2];UIButton *btn3 = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 200, 300)];btn3.backgroundColor = [UIColor yellowColor];[btn2 addSubview:btn3];NSArray *arr = @[btn1, btn2, btn3];for (UIButton *btn in arr) &#123;[btn addTarget:self action:@selector(btnClick:) forControlEvents:UIControlEventTouchUpInside];&#125;&#125;- (void)btnClick:(UIButton *)btn &#123;[self logNextResponder:btn];&#125;- (void)logNextResponder:(UIResponder *)responder &#123;NSLog(@&quot;responder:%@&quot;,responder);UIResponder *next = responder.nextResponder;if (next) &#123;[self logNextResponder:next];&#125;&#125; &emsp;&emsp;å†è¯´äº‹ä»¶ä¼ é€’ï¼Œå°±æ˜¯ç‚¹äº†ä¸‹å±å¹•ï¼Œç³»ç»Ÿæ—¶æ€Žä¹ˆçŸ¥é“â€œç‚¹å‡»â€çš„ï¼Ÿç‚¹å‡»ä¹‹åŽï¼Œç”±UIApplicationç®¡ç†äº‹ä»¶ï¼Œç„¶åŽé€’å½’æŸ¥æ‰¾æœ€åˆé€‚çš„viewç±»æŽ¥æ”¶äº‹ä»¶ï¼å¯¹çš„ï¼Œè·ŸnextResponderçš„é¡ºåºç›¸åï¼ä½†ç³»ç»Ÿæ€Žä¹ˆçŸ¥é“åˆ°åº•æ˜¯å“ªä¸ªviewå‘¢ï¼Ÿæ¯•ç«ŸUIApplicationæœ€â€œå¤§â€ï¼Œç‚¹å‡»çš„é‚£ä¸ªviewåªæ˜¯å¤§é‡subviewsä¸­çš„ä¸€ä¸ªï¼è¿™æ—¶éœ€è¦å€ŸåŠ©ä¸¤ä¸ªUIViewçš„å‡½æ•°ï¼š pointInside: withEvent: ç”¨äºŽåˆ¤æ–­æŸä¸ªäº‹ä»¶æ˜¯å¦åœ¨æŸä¸ªviewçš„boundèŒƒå›´å†… hitTest: withEvent: ç”¨äºŽåˆ¤æ–­æŸä¸ªviewæ˜¯å¦å“åº”æŸä¸ªäº‹ä»¶1234567891011121314151617181920- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event &#123;//é¦–å…ˆåˆ¤æ–­æ˜¯å¦å¯ä»¥æŽ¥æ”¶äº‹ä»¶if (self.userInteractionEnabled == NO || self.hidden == YES || self.alpha &lt;= 0.01) return nil;//ç„¶åŽåˆ¤æ–­ç‚¹æ˜¯å¦åœ¨å½“å‰è§†å›¾ä¸Šif ([self pointInside:point withEvent:event] == NO) return nil;//å¾ªçŽ¯éåŽ†æ‰€æœ‰å­è§†å›¾ï¼ŒæŸ¥æ‰¾æ˜¯å¦æœ‰æœ€åˆé€‚çš„è§†å›¾for (NSInteger i = self.subviews.count - 1; i &gt;= 0; i--) &#123;UIView *childView = self.subviews[i];//è½¬æ¢ç‚¹åˆ°å­è§†å›¾åæ ‡ç³»ä¸ŠCGPoint childPoint = [self convertPoint:point toView:childView];//é€’å½’æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨æœ€åˆé€‚çš„viewUIView *fitView = [childView hitTest:childPoint withEvent:event];//å¦‚æžœè¿”å›žéžç©ºï¼Œè¯´æ˜Žå­è§†å›¾ä¸­æ‰¾åˆ°äº†æœ€åˆé€‚çš„viewï¼Œé‚£ä¹ˆè¿”å›žå®ƒif (fitView) &#123;return fitView;&#125;&#125;//å¾ªçŽ¯ç»“æŸï¼Œä»æ—§æ²¡æœ‰åˆé€‚çš„å­è§†å›¾å¯ä»¥å¤„ç†äº‹ä»¶ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºè‡ªå·±æ˜¯æœ€åˆé€‚çš„viewreturn self;&#125; &emsp;&emsp;pointInside: withEvent:çš„å¦™ç”¨ï¼Œå¯æŽ§åˆ¶viewçš„å“åº”èŒƒå›´ ä¾‹å¦‚æ‰©å¤§buttonçš„ç‚¹å‡»èŒƒå›´1234567- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent*)event &#123;CGRect bounds = self.bounds;CGFloat widthDelta = MAX(100.0 , bounds.size.height);;CGFloat heightDelta = MAX(100.0 , bounds.size.height);bounds = CGRectInset(bounds, -0.5 * widthDelta, -0.5 * heightDelta);return CGRectContainsPoint(bounds, point);&#125; &emsp;&emsp;hitTest: withEvent:çš„å¦™ç”¨ï¼Œå¸¸ç”¨äºŽäº‹ä»¶é€ä¼ æˆ–è½¬å‘123456- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event &#123;CGPoint yellowPoint = [self convertPoint:point toView:_yellowView];if ([_yellowView pointInside:yellowPoint withEvent:event]) &#123;return _yellowView;&#125;&#125; &emsp;&emsp;è¯´å®žè¯ï¼Œæˆ‘å¾ˆæ€€ç–‘æœ‰äº›åŒå¿—é—®çš„é—®é¢˜è‡ªå·±éƒ½è¯´ä¸æ¸…ï¼šä½ çŸ¥é“å“åº”é“¾å—ï¼Ÿå“åº”é“¾æ˜¯å•¥ï¼Ÿå‘µå‘µï¼Œå“åº”é“¾æ˜¯å•¥è¿™ç§é—®é¢˜ï¼Œå«æˆ‘æ€Žä¹ˆå›žç­”ï¼Ÿå“åº”é“¾è¦æˆ‘è¯´å°±æ˜¯viewçš„äº‹ä»¶å“åº”ä¼˜å…ˆçº§ï¼ä¸è¿‡è¿™ä¹ˆå›žç­”ï¼Œè‚¯å®šé”™äº†ï¼ä»–ä»¬æƒ³çŸ¥é“çš„æ˜¯ï¼šä¸ºå•¥ç”¨hittestã€pointinsideï¼Œä»¥åŠæ€Žä¹ˆç”¨ã€‚ã€‚ã€‚ã€‚ å‚è€ƒ https://www.jianshu.com/p/36d2eb74fb23 https://www.jianshu.com/p/2f664e71c527]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>UI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¤šçº¿ç¨‹2ï¼šNSOperationã€NSThreadå’Œpthread]]></title>
    <url>%2F2016%2F04%2F21%2F%E5%A4%9A%E7%BA%BF%E7%A8%8B2%EF%BC%9ANSOperation%E3%80%81NSThread%E5%92%8Cpthread%2F</url>
    <content type="text"><![CDATA[1 æ“ä½œé˜Ÿåˆ—&emsp;&emsp;NSOperationã€NSOperationQueue æ˜¯åŸºäºŽ GCD æ›´é«˜ä¸€å±‚çš„å°è£…ï¼Œå®Œå…¨é¢å‘å¯¹è±¡ï¼æ›´é«˜çº§æ„å‘³ç€ å¯ä»¥æ·»åŠ ä¾èµ–å…³ç³»ï¼Œä¾¿äºŽæŽ§åˆ¶æ‰§è¡Œé¡ºåºï¼Œ å¯ä»¥è®¾å®šä¼˜å…ˆçº§ ç›‘æŽ§æ“ä½œçŠ¶æ€ï¼ˆisExecuteingã€isFinishedã€isCancelledï¼‰ å¯ä»¥å®žçŽ°completionBlockæ¥å®žçŽ°å®Œæˆæ—¶è‡ªåŠ¨å›žè°ƒ &emsp;&emsp;ä¸ªäººç†è§£ï¼šä½¿ç”¨NSOperationQueueæ‰çœŸæ­£çš„åˆ›å»ºæ–°çº¿ç¨‹ï¼ŒNSOperationå°±ç›¸å½“äºŽå°±æ˜¯GCDé‡Œé¢çš„blockï¼è¿˜æœ‰å°±æ˜¯æˆ‘ä»¬åªèƒ½â€œåˆ›å»ºâ€çº¿ç¨‹ï¼Œä½†å…·ä½“åˆ°åº•åˆ›å»ºäº†å‡ ä¸ªçº¿ç¨‹ï¼Œæ˜¯ç”±ç³»ç»Ÿå†³å®šçš„â€¦â€¦å¥½å‘ï¼ä¸è¿‡ä¸€èˆ¬æƒ…å†µä¸‹ä¸ç”¨å…³å¿ƒçº¿ç¨‹æ•°é‡ &emsp;&emsp;å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼šcancelæŸä¸ªæ“ä½œï¼ˆæˆ–æ“ä½œé˜Ÿåˆ—ï¼‰ï¼Œå¹¶ä¸ä»£è¡¨æ“ä½œç«‹å³å–æ¶ˆï¼Œåªæ˜¯è®¾ç½®ä¸ªæ ‡å¿—ä½å‘Šè¯‰ç³»ç»Ÿè¿™ä¸ªæ“ä½œï¼ˆæˆ–æ“ä½œé˜Ÿåˆ—ï¼‰éœ€è¦cancelï¼Œç³»ç»ŸåŽ»å†³å®šä»€ä¹ˆæ—¶å€™cancel 1.1 NSOperationä½¿ç”¨ NSBlockOperationçš„ä½¿ç”¨ 1234567891011121314151617181920212223242526272829303132333435NSBlockOperation *opearation = [NSBlockOperation blockOperationWithBlock:^&#123;// do something&#125;];// æ·»åŠ é¢å¤–å­æ“ä½œï¼Œç­‰æ‰€æœ‰å­æ“ä½œ(åŒ…æ‹¬do something)éƒ½å®Œæˆï¼Œæ‰è®¤ä¸ºè¿™æ¬¡æ“ä½œå®Œæˆäº†[opearation addExecutionBlock:^&#123;// other something&#125;];// ä»¥ä¸‹ä¸ºNSOperationå±žæ€§ä»¥åŠè§£é‡Šopearation.name = @&quot;nameå¯åšæ ‡å¿—ä½&quot;;opearation.completionBlock = ^&#123;NSLog(@&quot;å·²å®Œæˆ&quot;);&#125;;// å¼€å¯ä»»åŠ¡[opearation start];// æ˜¯å¦æ­£åœ¨æ‰§è¡Œ[opearation isExecuting];// æ˜¯å¦æ‰§è¡Œå®Œäº†[opearation isFinished];// å½“å‰æ“ä½œæ˜¯å¦æ‰§è¡Œå®Œäº†[opearation isAsynchronous];// æ˜¯å¦å‡†å¤‡å¥½åŽ»æ‰§è¡Œ[opearation isReady];// æ·»åŠ ä¾èµ–, å°±æ˜¯è¦ç­‰beferOpearationå®Œæˆï¼Œæ‰æ‰§è¡Œopearation// æ³¨æ„ä¸€å®šä¸è¦åˆ›å»ºä¸€ä¸ªå¾ªçŽ¯ä¾èµ–ï¼ŒAä¾èµ–Bï¼ŒBä¾èµ–Aï¼Œè¿™æ ·ä¼šé€ æˆæ­»é”// [opearation addDependency:beferOpearation];// ç§»é™¤ä¾èµ–// [opearation removeDependency:beferOpearation];// é˜»å¡žå½“å‰çº¿ç¨‹ï¼Œç›´åˆ°è¯¥æ“ä½œç»“æŸ, GCDçš„æ …æ æ•ˆæžœ[opearation waitUntilFinished];// å–æ¶ˆif (![opearation isCancelled]) &#123;[opearation cancel];&#125; NSInvocationOperationçš„ä½¿ç”¨ 123456NSInvocationOperation *opearation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(test) object:nil];[opearation start];- (void)test &#123;// do something&#125; NSOperationçš„ä½¿ç”¨ 12345678910111213@interface MyOperation: NSOperation@end@implementation MyOperation- (void)main &#123;@autoreleasepool &#123;// do something&#125;&#125;@end// ä½¿ç”¨MyOperation *operation = [[MyOperation alloc] init];[operation start]; 1.2 NSOperationQueueä½¿ç”¨1234567891011121314151617181920212223242526272829NSBlockOperation *opearation = [NSBlockOperation blockOperationWithBlock:^&#123;// do something&#125;];// åˆ›å»ºé˜Ÿåˆ—NSOperationQueue *queue = [[NSOperationQueue alloc] init];// æ·»åŠ æ“ä½œï¼Œæ“ä½œé¡ºåºæœ‰ä¾èµ–å…³ç³»å’ŒqualityOfServiceå†³å®šï¼Œå¹¶ä¸ä¸€å®šæ˜¯FIFO[queue addOperation:opearation];// æ·»åŠ ä¸€ç»„æ“ä½œï¼Œå¹¶é˜»å¡žçº¿ç¨‹åˆ°è¿™ä¸€ç»„æ“ä½œéƒ½å®Œæˆ[queue addOperations:@[opearation] waitUntilFinished:YES];// æ·»åŠ ä¸€ä¸ªæ–°æ“ä½œ[queue addOperationWithBlock:^&#123;// new opearation will do something&#125;];NSLog(@&quot;å½“å‰æ‰€æœ‰çš„æ“ä½œï¼š%@ï¼Œæ³¨æ„æ“ä½œå®ŒæˆåŽä¼šè‡ªåŠ¨ä»Žæ•°ç»„ä¸­ç§»é™¤&quot;, queue.operations);NSLog(@&quot;å½“å‰æ‰€æœ‰çš„æ“ä½œæ•°é‡ï¼š%i&quot;, queue.operationCount);/*æœ€å¤§å¹¶å‘æ“ä½œæ•°ã€‚ç”¨æ¥æŽ§åˆ¶ä¸€ä¸ªç‰¹å®šé˜Ÿåˆ—ä¸­å¯ä»¥æœ‰å¤šå°‘ä¸ªæ“ä½œåŒæ—¶å‚ä¸Žå¹¶å‘æ‰§è¡Œã€‚ä¸ç­‰äºŽå¹¶å‘çº¿ç¨‹çš„æ•°é‡ï¼Œçº¿ç¨‹ä¸ªæ•°æ˜¯ç³»ç»Ÿå†³å®šçš„ï¼Œè€Œä¸”ä¸€ä¸ªæ“ä½œä¹Ÿæœ‰å¯èƒ½ä¸æ­¢å†ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå½“ç„¶maxConcurrentOperationCountä¸º1ï¼Œå³è¡¨ç¤ºä¸²è¡Œé˜Ÿåˆ—*/queue.maxConcurrentOperationCount = 1;// æš‚åœæˆ–å¼€å¯æ‰€æœ‰æ“ä½œif (queue.suspended) &#123;[queue setSuspended:NO];&#125;// é˜»å¡žå½“å‰çº¿ç¨‹ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸­çš„æ“ä½œå…¨éƒ¨æ‰§è¡Œå®Œæ¯•[queue waitUntilAllOperationsAreFinished];// å–æ¶ˆæ‰€æœ‰æ“ä½œ[queue cancelAllOperations]; 2 NSThread&emsp;&emsp;NSThreadå’Œpthreadå¾ˆä¸å¸¸ç”¨ï¼Œè€Œä¸”éœ€è¦è‡ªå·±ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œçº¿ç¨‹åŒæ­¥ã€‚çº¿ç¨‹åŒæ­¥å¯¹æ•°æ®çš„åŠ é”ä¼šæœ‰ä¸€å®šçš„ç³»ç»Ÿå¼€é”€! åˆ›å»ºçº¿ç¨‹æ–¹æ³• 1234567891011121314151617// 1 åˆ›å»ºçº¿ç¨‹å¹¶å¯åŠ¨[NSThread detachNewThreadSelector:@selector(doSomething:) toTarget:self withObject:nil]; // 2 åˆ›å»ºçº¿ç¨‹ï¼Œä½†éœ€è¦æ‰‹åŠ¨å¯åŠ¨NSThread* myThread = [[NSThread alloc] initWithTarget:self selector:@selector(doSomething:) object:nil]; [myThread setName=@&quot;è°ƒè¯•ç”¨&quot;];[myThread setThreadPriority:NSQualityOfServiceDefault];// è®¾ç½®ä¼˜å…ˆçº§[myThread start]; // å¯åŠ¨[myThread cancel]; // å–æ¶ˆ[myThread exit]; // é€€å‡º// 3 ç³»ç»Ÿä¼šåˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹å¹¶å¯åŠ¨[self performSelectorInBackground:@selector(threadRun) withObject:self];// ä¸€èˆ¬é…åˆä½¿ç”¨æ¥æ›´æ–°UI[self performSelectorOnMainThread:@selector(updateUI:) withObject:image waitUntilDone:YES]; // 4 ç»§æ‰¿NSThreadéœ€é‡å†™mainæ–¹æ³• å¸¸ç”¨æ–¹æ³• 1234// èŽ·å–å½“å‰çº¿ç¨‹[NSThread currentThread]// å½“å‰çº¿ç¨‹æ˜¯ä¸æ˜¯ä¸»çº¿ç¨‹[[NSThread currentThread] isMainThread] 2.1ï¼šä¸»çº¿ç¨‹æ£€æµ‹çš„æœ€æ ‡å‡†å†™æ³•1234// RACæºç + (BOOL)isOnMainThread &#123;return [NSOperationQueue.currentQueue isEqual:NSOperationQueue.mainQueue] || [NSThread isMainThread];&#125; 3 pthread è½¬è½½è‡ªï¼šhttps://github.com/ming1016/study/wiki/iOSå¹¶å‘ç¼–ç¨‹ ä¸‹é¢æ˜¯å¹¶å‘4ä¸ªçº¿ç¨‹åœ¨ä¸€ç™¾ä¸‡ä¸ªæ•°å­—ä¸­æ‰¾æœ€å°å€¼å’Œæœ€å¤§å€¼çš„pthreadä¾‹å­ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970#import &lt;pthread.h&gt;struct threadInfo &#123;uint32_t * inputValues;size_t count;&#125;;struct threadResult &#123;uint32_t min;uint32_t max;&#125;;void * findMinAndMax(void *arg)&#123;struct threadInfo const * const info = (struct threadInfo *) arg;uint32_t min = UINT32_MAX;uint32_t max = 0;for (size_t i = 0; i &lt; info-&gt;count; ++i) &#123;uint32_t v = info-&gt;inputValues[i];min = MIN(min, v);max = MAX(max, v);&#125;free(arg);struct threadResult * const result = (struct threadResult *) malloc(sizeof(*result));result-&gt;min = min;result-&gt;max = max;return result;&#125;int main(int argc, const char * argv[])&#123;size_t const count = 1000000;uint32_t inputValues[count];// ä½¿ç”¨éšæœºæ•°å­—å¡«å…… inputValuesfor (size_t i = 0; i &lt; count; ++i) &#123;inputValues[i] = arc4random();&#125;// å¼€å§‹4ä¸ªå¯»æ‰¾æœ€å°å€¼å’Œæœ€å¤§å€¼çš„çº¿ç¨‹size_t const threadCount = 4;pthread_t tid[threadCount];for (size_t i = 0; i &lt; threadCount; ++i) &#123;struct threadInfo * const info = (struct threadInfo *) malloc(sizeof(*info));size_t offset = (count / threadCount) * i;info-&gt;inputValues = inputValues + offset;info-&gt;count = MIN(count - offset, count / threadCount);int err = pthread_create(tid + i, NULL, &amp;findMinAndMax, info);NSCAssert(err == 0, @&quot;pthread_create() failed: %d&quot;, err);&#125;// ç­‰å¾…çº¿ç¨‹é€€å‡ºstruct threadResult * results[threadCount];for (size_t i = 0; i &lt; threadCount; ++i) &#123;int err = pthread_join(tid[i], (void **) &amp;(results[i]));NSCAssert(err == 0, @&quot;pthread_join() failed: %d&quot;, err);&#125;// å¯»æ‰¾ min å’Œ maxuint32_t min = UINT32_MAX;uint32_t max = 0;for (size_t i = 0; i &lt; threadCount; ++i) &#123;min = MIN(min, results[i]-&gt;min);max = MAX(max, results[i]-&gt;max);free(results[i]);results[i] = NULL;&#125;NSLog(@&quot;min = %u&quot;, min);NSLog(@&quot;max = %u&quot;, max);return 0;&#125; ä½¿ç”¨NSThreadæ¥å†™ 123456789101112131415161718192021222324252627282930313233343536373839404142@interface FindMinMaxThread : NSThread@property (nonatomic) NSUInteger min;@property (nonatomic) NSUInteger max;- (instancetype)initWithNumbers:(NSArray *)numbers;@end@implementation FindMinMaxThread &#123;NSArray *_numbers;&#125;- (instancetype)initWithNumbers:(NSArray *)numbers&#123;self = [super init];if (self) &#123;_numbers = numbers;&#125;return self;&#125;- (void)main&#123;NSUInteger min;NSUInteger max;// è¿›è¡Œç›¸å…³æ•°æ®çš„å¤„ç†self.min = min;self.max = max;&#125;@end//å¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œåˆ›å»ºä¸€ä¸ªçº¿ç¨‹å¯¹è±¡NSMutableSet *threads = [NSMutableSet set];NSUInteger numberCount = self.numbers.count;NSUInteger threadCount = 4;for (NSUInteger i = 0; i &lt; threadCount; i++) &#123;NSUInteger offset = (count / threadCount) * i;NSUInteger count = MIN(numberCount - offset, numberCount / threadCount);NSRange range = NSMakeRange(offset, count);NSArray *subset = [self.numbers subarrayWithRange:range];FindMinMaxThread *thread = [[FindMinMaxThread alloc] initWithNumbers:subset];[threads addObject:thread];[thread start];&#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¤šçº¿ç¨‹1ï¼šæ¦‚å¿µå’ŒGCD]]></title>
    <url>%2F2016%2F04%2F17%2F%E5%A4%9A%E7%BA%BF%E7%A8%8B1%EF%BC%9A%E6%A6%82%E5%BF%B5%E5%92%8CGCD%2F</url>
    <content type="text"></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å®šæ—¶å™¨]]></title>
    <url>%2F2016%2F03%2F30%2F%E5%AE%9A%E6%97%B6%E5%99%A8%2F</url>
    <content type="text"><![CDATA[1 NSTimer1.1 NSTimerå‡†ä¸å‡†ï¼Ÿ æ— è®ºæ˜¯å•æ¬¡æ‰§è¡Œçš„NSTimerè¿˜æ˜¯é‡å¤æ‰§è¡Œçš„NSTimeréƒ½ä¸æ˜¯å‡†æ—¶çš„ åŽŸå›  åªæ·»åŠ åˆ°äº†runloopçš„defaultmodeé‡Œï¼Œå½“scrollViewæ»‘åŠ¨æ—¶runloopä¼šåˆ‡æ¢åˆ°UITrackingRunLoopModeä¸‹ï¼Œé€ æˆNSTimerå»¶åŽ å½“å‰çº¿ç¨‹é˜»å¡žæˆ–æ­£åœ¨è¿›è¡Œå¤§é‡æ•°æ®è®¡ç®—ï¼ŒNSTimerä¼šå»¶åŽå¤„ç† 1.2 åˆ›å»ºNSTimeréœ€è¦åŠ åˆ°runloopé‡Œ é»˜è®¤NSTimeråŠ åˆ°runloopæ˜¯NSDefaultRunLoopModeæ¨¡å¼ï¼Œæ­¤æ¨¡å¼ä¸‹scrollviewæ»‘åŠ¨æ—¶ä¼šåˆ‡æ¢åˆ°UITrackingRunLoopModeä¸‹æš‚åœNSTimerï¼Œå› æ­¤éœ€è¦è®©NSTimeréƒ½å“åº”ï¼Œéœ€è¦ä½¿ç”¨NSRunLoopCommonModes æ•…runloopå¼ºæŒæœ‰NSTimerï¼Œæ¥ä¿è¯timeræŒ‰æ—¶è§¦å‘12NSTimer *bTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(automaticCountDown) userInfo:nil repeats:YES];[[NSRunLoop mainRunLoop] addTimer:bTimer forMode:NSRunLoopCommonModes]; 1.3 scheduledTimerWithå’ŒtimerWithçš„åŒºåˆ« timerWithåˆ›å»ºçš„NSTimeréœ€è¦æ‰‹åŠ¨æ·»åŠ åˆ°runloopé‡Œ scheduledTimerWithåˆ›å»ºçš„NSTimerå·²ç»è‡ªåŠ¨æ·»åŠ åˆ°å½“å‰runloopçš„NSDefaultRunLoopModeæ¨¡å¼1234567891011/// Creates and returns a new NSTimer object initialized with the specified block object. This timer needs to be scheduled on a run loop (via -[NSRunLoop addTimer:]) before it will fire./// - parameter: timeInterval The number of seconds between firings of the timer. If seconds is less than or equal to 0.0, this method chooses the nonnegative value of 0.1 milliseconds instead/// - parameter: repeats If YES, the timer will repeatedly reschedule itself until invalidated. If NO, the timer will be invalidated after it fires./// - parameter: block The execution body of the timer; the timer itself is passed as the parameter to this block when executed to aid in avoiding cyclical references+ (NSTimer *)timerWithTimeInterval:(NSTimeInterval)interval repeats:(BOOL)repeats block:(void (^)(NSTimer *timer))block API_AVAILABLE(macosx(10.12), ios(10.0), watchos(3.0), tvos(10.0));/// Creates and returns a new NSTimer object initialized with the specified block object and schedules it on the current run loop in the default mode./// - parameter: ti The number of seconds between firings of the timer. If seconds is less than or equal to 0.0, this method chooses the nonnegative value of 0.1 milliseconds instead/// - parameter: repeats If YES, the timer will repeatedly reschedule itself until invalidated. If NO, the timer will be invalidated after it fires./// - parameter: block The execution body of the timer; the timer itself is passed as the parameter to this block when executed to aid in avoiding cyclical references+ (NSTimer *)scheduledTimerWithTimeInterval:(NSTimeInterval)interval repeats:(BOOL)repeats block:(void (^)(NSTimer *timer))block API_AVAILABLE(macosx(10.12), ios(10.0), watchos(3.0), tvos(10.0)); 1.4 NSTimerå†…å­˜æ³„æ¼ NSTimerçš„targetæ˜¯strongå¼ºæŒæœ‰çš„ï¼Œå³NSTimeræŒæœ‰targetï¼å¦‚æžœtargetå¼ºæŒæœ‰NSTimerï¼Œå°±ä¼šå½¢æˆå¾ªçŽ¯å¼•ç”¨ 1targetï¼š The object to which to send the message specified by aSelector when the timer fires. The timer maintains a strong reference to this object until it (the timer) is invalidated. weakä¿®é¥°NSTimerä¸ç®¡ç”¨ï¼Œåªèƒ½è§£é™¤targetå¯¹NSTimerçš„å¼ºæŒæœ‰ï¼ä¸€èˆ¬æƒ…å†µä¸‹å¾ªçŽ¯å¼•ç”¨åªè¦æ–­æŽ‰ä¸€çŽ¯å°±å¯ä»¥é‡Šæ”¾äº†ï¼Œä½†runloopè¿˜å¼•ç”¨ç€NSTimerï¼ŒNSTimeråˆå¼•ç”¨targetï¼Œå› æ­¤ä¹Ÿæ— æ³•è§£å†³å†…å­˜æ³„æ¼é—®é¢˜ å¾ˆå¤šæ—¶å€™ä½¿ç”¨retainæˆ–strongä¿®é¥°ï¼Œæ›´å¤šæ˜¯æé†’å¼€å‘è€…éœ€è¦æ‰‹åŠ¨å¤„ç†NSTimer 12345678910111213141516- (instancetype)init &#123;self = [super init];if (self) &#123;_timer = [NSTimer timerWithTimeInterval:1.0 target:self selector:@selector(timerRun) userInfo:nil repeats:YES];[[NSRunLoop currentRunLoop] addTimer:_timer forMode:NSDefaultRunLoopMode];&#125;return self;&#125;- (void)timerRun &#123;NSLog(@&quot;%s&quot;, __func__);&#125;- (void)dealloc &#123;[self.timer invalidate];NSLog(@&quot;%s&quot;, __func__);&#125; ä½¿ç”¨blockè§£é™¤å¼•ç”¨ï¼Œå‚è€ƒã€ŠEffective Objective-Cã€‹ç¬¬52æ¡ 12345678910111213141516171819- (void)viewDidLoad &#123;[super viewDidLoad];__weak id weakSelf = self;NSTimer* timer = [NSTimer scheduledTimerWithTimeInterval:1 repeats:YES block:^(NSTimer *timer) &#123;NSLog(@&quot;block %@&quot;,weakSelf);&#125;];&#125;@implementation NSTimer(BlockTimer)+ (NSTimer*)scheduledTimerWithTimeInterval:(NSTimeInterval)interval repeats:(BOOL)repeats blockTimer:(void (^)(NSTimer *))block&#123;NSTimer* timer = [NSTimer scheduledTimerWithTimeInterval:interval target:self selector:@selector(timered:) userInfo:[block copy] repeats:repeats];return timer;&#125;+ (void)timered:(NSTimer*)timer &#123;void (^block)(NSTimer *timer) = timer.userInfo;block(timer);&#125;@end æ³¨æ„å½“repeats=NOæ—¶æ‰§è¡Œå®Œå®šæ—¶ä»»åŠ¡ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œinvalidateæ“ä½œï¼Œå³ä¸ä¼šæœ‰å¾ªçŽ¯å¼•ç”¨ 1.5 é”€æ¯NSTimer1234- (void)invalidateTimer &#123;[_timer invalidate];_timer = nil;&#125; 1.6 ç«‹å³æ‰§è¡Œ NSTimeræ— è®ºæ˜¯å¾ªçŽ¯repeats=YESï¼Œè¿˜æ˜¯å»¶è¿Ÿrepeats=NOï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨éƒ½æ˜¯Xæ—¶é—´åŽï¼Œå¦‚æžœæƒ³ç«‹å³æ‰§è¡Œï¼Œå¯é‡‡ç”¨fireæ–¹æ³•1[_timer fire]; 1.7 åˆ›å»ºå’Œé”€æ¯è¦åœ¨åŒä¸€çº¿ç¨‹ å› ä¸ºåˆ›å»ºTimerè¦æŠŠTimeråŠ å…¥åˆ°è¯¥çº¿ç¨‹å¯¹åº”çš„RunLoopä¸­ï¼Œæ•…åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­æ‰èƒ½cancelè¿™ä¸ªTimer12345678910111213141516// åˆ›å»ºNSThread *thread = [[NSThread alloc] initWithTarget:self selector:@selector(newThread) object:nil];[thread start];- (void)newThread &#123;@autoreleasepool&#123;_timer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(addTime) userInfo:nil repeats:YES];// å³ä¾¿æ˜¯scheduledTimerWithæ–¹æ³•ä¹Ÿéœ€æ‰‹åŠ¨åŠ å…¥runloop[[NSRunLoop currentRunLoop] addTimer:_timer forMode:NSDefaultRunLoopMode];// å­çº¿ç¨‹éœ€æ‰‹åŠ¨å¼€å¯runloop[[NSRunLoop currentRunLoop] run];&#125;&#125;// é”€æ¯[self performSelector:@selector(invalidateTimer) onThread:thread withObject:nil waitUntilDone:YES]; 2 CADisplayLink CADisplayLinkæ˜¯ç”¨äºŽåŒæ­¥å±å¹•åˆ·æ–°é¢‘çŽ‡çš„è®¡æ—¶å™¨ï¼Œioséƒ½æ˜¯60hzï¼Œå³æ¯ç§’60æ¬¡å›žè°ƒselectorï¼Œå›žè°ƒé¢‘çŽ‡é€šè¿‡frameIntervalå±žæ€§è®¾ç½®ï¼ŒCADisplayLinkçš„selectoræ¯ç§’è°ƒç”¨æ¬¡æ•°=60/frameInterval ç²¾å‡†åº¦æ¯”è¾ƒé«˜,ä½†å¹¶ä¸ä¿è¯éƒ½æ˜¯60hzçš„åˆ·æ–°é¢‘çŽ‡ï¼Œä¾‹å¦‚ä¸»çº¿ç¨‹å¡é¡¿ 2.1 é‡è¦å±žæ€§ä»‹ç» frameInterval æ ‡è¯†é—´éš”å¤šå°‘å¸§è°ƒç”¨ä¸€æ¬¡selectoræ–¹æ³•ï¼Œé»˜è®¤å€¼æ˜¯1ï¼Œå³æ¯å¸§éƒ½è°ƒç”¨ä¸€æ¬¡ã€‚å®˜æ–¹æ–‡æ¡£ä¸­å¼ºè°ƒï¼Œå½“è¯¥å€¼è¢«è®¾å®šå°äºŽ1æ—¶ï¼Œç»“æžœæ˜¯ä¸å¯é¢„çŸ¥çš„ã€‚ duration è¡¨ç¤ºä¸¤æ¬¡å±å¹•åˆ·æ–°ä¹‹é—´çš„æ—¶é—´é—´éš”ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¥å±žæ€§åœ¨targetçš„selectorè¢«é¦–æ¬¡è°ƒç”¨ä»¥åŽæ‰ä¼šè¢«èµ‹å€¼ã€‚selectorçš„è°ƒç”¨é—´éš”æ—¶é—´è®¡ç®—æ–¹å¼æ˜¯ï¼šæ—¶é—´=durationÃ—frameIntervalã€‚ timestamp å½“å‰å¸§çš„æ—¶é—´æˆ³ 2.2 ç¤ºä¾‹1234567891011121314151617@property (nonatomic, strong) CADisplayLink* displayLink;- (void)startDisplayLink &#123;_displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(displayLinkProc)];[_displayLink addToRunLoop:[NSRunLoop mainRunLoop] forMode:NSRunLoopCommonModes];&#125;- (void)stopDisplayLink &#123;[_displayLink setPaused:YES];[_displayLink removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];[_displayLink invalidate];_displayLink = nil;&#125;- (void)displayLinkProc &#123;&#125; 3 GCDå®žçŽ°timer ç¤ºä¾‹ä»£ç  12345678910111213141516171819202122232425262728@property (nonatomic, strong) dispatch_source_t countDownTimer;// å¼€å¯timer- (void)startTimer &#123;if (!_timer) &#123;// è®¾ç½®æ—¶é—´é—´éš”ï¼Œæ¯ç§’æ‰§è¡ŒNSTimeInterval period = 1.0;dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);_timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, queue);/*dispatch_walltime å¯ä»¥è®©è®¡æ—¶å™¨æŒ‰ç…§çœŸå®žæ—¶é—´é—´éš”è¿›è¡Œè®¡æ—¶ï¼Œä½†ä½¿ç”¨dispatch_time æˆ–è€… DISPATCH_TIME_NOW æ—¶å½“ç³»ç»Ÿä¼‘çœ çš„æ—¶å€™è®¡æ—¶å™¨ä¼šåœæ­¢*/ dispatch_source_set_timer(_timer, dispatch_walltime(NULL, 0), period * NSEC_PER_SEC, 0);/*dispatch_source_set_event_handler è¿™ä¸ªå‡½æ•°åœ¨æ‰§è¡Œå®Œä¹‹åŽï¼Œblock ä¼šç«‹é©¬æ‰§è¡Œä¸€é,ç›¸å½“äºŽNSTimer fire*/ dispatch_source_set_event_handler(_timer, ^&#123;// do something&#125;);dispatch_resume(_timer);&#125;&#125;// å…³é—­timer- (void)stopTimer &#123;if (_timer) &#123;dispatch_source_cancel(_timer);_timer = nil;&#125;&#125; æ³¨æ„æŒ‚èµ·åŽä¸å¾—é‡Šæ”¾timer 12dispatch_suspend(_timer);_timer = nil; // EXC_BAD_INSTRUCTION å´©æºƒ å‚è€ƒ]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è§£å†³å¿«é€Ÿpushçš„å´©æºƒ]]></title>
    <url>%2F2016%2F03%2F06%2F%E8%A7%A3%E5%86%B3%E5%BF%AB%E9%80%9Fpush%E7%9A%84%E5%B4%A9%E6%BA%83%2F</url>
    <content type="text"><![CDATA[Crashè¯¦æƒ…ï¼šCanâ€™t add self as subview crash åŽŸç†å°±æ˜¯å½“å‰æœ‰è·³è½¬åŠ¨ç”»å°±æŠ›å¼ƒå…¶å®ƒVC 123456789101112131415161718192021222324@implementation NSObject (Hook)#pragma mark hook+ (void)hookWithOriginalSelector:(SEL)originalSelector swizzledSelector:(SEL)swizzledSelector &#123;Class class = [self class];Method originalMethod = class_getInstanceMethod(class, originalSelector);Method swizzledMethod = class_getInstanceMethod(class, swizzledSelector);BOOL didAddMethod = class_addMethod(class,originalSelector,method_getImplementation(swizzledMethod),method_getTypeEncoding(swizzledMethod));if (didAddMethod) &#123;class_replaceMethod(class,swizzledSelector,method_getImplementation(originalMethod),method_getTypeEncoding(originalMethod));&#125;else &#123;method_exchangeImplementations(originalMethod, swizzledMethod);&#125;&#125;@end UINavigationController &amp; UIViewController 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108#import &quot;UINavigationController+Safely.h&quot;#import &quot;NSObject+Hook.h&quot;static char const * const kViewTransitionInProgress = &quot;kViewTransitionInProgress&quot;;@implementation UINavigationController (Safely)- (void)setViewTransitionInProgress:(BOOL)property &#123;NSNumber *number = [NSNumber numberWithBool:property];objc_setAssociatedObject(self, kViewTransitionInProgress, number , OBJC_ASSOCIATION_RETAIN);&#125;- (BOOL)viewTransitionInProgress &#123;NSNumber *number = objc_getAssociatedObject(self, kViewTransitionInProgress);return [number boolValue];&#125;+ (void)load &#123;static dispatch_once_t onceToken;dispatch_once(&amp;onceToken, ^&#123;[[self class] hookWithOriginalSelector:@selector(pushViewController:animated:) swizzledSelector:@selector(safe_PushViewController:animated:)];[[self class] hookWithOriginalSelector:@selector(popViewControllerAnimated:) swizzledSelector:@selector(safe_PopViewControllerAnimated:)];[[self class] hookWithOriginalSelector:@selector(popToViewController:animated:) swizzledSelector:@selector(safe_PopToViewController:animated:)];[[self class] hookWithOriginalSelector:@selector(popToRootViewControllerAnimated:) swizzledSelector:@selector(safe_PopToRootViewControllerAnimated:)];&#125;);&#125;#pragma mark - hookSelecter- (NSArray *)safe_PopToRootViewControllerAnimated:(BOOL)animated &#123;if (self.viewTransitionInProgress) &#123;return nil;&#125;if (animated) &#123;self.viewTransitionInProgress = YES;&#125;NSArray *VCArray = [self safe_PopToRootViewControllerAnimated:animated];if (VCArray.count == 0) &#123;self.viewTransitionInProgress = NO;&#125;return VCArray;&#125;- (NSArray *)safe_PopToViewController:(UIViewController *)viewController animated:(BOOL)animated &#123;if (self.viewTransitionInProgress) &#123;return nil;&#125;if (animated)&#123;self.viewTransitionInProgress = YES;&#125;NSArray *VCArray = [self safe_PopToViewController:viewController animated:animated];if (VCArray.count == 0) &#123;self.viewTransitionInProgress = NO;&#125;return VCArray;&#125;- (UIViewController *)safe_PopViewControllerAnimated:(BOOL)animated &#123;if (self.viewTransitionInProgress) &#123;return nil;&#125;if (animated) &#123;self.viewTransitionInProgress = YES;&#125;UIViewController *VC = [self safe_PopViewControllerAnimated:animated];if (VC == nil) &#123;self.viewTransitionInProgress = NO;&#125;return VC;&#125;- (void)safe_PushViewController:(UIViewController *)viewController animated:(BOOL)animated &#123;if (self.viewTransitionInProgress == NO) &#123;[self safe_PushViewController:viewController animated:animated];if (animated) &#123;self.viewTransitionInProgress = YES;&#125;&#125;&#125;@end@implementation UIViewController (Safely)+ (void)load &#123;method_exchangeImplementations(class_getInstanceMethod(self, @selector(safe_ViewDidAppear:)),class_getInstanceMethod(self, @selector(viewDidAppear:)));method_exchangeImplementations(class_getInstanceMethod(self, @selector(safe_ViewDidDisappear:)),class_getInstanceMethod(self, @selector(viewDidDisappear:)));&#125;- (void)safe_ViewDidAppear:(BOOL)animated &#123;if (self.navigationController) &#123;self.navigationController.viewTransitionInProgress = NO;&#125;[self safe_ViewDidAppear:animated];&#125;- (void)safe_ViewDidDisappear:(BOOL)animated &#123;if (self.navigationController) &#123;self.navigationController.viewTransitionInProgress = NO;&#125;[self safe_ViewDidDisappear:animated];&#125;@end]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[NSDateä½¿ç”¨]]></title>
    <url>%2F2016%2F02%2F25%2FNSDate%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;ä»Šå¤©å¼€å‘æ—¶é‡åˆ°éœ€è¦èŽ·å–å½“å‰æ˜¯æ˜ŸæœŸå‡ çš„éœ€æ±‚ï¼è™½ç„¶NSDateç»å¸¸åœ¨ç”¨ï¼Œä½†è¿™ä¸ªéœ€æ±‚ç¡®å®žä¸çŸ¥é“ï¼Œç™¾åº¦äº†ä¸€ä¸‹ï¼Œå…¶å®žæŒºç®€å•ï¼é¡ºä¾¿æ€»ç»“ä¸€ä¸‹NSDateçš„ä½¿ç”¨ï¼ŒäºŽæ˜¯ä¹Žåˆæ°´äº†ä¸€ç¯‡ 1 æ¦‚å¿µç†è§£ NSDateèŽ·å–çš„éƒ½æ˜¯å½“å‰æœºå™¨çš„æ—¶é—´ï¼Œç”¨æˆ·æ˜¯å¯ä»¥æ”¹çš„ï¼NSDateæ‰€èŽ·å–åˆ°çš„æ—¶é—´, éƒ½æ˜¯ç›¸å¯¹äºŽGMTçš„, å³æ ¼æž—å¨æ²»æ ‡å‡†æ—¶é—´ 1.1 æ—¶åŒºé—®é¢˜ å½“å‰æ—¶åŒºçš„æ—¶é—´ 123456// é›¶æ—¶åŒºæ—¶é—´NSDate *date = [NSDate date];// å¦‚æžœæ²¡æœ‰æŒ‡å®šNSDateFormatterçš„æ—¶åŒºï¼ŒNSDateFormatteré»˜è®¤æ˜¯å½“å‰æ—¶åŒºçš„æ—¶é—´NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];[dateFormat setDateFormat:@&quot;yyyy-MM-dd HH:mm:ss&quot;];NSString *time = [dateFormat stringFromDate:date]; æŒ‡å®šæ—¶åŒº 12345678910NSDate *date = [NSDate date];NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];[dateFormat setDateFormat:@&quot;yyyy-MM-dd HH:mm:ss&quot;];NSLog(@&quot;ç³»ç»Ÿæ—¶åŒºï¼š%@&quot;, [NSTimeZone systemTimeZone]);dateFormat.timeZone = [NSTimeZone timeZoneWithName:@&quot;Asia/Shanghai&quot;];// è¿˜å¯ç”¨GMT+0800 åŠ 8å°æ—¶, GMT-0800å‡8å°æ—¶æ¥è¡¨ç¤º// dateFormat.timeZone = [NSTimeZone timeZoneWithName:@&quot;GMT+0800&quot;];// ç›¸å¯¹0æ—¶åŒºçš„ ç§’ æ•°// dateFormat.timeZone = [NSTimeZone timeZoneForSecondsFromGMT:28800];NSString *time = [dateFormat stringFromDate:date]; 1.2 æ—¶é—´æ¯”è¾ƒ å”¯ä¸€éœ€è¦æ³¨æ„çš„ï¼šéœ€è¦è½¬åŒ–ä¸ºåŒä¸€æ—¶åŒºï¼Œä¸åŒæ—¶åŒºæ—¶é—´æ¯”ä»·æ²¡æœ‰æ„ä¹‰1234- (NSDate *)earlierDate:(NSDate *)anotherDate;- (NSDate *)laterDate:(NSDate *)anotherDate;- (NSComparisonResult)compare:(NSDate *)other;- (BOOL)isEqualToDate:(NSDate *)otherDate; 1.3 timeIntervalSinceXXX1234567// ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•é»˜è®¤éƒ½æ˜¯0æ—¶åŒºæ—¶é—´ï¼Œä¸­å›½è¦ + 8ä¸ªå°æ—¶// è‡ª2001å¹´1æœˆ1æ—¥æ™šä¸Š12ç‚¹NSDate *date1 = [NSDate dateWithTimeIntervalSinceReferenceDate:0];// è‡ª19070å¹´1æœˆ1æ—¥æ™šä¸Š12ç‚¹NSDate *date2 = [NSDate dateWithTimeIntervalSince1970:0];// nowNSDate *date3 = [NSDate dateWithTimeIntervalSinceNow:0]; 2å¸¸è§ç”¨æ³•2.1 NSDateä¸ŽNSStringè½¬åŒ–1234567891011121314151617181920212223242526272829// NSDateFormatteræ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè€Œä¸”ä½¿ç”¨èµ·æ¥å¼€é”€éžå¸¸å¤§ï¼Œæ•…å¯ä»¥åªåˆå§‹åŒ–ä¸€æ¬¡å³å¯static NSDateFormatter *dateFormatter = nil;NSDateFormatter *shareDateFormatter() &#123;static dispatch_once_t onceToken;dispatch_once(&amp;onceToken, ^&#123;dateFormatter = [[NSDateFormatter alloc] init];&#125;);return dateFormatter;&#125;@implementation NSDate (String)- (NSString *)dateStringWithFormat:(NSString *)format &#123;[shareDateFormatter() setDateFormat:format];return [shareDateFormatter() stringFromDate:self];&#125;@end@implementation NSString (Date)- (NSDate *)dateWithFormat:(NSString *)format &#123;[getDateFormatter() setDateFormat:format];return [getDateFormatter() dateFromString:self];&#125;@end https://stackoverflow.com/questions/24777496/how-can-i-convert-string-date-to-nsdate?r=SearchResults 2.2 çŽ°åœ¨æ˜¯æ˜ŸæœŸå‡ 12345678910111213141516171819202122232425262728293031323334353637383940+ (NSDateComponents *)dateComponentsFromDate:(NSDate* )date&#123;NSDateComponents *components = [[NSDateComponents alloc] init];// å¯èŽ·å¾—å¾ˆå¤šä¿¡æ¯ï¼Œè‡ªå·±çœ‹å§NSInteger unitFlags = NSCalendarUnitYear | NSCalendarUnitMonth | NSCalendarUnitDay | NSCalendarUnitWeekday | NSCalendarUnitWeekOfMonth | NSCalendarUnitWeekOfYear;NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSCalendarIdentifierGregorian];calendar.locale = [[NSLocale alloc] initWithLocaleIdentifier:@&quot;zh_CN&quot;];components = [calendar components:unitFlags fromDate:date];return components;&#125;// æ³¨æ„åœ¨è¥¿æ–¹å‘¨æ—¥æ˜¯ç¬¬ä¸€å¤©+ (NSString *)getWeekDayFromDateComponents:(NSDateComponents *) comps&#123;NSString *weekDayStr = @&quot;&quot;;switch ([comps weekday]) &#123;case 1:weekDayStr = @&quot;å‘¨æ—¥&quot;;break;case 2:weekDayStr = @&quot;å‘¨ä¸€&quot;;break;case 3:weekDayStr = @&quot;å‘¨äºŒ&quot;;break;case 4:weekDayStr = @&quot;å‘¨ä¸‰&quot;;break;case 5:weekDayStr = @&quot;å‘¨å››&quot;;break;case 6:weekDayStr = @&quot;å‘¨äº”&quot;;break;case 7:weekDayStr = @&quot;å‘¨å…­&quot;;break;default:break;&#125;return weekDayStr;&#125; https://stackoverflow.com/questions/3694867/nsdate-get-year-month-day?r=SearchResults 2.3 èŽ·å–å½“å‰æ—¶é—´è‹¥å¹²å¹´ã€æœˆã€æ—¥ä¹‹åŽçš„æ—¶é—´1234567891011121314151617+ (NSDate *)dateWithFromDate:(NSDate *)date years:(NSInteger)years months:(NSInteger)months days:(NSInteger)days&#123;NSDate * latterDate;if (date) &#123;latterDate = date;&#125;else&#123;latterDate = [NSDate date];&#125;NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSCalendarIdentifierGregorian];NSDateComponents *comps = [calendar components:NSCalendarUnitYear|NSCalendarUnitMonth|NSCalendarUnitDay|NSCalendarUnitHour|NSCalendarUnitMinutefromDate:latterDate];[comps setYear:years];[comps setMonth:months];[comps setDay:days];return [calendar dateByAddingComponents:comps toDate:latterDate options:0];&#125; https://stackoverflow.com/questions/5067785/how-do-i-add-1-day-to-an-nsdate?r=SearchResults å‚è€ƒ https://www.cnblogs.com/wayne23/archive/2013/03/25/2981009.html https://stackoverflow.com/questions/5965044/how-to-compare-two-nsdates-which-is-more-recent/5965106?r=SearchResults#5965106]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åˆ›ä¸š36æ¡å†›è§„]]></title>
    <url>%2F2016%2F02%2F01%2F%E5%88%9B%E4%B8%9A36%E6%9D%A1%E5%86%9B%E8%A7%84%2F</url>
    <content type="text"><![CDATA[å†›è§„1 ä¸æ˜¯æ¯ä¸ªäººéƒ½é€‚åˆåˆ›ä¸š åˆ›ä¸šå¾ˆéš¾ï¼ŒæˆåŠŸè€…å¯¥å¯¥æ— å‡ ï¼å°±åƒä¿žæ•æ´ªè¯´çš„ï¼Œå¾ˆå¤šäººæ­»åœ¨äº†ç¬¬äºŒå¤©æ™šä¸Š åˆ›ä¸šæ˜¯åšæœªçŸ¥çš„äº‹ï¼Œä¸å¯èƒ½å‡ºå‘å‰å°±æƒ³æ¸…æ¥šæ‰€æœ‰çš„äº‹ï¼Œåˆ›ä¸šè€…éœ€è¦åœ¨å‰è¿›çš„è¿‡ç¨‹ä¸­éšæœºåº”å˜ åˆ›ä¸šè·¯ä¸Šï¼Œæœ€å¸¸è§çš„ä¸æ˜¯æˆåŠŸæˆ–å¤±è´¥ï¼Œè€Œæ˜¯é•¿æ—¶é—´çš„è‹¦è‹¦æŒ£æ‰Ž åˆ›ä¸šçš„æœºä¼šæˆæœ¬å¾ˆé«˜ï¼Œå¼€å§‹åˆ›ä¸šä¹‹å‰ä¸€å®šè¦è®¤æ¸…è‡ªå·±ï¼Œæˆ˜ç•¥è§„åˆ’åœ¨å‰ åˆ›ä¸šè€…è¦è¿‡éžäººçš„ç”Ÿæ´» åˆ›ä¸šè€…çš„æ—¶é—´è¡¨ä¸Šæ²¡æœ‰ç”Ÿæ´»æ—¶é—´ åˆ›ä¸šè€…è¦ç»™æ‰€æœ‰äººäº¤ä»£ï¼å¿…é¡»æ‰¿æ‹…æ‰€æœ‰çš„è´£ä»»ï¼Œå¾ˆç®€å•å› ä¸ºæ²¡å¾—é€‰ï¼ä½†è¯·è®°ä½æ²¡æœ‰é€‰æ‹©å¾€å¾€æ˜¯æœ€å¥½çš„é€‰æ‹© åªæœ‰ä¸åˆ°ååˆ†ä¹‹ä¸€çš„äººé€‚åˆåˆ›ä¸š æ‰“å·¥å’Œåˆ›ä¸šæ‰€éœ€èƒ½åŠ›ä¸ä¸€æ · é¢†å†›äººç‰©åº”å…·å¤‡4ä¸ªç´ è´¨ï¼š1ã€ç›®æ ‡é«˜è¿œï¼Œæ„å¿—åšå®šï¼›2ã€å¿ƒèƒ¸å¼€é˜”ï¼Œæƒ…å•†è¦é«˜ï¼›3ã€ä¼ä¸šåˆ©ç›Šæ”¾ç¬¬ä¸€ä½ï¼›4ã€å­¦ä¹ èƒ½åŠ›å¼ºï¼Œçˆ±å­¦ä¹ è€Œä¸”ä¼šå­¦ä¹  åˆ›ä¸šè€…åº”å…·å¤‡4ä¸ªç´ è´¨ï¼š1ã€äº‹ä¸šå¿ƒï¼Œæ˜¯å¦æŠŠä¼ä¸šå½“åšå‘½æ ¹å­æ¥åšï¼›2ã€çœ¼å…‰å’Œå¢ƒç•Œï¼Œè¦æ¯”åˆ«äººæƒ³å¾—å¤šï¼Œè¦æ¯”åˆ«äººçœ‹å¾—è¿œï¼›3ã€å¿ƒç†ç´ è´¨ï¼Œèƒ½å¦ç™¾æŠ˜ä¸æŒ å¤„å˜ä¸æƒŠï¼›4ã€å­¦ä¹ èƒ½åŠ›ã€‚æ˜¯å¦å·²å­¦ä¹ ä¸ºç”Ÿæ´»æ–¹å¼ï¼Œæœ‰æ— åŠæ—¶å¤ç›˜çš„ä¹ æƒ¯ æŽ¥å—æ­£è§„çš„èŒä¸šåŒ–è®­ç»ƒæ˜¯éžå¸¸å¿…è¦çš„ã€‚ å†›è§„2 æ¢¦æƒ³æ˜¯å”¯ä¸€çš„åˆ›ä¸šç†ç”± åˆ›ä¸šå°±æ˜¯ä¸€ä¸ªé€æ¢¦çš„è¿‡ç¨‹ äººçš„æ—¶é—´æ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥ä¸è¦æŒ‰ç…§åˆ«äººçš„æ„æ„¿åŽ»æ´»ï¼Œè¿™æ˜¯æµªè´¹æ—¶é—´ï¼åšä½ æƒ³åšçš„äº‹ï¼ æ‹’ç»è¡Œå°¸èµ°è‚‰ï¼Œäººçš„æ¢¦æƒ³æ˜¯ä¸ä¼šç»ˆç»“çš„ è¶Šæ˜¯è¢«åˆ«äººå˜²ç¬‘çš„æ¢¦æƒ³ï¼Œè¶Šæœ‰å®žçŽ°çš„ä»·å€¼ï¼ åˆ›ä¸šæ˜¯ä¸€ä¸ªä¸æ–­è¯•é”™çš„è¿‡ç¨‹ ä¸€åˆ‡éƒ½æ˜¯æœªçŸ¥çš„ï¼Œæ¯”çš„æ˜¯è€åŠ›ã€æ™ºæ…§å’Œè¿æ°”ï¼Œè¿™ä¹Ÿæ­£æ˜¯åˆ›ä¸šçš„é­…åŠ›æ‰€åœ¨ åšæŒä¸Žæ”¾å¼ƒï¼ŒæºäºŽæˆ˜ç•¥è§„åˆ’ã€æˆ˜æœ¯æ™ºæ…§å’Œå†·é™å†³æ–­çš„ç»“åˆï¼ä¼˜æŸ”å¯¡æ–­ä¸å¯å–ï¼Œåˆšæ„Žè‡ªç”¨æ›´ä¸å¯å– åˆ›ä¸šæ²¡ä»€ä¹ˆé«˜ä¸å¯æ”€ åˆ›ä¸šå¹¶ä¸ç¥žç§˜ä¹Ÿä¸é«˜ä¸å¯æ”€ï¼Œåªæ˜¯ä¸€ä¸ªç”Ÿæ´»æ–¹å¼ ä¸è¦æƒ³å¾—å¤ªå¤æ‚ï¼Œä¹Ÿä¸ç”¨ç»™è‡ªå·±ç•Œå®šå¤ªæ˜Žç¡®æ˜¯å…·ä½“æˆåŠŸæ—¶ç‚¹ï¼Œåªæ˜¯æ‹¼å°½å…¨åŠ›åŽ»åš æ—©å¼€å§‹ä¸€ç‚¹æ²¡åå¤„ï¼Œä¸è¦å¹»æƒ³æŠŠä¸€åˆ‡éƒ½å‡†å¤‡å¥½å†å‡ºå‘ï¼Œå› ä¸ºä½ æ°¸è¿œéƒ½å‡†å¤‡ä¸å®Œï¼Œåˆ›ä¸šæ˜¯ä¸€æ­¥ä¸€æ­¥å¹²å‡ºæ¥çš„ï¼Œä¸æ˜¯æƒ³å‡ºæ¥çš„ å…³äºŽåˆ›ä¸šçš„ä¸‰ä¸ªé”™è¯¯è§‚å¿µ ä¸è¦æŠŠä¸Šå¸‚å½“åšåˆ›ä¸šç›®æ ‡ï¼Œå®žé™…ä¸Š99%çš„ä¼ä¸šä¸Šä¸äº†å¸‚ï¼Œè¿˜æœ‰å¾ˆå¤šä¼ä¸šæ ¹æœ¬ä¸é€‚åˆä¸Šå¸‚ ä¸è¦æœ‰ä¸ºäº†å°±ä¸šè€Œåˆ›ä¸šçš„æ€æƒ³ã€‚å°±ä¸š = å®‰é€¸ï¼Œåˆ›ä¸šå°±è¦åšå¥½æ€æƒ³å‡†å¤‡ ä¸è¦ä¸ºäº†é‚£äº›ç¾Žä¸½çš„å¤§é“ç†åŽ»åˆ›ä¸šã€‚é‚£æ˜¯â€œæžœâ€ï¼Œä¸æ˜¯â€œå› â€ å†›è§„3 å­¦å…ˆè¿›ï¼Œå‚å¤§æ¬¾ï¼Œèµ°æ­£é“ åˆ›ä¸šå¿…é¡»èµ°æ­£é“ è¦å–„äºŽå‘ä¼˜ç§€çš„åŒè¡Œå­¦ä¹ ï¼Œè¦è¿½æ±‚ä¸Žå¼ºè€…åˆä½œï¼Œè¦åšå®ˆè§„èŒƒç»è¥çš„åŽŸåˆ™ã€‚æŠ•æœºå–å·§çœ‹ä¼¼å ä¾¿å®œï¼Œå®žåˆ™åƒå¤§äºï¼Œå‡ºæ¥æ··æ—©æ™šæ˜¯è¦æ¢çš„ æœ‰æ‰€ä¸ºï¼Œæœ‰æ‰€ä¸ä¸ºï¼Œæ˜¯ä¸ºæœ‰ä¸º å¯¹æ‰‹ä¸æ­£å½“ç«žäº‰ï¼Œä¸ç­‰äºŽä½ ä¹Ÿå¯ä»¥ä¸æ­£å½“ç«žäº‰ã€‚é¢å¯¹å¯¹æ‰‹æ­»ç¼ çƒ‚æ‰“ï¼Œç¬¬ä¸€è¦æ·¡å®šï¼Œè¦å†·é™åº”ä»˜ï¼Œä¸èƒ½è‡ªä¹±é˜µè„šï¼›ç¬¬äºŒï¼Œå¤šåšå®žäº‹åå‡»æ˜¯åœ¨å¸‚åœºä¸Šï¼Œèƒ½ä¸è¯´å°±ä¸è¯´ï¼Œèƒ½å°‘è¯´å°±å°‘è¯´ï¼Œä¸å¾—ä¸è¯´çš„æ—¶å€™è¦é«˜ä¸¾ç”¨æˆ·åˆ©ç›Šçš„å¤§æ——ï¼Œé‡å¤æ­£ç¡®çš„è¯ï¼Œä¸å›žåº”æ”»å‡»è€…ï¼Œä¹Ÿä¸åå‡»æ”»å‡»è€…ï¼Œåˆ‡è®°è¨€å¤šå¿…å¤±ï¼Œå¯¹æ”»å‡»è€…çš„è”‘è§†æ˜¯æœ€å¥½çš„åå‡»ï¼Œåˆ‡è®°ä¸è¦åŽ»äº‰è®ºå’Œå›žåº”å¯¹æ–¹çš„å…·ä½“é—®é¢˜ã€‚æœ€åŽåšæŒæ¡Œé¢ä¸Šå‡ºç‰Œ å­¦å…ˆè¿›è¦å…¨ç›˜å­¦ä¹  åšå®ˆè‡ªå·±çš„é“å¾·åº•çº¿ å­¦å…ˆè¿›å¿…é¡»è¦å…ˆåƒµåŒ–ï¼Œå†å›ºåŒ–ï¼Œå†ä¼˜åŒ–ã€‚å›½æƒ…ä¸åŒæˆ‘ä»¬æ˜¯ç‰¹æ®Šçš„ï¼Œè¿™ç»å¯¹æ˜¯ä¸ªé™·é˜±ï¼›ç»å¤§å¤šæ•°çš„äº‹ï¼Œç»å¤§å¤šæ•°æ—¶å€™ï¼Œæ²¡æœ‰è°ç‰¹æ®Šï¼è¿›æ­¥çš„æ·å¾„å°±æ˜¯ç›´æŽ¥å­¦ä¹ é‚£äº›å·²ç»æˆåŠŸçš„ä¼ä¸šå’Œäººï¼Œå­¦ä¹ ä»–ä»¬å·²ç»è¢«éªŒè¯äº†çš„è¡Œä¹‹æœ‰æ•ˆçš„æ–¹æ³•ï¼è½åŽçš„ç»„ç»‡ï¼Œè½åŽçš„äººæ€Žä¹ˆä¼šæœ‰æ°´å¹³åˆ¤æ–­å…ˆè¿›æ–¹æ³•çš„å¯¹é”™ï¼Ÿæ‰€ä»¥å¿…é¡»å…ˆåƒµåŒ–çš„å­¦ä¹ ï¼Œæ•™æ¡ä¼¼çš„åšï¼Œç­‰åšç†Ÿç»ƒäº†ï¼Œå†åä¸‹æ¥å¤ç›˜ç ”ç©¶æ˜¯å¦æœ‰ä¼˜åŒ–ä¹‹å¤„ å‚å¤§æ¬¾ä¸æ˜¯é å¤§æ¬¾ å’Œå¥½çš„æœ€å¼ºè€…åˆä½œå‘å±•ï¼Œå¥½å¤„å¤šå¤šï¼æ­£å‘æ¿€åŠ± + èµ„æºä¿è¯ + æµç¨‹ä¼˜åŒ– ç­‰ç­‰ å‚å¤§æ¬¾æ˜¯ä¸ºäº†æå‡è‡ªå·±ï¼Œäº’æƒ äº’åˆ© å†›è§„4 åˆ›æ–°æ˜¯æœ€å¥½çš„æ­¦å™¨ ä¼Ÿå¤§ä¸æ˜¯æ¨¡ä»¿æ¥çš„ å†å°çš„åˆ›æ–°ï¼Œå†å°çš„åˆ†æ”¯ç»†èŠ‚ï¼Œæ”¾åˆ°14äº¿äººå£é‡Œéƒ½æ˜¯ä¸€ä¸ªéžå¸¸å¯è§‚çš„æˆåŠŸ æ¨¡ä»¿æ˜¯ä¸æ˜¯æˆåŠŸçš„æ·å¾„ï¼å³ä¾¿å¤åˆ¶ç¾Žå›½åˆ›æ–°ä¸œè¥¿ï¼Œä¹Ÿè¦å…ˆè·Ÿè¸ªå…ˆå¤åˆ¶ï¼Œæœ€åŽè¿˜è¦æœ¬åœŸåŒ–åˆ›æ–° å°å…¬å¸å°¤å…¶ä¸å¯èƒ½é€šè¿‡æ¨¡ä»¿ç”Ÿå­˜ã€‚å¤§å…¬å¸å¯¹å¸‚åœºçš„ååº”å¿…ç„¶ä¼šæ…¢åŠæ‹ï¼Œå°å…¬å¸å¿…é¡»æ•¢äºŽå†’é™©ï¼Œå‹‡äºŽåˆ›æ–°ï¼Œå¿«é€Ÿååº”æ‰æœ‰æœºä¼šã€‚åªæœ‰å·®å¼‚åŒ–æ‰æœ‰å¸‚åœºç©ºé—´ ä¸ªäººè®¤ä¸ºï¼šæ¨¡ä»¿å°±æ˜¯copyï¼Œå› ä¸ºå¾ˆå¤šå·®å¼‚åŒ–éƒ½ä½“çŽ°åœ¨å¾ˆå°çš„ç»†èŠ‚ åªæœ‰åˆ›æ–°æ‰æœ‰æœºä¼š æ¯ä¸ªæˆåŠŸçš„ä¼ä¸šéƒ½æ˜¯ä¸€ç³»åˆ—åˆ›æ–°çš„ç»“æžœã€‚åšä¼ä¸šå°±æ˜¯ä¸¤ä»¶äº‹â€“åˆ›æ–°å’Œè¥é”€ã€‚åˆ›æ–°åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»å‘çŽ°æ–°å¤§é™†ï¼Œä¸€ç±»æ‰“ç ´å¸¸è§„ ä¼ä¸šçš„æ¯ä¸ªè§’è½éƒ½éœ€è¦ä¸æ–­åœ°åˆ›æ–°ã€‚äº§å“åˆ›æ–°å¾ˆé‡è¦ï¼Œä½†å¹¶ä¸æ˜¯ä¼ä¸šåˆ›æ–°çš„å…¨éƒ¨ï¼Œè¿™æ˜¯æ¯ä¸ªåˆ›ä¸šè€…å¿…é¡»æ˜Žç¡®çš„ç†å¿µã€‚ ä¸€æŠŠæ‰‹è¦ä¸ºåˆ›æ–°æž„å»ºä¸€ä¸ªçŽ¯å¢ƒ åˆ›æ–°è€…ä¸€å®šæ˜¯å°‘æ•°æ´¾ï¼Œä¼šé­åˆ°å¤§å¤šæ•°æ™®é€šäººçš„è´¨ç–‘ï¼›åˆ›æ–°å¿…ç„¶ä¼šç»è¿‡è‰°éš¾çš„æŽ¢ç´¢ï¼Œç”šè‡³ä¸æ–­åœ°å¤±è´¥ï¼›åˆ›æ–°ä¼šè§¦çŠ¯å¾ˆå¤šæ—¢å¾—åˆ©ç›Šè€…æˆ–å¸‚åœºé¢†å…ˆè€…ã€‚è¿™äº›éƒ½å†³å®šäº†åˆ›æ–°æ˜¯å¾ˆè‰°éš¾çš„ï¼Œè€Œè¿™ä¹Ÿæ­£å¼åˆ›æ–°çš„æ„ä¹‰æ‰€åœ¨ å†›è§„5 æ”¾ä¸‹èº«æ®µæ­»ç¼ çƒ‚æ‰“ æ¯ä¸€ä¸ªæˆåŠŸéƒ½æ˜¯æ‹¼å‡ºæ¥çš„ æˆåŠŸæœ‰è§„å¾‹ï¼Œèµ°æ­£é“ã€åˆ›æ–°å’Œæ­»ç¼ çƒ‚æ‰“è¿™ä¸‰ä¸ªæ™®ä¸–æˆç«‹çš„çœŸç†ï¼Œå¯ä»¥å¸®åŠ©ä½ æ›´å¥½çš„æˆåŠŸ æˆåŠŸè€…ä¸æ‰¾å€Ÿå£ï¼é€®ä½æœºä¼šå°±æ­»ç¼ çƒ‚æ‰“ï¼Œåˆ«å¤ªæŠŠè‡ªå·±å½“å›žäº‹ï¼æˆåŠŸè€…è¯¥æ”¾ä¸‹èº«æ®µæ—¶éƒ½èƒ½æ”¾ä¸‹èº«æ®µï¼Œæ”¾ä¸‹èº«æ®µä»Žæœ€åŸºç¡€çš„ä¸šåŠ¡åšèµ·ï¼å¯¹äºŽåˆ›ä¸šå…¬å¸ï¼Œæœ€åŸºç¡€çš„ä¸šåŠ¡æ˜¯æœ€è¿«åˆ‡çš„ä¸šåŠ¡ æˆåŠŸè€…éƒ½å–„äºŽè°ƒæ•´è‡ªå·±çš„å¿ƒæ€ï¼›ä»–ä»¬å¾€å¾€ç¼ºä¹è¿‡ç¨‹æ„Ÿï¼Œæ€¥èºå†’è¿›ï¼Œå¹»æƒ³ä¸€å¤œæˆåŠŸï¼ŒæŠŠå°å…¬å¸å½“å¤§å…¬å¸æ¥åšï¼Œè¿‡åˆ†å…³æ³¨æˆ˜ç•¥ï¼Œè§„åˆ’ï¼Œåˆ¶åº¦ï¼Œæµç¨‹ç­‰å¤§å…¬å¸çš„ä¸œè¥¿ï¼Œæé«˜äº†æˆæœ¬åˆé™ä½Žäº†æ•ˆçŽ‡ æˆåŠŸè€…éƒ½æœ‰æžå¼ºçš„æ„å¿—åŠ›ï¼Œå†éš¾ä¹Ÿèƒ½å’¬ç‰™æ‰›è¿‡åŽ»ï¼ï¼ˆå¯æ€œæˆ‘æ€»åš·åš·æ€•ä»€ä¹ˆå¤©å¡Œä¸‹æ¥å¤§ä¸äº†ç”¨è„‘è¢‹é¡¶ç€ï¼‰ æˆåŠŸè€…é£Žå…‰çš„èƒŒåŽæ˜¯å’Œä½ ä¸€æ ·çš„åŽå·ï¼Œéƒ½æ˜¯é›¨é‡Œæ³¥é‡Œçˆ¬å‡ºæ¥çš„ï¼Œåªæ˜¯ä½ æ²¡æœ‰çœ‹åˆ° ä¼Ÿå¤§éƒ½æ˜¯ç†¬å‡ºæ¥çš„ å‰©è€…ä¸ºçŽ‹ï¼Œä¿žæ•æ´ªè¯´å¾ˆå¤šäººéƒ½æ­»åœ¨äº†ç¬¬äºŒå¤©æ™šä¸Šï¼æ‰€ä»¥é¦–å…ˆè¦æ´»ä¸‹åŽ»ï¼Œæ…¢æ…¢ç†¬ æˆåŠŸçš„å…³é”®åœ¨äºŽå¤šåšæŒ5åˆ†é’Ÿï¼ä½ ç­‹ç–²åŠ›å°½æ—¶ä¹Ÿæ˜¯å¯¹æ‰‹ç­‹ç–²åŠ›å°½çš„æ—¶å€™ï¼Œè™½ç„¶å¯¹æ‰‹è¡¨é¢è£…çš„ä¸ç´¯ï¼ æŠŠæ¯ä¸ªæœºä¼šéƒ½å½“åšæœ€åŽä¸€æ ¹ç¨»è‰æ‰èƒ½æˆåŠŸ æœºä¼šå¤ªå¤šçš„äººå¾€å¾€ä¸å®¹æ˜“æˆåŠŸï¼Œå› ä¸ºä»–ä»¬å¾ˆå®¹æ˜“æ”¾å¼ƒï¼Œé‡é˜»åˆ™æŽ¨ï¼Œä¸æ„¿åšæŒï¼Œå¿ƒæƒ³åæ­£è¿˜æœ‰ä¸‹ä¸€ä¸ªæœºä¼šï¼ æˆåŠŸä¸Žå¦ä¸»è¦è¿˜æ˜¯çœ‹è‡ªå·±ï¼ä¸å¦è®¤å®¢è§‚å› ç´ å­˜åœ¨ï¼Œé‚£æ˜¯äº‹å®žï¼Œä½ æ²¡å¾—é€‰ï¼Œå”¯ä¸€èƒ½åšçš„å°±æ˜¯æƒ³å°½åŠžæ³•åŽ»å…‹æœ å†›è§„6 å‡¡äº‹åªèƒ½é è‡ªå·± ä»»ä½•æ—¶å€™åˆ›å§‹äººéƒ½ä¸èƒ½æ”¾å¼ƒ åˆ›å§‹äººåˆ«æ— é€€è·¯ï¼šå‡¡äº‹åªèƒ½é è‡ªå·±ï¼Œä¸‡äº‹çš†æœ‰è§£ä¸”æœ‰å”¯ä¸€æ­£è§£ï¼Œå‡¡æ˜¯ä½ æ‹…å¿ƒçš„äº‹ä¸€å®šä¼šå‘ç”Ÿï¼Œäº«å—åˆ›ä¸šè¿‡ç¨‹ åˆ›ä¸šåˆæœŸæœ€éš¾çš„ä¸‰ä»¶äº‹åªèƒ½é åˆ›å§‹äººè‡ªå·± ä¸‰åº§å¤§å±±åŸºæœ¬ä¸Šåªèƒ½é ä½ è‡ªå·±çˆ¬ï¼šæ‰¾æ–¹å‘ï¼Œæ‰¾äººå’Œæ‰¾é’± è‡ªå·±ä¸ä¼šåšçš„äº‹ä¸è¦æŒ‡æœ›ä¸‹å±žåˆ›é€ æƒŠå–œ ä¸æ˜¯è¯´åˆ›å§‹äººä¸éœ€è¦åˆä¼™äººã€å›¢é˜Ÿï¼Œè€Œæ˜¯è¯´æ‰€æœ‰ç»“æžœéƒ½ç”±ä½ è‡ªå·±è´Ÿå…¨è´£ï¼Œæ‰€ä»¥ä½ åªèƒ½é è‡ªå·±åšå†³å®š ä¸è¦æŒ‡æœ›åˆ«äººæ¥æ•‘ä½  é¡¾é—®å…¬å¸åªèƒ½å¸®é”¦ä¸Šæ·»èŠ±çš„å¿™ éšæ—¶å‡†å¤‡è‡ªæ•‘æ‰èƒ½é•¿å‘½ç™¾å²ï¼Œæ‰€æœ‰äººéƒ½å–œæ¬¢é”¦ä¸Šæ·»èŠ±ï¼Œå¦‚æžœä½ è‡ªå·±éƒ½ä¸ç«­å°½å…¨åŠ›ï¼Œåˆ«äººæ›´ä¸ä¼šä¼¸å‡ºæ´æ‰‹ ä¸èƒ½ä»¥æŽˆæƒä¸ºåæŽ¨å¸è‡ªå·±çš„è´£ä»» å†›è§„7 é¢†å¯¼è¦æœ‰é¢„è§æ€§ é¢„è§æœªæ¥æ˜¯é¢†å†›è€…çš„è´£ä»» åªæœ‰é¢„è§æœªæ¥æ‰èƒ½åšå¯¹çš„äº‹ï¼Œå¯¹æœªæ¥é¢„è§çš„è¶Šæ—©è¶Šæ¸…æ™°ï¼Œä½ å°±è¶Šå¯èƒ½åšæ­£ç¡®çš„äº‹ã€‚æ°¸è¿œè¦æ¯”åˆ«äººå¤šæ€è€ƒä¸€ç‚¹ï¼Œæ°¸è¿œè¦åšå¥½æœ€åçš„æ‰“ç®—ã€æœ€å…¨é¢çš„å‡†å¤‡ åªæœ‰é¢„è§æœªæ¥æ‰èƒ½èµ°çš„æ›´è¿œï¼Œè¦ç«™å¾—é«˜ï¼Œçœ‹å¾—è¿œè¿˜è¦ç†çš„æ¸…ï¼è¦ç•™æ„æ–°å…´äº‹åŠ¡ï¼Œè¦å¼€é˜”çœ¼ç•Œè¿˜è¦è·³å‡ºå…·ä½“ä¸šåŠ¡ç»†èŠ‚çœ‹äº‹æƒ…çš„èƒ½åŠ› æ—©åšå¸ƒå±€ï¼Œæ—©5åˆ†é’Ÿè¡ŒåŠ¨ å¿«é€Ÿå†³ç­–ï¼Œå¿«é€Ÿè¡ŒåŠ¨ã€‚è¦å–„äºŽå†³æ–­ï¼Œæ•¢äºŽå–èˆï¼é—®é¢˜ä¸ä¼šè‡ªå·±è§£å†³ï¼Œâ€œæ‹–â€ç€åªèƒ½è®©äº‹å˜çš„æ›´ç³Ÿ - æ—©åšå¸ƒå±€ã€‚å±…å®‰æ€å±ï¼Œæ—©ä½œæ‰“ç®—ï¼å…ˆå‘ä¼˜åŠ¿ä¸å®¹å°è§‘ï¼ ç•™ä¸¤åˆ†ä½™åŠ›ï¼Œéšæ—¶å‡†å¤‡è‡ªæ•‘ ä»»ä½•æ—¶å€™éƒ½ä¸è¦å­¤æ³¨ä¸€æŽ·ï¼èµŒåšä¸­è¾“çš„æœ€æƒ¨çš„å°±æ˜¯æ‹¼ä¸€æŠŠ è¶Šæ˜¯é¡ºé£Žé¡ºæ°´ï¼Œè¶Šè¦è­¦æƒ•ã€‚è¶Šè¦å…‹åˆ¶å†²åŠ¨å’Œè´ªå©ªï¼Œç¡è§‰éƒ½å¾—çåŠåªçœ¼ï¼ å†›è§„8 å¿ƒåŠ›å¼ºå¤§è€…èƒœ æ‰€æœ‰çš„æ¯”æ‹¼æœ€ç»ˆéƒ½æ˜¯ç²¾ç¥žçš„æ¯”æ‹¼ï¼Œå¿…é¡»æ‹¥æœ‰å¼ºå¤§çš„å¿ƒç†ç´ è´¨å’Œè‡ªæˆ‘å¤ç›˜å­¦ä¹ çš„èƒ½åŠ› ä»€ä¹ˆå¥‡è¿¹éƒ½å¯èƒ½å‡ºçŽ°ï¼Œå‰ææ˜¯ä½ ä¸èƒ½è®¤è¾“ï¼ åˆ›ä¸šè€…è¦ä¸æ–­å¼ºå¤§è‡ªå·±çš„å¿ƒåŠ›ï¼å‡¡æ˜¯ä¸èƒ½æ¶ˆç­ä½ çš„ï¼Œéƒ½åªèƒ½è®©ä½ å˜å¾—æ›´å¼ºï¼ é¢†å¯¼è€…å¿…é¡»æ ‘ç«‹è¿œå¤§çš„ç†æƒ³ï¼è®°ä½å–æ³•å…¶ä¸Šï¼Œå¾—ä¹Žå…¶ä¸­ åˆ›å§‹äººå¿…é¡»å¿—å­˜é«˜è¿œï¼Œæœ‰è¿œå¤§çš„ç†æƒ³ä¸”æ„å¿—åšå®šï¼Œè¦çŸ¥é“ç»å¤§å¤šæ•°äººæ˜¯æ²¡æœ‰ä¸»æ„çš„ï¼ è¿œå¤§ç†æƒ³æ˜¯é¼“èˆžå›¢é˜Ÿå¥‹æ–—çš„åŠ¨åŠ›ï¼æ²¡æœ‰ç†æƒ³çš„é˜Ÿä¼å°±æ˜¯ä¸€ç›˜æ•£æ²™ é¢†å¯¼è€…å¿…é¡»æœ‰å¿…èƒœçš„ä¿¡å¿µ å¿…èƒœçš„ä¿¡å¿µæ˜¯åˆ›ä¸šè€…æœ€å®è´µçš„å“è´¨ã€‚ä½ éƒ½ä¸èƒ½ç ´é‡œæ²‰èˆŸå¿…èƒœè€Œè¿˜çš„ä¿¡å¿µï¼Œä¸‹å±žä¸ºä»€ä¹ˆè¦è·Ÿç€ä½ ï¼Ÿå†è¯´ä½ çš„æžé™ä¹Ÿæ˜¯å¯¹æ‰‹çš„æžé™ï¼ŒæˆåŠŸå¾€å¾€åœ¨äºŽå¤šåšæŒ5åˆ†é’Ÿ åªè¦è‚‰ä½“æ²¡è¢«æ¶ˆç­ï¼Œç²¾ç¥žå°±ä¸åº”è¯¥åž®æŽ‰ï¼å¿…é¡»çš„æœ‰è‚¡å­ç‹ åŠ²ï¼ å†›è§„9 è¦æ•¢äºŽå†’é™© æœ‰äº”æˆæŠŠæ¡å°±è¦å¼€å§‹è¡ŒåŠ¨ æ•¢äºŽæ‰“ç ´å¸¸è§„æ‰æœ‰æœºä¼šï¼æ•¢äºŽè´¨ç–‘ï¼Œæ•¢äºŽè¯´ä¸ï¼Œæ•¢äºŽè¡ŒåŠ¨ï¼ æ‰€æœ‰çš„æˆåŠŸéƒ½æ˜¯çªç ´å¸¸è§„çš„ç»“æžœã€‚å¤©é¹…è‚‰ä»Žæ¥éƒ½æ˜¯è¢«ç¬¬ä¸€ä¸ªæ•¢å¼ å˜´çš„è›¤èŸ†åƒæŽ‰çš„ã€‚çŽ°å®žç”Ÿæ´»ä¸­ï¼Œç»å¤§å¤šæ•°çš„é›·æ± æ˜¯æˆ‘ä»¬è‡ªå·±æƒ³è±¡å‡ºæ¥çš„ï¼ æ•¢äºŽå†’é™©æ‰æœ‰èƒœæœº æˆåŠŸæ€»æ˜¯é’çé‚£äº›å…·æœ‰æŽ¢é™©ç²¾ç¥žçš„äººï¼Œå®æ„¿å¤±è´¥ä¹Ÿä¸è¦å¹³åº¸ï¼ å°å…¬å¸åªèƒ½é å†’é™©å¯»æ±‚ç”Ÿå­˜ç©ºé—´ å¤§å…¬å¸å¿…é¡»ä»¥è§„é¿é£Žé™©ä¸ºä¸»ï¼Œè¿½æ±‚ç¨³æ­¥å‘å±•å°‘çŠ¯é”™ æˆ‘ä»¬å¤±åŽ»çš„åªæ˜¯é”é“¾ï¼Œä¸€æ—¦æˆåŠŸï¼Œæˆ‘ä»¬èŽ·å¾—çš„å°†æ˜¯æ•´ä¸ªä¸–ç•Œ å†›è§„10 ç›¸ä¿¡ç›´è§‰ ä¸Žç›´è§‰ç›¸æ‚–çš„äº‹ä¸è¦å¹² æ ¹æ®ç›´è§‰å…ˆåšä¸€ä¸ªå¤§èƒ†å‡è®¾ï¼Œç„¶åŽå°å¿ƒæ±‚è¯ åˆ«äººçš„å»ºè®®å°¤å…¶æ˜¯å…·ä½“å»ºè®®è¦æ…Žå¬ï¼Œæ°¸è¿œä¸è¦ç”¨é›†ä½“å†³ç­–ä»£æ›¿è‡ªå·±çš„å†³ç­– å»ºè®®å’Œç»éªŒè¦è´´åˆè‡ªèº«å®žé™…è€Œæ…Žé‡é€‰æ‹© ç›´è§‰æ˜¯ä¸Šå¤©èµç»™åˆ›ä¸šè€…çš„ç¤¼ç‰© å¤§èƒ†å‡è®¾ï¼Œå°å¿ƒæ±‚è¯ã€‚ å†›è§„11 åˆ›ä¸šè¦é å›¢é˜Ÿ ä¸€ä¸ªäººåŒ…æ‰“å¤©ä¸‹çš„æ—¶ä»£å·²ç»è¿‡åŽ»äº† åˆ›ä¸šéœ€è¦ä¸€ä¸ªå›¢é˜Ÿï¼Œä¸€ä¸ªå¿—åŒé“åˆã€ä¼˜åŠ¿äº’è¡¥ã€ç´§å¯†é…åˆã€æŠŠå…¬å¸å½“åšå‘½æ ¹å­ å›¢é˜Ÿå¼ºå¤§æ‰èƒ½æ‰“èƒœä»— æ²¡æœ‰åˆé€‚çš„äººåšâ€œ1â€ï¼Œå†å¤šçš„â€œ0â€ä¹Ÿæ²¡ç”¨ï¼ç®¡ç†è€…çš„èƒ½åŠ›æ˜¯æ‰¾åˆ°å¯¹çš„äºº æ¯ä¸ªå›¢é˜Ÿéƒ½æœ‰åŸºå› ã€‚æ‰©å¼ æ–°ä¸šåŠ¡éœ€è¦æ–°åŸºå›  å»ºç«‹é«˜æ•ˆçš„å›¢é˜Ÿï¼š1ï¼Œå¤´æ˜¯å”¯ä¸€çš„ï¼›2ï¼Œç»„ç»‡ç»“æž„è¦æ¸…æ™°ï¼›3ï¼Œä»¤è¡Œç¦æ­¢ï¼›4ï¼Œä¸ªäººåˆ©ç›Šæœä»Žæ•´ä½“åˆ©ç›Šï¼›5ï¼Œäº’ç›¸è¡¥å° å›¢é˜Ÿè¦ååŒä½œæˆ˜ï¼š1ï¼Œå…±åŒçš„æ„¿æ™¯å’Œä»·å€¼è§‚ï¼›2ï¼Œå½¼æ­¤ä¿¡ä»»ï¼›3ï¼Œæ³¨é‡æ²Ÿé€šæŠ€å·§ éœ€è¦ä¸»æ¬¡é…åˆï¼Œä¸»åŠ¨åŽ»ç†è§£é¢†å¯¼æ„å›¾ï¼Œç§¯æžåŽ»è´¯å½»é¢†å¯¼æ„å›¾ï¼Œæ˜¯å›¢é˜Ÿæˆå‘˜ç´ è´¨åŸºç¡€ï¼é¢†å¯¼å¯¹é”™ï¼Œå°å…µè¯´äº†ä¸ç®—ï¼Œé‚£è¿˜ä¸å¦‚æé«˜æ‰§è¡ŒåŠ› å›¢é˜Ÿå¿…é¡»æœ‰å”¯ä¸€çš„â€œå¤´â€å„¿ å¿…é¡»æœ‰é¢†å¯¼è€…ï¼Œå¦åˆ™å°±æ˜¯ä¸€ç›˜æ•£æ²™ï¼Œé¢†å†›äººç‰©çš„å¨ä¿¡åªèƒ½åœ¨æˆ˜æ–—ä¸­å½¢æˆ å†›è§„12 å¹²éƒ¨è¦é è‡ªå·±åŸ¹å…» ä¸‹å†³å¿ƒè‡ªå·±åŸ¹å…»å¹²éƒ¨ åŸ¹å…»å¹²éƒ¨æ˜¯é©å‘½çš„é¦–è¦é—®é¢˜ï¼ææ‹”ä¸ªæŽ’é•¿å½“å›¢é•¿ï¼Œä¹Ÿæ¯”ç©ºé™ä¸ªå¸ˆé•¿å½“å›¢é•¿å¥½ï¼å¤–æ¥çš„å’Œå°šæœªå¿…ä¼šå¿µç»ï¼ äººæ‰æ ‡å‡†éœ€è¦ä¸€æŠŠæ‰‹äº²è‡ªåˆ¶å®šï¼Œä¼˜ç§€å¹²éƒ¨æ ‡å‡†ï¼š1ï¼Œç†è§£ä¸Šæ„ï¼›2ï¼Œæœ‰æ„è§å’Œè§è§£å¯ä»¥è¡¨è¾¾ï¼Œä½†ä¸€æ—¦åšäº†å†³ç­–ï¼Œå°±å¿…é¡»é©¬ä¸Šå¿˜è®°è‡ªå·±çš„åˆ†æ­§ï¼Œåšå†³å½»åº•çš„è´¯å½»å†³è®®ï¼›3ï¼Œåšä»»ä½•ä¸€ä»¶äº‹ï¼Œéƒ½è¦å’Œä¸Šçº§æ˜Žæ™°ç›®æ ‡ã€ç»“æž„è§„åˆ’å’Œé‡Œç¨‹ç¢‘ï¼Œå®å¯ä¸åšï¼Œä¸è¦åšé”™ï¼›4ï¼ŒåŠæ—¶æ±‡æŠ¥ï¼Œå¤šæ±‡æŠ¥æ²¡åå¤„ å»ºç«‹èµ·äººæ‰çš„åŸ¹å…»æœºåˆ¶ï¼Œ ä¼ä¸šé€‰ææ ‡å‡†ï¼š1ï¼Œæ‚Ÿæ€§ï¼Œèƒ½ä¸¾ä¸€åä¸‰åˆ†æžå‡ºäº‹ç‰©çš„æœ¬è´¨ï¼›2ï¼Œå¿ƒèƒ¸å®½å¹¿ï¼›3ï¼Œæœ‰å¤§å±€è§‚ï¼›4ï¼Œå­¦ä¹ èƒ½åŠ›å¼ºï¼Œå‹¤äºŽæ€è€ƒï¼Œé€»è¾‘æ¸…æ¥šï¼Œå–„äºŽå½’çº³æ€»ç»“æç‚¼ åˆ›ä¸šä¸è¦ç”¨èŒä¸šç»ç†äºº èŒä¸šç»ç†äººæ˜¯åˆ›ä¸šå…¬å¸çš„å¤©æ•Œã€‚èŒä¸šç»ç†äººæ³¨å®šçŸ­è§†ï¼Œæ³¨é‡æµç¨‹ä¸”é“å¾·å ªå¿§ï¼Œå†è‹¦å†éš¾ä¹Ÿä¸è¦è¯·ï¼ æ…Žç”¨ç©ºé™å…µ ç©ºé™å…µçš„è¯¯åŒºï¼š1ï¼Œå¦‚æžœçœŸåŽ‰å®³æ—©å°±è‡ªå·±å¹²äº†ï¼Œä¸ºå•¥ç»™ä½ å¹²ï¼›2ï¼Œå’Œä½ çš„åŸºå› ä¸ä¸€å®šç›¸ç¬¦ï¼Œä¸”ä¸ä¸€å®šæŽ¥å—ä½Žçš„èŒä½ï¼›3ï¼Œä»–çš„ç»éªŒä¸ä¸€å®šæœ‰ç”¨ï¼Œåè€Œå¯èƒ½æœ‰å®³ï¼›4ï¼Œå¤–æ¥çš„å’Œå°šæœªå¿…ä¼šå¿µä½ çš„ç»ï¼Œæœªå¿…ä¼šæ‰§ç€çš„å¿µä½ çš„ç» ç©ºé™å…µå°¤å…¶ä¸é€‚åˆåˆ›ä¸šæœŸ å†›è§„13 é€‰å¯¹è‚¡ä¸œ è‚¡ä¸œå¯¹ä¼ä¸šè‡³å…³é‡è¦ è‚¡ä¸œæ˜¯ä¼ä¸šçš„åŸºå› ï¼Œæ…Žé‡é€‰æ‹©ï¼Œä¼˜åŠ£åŠ¿æ˜¯å•¥ï¼Ÿ ä¼ä¸šè¦å¤„ç†å¥½ä¸‰ä¸ªåœˆå­ï¼šè‚¡ä¸œåœˆã€å‘˜å·¥åœˆå’Œæœ‹å‹åœˆ ä¼ä¸šåž®æŽ‰ä¸€åŠä»¥ä¸Šæ˜¯å› ä¸ºè‚¡ä¸œé—®é¢˜ è‚¡ä¸œæœ‰é—®é¢˜ä¼ä¸šå¾ˆéš¾æŒä¹…ï¼Œè‚¡ä¸œå¸¸å¸¸æ˜¯å¯ä»¥å…±æ‚£éš¾ä¸å¯ä»¥å…±å¯Œè´µ å¦‚ä½•é€‰æ‹©è‚¡ä¸œï¼Ÿ1ï¼Œå¿—åŒé“åˆï¼›2ï¼Œè®¤åŒåˆä½“è§„åˆ™ï¼›3ï¼Œå‡ºèµ„ï¼Œä¸è¦ç»™å¹²è‚¡ï¼›4ï¼Œä¼˜å…ˆé€‰æ‹©æœ‰èµ„æºæœ‰ç»éªŒçš„ åˆ›ä¸šè€…é€‰è‚¡ä¸œçš„å››ä¸ªè¯¯åŒºï¼š1ï¼Œç”¨è‚¡ä»½æ¥æ¿€åŠ±å‘˜å·¥ï¼›2ï¼Œè®©çŸ­æœŸèƒ½å¸®ä¸Šå¿™çš„æœ‹å‹æˆåŠŸè‚¡ä¸œï¼›3ï¼Œè®©äº²æœ‹å¥½å‹å½“è‚¡ä¸œï¼›4ï¼Œå¸æ”¶ä¸å¥½çš„â€œæˆ˜ç•¥æŠ•èµ„è€…â€ å†›è§„14 æ­å¥½æ²»ç†ç»“æž„ ä¼ä¸šçš„æ²»ç†ç»“æž„å¾ˆå…³é”® ä¸¤ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š1ï¼Œå…¬å¸è‚¡ä¸œçš„æž„æˆåŠå…¶ç›¸äº’æ¯”ä¾‹å…³ç³»ï¼›2ï¼Œè‘£äº‹ä¼šå’Œç®¡ç†å±‚ä¹‹é—´çš„æƒåˆ©åˆ†é… æ²»ç†ç»“æž„æœ‰é—®é¢˜å…¬å¸å¾ˆéš¾æˆåŠŸ ä¼ä¸šå¿…é¡»æœ‰ä¸»äºº è‚¡ä¸œå±‚é¢ï¼Œä¼ä¸šè¦æœ‰å¤§è‚¡ä¸œ ç»è¥å±‚é¢ï¼Œç®¡ç†å±‚å¿…é¡»æœ‰â€œä¸»äººç¿â€æ„è¯†ï¼Œå¯ä»¥ç»™è‚¡æƒï¼Œä¹Ÿå¯ç»™æ¿€åŠ± ç†æƒ³çš„è‚¡ä¸œç»“æž„æ˜¯æ€Žæ ·çš„ï¼Ÿ å†›è§„15 äº‹å…ˆè¦ç­¾è‚¡ä¸œåè®® å®šå¥½è§„åˆ™æ‰èƒ½åˆä½œé•¿ä¹… è®¤å¯è§„åˆ™å’Œéµå®ˆè§„åˆ™æ˜¯æˆä¸ºè‚¡ä¸œçš„å‰æã€‚å…ˆå°äººåŽå›å­ï¼Œè§„åˆ™ä¸€å®šè¦è¯´å‡ºæ¥ è‚¡ä¸œåè®®è¦çº¦å®šå“ªäº›äº‹ï¼Ÿ çº¦å®šè‚¡ä¸œä¹‰åŠ¡ï¼Œæœ€å¥½ä¸è¦æŠŠä¸šåŠ¡å¯¹è±¡å‘å±•ä¸ºè‚¡ä¸œ çº¦å®šé€€å‡ºæœºåˆ¶ã€‚ çº¦å®šå†³ç­–æœºåˆ¶ã€‚ çº¦å®šå…¬å¸æ–¹å‘ å†›è§„16 åšæœ€è‚¥çš„å¸‚åœº é€‰å¯¹åˆ›ä¸šæ–¹å‘æœ€é‡è¦ æ­£ç¡®çš„åˆ›ä¸šæ–¹å‘è®©ä½ äº‹åŠåŠŸå€ï¼åˆ›ä¸šæœ€å¸¸çŠ¯çš„é”™è¯¯æ˜¯â€œä¼šå•¥åšå•¥â€ï¼Œæœ€å¥½æ˜¯è‡ªå·±çˆ±å¥½ã€è‡ªå·±ç‰¹é•¿å’Œç”¨æˆ·éœ€æ±‚ä¸‰å¤§å› ç´ çš„å¹³è¡¡ç‚¹æ¥åˆ›ä¸š ç›¯ä½ç”¨æˆ·çš„çœŸéœ€æ±‚ å›´ç»•ç”¨æˆ·éœ€æ±‚åˆ›ä¸šï¼Œç›®æ ‡ç”¨æˆ·æ˜¯è°ï¼Ÿè§£å†³å“ªäº›ç—›ç‚¹ï¼Ÿå­¦ä¼šå–èˆ åŒºåˆ†çœŸå‡éœ€æ±‚ã€‚æ— å…³ç—›ç—’çš„å’Œè¶…å‡ºå®žé™…çš„éƒ½æ˜¯å‡éœ€æ±‚ï¼›åˆ›ä¸šè€…å®¹æ˜“å§è‡ªå·±çš„çˆ±å¥½å½“åšç”¨æˆ·éœ€æ±‚ï¼ŒæŠŠä¸ªåˆ«éœ€æ±‚å½“æ™®ééœ€æ±‚ï¼›æœ‰äººéœ€è¦ä½ è·Ÿæœ‰å¸‚åœºæ˜¯ä¸¤å›žäº‹ ç›¯ä½æœ€è‚¥çš„å¸‚åœº é€‰æ‹©åˆ›ä¸šæ–¹å‘çš„åŽŸåˆ™ï¼š1ï¼Œå¸‚åœºåº”è¯¥è¶³å¤Ÿå¤§ï¼Œåˆ©ç”¨çŽ‡åº”è¯¥è¶³å¤Ÿé«˜ï¼›2ï¼Œäº‹æƒ…æœ¬çœåº”è¯¥æ˜¯æœ‰æ„ä¹‰çš„ï¼›3ï¼Œäº‹æƒ…åº”è¯¥æ˜¯æœ‰æ‰€åˆ›æ–°çš„ å°æ± å¡˜å…»ä¸å‡ºå¤§é±¼ï¼›çœ‹äº”å¹´ï¼Œæƒ³ä¸‰å¹´ï¼Œè®¤è®¤çœŸçœŸåšå¥½ä¸€ä¸¤å¹´ å†›è§„17 åšå‡æ³• æˆåŠŸæ˜¯åšäº†ä¸€ä»¶äº‹ã€‚ç æŽ‰é¸¡è‚‹é¡¹ç›®ï¼ŒæŠ“ä½ç”¨æˆ·çš„ä¸€ä¸ªéœ€æ±‚æŠŠå®ƒåšåˆ°æžè‡´ éåœ°å¼€èŠ±ä¸å¯èƒ½æˆåŠŸã€‚ä»»ä½•ä¸€ä¸ªé¢†åŸŸï¼Œåªè¦æ·±å…¥è¿›åŽ»éƒ½ä¼šå‘çŽ°æœºä¼šéåœ°ï¼Œä½†è¿™åªæ˜¯è¡¨è±¡ï¼å¦‚æžœæ‰¾ä¸åˆ°åˆ‡å…¥ç‚¹ï¼Œå½¢ä¸æˆç”¨æˆ·è§„æ¨¡ï¼Œå“ªä¸ªæœºä¼šéƒ½æ˜¯ç†è®ºä¸Šçš„æœºä¼šï¼Œå½¢ä¸æˆä½ çš„å¸‚åœº åšå¥½ä¸€ä»¶äº‹å¥½è¿‡åšäº†å¾ˆå¤šäº‹ åº”è¯¥æ—¶åˆ»æé†’è‡ªå·±â€œåšå‡æ³•â€ï¼Œå¾ˆå¤šæŠ€æœ¯æ€§ä¼ä¸šéƒ½å¸Œæœ›æŠŠäº§å“çš„åŠŸèƒ½åšåˆ°æžè‡´å’Œå…¨é¢ï¼Œä½†æƒ³è¦æ‰“å¼€å¸‚åœºï¼ŒæŠ“å¥½ä¸€ä¸ªç‚¹å°±å¤Ÿäº†ï¼å…³é”®ä¸åœ¨äºŽæŠ€æœ¯ä¸Šæœ‰å¤šä¹ˆé«˜æ·±ï¼Œè€Œåœ¨äºŽä½ èƒ½ä¸èƒ½è§£å†³ç”¨æˆ·çš„æŸä¸ªè¿«åˆ‡éœ€æ±‚ èµ„æºæ°¸è¿œæ˜¯ç¨€ç¼ºçš„ å¤©ä¸‹æ²¡æœ‰å…è´¹çš„åˆé¤ï¼åˆ†é…å¥½æœ‰é™çš„èµ„æºï¼Œèšç„¦èšç„¦å†èšç„¦ ä¸“æ³¨äºŽä¸€ä»¶äº‹æ›´å®¹æ˜“æˆåŠŸ åˆ›ä¸šæœŸä¼ä¸šè¦åšåˆ°å››ä¸ªâ€œæœ€å°â€ï¼š1ï¼Œåªç¡®å®šæœ€å…³é”®ç‚¹çš„æˆ˜ç•¥ï¼Œé›†ä¸­åŠ›é‡çªç ´ä¸€ç‚¹ï¼›2ï¼Œåªè®¾æœ€ä½Žé™åº¦æŒ‡æ ‡ï¼ŒæŒ‡æ ‡å¤šé‡ç‚¹å¿…ç„¶åˆ†æ•£ï¼Œæ ¸å¿ƒæŒ‡æ ‡è¾¾æˆäº†å…¶ä»–æŒ‡æ ‡è‡ªç„¶åˆæ ¼ï¼›3ï¼Œåªç”¨æœ€ä¸å¾—ä¸ç”¨çš„äººï¼Œä¸èƒœä»»è¦æ¢äººè€Œä¸æ˜¯åŠ äººï¼›4ï¼Œåªç®¡åˆ°æœ€ä½Žç¨‹åº¦ï¼Œç»™ä¸‹å±žç•™å‡ºå‘å±•ç©ºé—´ï¼› å†›è§„18 å¥½çš„å•†ä¸šæ¨¡å¼æ˜¯æˆåŠŸçš„ä¸€åŠ å•†ä¸šæ¨¡å¼æ˜¯ä¼ä¸šçš„æ ¸å¿ƒ å•†ä¸šæ¨¡å¼å°±æ˜¯ä½ çš„èµšé’±æ–¹å¼ï¼Œæ ¸å¿ƒå››ä¸ªé—®é¢˜ï¼šä½ çš„ç”¨æˆ·æ˜¯è°ï¼Ÿä½ ä¸ºä»–ä»¬è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿä½ ç”¨ä»€ä¹ˆäº§å“è§£å†³ä»–ä»¬çš„é—®é¢˜ï¼Ÿå¦‚ä½•æ”¶è´¹ï¼Ÿ ä½•ä¸ºå¥½çš„å•†ä¸šæ¨¡å¼ å¥½çš„å•†ä¸šæ¨¡å¼ç‰¹ç‚¹ï¼š1ï¼Œäº§å“ç®€å•ï¼›2ï¼Œå‰æè¦ç®€å•ï¼›3ï¼Œä¸€æ¬¡åˆ›æ„åž‹ï¼›4ï¼Œå¯ä½Žæˆæœ¬æ‰©å¼ ï¼›5ï¼Œè¦æœ‰ä¸€å®šçš„é—¨æ§› å•†ä¸šæ¨¡å¼æ˜¯å¦æˆç«‹éœ€è¦éªŒè¯ å°½æ—©éªŒè¯ä½ çš„å•†ä¸šæ¨¡å¼ å†›è§„19 é›†ä¸­å…µåŠ›çªç ´é‡ç‚¹ åˆ›ä¸šæœŸå…¬å¸è¦å…³æ³¨ä¸šåŠ¡é—®é¢˜ åœ¨å…¬å¸æ²¡æœ‰æ‰¾åˆ°æ–¹å‘ä¹‹å‰ï¼Œå…¬å¸çš„ä¸»è¦çŸ›ç›¾å°±æ˜¯æ‰¾æ–¹å‘ æ‰¾åˆ°æ–¹å‘åŽå…ˆéªŒè¯å•†ä¸šæ¨¡å¼ï¼Œå†æ‰¾åˆ°æœ‰æ•ˆçš„ä¸šåŠ¡æŽ¨å¹¿æ–¹æ³•ã€‚åˆ›ä¸šå…¬å¸è¦æŠ“å¼€æºè€ŒéžèŠ‚æµï¼ŒæŠ“ä¸šåŠ¡çªç ´è€Œéžç®¡ç†çš„è§„èŒƒåŒ– çªç ´é‡ç‚¹æ‰èƒ½è§£å†³é—®é¢˜ è¦æƒ³æˆåŠŸå¿…é¡»æ‰“èµ¢â€œå‘½è¿ä¹‹æˆ˜â€ï¼Œå†³å®šç›®æ ‡æ˜¯å¦è¾¾æˆçš„ä¸€å®šæ˜¯ä¸€ä¸¤ä¸ªå…³é”®é¡¹ç›®ï¼Œåˆ›ä¸šè€…éœ€è¦å­¦ä¼šèˆå¾—ï¼Œå¿…é¡»ä¿æŒå¤´è„‘æ¸…é†’ï¼Œç¦å¾—ä½è¯±æƒ‘ï¼Œæ—¶åˆ»ç‰¢è®°ä½ çš„ä¸»æˆ˜åœºæ˜¯ä»€ä¹ˆ åˆ›ä¸šå…¬å¸å”¯ä¸€çš„æˆ˜ç•¥å°±æ˜¯çªç ´é‡ç‚¹ æ‰¾åˆ°çªç ´ç‚¹ï¼Œçªç ´çªç ´ç‚¹ã€‚åˆ›ä¸šå¤´ä¸¤å¹´çš„å…¬å¸ä¸è¦è€ƒè™‘ä»€ä¹ˆå®ä¼Ÿçš„æˆ˜ç•¥è§„åˆ’ï¼Œé‚£ä¸œè¥¿åªæœ‰åå¤„æ²¡æœ‰ç›Šå¤„ å†›è§„20 å…ˆèµšåˆ°é’±å†è€ƒè™‘å‘å±• èµ¢åˆ©çš„å…¬å¸æœ‰çš„æ˜¯å‘å±•æœºä¼šã€‚ è¦æ€§æ„Ÿè¿˜æ˜¯è¦èµšé’±ï¼Ÿå°é’±éƒ½æŒ£ä¸äº†ï¼Œæ€Žä¹ˆæŒ£å¤§é’±ï¼èµšé’±æ‰æ˜¯ä¼ä¸šçš„å¤´ç­‰å¤§äº‹ èƒ½èµšé’±å’Œèµšåˆ°é’±æ˜¯ä¸¤ç äº‹ã€‚ çƒ§é’±çš„å‘å±•æ¨¡å¼ä¸å¯å– çƒ§é’±çš„å‘å±•æ¨¡å¼æ˜¯ç‰¹ä¾‹ èµšä¸èµšé’±æ˜¯è¡¡é‡å…¬å¸å¥½åçš„ç¬¬ä¸€æ ‡å‡† ä¼°å€¼ä¸æ˜¯è¡¡é‡å…¬å¸å¥½åçš„æ ¸å¿ƒæ ‡å‡†ã€‚ä¼ä¸šçš„æ ¸å¿ƒä»·å€¼æ˜¯æ»¡è¶³ç”¨æˆ·éœ€æ±‚ï¼Œä¸ºç”¨æˆ·åˆ›é€ ä»·å€¼ã€‚ èµšé’±çš„å…¬å¸æœ€ä¼˜ç§€ å…¬å¸åˆåˆ›æ—¶è¦æœ‰æ„¿æ™¯ï¼Œä½†æ˜¯å…·ä½“çš„ä¼Ÿå¤§æˆ˜ç•¥éƒ½æ˜¯åœ¨å…¬å¸åœ¨å¸‚åœºä¸Šç«™ç¨³è„šè·Ÿï¼Œè¡£é£Ÿæ— å¿§åŽæ‰è§„åˆ’çš„ å†›è§„21 ä¸ºå…¬å¸æ‰¾ä¸€ä¸ªå¥½çš„æ€»ç»ç† å¥½çš„æ€»ç»ç†æ˜¯æˆåŠŸçš„ä¸€åŠ æ¯ä¸ªä¼Ÿå¤§çš„ä¼ä¸šéƒ½æœ‰ä¸€ä¸ªä¼Ÿå¤§çš„æ€»ç»ç† ä¸æ˜¯æ¯ä¸ªäººéƒ½é€‚åˆå½“æ€»ç»ç†ï¼Œåˆ›å§‹äººå¦‚æžœä¸é€‚åˆï¼Œæœ€å¥½ä¸‰é¡¾èŒ…åºæ‰¾åˆ°åˆé€‚çš„æ€»ç»ç†å¹¶è®©è´¤ åˆ›ä¸šå…¬å¸çš„æ€»ç»ç†å¿…é¡»æ˜¯è‚¡ä¸œï¼Œå› ä¸ºå±è‚¡å†³å®šè„‘è¢‹ æ€»ç»ç†éœ€è¦å…·å¤‡ä»€ä¹ˆç´ è´¨ï¼Ÿ æ€»ç»ç†è¦ä»€ä¹ˆç´ è´¨ï¼Ÿ1ï¼Œæœ‰äº‹ä¸šå¿ƒï¼›2ï¼Œæœ‰æˆ˜ç•¥æ°´å¹³ï¼›3ï¼Œæœ‰èƒ¸æ€€ï¼›4ï¼Œå¿ƒç†ç´ è´¨å¥½ï¼›5ï¼Œå­¦ä¹ èƒ½åŠ›å¼º æŠ€æœ¯ä¸“å®¶åšæ€»ç»ç†éžå¸¸å±é™©ï¼ŒæŠ€æœ¯ä¸“å®¶æ˜“é™·è¯¯åŒºï¼š1ï¼ŒæŠ€æœ¯è‡ªè´Ÿï¼ŒæŠŠæŠ€æœ¯ç­‰åŒäºŽç»è¥ï¼›2ï¼Œè—è§†ç®¡ç†ï¼Œå´‡å°šè‡ªç”±ï¼Œæ‹’ç»è§„èŒƒï¼›3ï¼Œç‹¬äº«å¿ƒæ€ï¼Œä¸è®¤åŒäº§ä¸šé“¾ï¼Œå¦„å›¾è‡ªå·±å…¨éƒ¨è‡ªåŠ›æ›´ç”Ÿï¼›4ï¼Œæ‹’ç»æŽˆæƒï¼Œåªæ„¿æ„è‡ªå·±æŠŠæ¡èˆªå‘è‡ªå·±å†³ç­–ï¼Œä¸æ„¿æ„æŽˆæƒ å¦‚ä½•å½“æ€»ç»ç† æ€»ç»ç†çš„èŒè´£ï¼š1ï¼Œå¯¹è¡Œä¸šçš„è®¤çŸ¥ï¼›2ï¼Œæ‰“é€ ä¼ä¸šæ–‡åŒ–ï¼›3ï¼Œè®¾è®¡ç®¡ç†å·¥å…·ï¼›4ï¼Œå»ºç­å­ã€å®šæˆ˜ç•¥ã€å¸¦é˜Ÿä¼ï¼› å†›è§„22 ä¼ä¸šæ–‡åŒ–å¿…é¡»ä¸€å¼€å§‹å°±å»ºç«‹ï¼šåˆ¶åº¦æ—©å»ºã€è§„çŸ©æ—©å®šã€ä¸‘è¯æ—©è¯´ ä¼ä¸šæ–‡åŒ–è¦å°½æ—©å»ºç«‹ æ²¡æœ‰å¥½çš„ä¼ä¸šæ–‡åŒ–å°±æ²¡æœ‰å¥½çš„ä¼ä¸šï¼Œä¼ä¸šæ–‡åŒ–åŒ…æ‹¬ä¼ä¸šçš„æ ¸å¿ƒä»·å€¼è§‚ã€æ–¹æ³•è®ºä»¥åŠæˆ˜æœ¯åŽŸåˆ™ ä¼ä¸šæ–‡åŒ–ç‰¹å¾ï¼š1ï¼Œä¸ºæ„¿æ™¯ä½¿å‘½æœåŠ¡çš„ï¼›2ï¼Œæ˜¯å“ç‰Œçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼›3ï¼Œå› æ—¶è€Œå˜ï¼Œå› åŠ¿è€Œå˜ï¼Œä¸Žæ—¶ä¿±è¿› ç”Ÿå­˜é‡è¦è¿˜æ˜¯æ–‡åŒ–é‡è¦ï¼Ÿè¶Šæ˜¯å°å…¬å¸ã€è¶Šæ˜¯åˆ›ä¸šå…¬å¸ï¼Œè¶Šéœ€è¦ä¼ä¸šæ–‡åŒ–ï¼›ä½ è¦å¸¦é¢†ä¸€ç¾¤äººåŽ»æœªçŸ¥çš„è¿œæ–¹ï¼Œäººå®¶å‡­ä»€ä¹ˆï¼Ÿ æ–‡åŒ–æ˜¯ä¼ä¸šæˆ˜æ–—åŠ›çš„å€å¢žå™¨ æ ¸å¿ƒä»·å€¼è§‚åˆ›é€ ä¼ä¸šçš„å‡èšåŠ› æ–¹æ³•è®ºæå‡æˆ‘ä»¬çš„å·¥ä½œèƒ½åŠ›ã€‚æ‹‰å¡æ‹‰çš„æ–¹æ³•è®ºï¼šå…ˆé—®ç›®çš„ï¼Œå†åšæŽ¨æ¼”ï¼Œäº²è‡ªæ‰“æ ·ï¼ŒåŠæ—¶å¤ç›˜ æˆ˜æœ¯åŽŸåˆ™æé«˜æˆ‘ä»¬çš„å·¥ä½œæ°´å¹³ ä¼ä¸šæ–‡åŒ–éœ€è¦å¤§åŠ›å®£ä¼  æå‡ºæ¥ï¼Œæ˜Žç¡®ä»·å€¼è§‚ï¼Œå¹¶åˆ†è§£ä¸ºæ˜“äºŽç†è§£å’Œæ‰§è¡Œçš„å‡ ä¸ªè§’åº¦ å¤©å¤©è®²ï¼Œ èº«ä½“åŠ›è¡Œï¼š1,ä¼ä¸šå’Œé¢†å¯¼æ­£åœ¨åšä»€ä¹ˆï¼Ÿ2ï¼Œå·²ç»åšäº†ä»€ä¹ˆï¼Ÿ3ï¼Œæ€Žä¹ˆåšçš„ï¼Ÿ4ï¼Œæœªæ¥è¦åšä»€ä¹ˆ å†›è§„23 ç®¡ç†æ˜¯ä¸€é—¨ä¸“ä¸š æ²¡æœ‰äººç”Ÿæ¥å°±æ˜¯ç®¡ç†è€… åˆ›ä¸šæœ€å¤§çš„éš¾é¢˜æ˜¯åˆ›å§‹äººä¸æ‡‚ç®¡ç† ç®¡ç†æ–¹æ³•çš„æ ¸å¿ƒå°±æ˜¯ä¸‰å¤§è¦ç´ ï¼šå»ºç­å­ã€å®šæˆ˜ç•¥ã€å¸¦é˜Ÿä¼ ä¸åŒé˜¶æ®µçš„ä¼ä¸šç”¨ä¸åŒçš„æ–¹æ³•ç®¡ç† åˆ›ä¸šæœŸå…¬å¸çš„å…³é”®æ˜¯æŠ“ä¸šåŠ¡ï¼Œæœ€å¿Œè®³çš„å°±æ˜¯å°å…¬å¸å¤§åš å°å…¬å¸çš„6ä¸ªç®¡ç†å¤©æ¡ï¼š1ï¼Œç”±ç‚¹åŠé¢å¼å®šæˆ˜ç•¥ï¼Œæ‰§è¡Œæˆ˜ç•¥ä¸æ’žå—å¢™ä¸å›žå¤´ï¼›2ï¼Œè·Ÿæˆ‘å†²è€Œä¸æ˜¯ç»™æˆ‘ä¸Šï¼›3ï¼Œåªåšæœ€ä½Žé™åº¦çš„è§„èŒƒåŒ–ç®¡ç†ï¼Œä»¥å¥–æƒ©åˆ†æ˜Žä½œä¸ºç®¡ç†æ ¸å¿ƒï¼›4ï¼Œç²¾å…µç®€æ”¿ï¼Œèšç„¦ç›®æ ‡åšå‡æ³•ï¼Œç»™ç²¾å…µå‘ä¸€ä¸ªåŠäººçš„é’±è®©ä»–åšä¸¤ä¸ªäººçš„äº‹ï¼›5ï¼Œè€äº‹å®šæŒ‡æ ‡ç²¾ç»†åŒ–ç®¡ç†ï¼Œæ–°äº‹è®¾ç›®æ ‡é¼“åŠ±è¯•é”™ï¼›6ï¼Œå…ˆæ‰“æ ·å†æŽ¨å¹¿ï¼Œæ‰“æ ·ä¸æ€•æ…¢ï¼ŒæŽ¨å¹¿å¿…é¡»å¿« å¤§å…¬å¸ç®¡äºº å¤§å…¬å¸ç®¡ç†çš„æ ¸å¿ƒæ˜¯é€šè¿‡ç®¡äººæ¥ç®¡äº‹ åˆ†æƒç®¡ç†ï¼ŒæŽˆæƒçš„æ ¸å¿ƒï¼šæŽˆå¯¹äººï¼ŒæŽˆå¯¹äº‹ï¼ŒæŽˆå¯¹æ³• å†›è§„24 å»ºç­å­æ˜¯ç®¡ç†çš„é¦–è¦é—®é¢˜ ä¸€ä¸ªå¥½æ±‰ä¸‰ä¸ªå¸® ç­å­é¢†å¯¼éžå¸¸é‡è¦ï¼Œé¢†å¯¼ç­å­çš„æ ¸å¿ƒæ˜¯ä¸€æŠŠæ‰‹ å»ºç­å­æ˜¯ç®¡ç†çš„é¦–è¦é—®é¢˜ å¦‚ä½•å»ºç­å­ ç­å­æˆå‘˜éœ€è¦ä»€ä¹ˆç´ è´¨ï¼Ÿ1ï¼ŒæŠŠå…¬å¸å½“å‘½æ ¹å­åšï¼›2ï¼Œèº«ç»ç™¾æˆ˜ï¼Œæœ‰æŠŠèªæ˜Žè½¬åŒ–ä¸ºæ™ºæ…§çš„èƒ½åŠ›ï¼›3ï¼Œäº’è¡¥å’Œå›¢ç»“ å»ºç­å­å››éƒ¨æ›²ï¼šé€‰å¯¹äººã€å®šæ ¸å¿ƒã€å¡‘æ–‡åŒ–ã€å»ºæœºåˆ¶ ä¸€æŠŠæ‰‹å»ºç­å­æ³¨æ„é—®é¢˜ï¼š1ï¼Œé¿å…ä¸€è¨€å ‚ï¼›2ï¼Œå……åˆ†è°ƒåŠ¨ç­å­æˆå‘˜çš„ç§¯æžæ€§ï¼›3ï¼Œç­å­çš„è°ƒæ•´æœºåˆ¶ å†›è§„25 åšæŒæˆ˜ç•¥å’Œå®šæˆ˜ç•¥åŒæ ·é‡è¦ å®šæˆ˜ç•¥æ„ä¹‰é‡å¤§ï¼Œæ ¸å¿ƒæ˜¯ç¡®å®šæ‰“æ³•å’Œé¢†å†›äººç‰©ï¼ å››ä¸åšï¼š1ï¼Œæ²¡æœ‰åˆé€‚é¢†å†›äººç‰©çš„é¡¹ç›®ä¸åšï¼›2ï¼Œæ²¡æœ‰ä¸‹å†³å¿ƒæ­»ç£•çš„é¡¹ç›®ä¸åšï¼›3ï¼Œä¸æŽŒæ¡ä¸»åŠ¨æƒçš„é¡¹ç›®ä¸åšï¼›4ï¼Œæ— æ³•å¤åˆ¶çš„é¡¹ç›®ä¸åš å¦‚ä½•å®šæˆ˜ç•¥ è”æƒ³çš„æˆ˜ç•¥ä¸ƒæ­¥æ³•ï¼š1ï¼Œè®¾å®šæ„¿æ™¯ï¼›2ï¼Œè®¾å®šæˆ˜ç•¥ç›®æ ‡ï¼›3ï¼Œåˆ¶å®šæˆ˜ç•¥è·¯çº¿ï¼Œè¦æœ‰æ¸…æ™°çš„æ‰“æ³•ï¼›4ï¼Œç¡®å®šé¢†å†›äººç‰©ï¼Œåƒä¸‡ä¸è¦â€œå‡‘åˆâ€ï¼›5ï¼Œæˆ˜æœ¯åˆ†è§£ï¼Œæ²™ç›˜ä¸ŠæŽ¨æ¼”ä¸å‡ºçš„ç»“æžœï¼Œå®žæˆ˜ä¸­æ ¹æœ¬ä¸å¯èƒ½è¾¾æˆï¼›6ï¼Œç¡®å®šç»„ç»‡ç»“æž„å’Œé¢„ç®—ï¼›7ï¼Œè€ƒæ ¸æ¿€åŠ±ï¼ŒåŠæ—¶å¤ç›˜è°ƒæ•´ æ‰§è¡Œæˆ˜ç•¥çš„è¿‡ç¨‹å°±æ˜¯åšæŒæˆ˜ç•¥çš„è¿‡ç¨‹ ç»å¸¸å¤ç›˜æ ¡æ­£æˆ˜ç•¥ æ’žäº†å—å¢™å†è€ƒè™‘è°ƒæ•´æˆ˜ç•¥ å†›è§„26 æ‰“é€ ä¸€æ”¯é“å†› å¸¦å‡ºä¸€æ”¯é“å†›æ‰èƒ½æˆ˜æ— ä¸èƒœ è®©å‘˜å·¥â€œå…¥æ¨¡â€ æ‰“èƒœä»—åªèƒ½é æˆ‘ä»¬è‡ªå·±çš„é˜Ÿä¼ï¼Œä¸è¦ç›¸ä¿¡å¤–æ¥çš„å’Œå°šä¼šå¿µç»ï¼Œä¸€å®šè¦æ¸…æ¥šå¼•å…¥æ–°äººæ˜¯å¯¹æˆ‘ä»¬é˜Ÿä¼çš„è¡¥å……è€Œéžä»£æ›¿ï¼Œå¼•å…¥æ–°äººå¿…é¡»è¦èžå…¥é˜Ÿä¼ã€‚ é€‰å¥½ææ‰èƒ½å¸¦å¥½å…µ â€œä¸‰å¿ƒâ€ç”¨äººæ ‡å‡†ï¼Œå‘˜å·¥å¿…é¡»è¦æœ‰è´£ä»»å¿ƒï¼Œä¸­å±‚å¹²éƒ¨è¦æœ‰ä¸Šè¿›å¿ƒï¼Œæ ¸å¿ƒé«˜ç®¡å¿…é¡»è¦æœ‰äº‹ä¸šå¿ƒ ä»€ä¹ˆæ ·çš„äººæœ‰æ½œåŠ›ï¼šäº‹ä¸šå¿ƒã€æœ‰éŸ§åŠ²å’Œå–„æ€»ç»“ å¦‚ä½•å¸¦é˜Ÿä¼ å»ºç«‹æœ‰æ•ˆçš„ç»„ç»‡ç»“æž„ å»ºç«‹ç®¡ç†æ¨¡å¼ï¼Œæ‹‰å¡æ‹‰ç®¡ç†æ¨¡å¼ï¼šè®¾ç›®æ ‡ï¼Œåšè®¡åˆ’ï¼ŒæŠ“è€ƒè¯„å’Œç†è§„èŒƒ å®£è´¯æ–‡åŒ– å»ºç«‹åŸ¹è®­ä½“ç³» å†›è§„27 ç‰©è´¨æ¿€åŠ±æ˜¯ç¬¬ä¸€ä½çš„ äººäººéƒ½éœ€è¦æ¿€åŠ±ï¼Œéƒ½å–œæ¬¢æ¿€åŠ± å¤šæ¿€åŠ±å°‘æƒ©ç½šã€‚æ¿€åŠ±ä¸šåŠ¡ï¼Œæƒ©æ²»è¿è§„ å…¬å¸å¿…é¡»å»ºç«‹èµ·ä¸€å¥—æ¿€åŠ±ä½“ç³» æ¯”è¾ƒé€šç”¨çš„æ¿€åŠ±æ–¹æ³•ï¼šä¸­ä½Žçº§å²—ä½çŽ°é‡‘æ¿€åŠ±ï¼Œä¸­é«˜çº§å²—ä½çŽ°é‡‘+æœŸæƒï¼Œé«˜çº§å²—ä½æœŸæƒæ¿€åŠ± æ¿€åŠ±çš„ä¸‰å¤§è¯¯åŒº è¯¯åŒº1ï¼Œåªè®²ç‰©è´¨æ¿€åŠ±ï¼Œç‰¹åˆ«æ˜¯åªè®²é’± è¯¯åŒº2ï¼Œå­¦è€Œä¼˜åˆ™ä»•å¼å¥–åŠ±ï¼Œè®°ä½å¹¶ä¸æ˜¯æ‰€æœ‰äººéƒ½æœ‰ç®¡ç†æŽ§åˆ¶ä»–äººçš„èƒ½åŠ›å’Œæ¬²æœ› è¯¯åŒº3ï¼Œæ±Ÿæ¹–å¼åˆ†é…ï¼Œè®°ä½é©å‘½ä¸æ˜¯é è‡ªè§‰ æ¿€åŠ±çš„ä¸‰å¤§åŽŸåˆ™ å…¬å¹³æ˜¯æ¿€åŠ±çš„ç¬¬ä¸€åŽŸåˆ™ï¼Œè¦æœç»å¤§é”…é¥­ çº¢åŒ…å¼æ¿€åŠ±ä¸å¯å–ï¼Œæ¿€åŠ±å¿…é¡»æ˜¯å¯é¢„è§çš„ï¼Œå¯è®¡ç®—çš„ æ¿€åŠ±å¿…é¡»å’Œä¸¥æ ¼çš„ç›®æ ‡è€ƒè¯„é…å¥— é«˜æ•ˆæ¿€åŠ±çš„4ä¸ªåŽŸåˆ™ 1ï¼Œç‰©è´¨æ¿€åŠ±ä¸Žç²¾ç¥žæ¿€åŠ±ç›¸ç»“åˆ 2ï¼Œå½“æœŸæ¿€åŠ±ä¸Žè¿œæœŸæ¿€åŠ±ç›¸ç»“åˆï¼Œå¥–æƒ©çš„æ—¶æ•ˆæ€§è¿œæ¯”å¥–æƒ©çš„åŠ›åº¦æ›´é‡è¦ï¼Œè¿œæœŸæ¿€åŠ±å¯ä»¥å¢žå¤§å‘˜å·¥çš„ç¦»èŒæˆæœ¬ 3ï¼ŒçŽ°é‡‘æ¿€åŠ±ä¸ŽæœŸæƒæ¿€åŠ±ç›¸ç»“åˆ 4ï¼Œå•åœºå¥–å’Œè¿žèƒœå¥–ç›¸ç»“åˆ å†›è§„28 ä¸è¦æžå¤§è·ƒè¿›ï¼Œå¤§è·ƒè¿›çš„å¿…ç„¶ç»“æžœå°±æ˜¯å¤§å€’é€€ï¼ æˆåŠŸæ²¡æœ‰æ·å¾„ åšä¼ä¸šæ˜¯è·‘é•¿è·‘ï¼Œè¦å¿«é€Ÿå¯åŠ¨ï¼Œè¿…é€Ÿè¡ŒåŠ¨ï¼Œä½†è¿‡ç¨‹ä¹‹ä¸­è¦ä¸€æ­¥ä¸€æ­¥æ¥ åˆ›ä¸šè€…è¦æœ‰è¿‡ç¨‹æ„Ÿï¼Œä¸è¦æ€¥äºŽæ±‚æˆ ä¿žæ°¸ç¦çš„ä¼ä¸šå‘å±•â€œä¸‰å…³â€è®º äº§å“å…³ï¼Œå…³æ³¨äºŽäº§å“æœ¬èº«ï¼Œè€Œä¸æ˜¯æŠ€æœ¯æ·±åº¦æˆ–è€…è¥é”€ç­–ç•¥ï¼ å¸‚åœºå…³ï¼Œè¦å­¦ä¼šè‡ªå·±å°è¯•ï¼Œç‹¬è‡ªå¼€åˆ›å‡ºä¸€æ¡é€‚åˆè‡ªå·±çš„é“è·¯æ¥ ç®¡ç†å…³ï¼Œåˆ›ä¸šåˆæœŸçŠ¯é”™æˆæœ¬ä¸é«˜ï¼Œä½†éšç€ä¸šåŠ¡å‘å±•ï¼Œä»£ä»·å¿…ç„¶ç›´çº¿ä¸Šå‡ã€‚å› æ­¤ä¼ä¸šå¿…é¡»å»ºç«‹ç›¸å…³çš„è§„èŒƒç®¡ç†åˆ¶åº¦ ä¼ä¸šå‘å±•é€Ÿåº¦è¦æŒ‰ç»æµŽè§„å¾‹æ¥ é©å‘½æ™šæˆåŠŸåŠå¹´åˆå¦‚ä½•ï¼Ÿä»»ä½•æ—¶å€™åšäº‹çš„å…³é”®éƒ½æ˜¯æŽ§åˆ¶ï¼Œè®©ä¸€åˆ‡åœ¨ä½ çš„æŽ§åˆ¶ä¹‹å†…æ¯”é€Ÿåº¦åŠ›åº¦éƒ½é‡è¦ï¼Œé©å‘½å¯ä»¥æ™šæˆåŠŸä½†ä¸èƒ½ç¿»è½¦ å‡ºæ¥æ··æ€»æ˜¯è¦è¿˜çš„ã€‚ä¼ä¸šçš„å‘å±•é€Ÿåº¦å¹¶éžè¶Šå¿«è¶Šå¥½ å†›è§„29 å…ˆè¯•ç‚¹å†æŽ¨å¹¿ æŽ¨å¹¿å‰å…ˆè¯•ç‚¹ å…ˆè¯•ç‚¹ï¼Œä¸€èˆ¬æƒ…å†µä¸‹è¯•ç‚¹è¦æ‰¾ä¸€ä¸ªæœ‰ä»£è¡¨æ€§çš„ï¼Œä½†åˆä¸æ˜¯ä¸»è¦å¸‚åœºçš„åœ°æ–¹å±•å¼€ï¼Œæ ¸å¿ƒæ˜¯éªŒè¯æƒ³æ³•æ˜¯å¦å¯è¡Œï¼Œæ‹¿å‡ºæœ‰è¯´æœåŠ›çš„æ•°æ®æ¥ï¼ä¸è¦è®¤ä¸ºè‡ªå·±æ˜¯äº§å“çš„ç”¨æˆ·ï¼ æ¦œæ ·çš„åŠ›é‡æ˜¯æ— ç©·çš„ è¥é”€çš„æ ¸å¿ƒæ˜¯æ‰¾åˆ°æŽ¨å¹¿æ–¹æ³• ä¼ä¸šç»è¥é‡åœ¨ä¸¤ä»¶äº‹ï¼šè¥é”€å’Œåˆ›æ–° è¥é”€çš„æ ¸å¿ƒæ˜¯æ‰¾åˆ°å¯å¤åˆ¶çš„æŽ¨å¹¿æ–¹æ³•ï¼Œç‰¹ç‚¹ï¼š1ï¼Œèƒ½å¤Ÿäº§ç”Ÿè§„æ¨¡é”€é‡ï¼›2ï¼Œç®€å•ä¸”å¯å¤åˆ¶ï¼›3ï¼ŒæŠ•å…¥äº§å‡ºæ¯”åˆé€‚ å¦‚ä½•è¯•ç‚¹ ä¸€èˆ¬è€Œè¨€è¯•ç‚¹ç›®çš„ï¼š1ï¼ŒéªŒè¯æ–¹æ³•æ˜¯å¦å¯è¡Œï¼›2ï¼ŒæŠ“æ•°æ®ï¼Œé‡åŒ–æ–¹æ¡ˆï¼›3ï¼Œå†™èœè°±ï¼Œå½¢æˆæ‰‹å†Œï¼Œè®©æ‰€æœ‰çš„äººå¯ä»¥å¤åˆ¶ æŽ¨å¹¿ä¹‹å‰å¿…é¡»æ‰“æ ·ï¼Œæ–¹æ³•ï¼š1ï¼Œäº²è‡ªæŠ“ï¼›2ï¼Œå¯å¤åˆ¶ï¼›3ï¼Œè¦æŠ ç»†èŠ‚ï¼›4ï¼Œæ‰“æ ·çš„è¿‡ç¨‹è¦ç»†ï¼›5ï¼Œè¦å†™æ‰‹å†Œ å†›è§„30 åšæŒæ˜¯å¿…é¡»çš„ï¼Œç»´æŒæ˜¯æ²¡æœ‰æ„ä¹‰çš„ è½¬åž‹ä¸æ˜¯å¤±è´¥ï¼Œä¸ºäº†ç»´æŒçš„ç»´æŒæ‰æ˜¯æœ€å¤§çš„å¤±è´¥ å‡ ä¹Žæ‰€æœ‰çš„æˆåŠŸéƒ½åŽ†ç»ç£¨éš¾ å‡ ä¹Žæ‰€æœ‰ä¼Ÿå¤§çš„å…¬å¸éƒ½ç»åŽ†è¿‡è½¬åž‹ ç»´æŒæ²¡æœ‰æ„ä¹‰ åˆ†æ¸…åšæŒè¿˜æ˜¯ç»´æŒï¼Œè¦å­¦ä¼šè·³å‡ºç”»é¢çœ‹ç”»ï¼Œå¿…é¡»è®©è‡ªå·±è„±ç¦»å…¬å¸çš„æ—¥å¸¸äº‹åŠ¡ æŠ¬å¤´çœ‹è·¯æ¯”ä½Žå¤´æ‹‰è½¦æ›´é‡è¦ å†›è§„31 æˆåŠŸåŽä¸æŠ˜è…¾ æˆåŠŸåŽä¸è¦å¤´è„‘å‘çƒ­ å¤šå…ƒåŒ–è¦æ…Žé‡ï¼Œé¦–å…ˆéš”è¡Œå¦‚éš”å±±ï¼Œå…¶æ¬¡å¤šå…ƒåŒ–ä¼šå¯¼è‡´èµ„æºåˆ†æ•£ï¼Œç®¡ç†èƒ½åŠ›ä¸è¶³ åŠ é€Ÿåº¦è¦èŠ‚åˆ¶ï¼Œé‡è¦çš„æ˜¯å¯æŒç»­å¢žé•¿ ä¸è¦è¢«è½¬ä»¶å¿½æ‚  çº¸ä¸Šè°ˆå…µçš„æ­£è§„åŒ–å¯¹ä¼ä¸šæœ‰å®³æ— åˆ©ï¼Œè¦å–„äºŽæ£æ‘©ã€å€Ÿé‰´åˆ«äººçš„ç®¡ç†ç»éªŒï¼Œä½†ç»ä¸èƒ½ç”Ÿæ¬ç¡¬å¥— é ä¸“å®¶å»ºè®®å®šæˆ˜ç•¥åŸºæœ¬ä¸Šæ²¡æˆ!æˆ˜ç•¥æ˜¯ä¸€é—¨å®žè·µç§‘å­¦ï¼Œè®°ä½ä¸åœ¨å…¶ä½ä¸è°‹å…¶æ”¿ï¼Œä¸æ‹…å…¶è´£ è¦æ•¢äºŽåšå®ˆè‡ªå·±çš„æˆåŠŸä¹‹é“ã€‚è°¦è™šæ˜¯å¥½äº‹ï¼Œä½†ä¸èƒ½æ€€ç–‘è‡ªå·±ï¼Œå°¤å…¶ä¸è¦é‚¯éƒ¸å­¦æ­¥ã€‚ç®¡ç†è¦æ”¹è‰¯è€Œä¸æ˜¯é©å‘½ å†›è§„32 å€ŸåŠ©èµ„æœ¬çš„åŠ›é‡åˆ›ä¸š çŽ°åœ¨æ˜¯èµ„æœ¬æ—¶ä»£ èµ„æœ¬çš„ä»‹å…¥å·²ç»æ”¹å˜äº†ä¼ä¸šçš„æˆé•¿å‘¨æœŸ åªæœ‰ç”¨å¥½èµ„æœ¬æ‰èƒ½æˆåŠŸ ä¸èžèµ„å°±ä¼šè¾“åœ¨èµ·è·‘çº¿ä¸Š å€ŸåŠ©èµ„æœ¬çš„åŠ›é‡åŠ å¿«å‘å¼ é€Ÿåº¦ å’Œæœ€å¼ºçš„èµ„æœ¬ç»“åˆ å­¦ä¼šå’Œèµ„æœ¬æ‰“äº¤é“æ˜¯åˆ›å§‹äººçš„å¿…ä¿®è¯¾ å†›è§„33 èžèµ„è¦æ•¢äºŽåƒäº åˆ«ç›¸ä¿¡é‚£äº›èžèµ„ç¥žè¯ï¼Œä¼ä¸šèžä¸åˆ°èµ„æ˜¯å¸¸æ€ æƒ³æ¸…æ¥šç¼ºé’±å¹²ä»€ä¹ˆå†åŽ»èžèµ„ ç«­å°½å…¨åŠ›ä¹‹åŽå†åŽ»èžèµ„ã€‚è‡ªå·±çš„é’±éƒ½ä¸æ•¢èŠ±ï¼Œåˆ«äººå‡­ä»€ä¹ˆç»™ä½ é’±ï¼Ÿåšå¥½ä½ çš„äº‹ï¼Œé’±ä¼šæ¥æ‰¾ä½ çš„ å°½å¯èƒ½å¤šçš„éªŒè¯ä½ çš„æƒ³æ³• èžèµ„è¦æ‰¾å¯¹äººï¼Œä¸€èˆ¬è€Œè¨€åªæœ‰åˆä¼™äººåœ¨åŸºé‡‘ä¸­æ‰èƒ½å‘æŒ¥ä½œç”¨ï¼Œåªæœ‰å†³ç­–å§”å‘˜ä¼šæ‰èƒ½æœ€ç»ˆå†³ç­– èžèµ„çš„çªé—¨æ˜¯åƒäºï¼Œèžèµ„çš„ä¸‰ä¸ªçªé—¨ï¼š1ï¼Œèžèµ„ä»·æ ¼è¦ä½Žç‚¹å„¿ï¼›2ï¼Œèžèµ„è§„æ¨¡è¦å°ç‚¹å„¿ï¼›3ï¼Œèžèµ„æ—¶é—´è¦æ—©ç‚¹å„¿ å†›è§„34 é£Žé™©æŠ•èµ„åªæ˜¯ä½ çš„ä¸€æ®µæƒ… é£Žé™©æŠ•èµ„è¿›å…¥ä¼ä¸šçš„å”¯ä¸€ç›®çš„æ˜¯èŽ·åˆ©é€€å‡º ä¸è¦æŒ‡æœ›æŠ•èµ„äººèƒ½å¸®ä½ é’±ä»¥å¤–çš„äº‹æƒ… å…‹æœèžèµ„æ—¶çš„â€œå¼±åŠ¿â€å¿ƒç† ä¸è¦è¢«â€œæˆ˜ç•¥æŠ•èµ„â€æŽ§åˆ¶ ä¸è¦è¢«team sheetå¿½æ‚ ï¼Œteam sheetå‡ æŠ•èµ„æ¡æ¬¾æ¸…å• ä¸è¦â€œå–â€äº†å…¬å¸ å†›è§„35 ä»»ä½•æ—¶å€™éƒ½ä¸è¦è®©æŠ•èµ„äººæ›¿ä½ å†³ç­– æŠ•èµ„äººå’Œå…¬å¸ä¸åœ¨ä¸€æ¡èˆ¹ä¸Š æŠ•èµ„äººå’Œå…¬å¸çš„åˆ©ç›Šå³ç»Ÿä¸€æœ‰å¯¹ç«‹ æŠ•èµ„äººä¸æ˜¯é™ªä¼´ä¼ä¸šç»ˆç”Ÿçš„äºº æŠ•èµ„äººä»£è¡¨çš„å°´å°¬åœ°ä½ èžèµ„æ¡æ¬¾å¾ˆå…³é”® æ‰€è°“çš„è¡Œä¸šæƒ¯ä¾‹æ¡æ¬¾éƒ½æ˜¯å¯ä»¥æ”¹çš„ è®°ä½ä½ æ‰æ˜¯ä¼ä¸šçš„ä¸»äºº ä»»ä½•æ—¶å€™éƒ½ä¸è¦æ”¾å¼ƒä½ å¯¹å…¬å¸çš„è´£ä»» ä¸è¦å¯¹èµŒ å†›è§„36 ä¸è¦ä¸ºäº†ä¸Šå¸‚è€Œä¸Šå¸‚ ä¸Šå¸‚ä¸æ˜¯ç›®çš„ ä¸Šå¸‚æ—¶ä¼ä¸šçš„æˆäººç¤¼ ä¸Šå¸‚èƒ½å¤Ÿæžå¤§çš„ä¿ƒè¿›ä¼ä¸šçš„è§„èŒƒå‘å±• ä¸Šå¸‚ä¸æ˜¯åˆ¤æ–­ä¼ä¸šæ˜¯å¦æˆåŠŸçš„æ ‡å‡† ä¸‹å†³å¿ƒä¸Šå¸‚æ‰èƒ½æˆåŠŸ åªæœ‰æ¨ªä¸‹ä¸€æ¡å¿ƒä¸Šå¸‚æ‰å¯èƒ½æˆåŠŸ æ¼«é•¿çš„å›½å†…ä¸Šå¸‚è·¯ ä¸Šå¸‚ä¹‹åŽï¼Œè€ƒè¯•æ‰åˆšåˆšå¼€å§‹ åŒ…è£…ä¸Šå¸‚ä¸å¯å– é™„å½•ï¼šåå°†æ˜¯æ€Žæ ·ç‚¼æˆçš„&emsp;&emsp;åå°†å­¦æ ¡å¼€å­¦äº†ï¼Œç¬¬ä¸€ä¸ªå¹´çº§è¦å­¦ä¹ çš„æ˜¯å†›äº‹ç†è®ºã€‚æ‰€æœ‰æƒ³æˆä¸ºåå°†çš„äººï¼Œå¿…é¡»è¦å­¦ä¹ ä¸€äº›ç»å…¸çš„ç†è®ºçŸ¥è¯†ï¼ŒåŒ…æ‹¬å­™å­å…µæ³•ã€å´å­å…µæ³•ç­‰ç­‰ï¼Œåªæœ‰åœ¨ç§¯ç´¯äº†å¤§é‡çš„ç†è®ºçŸ¥è¯†åŽï¼Œä½ æ‰èƒ½è·¨å…¥ä¸‹ä¸€ä¸ªå¹´çº§ï¼Œä½†è¿™ä¸ªå¹´çºªæœ‰ä¸€ä¸ªå¾ˆç‰¹æ®Šçš„è§„å®šï¼Œå› ä¸ºæœ‰äº›åŒå­¦å®¶é‡Œç©·ï¼Œä¹°ä¸èµ·ä¹¦æœ¬ï¼Œæ‰€ä»¥ä»–ä»¬åªèƒ½åœ¨å®žæˆ˜ä¸­åŽ»å­¦ä¹ è¿™äº›ç†è®ºã€‚ä»–ä»¬ä¹‹ä¸­çš„ä¼˜ç§€ä»£è¡¨å°±æ˜¯æŽäº‘é¾™åŒå­¦ã€‚&emsp;&emsp;ç©·äººå®¶çš„å­©å­æ—©å½“å®¶ï¼Œå®žåœ¨æ²¡æœ‰è¯´é”™çš„ï¼Œè¿™äº›åœ¨å®žæˆ˜ä¸­å­¦ä¹ ç†è®ºçš„åŒå­¦å°†å¯ä»¥è·³è¿‡ç¬¬äºŒä¸ªç¨‹åºï¼Œç›´æŽ¥è¿›å…¥ç¬¬ä¸‰ä¸ªç¨‹åºã€‚&emsp;&emsp;æˆ‘ä»¬è¿˜æ˜¯å’Œå¤§å¤šæ•°åŒå­¦ä¸€èµ·ï¼Œæ¥çœ‹çœ‹ç¬¬äºŒä¸ªå¹´çº§è¦å­¦ä¹ äº›ä»€ä¹ˆï¼Œç¬¬äºŒä¸ªå¹´çº§å­¦ä¹ çš„å†…å®¹æ˜¯å®žæˆ˜ã€‚è¿™æ˜¯æžä¸ºé‡è¦çš„ï¼Œé‚£äº›ç†è®ºä¸­å­¦ä¹ çš„ä¼˜ç§€è€…å¦‚æžœä¸èƒ½è¿‡è¿™ä¸€å…³ï¼Œä»–ä»¬å°±å°†è¢«æŽˆäºˆä¸€ä¸ªå…‰è£çš„ç§°å·â€“çº¸ä¸Šè°ˆå…µï¼Œè¿™ä¸ªç§°å·çš„ç¬¬ä¸€ä¸ªèŽ·å¾—è€…æ˜¯èµµæ‹¬åŒå­¦ï¼ŒæŽˆäºˆè€…æ˜¯äºŒå¹´çº§çš„å¹´çº§ä¸»ä»»èµµå¥¢ã€‚&emsp;&emsp;æˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆå®žæˆ˜å¦‚æ­¤é‡è¦ï¼Œè¿™æ˜¯å› ä¸ºè™½ç„¶å†›äº‹ç†è®ºéƒ½æ˜¯é«˜å¹´çº§çš„å­¦é•¿ä»¬ç»éªŒæ€»ç»“ï¼Œä½†ç”±äºŽä»–ä»¬å†™è¿™äº›ä¸œè¥¿çš„æ—¶å€™ï¼Œæƒ…å†µå’ŒçŽ°çŠ¶æ˜¯ä¸å®Œå…¨ä¸€æ ·çš„ï¼Œåœ¨å®žæˆ˜ä¸­ï¼Œå¦‚æžœç…§æ¬æ˜¯è¦åƒå¤§äºçš„ã€‚èµµæ‹¬åŒå­¦å°±æ˜¯æ²¡æœ‰å­¦å¥½ï¼Œæ‰ä¸èƒ½æ¯•ä¸šçš„ã€‚&emsp;&emsp;ä½œä¸ºä¸€ä¸ªå­¦å‘˜ï¼Œæƒ³æˆä¸ºåå°†ï¼Œä¸€èˆ¬éƒ½æ˜¯ä»Žå°å…µå¹²èµ·ï¼Œå½“ç„¶é™¤äº†**å¤–ï¼Œæ¯”å¦‚èµµæ‹¬åŒå­¦ï¼Œç”±äºŽå¹´çº§ä¸»ä»»èµµå¥¢æ˜¯ä»–çˆ¶äº²ï¼Œæ‰€ä»¥ä»–ä¸€å¼€å§‹å°±æ˜¯å¤§å°†ï¼Œè¿™æ˜¯ä¸å¦¥å½“çš„ã€‚&emsp;&emsp;å› ä¸ºåªæœ‰æˆ˜åœºæ‰èƒ½è®©ä¸€ä¸ªäººæˆä¸ºçœŸæ­£çš„åå°†ï¼Œä»–å¿…é¡»äº²æ‰‹æŒåˆ€åŽ»è¿½å‡»æ•Œäººï¼Œè§è¯†æˆ˜åœºçš„æƒ¨çƒˆï¼Œæ˜Žç™½äººè¢«åˆ€ç æ˜¯è¦æ­»çš„ï¼Œäº†è§£ä½ ä¸æ€æˆ‘ï¼Œæˆ‘å°±æ€ä½ è¿™æ¡æˆ˜åœºä¸Šæ°¸ä¸è¿‡æ—¶çš„çœŸç†ï¼ŒçŸ¥é“æ‰€è°“æ‰“ä»—å°±æ˜¯ä»¥æ€§å‘½ç›¸æï¼Œä»–ä»¬æ‰ä¼šæ˜Žç™½ä»€ä¹ˆæ˜¯æˆ˜åœºï¼Œä»€ä¹ˆæ˜¯å®žæˆ˜ã€‚&emsp;&emsp;å¤§å¤šæ•°å­¦å‘˜ä¼šåœ¨è¿™ä¸€å…³è¢«æ·˜æ±°ï¼Œä»–ä»¬ä¼šæ”¹è¡Œï¼Œä¸€ç”Ÿå½“ä¸€ä¸ªå†›äº‹ç¥¨å‹ï¼Œè¿™å¯¹ä»–ä»¬æ¥è¯´å¹¶ä¸è§å¾—æ˜¯ä¸€ä»¶åäº‹ã€‚&emsp;&emsp;è€Œç•™å­˜ä¸‹æ¥çš„é‚£äº›å­¦å‘˜ï¼Œåœ¨æ®‹é…·çš„å®žæˆ˜ä¸­é€æ¸äº†è§£äº†æˆ˜äº‰çš„è§„å¾‹ï¼Œå¼€å§‹çœŸæ­£èµ°ä¸Šåå°†ä¹‹è·¯ã€‚&emsp;&emsp;å¥½äº†ï¼Œæˆ‘ä»¬å¸¦é¢†å‰©ä¸‹çš„å­¦å‘˜æ¥åˆ°ä¸‰å¹´çº§ï¼Œä¸‰å¹´çº§è¦å­¦ä¹ çš„æ˜¯å†·é…·ã€‚&emsp;&emsp;æˆä¸ºä¸€ä¸ªåå°†ï¼Œå°±å¿…é¡»å’Œä»æ…ˆã€æ¸©å’Œä¹‹ç±»çš„åè¯è¯´å†è§ï¼Œä»–å¿…é¡»å¿ƒå¦‚é“çŸ³ï¼Œå†·é…·æ— æƒ…ï¼Œå½“ç„¶åŽ†å²ä¸Šä¹Ÿæœ‰å¾ˆå¤šä»¥ä»å‡ºåçš„å„’å°†ï¼Œä½†è¯·å¤§å®¶æ³¨æ„ï¼Œä»–ä»¬çš„ä»æ˜¯å¯¹å£«å…µå’Œè€ç™¾å§“è€Œè¨€çš„ï¼Œå¯¹æ•Œäººä»–ä»¬æ¯”è°éƒ½å†·é…·ã€‚&emsp;&emsp;æ‰€è°“ä»ä¸å¸¦å…µï¼Œä¹‰ä¸è¡Œè´¾ï¼Œå†·é…·ä¸æ˜¯æ®‹å¿ï¼Œä¸æ˜¯æ€æˆ®æ— è¾œçš„è€ç™¾å§“ï¼Œè€Œæ˜¯åšå¿ï¼Œæ¯”å¦‚ä½ çš„ä¸€ä¸ªå¾ˆå¥½çš„æœ‹å‹è§¦çŠ¯äº†å†›çºªï¼Œä½†ä½ ä¸ºäº†æ‰§è¡Œå†›çºªï¼Œä¸€å®šè¦æ€äº†ä»–ï¼Œåªæœ‰è¿™æ ·ï¼Œä½ æ‰èƒ½æŽ§åˆ¶å†›é˜Ÿï¼Œå³ä½¿ä»–æ˜¯ä½ æœ€è¦å¥½çš„æœ‹å‹ï¼Œç”šè‡³æ˜¯ä½ çš„äº²äººï¼Œä½ ä¹Ÿè¦è¿™æ ·åšã€‚&emsp;&emsp;è¿™æ‰æ˜¯çœŸæ­£çš„å†·é…·ï¼&emsp;&emsp;å­¦å‘˜ä»¬å°†åœ¨æˆ˜åœºä¸Šå­¦ä¼šå†·é…·ï¼Œä»–ä»¬å¯èƒ½éƒ½æ˜¯å–„è‰¯çš„å¹´è½»äººï¼Œå¹³æ—¶ä»Žä¸ä¸Žäººäº‰åµï¼Œä½†å½“ä»–ä»¬èµ°ä¸Šæˆ˜åœºï¼Œäº²çœ¼çœ‹åˆ°è‡ªå·±çš„åŒä¹¡å’Œæˆ˜å‹è¢«æ•Œäººæ€æ­»ï¼Œæˆ–è€…èº«è´Ÿé‡ä¼¤åœ¨åœ°ä¸Šç—›è‹¦çš„å‘»åŸï¼Œä»–ä»¬ä¼šè¢«æ„¤æ€’å’Œç—›è‹¦æ‰€é¼“åŠ¨ï¼Œæ¯«ä¸ç•™æƒ…çš„æ€æ­»ä¸€åˆ‡ä¸Žè‡ªå·±æ•Œå¯¹çš„äººï¼Œç»™åœ°ä¸Šçš„ä¼¤å…µè¡¥ä¸Šä¸€åˆ€ï¼Œç„¶åŽä¸€ä¸ªäººåœ¨å°¸ä½“æ—è¾¹å–ƒå–ƒè‡ªè¯­ï¼Œå°±åœ¨è¿™åœ°ç‹±ä¸€èˆ¬çš„çŽ¯å¢ƒä¸­ï¼Œä»–ä»¬å˜äº†ã€‚&emsp;&emsp;ä»Žæ€é¸¡éƒ½æ€•è§è¡€åˆ°æ•Œäººçš„è„‘æµ†å’Œé²œè¡€æº…åˆ°èº«ä¸Šæµ‘ç„¶ä¸çŸ¥ï¼Œä»Žæ¸©æ–‡å°”é›…åˆ°å†·é…·æ— æƒ…ï¼Œä»–ä»¬åœ¨æ®‹é…·çš„çŽ¯å¢ƒä¸­æ¯•ä¸šäº†ï¼Œä¸åˆæ ¼è€…å°†è¢«æ·˜æ±°ï¼Œè€Œé‚£äº›å¿ƒå¦‚åšçŸ³çš„äººå°†è¿›å…¥å››å¹´çº§çš„å­¦ä¹ ï¼Œä»–ä»¬ç¦»æˆä¸ºåå°†è¶Šæ¥è¶Šè¿‘ã€‚&emsp;&emsp;å››å¹´çº§è¦å­¦ä¹ çš„æ˜¯ç†æ™ºï¼Œè¿™ä¹Ÿæ˜¯æžä¸ºé‡è¦çš„ä¸€ä¸ªçŽ¯èŠ‚ï¼Œæˆ‘ä»¬ä½œä¸ºæ™®é€šäººï¼Œç”Ÿæ´»ä¸­ä¼šè¢«è®¸å¤šäº‹æƒ…å·¦å³è‡ªå·±çš„æƒ…ç»ªï¼Œæ¯”å¦‚ä¹°å½©ç¥¨ä¸­ä¸ªäºŒç­‰å¥–å‡ ç™¾å—ï¼Œä½ ä¹Ÿä¼šé«˜å…´åŠå¤©ï¼Œè¦æ˜¯ç‚’è‚¡ç¥¨èµšäº†å¤§é’±ï¼Œå°±æ›´ä¸ç”¨è¯´äº†ã€‚é‚£ä¹ˆå¦‚æžœä½ çŽ©çš„æ¸¸æˆæ˜¯ä»¥äººå‘½ä¸ºèµŒæ³¨å‘¢ï¼Ÿä½ ä¼šæœ‰ä½•ååº”ã€‚&emsp;&emsp;å½“ä½ åœ¨æžåº¦ç´§å¼ çš„çŽ¯å¢ƒä¸­ä¸Žæ•ŒäººåƒµæŒäº†å¾ˆé•¿æ—¶é—´ï¼Œçªç„¶æ•Œäººé€€å´äº†ï¼Œä½ èƒ½éåˆ¶ä½å¿ƒä¸­çš„æ¿€åŠ¨ï¼Œå…ˆåˆ¤æ–­å½¢åŠ¿å†åŽ»è¿½å‡»å—ï¼Ÿå½“ä½ æŠµæŒ¡ä¸ä½æ•Œäººçš„è¿›æ”»ï¼Œå…¨å†›å³å°†å´©æºƒæ—¶ï¼Œä½ èƒ½åŠæ—¶å†·é™ä¸‹æ¥ï¼Œå‘çŽ°æ•Œäººçš„å¼±ç‚¹å—ï¼Ÿ&emsp;&emsp;æ˜¯çš„ï¼Œè¿™å¤ªéš¾äº†ï¼Œæˆ‘ä»¬éƒ½æ˜¯å‡¡äººï¼Œéƒ½æœ‰æ„Ÿæƒ…ï¼Œå®¹æ˜“æ¿€åŠ¨ï¼Œè€Œæˆ‘ä»¬çš„å­¦å‘˜ä»¬å°±å¿…é¡»ä¿æŒå†·é™å’Œç†æ™ºï¼Œåœ¨ä»»ä½•æ—¶å€™éƒ½ä¸è¢«æ„Ÿæƒ…å·¦å³ï¼Œå°±å¦‚åŒèµ›è½¦ä¸€æ ·ï¼Œèµ›è½¦æ˜¯ä¸€é¡¹æ¿€æƒ…å››å°„çš„è¿åŠ¨ï¼Œç„¶è€Œè½¦æ‰‹å´å¿…é¡»ä¿æŒç»å¯¹çš„å†·é™ã€‚&emsp;&emsp;è¿™å°±æ˜¯å››å¹´çº§å­¦å‘˜è¦åšåˆ°çš„ï¼Œèƒ½è¿‡è¿™ä¸€å…³çš„äººï¼Œå·²ç»å¾ˆå°‘äº†ï¼Œå‰©ä¸‹çš„ç²¾è‹±ä»¬ï¼Œæˆ‘ä»¬ç»§ç»­å‰è¿›ï¼&emsp;&emsp;äº”å¹´çº§æ˜¯æœ€é‡è¦çš„ä¸€ä¸ªå¹´çº§ï¼Œåœ¨è¿™ä¸ªå¹´çº§é‡Œï¼Œå­¦å‘˜ä»¬è¦å­¦ä¹ çš„æ˜¯åˆ¤æ–­ã€‚&emsp;&emsp;è¿™æ˜¯åå°†çš„é‡è¦ç‰¹å¾ï¼Œä¸éœ€è¦ç†ç”±ï¼Œä¸éœ€è¦ä¾æ®ï¼Œä½ èƒ½ä¾é çš„å°±æ˜¯ä½ è‡ªå·±çš„åˆ¤æ–­ã€‚ä½ è¦æ˜Žç™½çš„æ˜¯ï¼Œä½ æ‰€æŽŒæ¡çš„æ˜¯æ— æ•°å£«å…µçš„ç”Ÿå‘½ï¼Œè€Œæ‰€æœ‰çš„äººéƒ½ç­‰ç€ä½ æ‹¿æ³¨æ„ã€‚&emsp;&emsp;å°å…µåªç®¡æ‰“ä»—ï¼Œé‡åˆ°é—®é¢˜ï¼Œä»–ä¼šé—®ä¼é•¿ï¼Œä¼é•¿ä¼šé—®ç™¾æˆ·ï¼Œç™¾æˆ·ä¼šé—®åƒæˆ·ï¼Œåƒæˆ·é—®æŒ‡æŒ¥ï¼Œä½ å°±æ˜¯æŒ‡æŒ¥ï¼Œä½ è¿˜èƒ½åŽ»é—®è°ï¼Ÿï¼&emsp;&emsp;åœ¨å£«å…µçš„çœ¼ä¸­ï¼Œä½ å°±æ˜¯ä¸Šå¸ï¼Œå°±æ˜¯ä¸»å®°ä¸–ç•Œçš„ç¥žï¼ä»–ä»¬èƒ½å¦æ´»ä¸‹æ¥å°±çœ‹ä½ çš„äº†ï¼&emsp;&emsp;å…µæ³•ä¹‹æ‰€ä»¥å¥‡å¦™ï¼Œå…³é”®åœ¨äºŽä¸€ä¸ªå˜å­—ï¼Œæ‰€è°“å–„å‡ºå¥‡è€…ï¼Œæ— ç©·å¦‚å¤©åœ°ï¼Œä¸ç«­å¦‚æ±Ÿæµ·ï¼æˆ˜åœºæ˜¯ä¸€ä¸ªçž¬æ¯ä¸‡å˜çš„ä¸–ç•Œï¼Œå†³æ–­åªåœ¨ä¸€çº¿ä¹‹é—´ï¼Œè¿›æ”»è¿˜æ˜¯é˜²å®ˆï¼Œå‰è¿›è¿˜æ˜¯é€€å´ï¼Œéƒ½è¦ä½ æ‹¿æ³¨æ„ï¼Œåœ¨ä½ èº«è¾¹ä¹Ÿè®¸æœ‰ä¸€å¤§ç¾¤å‚è°‹ï¼Œä½†ä»–ä»¬å¾€å¾€å¹¶ä¸ç«™åœ¨çœŸç†ä¸€è¾¹ï¼Œå†³æ–­çš„è¿˜æ˜¯ä½ ã€‚å¦‚æžœå‚è°‹æ¯”ä½ é«˜æ˜Žï¼Œä¸ºä»€ä¹ˆè¦ä½ å½“ä¸»å¸…ï¼Ÿï¼&emsp;&emsp;å¦‚æžœä½ èƒ½ä»Žé‚£å˜åŒ–èŽ«æµ‹çš„ä¸–ç•Œä¸­ï¼Œå‘çŽ°å…¶ä¸­çš„å¥¥å¦™ï¼Œå¹¶å°±æ­¤åšå‡ºæ­£ç¡®çš„å†³æ–­ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œä½ å·²ç»å…·å¤‡äº†åå°†æœ€ä¸»è¦çš„ç´ è´¨ã€‚ä½†æ˜¯è¿˜æœ‰ä¸€å…³æ˜¯ä½ å¿…é¡»é€šè¿‡çš„ï¼Œåªæœ‰è¿‡äº†è¿™ä¸€å…³ï¼Œä½ æ‰æ˜¯çœŸæ­£çš„åå°†ã€‚&emsp;&emsp;çŽ°åœ¨æˆ‘ä»¬æ¥åˆ°æœ€åŽä¸€ä¸ªå¹´çº§ï¼Œè¿™ä¸ªå¹´çº§æˆ‘ä»¬è¦å­¦ä¹ çš„æ˜¯åšå¼ºã€‚&emsp;&emsp;ä»ŽæŸç§æ„ä¹‰ä¸Šè¯´ï¼Œè¿™æ˜¯éžå¸¸é‡è¦çš„ä¸€ä¸ªå­¦ä¹ å†…å®¹ï¼Œæ‰€è°“èƒœè´¥å…µå®¶å¸¸äº‹ï¼Œä¸è¿‡å®‰æ…°è‡ªå·±è€Œå·²ï¼Œæ‰“äº†è´¥ä»—ï¼Œæ­»å‡ ä¸‡äººï¼Œä½ èƒ½æ‰¿å—è¿™æ ·çš„å¿ƒç†åŽ‹åŠ›å—ï¼Œä½ æ€Žä¹ˆåŽ»é¢å¯¹é‚£äº›å£«å…µçš„å®¶äººï¼Œæ€Žä¹ˆæœ‰è„¸åŽ»è§å°†æŒ‡æŒ¥æƒäº¤ç»™ä½ çš„ä¸Šçº§ï¼Ÿé‚£æ˜¯å‡ ä¸‡äººå‘½ï¼Œä¸æ˜¯å‡ ä¸‡åªé¸¡ï¼&emsp;&emsp;ç„¶è€Œä½ çš„é€‰æ‹©åªèƒ½æ˜¯åšå¼ºï¼Œå³ä½¿ä½ å±¡æˆ˜å±¡è´¥ï¼Œä½†å¿…é¡»å±¡è´¥å±¡æˆ˜ï¼æˆ‘ä»¬å¯ä»¥æƒ³è±¡ï¼Œå½“ä½ æ•°æ¬¡è´¥åœ¨åŒä¸€ä¸ªäººæ‰‹ä¸‹æ—¶ï¼Œä½ ä¼šç•æƒ§è¿™ä¸ªäººï¼Œæ‰€è°“çš„ææŸç—‡å°±æ˜¯è¿™ä¹ˆæ¥çš„ï¼Œå³ä½¿ä½ æœ‰ç€æ°å‡ºçš„å†›äº‹æ‰èƒ½ï¼Œä¸èƒ½æˆ˜èƒœè‡ªå·±çš„è½¯å¼±ï¼Œè¿˜æ˜¯ä¸èƒ½æˆä¸ºåå°†çš„ã€‚&emsp;&emsp;è€Œé‚£äº›æœ€ä¼˜ç§€çš„äººèƒ½å¤Ÿä»Žå¤±è´¥ä¸­çˆ¬èµ·æ¥ï¼ŒåŽ»æŒ‘æˆ˜é‚£ä¸ªå¤šæ¬¡æˆ˜èƒœè‡ªå·±çš„äººï¼Œè¿™æ‰æ˜¯åšå¼ºï¼&emsp;&emsp;å½“ä½ å…·å¤‡äº†ä»¥ä¸Šæ‰€æœ‰æ¡ä»¶åŽï¼Œä½ å°±æˆä¸ºäº†çœŸæ­£çš„åå°†ï¼Œä½†è¿˜æœ‰ä¸€ç‚¹ï¼Œæ˜¯ä½ å¿…é¡»å…·å¤‡çš„ï¼Œé‚£å°±æ˜¯è¿æ°”ã€‚&emsp;&emsp;è¯´èµ·æ¥ä¼¼ä¹Žæœ‰ç‚¹æ»‘ç¨½ï¼Œè¿™ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ä¸€ä¸ªå› ç´ ï¼Œæ²¡å‡†å°±åœ¨ä½ ä¸‡äº‹ä¿±å¤‡ï¼Œå‡†å¤‡å¤§å±•èº«æ‰‹æ—¶ï¼Œä¸€æ”¯å†·ç®­å°„æ¥ï¼Œå°±æ­¤æ­»æŽ‰ï¼Œé‚£æ‰æ˜¯æ¯”çª¦å¨¥è¿˜å†¤ï¼Œä½ çš„ä¸€åˆ‡æŠ±è´Ÿå’Œèƒ½åŠ›éƒ½æ— æ³•å±•çŽ°äº†ã€‚æˆ˜å²ä¸Šåªä¼šè¿™æ ·è®°è½½ï¼ŒæŸå¹´æŸæœˆæŸæ—¥ï¼ŒæŸæŸäººåœ¨æˆ˜åœºä¸Šè¢«ä¸çŸ¥åå°å…µå°„æ­»ï¼Œå…¶äººå…·ä½“æƒ…å†µä¸è¯¦ã€‚&emsp;&emsp;æ‰€ä»¥åå°†ä¹‹è·¯æ˜¯ä¸€æ¡è‰°è‹¦çš„é“è·¯ï¼Œéžå¤§æ™ºå¤§å‹‡ï¼Œå¤§å‰å¤§åˆ©ä¹‹äººä¸èƒ½ä¸ºã€‚&emsp;&emsp;æ•…å…µæ— å¸¸åŠ¿ï¼Œæ°´æ— å¸¸å½¢ã€‚èƒ½å› æ•Œå˜åŒ–è€Œå–èƒœè€…ï¼Œè°“ä¹‹ç¥žã€‚&emsp;&emsp;åœ¨è¿™å˜åŒ–æ— ç©·çš„æˆ˜åœºä¸Šï¼Œè¦æƒ³æˆä¸ºçœŸæ­£çš„å†›ç¥žï¼Œä½ å¿…é¡»åœ¨ä¸€æ¬¡æ¬¡çš„æ®‹æ€ä¸­å¹¸å­˜ä¸‹æ¥ï¼Œçœ‹ç€å‘¨å›´çš„äººæ­»åŽ»ï¼Œå¿å—æ— å°½çš„ç—›è‹¦ï¼Œåœ¨æˆ˜äº‰ä¸­å­¦ä¹ æˆ˜äº‰ï¼ŒåŠªåŠ›èŽ·å–é‚£ä¸ä¸ºäººçŸ¥çš„å¥¥ç§˜å’Œè§„å¾‹ï¼Œç»åŽ†æ— æ•°æ¬¡å¤±è´¥ï¼Œæœ‰å‹‡æ°”ä»Žæ— æ•°å£«å…µçš„å°¸ä½“ä¸Šç«™ç«‹èµ·æ¥ï¼ŒåŽ»æ‰“è´¥å¯¹æ‰‹ã€‚&emsp;&emsp;è¿™æ‰æ˜¯çœŸæ­£çš„åå°†ä¹‹è·¯ï¼Œä¸€æ¡ç—›è‹¦ã€å­¤ç‹¬ã€è¡€è…¥çš„é“è·¯ï¼Œåœ¨è¿™æ¡è·¯ä¸Šï¼Œèƒ½ä¿¡ä»»å’Œä¾é çš„äººåªæœ‰ä½ è‡ªå·±ã€‚ä½†åªè¦ä½ èµ°åˆ°ç»ˆç‚¹ï¼Œå…‰è£å’Œèƒœåˆ©å°±ä¼šåœ¨é‚£é‡Œç­‰å¾…ç€ä½ ã€‚]]></content>
      <categories>
        <category>è¯»ä¹¦</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å•ä¾‹çš„åˆ©ä¸Žå¼Š]]></title>
    <url>%2F2016%2F01%2F18%2F%E5%8D%95%E4%BE%8B%E7%9A%84%E5%88%A9%E4%B8%8E%E5%BC%8A%2F</url>
    <content type="text"><![CDATA[å•ä¾‹æ¨¡å¼ æ¦‚å¿µï¼šä¸€ä¸ªå•ä¾‹ç±»ï¼Œåœ¨æ•´ä¸ªç¨‹åºä¸­åªæœ‰ä¸€ä¸ªå®žä¾‹ï¼Œå¹¶ä¸”æä¾›ä¸€ä¸ªç±»æ–¹æ³•ä¾›å…¨å±€è°ƒç”¨ï¼Œåœ¨ç¼–è¯‘æ—¶åˆå§‹åŒ–è¿™ä¸ªç±»ï¼Œç„¶åŽä¸€ç›´ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œåˆ°ç¨‹åºï¼ˆAPPï¼‰é€€å‡ºæ—¶ç”±ç³»ç»Ÿè‡ªåŠ¨é‡Šæ”¾è¿™éƒ¨åˆ†å†…å­˜ã€‚ å­˜å‚¨ä½ç½®ï¼šå…¨å±€åŒº ç³»ç»Ÿçš„å•ä¾‹ï¼šUIApplicationã€NSNotificationCenterã€NSFileManagerã€NSUserDefaults åˆ›å»º é€šç”¨ç‰ˆå•ä¾‹ 12345678910+ (ZKSingleManager *)sharedInstance &#123;static dispatch_once_t onceToken;static ZKSingleManager *instance = nil;dispatch_once(&amp;onceToken, ^&#123;if (instance == nil) &#123;instance = [[ZKSingleManager alloc] init];&#125;&#125;);return instance;&#125; ä¸¥æ ¼ç‰ˆå•ä¾‹ 1234567891011121314151617181920212223242526272829303132@interface ZKSingleManager : NSObject+ (ZKSingleManager *)sharedInstance;// NS_UNAVAILABLE è¡¨ç¤ºç¦æ­¢æ­¤æ–¹æ³•è°ƒç”¨- (instancetype)init NS_UNAVAILABLE;// æ•ˆæžœåŒä¸Šï¼Œä½†å¯ä»¥å¸¦ä¸Šæ–‡å­—è¯´æ˜Ž+ (instancetype)new __attribute__((unavailable(&quot;å•ä¾‹åªèƒ½é€šè¿‡sharedInstanceåˆå§‹åŒ–&quot;)));- (id)copy __attribute__((unavailable(&quot;å•ä¾‹ç¦æ­¢æ·±æ‹·è´&quot;)));@end#import &quot;ZKSingleManager.h&quot;@implementation ZKSingleManager+ (ZKSingleManager *)sharedInstance &#123;static dispatch_once_t onceToken;static ZKSingleManager *instance = nil;dispatch_once(&amp;onceToken, ^&#123;if (instance == nil) &#123;instance = [[ZKSingleManager alloc] initPrivate];&#125;&#125;);return instance;&#125;- (id)initPrivate &#123;self = [super init];return self;&#125;@end å•ä¾‹æ¨¡å¼çš„ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼š1ã€åœ¨æ•´ä¸ªç¨‹åºä¸­åªä¼šå®žä¾‹åŒ–ä¸€æ¬¡ï¼Œæ‰€ä»¥åœ¨ç¨‹åºå¦‚æžœå‡ºäº†é—®é¢˜ï¼Œå¯ä»¥å¿«é€Ÿçš„å®šä½é—®é¢˜æ‰€åœ¨ï¼›2ã€ç”±äºŽåœ¨æ•´ä¸ªç¨‹åºä¸­åªå­˜åœ¨ä¸€ä¸ªå¯¹è±¡ï¼ŒèŠ‚çœäº†ç³»ç»Ÿå†…å­˜èµ„æºï¼Œæé«˜äº†ç¨‹åºçš„è¿è¡Œæ•ˆçŽ‡ï¼› ç¼ºç‚¹:1ã€ä¸èƒ½è¢«ç»§æ‰¿ï¼Œä¸èƒ½æœ‰å­ç±»ï¼›2ã€ä¸æ˜“è¢«é‡å†™æˆ–æ‰©å±•ï¼ˆå¯ä»¥ä½¿ç”¨åˆ†ç±»ï¼‰ï¼›3ã€åŒæ—¶ï¼Œç”±äºŽå•ä¾‹å¯¹è±¡åªè¦ç¨‹åºåœ¨è¿è¡Œä¸­å°±ä¼šä¸€ç›´å ç”¨ç³»ç»Ÿå†…å­˜ï¼Œè¯¥å¯¹è±¡åœ¨é—²ç½®æ—¶å¹¶ä¸èƒ½é”€æ¯ï¼Œåœ¨é—²ç½®æ—¶ä¹Ÿæ¶ˆè€—äº†ç³»ç»Ÿå†…å­˜èµ„æºï¼› å½“ä½ ä½¿ç”¨å•ä¾‹çš„æ—¶å€™ ä½ éœ€è¦é—®è‡ªå·±ä»¥ä¸‹å››ä¸ªé—®é¢˜ è¿™ä¸ªç±»è¡¨è¾¾çš„å«ä¹‰çœŸçš„åªèƒ½æœ‰ä¸€ä¸ªå®žä¾‹ä¹ˆï¼Ÿï¼ˆå¦‚UIApplicationï¼‰è¿˜æ˜¯åªæ˜¯ä¸ºäº†å¥½è°ƒç”¨è€Œå·²ï¼Ÿ; è¿™ä¸ªå•ä¾‹æŒæœ‰çš„å†…å­˜ä¸€ç›´å­˜åœ¨ï¼› æ˜¯å¦èƒ½ç”¨ç±»æ–¹æ³•ä»£æ›¿ï¼Ÿï¼› è¿™ä¸ªå•ä¾‹å¯¹è±¡æ˜¯å¦èƒ½æˆä¸ºå¦ä¸€ä¸ªå•ä¾‹å¯¹è±¡çš„å±žæ€§ï¼Ÿå¦‚æžœæ˜¯ï¼Œåº”è¯¥ä½œä¸ºå¦ä¸€ä¸ªå•ä¾‹çš„å±žæ€§ å‚è€ƒ é¿å…æ»¥ç”¨å•ä¾‹]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è§†å›¾æ›´æ–°çš„å‡ ä¸ªæ–¹æ³•]]></title>
    <url>%2F2016%2F01%2F01%2F%E8%A7%86%E5%9B%BE%E6%9B%B4%E6%96%B0%E7%9A%84%E5%87%A0%E4%B8%AA%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[1 layoutSubviews1.1 å®˜æ–¹ä»‹ç»The default implementation of this method does nothing on iOS 5.1 and earlier. Otherwise, the default implementation uses any constraints you have set to determine the size and position of any subviews. Subclasses can override this method as needed to perform more precise layout of their subviews. You should override this method only if the autoresizing and constraint-based behaviors of the subviews do not offer the behavior you want. You can use your implementation to set the frame rectangles of your subviews directly. You should not call this method directly. If you want to force a layout update, call the setNeedsLayout method instead to do so prior to the next drawing update. If you want to update the layout of your views immediately, call the layoutIfNeeded method. 1.2 åˆ†æž åªèƒ½é‡å†™layoutSubviewsï¼Œä¸èƒ½ä¸»åŠ¨è°ƒç”¨ï¼åªèƒ½ç³»ç»Ÿè°ƒç”¨ æƒ³è¦è°ƒlayoutSubviewsæ–¹æ³•ï¼Œéœ€è¦è°ƒsetNeedsLayoutæˆ–layoutIfNeeded æ­¤æ–¹æ³•ä½œç”¨æ˜¯æ›´åŠ ç²¾ç»†çš„æŽ§åˆ¶å­è§†å›¾frame 1.3ç³»ç»Ÿè°ƒç”¨layoutSubviewsæ—¶æœºç®€å•çš„è¯´æ›´æ–°å¸ƒå±€æ€»ä¼šé‡æ–°è§¦å‘layoutSubviewsæ–¹æ³•ï¼Œä½†æ³¨æ„ï¼šinitåˆå§‹åŒ–ä¸ä¼šè§¦å‘layoutSubviews è°ƒç”¨ addSubview æ–¹æ³•æ—¶ä¼šæ‰§è¡Œè¯¥æ–¹æ³•ã€‚ è®¾ç½®å¹¶æ”¹å˜å­è§†å›¾çš„frameå±žæ€§æ—¶ä¼šè§¦å‘è¯¥æ–¹æ³•ã€‚ æ»‘åŠ¨UIScrollViewåŠç»§æ‰¿ä¸ŽUIScrollViewçš„æŽ§ä»¶æ—¶ä¼šè§¦å‘è¯¥æ–¹æ³•ã€‚ æ—‹è½¬å±å¹•æ—¶ï¼Œä¼šè§¦å‘çˆ¶è§†å›¾çš„layoutSubviewsæ–¹æ³•ã€‚ è®¾ç½®å¹¶æ”¹å˜è§†å›¾çš„frameå±žæ€§æ—¶ä¼šè§¦å‘çˆ¶è§†å›¾çš„layoutSubviewsæ–¹æ³•ã€‚ 2 layoutIfNeeded2.1 å®˜æ–¹ä»‹ç»Use this method to force the view to update its layout immediately. When using Auto Layout, the layout engine updates the position of views as needed to satisfy changes in constraints. Using the view that receives the message as the root view, this method lays out the view subtree starting at the root. If no layout updates are pending, this method exits without modifying the layout or calling any layout-related callbacks. 2.2 åˆ†æž å¦‚æžœéœ€è¦åˆ·æ–°çš„haulï¼Œç«‹å³å¼ºåˆ¶åˆ·æ–°æŽ¥å—è€…å’Œå®ƒçš„å­è§†å›¾ï¼ ä¹Ÿå°±æ˜¯è¯´layoutIfNeededä¹‹åŽæœ‰å¯èƒ½ä¸åˆ·æ–°ä¸è°ƒç”¨layoutSubviewsï¼Œä¾‹å¦‚viewçš„frameç­‰çŠ¶æ€æ²¡æœ‰å˜åŒ– 2.3 å‚è€ƒ How is layoutIfNeeded used? 3 setNeedsLayout3.1 å®˜æ–¹ä»‹ç»Call this method on your applicationâ€™s main thread when you want to adjust the layout of a viewâ€™s subviews. This method makes a note of the request and returns immediately. Because this method does not force an immediate update, but instead waits for the next update cycle, you can use it to invalidate the layout of multiple views before any of those views are updated. This behavior allows you to consolidate all of your layout updates to one update cycle, which is usually better for performance. 3.2 åˆ†æž å½“éœ€è¦é‡æ–°å¸ƒå±€æ—¶ï¼Œåœ¨ä¸»çº¿ç¨‹è°ƒç”¨setNeedsLayoutï¼Œå°†è®¾ç½®ä¸€ä¸ªæ ‡å¿—ä½å¹¶ç«‹å³è¿”å›ž è°ƒç”¨setNeedsLayoutå¹¶ä¸ä¼šç«‹å³æ›´æ–°è§†å›¾ï¼Œè€Œæ˜¯ä¸‹æ¬¡runloopæ›´æ–°è§†å›¾ å¯ä»¥å°†å¤šä¸ªè§†å›¾æ›´æ–°åˆå¹¶åœ¨ä¸€èµ·ï¼Œæé«˜æ€§èƒ½ layoutSubviewsä¸€å®šä¼šè¢«è°ƒç”¨ 4 setNeedsDisplay4.1 å®˜æ–¹ä»‹ç»You can use this method or the setNeedsDisplayInRect: to notify the system that your viewâ€™s contents need to be redrawn. This method makes a note of the request and returns immediately. The view is not actually redrawn until the next drawing cycle, at which point all invalidated views are updated. Note:If your view is backed by a CAEAGLLayer object, this method has no effect. It is intended for use only with views that use native drawing technologies (such as UIKit and Core Graphics) to render their content. If your view is backed by a CAEAGLLayer object, this method has no effect. It is intended for use only with views that use native drawing technologies (such as UIKit and Core Graphics) to render their content.You should use this method to request that a view be redrawn only when the content or appearance of the view change. If you simply change the geometry of the view, the view is typically not redrawn. Instead, its existing content is adjusted based on the value in the viewâ€™s contentMode property. Redisplaying the existing content improves performance by avoiding the need to redraw content that has not changed. 4.2 åˆ†æž å½“éœ€è¦é‡ç»˜è°ƒç”¨setNeedsDisplayï¼Œå°†è®¾ç½®ä¸€ä¸ªæ ‡å¿—ä½å¹¶ç«‹å³è¿”å›ž è°ƒç”¨setNeedsDisplayå¹¶ä¸ä¼šç«‹å³æ›´æ–°è§†å›¾ï¼Œè€Œæ˜¯ä¸‹æ¬¡runloopæ›´æ–°è§†å›¾ setNeedsDisplayä¸€å®šä¼šè°ƒç”¨drawRect:æ–¹æ³• å¦‚æžœè§†å›¾ç”±caeagllayerå¯¹è±¡æ”¯æŒï¼Œåˆ™æ­¤æ–¹æ³•æ— æ•ˆ å¦‚æžœåªæ›´æ”¹è§†å›¾çš„å‡ ä½•å›¾å½¢ï¼Œéœ€è¦é€šè¿‡ContentModeçš„å€¼è¿›è¡Œè°ƒæ•´çš„ 4.3 å‚è€ƒ setNeedsLayout and setNeedsDisplay 5 other question æ›´æ”¹çº¦æŸæ€Žä¹ˆå®žçŽ°åŠ¨ç”»ï¼Ÿå‚è€ƒï¼šHow do I animate constraint changes? 12345[UIView animateWithDuration:5animations:^&#123;self._addBannerDistanceFromBottomConstraint.constant = -32;[self.view layoutIfNeeded]; // Called on parent view&#125;]; setNeedsLayout vs. setNeedsUpdateConstraints and layoutIfNeeded vs updateConstraintsIfNeeded 123setNeedsUpdateConstraints makes sure a future call to updateConstraintsIfNeeded calls updateConstraints.setNeedsLayout makes sure a future call to layoutIfNeeded calls layoutSubviews.]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>UI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å†è¯»ç¼–å†™é«˜è´¨é‡iOSçš„52ä¸ªæ–¹æ³•]]></title>
    <url>%2F2015%2F12%2F29%2F%E5%86%8D%E8%AF%BB%E7%BC%96%E5%86%99%E9%AB%98%E8%B4%A8%E9%87%8FiOS%E7%9A%8452%E4%B8%AA%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[OC çš„èµ·æº åœ¨å¤´æ–‡ä»¶ä¸­å°½é‡å°‘å¼•å…¥å…¶ä»–å¤´æ–‡ä»¶ ä½¿ç”¨@class å°†å¼•å…¥å¤´æ–‡ä»¶çš„æ—¶æœºå°½é‡å»¶åŽï¼ŒåŒæ—¶ç”¨äºŽä¸¤ä¸ªæ–‡ä»¶ç›¸äº’å¼•ç”¨çš„é—®é¢˜ã€‚ ç”¨#import ä¸ç”¨#include å¿…è¦çš„æ—¶å€™ç”¨ä¸€ä¸ª .h æ–‡ä»¶æ¥æ•´ç†ç”¨åˆ°çš„å¼•ç”¨ å¯ä»¥ç”¨è¯­æ³•ç³– è¦æ³¨æ„nilçš„æƒ…å†µï¼Œè¯­æ³•ç³–åˆ›å»ºçš„éƒ½æ˜¯ä¸å¯å˜å¯¹è±¡ å¤šç”¨ç±»åž‹å¸¸é‡ï¼Œå°‘ç”¨#defineé¢„å¤„ç†æŒ‡ä»¤ å°‘ç”¨#define ç”¨ç±»ä¼¼ static const CGFloat time = 0.3 ï¼Œå¦‚éœ€è¦åˆ™åœ¨ .h ä¸­ä½¿ç”¨extern CGFloat const time å£°æ˜Žä¸ºå¤–éƒ¨å¯ç”¨çš„ å¸¸é‡åœ¨ .m æ–‡ä»¶å†…ç”¨kå¼€å¤´ï¼Œä¸è¿‡çŽ°åœ¨å¥½åƒæ‰€æœ‰çš„éƒ½æ˜¯kå¼€å¤´ å˜é‡ä¸€å®šè¦åŒæ—¶ç”¨staticå’Œconstæ¥å£°æ˜Žï¼Œconstè¡¨ç¤ºä¸èƒ½ä¿®æ”¹ï¼Œstaticåˆ™è¡¨ç¤ºè¯¥å˜é‡ä»…åœ¨å®šä¹‰æ­¤å˜é‡çš„ç¼–- - è¯‘å•å…ƒä¸­å¯è§ï¼Œä¸åŠ staticåœ¨ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åŠ external å¤–éƒ¨ç¬¦å·ï¼Œè‹¥æ­¤æ—¶åœ¨å¦å¤–å£°æ˜ŽåŒåå˜é‡ï¼Œåˆ™æŠ¥é”™ ç”¨æžšä¸¾è¡¨ç¤ºçŠ¶æ€é€‰é¡¹çŠ¶æ€ç -fobjc-arc å°½é‡ä¸ç”¨enum ç”¨NS_ENUM ï¼Œ å‡¡æ˜¯ä»¥æŒ‰ä½æˆ–æ“ä½œçš„ç»„åˆæžšä¸¾éƒ½åº”ä½¿ç”¨NS_OPTIONSå®šä¹‰ï¼Œæžšä¸¾é‡å¯¹åº”çš„å€¼å¯ä»¥ç”¨ 1&lt;&lt;0 æ–¹ä¾¿å„é€‰é¡¹é€šè¿‡â€œæŒ‰ä½æˆ–â€æ“ä½œæ¥ç»„åˆã€‚ä¸éœ€è¦äº’ç›¸ç»„åˆåˆ™ç”¨NS_ENUM ä½¿ç”¨switchæ¥åŒºåˆ†æžšä¸¾çš„æ—¶å€™ï¼Œæœ€å¥½ä¸è¦åŠ ä¸Šdefaultè¯­å¥ï¼Œè¿™æ ·å½“æ–°åŠ ä¸€ç§æžšä¸¾ç±»åž‹æ—¶ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ ç†è§£å±žæ€§è¿™ä¸€æ¦‚å¿µ @dynamic é˜»æ­¢ç¼–è¯‘å™¨è‡ªåŠ¨åˆæˆgetterå’Œsetteræ–¹æ³•ï¼Œä½†å¦‚æžœè‡ªå·±ä¹Ÿä¸å®žçŽ°ï¼Œç¼–è¯‘å™¨æ˜¯ä¸ä¼šæŠ¥é”™çš„ nonatomic readwrite readonly assign strong weak copy unsafe_unretained getter setter iOSä¸­ä½¿ç”¨åŒæ­¥é”å¼€é”€å¾ˆå¤§ï¼Œå¼€å‘Mac OS Xç¨‹åºæ—¶ä½¿ç”¨åŒæ­¥é”å´æ²¡äº‹ åœ¨å¯¹è±¡å†…éƒ¨å°½é‡ç›´æŽ¥è®¿é—®å®žä¾‹å˜é‡ ç›´æŽ¥ç”¨ä¸‹åˆ’çº¿è®¿é—®å±žæ€§ï¼Œä¸ä¼šè§¦å‘KVOï¼Œä¸ç»è¿‡getterå’Œsetteræ–¹æ³• åœ¨getterå’Œsetteræ–¹æ³•ä¸­ä¸è¦å‡ºçŽ°self åœ¨åˆå§‹åŒ–åŠdeallocæ–¹æ³•ä¸­ï¼Œæ€»æ˜¯åº”è¯¥ç›´æŽ¥é€šè¿‡å®žä¾‹å˜é‡æ¥è¯»å†™æ•°æ®,åœ¨initå’Œdeallocæ–¹æ³•ä¸­é¿å…æ—¶å€™ç”¨self.property ç†è§£å¯¹è±¡ç­‰åŒæ€§è¿™ä¸€æ¦‚å¿µ == åˆ¤æ–­å†…å­˜æ˜¯å¦ç›¸ç­‰ï¼Œ isEqual åˆ¤æ–­å¯¹è±¡æ˜¯éƒ½ç›¸ç­‰ ç›¸åŒå¯¹è±¡å¿…é¡»æœ‰ç›¸åŒçš„å“ˆå¸Œç ï¼Œä½†ä¸¤ä¸ªå“ˆå¸Œç ç›¸åŒçš„å¯¹è±¡å´æœªå¿…ç›¸åŒ ä»¥ç±»ç°‡éšè—å®žçŽ°ç»†èŠ‚ å®žçŽ°å­ç±»æ—¶ï¼Œä¸€å®šè¦æ³¨æ„çˆ¶ç±»æŒ‡æ˜Žè¦†ç›–çš„æ–¹æ³• åœ¨æ—¢æœ‰ç±»ä¸­ä½¿ç”¨å…³è”å¯¹è±¡å­˜æ”¾è‡ªå®šä¹‰æ•°æ® objc_setAssociateObject objc_getAssociatedObject objc_removeAssociatedObjects æ…Žç”¨ï¼Œå¾ˆéš¾å‘çŽ°ä¹Ÿå¾ˆéš¾æŽ’æŸ¥ ç†è§£objc_msgSendçš„ä½œç”¨ ç†è§£æ¶ˆæ¯è½¬å‘æœºåˆ¶ resolveInstanceMethod: resolveClassMethod: forwardingTargetForSelector forwardInvocation ç”¨æ–¹æ³•è°ƒé…æŠ€æœ¯ï¼ˆmethod swizzlingï¼‰è°ƒè¯•é»‘ç›’æ–¹æ³• ç†è§£ç±»å¯¹è±¡çš„ç”¨æ„ idæœ¬èº«å°±æ˜¯æŒ‡é’ˆï¼Œæ‰€ä»¥ä¸ç”¨ * isMemberOfClass isKindOfClass ç”¨å‰ç¼€é¿å…å‘½åç©ºé—´å†²çª appleå®£ç§°å…¶ä¿ç•™ä½¿ç”¨æ‰€æœ‰â€œä¸¤å­—æ¯å‰ç¼€â€çš„æƒåˆ©ï¼Œæ‰€ä»¥è‡ªå·±é€‰ç”¨çš„å‰ç¼€åº”è¯¥æ˜¯ä¸‰ä¸ªå­—æ¯åŠä»¥ä¸Šçš„ é¡¹ç›®ä¸­æ‰€æœ‰çš„æ–¹æ³•ã€å‡½æ•°éƒ½æœ€å¥½åŠ å‰ç¼€ æä¾›å…¨èƒ½åˆå§‹åŒ–æ–¹æ³• å¿…é¡»è¦å®žçŽ°çš„ï¼Œæ”¾åˆ°inité‡Œè®©å¯¹è±¡å®žä¾‹åŒ–çš„æ—¶å€™å°±å®žçŽ°ã€‚ï¼ˆå…¨èƒ½åˆå§‹åŒ–ï¼‰ å­ç±»è¦åŒ…å«çˆ¶ç±»å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•å¹²çš„äº‹ã€‚ å¯ä»¥æŠ›å‡ºå¼‚å¸¸æ¥æé†’ï¼Œä½†ä¸å»ºè®®ï¼ŒOCä¸­åªæœ‰å‘ç”Ÿä¸¥é‡é”™è¯¯æ—¶ï¼Œæ‰åº”è¯¥æŠ›å‡ºå¼‚å¸¸ã€‚ã€ å®žçŽ°description æ–¹æ³• é‡å†™description æ–¹æ³•èƒ½è‡ªå®šä¹‰æ‰“å°å†…å®¹ï¼Œå…¶å®žå¯ä»¥Hookä¸€ä¸‹è®©æ‰€æœ‰çš„ç±»ä»¥åŠå…¶å±žæ€§å€¼éƒ½æ‰“å°å‡ºæ¥ï¼Œä¸è¿‡æš‚æ—¶æ²¡å¿…è¦ã€‚ debugDescription æ˜¯å¼€å‘è€…åœ¨è°ƒè¯•å™¨ä¸­ä»¥æŽ§åˆ¶å°å‘½ä»¤æ‰“å°å¯¹è±¡æ—¶æ‰è°ƒç”¨ã€‚ å°½é‡ä½¿ç”¨ä¸å¯å˜å¯¹è±¡ å°½é‡å°‘çš„æš´éœ²å±žæ€§ï¼Œå³ä¾¿æš´éœ²å±žæ€§ä¹Ÿè¦å°½é‡è®¾ç½®ä¸ºåªè¯»çš„ã€‚ æš´éœ²çš„readonlyå±žæ€§æœ€å¥½è®¾ç½®å†…å­˜ç®¡ç†ï¼Œå¹¶åœ¨å†…éƒ¨é‡æ–°å£°æ˜Žä¸ºreadwriteï¼Œé¿å…æ­£åœ¨å†™çš„æ—¶å€™å¤–é¢æœ‰äººåœ¨è¯»ï¼Œå¿…è¦çš„æ—¶å€™å¯ä»¥ç”¨dispatch_sync å°†å­˜å–æ“ä½œè®¾ç½®ä¸ºåŒæ­¥æ“ä½œã€‚ ä¸è¦æš´éœ²å¯å˜çš„collectionå±žæ€§ï¼Œåº”è¯¥æä¾›ç›¸å…³æ–¹æ³•ä¿®æ”¹å†…éƒ¨å¯å˜çš„collectionï¼Œè€Œåœ¨å…¬å¼€å±žæ€§ä¸­getteræ–¹æ³•ä¸­å¯¹å†…éƒ¨å¯å˜çš„copyæ“ä½œã€‚ ä½¿ç”¨æ¸…æ™°è€Œåè°ƒçš„å‘½åæ–¹å¼ å¦‚æžœæ–¹æ³•çš„è¿”å›žå€¼æ˜¯æ–°åˆ›å»ºçš„ï¼Œé‚£ä¹ˆæ–¹æ³•åçš„é¦–ä¸ªè¯åº”æ˜¯è¿”å›žå€¼ç±»åž‹ã€‚ åº”è¯¥æŠŠè¡¨ç¤ºå‚æ•°ç±»åž‹çš„åè¯æ”¾åœ¨å‚æ•°å‰é¢ã€‚ å¦‚æžœæ–¹æ³•è¦åœ¨å½“å‰å¯¹è±¡ä¸Šæ‰§è¡Œå‡‘èµ°ï¼Œé‚£ä¹ˆä¹…åº”è¯¥åŒ…å«åŠ¨è¯ï¼›è‹¥æ‰§è¡Œæ“ä½œæ—¶è¿˜éœ€è¦å‚æ•°ï¼Œåˆ™åº”è¯¥åœ¨åŠ¨è¯åŽé¢åŠ ä¸Šä¸€ä¸ªæˆ–å¤šä¸ªåè¯ã€‚ ä¸è¦ä½¿ç”¨strè¿™ç§ç®€ç§°ï¼Œåº”è¯¥ç”¨stringè¿™æ ·çš„å…¨ç§°ã€‚ BOOLå±žæ€§åº”åŠ iså‰ç¼€ã€‚å¦‚æžœæŸæ–¹æ³•è¿”å›žéžå±žæ€§çš„BOOLå€¼ï¼Œé‚£ä¹ˆåº”è¯¥æ ¹æ®å…¶åŠŸèƒ½ï¼Œé€‰ç”¨hasæˆ–iså½“å‰ç¼€ã€‚ å°†getè¿™ä¸ªå‰ç¼€ç•™ç»™é‚£äº›å€Ÿç”±â€œè¾“å‡ºå‚æ•°â€æ¥ä¿å­˜è¿”å›žå€¼çš„æ–¹æ³•ã€‚ ä¸ºç§æœ‰æ–¹æ³•ååŠ å‰ç¼€ ä¸è¦ç”¨ä¸‹åˆ’çº¿ä½œä¸ºå‰ç¼€å®šä¹‰ç§æœ‰æ–¹æ³•ï¼Œå› ä¸ºè¿™æ˜¯é¢„ç•™ç»™è‹¹æžœå…¬å¸ç”¨çš„ã€‚ å¯ä»¥å°†ä½¿ç”¨çš„ç±»åå‰ç¼€ç”¨ä½œç§æœ‰æ–¹æ³•å‰ç¼€æ¥é¿å…å†²çªã€‚ ç†è§£Objective-Cé”™è¯¯ç±»åž‹ å¦‚æžœæŠ›å‡ºå¼‚å¸¸ï¼Œé‚£ä¹ˆæœ¬åº”è¯¥åœ¨ä½œç”¨åŸŸæœ«å°¾é‡Šæ”¾çš„å¯¹è±¡çŽ°åœ¨å´ä¸ä¼šè‡ªåŠ¨é‡Šæ”¾ï¼Œå³ä¾¿ä¸ç”¨ARCï¼Œä¹Ÿå¾ˆéš¾å†™å‡ºåœ¨æŠ›å‡ºå¼‚å¸¸æ—¶ä¸ä¼šå¯¼è‡´å†…å­˜æ³„æ¼çš„ä»£ç  OCé‡‡ç”¨çš„åšæ³•ï¼šåªåœ¨æžå…¶ç½•è§ï¼ˆè‡´å‘½ï¼‰çš„æƒ…å†µä¸‹æŠ›å‡ºå¼‚å¸¸ï¼Œå¼‚å¸¸æŠ›å‡ºä¹‹åŽï¼Œæ— é¡»è€ƒè™‘æ¢å¤é—®é¢˜ï¼Œè€Œä¸”åº”ç”¨ç¨‹åºæ­¤æ—¶ä¹Ÿåº”è¯¥é€€å‡ºã€‚ å¦‚æžœçˆ¶ç±»å¼ºåˆ¶å­ç±»å®žçŽ°æŸæ–¹æ³•ï¼Œå¯ä»¥åœ¨çˆ¶ç±»å¯¹åº”æ–¹æ³•é‡ŒæŠ›å‡ºå¼‚å¸¸ã€‚ å‡ºçŽ°ä¸éžè‡´å‘½é”™è¯¯æ˜¯OCä¸€èˆ¬è®©æ–¹æ³•è¿”å›žnilï¼Œæˆ–è€…ä½¿ç”¨NSErrorã€‚ NSErrorä¸€èˆ¬é€šè¿‡(NSError)error è¿™ç§è¾“å‡ºå‚æ•°æ¥è¿”å›žã€‚å®žé™…ä¸Šç¼–è¯‘å™¨ä¼šå°†NSErrorè½¬æ¢æˆNSError _ _ autoreleasing ,ä¹Ÿå°±æ˜¯è¯´æŒ‡é’ˆæ‰€æŒ‡çš„å¯¹è±¡ä¼šè¿™æ–¹æ³•æ‰§è¡Œå®Œæ¯•åŽè‡ªåŠ¨é‡Šæ”¾ã€‚ ç†è§£NSCopyingåè®® è‡ªå·±çš„ç±»æ”¯æŒæ‹·è´æ“ä½œï¼Œå°±éœ€è¦å®žçŽ°NSCopyingåè®®ã€‚copyWithZoneæ–¹æ³•ä¸­zoneå‚æ•°æ˜¯å› ä¸ºä»¥å‰æ˜¯æŒ‰zoneï¼ˆåŒºï¼‰æ¥åˆ’åˆ†çš„ï¼Œä½†çŽ°åœ¨éƒ½æ˜¯ä½¿ç”¨default zoneï¼Œå› æ­¤å¯ä»¥ä¸ç”¨ç®¡zoneå‚æ•°ã€‚ éžå±žæ€§çš„å†…éƒ¨ä½¿ç”¨å®žä¾‹ï¼Œå¯ä»¥é€šè¿‡ -&gt; è¯­æ³• mutableCopy copy åŒºåˆ« é€šè¿‡å§”æ‰˜ä¸Žæ•°æ®æºåè®®è¿›è¡Œå¯¹è±¡é—´é€šä¿¡ delegate å±žæ€§è¦å®šä¹‰æˆweakï¼Œè€Œä¸æ˜¯strongçš„ã€‚ @optional å°†ç±»çš„å®žçŽ°ä»£ç åˆ†æ•£åˆ°ä¾¿äºŽç®¡ç†çš„æ•°ä¸ªåˆ†ç±»ä¹‹ä¸­ å°†åº”è¯¥è§†ä¸ºâ€œç§æœ‰â€çš„æ–¹æ³•å½’å…¥åä¸ºprivateçš„åˆ†ç±»ä¸­ä»¥éšè—å®žçŽ°ç»†èŠ‚ã€‚ æ€»æ˜¯ä¸ºç¬¬ä¸‰æ–¹ç±»çš„åˆ†ç±»åç§°åŠ å‰ç¼€ å¦‚æžœç›¸åŒå±žæ€§æˆ–æ–¹æ³•ï¼Œåˆ†ç±»ä¼šè¦†ç›–åŽŸæ¥çš„ï¼Œè€Œä¸”å¾ˆå¯èƒ½è¦†ç›–å¾ˆå¤šæ¬¡ã€‚ã€‚ã€‚è§£å†³çš„åŠžæ³•å°±æ˜¯åŠ å‰ç¼€ã€‚ å‹¿åœ¨åˆ†ç±»ä¸­å£°æ˜Žå±žæ€§ æŠŠå°è£…æ•°æ®æ‰€ç”¨åˆ°çš„å…¨éƒ¨å±žæ€§éƒ½å®šä¹‰åœ¨ä¸»æŽ¥å£é‡Œ ä½¿ç”¨â€œclass-continuationåˆ†ç±»â€éšè—å®žçŽ°ç»†èŠ‚ å¿…é¡»å®šä¹‰åœ¨å…¶æŽ¥ç»­çš„é‚£ä¸ªç±»çš„å®žçŽ°æ–‡ä»¶é‡Œï¼Œæ²¡æœ‰åå­—ï¼›å¹¶ä¸”æ˜¯å”¯ä¸€èƒ½å£°æ˜Žå®žä¾‹å˜é‡çš„åˆ†ç±» @interface Person() { // something } éžå…¬å¼€çš„å±žæ€§æœ€å¥½å†™åœ¨class-continuation é€šè¿‡åè®®æä¾›åŒ¿åå¯¹è±¡ @property (nonatomic , weak) id delegate; id å°±æ˜¯åŒ¿åå¯¹è±¡ åè®®å¯åœ¨æŸç§ç¨‹åº¦ä¸Šæä¾›åŒ¿åç±»åž‹ï¼Œå…·ä½“çš„å¯¹è±¡ç±»åž‹å¯ä»¥æ·¡åŒ–æˆéµä»ŽæŸåè®®çš„idç±»åž‹ï¼Œåè®®é‡Œè§„å®šäº†å¯¹è±¡æ‰€åº”å®žçŽ°çš„æ–¹æ³• ä½¿ç”¨åŒ¿åå¯¹è±¡ç±»éšè—ç±»åž‹åç§°ï¼ˆæˆ–ç±»åï¼‰ å¦‚æžœå…·ä½“ç±»åž‹ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯å¯¹è±¡èƒ½å¤Ÿå“åº”ï¼ˆå®šä¹‰åœ¨åè®®é‡Œçš„ï¼‰ç‰¹å®šæ–¹æ³•ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨åŒ¿åå¯¹è±¡æ¥è¡¨ç¤ºã€‚ ç†è§£å¼•ç”¨è®¡æ•° retainCountæ–¹æ³•ä¸å¤ªå‡†ï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚ ä¿ç•™çŽ¯ï¼Œä¸€åˆ™èˆ¬éœ€è¦è®¾ç½®weakå¤„ç†ï¼Œblockçš„å¾ªçŽ¯å¼•ç”¨åˆ™ç”¨_ _weak _ _strong _ _blockæ¥å¤„ç† ä»¥ ARCç®€åŒ–å¼•ç”¨è®¡æ•° åœ¨deallocæ–¹æ³•ä¸­åªé‡Šæ”¾å¼•ç”¨å¹¶è§£é™¤ç›‘å¬ ä¸åº”è¯¥è‡ªå·±è°ƒç”¨deallocï¼Œè™½ç„¶éžARCç”¨è°ƒ [super dealloc]ï¼Œä½†ARCä¸ç”¨ã€‚åº”è¯¥åšçš„å°±æ˜¯é‡Šæ”¾å¼•ç”¨ï¼Œå–æ¶ˆè®¢é˜…æˆ–KVO é”™è¯¯ï¼Œå¼‚å¸¸ï¼Œå¯¹äºŽä¸€äº›ç‰¹æ®Šæ“ä½œå¾ˆé‡è¦ï¼Œæé†’é‡Šæ”¾å†…å­˜ã€‚ ç³»ç»Ÿå¹¶ä¸ä¿è¯æ¯ä¸ªåˆ›å»ºå‡ºæ¥çš„å¯¹è±¡çš„deallocéƒ½ä¼šæ‰§è¡Œã€‚ ç¼–å†™deallocæ–¹æ³•æ—¶ï¼Œä¸è¦åœ¨é‡Œé¢éšä¾¿è°ƒç”¨å…¶ä»–æ–¹æ³•ã€‚ deallocé‡Œä¹Ÿä¸è¦è°ƒç”¨å±žæ€§çš„å­˜å–æ–¹æ³• ç¼–å†™â€œå¼‚å¸¸å®‰å…¨ä»£ç â€æ—¶ç•™æ„å†…å­˜ç®¡ç†é—®é¢˜ @try {} @catch {} @finally {} æ•èŽ·å¼‚å¸¸æ—¶ï¼Œä¸€å®šè¦æ³¨æ„å°†tryå—å†…æ‰€åˆ›ç«‹çš„å¯¹è±¡æ¸…ç†å¹²å‡€ã€‚ é»˜è®¤æƒ…å†µä¸‹,ARCä¸ç”Ÿæˆå®‰å…¨å¤„ç†å¼‚å¸¸æ‰€éœ€çš„æ¸…ç†ä»£ç ï¼Œå¼€å¯ç¼–è¯‘å™¨æ ‡å¿— â€“fobjc-arc-exceptions åŽï¼Œå¯ä»¥ç”Ÿæˆæ¸…ç†ä»£ç ï¼Œä½†å¼€å¯åŽå°†å¯¼è‡´ç¨‹åºå˜å¤§ï¼Œè€Œä¸”ä¼šé™ä½Žè¿è¡Œæ•ˆçŽ‡ã€‚ ä»¥è‹¥å¼•ç”¨é¿å…ä¿ç•™çŽ¯ é¿å…ä¿ç•™çŽ¯çš„æœ€ä½³æ–¹å¼å°±æ˜¯å¼±å¼•ç”¨ã€‚ weak ã€assign å’Œ unsafe_unretained ä»¥è‡ªåŠ¨é‡Šæ”¾æ± å—é™ä½Žå†…å­˜å³°å€¼ é€šå¸¸åªæœ‰ä¸€ä¸ªåœ°æ–¹éœ€è¦åˆ›å»ºè‡ªåŠ¨é‡Šæ”¾æ±  @autoreleasepoll { // dosomething }ï¼Œé‚£å°±æ˜¯åœ¨mainå‡½æ•°é‡Œé¢ è‡ªåŠ¨é‡Šæ”¾æ± å¯ä»¥åµŒå¥—ï¼Œå¯ä»¥æŽ§åˆ¶åº”ç”¨ç¨‹åºå³°å€¼ è‡ªåŠ¨é‡Šæ”¾æ± çš„é‡Šæ”¾è¦ç­‰çº¿ç¨‹ä¸‹ä¸€æ¬¡runloopæ—¶æ‰ä¼šæ¸…ç©º ç”¨åƒµå°¸å¯¹è±¡è°ƒè¯•å†…å­˜ç®¡ç† ä¸ç”¨ä½¿ç”¨retainCount ARCå·²ç»åºŸå¼ƒæ­¤æ–¹æ³•ï¼Œå³ä¾¿éžARCæ­¤æ–¹æ³•èŽ·å–çš„å€¼ä¹Ÿä¸å‡†ã€‚ ç†è§£â€œå—â€è¿™ä¸€æ¦‚å¿µ int (^addBlock)(int a , int b) = ^(int a, int b){ return a+ b; }; Blockæ•èŽ·çš„å˜é‡åœ¨å—å†…æ˜¯ä¸å¯å˜çš„ï¼Œéœ€è¦æ”¹çš„ç”¨_ _blockä¿®é¥° _ _weak _ _strong å®šä¹‰Blockçš„å†…å­˜æ˜¯åˆ†é…åœ¨æ ˆåŒºï¼Œç¦»å¼€ç›¸åº”çš„èŒƒå›´ä¹‹åŽï¼Œç¼–è¯‘å™¨æœ‰å¯èƒ½æŠŠåˆ†é…ç»™å—çš„å†…å­˜è¦†ç›–æŽ‰ï¼Œå› æ­¤éœ€è¦ç”¨copyï¼Œæ‹·è´åˆ°å †åŒºå½“åšä¸€ä¸ªä¸€å¯¹è±¡å¤„ç†ï¼Œæ‹¥æœ‰å¼•ç”¨è®¡æ•° å…¨å±€å—ä¸ä¼šæ•æ‰ä»»ä½•çŠ¶æ€ï¼Œè¿è¡Œæ—¶ä¹Ÿæ— é¡»çŠ¶æ€æ¥å‚ä¸Žï¼Œå£°æ˜Žåœ¨å…¨å±€å†…å­˜åŒºï¼Œå› æ­¤æ‹·è´æ˜¯ä¸ªç©ºæ“ä½œï¼Œæ•…å…¨å±€å—ç»ä¸å¯èƒ½ä¸ºç´«é“œæ‰€æ”¶å›žï¼Œè¿™ç§å—å®žé™…ä¸Šç›¸å½“äºŽå•ä¾‹ã€‚ ä¸ºå¸¸ç”¨çš„å—ç±»åž‹åˆ›å»ºtypedef å—çš„ç±»åž‹æœ‰å‚æ•°å’Œè¿”å›žå€¼ç»„æˆã€‚ ç”¨handlerå—é™ä½Žä»£ç åˆ†æ•£ç¨‹åº¦ ç³»ç»Ÿå‘çŽ°æŸä¸ªåº”ç”¨ç¨‹åºçš„ä¸»çº¿ç¨‹å·²ç»é˜»å¡žäº†ä¸€æ®µæ—¶é—´åŽï¼Œå°±ä¼šä»¤å…¶åœæ­¢ã€‚ å»ºè®®ä½¿ç”¨åŒä¸€ä¸ªå—æ¥å¤„ç†æˆåŠŸä¸Žå¤±è´¥çš„æƒ…å†µã€‚ åº”è¯¥ç”±è°ƒç”¨APIçš„äººæ¥å†³å®šhandleråº”è¯¥è¿è¡Œåœ¨å“ªä¸ªçº¿ç¨‹ä¸Šã€‚ ç”¨å—å¼•ç”¨å…¶æ‰€å±žå¯¹è±¡æ—¶ä¸è¦å‡ºçŽ°ä¿ç•™çŽ¯ ä¸€å®šè¦æ‰¾ä¸ªé€‚å½“çš„æ—¶é—´è§£é™¤ä¿ç•™çŽ¯ï¼Œè€Œä¸èƒ½æŠŠè´£ä»»æŽ¨ç»™APIçš„è°ƒç”¨è€…ã€‚ å¤šç”¨æ´¾å‘é˜Ÿåˆ—ï¼Œå°‘ç”¨åŒæ­¥é” @synchronized(self) åŒæ­¥é”ï¼Œä¼šé™ä½Žä»£ç æ•ˆçŽ‡ï¼Œå› ä¸ºå…±ç”¨åŒä¸€ä¸ªé”çš„é‚£äº›åŒæ­¥å—ï¼Œéƒ½å¿…é¡»æŒ‰é¡ºåºæ‰§è¡Œã€‚ NSLock å®‰å…¨é«˜æ•ˆä»£æ›¿åŒæ­¥å—å’Œé”å¯¹è±¡çš„æ˜¯ ä¸²è¡ŒåŒæ­¥é˜Ÿåˆ— æ‰§è¡Œå¼‚æ­¥æ´¾å‘æ—¶ï¼Œéœ€è¦æ‹·è´å— dispatch_barrier_async dispatch_barrier_sync å¤šç”¨GCDï¼Œå°‘ç”¨performSelectorç³»åˆ—æ–¹æ³• ç”¨performSelector è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œç¼–è¯‘å™¨å¹¶ä¸çŸ¥é“å°†è¦è°ƒç”¨çš„æ–¹æ³•ï¼Œä¹Ÿå°±ä¸äº†è§£å…¶æ–¹æ³•ç­¾åä»¥åŠè¿”å›žå€¼æƒ…å†µï¼Œæ‰€ä»¥æ²¡åŠžæ³•è¿ç”¨ARCçš„å†…å­˜ç®¡ç†è§„åˆ™æ¥åˆ¤å®šè¿”å›žå€¼æ˜¯ä¸æ˜¯åº”è¯¥é‡Šæ”¾ï¼Œé‰´äºŽæ­¤ï¼ŒARCé‡‡ç”¨äº†æ¯”è¾ƒè°¨æ…Žçš„åšæ³•ï¼Œå°±æ˜¯ä¸æ·»åŠ é‡Šæ”¾æ“ä½œï¼Œç„¶è€Œè¿™ä¹ˆåšå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ã€‚ ä¸€èˆ¬è¿”å›žåªèƒ½æ˜¯voidæˆ–å¯¹è±¡ç±»åž‹ï¼Œè€ŒperformSelectorè¿”å›žçš„æ˜¯idç±»åž‹ï¼Œé‚£ä¹ˆå°±éœ€è¦æ‰§è¡Œä¸€äº›è½¬æ¢æ“ä½œï¼Œå¾ˆå®¹æ˜“å‡ºé”™ï¼è‹¥è¿”å›žç±»åž‹ä¸ºCçš„ç»“æž„ä½“ï¼Œåˆ™ä¸å¯ä½¿ç”¨performSelectoræ–¹æ³•ã€‚ æ²¡æœºä¼šä¸ºè¢«è°ƒç”¨çš„æ–¹æ³•æŒ‡å®šå‚æ•°ï¼Œè¢«è°ƒç”¨çš„selecçš„è¾“å…¥å¯èƒ½æŒ‡å‘ä½ç½®çš„åžƒåœ¾å†…å­˜ å¦‚æžœè·¨çº¿ç¨‹æ‰§è¡Œï¼Œæœ€å¥½ä¸ç”¨performSelectorï¼Œè€Œç”¨GCD æŽŒæ¡GCDåŠæ“ä½œé˜Ÿåˆ—çš„ä½¿ç”¨æ—¶æœº GCDæ˜¯çº¯Cçš„APIï¼Œè€Œæ“ä½œé˜Ÿåˆ—åˆ™æ˜¯Ojbective-Cçš„å¯¹è±¡ã€‚ NSOperation è¿è¡Œä¹‹å‰ï¼Œå¯ä»¥å–æ¶ˆæŸä¸ªæ“ä½œï¼ˆä½†å·²ç»å¯åŠ¨çš„æ— æ³•å–æ¶ˆï¼‰ï¼›å¯æŒ‡å®šæ“ä½œé—´ä¾èµ–å…³ç³»ï¼›é€šè¿‡KVOè§‚å¯Ÿå±žæ€§ï¼›æŒ‡å®šæ“ä½œçš„ä¼˜å…ˆçº§ï¼ˆGCDå¯ä»¥æŽ§åˆ¶é˜Ÿåˆ—çš„ä¼˜å…ˆçº§ï¼Œä¸æ˜¯å—çš„ï¼‰ é€šè¿‡Dispatch Groupæœºåˆ¶ï¼Œæ ¹æ®ç³»ç»Ÿèµ„æºçŠ¶å†µæ¥æ‰§è¡Œä»»åŠ¡ dispatch_group_t dispatch_group_async dispatch_group_enter dispatch_group_leave dispatch_group_wait dispatch_group_notify ä½¿ç”¨dispatch_onceæ¥æ‰§è¡Œåªéœ€è¿è¡Œä¸€æ¬¡çš„çº¿ç¨‹å®‰å…¨ä»£ç  æ ‡è®°åº”è¯¥å£°æ˜Žstaticæˆ–globalä½œç”¨åŸŸä¸­ï¼Œè€Œä¸”æ¯æ¬¡æ ‡è®°åº”è¯¥ç›¸åŒ ä¸è¦ä½¿ç”¨dispatch_get_current_queue iOS6 ä¹‹åŽå·²ç»å¼ƒç”¨dispatch_get_current_queueï¼Œæžå…¶å®¹æ˜“é€ æˆæ­»é” å…¸åž‹é”™è¯¯ç”¨æ³•ï¼šç”¨dispatch_get_current_queueæ£€æµ‹å½“å‰é˜Ÿåˆ—æ˜¯ä¸æ˜¯æŸä¸ªç‰¹å®šé˜Ÿåˆ—ï¼Œè¯•å›¾é¿å…æ‰§è¡ŒåŒæ­¥æ´¾å‘æ—¶å¯èƒ½é­é‡çš„æ­»é”é—®é¢˜ã€‚ ç”±äºŽæ´¾å‘é˜Ÿåˆ—æ˜¯æŒ‰å±‚çº§æ¥ç»„ç»‡çš„ï¼Œæ‰€ä»¥æ— æ³•å•ç”¨æŸä¸ªé˜Ÿåˆ—å¯¹è±¡æ¥æè¿°â€œå½“å‰é˜Ÿåˆ—â€è¿™ä¸€æ¦‚å¿µã€‚ ç†Ÿæ‚‰ç³»ç»Ÿæ¡†æž¶ å¤šç”¨å—æžšä¸¾ï¼Œå°‘ç”¨forå¾ªçŽ¯ã€ å—æžšä¸¾æ³•ï¼Œæœ¬èº«å°±èƒ½é€šè¿‡NSEnumerationOptions é…ç½®GCDæ¥å¹¶å‘æ‰§è¡ŒéåŽ†æ“ä½œã€‚ è‹¥æå‰çŸ¥é“å¾…éåŽ†å¯¹è±¡ç±»åž‹ï¼Œåˆ™åº”ä¿®æ”¹å—ç­¾åï¼ŒæŒ‡å‡ºå¯¹è±¡çš„å…·ä½“ç±»åž‹ã€‚ å¯¹è‡ªå®šä¹‰å…¶å†…å­˜ç®¡ç†è¯­ä¹‰çš„collectionä½¿ç”¨æ— ç¼æ¡¥æŽ¥ _ bridge æœ¬èº«çš„æ„æ€æ˜¯ï¼šARCä»ç„¶å…·å¤‡è¿™ä¸ªOCå¯¹è±¡çš„æ‰€æœ‰æƒï¼Œè€Œ _bridge_retainedæ„å‘³ç€ARCå°†äº¤å‡ºå¯¹è±¡çš„æ‰€æœ‰æƒ æž„å»ºç¼“å­˜æ—¶é€‰ç”¨NSCacheè€ŒéžNSDictionary å½“ç³»ç»Ÿèµ„æºå°†è¦è€—å°½æ—¶ï¼ŒNSCacheå¯ä»¥è‡ªåŠ¨åˆ å‡ç¼“å­˜ã€‚ NSCacheå¹¶ä¸ä¼šâ€œæ‹·è´â€é”®ï¼Œè€Œæ˜¯ä¼šâ€œä¿ç•™â€å®ƒã€‚ NSCacheæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸åŠ é”å¤šä¸ªçº¿ç¨‹ä¹Ÿå¯ä»¥åŒæ—¶è®¿é—®ã€‚ ç²¾ç®€initializeä¸Žloadçš„å®žçŽ°ä»£ç  å½“åŒ…å«ç±»æˆ–åˆ†ç±»çš„ç¨‹åºè½½å…¥ç³»ç»Ÿæ—¶ä¼šè°ƒç”¨loadæ–¹æ³•ï¼Œè€Œä¸”åªä¼šè°ƒä¸€æ¬¡ã€‚å¦‚æžœç±»å’Œåˆ†ç±»éƒ½å®žçŽ°äº†loadæ–¹æ³•ï¼Œåˆ™å…ˆè°ƒç±»çš„ï¼Œå†è°ƒåˆ†ç±»çš„ã€‚ loadæ–¹æ³•ä¸­ä½¿ç”¨å…¶ä»–ç±»æ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºæ¯”å…ˆæ‰§è¡Œè¶…ç±»çš„loadæ–¹æ³•ï¼Œè€Œæ ¹æ®æŸä¸ªç»™å®šçš„ç¨‹åºåº“å´æ— æ³•åˆ¤æ–­å‡ºå…¶ä¸­å„ä¸ªç±»çš„è½½å…¥é¡ºåºã€‚ loadæ–¹æ³•å¹¶ä¸åƒæ™®é€šæ–¹æ³•é‚£æ ·ï¼Œå¦‚æžœæŸä¸ªç±»æœ¬èº«æ²¡å®žçŽ°loadæ–¹æ³•ï¼Œé‚£ä¹ˆä¸ç®¡å…¶å„çº§è¶…ç±»æ˜¯å¦å®žçŽ°æ­¤æ–¹æ³•ï¼Œç³»ç»Ÿéƒ½ä¸ä¼šè°ƒç”¨ loadæ–¹æ³•å¿…é¡»å®žçŽ°çš„ç²¾ç®€ï¼Œå› ä¸ºæ•´ä¸ªåº”ç”¨ç¨‹åºåœ¨æ‰§è¡Œloadæ–¹æ³•æ—¶éƒ½ä¼šé˜»å¡žã€‚ (void) initialize ä¸Ž â€“ (void) init ä¸ä¸€æ · (void) initialize å¯¹äºŽæ¯ä¸ªç±»æ¥è¯´ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨ç¨‹åºé¦–æ¬¡ç”¨è¯¥ç±»ä¹‹å‰è°ƒç”¨ï¼Œä¸”åªè°ƒç”¨ä¸€æ¬¡ã€‚å®ƒæ˜¯ç”±è¿è¡ŒæœŸç³»ç»Ÿæ¥è°ƒç”¨çš„ï¼Œç»ä¸åº”è¯¥é€šè¿‡ä»£ç ç›´æŽ¥è°ƒç”¨ã€‚ (void) initializeæ–¹æ³•æ—¶æƒ°æ€§è°ƒç”¨çš„ï¼Œç”¨ä¸åˆ°çš„ç±»ä¸ä¼šè¿è¡Œï¼Œä½†loadæ–¹æ³•æ˜¯ç¨‹åºä¼šä¸€ç›´é˜»å¡žåˆ°æ‰€æœ‰ç±»çš„loadéƒ½æ‰§è¡Œå®Œã€‚ (void) initialize ä¸Žå…¶ä»–æ–¹æ³•ä¸€æ ·ï¼Œå¦‚æžœæŸä¸ªç±»æœªå®žçŽ°å®ƒï¼Œè€Œè¶…ç±»å®žçŽ°äº†ï¼Œåˆ™è¿è¡Œè¶…ç±»çš„å®žçŽ°ä»£ç ã€‚ (void) initialize æ–¹æ³•è¦å°½é‡ç²¾ç®€ï¼Œåªåº”è¯¥ç”¨æ¥è®¾ç½®å†…éƒ¨æ•°æ®ï¼Œä¸åº”è¯¥è°ƒç”¨å…¶ä»–æ–¹æ³•ï¼Œå³ä¾¿æ˜¯æœ¬ç±»è‡ªå·±çš„æ–¹æ³•æœ€å¥½ä¹Ÿåˆ«è°ƒç”¨ï¼›è‹¥æŸä¸ªå…¨å±€çŠ¶æ€æ— æ³•å†ç¼–è¯‘æœŸé—´åˆå§‹åŒ–ï¼Œåˆ™å¯æ”¾åˆ°initializeé‡Œæ¥åšã€‚ åˆ«å¿˜äº†NSTimerä¼šä¿ç•™å…¶ç›®æ ‡å¯¹è±¡ è®¾ç½®æˆé‡å¤æ‰§è¡Œæ¨¡å¼è®¡æ—¶å™¨ï¼Œå¾ˆå®¹æ˜“å¼•å…¥ä¿ç•™çŽ¯ self.timer è®¾ç½®selfä¸ºtarget å°±äº§ç”Ÿäº†ä¿ç•™çŽ¯ã€‚]]></content>
      <categories>
        <category>è¯»ä¹¦</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ¯›çŽ»ç’ƒæ•ˆæžœä»£ç ]]></title>
    <url>%2F2015%2F12%2F19%2F%E6%AF%9B%E7%8E%BB%E7%92%83%E6%95%88%E6%9E%9C%E4%BB%A3%E7%A0%81%2F</url>
    <content type="text"><![CDATA[æ–¹æ³•1ï¼Œä½¿ç”¨CIFilteræ»¤é•œ 12345678910111213141516//ç”Ÿæˆä¸€å¼ æ¯›çŽ»ç’ƒå›¾ç‰‡ - (UIImage*)blur:(UIImage*)theImage &#123; CIContext *context = [CIContext contextWithOptions:nil]; CIImage *inputImage = [CIImage imageWithCGImage:theImage.CGImage]; CIFilter *filter = [CIFilter filterWithName:@&quot;CIGaussianBlur&quot;]; [filter setValue:inputImage forKey:kCIInputImageKey]; [filter setValue:[NSNumber numberWithFloat:15.0f] forKey:@&quot;inputRadius&quot;]; CIImage *result = [filter valueForKey:kCIOutputImageKey]; CGImageRef cgImage = [context createCGImage:result fromRect:[inputImage extent]]; UIImage *returnImage = [UIImage imageWithCGImage:cgImage]; CGImageRelease(cgImage); return returnImage; &#125; æ–¹æ³•2ï¼Œä½¿ç”¨iOS8ç³»ç»Ÿæ•ˆæžœ 123456789101112UIImageView *imageView =[[UIImageView alloc] initWithFrame:CGRectMake(100, 100, 200, 100)];imageView.image = [UIImage imageNamed:@&quot;logo&quot;];[self.view addSubview:imageView];/*UIBlurEffectStyleExtraLight, //é«˜äº®UIBlurEffectStyleLight, //äº®UIBlurEffectStyleDark //æš—*/UIBlurEffect *blurEffect =[UIBlurEffect effectWithStyle:UIBlurEffectStyleDark];UIVisualEffectView *effectView =[[UIVisualEffectView alloc]initWithEffect:blurEffect];effectView.frame = CGRectMake(0,0, imageView.frame.size.width, imageView.frame.size.height);[self.view addSubview:effectView];]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å­¦ä¹ æŠ€å·§]]></title>
    <url>%2F2015%2F11%2F30%2F%E5%AD%A6%E4%B9%A0%E6%8A%80%E5%B7%A7%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;æˆ‘ï¼ŒåŠä¸ªç å†œï¼è¿˜æ²¡å…¥è¡ŒJavaï¼Œé©¬ä¸Šåˆæ¢è¡Œåˆ°iOSï¼Œé‡æ–°è‡ªå­¦æ–°è¯­è¨€ï¼šObject-Cï¼å› æ˜¯å…¬å¸å†…éƒ¨è½¬å²—ï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰çš„ä¸œè¥¿éƒ½è¦è‡ªå­¦ï¼Œä¸œä¸€æ¦”å¤´ï¼Œè¥¿ä¸€æ£’å­çš„å­¦ï¼Œä¹Ÿä¸å¯èƒ½ä¸“é—¨æ‹¿å‡ºä¸¤ä¸‰ä¸ªæœˆä¸“é—¨åŽ»åŸ¹è®­ï¼ˆè¿˜æ˜¯å› ä¸ºç©·ï¼Œä¸å·¥ä½œè¿žæˆ¿ç§Ÿé¥­è´¹éƒ½æ²¡æœ‰ï¼æ›´ä¸è¦è¯´1ä¸‡å¤šçš„å¤©æ–‡åŸ¹è®­è´¹ï¼ŒçœŸå¿ƒæ²¡é’±ï¼è´·æ¬¾åŸ¹è®­ï¼Ÿæˆ‘å‚»å—ï¼æœ‰å·¥ä½œä¸å¹²ï¼Œå€Ÿé’±åƒé¥­è´·æ¬¾åŸ¹è®­ï¼ï¼ï¼ï¼‰ï¼ŒåŽ†ç»ç§ç§é˜µç—›ï¼ŒçŽ°åœ¨ä¹Ÿç®—æ˜¯å¯ä»¥å†™tableviewçš„iOSï¼ŒçŽ°æ€»ç»“ä¸€ä¸‹ä»¥å¾€çš„å­¦ä¹ ç»éªŒ &emsp;&emsp;å…¬å¸å’Œå­¦æ ¡çœŸçš„ä¸ä¸€æ ·ï¼æˆ‘æ‰¿è®¤æˆ‘æ˜¯å­¦æ¸£ï¼Œæ¸£çš„ä¸èƒ½å†æ¸£ï¼å¤§å­¦ï¼ˆä¹Ÿå¾ˆæ¸£â€¦ï¼‰4å¹´ï¼Œä¸Šåˆçš„è¯¾å‡ ä¹Žå°±æ²¡åŽ»è¿‡(å—¯ï¼Œæˆ‘è¦è¯´éƒ½æ€ªæ™šä¸Š11ç‚¹åŠæ‰æ–­ç”µï¼Œæ‰‹æœºç”µè„‘è¿˜èƒ½æ’‘å¥½å‡ ä¸ªå°æ—¶ä½ ä»¬å¯ä»¥ç†è§£å§)ï¼ä¸‹åˆçš„è¯¾ï¼Œçœ‹å¿ƒæƒ…â€¦â€¦æ•´å¤©ä¸æ˜¯åœ¨çœ‹å°è¯´å°±æ˜¯åœ¨çŽ©æ¸¸æˆï¼ˆä¸‰å›½å¿—ç³»åˆ—å’ŒPç¤¾å››èŒæ˜¯æˆ‘çš„æœ€çˆ±ï¼Œä½†çœŸå¿ƒä¸æŽ¨èçŽ©ï¼Œæ¯”ç½‘æ¸¸æ›´è´¹æ—¶é—´ï¼‰ï¼å•°é‡Œå•°å—¦çš„è¯´äº†è¿™ä¹ˆå¤šï¼Œå…¶å®žæˆ‘æƒ³è¯´çš„ï¼šå­¦æ ¡é‡Œçš„ä¸œè¥¿çœŸçš„å¾ˆç®€å•ï¼Œæ²¡äººå¼ºè¿«ä½ æ‹¿å‡ºäº§å‡ºï¼Œè€ƒè¯•è¿‡äº†å°±å¯ä»¥äº†ã€‚æˆ‘è™½ç„¶æ˜¯æ¸£ä¸­ä¹‹æ¸£ï¼Œä½†æ··ä¸ª60åˆ†è¿˜æ˜¯å¾ˆç®€å•çš„ï¼šè€ƒå‰ä¸¤ä¸‰å¤©çœ‹çœ‹ä¹¦èƒŒä¸€èƒŒå°±å¯ä»¥äº†ï¼ˆé¢â€¦é«˜æ•°ï¼Œç”¨äº†ä¸¤å‘¨ï¼‰ï¼å½“ç„¶ä¹ŸæŒ‚è¿‡ç§‘ï¼Œå”¯ä¸€ä¸€æ¬¡æŒ‚ç§‘è´¡çŒ®ç»™äº†ä¸€é—¨é€‰ä¿®è¯¾ï¼ä½†ç­‰åˆ°å·¥ä½œçš„æ—¶å€™ï¼Œå†èƒŒä¹¦å°±ä¸ç®¡ç”¨äº†ï¼Œå†é›†ä¸­çªå‡»ï¼Œè¯¥ä¸ä¼šçš„è¿˜ä¸ä¼šï¼è€ŒçŽ°å®žæ˜¯æˆ‘å¿…é¡»è¦å°½å¿«ä¸Šæ‰‹(å…¬å¸å†…éƒ¨è½¬å²—ï¼Œç»™æˆ‘ä¸€ä¸¤å‘¨å­¦ä¹ å·²ç»æ˜¯å¤©å¤§çš„æ©èµäº†)ï¼åŽ‹åŠ›ä¸ä¸€æ ·ï¼Œå¿ƒæ€å’Œæ•ˆçŽ‡ä¹Ÿå°±ä¸ä¸€æ ·ï¼ &emsp;&emsp;å­¦ä¹ æ–°è¯­è¨€å¿…å…ˆå­¦è¯­æ³•ï¼å¾ˆå¤šäººå‘Šè¯‰æˆ‘ï¼Œè¯­æ³•çœ‹çœ‹å°±è¡Œäº†ï¼Œå…ˆåŽ»åšé¡¹ç›®ï¼Œå¤šåšå‡ éä»€ä¹ˆè¯­æ³•éƒ½ä¼šäº†ï¼ç­‰ç­‰ï¼Œè¿™äº›è¯­æ³•éƒ½æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿè¿™ä¹ˆå¤šå±‚åµŒå¥—éƒ½æ˜¯å’‹å›žäº‹ï¼Ÿå—¯ï¼Œä¸€å¼€å§‹æˆ‘å°±æ˜¯è¿™ä¹ˆè¢«å‘çš„ï¼Œæˆ‘çœŸçš„èŠ±äº†ä¸€ä¸¤å¤©æ—¶é—´ç†Ÿæ‚‰ä¸€ä¸‹è¯­æ³•å°±åŽ»çœ‹é¡¹ç›®äº†ï¼ä¸€çœ‹å®ƒè®¤è¯†æˆ‘ï¼Œæˆ‘ä¸è®¤è¯†å®ƒï¼å•ƒäº†ä¸€å¤©ä¹Ÿæ²¡å¼„æ˜Žç™½æ•°æ®æ˜¯æ€Žä¹ˆæµåŠ¨çš„ï¼Œåˆå¼ºå¿ç€æ€§å­ï¼Œä»Žæ–°å­¦ä¹ è¯­æ³•ï¼å†é‡ç”³ä¸€éï¼šå­¦ä¹ æ–°è¯­è¨€å¿…å…ˆå­¦è¯­æ³•ï¼ä¸è¦æ±‚ç™¾åˆ†ä¹‹ç™¾éƒ½è®°ä¸‹æ¥ï¼Œä½†ç‰¹æ®Šè¯­æ³•ä¸€å®šè¦è®°ä¸‹æ¥ï¼ä¾‹å¦‚ï¼ŒåŸºæœ¬ç±»åž‹ã€æžšä¸¾ã€ç»“æž„ä½“ç­‰ä¸€å¸¦è€Œè¿‡å°±å¯ä»¥ï¼Œè¿™äº›ä¸œè¥¿99%éƒ½ä¸€æ ·ï¼Œæ²¡å¿…è¦èŠ±è´¹æ—¶é—´åŽ»ä»”ç»†ç ”ç©¶ï¼Œå¤§ä¸äº†é‡‡å‘ï¼ä½†åƒblockï¼ŒMRCã€å¼•ç”¨è®¡æ•°å•¥çš„è¦æ•²äº›ä»£ç ä»”ç»†ç ”ç©¶ä¸€ä¸‹ä½¿ç”¨æ–¹æ³•æ‰å¥½ï¼ &emsp;&emsp;å°½å¿«å­¦ä¹ IDEçš„ä½¿ç”¨æŠ€å·§ï¼xcodeæ˜¯æˆ‘è§è¿‡çš„ï¼Œæœ€ç®€å•ã€æœ€å¯é ã€åŠŸèƒ½æœ€é½å…¨çš„IDE,è¯´å®žè¯ä¸€å¼€å§‹é…ç½®SSHï¼ˆSpringã€Strutsã€Hibernateï¼‰æ—¶ï¼Œæˆ‘ç€å®žçš„æŠ˜è…¾äº†ä¸€ä¸¤å¤©ï¼Œè¿˜æ˜¯åœ¨åŒå­¦çš„å¸®åŠ©ä¸‹å¼„å®Œçš„ï¼ä½†XCodeåªèƒ½ç”¨ä¸€ä¸ªå­—æ¥å½¢å®¹ï¼šçˆ½ï¼å­¦ä¹ ä¸€é—¨æ–°è¯­è¨€è¦å°½å¿«é€‚åº”IDEï¼Œå­¦ä¹ IDEä½¿ç”¨æŠ€å·§å’Œè°ƒè¯•æŠ€å·§ï¼è¿™æ˜¯ç¨³èµšä¸èµ”çš„ä¹°å–ï¼Œæå‡çš„ä½•æ­¢æ˜¯æ•ˆçŽ‡ï¼æˆ‘å°è±¡æœ€æ·±çš„æ•™è®­ï¼šç¬¬ä¸€æ¬¡ä½¿ç”¨xibæ—¶ï¼Œæˆ‘è¶³è¶³èŠ±äº†ä¸€ä¸‹åˆçš„æ—¶é—´åŽ»å­¦ä¹ xibçš„å±žæ€§æ˜¯æ€Žä¹ˆå’Œhæ–‡ä»¶çš„å±žæ€§è¿žæŽ¥åœ¨ä¸€èµ·çš„ï¼å› æˆ‘ä»¬é¡¹ç›®æ•´ä½“æ˜¯æ‰‹åŠ¨è®¡ç®—frameçš„ï¼Œå‡ ä¹Žæ²¡ç”¨åˆ°xibï¼Œè€Œæˆ‘æ˜¯å¿«é€Ÿè‡ªå­¦çš„ï¼Œä»£ç éƒ½æ˜¯å‚ç…§çŽ°æœ‰é¡¹ç›®æ¥çš„ï¼Œæ²¡è§è¿‡xibï¼ç½‘ä¸Šçš„æ–‡ç« å°†xibçš„éƒ½æ˜¯ä»€ä¹ˆå±žæ€§æ€Žä¹ˆç”¨ï¼Œæˆ‘æœ€å…³å¿ƒçš„æ€Žä¹ˆè¿žæŽ¥è¿™ç‚¹äº‹æ ¹æœ¬å°±æ²¡äººå†™,æœ€åŽè¿˜æ˜¯æ‰¾äº†ä¸ªè§†é¢‘æ‰çŸ¥é“â€¦.è¿˜çœŸå°±æ˜¯å¤ªç®€å•äº†æ‰æ²¡äººå†™ &emsp;&emsp;å…³äºŽæ•™å­¦è§†é¢‘ï¼Œæˆ‘æ˜¯ä¸å–œæ¬¢çš„ï¼çŽ°åœ¨ç½‘ä¸Šèµ„æºååˆ†ä¸°å¯Œï¼Œå¾ˆå¤šäººéƒ½æ˜¯é€šè¿‡æ•™å­¦è§†é¢‘æ¥å…¥é—¨å„ç§è¯­è¨€çš„ï¼Œä½†æˆ‘ä¸ªäººä¸ä»¥ä¸ºç„¶ï¼åŽŸå› å¦‚ä¸‹ï¼š1ï¼Œå¤§å¤šæ•°çš„æ•™å­¦è§†é¢‘è´¨é‡çœŸçš„ä¸å’‹åœ°ï¼2ï¼Œè´¨é‡ç¨å¾®å¥½ç‚¹çš„éƒ½è¦åŽ»åŸ¹è®­ç­ï¼Œè€Œæˆ‘æ²¡æ—¶é—´åŽ»ï¼3ï¼Œå¤§å¤šæ•°è§†é¢‘æ—¶é—´å¤ªé•¿ï¼Œèƒ½ç”¨5åˆ†é’Ÿè§£å†³çš„ï¼Œéžè¦ç”¨ä¸€å°æ—¶åŽ»å“”å“”ï¼å½“ç„¶ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„çœ‹æ³•ï¼Œæˆ‘åªä¸è¿‡æ²¡æœ‰å…»æˆè®¤çœŸå¬è®²çš„ä¹ æƒ¯â€¦â€¦ &emsp;&emsp;å…³äºŽçœ‹ä¹¦,æœ€å¥½ä¸€ç›®åè¡Œï¼Œæ‰¾åˆ°ä¸æ‡‚å¾—æˆ–æ„Ÿå…´è¶£çš„å†ä»”ç»†ç ”ç©¶ï¼çŽ°åœ¨çš„ä¹¦ç±åŒè´¨åŒ–å¤ªä¸¥é‡äº†ï¼Œç¿»æ¥è¦†åŽ»å°±é‚£ç‚¹ä¸œè¥¿ï¼Œç½‘ä¸Šå¤§å †å¤§å †çš„iOSå…¥é—¨ä¹¦ç±ï¼Œå¤§å¤šæ˜¯åºŸè¯è¿žç¯‡ï¼Œæ²¡å•¥å¹²è´§ï¼Œè¿žæˆ‘è¿™ç§è¿˜æ²¡å…¥é—¨çš„å°èœé¸Ÿéƒ½å¿½æ‚ ä¸äº†ï¼ä½†æœ‰äº›ç»å…¸ä¹¦è¿˜æ˜¯éžå¸¸å¥½çš„ï¼Œç¼–å†™é«˜è´¨é‡iOSå’ŒOSXçš„52ä¸ªæ–¹æ³•å’ŒOCé«˜çº§ç¼–ç¨‹iOSä¸ŽOSXå¤šçº¿ç¨‹å’Œå†…å­˜ç®¡ç†å°±éžå¸¸ä¸é”™ &emsp;&emsp;è¯·æ•™é—®é¢˜æ˜¯ä¸ªå¤§å­¦é—®ï¼æˆ‘æ€»ç»“äº†ä¸€ä¸‹æˆ‘è®¤ä¸ºæ¯”è¾ƒåˆç†çš„æ–¹æ³•ï¼š1ã€ç™¾åº¦ä¸åˆ°å†åŽ»é—®äººï¼ä¸è¦æµªè´¹åˆ«äººçš„æ—¶é—´ï¼Œä½•å†µåˆ«äººçš„æ—¶é—´æ›´å€¼é’±ï¼2ã€åœ¨åˆ«äººæœ‰æ—¶é—´çš„æ—¶å€™è§ç¼æ’é’ˆçš„æé—®ï¼Œèƒ½é—®åˆ°æ›´å¥½ï¼Œé—®ä¸åˆ°ä¹Ÿåˆ«çº ç¼ ï¼é‡è¦æ˜¯åˆ«è®©äººçƒ¦ï¼3ã€æ€åº¦è¦è¯šæ³ï¼Œè¯­æ°”è¦æ¸©å’Œï¼ä½ æœ‰é—®é¢˜æ²¡è§£å†³ä½ å¾ˆç€æ€¥ï¼Œä½†è¿™ç®¡ä»–ä»€ä¹ˆäº‹ï¼ŸæŠŠä»–æƒ¹æ¯›äº†å°±ä¸å‘Šè¯‰ä½ ï¼Œä½ å²‚ä¸æ˜¯æ›´å°´å°¬æ›´éš¾å—ï¼4ã€å®žåœ¨å¤„ç†ä¸äº†ï¼Œè¦å­¦ä¼šæ”¾å¼ƒï¼æ¯•ç«Ÿæ˜¯èœé¸Ÿï¼Œä¸Žå…¶é—®ä¹Ÿé—®ä¸åˆ°å†™ä¹Ÿä¸ä¼šå†™è¿˜æ­»æ‰›ç€ï¼Œè¿˜ä¸å¦‚è®¤æ€‚äº¤ç»™è€å¤§åšï¼Œè€å¤§åšå®Œä½ å†æ…¢æ…¢å­¦å— &emsp;&emsp;æœ€æœ€é‡è¦çš„æ˜¯ä¼šç™¾åº¦ï¼Œè‚¯è¸©å‘ï¼]]></content>
      <categories>
        <category>æŠ€å·§</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[NSUserDefault]]></title>
    <url>%2F2015%2F11%2F08%2FNSUserDefault%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;ä»Šå¤©æ‰“ç®—æ°´ä¸€æ°´æœ€åŸºç¡€çš„NSUserDefaultï¼Œå› ä¸ºå¤ªå¸¸ç”¨äº†éƒ½æ²¡å•¥å¯å†™çš„ï¼ä½†åŽæ¥å‘çŽ°å¯ä»¥APPé—´å…±äº«æ•°æ®ï¼å—¯ï¼Œæ­£å¥½æœ€è¿‘ä¹Ÿä¸çŸ¥é“æ°´ä»€ä¹ˆï¼Œå°±æ°´å®ƒäº†ï¼ æ¦‚å¿µ è½»é‡çº§æ•°æ®æŒä¹…åŒ–å·¥å…·ç±» å­˜å‚¨æ–¹å¼key-valueï¼Œkeyè¦å®žçŽ°NSCodingåè®®ï¼Œæ³¨æ„ä½¿ç”¨å¯¹åº”æ–¹æ³•valueæ‰å¯ä»¥æ˜¯å€¼ç±»åž‹ æ–‡ä»¶æ ¼å¼ï¼šplistï¼Œä¿å­˜ä½ç½®ï¼š/Library/preferences/ Bound ID.plist NSUserDefaultä¸­5ä¸ªåŸŸçš„æ£€ç´¢é¡ºåºï¼šNSArgumentDomain-&gt;Application-&gt;NSGlobalDomain-&gt;Languages-&gt;NSRegistrationDomain ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ ç®€å•ï¼Œä¸€ä¸ªå•ä¾‹èµ°å¤©ä¸‹ï¼Œè·ŸNSDictionaryç”¨æ³•å·®ä¸å¤š æä¾›äº†å¤§é‡çš„å¿«æ·æ–¹æ³•ï¼Œä¾‹arrayForKey: setBool: forKey: çº¿ç¨‹å®‰å…¨,ä¸ç®¡å­˜çš„å•¥ï¼Œå–å‡ºæ¥çš„éƒ½æ˜¯ä¸å¯å˜ç±»åž‹ ç¼ºç‚¹ éžå®žæ—¶å†™å…¥ç¡¬ç›˜ï¼Œè€Œæ˜¯å…ˆå†™å…¥å†…å­˜ï¼Œç³»ç»Ÿå†å®šæ—¶å†™å…¥ç¡¬ç›˜ã€‚æƒ³è¦å®žæ—¶å†™å…¥ç¡¬ç›˜è°ƒç”¨synchronizeæ–¹æ³• 1// éžå®žæ—¶å†™å…¥ï¼Œæœ€å¯èƒ½é—®é¢˜æ˜¯ç¨‹åºçªç„¶ä¸­æ–­ï¼Œè™½ç„¶è°ƒç”¨äº†setObject forkeyï¼Œä½†å†æ¬¡å¯åŠ¨æ—¶è¯»å–çš„ä»æ˜¯ä¸Šä¸ªæ•°æ® ä¸é€‚åˆå†™å…¥å¤§é‡æ•°æ® é¢‘ç¹çš„è¯»å†™ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ å•ä¾‹å†™æ³•å¾ˆç‹¬ç‰¹ [NSUserDefaults standardUserDefaults] ä½¿ç”¨åŸºç¡€æŠ€å·§ å­˜å–å€¼ 1234567// è®¾å€¼setæ–¹æ³•å’Œå–å€¼forKeyæ–¹æ³•éƒ½ä¸€æ ·ï¼Œå”¯ä¸€åŒºåˆ«å°±æ˜¯å‚æ•°ç±»åž‹// æ³¨æ„æ‰€æœ‰objectéƒ½å¿…é¡»å®žçŽ°NSCodingåè®®NSUserDefaults *userDefault = [NSUserDefaults standardUserDefaults];NSMutableArray *muArr = [[NSMutableArray alloc] initWithObjects:@1,@2, nil];[userDefault setObject:muArr forKey:@&quot;key&quot;];[userDefault synchronize];NSArray *arr = [userDefault objectForKey:@&quot;key&quot;];// å–å‡ºæ¥æ˜¯ä¸å¯å˜ç±»åž‹ åˆ é™¤å€¼ 123NSUserDefaults *userDefault = [NSUserDefaults standardUserDefaults];[userDefault setObject:nil forKey:@&quot;key&quot;];// ä¸å»ºè®®[userDefault removeObjectForKey:@&quot;key&quot;];// å»ºè®® æ³¨å†Œé»˜è®¤å€¼ 1234567- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123;NSDictionary *defaultSet = @&#123;@&quot;name&quot;:@&quot;JZK&quot;, @&quot;sex&quot;:@&quot;man&quot;&#125;;// æ³¨å†Œé»˜è®¤å€¼ï¼Œä¸»è¦ç”¨äºŽé€šç”¨é…åˆ¶çš„åˆæ¬¡è½½å…¥ï¼å–å€¼çš„æ—¶å€™èŠ‚çœäº†ifåˆ¤æ–­å’Œæµ‹è¯•[[NSUserDefaults standardUserDefaults] registerDefaults:defaultSet];// Override point for customization after application launch.return YES;&#125; é«˜çº§çŽ©æ³• APPé—´æ•°æ®å…±äº« 12345678910111213// å¼€å¯App Groupsï¼Œå…±äº«çš„Appéƒ½éœ€è¦åŠ å…¥åŒä¸€ä¸ªGroupï¼Œ@&quot;com.yourcompany.appsShare&quot;// appAä¸­NSUserDefaults *shareDefaultA = [[NSUserDefaults alloc]initWithSuiteName:@&quot;com.yourcompany.appsShare&quot;];[shareDefaultA setObject:@&quot;appA&quot; forKey:@&quot;shareKey&quot;];// appBä¸­NSUserDefaults *shareDefaultB = [[NSUserDefaults alloc]initWithSuiteName:@&quot;com.yourcompany.appsShare&quot;];NSString *value = [shareDefaultB objectForKey:@&quot;shareKey&quot;];// åŸŸåç®¡ç†ï¼Œå‡ ä¹Žç”¨ä¸åˆ°// å°†æŒ‡å®šçš„åŸŸåæ’å…¥åˆ°æŽ¥æ”¶æ–¹çš„æœç´¢åˆ—è¡¨ä¸­// - (void)addSuiteNamed:(NSString*)suiteName;// ä»ŽæŽ¥æ”¶å™¨çš„æœç´¢åˆ—è¡¨ä¸­ç§»é™¤æŒ‡å®šçš„åŸŸå// - (void)removeSuiteNamed:(NSString*)suiteName; æŸ¥çœ‹æ‰€æœ‰æ•°æ® 1234// å½“å‰åŸŸåä¸‹æ‰€æœ‰çš„key valueNSUserDefaults *userDefault = [[NSUserDefaults standardUserDefaults];// NSUserDefaults *userDefault = [[NSUserDefaults alloc]initWithSuiteName:@&quot;com.yourcompany.appsShare&quot;];NSDictionary* dic = [userDefault dictionaryRepresentation];]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç½‘ç»œå›¾ç‰‡æ€Žä¹ˆé€‚é…]]></title>
    <url>%2F2015%2F10%2F19%2F%E7%BD%91%E7%BB%9C%E5%9B%BE%E7%89%87%E6%80%8E%E4%B9%88%E9%80%82%E9%85%8D%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;è¿™ä¸¤å¤©UIç»™æäº†ä¸ªbugï¼Œè¯´ç½‘ç»œä¸‹è½½çš„å›¾ç‰‡å˜å°äº†ï¼ŸæŸ¥äº†åŠå¤©æ‰æ‰å‘çŽ°UIåŽç«¯ä¸Šä¼ çš„å›¾ç‰‡æ˜¯2xçš„ï¼Œè€Œå®¢æˆ·ç«¯æ˜¯æŒ‰3xæ¥å¤„ç†çš„ï¼è¿™å°±æ¯”è¾ƒå‘äº†â€¦â€¦æ‰€ä»¥å°±äº§ç”Ÿäº†è¿™ç¯‡æ°´æ–‡ï¼ &emsp;&emsp; æˆ‘ä»¬é‡‡ç”¨çš„æ˜¯å¦‚ä¸‹ï¼ˆ1.1ï¼‰æ–¹æ¡ˆï¼Œä½†çº¦å®šæ¯•ç«Ÿä¸é è°±å‘€ï¼å‡ºçŽ°é—®é¢˜åˆæ˜¯å®¢æˆ·ç«¯èƒŒé”…ï¼ 1.1 è·ŸåŽç«¯çº¦å®šåªèƒ½ç©¿3xå›¾ç‰‡ï¼Œå®¢æˆ·ç«¯ä¸‹è½½å›¾ç‰‡ä¹‹åŽç›´æŽ¥ç»˜åˆ¶å³å¯123456int scale = 3;UIImage *image = [UIImage imageWithCGImage:img.CGImage withScale:scale];CGFloat imageHeight = image.size.height / scale;CGFloat imageWidth = image.size.width / scale;imageView.frame = CGRectMake(0, 0, imageHeight, imageWidth);imageView.image = image; &emsp;&emsp; çº¦å®šä¸é è°±ï¼Œé‚£å°±è®©æœåŠ¡ç«¯éƒ½ä¼ è¿‡æ¥å§ï¼ 1.2 å¢žå¼ºåž‹çº¦å®šæ ¼å¼1234567891011/*image:&#123;imgUrl:ttps://xxx.png,scale:3,width:100,height:100&#125;*/UIImage *image = [UIImage imageWithCGImage:img.CGImage withScale:scale];imageView.frame = CGRectMake(0, 0, width, height);imageView.image = image; &emsp;&emsp;1.2çš„æ–¹æ¡ˆç¡®å®žæ›´å¥½ä¸€ç‚¹ï¼Œä½†æœåŠ¡ç«¯çš„ç«¥éž‹è¯´è¿™ä¹ˆå¤šæŽ¥å£éƒ½è¿™ä¹ˆæ”¹ï¼Œæ€•è¦ç´¯æ­»äº†â€¦â€¦ &emsp;&emsp;é‚£ä¹ˆæ€Žä¹ˆåŠžï¼Ÿæ¥çœ‹çœ‹SDæ€Žä¹ˆçŽ©çš„å§ 1.3 SDæ€Žä¹ˆçŽ©çš„ï¼ŸåŽŸæ¥æ˜¯é€šè¿‡urlæ˜¯å¦åŒ…å«2xå’Œ3xæ¥å¤„ç†çš„123456789101112131415161718192021if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)]) &#123;CGFloat scale = 1;if (key.length &gt;= 8) &#123;NSRange range = [key rangeOfString:@&quot;@2x.&quot;];if (range.location != NSNotFound) &#123;scale = 2.0;&#125;range = [key rangeOfString:@&quot;@3x.&quot;];if (range.location != NSNotFound) &#123;scale = 3.0;&#125;&#125;if (scale != image.scale) &#123;UIImage *scaledImage = [[UIImage alloc] initWithCGImage:image.CGImage scale:scale orientation:image.imageOrientation];scaledImage.sd_imageFormat = image.sd_imageFormat;image = scaledImage;&#125;&#125;return image; &emsp;&emsp;ç­‰ç­‰if (scale != image.scale)ï¼Œé‚£æ˜¯ä¸æ˜¯ç›´æŽ¥ç”¨image.scaleä¹Ÿå¯ä»¥å‘¢ï¼Ÿ 1.4 ä¸è¡Œ1å…·ä½“ä»£ç ä¸å†™äº†ï¼Œå¯ä»¥è®©åŽç«¯ç»™ä½ ä¼ 2xå’Œ3xå›¾ç‰‡åˆ†åˆ«æµ‹è¯•ï¼Œä¹Ÿå¯ä»¥è‡ªå·±è®¾ä»£ç†æ˜ å°„æœ¬åœ°å›¾ç‰‡ï¼Œç»“æžœéƒ½æ˜¯ä¸€æ ·çš„ï¼æ— è®º2xè¿˜æ˜¯3xï¼Œä¸‹è½½åŽçš„imageï¼Œimage.scaleéƒ½æ˜¯1ï¼ä½†é€šè¿‡imageNamedæ–¹å¼åŠ è½½æœ¬åœ°å›¾ç‰‡ï¼Œimage.scaleå´æ˜¯æ­£ç¡®çš„ï¼ï¼ &emsp;&emsp;ç»¼ä¸Šæ‰€è¿°ï¼Œæƒ³è¦å®Œç¾Žé€‚é…å›¾ç‰‡ï¼Œåªèƒ½é€šè¿‡çº¦å®šçš„æ–¹å¼ï¼šè¦ä¹ˆçº¦å®šåªèƒ½ç©¿3xå›¾ç‰‡ï¼Œè¦ä¹ˆçº¦å®šä¸Šä¼ å›¾ç‰‡æ—¶å¸¦ç€2xæˆ–3xä¿¡æ¯ &emsp;&emsp;è‡³äºŽjpgæ ¼å¼ï¼Œjpgè¦ä»€ä¹ˆé€‚é…ï¼ï¼]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ ¸å¿ƒåŠ¨ç”»]]></title>
    <url>%2F2015%2F10%2F08%2F%E6%A0%B8%E5%BF%83%E5%8A%A8%E7%94%BB%2F</url>
    <content type="text"><![CDATA[CAlayerç®€ä»‹UIViewä¸ŽCALayer å…³ç³» CALayer æ˜¯ Core Animation Layer UIViewé»˜è®¤æœ‰ä¸ªCALayerï¼Œæ˜¯è´Ÿè´£çœŸæ­£çš„ç»˜å›¾éƒ¨åˆ† UIViewå¯ä»¥ç†è§£ä¸ºæ˜¯CALayerçš„ç®¡ç†å™¨ï¼Œå¯¹CALayerè¿›è¡Œå°è£…ï¼Œæ‰€ä»¥ä»–ä»¬å¤§éƒ¨åˆ†å±žæ€§éƒ½æ˜¯ç±»ä¼¼çš„ åŒºåˆ« CALayerç»§æ‰¿è‡ªNSObjectä¸å“åº”äº‹ä»¶ï¼ŒUIViewç»§æ‰¿è‡ªUIResponderèƒ½å¤Ÿå“åº”äº‹ä»¶ CAlayeræ˜¯QuatzCoreæ¡†æž¶å†…å®¹ï¼ŒUIViewæ˜¯UIKitæ¡†æž¶å†…å®¹ CALayerç›´æŽ¥æ”¯æŒ3Då±•ç¤ºï¼ŒUIViewéœ€è¦å€ŸåŠ©transform CALayerå¤§éƒ¨åˆ†å±žæ€§ä¿®æ”¹éƒ½èƒ½å½¢æˆéšå¼åŠ¨ç”»ï¼ŒUIViewæ²¡æœ‰ å¸¸ç”¨å±žæ€§ å±žæ€§ è¯´æ˜Ž æ˜¯å¦æ”¯æŒéšå¼åŠ¨ç”» anchorPoint é”šç‚¹ï¼Œå–å€¼0åˆ°1ï¼Œæ¯”ä¾‹å€¼ï¼é»˜è®¤(0.5,0.5)ï¼Œæ°¸è¿œå’Œpositioné‡åˆ æ˜¯ backgroundColor å›¾å±‚èƒŒæ™¯é¢œè‰² æ˜¯ borderColor è¾¹æ¡†é¢œè‰² æ˜¯ borderWidth è¾¹æ¡†å®½åº¦ æ˜¯ bounds å›¾å±‚å¤§å° æ˜¯ contents å›¾å±‚æ˜¾ç¤ºå†…å®¹ï¼Œä¾‹å¦‚å¯ä»¥å°†å›¾ç‰‡ä½œä¸ºå›¾å±‚å†…å®¹æ˜¾ç¤º æ˜¯ contentsRect å›¾å±‚æ˜¾ç¤ºå†…å®¹çš„å¤§å°å’Œä½ç½® æ˜¯ cornerRadius åœ†è§’åŠå¾„ æ˜¯ doubleSided å›¾å±‚èƒŒé¢æ˜¯å¦æ˜¾ç¤ºï¼Œé»˜è®¤ä¸ºYES å¦ frame å›¾å±‚å¤§å°å’Œä½ç½®ï¼Œä¸æ”¯æŒéšå¼åŠ¨ç”» å¦ hidden æ˜¯å¦éšè— æ˜¯ mask å›¾å±‚è’™ç‰ˆ æ˜¯ maskToBounds å­å›¾å±‚æ˜¯å¦å‰ªåˆ‡å›¾å±‚è¾¹ç•Œï¼Œé»˜è®¤ä¸ºNO æ˜¯ opacity é€æ˜Žåº¦ ï¼Œç±»ä¼¼äºŽUIViewçš„alpha æ˜¯ position å›¾å±‚ä¸­å¿ƒç‚¹ä½ç½®ï¼Œç±»ä¼¼äºŽUIViewçš„center æ˜¯ shadowColor é˜´å½±é¢œè‰² æ˜¯ shadowOffset é˜´å½±åç§»é‡ æ˜¯ shadowOpacity é˜´å½±é€æ˜Žåº¦ï¼Œæ³¨æ„é»˜è®¤ä¸º0ï¼Œå¦‚æžœè®¾ç½®é˜´å½±å¿…é¡»è®¾ç½®æ­¤å±žæ€§ æ˜¯ shadowPath é˜´å½±çš„å½¢çŠ¶ æ˜¯ shadowRadius é˜´å½±æ¨¡ç³ŠåŠå¾„ æ˜¯ sublayers å­å›¾å±‚ æ˜¯ sublayerTransform å­å›¾å±‚å½¢å˜ æ˜¯ transform å›¾å±‚å½¢å˜ æ˜¯ æ³¨æ„ï¼šä¸€èˆ¬CALayerä¸­å¾ˆå°‘ä½¿ç”¨frameï¼Œé€šå¸¸ä½¿ç”¨boundså’Œpositionä»£æ›¿ æ³¨æ„ï¼šUIViewçš„transformæ˜¯CGAffineTransformç”¨äºŽ2Då˜åŒ–ï¼ŒCALayerçš„çš„transformæ˜¯CATransform3Dç”¨äºŽ3Då˜åŒ–ï¼Œå¯äº’è½¬; CGAffineTransformå’ŒCATransform3Dçš„å…±åŒç‚¹æ˜¯å¸¦æœ‰rotationç”¨äºŽæ—‹è½¬ã€å¸¦æœ‰scaleç”¨äºŽç¼©æ”¾ã€å¸¦æœ‰translationç”¨äºŽå¹³ç§» Core AnimationCAAnimation æ ¸å¿ƒåŠ¨ç”»çš„æ ¹ç±»123456789101112131415// æ—¶é—´å‡½æ•°/*kCAMediaTimingFunctionLinear // åŒ€é€ŸkCAMediaTimingFunctionEaseIn // æ…¢è¿›kCAMediaTimingFunctionEaseOut // æ…¢å‡ºkCAMediaTimingFunctionEaseInEaseOut // æ…¢è¿›æ…¢å‡ºkCAMediaTimingFunctionDefault // é»˜è®¤å€¼ï¼ˆæ…¢è¿›æ…¢å‡ºï¼‰*/@property(nullable, strong) CAMediaTimingFunction *timingFunction;// æ³¨æ„æ˜¯strongï¼Œè®¾ç½®ä»£ç†åŽå¿…é¡»åœ¨é€‚å½“æ—¶æœºæ‰‹åŠ¨é‡Šæ”¾delegate@property(nullable, strong) id &lt;CAAnimationDelegate&gt; delegate;// åŠ¨ç”»æ‰§è¡Œå®Œæ¯•åŽæ˜¯å¦ä»Žå›¾å±‚ä¸Šç§»é™¤ï¼Œé»˜è®¤ä¸ºYESï¼ˆè§†å›¾ä¼šæ¢å¤åˆ°åŠ¨ç”»å‰çš„çŠ¶æ€ï¼‰ï¼Œå¯è®¾ç½®ä¸ºNOï¼ˆå›¾å±‚ä¿æŒåŠ¨ç”»æ‰§è¡ŒåŽçš„çŠ¶æ€ï¼Œå‰ææ˜¯fillModeè®¾ç½®ä¸ºkCAFillModeForwardsï¼‰@property(getter=isRemovedOnCompletion) BOOL removedOnCompletion; CAMediaTiming åè®® CAMediaTimingæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä½¿ç”¨åè®®å®žçŽ°å¤šç»§æ‰¿çš„æ ·ä¾‹123456789101112131415161718192021222324252627282930// å¼€å§‹æ—¶é—´ï¼Œé»˜è®¤0å³å½“å‰æ—¶é—´ï¼Œå»¶è¿Ÿ2ç§’å¯ç”¨ beginTime=CACurrentMediaTime() + 2;@property CFTimeInterval beginTime;// åŠ¨ç”»æŒç»­æ—¶é•¿ï¼Œé»˜è®¤0@property CFTimeInterval duration;// åŠ¨ç”»é€Ÿåº¦ï¼Œé»˜è®¤1ï¼Œè®¾ä¸º0è¡¨ç¤ºæš‚åœåŠ¨ç”»// åŠ¨ç”»çš„å®žé™…æ—¶é—´ = duration / speed@property float speed;// åŠ¨ç”»å·²ç»è¿›è¡Œäº†å¤šé•¿æ—¶é—´ï¼Œé»˜è®¤0@property CFTimeInterval timeOffset;// é‡å¤æ¬¡æ•°ï¼Œé»˜è®¤0@property float repeatCount;// é‡å¤æ—¶é—´ï¼Œé»˜è®¤0@property CFTimeInterval repeatDuration;// æ˜¯å¦åè½¬ï¼Œå³æ‰€æœ‰åŠ¨ç”»å€’ç€æ¥ä¸€éï¼Œé»˜è®¤NO@property BOOL autoreverses;/*é¦–å…ˆè®¾ç½®animation.removeOnCompletion = NOkCAFillModeForwards // åŠ¨ç”»ç»“æŸåŽä¿æŒæœ€åŽä¸€å¸§çš„çŠ¶æ€kCAFillModeBackwards // åŠ¨ç”»å¼€å§‹å‰æŠ¥çº¸ç¬¬ä¸€å¸§çš„çŠ¶æ€kCAFillModeBoth // éƒ½æœ‰kCAFillModeRemoved // ç›¸å½“äºŽåŠ¨ç”»å¯¹CALayeræ²¡å½±å“ï¼Œæ‰§è¡Œå®Œå°±ç§»é™¤*/@property(copy) CAMediaTimingFillMode fillMode; CAAnimationDelegate æ³¨æ„æ­¤delegateæ˜¯ç”¨strongä¿®é¥°çš„ï¼Œä½¿ç”¨å®Œå¿…é¡»æ‰‹åŠ¨ç½®nil12345// åŠ¨ç”»å¼€å§‹æ—¶å›žè°ƒ- (void)animationDidStart:(CAAnimation *)anim;// åŠ¨ç”»ç»“æŸæˆ–ä¸­æ–­æ—¶å›žè°ƒï¼Œfinishedä¸ºYESè¡¨ç¤ºåŠ¨ç”»ç»“æŸ- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag; CAPropertyAnimation å±žæ€§åŠ¨ç”»çš„åŸºç±»ï¼ˆé€šè¿‡å±žæ€§è¿›è¡ŒåŠ¨ç”»è®¾ç½®ï¼Œæ³¨æ„æ˜¯å¯åŠ¨ç”»å±žæ€§ï¼‰ï¼Œä¸èƒ½ç›´æŽ¥ä½¿ç”¨12345678910// ä¸€èˆ¬åŸºç¡€åŠ¨ç”»å’Œå…³é”®å¸§åŠ¨ç”»éƒ½éƒ½ä¼šé€šè¿‡åŽ»ä¸‹ä¾¿åˆ©åˆå§‹åŒ–åˆå§‹åŒ–+ (instancetype)animationWithKeyPath:(nullable NSString *)path;// å…¶å®žå³ä½¿CALayerçš„å±žæ€§ï¼ˆæ”¯æŒéšå¼åŠ¨ç”»çš„ï¼‰å‚ç…§ä¸Šé¢// æ³¨æ„æ˜¯NSStringï¼ŒKVCæ–¹å¼æ¥èµ‹å€¼çš„ï¼Œæ‰€ä»¥ç‰¹åˆ«æ³¨æ„æ‹¼å†™é—®é¢˜ï¼Œå¤§å°å†™ç­‰// ä½¿ç”¨transformæ—¶ ï¼Œåº”è¯¥å…·ä½“åˆ°å±žæ€§ï¼Œä¾‹@&quot;transform.scale&quot;ã€@&quot;transform.rotation.z&quot;@property(nullable, copy) NSString *keyPath;// æ’å€¼è®¡ç®—å‡½æ•°ï¼Œä¸ç”¨ç®¡ï¼Œç”¨ç³»ç»Ÿçš„å°±å¥½ï¼@property(nullable, strong) CAValueFunction *valueFunction; CABasicAnimation åŸºç¡€åŠ¨ç”»ï¼Œé€šè¿‡å±žæ€§ä¿®æ”¹è¿›è¡ŒåŠ¨ç”»å‚æ•°æŽ§åˆ¶ï¼Œæœ€å¸¸è§ç”¨æ³•æ˜¯è®¾ç½®fromValueå’ŒtoValue æ³¨æ„ï¼šfromValueã€toValueå’ŒbyValueéƒ½æ˜¯strongä¿®é¥°çš„idç±»åž‹ï¼Œå…·ä½“ç±»åž‹éœ€è¦æ ¹æ®keyPathçš„ç±»åž‹å¤„ç† 1234567891011/*fromValueå’ŒtoValueä¸ä¸ºnilï¼ŒkeyPathå±žæ€§å€¼åœ¨fromValueä¸ŽtoValueä¹‹é—´æ¸å˜fromValueå’ŒbyValueä¸ä¸ºnilï¼ŒkeyPathå±žæ€§å€¼åœ¨fromValueä¸Ž(fromValue+byValue)ä¹‹é—´æ¸å˜byValueå’ŒtoValueä¸ä¸ºnilï¼ŒkeyPathå±žæ€§å€¼åœ¨(toValue-byValue)ä¸ŽtoValueä¹‹é—´æ¸å˜fromValueä¸ä¸ºnilï¼ŒkeyPathå±žæ€§å€¼åœ¨fromValueä¸Žå›¾å±‚å¯¹åº”å½“å‰å€¼ä¹‹é—´æ¸å˜toValueä¸ä¸ºnilï¼ŒkeyPathå±žæ€§å€¼åœ¨å›¾å±‚å¯¹åº”å½“å‰å€¼ä¸ŽtoValueä¹‹é—´æ¸å˜byValueä¸ä¸ºnilï¼ŒkeyPathå±žæ€§å€¼åœ¨å›¾å±‚å¯¹åº”å½“å‰å€¼ä¸Ž(å›¾å±‚å¯¹åº”å½“å‰å€¼+toValue)ä¹‹é—´æ¸å˜*/@property(nullable, strong) id fromValue;@property(nullable, strong) id toValue;@property(nullable, strong) id byValue; å½“ç„¶fromValueã€toValueå’ŒbyValueä¹Ÿå¯ä½¿ç”¨CATransform3Då¯¹è±¡ 123CATransform3D transformFrom = CATransform3DMakeScale(1.0, 1.0, 1.0);CASpringAnimation *springAnimation = [CASpringAnimation animationWithKeyPath:@&quot;transform&quot;];springAnimation.fromValue = [NSValue valueWithCATransform3D:transformFrom]; ç¤ºä¾‹ 123456789101112CABasicAnimation* animation;animation = [CABasicAnimation animationWithKeyPath:@&quot;transform.rotation.z&quot;];animation.toValue = [NSNumber numberWithFloat: M_PI * 30 ];animation.duration = 2.0;// å¯è®¾æ—¶é—´å‡½æ•°// animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];animation.cumulative = YES;animation.repeatCount = 0;animation.removedOnCompletion = NO;animation.fillMode = kCAFillModeForwards;[view.layer addAnimation:rotationAnimation forKey:@&quot;rotationAnimation&quot;]; CAKeyframeAnimation å…³é”®å¸§åŠ¨ç”»ï¼ŒåŒæ ·æ˜¯é€šè¿‡å±žæ€§è¿›è¡ŒåŠ¨ç”»å‚æ•°æŽ§åˆ¶ï¼Œä½†æ˜¯åŒåŸºç¡€åŠ¨ç”»ä¸åŒçš„æ˜¯å®ƒå¯ä»¥æœ‰å¤šä¸ªçŠ¶æ€æŽ§åˆ¶ã€‚ 1234567891011// å…³é”®å¸§ï¼ˆå°±æ˜¯æ ‡å¿—ä½ï¼‰æ•°ç»„ï¼Œç±»åž‹ç”±keyPathç¡®å®š@property(nullable, copy) NSArray *values;// å°†æ—¶é—´ç‚¹å’Œå…³é”®å¸§ï¼ˆæ ‡å¿—ä½ï¼‰ä¸€ä¸€å¯¹åº”ï¼Œæ•°å€¼ä¸ºæ€»æ—¶é•¿çš„ç™¾åˆ†æ¯”ï¼Œé»˜è®¤å‡åˆ†@property(nullable, copy) NSArray&lt;NSNumber *&gt; *keyTimes;// æ¯ä¸ªå…³é”®å¸§ä¹‹é—´çš„åŠ¨ç”»ç¼“å†²æ•ˆæžœï¼ŒtimingFunctions.count = keyTimes.count-1@property(nullable, copy) NSArray&lt;CAMediaTimingFunction *&gt; *timingFunctions;// æŒ‡å®šåŠ¨ç”»è·¯å¾„ï¼Œè®¾ç½®æ­¤å±žæ€§å°†å¿½ç•¥valuesç­‰@property(nullable) CGPathRef path; ç¤ºä¾‹ 123456789double duration = 16 / 30.0;NSArray *keyTimes = @[@0, @((7/30.0)), @((13/30.0)), @((16/30.0))];CAKeyframeAnimation *sizeAni = [CAKeyframeAnimation animationWithKeyPath:@&quot;transform.scale&quot;];sizeAni.values = @[@1.0, @1.2, @0.90, @1.0];sizeAni.keyTimes = keyTimes;CAAnimationGroup *group = [CAAnimationGroup animation];group.animations = @[sizeAni];group.duration = duration;[view.layer addAnimation:group forKey:nil]; CAAnimationGroup åŠ¨ç”»ç»„ï¼ŒåŠ¨ç”»ç»„æ˜¯ä¸€ç§ç»„åˆæ¨¡å¼è®¾è®¡ï¼Œå¯ä»¥é€šè¿‡åŠ¨ç”»ç»„æ¥è¿›è¡Œæ‰€æœ‰åŠ¨ç”»è¡Œä¸ºçš„ç»Ÿä¸€æŽ§åˆ¶ï¼Œç»„ä¸­æ‰€æœ‰åŠ¨ç”»æ•ˆæžœå¯ä»¥å¹¶å‘æ‰§è¡Œã€‚ å®žä¾‹12345678910111213141516171819202122232425NSArray *keyTimes = @[@0, @((7/43.0)), @((17/43.0)), @((29/43.0)), @(1)];CAKeyframeAnimation *sizeAni = [CAKeyframeAnimation animationWithKeyPath:@&quot;transform.scale&quot;];sizeAni.values = @[@0, @1.1, @1, @1, @1];sizeAni.duration = duration;sizeAni.keyTimes = keyTimes;sizeAni.repeatCount = CGFLOAT_MAX;CAKeyframeAnimation *opacityAni = [CAKeyframeAnimation animationWithKeyPath:@&quot;opacity&quot;];opacityAni.values = @[@0, @1, @1, @1, @1];opacityAni.keyTimes = keyTimes;CAKeyframeAnimation *positionAni = [CAKeyframeAnimation animationWithKeyPath:@&quot;position&quot;];CGPoint centerPoint = adView.center;CGRect frameRect = adView.frame;CGPoint startPoint = CGPointMake(centerPoint.x, (frameRect.origin.y + frameRect.size.height));CGPoint endPoint = CGPointMake(centerPoint.x, centerPoint.y);NSArray *values = [NSArray arrayWithObjects:[NSValue valueWithCGPoint:startPoint], [NSValue valueWithCGPoint:endPoint],[NSValue valueWithCGPoint:endPoint], [NSValue valueWithCGPoint:endPoint], [NSValue valueWithCGPoint:endPoint], nil];positionAni.values = values;positionAni.keyTimes = keyTimes;CAAnimationGroup *group = [CAAnimationGroup animation];group.animations = @[sizeAni, positionAni];group.duration = duration;group.removedOnCompletion = NO;[adView.layer addAnimation:group forKey:@&quot;addArrowViewGroupAnimation&quot;]; CATransaction äº‹åŠ¡çš„ä½œç”¨ï¼šä¿è¯ä¸€ä¸ªæˆ–å¤šä¸ªlayerçš„ä¸€ä¸ªæˆ–å¤šä¸ªå±žæ€§å˜åŒ–åŒæ—¶è¿›è¡Œ123456789[CATransaction begin];&#123;// some animaiton&#125;[CATransaction commit];[CATransaction setCompletionBlock:^&#123;// do something&#125;]; UIView&emsp;&emsp;ä¸å†™äº†ï¼Œé™¤äº†å¼¹ç°§åŠ¨ç”»éœ€è¦è‡ªå·±æµ‹è¯•ä¸‹å‚æ•°å¤–ï¼Œå…¶å®ƒçš„éƒ½å¾ˆç®€å•ï¼å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯animateçš„completionblockä¸ä¼šå¼•èµ·å¾ªçŽ¯å¼•ç”¨ï¼Œå¯æ”¾å¿ƒä½¿ç”¨ï¼ å‚è€ƒ http://www.cocoachina.com/articles/10005]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>UI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[UIScrollViewç€‘å¸ƒæµ]]></title>
    <url>%2F2015%2F09%2F26%2FUIScrollView%E7%80%91%E5%B8%83%E6%B5%81%2F</url>
    <content type="text"><![CDATA[åŽŸç†ï¼šå…ˆè®¡ç®—å‡ºæ‰€æœ‰cellçš„ä½ç½®ï¼Œç„¶åŽæ ¹æ®offsetåˆ¤æ–­å±å¹•å†…çš„è¿›è¡ŒåŠ è½½ JZKWaterFallView.h 1234567891011121314151617181920212223242526272829#import &lt;UIKit/UIKit.h&gt;@class JZKWaterFallView;@protocol JZKWaterFallViewDelegate &lt;NSObject&gt;// å¤šå°‘åˆ—- (NSInteger)numberOfCulumnsInWaterFallView:(JZKWaterFallView *)waterFallView;// ä¸€å…±å¤šå°‘ä¸ªcell- (NSInteger)numberOfCellsInWaterFallView:(JZKWaterFallView *)waterFallView;// å®šåˆ¶cellç±»åž‹- (UIView *)waterFallView:(JZKWaterFallView *)waterFallView cellForRowAtIndex:(NSInteger )index;// cellé«˜åº¦,å¯ä»¥ç”¨NSIndexPathï¼Œä½†æˆ‘æ‡’å¾—æ•´äº†- (CGFloat)waterFallView:(JZKWaterFallView *)tableView heightForRowAtIndex:(NSInteger )index;// ç‚¹å‡»äº‹ä»¶è‡ªå·±å†™å§ï¼Œæ‡’å¾—åˆ¤æ–­UIViewå…·ä½“ç±»åž‹äº†@optional// åˆ—é—´è·- (CGFloat )offsetXBetweenCulumnsInWaterFallView:(JZKWaterFallView *)waterFallView;// è¡Œé—´è·- (CGFloat )offsetYBetweenLinesInWaterFallView:(JZKWaterFallView *)waterFallView;@end@interface JZKWaterFallView : UIView@property (nonatomic, assign) id&lt;JZKWaterFallViewDelegate&gt; delegate;- (UIView *)dequeueReusableCell;- (void)reloadData;@end JZKWaterFallView.m 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174#import &quot;JZKWaterFallView.h&quot;#define kItemViewTag 6848@interface JZKWaterFallView ()&lt;UIScrollViewDelegate&gt;@property (nonatomic, strong) UIScrollView *scrollView;@property (nonatomic, strong) UIView *contentView;// å„ä¸ªcellçš„ä½ç½®@property (nonatomic, strong) NSMutableArray *cellFrames;// cell ç¼“å†²æ± @property (nonatomic, strong) NSMutableArray *cellCachePool;@end@implementation JZKWaterFallView- (instancetype)initWithFrame:(CGRect)frame &#123;self = [super initWithFrame:frame];if (self) &#123;[self setUpWithFrame:frame];&#125;return self;&#125;- (void)setUpWithFrame:(CGRect)frame &#123;CGFloat width = frame.size.width;CGFloat height = frame.size.height;_scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, width, height)];_scrollView.delegate = self;[self addSubview:_scrollView];_cellCachePool = [[NSMutableArray alloc] init];_cellFrames = [[NSMutableArray alloc] init];&#125;- (void)reloadData &#123;[self clear];if ([self numberOfCulumns] &gt; 0 &amp;&amp; [self numberOfCells] &gt; 0) &#123;[self reloadScrollView];CGFloat offsetY = _scrollView.contentOffset.y;[self refreshItemViewWithOffsetY:offsetY];&#125;&#125;- (void)clear &#123;[_contentView removeFromSuperview];_contentView = nil;[_cellFrames removeAllObjects];[_cellCachePool removeAllObjects];&#125;- (void)reloadScrollView &#123;CGFloat scrollViewWidth = _scrollView.frame.size.width;_contentView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, scrollViewWidth, 200)];[_scrollView addSubview:_contentView];NSInteger culumnsCount = [self numberOfCulumns];NSInteger cellCount = [self numberOfCells];CGFloat offsetX = [self offsetXBetweenCulumns];CGFloat offsetY = [self offsetYBetweenLines];CGFloat cellWidth = (scrollViewWidth - (culumnsCount * offsetX))/ culumnsCount;CGFloat maxHeight = [self cellHeightAtIndex:0] + offsetY;NSMutableArray *culumnsHeight = [[NSMutableArray alloc] init];NSInteger targetCulumn = 0;for (int index = 0; index &lt; cellCount; index++) &#123;CGFloat cellHeight = [self cellHeightAtIndex:index];CGFloat originX = 0;CGFloat originY = 0;// ç¬¬ä¸€æŽ’cç‰¹æ®Šå¤„ç†if (index &lt; culumnsCount) &#123;originY = 0;originX = index*(cellWidth + offsetX);[culumnsHeight addObject:@(cellHeight + offsetY)];&#125;else &#123;// æ‰¾åˆ°æ‰€æœ‰åˆ—ä¸­æœ€çŸ®çš„CGFloat minHeight = MAXFLOAT;for (int j = 0 ; j &lt; culumnsHeight.count; j++) &#123;CGFloat height = [[culumnsHeight objectAtIndex:j] floatValue];if (minHeight &gt; height) &#123;minHeight = height;targetCulumn = j;&#125;&#125;originY = minHeight;originX = targetCulumn * (cellWidth + offsetX);// æ›¿æ¢[culumnsHeight replaceObjectAtIndex:targetCulumn withObject:@(originY+cellHeight + offsetY)];&#125;CGRect frame = CGRectMake(originX, originY, cellWidth, cellHeight);NSValue *value = [NSValue valueWithCGRect:frame];[_cellFrames addObject:value];if (maxHeight &lt; originY + cellHeight +offsetY) &#123;maxHeight = originY + cellHeight +offsetY;&#125;&#125;_contentView.frame = CGRectMake(0, 0, scrollViewWidth, maxHeight);_scrollView.contentSize = CGSizeMake(scrollViewWidth, maxHeight);&#125;- (void)refreshItemViewWithOffsetY:(CGFloat )offsetY &#123;for (int index = 0; index &lt; [self numberOfCells]; index++) &#123;NSValue *value = [_cellFrames objectAtIndex:index];CGRect frame = [value CGRectValue];// åˆ¤æ–­æ˜¯å¦åœ¨å±å¹•å†…NSInteger tag = kItemViewTag + index;if (frame.origin.y + frame.size.height &gt; offsetY &amp;&amp; frame.origin.y + frame.size.height &lt; offsetY + _scrollView.frame.size.height) &#123;if (![_contentView viewWithTag:tag]) &#123;UIView *view = [self cellViewForIndex:index];view.frame = frame;[_contentView addSubview:view];[view setNeedsLayout];&#125;&#125;else &#123;if ([_contentView viewWithTag:tag]) &#123;UIView *view = [_contentView viewWithTag:tag];[_cellCachePool addObject:view];[view removeFromSuperview];&#125;&#125;&#125;&#125;- (UIView *)dequeueReusableCell &#123;if (_cellCachePool.count &gt; 0) &#123;UIView *view = [_cellCachePool firstObject];[_cellCachePool removeObjectAtIndex:0];return view;&#125;else &#123;return nil;&#125;&#125;#pragma mark scrollDelegate- (void)scrollViewDidScroll:(UIScrollView *)scrollView &#123;CGFloat offsetY = scrollView.contentOffset.y;[self refreshItemViewWithOffsetY:offsetY];&#125;#pragma mark getter- (NSInteger )numberOfCulumns &#123;return [self.delegate numberOfCulumnsInWaterFallView:self];&#125;- (NSInteger )numberOfCells &#123;return [self.delegate numberOfCellsInWaterFallView:self];&#125;- (CGFloat )offsetXBetweenCulumns &#123;if ([self.delegate respondsToSelector:@selector(offsetXBetweenCulumnsInWaterFallView:)]) &#123;return [self.delegate offsetXBetweenCulumnsInWaterFallView:self];&#125;else &#123;return 5;&#125;&#125;- (CGFloat )offsetYBetweenLines &#123;if ([self.delegate respondsToSelector:@selector(offsetYBetweenLinesInWaterFallView:)]) &#123;return [self.delegate offsetYBetweenLinesInWaterFallView:self];&#125;else &#123;return 5;&#125;&#125;- (CGFloat )cellHeightAtIndex:(NSInteger)index &#123;return [self.delegate waterFallView:self heightForRowAtIndex:index];&#125;- (UIView *)cellViewForIndex:(NSInteger )index &#123;return [self.delegate waterFallView:self cellForRowAtIndex:index];&#125;@end ä½¿ç”¨æ–¹æ³• 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849@interface ViewController ()&lt;JZKWaterFallViewDelegate&gt;@property (nonatomic, strong) NSMutableArray *heights;@end@implementation ViewController- (void)viewDidLoad &#123;[super viewDidLoad];JZKWaterFallView *waterFallView = [[JZKWaterFallView alloc] initWithFrame:CGRectMake(0, 100, self.view.frame.size.width, 300)];waterFallView.delegate = self;[self.view addSubview:waterFallView];_heights = [[NSMutableArray alloc] init];for (int i = 0; i &lt; 20; i++) &#123;CGFloat height = (arc4random() % 9)*11;[_heights addObject:@(height)];&#125;[waterFallView reloadData];&#125;- (NSInteger)numberOfCellsInWaterFallView:(JZKWaterFallView *)waterFallView &#123;return _heights.count;&#125;- (NSInteger)numberOfCulumnsInWaterFallView:(JZKWaterFallView *)waterFallView &#123;return 3;&#125;- (UIView *)waterFallView:(JZKWaterFallView *)waterFallView cellForRowAtIndex:(NSInteger)index &#123;UILabel *label = (UILabel *)[waterFallView dequeueReusableCell];if (label == nil) &#123;label = [[UILabel alloc] init];&#125;label.text = [NSString stringWithFormat:@&quot;ç¬¬%liä¸ª&quot;,(long)index];if (index % 2 == 0) &#123;label.backgroundColor = [UIColor blueColor];&#125;else &#123;label.backgroundColor = [UIColor yellowColor];&#125;return label;&#125;- (CGFloat)waterFallView:(JZKWaterFallView *)tableView heightForRowAtIndex:(NSInteger)index &#123;return [[_heights objectAtIndex:index] floatValue];&#125;@end]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>UI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OCæ€Žä¹ˆå®žçŽ°å¤šå‚æ•°]]></title>
    <url>%2F2015%2F09%2F17%2FOC%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E5%A4%9A%E5%8F%82%E6%95%B0%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;ä»Šå¤©è¢«ä¸€ä¸ªé—®é¢˜éš¾åˆ°äº†ï¼ŒOCæ€Žä¹ˆå®žçŽ°å¤šå‚æ•°ï¼Ÿ &emsp;&emsp;å…¶å®žæˆ‘ä»¬ç»å¸¸ç”¨çš„NSArrayé‡Œå°±æœ‰å¤šå‚æ•°çš„å®žä¾‹1+ (instancetype)arrayWithObjects:(ObjectType)firstObj, ... NS_REQUIRES_NIL_TERMINATION; &emsp;&emsp;é‚£ä¹ˆæˆ‘ä»¬æ€Žä¹ˆè‡ªå·±å®šä¹‰å¤šå‚æ•°å‡½æ•°å‘¢ï¼Ÿå‡ ç»å‘¨æŠ˜æ‰¾åˆ°äº†å®˜æ–¹æºç å¦‚ä¸‹12345678910111213141516171819202122232425#import &lt;Cocoa/Cocoa.h&gt;@interface NSMutableArray (variadicMethodExample)- (void) appendObjects:(id) firstObject, ...; // This method takes a nil-terminated list of objects.@end@implementation NSMutableArray (variadicMethodExample)- (void) appendObjects:(id) firstObject, ...&#123;id eachObject;va_list argumentList;if (firstObject) // The first argument isn&apos;t part of the varargs list,&#123; // so we&apos;ll handle it separately.[self addObject: firstObject];va_start(argumentList, firstObject); // Start scanning for arguments after firstObject.while (eachObject = va_arg(argumentList, id)) // As many times as we can get an argument of type &quot;id&quot;[self addObject: eachObject]; // that isn&apos;t nil, add it to self&apos;s contents.va_end(argumentList);&#125;&#125;@end &emsp;&emsp;è¦ä¸è¦åŠ NS_REQUIRES_NIL_TERMINATION ï¼Ÿ æˆ‘è®¤ä¸ºè¦åŠ ï¼Œè¿™ä¸ªå®è¡¨ç¤ºæœ€åŽéœ€è¦ä¸€ä¸ªnilï¼Œå°±æ˜¯ä¸ºäº†å¤šå‚æ•°å‡†å¤‡çš„ &emsp;&emsp;stackoverflowä¸Šæœ‰ä¸ªé—®é¢˜ï¼Œä¹Ÿå¯ä»¥å‚è€ƒä¸€ä¸‹ï¼ˆå…¶å®žå°±æ˜¯çœç•¥å‡½æ•°åï¼‰ï¼šhttps://stackoverflow.com/questions/722651/how-do-i-pass-multiple-parameters-in-objective-c?r=SearchResults]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[tableviewçš„å‘]]></title>
    <url>%2F2015%2F09%2F12%2Ftableview%E7%9A%84%E5%9D%91%2F</url>
    <content type="text"><![CDATA[headeré—®é¢˜ tableviewçš„reloadSectionsåˆ·æ–°æ—¶ï¼Œå¦‚æžœcellæˆ–secitonHeaderä¸­æœ‰XIBåˆ›å»ºçš„subviewï¼Œå¯èƒ½ä¼šå‡ºçŽ°frameé—®é¢˜,ä¸€ä¼šå¤§ä¸€ä¼šå°ï¼Œä½†æ²¡ä»»ä½•åœ°æ–¹æ›´æ”¹frameï¼Œç»“è®ºï¼šæ…Žç”¨XIB https://blog.csdn.net/weixin_33686714/article/details/89615265 reloadSectionçš„å‘ çŽ°è±¡ï¼šreloadSectionsåŽï¼Œå†è®¾ç½®P2Pæˆ–çˆ†å“æŠ¢è´­å¯¹åº”çš„é€‰ä¸­tabä¼šé—ªåŠ¨ã€‚ å®žéªŒç»“æžœï¼šreloadSectionsæ—¶å¥½åƒä¸ä¼šå¤ç”¨å·²å±•ç¤ºçš„cellï¼Œè€Œæ˜¯cellAå’ŒcellBçš„å¾ªçŽ¯å±•ç¤ºï¼ŒcellAçš„scrollViewContentOffsetä¸ŽcellBçš„scrollViewContentOffsetä¸ä¸€è‡´ï¼Œé€ æˆé—ªåŠ¨ï¼Œä¸”scrollViewContentOffsetå¤§å°æ²¡æœ‰å¿…ç„¶è§„å¾‹ è¡¥å……ï¼šå‚è€ƒ https://blog.csdn.net/hherima/article/details/84573076 æ›´æ–°ï¼štableView reloadData æœ‰è·³åŠ¨ åœ¨iOS 11Self-Sizingè‡ªåŠ¨æ‰“å¼€åŽï¼ŒcontentSizeå’ŒcontentOffsetéƒ½å¯èƒ½å‘ç”Ÿæ”¹å˜ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ç¦ç”¨ tableView.estimatedRowHeight = 0; tableView.estimatedSectionHeaderHeight = 0; tableView.estimatedSectionFooterHeight = 0;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>UI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºŽNSArrayçš„å‡ ä¸ªé—®é¢˜]]></title>
    <url>%2F2015%2F08%2F29%2F%E5%85%B3%E4%BA%8ENSArray%E7%9A%84%E5%87%A0%E4%B8%AA%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[æ•°ç»„é‡Œå¯æ”¾ä¸åŒç±»åž‹ï¼Œä¸èƒ½æ”¾nilï¼Œç‰¹åˆ«æ³¨æ„æ’å…¥ã€åˆ é™¤å’ŒæŸ¥æ‰¾æ—¶çš„è¶Šç•Œé—®é¢˜123NSArray &lt;NSString *&gt; *array = @[@&quot;one&quot;ï¼Œ@&quot;two&quot;];// æ­¤nilä¸ºç»“æŸæ ‡è¯†ç¬¦ä¸è®¡å…¥æ•°ç»„å†…NSArray *arr = [NSArray arrayWithObjects:@1,@&quot;2&quot;, nil]; æ•°ç»„æ˜¯å¦æœ‰å€¼æ ¡éªŒ1#define ISARRAYHASVALUE(array) (array &amp;&amp; [array isKindOfClass:[NSArray class]] &amp;&amp; [array count] &gt; 0) indexOfObject ä¸Ž indexOfObjectIdenticalToç­”ï¼šindexOfObjectIdenticalToæ¯”è¾ƒå†…å­˜åœ°å€æ˜¯å¦ç›¸åŒï¼ŒindexOfObjectæ¯”è¾ƒisEqualæ–¹æ³•ã€‚å‚è€ƒ æ€Žä¹ˆå¿«é€Ÿå‰”é™¤æ•°ç»„ä¸­ç›¸åŒå…ƒç´ 123NSArray *arr = @[@1,@1,@2,@2,@3,@4,@4];NSSet *set = [NSSet setWithArray:arr];NSLog(@&quot;%@&quot;,[set allObjects]); å¿«é€Ÿè¿‡æ»¤1234NSArray *filteredArray = @[@2, @4, @6];NSArray *dataArray = @[@1,@2,@3,@4,@5,@6,@7];NSPredicate *filterPredicate = [NSPredicate predicateWithFormat:@&quot;NOT (SELF IN %@)&quot;,filteredArray];NSLog(@&quot;è¿‡æ»¤åŽï¼š%@&quot;,[dataArray filteredArrayUsingPredicate:filterPredicate]); forã€for in è¿˜æ˜¯ enumerateObjectsUsingBlockç­”ï¼š forã€ for in å·®åˆ«ä¸å¤§ï¼Œçº¿ç¨‹ä¸å®‰å…¨ã€‚éšä¾¿ç”¨ enumerateObjectsUsingBlockæ˜¯çº¿ç¨‹å®‰å…¨çš„123456789101112NSMutableArray *muArr = @[@0, @1, @2, @3, @4].mutableCopy;[muArr enumerateObjectsUsingBlock:^(id _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) &#123;\if ([obj integerValue] == 2) &#123;// break; ä¸èƒ½ç”¨ï¼Œå¦‚æžœæƒ³è¦åŒæ ·æ•ˆæžœç”¨*stop = YES;// *stop = YES;// continueä¸èƒ½ç”¨ï¼Œå¦‚æžœæƒ³è¦åŒæ ·æ•ˆæžœç”¨returnï¼›return ;&#125;NSLog(@&quot;obj : %@ ,idx : %lu&quot;, obj, (unsigned long)idx);&#125;];` æŽ’åº12345678910111213NSArray *array = @[@1,@2,@3,@1,@2,@5,@4];NSArray *sortArr = [array sortedArrayWithOptions:NSSortStable usingComparator:^NSComparisonResult(id _Nonnull obj1, id _Nonnull obj2) &#123;int value1 = [obj1 intValue];int value2 = [obj2 intValue];if (value1 &gt; value2) &#123;return NSOrderedDescending;&#125;else if (value1 == value2)&#123;return NSOrderedSame;&#125;else&#123;return NSOrderedAscending;&#125;&#125;]; å¯å˜æ•°ç»„ä¸èƒ½addå’Œremoveï¼Œä½†å¯ä»¥replace12345NSMutableArray *muArr = @[@1, @2, @3].mutableCopy;for (id elem in muArr) &#123;[muArr removeObject:elem];&#125;// Terminating app due to uncaught exception &apos;NSGenericException&apos;, reason: &apos;*** Collection &lt;__NSArrayM: 0x600002052310&gt; was mutated while being enumerated.&apos; å¿«é€Ÿå–å¾—æœ€å°å€¼123456789NSMutableArray* array = [NSMutableArray array];for (int i = 0; i &lt; 10; i++) &#123;CGFloat num = arc4random() % 100 + 1; [array addObject:[NSNumber numberWithFloat:num]];&#125;CGFloat maxValue = [[array valueForKeyPath:@&quot;@max.floatValue&quot;] floatValue];CGFloat minValue = [[array valueForKeyPath:@&quot;@min.floatValue&quot;] floatValue];/*minã€maxæ˜¯NSArrayçš„ç§æœ‰å±žæ€§ï¼Œé€šè¿‡.è¯­æ³•æ˜¯æ‹¿ä¸åˆ°çš„ï¼Œä¼šæŠ¥é”™çš„ã€‚ç±»ä¼¼è¿™ç§ç§æœ‰å±žæ€§è¿˜æœ‰@â€@avg.floatValueâ€ (èŽ·å–å¹³å‡å€¼)ï¼Œ@â€@count.floatValueâ€(èŽ·å–æ•°ç»„å¤§å°) @&quot;@sum.floatValue&quot;ï¼ˆæ±‚å’Œï¼‰*/]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Method Swizzling]]></title>
    <url>%2F2015%2F08%2F17%2FMethod-Swizzling%2F</url>
    <content type="text"><![CDATA[Method Swizzling å‚è€ƒï¼š https://blog.csdn.net/yiyaaixuexi/article/details/9374411 https://nshipster.com/method-swizzling/ https://stackoverflow.com/questions/5371601/how-do-i-implement-method-swizzling å»ºè®®é˜…è¯»ï¼šhttps://stackoverflow.com/questions/5339276/what-are-the-dangers-of-method-swizzling-in-objective-c æ–¹æ³• 123456789101112static void SwizzleMethod(Class cls, SEL ori, SEL rep) &#123;Method oriMethod = class_getInstanceMethod(cls, ori);Method repMethod = class_getInstanceMethod(cls, rep);BOOL flag = class_addMethod(cls, ori, method_getImplementation(repMethod), method_getTypeEncoding(repMethod));if (flag) &#123;class_replaceMethod(cls, rep, method_getImplementation(oriMethod), method_getTypeEncoding(oriMethod));&#125; else &#123;method_exchangeImplementations(oriMethod, repMethod);&#125;&#125; æµ‹è¯•ç”¨ä¾‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445@interface Person : NSObject+ (void)sleep;- (void)walk;@end@implementation Person+ (void)sleep &#123;NSLog(@&quot;ç¡è§‰&quot;);&#125;- (void)walk &#123;NSLog(@&quot;åŽ»å“ªé‡Œï¼Ÿ&quot;);&#125;@end// hook@interface Person (china)@end@implementation Person (china)+ (void)load &#123;static dispatch_once_t onceToken;dispatch_once(&amp;onceToken, ^&#123;// hookå®žä¾‹æ–¹æ³•SwizzleMethod([self class], @selector(jzk_walk), @selector(walk));// hookç±»æ–¹æ³•SwizzleMethod(object_getClass([self class]), @selector(sleep), @selector(jzk_sleep));&#125;);&#125;- (void)jzk_walk &#123;[self jzk_walk];NSLog(@&quot;å½“ç„¶æ˜¯å­¦æ ¡&quot;);&#125;+ (void)jzk_sleep &#123;NSLog(@&quot;èµ·æ¥å—¨&quot;);// æ³¨æ„hookç±»æ–¹æ³•ç›´æŽ¥ç”¨selfå°±å¥½[self jzk_sleep];&#125;@end/*èµ·æ¥å—¨ç¡è§‰åŽ»å“ªé‡Œï¼Ÿå½“ç„¶æ˜¯å­¦æ ¡*/]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Categoryå’Œå…³è”å¯¹è±¡çš„ä½¿ç”¨]]></title>
    <url>%2F2015%2F08%2F02%2FCategory%E5%92%8C%E5%85%B3%E8%81%94%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[Category&emsp;&emsp;ä¸ªäººè§‰å¾—Categoryæ‰æ˜¯OCæœ€å¥½çŽ©çš„åœ°æ–¹ï¼Œå¦‚æžœä¸ç”¨categoryæˆ‘ä»¬èƒ½æ€Žä¹ˆåŠžï¼Ÿç»§æ‰¿ï¼å¯¹æœ€å¥½çš„æ–¹å¼å°±æ˜¯ç»§æ‰¿ï¼Œä½†ç»§æ‰¿çš„é—®é¢˜æ€»æ‰€å‘¨çŸ¥ï¼šå±‚çº§å…³ç³»å¤æ‚ï¼Œä½¿ç”¨ä¸ä¾¿ï¼Œæœ€ä¸»è¦çš„è¿˜æ˜¯éº»çƒ¦ï¼categoryå°±å¾ˆçˆ½äº†ï¼ æ¦‚å¿µ&emsp;&emsp;åˆ†ç±»å°±æ˜¯å¯¹ä¸€ä¸ªç±»çš„åŠŸèƒ½è¿›è¡Œæ‰©å±•,åˆ©ç”¨OCçš„åŠ¨æ€è¿è¡Œæ—¶åˆ†é…æœºåˆ¶ï¼ŒCategoryæä¾›äº†ä¸€ç§æ¯”ç»§æ‰¿æ›´ä¸ºç®€æ´çš„æ–¹æ³•æ¥å¯¹ç±»è¿›è¡Œæ‰©å±•ï¼Œæ— éœ€åˆ›å»ºå¯¹è±¡ç±»çš„å­ç±»å°±èƒ½ä¸ºçŽ°æœ‰çš„ç±»æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œå¯ä»¥ä¸ºä»»ä½•å·²ç»å­˜åœ¨çš„ç±»æ·»åŠ æ–¹æ³•ï¼ŒåŒ…æ‹¬ç³»ç»Ÿæ¡†æž¶UIKitç­‰ ä¼˜ç‚¹ åˆ†æ•£åŠŸèƒ½ï¼Œå¯å°†ä½“ç§¯æ¯”è¾ƒå¤§çš„ç±»æ‹†åˆ†æˆå‡ ä¸ªå°ç±»ï¼Œå‡å°‘ä¾èµ–æé«˜å¤ç”¨çŽ‡ æ–¹ä¾¿ä»£ç çš„ç®¡ç†ã€‚å°†åŒç±»åŠŸèƒ½æ”¾åˆ°åŒä¸€categoryé‡Œé¢æ˜¯ä¸€ä¸ªéžå¸¸ä¸é”™çš„é€‰æ‹©ï¼ŒUIKitä¹Ÿæ˜¯è¿™ä¹ˆåšçš„ å‡å°‘ç»§æ‰¿ï¼Œç¼–ç æ ¸å¿ƒå°±æ˜¯èƒ½ç”¨ç»„åˆç”¨ç»„åˆï¼Œå®žåœ¨æ²¡åŠžæ³•å†ç”¨ç»§æ‰¿ å£°æ˜Žç§æœ‰æ–¹æ³• ç¼ºç‚¹ åŒåæ–¹æ³•æœ‰å¯èƒ½è¢«è¦†ç›–æŽ‰ï¼å¤„ç†åŠžæ³•æ˜¯å¢žåŠ å‰ç¼€ï¼Œæ³¨æ„OCé‡Œä¸»è¦é€šè¿‡å‰ç¼€æ¥ä»£æ›¿åŒ…ï¼Œè€Œä¸”appleå£°ç§°æ‹¥æœ‰ä»»ä½•ä¸¤ä¸ªå­—æ¯çš„ä½¿ç”¨æƒï¼Œå¼€å‘è€…æœ€å¥½ä½¿ç”¨ä¸‰ä¸ªæˆ–ä¸‰ä¸ªä»¥ä¸Šå­—æ¯ä½œä¸ºå‰ç¼€ ç”±äºŽåŠŸèƒ½åˆ†æ•£ï¼Œéžå¸¸è€ƒéªŒå‘½å å¤šäººåä½œæ—¶ï¼Œæœ€å¥½å°†åŒä¸€ä¸ªç±»çš„categoryæ”¾åˆ°åŒä¸€æ–‡ä»¶å¤¹ï¼Œå¢žåŠ å†²çªå¯èƒ½æ€§ &emsp;&emsp;categoryå’Œextensionçš„åŒºåˆ« extensionå›ºå®šä¸º ClassName()ï¼Œå¤–éƒ¨å¼•ç”¨ä¸åˆ° ï¼› categoryéœ€è¦èµ·ä¸ªå¥½åå­—ï¼Œå¤–éƒ¨èƒ½å¼•ç”¨åˆ° extension èƒ½ç›´æŽ¥å¢žåŠ æˆå‘˜å˜é‡ï¼Œ categoryéœ€è¦å€ŸåŠ©äºŽå…³è”å¯¹è±¡ extension åªèƒ½åœ¨.mæ–‡ä»¶ä¸­ï¼Œç”¨äºŽéšè—ç›¸å…³ä¿¡æ¯ï¼›categoryå¯å•ç‹¬ä¸€ä¸ªæ–‡ä»¶ å®žçŽ°&emsp;&emsp;æ–°å»ºcategory: new file -&gt; Object-C File -&gt; File Type -&gt; Category 1. å®žä¾‹ï¼šç»™NSMutableArrayæ·»åŠ å®‰å…¨æ–¹æ³• .h æ–‡ä»¶ 12345678@interface NSMutableArray (Safely)- (void)addObjectSafely:(id)anObject;- (void)insertObjectSafely:(id)anObject atIndex:(NSUInteger)index;- (void)removeObjectAtIndexSafely:(NSUInteger)index;- (void)replaceObjectAtIndexSafely:(NSUInteger)index withObject:(id)anObject;@end .mæ–‡ä»¶ 12345678910111213141516171819202122232425@implementation NSMutableArray (Safely)- (void)addObjectSafely:(id)anObject &#123;if (nil != anObject) &#123;[self addObject:anObject];&#125;&#125;- (void)insertObjectSafely:(id)anObject atIndex:(NSUInteger)index &#123;if (nil != anObject &amp;&amp; index &lt; [self count]) &#123;[self insertObject:anObject atIndex:index];&#125;&#125;- (void)removeObjectAtIndexSafely:(NSUInteger)index &#123;if (index &lt; [self count]) &#123;[self removeObjectAtIndex:index];&#125;&#125;- (void)replaceObjectAtIndexSafely:(NSUInteger)index withObject:(id)anObject &#123;if (nil != anObject &amp;&amp; index &lt; [self count]) &#123;[self replaceObjectAtIndex:index withObject:anObject];&#125;&#125;@end 2. å£°æ˜Žç§æœ‰æ–¹æ³• åŽŸæ–‡ä»¶ MyClass 12345678910111213// .hæ–‡ä»¶@interface MyClass : NSObject// æ³¨æ„åŽŸæ¥ç±»ä¸­æ²¡æœ‰æš´éœ²somePrivateMethodæ–¹æ³•@end// .mæ–‡ä»¶@implementation MyClass- (void)somePrivateMethod &#123;NSLog(@&quot;å°±æ˜¯ä¸æƒ³è®©ä½ ç”¨ï¼&quot;);&#125;@end categoryæš´éœ²ç§æœ‰æ–¹æ³• 12345678910// .hæ–‡ä»¶@interface MyClass (Public)// æš´éœ²somePrivateMethodæ–¹æ³•ï¼Œæ³¨æ„ä¸è¦åœ¨categoryçš„mæ–‡ä»¶å®žçŽ°ã€‚å®žçŽ°å°±è¦†ç›–äº†- (void)somePrivateMethod;@end// .mæ–‡ä»¶@implementation MyClass (Public)@end ä½¿ç”¨ç§æœ‰æ–¹æ³• 12345678910111213// æ³¨æ„å£°æ˜Žç§æœ‰æ–¹æ³•æ—¶å¿…é¡»ä¸¤ä¸ªéƒ½è¦å¼•å…¥#import &quot;MyClass.h&quot;#import &quot;MyClass+Public.h&quot;@implementation ViewController- (void)viewDidLoad &#123;[super viewDidLoad];MyClass *my = [[MyClass alloc] init];[my somePrivateMethod];&#125;@end å…³è”å¯¹è±¡&emsp;&emsp;ä¸ºä»€ä¹ˆæŠŠå…³è”å¯¹è±¡æ”¾åˆ°è¿™é‡Œå†™ï¼Ÿå› ä¸ºå…³è”å¯¹è±¡ä¸€èˆ¬éƒ½åœ¨categoryé‡Œï¼›æ›´å› ä¸ºcategoryå¯ä»¥ç»™åŽŸç±»å¢žåŠ æ–¹æ³•ï¼Œå…³è”å¯¹è±¡æ­£å¥½å¯ä»¥ç»™åŽŸæ¥å¢žåŠ å®žä¾‹å˜é‡ï¼Œå‚è€ƒï¼šhttps://stackoverflow.com/questions/8733104/objective-c-property-instance-variable-in-category å®žä¾‹ .hæ–‡ä»¶ 12345@interface MyClass (Public)@property (copy, nonatomic) NSString *someProperty;@end .mæ–‡ä»¶ 1234567891011121314151617181920212223242526272829// æ³¨æ„å¼•å…¥runtime#import &lt;objc/runtime.h&gt;static NSString *kAssociatedObjectKey = @&quot;kAssociatedObjectKey&quot;;@implementation MyClass (Public)// setterå’Œgetterå¿…é¡»éƒ½è¦å†™// setteræ–¹æ³•- (void)setSomeProperty:(NSString*)propertyValue &#123;/*OBJC_ASSOCIATION_ASSIGN //@property(assign)ã€‚OBJC_ASSOCIATION_RETAIN_NONATOMIC //@property(strong, nonatomic)ã€‚OBJC_ASSOCIATION_COPY_NONATOMIC //@property(copy, nonatomic)ã€‚OBJC_ASSOCIATION_RETAIN //@property(strong,atomic)ã€‚OBJC_ASSOCIATION_COPY //@property(copy, atomic)ã€‚*/// æ³¨æ„propertyValueåªèƒ½ç»™ç±»ï¼Œintã€NSIntergerã€Boolæ—¶éœ€è¦è½¬æˆNSNumberobjc_setAssociatedObject(self, &amp;kAssociatedObjectKey, propertyValue, OBJC_ASSOCIATION_RETAIN_NONATOMIC);&#125;// getter- (NSString *)someProperty &#123;// intã€NSIntergerã€Boolæ—¶éœ€è¦å°†NSNumberè½¬æˆå¯¹åº”ç±»åž‹NSString *value = objc_getAssociatedObject(self, &amp;kAssociatedObjectKey);return value;&#125;@end]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å°å¼ºå‡èŒè®°]]></title>
    <url>%2F2015%2F07%2F31%2F%E5%B0%8F%E5%BC%BA%E5%8D%87%E8%81%8C%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[æˆåŠŸçš„å…³é”®åœ¨äºŽæž„å»ºè‡ªå·±çš„æ ¸å¿ƒ æˆç†Ÿæ„å‘³ç€ä»€ä¹ˆï¼Ÿæ„å‘³ç€ç¡®å®šçš„ä»·å€¼è§‚ã€é¡ºç•…çš„æ—¶é—´ç®¡ç†ã€ä»¥åŠå±žäºŽè‡ªå·±çš„å¤„ä¸–å“²å­¦ 1ã€å¯»æ‰¾ç§å­ ä½ çœŸçš„å¾ˆå¿™å—ï¼Ÿè®°å½•æ—¶é—´æ—¥å¿—ã€åˆ†ç±»æ•´ç†ã€åŽŸå› åˆ†æžã€æ€»ç»“ä¼˜åŒ–ï¼ˆå·¥ä½œã€å­¦ä¹ ã€å¨±ä¹åŒæ ·é‡è¦,æé«˜æ•ˆçŽ‡è€Œä¸æ˜¯åšè‹¦è¡Œåƒ§ï¼‰ æ—¶é—´é»‘æ´žï¼šè‡ªå·±éƒ½ä¸çŸ¥é“è‡ªå·±çš„æ—¶é—´èŠ±åˆ°å“ªåŽ»äº†ï¼Œä¹Ÿå°±æ˜¯æˆ‘ç»å¸¸å†™çš„nothingï¼ŒåŽŸå› æ˜¯ï¼šå¤§è„‘ä¸å–„äºŽè®°å¿†ï¼Œè€Œå–„äºŽåˆ›é€ æ€§æ€ç»´ï¼Œåªæœ‰å¯¹å¤§è„‘å½¢æˆå¼ºçƒˆåˆºæ¿€çš„äº‹æƒ…æ‰ä¼šè¢«å­˜å‚¨ä¸‹æ¥ã€‚å› æ­¤é‚£äº›æžå…·è§„å¾‹æ€§ã€æ¯”è¾ƒæž¯ç‡¥ã€æˆ–è€…ç›®çš„æ€§ä¸å¼ºã€æ²¡æœ‰ä¸»åŠ¨æ€§çš„äº‹æƒ…ï¼Œå°†å¾ˆå®¹æ˜“è¢«é—å¿˜ã€‚è§£å†³æ–¹æ¡ˆï¼šæ¯ä¸ªä¸€ä¸ªå°æ—¶å†™å‡ºä¸‹ä¸€ä¸ªå°æ—¶è®¡åˆ’è¦åšçš„äº‹æƒ…ï¼Œä¸€ä¸ªå°æ—¶ç»“æŸä¹‹åŽè®°å½•ä¸‹ç»“æžœï¼ŒåšæŒä¸€æ•´å¤©ï¼æ…¢æ…¢æ¥ è¡¡é‡ä¸€ä»¶äº‹æ˜¯ä¸æ˜¯æœ‰æ„ä¹‰ï¼Œä¸»è¦æ˜¯çœ‹æˆ‘ä»¬æŠ•å…¥æ—¶é—´åŽæ˜¯å¦æœ‰é¢„æœŸçš„äº§å‡ºï¼è¾¾åˆ°äº†é¢„æœŸå°±æ˜¯æœ‰æ„ä¹‰çš„ï¼Œæ²¡è¾¾åˆ°è‡ªç„¶æ˜¯æ²¡æ„ä¹‰çš„ï¼æœ‰ç‚¹æ„æ€ï¼Œä¸¾ä¾‹ï¼šæ¯”èµ·æ¯æ¬¡çŽ©å®Œæ¸¸æˆå°±åŽæ‚”ï¼Œæ›´åº”è¯¥æ¯”è¾ƒçš„åº”è¯¥æ˜¯è®¡åˆ’åšä»€ä¹ˆï¼Œç»“æžœæ˜¯ä»€ä¹ˆï¼Œåº”ä¸åº”è¯¥åŽæ‚”ï¼Ÿ æ³¨æ„åŠ›è¢«æ‰“æ–­ä¹‹åŽï¼Œå¦‚æžœæƒ³è¦é‡æ–°é›†ä¸­æ³¨æ„åŠ›è‡³å°‘éœ€è¦15åˆ†é’Ÿï¼›è€Œå¦‚æžœæ€è·¯è¢«æ‰“æ–­ï¼Œé‚£å¯èƒ½æ°¸è¿œéƒ½æƒ³ä¸åˆ°äº†ã€‚ã€‚ã€‚æ‰€ä»¥è¦å‹‡äºŽâ€œæ‹’ç»â€ ä»»åŠ¡å¤„ç†ï¼š Aã€å°†æ‰€æœ‰çš„ä»»åŠ¡æ”¾å…¥å·¥ä½œç¯®ï¼Œä¸è®ºæ˜¯è°ä»€ä¹ˆæ—¶å€™äº¤ç»™æˆ‘çš„ä»»åŠ¡ï¼Œç»Ÿç»Ÿæ”¾è¿›å·¥ä½œç¯®é‡Œï¼› Bã€å°†å¯ä»¥ç½®ä¹‹ä¸ç†çš„ä»»åŠ¡æ¸…é™¤æŽ‰ï¼Œå°†å¿…é¡»åœ¨æŸå¤©å¤„ç†æˆ–è€…å¿…é¡»è½¬äº¤åˆ«äººå¤„ç†çš„ä»»åŠ¡æ‹¿å‡ºæ¥ï¼Œå°†é‚£äº›å¯ä»¥åœ¨ä¸¤åˆ†é’Ÿä¹‹å†…å®Œæˆçš„ä»»åŠ¡ç«‹å³å®Œæˆï¼› Cï¼Œå°†éœ€è¦åœ¨ç‰¹å®šæ—¥æœŸå¤„ç†çš„äº‹æƒ…å†™è¿›æ—¥ç¨‹è¡¨ï¼Œå°†éœ€è¦åˆ«äººå¤„ç†çš„äº‹æƒ…ç«‹å³è½¬äº¤å¹¶ä¸”è®¾å®šåˆ°æœŸæé†’ï¼Œå°†éœ€è¦çŽ°åœ¨å¤„ç†çš„äº‹æƒ…æ‘†åœ¨åŠžå…¬æ¡Œä¸Šï¼› Dï¼Œåœ¨è‡ªå·±æœ€é«˜æ•ˆçš„æ—¶é—´æ®µï¼Œåšæœ€é‡è¦çš„äº‹æƒ…ï¼Œå…¶ä»–äº‹æƒ…ä¹Ÿè¦åšåˆç†çš„å®‰æŽ’ æé«˜å·¥ä½œæ•ˆçŽ‡çš„æ–¹æ³•ï¼š Aã€æ¯å¤©æ—©æ™¨åˆ«ä¸€ä¸Šç­å°±æ€¥ç€æŠ•å…¥å·¥ä½œï¼Œå…ˆçœ‹çœ‹ä»Šå¤©çš„å·¥ä½œé‡ç‚¹æ˜¯ä»€ä¹ˆï¼Œå“ªäº›äº‹æƒ…æ˜¯é‡è¦å¹¶ä¸”ç´§è¿«çš„ï¼Œå°†è¿™äº›äº‹æƒ…å®‰æŽ’åœ¨ä½ çš„é«˜æ•ˆæ—¶é—´æ®µå®Œæˆï¼› Bã€å›žé¡¾ä½ éœ€è¦å‘å¸ƒæˆ–è€…å‘ˆé€ä¸Šå¸çš„èµ„æ–™ï¼Œä¸å¯èƒ½ç¬¬ä¸€æ¬¡å°±åšçš„å°½å–„å°½ç¾Žï¼Œä¸è¦åå•¬æ—¶é—´ï¼ Cã€çœ‹æ–°é—»ç”¨RSSï¼Œä¹Ÿå¯ç”¨å¹¿å‘Šæ‹¦æˆªå™¨ï¼Œå°†æ³¨æ„åŠ›é›†ä¸­åœ¨æ–°é—»ä¸Šï¼Œè€Œä¸æ˜¯é“ºå¤©ç›–åœ°çš„å¹¿å‘Šè¶…é“¾æŽ¥ï¼› Dã€å‡å°‘æ£€æŸ¥é‚®ä»¶çš„æ¬¡æ•°ï¼Œæ¯å¤©ä¸¤æ¬¡è¶³å¤Ÿäº†ï¼Œå¹¶ä¸”åº”è¯¥æ³¨æ„ï¼Œå¾€å¾€åœ¨ä¸Šç½‘èŠå¤©æˆ–è€…æ— æ‰€äº‹äº‹çš„æ—¶å€™å°±ä¼šâ€œä¹ æƒ¯æ€§â€çš„æ£€æŸ¥é‚®ä»¶ï¼Œå› æ­¤åº”è¯¥æ‰¾äº›äº‹æƒ…æ¥åˆ†æ•£è‡ªå·±çš„æ³¨æ„åŠ›ï¼› Eã€èƒ½ä¼‘æ¯çš„æ—¶å€™å°½é‡ä¼‘æ¯ï¼Œä¿æŒè‡ªå·±çš„ç²¾åŠ›ï¼Œæ¸¸æˆ!=ä¼‘æ¯ã€åšåˆ«çš„!=ä¼‘æ¯ã€çœŸæ­£çš„ä¼‘æ¯å°±æ˜¯ï¼šå¤§è„‘æ”¾ç©ºï¼Œå†¥æƒ³æˆ–ç¡çœ  ä»·å€¼è§‚æ²¡æœ‰å¯¹é”™ï¼Œä¹Ÿä¸æ˜¯è®°å¿†ï¼Œæ›´ä¸æ˜¯ä¸€æˆä¸å˜çš„ï¼Œè€Œæ˜¯è¦ä¸æ–­åœ°ä»Žç»éªŒä¸­åŽ»æç‚¼ï¼å¯ä»¥å‘€å€ŸåŠ©å¿ƒç†å­¦çš„é—®ç­”æµ‹è¯•å·¥å…·ï¼ï¼ï¼å†™åœ¨å¡ç‰‡ä¸Šï¼Œæ”¾åˆ°è§¦ç›®å¯è§çš„åœ°æ–¹ï¼Œä¸æ–­åœ°å·©å›ºå’Œä¿®æ­£ï¼Œè¿™å¾ˆé‡è¦ï¼ 2ã€è®©ç§å­å‘èŠ½ å››è±¡é™ï¼šå¾ˆå¤šäººç»å¸¸ä¼šè¢«å‡è±¡è¿·æƒ‘ï¼Œè®¤ä¸ºâ€œç´§æ€¥â€çš„å°±æ˜¯â€œé‡è¦â€çš„ï¼Œå…¶å®žâ€œç´§æ€¥â€å’Œâ€œé‡è¦â€ä¸€ç‚¹å…³ç³»éƒ½æ²¡æœ‰ï¼ é‡è¦ä¸”ç´§æ€¥ã€‚å¿…é¡»é©¬ä¸Šå¤„ç†ï¼Œä½†çœŸçš„æœ‰è¿™ä¹ˆå¤šé‡è¦ä¸”ç´§æ€¥çš„äº‹æƒ…å—ï¼Ÿ é‡è¦ä½†ä¸ç´§æ€¥ã€‚åˆ†è§£ä»»åŠ¡ï¼Œåˆ¶å®šè®¡åˆ’ï¼ŒæŒ‰éƒ¨å°±ç­ï¼Œç»ä¸æ‹–å»¶ï¼Œæ€è€ƒæ€Žæ ·é¿å…å®ƒè¿›å…¥ç¬¬ä¸€è±¡é™ï¼Ÿ ä¸é‡è¦ä½†ç´§æ€¥ã€‚èƒ½ä¸åšå°±ä¸åšï¼Œæˆ–äº¤ç»™åˆ«äººï¼Œæ€è€ƒå¦‚æžœå°½é‡å‡å°‘ç¬¬ä¸‰è±¡é™çš„äº‹åŠ¡ï¼Ÿ ä¸é‡è¦ä¸”ä¸ç´§æ€¥ã€‚å°½é‡åˆ«åšï¼Œåº”è¯¥æ€è€ƒæˆ‘ä»¬å·¥ä½œä¸­æ˜¯å¦æœ‰å¿…è¦è¿›å…¥è¿™ä¸ªè±¡é™ï¼Ÿ æ ‡ç­¾åˆ’åˆ†äº‹åŠ¡ï¼šAï¼Œå…ˆâ€œè½»é‡â€ï¼Œç»™æ‰€æœ‰ä»»åŠ¡ä»¥èŒä¸šä»·å€¼è§‚ä¸ºæ ‡å‡†æ ‡å‡ºâ€œé‡è¦â€æˆ–â€œä¸é‡è¦â€ï¼›Bï¼Œå†â€œç¼“æ€¥â€ï¼Œç»™æ‰€æœ‰ä»»åŠ¡ä»¥æˆªæ­¢æ—¥æœŸæ ‡å‡ºâ€œç´§æ€¥â€æˆ–â€œä¸ç´§æ€¥â€ï¼›Cï¼Œæœ€åŽæŒ‰ç…§è‡ªå·±çš„æ„æ„¿ç»™æ‰€æœ‰ä»»åŠ¡æ ‡å‡ºâ€œé«˜â€â€œä¸­â€â€œä½Žâ€ä¸‰ç§ä¼˜å…ˆçº§ èµ°å‡ºç¬¬ä¸‰è±¡é™ï¼ˆä¸é‡è¦ä¸”ç´§æ€¥ï¼‰ï¼šå…¶å®žå°±æ˜¯æŽ¨è„±ï¼Œå“ªæ€•æš‚æ—¶çš„æŽ¨è„±ï¼å½“ç„¶ï¼ŒæŽ¨è„±ä¹Ÿæ˜¯è®²ç©¶æŠ€å·§çš„ ç¬¬äºŒè±¡é™å·¥ä½œæ³•ï¼ˆé‡è¦ä½†ä¸ç´§æ€¥ï¼‰ï¼šåº”è¯¥å°†è‡ªå·±çš„ä¸»è¦ç²¾åŠ›é›†ä¸­åœ¨è§£å†³é‡è¦ä½†ä¸ç´§æ€¥çš„äº‹åŠ¡ï¼Œå¹³æ—¶åˆ¶å®šçš„å·¥ä½œè®¡åˆ’å’Œå·¥ä½œç›®æ ‡éƒ½æ˜¯ç›¸å¯¹äºŽç¬¬äºŒè±¡é™æ¥è¯´çš„ï¼ è¿›è¡Œç›®æ ‡æè¿°å’Œä»»åŠ¡åˆ†è§£çš„å¥½å¤„ï¼šé¡¹ç›®åˆ†è§£åšç»†ï¼Œæœ‰è®¡åˆ’æ›´å…¨é¢ï¼ŒçŸ¥é“çŽ°åœ¨åœ¨å“ªï¼Œé€æ­¥å‡è½»åŽ‹åŠ›å’Œæå‡è‡ªä¿¡ï¼ŒåŠæ—¶å‘çŽ°é—®é¢˜å¹¶å¤„ç†ä¼˜åŒ– æ—¶é—´ç®¡ç†ä¸‰å¤§æ€æ‰‹ï¼šæ‹–å»¶ï¼ŒçŠ¹è±«ä¸å†³ï¼Œç›®æ ‡ä¸æ˜Žç¡® æ—¶é—´ç®¡ç†å¹¶ä¸æ˜¯è¿½æ±‚åœ¨1ä¸ªå°æ—¶å†…èƒ½åš3ä»¶æˆ–5ä»¶äº‹æƒ…ï¼Œæ—¶é—´ç®¡ç†çš„ç›®çš„åº”è¯¥æ˜¯å……åˆ†åˆ©ç”¨æ—¶é—´æ¥åˆ›é€ æœ€å¤§çš„ä»·å€¼ è¦æœ‰è€å¿ƒï¼Œæ…¢æ…¢æ¥ï¼ æ‰¾åˆ°æœ€é‡è¦çš„äº‹ï¼Œé›†ä¸­ç²¾åŠ›ï¼Œæ‹¿ä¸‹å®ƒï¼ ä¸‹ä¸€æ­¥è¡ŒåŠ¨æ˜¯ä»€ä¹ˆï¼Ÿæ€Žä¹ˆåšï¼Ÿæ‰¾å‡ºä¸‹ä¸€æ­¥è¡ŒåŠ¨çš„ç§˜è¯€ï¼šAï¼ŒåŠ¨è¯å¼€å¤´ï¼›Bï¼Œå†…å®¹æ¸…æ™°ï¼›Cï¼Œæè¿°ç»“æžœï¼›Dï¼Œè®¾å®šå¼€å§‹æ—¶é—´ã€å‘¨æœŸã€æœ€åŽæœŸé™ï¼›ä¾‹å¦‚ï¼šæ—©ä¸Š9ç‚¹å¸¦ä¸Šåšå¥½çš„è®¡åˆ’ä¹¦åœ¨ä¼šè®®å®¤å¼€å§‹è®¨è®ºè¥é”€è®¡åˆ’ï¼Œ2å°æ—¶å†…è¯´æœä¸Žä¼šè€…è®¤åŒæˆ‘çš„è¥é”€æ–¹æ¡ˆï¼ å­¦ä¹ ä½¿ç”¨æµç¨‹å›¾ä¹‹ç±»çš„å·¥å…·ï¼Œå…ˆæƒ³å¥½æ€Žä¹ˆåšï¼Œåšçš„æ—¶å€™å°±å¾ˆç®€å•äº†ï¼ä¸€å¼€å§‹ä¸å¦¨åšå®Œä¸€æ­¥ï¼Œå†æƒ³ä¸‹ä¸€æ­¥æ˜¯ä»€ä¹ˆï¼Œæ€Žä¹ˆåšï¼›ç­‰ä»¥åŽç†Ÿç»ƒäº†å†æ•´ä½“åŽ»æƒ³æ•´ä¸ªçš„æµç¨‹æ­¥éª¤æ˜¯ä»€ä¹ˆï¼ è¡£æŸœæ•´ç†æ³• æ”¶é›†ä¸€åˆ‡æˆ‘ä»¬æ³¨æ„çš„äº‹æƒ…ï¼šé›†ä¸­å¤„ç†æŸä¸€ä»¶äº‹çš„æ—¶å€™ï¼Œæœ‰å…¶ä»–çš„äº‹å°±è®°ä¸Šï¼Œå›žå¤´å†å¤„ç†ï¼æ”¶é›†å·¥å…·åº”è¯¥è¶Šå°‘è¶Šå¥½ï¼Œéšæ‰‹èƒ½æ‹¿åˆ°ï¼Œè¿˜æœ‰å®šæœŸæ¸…ç†æ”¶é›†ç¯® åŠ å·¥å¤„ç†åŽï¼Œç¡®å®šå®ƒä»¬çš„å®žè´¨ä»¥åŠè§£å†³æ–¹æ³• å¤„ç†æ”¶é›†ç¯®åŽŸåˆ™ï¼šAï¼Œä»Žæœ€ä¸Šé¢ä¸€é¡¹å¼€å§‹å¤„ç†ï¼›Bï¼Œä¸€æ¬¡åªå¤„ç†ä¸€ä»¶äº‹ï¼›Cï¼Œæ°¸è¿œä¸è¦å†æ”¾å›žæ”¶é›†ç¯®ï¼› ä¸å¯æ‰§è¡Œäº‹åŠ¡ï¼šAï¼Œåžƒåœ¾ -&gt; ä¸¢å¼ƒï¼› Bï¼Œå°†æ¥æŸæ—¶æˆ–ä¹Ÿè®¸çš„äº‹ ï¼›Cï¼Œå‚è€ƒèµ„æ–™ -&gt; åˆ†ç±»å½’æ¡£ å¯æ‰§è¡Œäº‹åŠ¡ï¼š2åˆ†é’Ÿèƒ½æžå®šçš„ -&gt; ç«‹å³åŽ»åšï¼›Bï¼Œéœ€è¦å¤šä¸ªæ­¥éª¤æžå®šçš„é¡¹ç›®ï¼›Cï¼ŒæŒ‡æ´¾ç»™åˆ«äººï¼›Dï¼Œç‰¹å®šæ—¶é—´åšçš„äº‹ -&gt; å†™å…¥æ—¥ç¨‹è¡¨ï¼›Eï¼Œæ™®é€šå¾…åŠžäº‹é¡¹ æŠŠå®ƒä»¬åˆ—ä¸ºæˆ‘ä»¬çš„è¡ŒåŠ¨é€‰æ‹©æ–¹æ¡ˆ è¡ŒåŠ¨ å®šæœŸç»„ç»‡æ•´ç†å¾—å‡ºç»“è®º 3ã€ç”Ÿé•¿å‡ºä¸»å¹²å’Œæžä¸« æˆ‘ä»¬ä¸ä½†è¦è®¾å®šç›®æ ‡ï¼Œè€Œä¸”è¦å¼ºæœ‰åŠ›åœ°æ‰§è¡Œå®ƒï¼Œä¸€èˆ¬äººè¾¾ä¸æˆè‡ªå·±çš„ç›®æ ‡åŽŸå› ï¼šAï¼Œè®¾å®šäº†ä¸å¯è¾¾æˆçš„ç›®æ ‡ï¼›Bï¼Œæ²¡æœ‰å°†ç›®æ ‡åˆ†è§£ä¸ºè®¡åˆ’ï¼›Cï¼Œæ”¾ä»»å¶å°”çš„å¤±è´¥ï¼›Dï¼Œæ²¡æœ‰å†™ä¸‹æ¥ï¼›Eï¼Œæ²¡æœ‰åŠæ—¶ä¿®æ­£ç›®æ ‡ï¼›Fï¼Œæ²¡æœ‰åšæŒè¡ŒåŠ¨ å®žçŽ°ç›®æ ‡ç¬¬ä¸€æ­¥ï¼Œæ­£ç¡®æè¿°ç›®æ ‡ï¼Œæ˜¯å¦ç¬¦åˆsmartåŽŸåˆ™ï¼Ÿ å®žçŽ°ç›®æ ‡çš„å…³é”®æ˜¯å°†ç›®æ ‡è½¬å˜æˆè®¡åˆ’ï¼šAï¼Œå†™å‡ºä½ çš„ç›®æ ‡ï¼›Bï¼Œä¸ºä»€ä¹ˆè¦è¾¾æˆæ­¤ç›®æ ‡ï¼Œæœ€ä¸»è¦çš„ç†ç”±å†™åœ¨æœ€å‰é¢ï¼›Cï¼Œæˆ‘ä¸ºä»€ä¹ˆå¯ä»¥è¾¾æˆæ­¤ç›®æ ‡ï¼Œé¦–å…ˆè¦è¯´æœè‡ªå·±ä¸€å®šå¯ä»¥è¾¾æˆè¿™ä¸ªç›®æ ‡ï¼›Dï¼Œå“ªäº›ä¸ªäººã€å›¢é˜Ÿã€ç»„ç»‡å¯¹æˆ‘è¾¾æˆè¿™ä¸ªç›®æ ‡æœ‰å¸®åŠ©ï¼Ÿæ²¡æœ‰ä¸€ä¸ªäººçš„æˆåŠŸæ˜¯é è‡ªå·±ä¸€ä¸ªäººå®Œæˆçš„ï¼›Eï¼Œè¿™ä¸ªç›®æ ‡è¦åœ¨å¤šé•¿æ—¶é—´å†…å®Œæˆï¼Ÿè¿‡çŸ­æˆ–è¿‡é•¿éƒ½æ˜¯æ²¡æ„ä¹‰çš„ æé«˜æ‰§è¡ŒåŠ›ï¼šAï¼Œæ‰¾åˆ°æœ€å¤§çš„éšœç¢ï¼Œç¬¬ä¸€ä¸ªå°±åŽ»è§£é™¤è¿™ä¸ªéšœç¢ï¼›Bï¼Œå†™ä¸‹æ¥ï¼ä¸€å®šè¦å†™ä¸‹æ¥ï¼Cï¼Œæ‹’ç»ç¬¬ä¸€æ¬¡å¤±è´¥ï¼Œé¢å¯¹å¤±è´¥æˆ‘ä»¬è¦ï¼Œé‡è§†å¤±è´¥åˆ†æžåŽŸå› å’Œä»¥å˜åŒ–åº”å¯¹å˜åŒ– ç›®æ ‡åº”è¯¥æ˜¯æ¡é“é“¾è€Œä¸æ˜¯é“ç ‚ï¼Œå¯ä»¥æŒ‰å…­ä¸ªé«˜åº¦åŽŸåˆ™ï¼ˆåŽŸåˆ™ &gt; æ„¿æ™¯ &gt; ç›®æ ‡ &gt; è´£ä»»èŒƒå›´ &gt; ä»»åŠ¡ &gt; ä¸‹ä¸€æ­¥è¡ŒåŠ¨ï¼‰è®¾å®šç›®æ ‡ ä¸è¦æ¯å¤©éƒ½åšç™½æ—¥æ¢¦ï¼åªæœ‰ä»Žä¸€å—å—ç –å¤´å¼€å§‹ï¼Œä¸€æ­¥æ­¥çš„æ‰èƒ½è¾¾æˆç›®æ ‡ï¼›]]></content>
      <categories>
        <category>è¯»ä¹¦</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[UIScrollViewè½®æ’­å›¾]]></title>
    <url>%2F2015%2F07%2F01%2FUIScrollView%E8%BD%AE%E6%92%AD%E5%9B%BE%2F</url>
    <content type="text"><![CDATA[åŽŸç†: ä½¿ç”¨å·¦ä¸­å³ä¸‰ä¸ªimageviewï¼Œæ¯æ¬¡å¾ªçŽ¯å®Œå°±å¼ºåˆ¶æ»šåˆ°ä¸­é—´ImageViewï¼ŒåŒæ—¶åˆ·æ–°å·¦ä¸­å³ä¸‰ä¸ªimageviewï¼›ä»£ç å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157#import &quot;ZKAutoScrollPicture.h&quot;@interface ZKAutoScrollPicture ()&lt;UIScrollViewDelegate&gt;@property (nonatomic, retain) UIScrollView *scrollView;@property (nonatomic, retain) UIImageView *leftImageView;@property (nonatomic, retain) UIImageView *centerImageView;@property (nonatomic, retain) UIImageView *rightImageView;@property (nonatomic, retain) UIPageControl *pageControl;@property (nonatomic, copy) NSArray&lt;UIImage *&gt; *images;@property (nonatomic, assign) NSUInteger currentImageIndex;//å½“å‰å›¾ç‰‡ç´¢å¼•@property (nonatomic, retain) NSTimer *timer;@property (nonatomic, assign) NSTimeInterval timeInterval;@end@implementation ZKAutoScrollPicture- (instancetype)initWithFrame:(CGRect)frametimeInterval:(NSTimeInterval)intervalimages:(NSArray&lt;UIImage *&gt; *)images&#123;self = [super initWithFrame:frame];if (self) &#123;self.images = images;self.timeInterval = interval;[self startTimer];[self setupWithFrame:frame];&#125;return self;&#125;- (void)setImages:(NSArray&lt;UIImage *&gt; *)images &#123;_images = images;if (images.count == 0) &#123;[self stopTimer];&#125;&#125;- (void)setTimeInterval:(NSTimeInterval)timeInterval &#123;if (timeInterval &lt;= 0) &#123;[self stopTimer];_timeInterval = 0;&#125;else &#123;_timeInterval = timeInterval;&#125;&#125;- (void)setupWithFrame:(CGRect)frame &#123;CGFloat imageWidth = frame.size.width;CGFloat imageHeight = frame.size.height;_currentImageIndex = 0;// pageControl_pageControl=[[UIPageControl alloc]init];CGSize size= [_pageControl sizeForNumberOfPages:_images.count];_pageControl.bounds=CGRectMake(0, 0, size.width, size.height);_pageControl.center=CGPointMake(imageWidth / 2, imageHeight - 10);_pageControl.pageIndicatorTintColor=[UIColor blackColor];_pageControl.currentPageIndicatorTintColor=[UIColor redColor];_pageControl.numberOfPages = _images.count;// åˆå§‹åŒ–å·¦ä¸­å³ä¸‰ä¸ªimageview_leftImageView=[[UIImageView alloc]initWithFrame:CGRectMake(0, 0, imageWidth, imageHeight)];_centerImageView=[[UIImageView alloc]initWithFrame:CGRectMake(imageWidth, 0, imageWidth, imageHeight)];_rightImageView=[[UIImageView alloc]initWithFrame:CGRectMake(2*imageWidth, 0, imageWidth, imageHeight)];// scrollview_scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, imageWidth, imageHeight)];_scrollView.delegate = self;_scrollView.showsVerticalScrollIndicator = NO;_scrollView.showsHorizontalScrollIndicator = NO;_scrollView.pagingEnabled = YES;//[_scrollView addSubview:_leftImageView];[_scrollView addSubview:_centerImageView];[_scrollView addSubview:_rightImageView];_scrollView.contentSize = CGSizeMake(3*imageWidth, imageHeight);[self addSubview:_scrollView];[self addSubview:_pageControl];// è®¾ç½®é»˜è®¤æ˜¾ç¤ºä¸­é—´çš„[self resetScrollViewContentOffset];[self refreshImageByOffsetX:imageWidth];&#125;-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView&#123;//é‡æ–°åŠ è½½å›¾ç‰‡[self refreshImageByOffsetX:scrollView.contentOffset.x];[self resetScrollViewContentOffset];NSLog(@&quot;scrollViewDidEndDecelerating offsetX:%f&quot;,_scrollView.contentOffset.x);&#125;- (void)resetScrollViewContentOffset &#123;//æ°¸è¿œç§»åŠ¨åˆ°centerImageView[_scrollView setContentOffset:CGPointMake(self.frame.size.width, 0) animated:NO];&#125;#pragma mark é‡æ–°åŠ è½½å›¾ç‰‡-(void)refreshImageByOffsetX:(CGFloat)offsetX &#123;CGFloat width = self.frame.size.width;NSUInteger totalCount = _images.count;if (offsetX &gt; width) &#123; //å‘å³æ»‘åŠ¨_currentImageIndex = (_currentImageIndex + 1) % totalCount;&#125;else if(offsetX &lt; width)&#123; //å‘å·¦æ»‘åŠ¨_currentImageIndex = (_currentImageIndex + totalCount - 1) % totalCount;&#125;[self refreshImageAndPage];&#125;- (void)refreshImageAndPage &#123;NSUInteger totalCount = _images.count;_centerImageView.image = _images[_currentImageIndex];//é‡æ–°è®¾ç½®å·¦å³å›¾ç‰‡NSUInteger leftIndex = (_currentImageIndex + totalCount - 1) % totalCount;NSUInteger rightIndex = (_currentImageIndex + 1) % totalCount;_leftImageView.image = _images[leftIndex];_rightImageView.image = _images[rightIndex];//è®¾ç½®åˆ†é¡µ_pageControl.currentPage = _currentImageIndex;&#125;//å¼€å§‹æ‹–æ‹½-(void)scrollViewWillBeginDragging:(UIScrollView *)scrollView&#123;[self stopTimer];&#125;- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate &#123;[self startTimer];&#125;- (void)startTimer &#123;[self stopTimer];_timer = [NSTimer timerWithTimeInterval:_timeInterval target:self selector:@selector(autoScrollToNext) userInfo:nil repeats:YES];[[NSRunLoop mainRunLoop] addTimer:_timer forMode:NSRunLoopCommonModes];&#125;- (void)stopTimer &#123;[_timer invalidate];&#125;- (void)autoScrollToNext &#123;[UIView animateWithDuration:0.25 animations:^&#123;// å°å‘ï¼Œè®¾ç½®åŠ¨ç”»YESï¼Œä¸‹é¢resetæ˜¯åˆè®¾ç½®NO,åŠ¨ç”»å°±ä¸æ‰§è¡Œäº†[self.scrollView setContentOffset:CGPointMake(self.frame.size.width*2, 0) animated:NO];&#125; completion:^(BOOL finished) &#123;self.currentImageIndex++;if (self.currentImageIndex &gt;= self.images.count) &#123;self.currentImageIndex = 0;&#125;[self refreshImageAndPage];[self resetScrollViewContentOffset];&#125;];&#125;@end]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>UI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºŽNSDictionaryçš„å‡ ä¸ªé—®é¢˜]]></title>
    <url>%2F2015%2F06%2F21%2F%E5%85%B3%E4%BA%8ENSDictionary%E7%9A%84%E5%87%A0%E4%B8%AA%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[NSDictionary12NSDictionary &lt;NSString *, NSNumber *&gt; *dict = @&#123;@&quot;one&quot;:@1&#125;;dict.allKeys; dict.allValues; // é¡ºåºéƒ½æ˜¯éšæœºçš„ NSDictionaryçš„keyå¿…é¡»æ˜¯å­—ç¬¦ä¸²å—ï¼Ÿç­”ï¼šåªè¦éµå®ˆNSCodingåè®®å°±è¡Œï¼Œä¹Ÿå¯ä»¥ä¸æ˜¯NSString12NSDictionary *dic = @&#123;@1 : @&quot;one&quot;&#125;;NSLog(@&quot;%@&quot;,dic[@1]); // one NSMutableDictionaryçš„ setObject: forKey: ä¸Ž setValueï¼š forKey: æœ‰å•¥åŒºåˆ«ï¼Ÿç­”ï¼š setObject: forKey: çš„objectä¸èƒ½ä¸ºnilï¼Œå¦åˆ™ä¼šcrash setValue: forKey: çš„valueå¯ä»¥ä¸ºnilï¼Œè‹¥nilåˆ™removeå¯¹åº”çš„keyï¼›æ­¤å¤–ï¼ŒsetValue: forKey: æ˜¯KVCæ–¹æ³•ï¼Œæ•…key å¿…é¡»æ˜¯å­—ç¬¦ä¸²1234NSMutableDictionary *muDic = [[NSMutableDictionary alloc] init];// [muDic setObject:nil forKey:@1]; crash[muDic setValue:nil forKey:@&quot;2&quot;];// [muDic setValue:@&quot;ç¬¬ä¸‰ä¸ª&quot; forKey:@3]; é»„ç‰Œè­¦å‘Š NSDictionaryçš„ objectForKey: ä¸Ž valueForKey: æœ‰å•¥åŒºåˆ«ï¼Ÿç­”ï¼š objectForKey: æ ¹æ®keyå–å€¼ï¼Œå¦åˆ™è¿”å›žnil valueForKey: æ ¹æ®keyå–å€¼ï¼Œkeyå¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼Œä¸”å¦‚æžœkeyä»¥@å¼€å¤´ä¼šcrash12345NSDictionary *dic = @&#123;@&quot;1&quot;:@&quot;one&quot;, @&quot;@2&quot;:@&quot;two&quot;&#125;;NSLog(@&quot;%@&quot;,[dic objectForKey:@&quot;1&quot;]);NSLog(@&quot;%@&quot;,[dic objectForKey:@&quot;@2&quot;]);NSLog(@&quot;%@&quot;,[dic valueForKey:@&quot;1&quot;]);// NSLog(@&quot;%@&quot;,[dic valueForKey:@&quot;@2&quot;]); crash æ‰©å±•é˜…è¯» NSMapTable: ä¸åªæ˜¯ä¸€ä¸ªèƒ½æ”¾weakæŒ‡é’ˆçš„ NSDictionary NSHashtable and NSMaptable]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºŽæ•°å­—çš„å‡ ä¸ªé—®é¢˜]]></title>
    <url>%2F2015%2F06%2F05%2F%E5%85%B3%E4%BA%8E%E6%95%B0%E5%AD%97%E7%9A%84%E5%87%A0%E4%B8%AA%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[NSNumberç­”: åŸºç¡€æ•°å­—ç±»åž‹çš„å°è£…ï¼Œç»§æ‰¿è‡ªNSObjectï¼Œå¼•ç”¨ç±»åž‹ã€‚è¯­æ³•ç³– @(123) 32ä½ç³»ç»Ÿä¸Šä½¿ç”¨assignä¿®é¥°NSNumberä¼šCrashåŽŸå› ï¼šNSNumberåœ¨32bitè®¾å¤‡ä¹‹ä¸Š0-12éƒ½æ˜¯å­˜åœ¨å†…å­˜å…±äº«åŒºï¼Œæ— è®ºè°ƒç”¨å¤šå°‘æ¬¡æŒ‡é’ˆæŒ‡å‘çš„éƒ½æ˜¯ç›¸åŒçš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œæ°¸è¿œä¸ä¼šè¢«é”€æ¯ã€‚è€Œåªè¦å¤§äºŽ12å°±æ˜¯æ­£å¸¸çš„åˆ›å»ºåœ¨å †ä¸Šçš„å¯¹è±¡ã€‚åœ¨64-bitæœºå™¨ä¸Šæ— è®ºNSIntergerä¿å­˜çš„è¿™ä¸ªæ•°æœ‰å¤šå¤§ï¼Œåªè¦åœ¨æ­£å¸¸èŒƒå›´ä¹‹å†…ï¼Œä¸€å®šæ˜¯å­˜æ”¾åœ¨å¸¸é‡åŒºçš„ï¼Œä¹Ÿå°±æ˜¯æ°¸è¿œä¸ä¼šé‡Šæ”¾ã€‚å› æ­¤éœ€è¦ç”¨retainæˆ–strong NSIntegeræ˜¯ä¸æ˜¯å¼•ç”¨ç±»åž‹ç­”ï¼šåˆ«çœ‹æ˜¯ä»¥NSå¼€å¤´å°±ä»¥ä¸ºæ˜¯å¯¹è±¡äº†ï¼NSIntegerä¸æ˜¯å¼•ç”¨ç±»åž‹ï¼ŒintåŒCçš„intï¼ŒNSIntegeræ˜¯å¯¹intçš„å°è£…ï¼ŒæŽ¨èä½¿ç”¨ï¼Œæ ¹æ®æ“ä½œç³»ç»Ÿä½æ•°è¿”å›žæœ€å¤§å€¼ã€‚uintä¸ŽNSUIntegeråŒä¸Šã€‚ NSTimeIntervalç­”: typedef double NSTimeInterval; ä¸ºä»€ä¹ˆä¸“é—¨typedef ä¸€ä¸‹? æœ€ä¸»è¦æ˜¯æ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨,è§åçŸ¥ä¹‰,ä¸€çœ‹å°±çŸ¥é“ä¸“é—¨ç»™timeä½¿ç”¨çš„ CGFloatæ€Žä¹ˆè¿™ä¹ˆå¥‡æ€ªï¼Ÿç­”ï¼š- floatåŒCçš„floatï¼ŒdoubleåŒCçš„doubleï¼ŒCGFloatåœ¨32ä½ä¸Šæ˜¯floatï¼Œ64ä½ä¸Šæ˜¯doubleï¼Œæ²¡æŸ¥åˆ°ä¸ºä»€ä¹ˆæ˜¯CGå¼€å¤´ï¼Ÿ Boolçš„é—®é¢˜ç­”:è®°ä½æ˜¯YESæˆ–NO,ä¸æ˜¯trueå’Œfalse;0ä¸ºNO,å…¶å®ƒä¸ºflase;nilä¸ºNO,éžnilä¸ºYES;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[UIEventç®€ä»‹]]></title>
    <url>%2F2015%2F05%2F30%2FUIEvent%E7%AE%80%E4%BB%8B%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;UIEventæ˜¯ä»£è¡¨iOSç³»ç»Ÿä¸­çš„ä¸€ä¸ªäº‹ä»¶,ä¸€ä¸ªäº‹ä»¶åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªçš„UITouchï¼› å±žæ€§ @property(nonatomic,readonly) UIEventType type NS_AVAILABLE_IOS(3_0);//äº‹ä»¶ç±»åž‹ 123456typedef NS_ENUM(NSInteger, UIEventType) &#123;UIEventTypeTouches,//è§¦æ‘¸äº‹ä»¶ç±»åž‹ iOS3.0ä¹‹åŽå¯ä»¥ç”¨UIEventTypeMotion,//æ‘‡æ™ƒäº‹ä»¶ç±»åž‹ iOS3.0ä¹‹åŽå¯ä»¥ç”¨UIEventTypeRemoteControl,//é¥æŽ§äº‹ä»¶ç±»åž‹ iOS4.0ä¹‹åŽå¯ä»¥ç”¨UIEventTypePresses NS_ENUM_AVAILABLE_IOS(9_0),//ç‰©ç†æŒ‰é’®äº‹ä»¶ç±»åž‹ iOS9.0ä¹‹åŽå¯ä»¥ç”¨&#125;; @property(nonatomic,readonly) UIEventSubtype subtype NS_AVAILABLE_IOS(3_0);//å­äº‹ä»¶ç±»åž‹ 12345678910111213141516171819typedef NS_ENUM(NSInteger, UIEventSubtype) &#123;//äº‹ä»¶æ²¡æœ‰å­ç±»åž‹ iOS3.0ä¹‹åŽå¯ä»¥ç”¨UIEventSubtypeNone = 0,//iOS3.0ä¹‹åŽå¯ä»¥ç”¨UIEventSubtypeMotionShake = 1, // æ‘‡æ™ƒäº‹ä»¶//é¥æŽ§çš„äº‹ä»¶å­ç±»åž‹ iOS4.0ä¹‹åŽå¯ä»¥ç”¨UIEventSubtypeRemoteControlPlay = 100,//æ’­æ”¾UIEventSubtypeRemoteControlPause = 101,//æš‚åœUIEventSubtypeRemoteControlStop = 102,//åœæ­¢UIEventSubtypeRemoteControlTogglePlayPause = 103,//æ’­æ”¾æˆ–æš‚åœUIEventSubtypeRemoteControlNextTrack = 104,//ä¸‹ä¸€æ›²UIEventSubtypeRemoteControlPreviousTrack = 105,//ä¸Šä¸€æ›²UIEventSubtypeRemoteControlBeginSeekingBackward = 106,//å¼€å§‹å¿«é€€UIEventSubtypeRemoteControlEndSeekingBackward = 107,//å¿«é€€ç»“æŸUIEventSubtypeRemoteControlBeginSeekingForward = 108,//å¼€å§‹å¿«è¿›UIEventSubtypeRemoteControlEndSeekingForward = 109,//å¿«è¿›ç»“æŸ&#125;; @property(nonatomic,readonly) NSTimeInterval timestamp;//äº‹ä»¶å‘ç”Ÿæ—¶é—´ @property(nonatomic, readonly, nullable) NSSet *allTouches;//æ‰€æœ‰è§¦æ‘¸å¯¹è±¡ã€‚ API123456789- (nullable NSSet &lt;UITouch *&gt; *)touchesForWindow:(UIWindow *)window;//æ²¡ç”¨ï¼Œéƒ½æ˜¯main windowæ‰å“åº”- (nullable NSSet &lt;UITouch *&gt; *)touchesForView:(UIView *)view;//è¿”å›žå±žäºŽä¸€ä¸ªç»™å®šViewçš„è§¦æ‘¸å¯¹è±¡ã€‚- (nullable NSSet &lt;UITouch *&gt; *)touchesForGestureRecognizer:(UIGestureRecognizer *)gesture NS_AVAILABLE_IOS(3_2);//è¿”å›žæŒ‡å®šçš„æ‰‹åŠ¿è§¦æ‘¸å¯¹è±¡é›†åˆ//ä¼šå°†ä¸¢å¤±çš„è§¦æ‘¸æ”¾åˆ°ä¸€ä¸ªæ–°çš„ UIEvent æ•°ç»„ä¸­ï¼Œä½ å¯ä»¥ç”¨ coalescedTouchesForTouch(_:) æ–¹æ³•æ¥è®¿é—®- (nullable NSArray &lt;UITouch *&gt; *)coalescedTouchesForTouch:(UITouch *)touch NS_AVAILABLE_IOS(9_0);//è¾…åŠ©UITouchçš„è§¦æ‘¸ï¼Œé¢„æµ‹å‘ç”Ÿäº†ä¸€ç³»åˆ—ä¸»è¦çš„è§¦æ‘¸äº‹ä»¶ã€‚è¿™äº›é¢„æµ‹å¯èƒ½ä¸å®Œå…¨åŒ¹é…çš„è§¦æ‘¸çš„çœŸæ­£çš„è¡Œä¸ºï¼Œå› ä¸ºå®ƒçš„ç§»åŠ¨ï¼Œæ‰€ä»¥ä»–ä»¬åº”è¯¥è¢«è§£é‡Šä¸ºä¸€ä¸ªä¼°è®¡ã€‚- (nullable NSArray &lt;UITouch *&gt; *)predictedTouchesForTouch:(UITouch *)touch NS_AVAILABLE_IOS(9_0); å‚è€ƒ https://developer.apple.com/documentation/uikit/uievent]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[UITouchç®€ä»‹]]></title>
    <url>%2F2015%2F05%2F24%2FUITouch%E7%AE%80%E4%BB%8B%2F</url>
    <content type="text"><![CDATA[å±žæ€§ä»‹ç» å¸¸è§å±žæ€§ 1234567891011121314151617181920212223242526272829// è§¦æ‘¸å‘ç”Ÿæˆ–æœ€åŽä¿®æ”¹çš„æ—¶é—´@property(nonatomic,readonly) NSTimeInterval timestamp;// è§¦æ‘¸æ¬¡æ•°@property(nonatomic,readonly) NSUInteger tapCount; // touch down within a certain point within a certain amount of time// è§¦æ‘¸å‘ç”Ÿçš„windowï¼Œä¸€èˆ¬æ˜¯main window@property(nullable,nonatomic,readonly,strong) UIWindow *window;// è§¦æ‘¸çš„view@property(nullable,nonatomic,readonly,strong) UIView *view;// æ•°ç»„? è¯•éªŒç»“æžœåŒ…å«ç³»ç»Ÿæ‰‹åŠ¿ï¼ŒåŒä¸€ä¸ªæ‰‹åŠ¿çš„ä¸åŒçŠ¶æ€ç­‰ï¼Œæ€»ä¹‹æ­¤å±žæ€§ä¸é è°±@property(nullable,nonatomic,readonly,copy) NSArray &lt;UIGestureRecognizer *&gt; *gestureRecognizers NS_AVAILABLE_IOS(3_2);typedef NS_ENUM(NSInteger, UITouchPhase) &#123;UITouchPhaseBegan, // æ‰‹æŒ‡æŽ¥è§¦å±å¹•UITouchPhaseMoved, // æ‰‹æŒ‡åœ¨å±å¹•ä¸Šç§»åŠ¨UITouchPhaseStationary, // ä¸­é—´æ€ï¼Œæ‰‹æŒ‡ä¿æŒæŽ¥è§¦ä½†æ²¡ç§»åŠ¨UITouchPhaseEnded, // æ‰‹æŒ‡ç¦»å¼€å±å¹•UITouchPhaseCancelled, // è§¦æ‘¸æ²¡ç»“æŸï¼Œä½†éœ€è¦å¼ºåˆ¶åœæ­¢è¿½è¸ªè§¦æ‘¸äº‹ä»¶&#125;;@property(nonatomic,readonly) UITouchPhase phase;typedef NS_ENUM(NSInteger, UITouchType) &#123;UITouchTypeDirect, // ç›´æŽ¥è§¦æ‘¸å±å¹•UITouchTypeIndirect, // é—´æŽ¥è§¦æ‘¸ï¼Œé¥æŽ§å™¨UITouchTypePencil NS_AVAILABLE_IOS(9_1), // è§¦æŽ§ç¬”UITouchTypeStylus NS_AVAILABLE_IOS(9_1) = UITouchTypePencil, &#125; NS_ENUM_AVAILABLE_IOS(9_0);@property(nonatomic,readonly) UITouchType type NS_AVAILABLE_IOS(9_0);// å”¯ä¸€ç´¢å¼•ï¼Œè®©ä½ æŠŠä¸€ä¸ªæ›´æ–°çš„è§¦æ‘¸ä¸ŽåŽŸæ¥çš„è§¦æ‘¸è”ç³»èµ·æ¥ã€‚@property(nonatomic,readonly) NSNumber * _Nullable estimationUpdateIndex NS_AVAILABLE_IOS(9_1); è§¦æ‘¸åŠå¾„ 123456// majorRadius and majorRadiusTolerance are in points// The majorRadius will be accurate +/- the majorRadiusTolerance// è§¦æ‘¸åŠå¾„@property(nonatomic,readonly) CGFloat majorRadius NS_AVAILABLE_IOS(8_0);// è§¦æ‘¸åŠå¾„åç§»é‡@property(nonatomic,readonly) CGFloat majorRadiusTolerance NS_AVAILABLE_IOS(8_0); 3Dtouch 1234// è§¦æ‘¸åŠ›åº¦ï¼Œå‡å€¼ä¸º1ï¼Œç³»ç»Ÿé¢„è®¾@property(nonatomic,readonly) CGFloat force NS_AVAILABLE_IOS(9_0);// æœ€å¤§è§¦æ‘¸åŠ›åº¦@property(nonatomic,readonly) CGFloat maximumPossibleForce NS_AVAILABLE_IOS(9_0); API 123456789// è¿”å›žå€¼è¡¨ç¤ºè§¦æ‘¸åœ¨viewä¸Šçš„ä½ç½®ï¼Œ ä¼ å…¥nilå°±æ˜¯ç›¸å¯¹UIWindowçš„ä½ç½®- (CGPoint)locationInView:(nullable UIView *)view;// è¯¥æ–¹æ³•è®°å½•äº†å‰ä¸€ä¸ªè§¦æ‘¸ç‚¹çš„ä½ç½®- (CGPoint)previousLocationInView:(nullable UIView *)view;//è§¦æ‘¸å¯ç”¨æ—¶ï¼Œè¿”å›žè§¦æ‘¸çš„ç²¾ç¡®ä½ç½®- (CGPoint)preciseLocationInView:(nullable UIView *)view NS_AVAILABLE_IOS(9_1);//è§¦æ‘¸å¯ç”¨æ—¶ï¼Œè¿”å›žè§¦æŽ§çš„ç²¾ç¡®å…ˆå‰ä½ç½®- (CGPoint)precisePreviousLocationInView:(nullable UIView *)view NS_AVAILABLE_IOS(9_1); è§¦ç¬”ç›¸å…³ 123456// è§¦ç¬”å¼§åº¦ï¼Œ0å¼§åº¦è¡¨ç¤ºè§¦ç¬”ä¸Žè¡¨é¢å¹³è¡Œã€‚å½“è§¦ç¬”åž‚ç›´äºŽè¡¨é¢æ—¶ï¼Œæ­¤å±žæ€§çš„å€¼ä¸ºpi/2ã€‚@property(nonatomic,readonly) CGFloat altitudeAngle NS_AVAILABLE_IOS(9_1);// è¿”å›žæ‰‹è§¦ç¬”çš„æ–¹ä½è§’ï¼ˆå¼§åº¦ï¼‰- (CGFloat)azimuthAngleInView:(nullable UIView *)view NS_AVAILABLE_IOS(9_1);// è¿”å›žæŒ‡å‘æŒ‡é’ˆçš„æ–¹ä½è§’çš„å•ä½å‘é‡- (CGVector)azimuthUnitVectorInView:(nullable UIView *)view NS_AVAILABLE_IOS(9_1); å‚è€ƒ https://developer.apple.com/documentation/uikit/uitouch]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ‚¬æµ®çƒä»£ç ]]></title>
    <url>%2F2015%2F05%2F16%2F%E6%82%AC%E6%B5%AE%E7%90%83%E4%BB%A3%E7%A0%81%2F</url>
    <content type="text"><![CDATA[123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145//// ZKDebugFloatView.m// test//// Created by JZK on 2015/5/5.// Copyright Â© 2015 baidu. All rights reserved.//#import &quot;ZKDebugFloatView.h&quot;#import &quot;AppDelegate.h&quot;@implementation ZKDebugFloatView&#123;//æ‹–åŠ¨æŒ‰é’®çš„èµ·å§‹åæ ‡ç‚¹CGPoint _touchPoint;//èµ·å§‹æŒ‰é’®çš„x,yå€¼CGFloat _touchBtnX;CGFloat _touchBtnY;&#125;+ (void)show&#123;static dispatch_once_t onceToken;static BFDebugFloatView *floatView = nil;dispatch_once(&amp;onceToken, ^&#123;floatView = [[[NSBundle mainBundle] loadNibNamed:@&quot;ZKDebugFloatView&quot; owner:nil options:nil] firstObject];&#125;);if (!floatView.superview) &#123;floatView.frame = CGRectMake(0, (kScreenHeight - 80)/ 2, 80, 80);floatView.layer.masksToBounds = YES;floatView.layer.cornerRadius = 40;[[UIApplication sharedApplication].keyWindow addSubview:floatView];[[UIApplication sharedApplication].keyWindow bringSubviewToFront:floatView];&#125;&#125;- (void)awakeFromNib &#123;[super awakeFromNib];&#125;#pragma mark - touchMove- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event&#123;[super touchesBegan:touches withEvent:event];//æŒ‰é’®åˆšæŒ‰ä¸‹çš„æ—¶å€™ï¼ŒèŽ·å–æ­¤æ—¶çš„èµ·å§‹åæ ‡UITouch *touch = [touches anyObject];_touchPoint = [touch locationInView:self];_touchBtnX = self.frame.origin.x;_touchBtnY = self.frame.origin.y;&#125;- (void)touchesMoved:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event&#123;UITouch *touch = [touches anyObject];CGPoint currentPosition = [touch locationInView:self];//åç§»é‡(å½“å‰åæ ‡ - èµ·å§‹åæ ‡ = åç§»é‡)CGFloat offsetX = currentPosition.x - _touchPoint.x;CGFloat offsetY = currentPosition.y - _touchPoint.y;//ç§»åŠ¨åŽçš„æŒ‰é’®ä¸­å¿ƒåæ ‡CGFloat centerX = self.center.x + offsetX;CGFloat centerY = self.center.y + offsetY;self.center = CGPointMake(centerX, centerY);//çˆ¶è¯•å›¾çš„å®½é«˜CGFloat superViewWidth = self.superview.frame.size.width;CGFloat superViewHeight = self.superview.frame.size.height;CGFloat btnX = self.frame.origin.x;CGFloat btnY = self.frame.origin.y;CGFloat btnW = self.frame.size.width;CGFloat btnH = self.frame.size.height;//xè½´å·¦å³æžé™åæ ‡if (btnX &gt; superViewWidth)&#123;//æŒ‰é’®å³ä¾§è¶Šç•ŒCGFloat centerX = superViewWidth - btnW/2;self.center = CGPointMake(centerX, centerY);&#125;else if (btnX &lt; 0)&#123;//æŒ‰é’®å·¦ä¾§è¶Šç•ŒCGFloat centerX = btnW * 0.5;self.center = CGPointMake(centerX, centerY);&#125;//é»˜è®¤éƒ½æ˜¯æœ‰å¯¼èˆªæ¡çš„ï¼Œæœ‰å¯¼èˆªæ¡çš„ï¼Œçˆ¶è¯•å›¾é«˜åº¦å°±è¦è¢«å¯¼èˆªæ¡å æ®ï¼Œå›ºé«˜åº¦ä¸å¤ŸCGFloat defaultNaviHeight = 64;CGFloat judgeSuperViewHeight = superViewHeight - defaultNaviHeight;//yè½´ä¸Šä¸‹æžé™åæ ‡if (btnY &lt;= 0)&#123;//æŒ‰é’®é¡¶éƒ¨è¶Šç•ŒcenterY = btnH * 0.7;self.center = CGPointMake(centerX, centerY);&#125;else if (btnY &gt; judgeSuperViewHeight)&#123;//æŒ‰é’®åº•éƒ¨è¶Šç•ŒCGFloat y = superViewHeight - btnH * 0.5;self.center = CGPointMake(btnX, y);&#125;&#125;- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event&#123;CGFloat btnWidth = self.frame.size.width;CGFloat btnHeight = self.frame.size.height;CGFloat btnY = self.frame.origin.y;CGFloat btnX = self.frame.origin.x;CGFloat minDistance = 2;//ç»“æŸmoveçš„æ—¶å€™ï¼Œè®¡ç®—ç§»åŠ¨çš„è·ç¦»æ˜¯&gt;æœ€ä½Žè¦æ±‚ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œå°±è°ƒç”¨æŒ‰é’®ç‚¹å‡»äº‹ä»¶BOOL isOverX = fabs(btnX - _touchBtnX) &gt; minDistance;BOOL isOverY = fabs(btnY - _touchBtnY) &gt; minDistance;if (isOverX || isOverY) &#123;//è¶…è¿‡ç§»åŠ¨èŒƒå›´å°±ä¸å“åº”ç‚¹å‡» - åªåšç§»åŠ¨æ“ä½œ[self touchesCancelled:touches withEvent:event];&#125;else&#123;[super touchesEnded:touches withEvent:event];&#125;if (self.center.x &gt;= self.superview.frame.size.width/2) &#123;[UIView animateWithDuration:0.5 animations:^&#123;//æŒ‰é’®é å³è‡ªåŠ¨å¸è¾¹CGFloat btnX = self.superview.frame.size.width - btnWidth;self.frame = CGRectMake(btnX, btnY, btnWidth, btnHeight);&#125;];&#125;else&#123;[UIView animateWithDuration:0.5 animations:^&#123;//æŒ‰é’®é å·¦å¸è¾¹CGFloat btnX = 0;self.frame = CGRectMake(btnX, btnY, btnWidth, btnHeight);&#125;];&#125;&#125;- (void)dealloc &#123;&#125;@end]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>UI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[NS_ENUM&NSOption]]></title>
    <url>%2F2015%2F04%2F26%2FNS-ENUM-NSOption%2F</url>
    <content type="text"><![CDATA[ä¸ºå•¥è¦ç”¨æžšä¸¾? æŠŠåˆ«äººçœ‹ä¸æ‡‚çš„æ•´æ•°èµ·ä¸€ä¸ªåˆ«äººçœ‹èµ·æ¥æ˜Žç™½ç‚¹çš„åå­—; é™åˆ¶æ•´æ•°ä½¿ç”¨èŒƒå›´ Cçš„æžšä¸¾ 123456enum ZKSwithType &#123;ZKSwithTypeOn,ZKSwithTypeOff&#125;;// ä½¿ç”¨æ–¹å¼enum ZKSwithType swithType = ZKSwithTypeOn; iOSæŽ¨èå†™æ³•, ä½¿ç”¨æ›´ç®€å• 123456789101112typedef NS_ENUM(NSInteger, ZKSwithType) &#123;ZKSwithTypeOn,ZKSwithTypeOff&#125;;// ä½¿ç”¨æ–¹å¼ZKSwithType swithType = ZKSwithTypeOn;// iOSæŽ¨èå†™æ³•ç­‰åŒäºŽenum ZKSwithType &#123;ZKSwithTypeOn,ZKSwithTypeOff&#125;;typedef ZKSwithType ZKSwithType; NS_OPTIONSæ˜¯å•¥ 123456789101112131415typedef NS_OPTIONS(NSUInteger, ZKPosition) &#123;ZKPositionNone = 0,ZKPositionLeft = 1 &lt;&lt; 0,ZKPositionTop = 1 &lt;&lt; 1,ZKPositionRight = 1 &lt;&lt; 2,ZKPositionBottom = 1 &lt;&lt; 4,&#125;;// ç­‰åŒäºŽï¼Œåªä¸è¿‡æŽ¨èå†™æ³•æ›´ä¸å®¹æ˜“å‡ºé”™typedef enum : NSUInteger &#123;ZKPositionNone = 0,ZKPositionLeft = 1,ZKPositionTop = 2,ZKPositionRight = 4,ZKPositionBottom = 8&#125; ZKPosition;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[NSAttributedString]]></title>
    <url>%2F2015%2F04%2F18%2FNSAttributedString%2F</url>
    <content type="text"><![CDATA[NSAttributedString NSAttributedString ç”¨äºŽå®žçŽ°å¯Œæ–‡æœ¬æ•ˆæžœï¼Œå¯åœ¨åŒä¸€å­—ç¬¦ä¸²å®žçŽ°ä¸åŒå­—ä½“é¢œè‰²å¤§å°ç­‰å®šåˆ¶åŒ– NSAttributedStringç»§æ‰¿è‡ªNSObjectï¼Œ å’ŒNSStringæ²¡æœ‰ä»»ä½•å…³ç³»ï¼ï¼ï¼ NSAttributedString é‡‡ç”¨Key-Valueæ–¹å¼è®¾ç½®å¯Œæ–‡æœ¬å±žæ€§ NSMutableAttributedStringæ˜¯ NSAttributedString çš„å­ç±»ï¼Œå¯ä»¥é€šè¿‡insertAttributedStringã€appendAttributedStringç­‰æ–¹æ³•æ‹¼æŽ¥å­—ç¬¦ä¸² NSRangeä½¿ç”¨æ—¶å¿…é¡»æ³¨æ„æ³¨æ„å†æ³¨æ„ï¼Œå¾ˆå®¹æ˜“crashï¼PS:æ±‰å­—å’Œè‹±æ–‡å­—æ¯ç­‰éƒ½ç®—1ä¸ª NSAttributedStringçš„ä½¿ç”¨NSAttributedStringKey12345678910111213141516171819202122232425262728293031323334353637383940//å­—ä½“ï¼Œvalueæ˜¯UIFontå¯¹è±¡NSFontAttributeName //è®¾ç½®æ–‡æœ¬æ®µè½æŽ’ç‰ˆæ ¼å¼ï¼Œvalueæ˜¯NSParagraphStyle å¯¹è±¡NSParagraphStyleAttributeName//è®¾ç½®å­—ä½“é¢œè‰²ï¼Œvalueæ˜¯UIColorå¯¹è±¡ï¼Œé»˜è®¤å€¼ä¸ºé»‘è‰²NSForegroundColorAttributeName //è®¾ç½®å­—ä½“æ‰€åœ¨åŒºåŸŸèƒŒæ™¯é¢œè‰²ï¼Œvalueæ˜¯UIColorå¯¹è±¡ï¼Œé»˜è®¤å€¼ä¸ºnil, é€æ˜Žè‰²NSBackgroundColorAttributeName //å­—ç¬¦è¿žä½“ï¼Œvalueæ˜¯NSNumber å¯¹è±¡ï¼Œ0 è¡¨ç¤ºæ²¡æœ‰è¿žä½“å­—ç¬¦ï¼Œ1 è¡¨ç¤ºä½¿ç”¨é»˜è®¤çš„è¿žä½“å­—ç¬¦NSLigatureAttributeName //è®¾ç½®å­—ç¬¦é—´è·ï¼Œvalueæ˜¯NSNumber ï¼Œæ­£å€¼é—´è·åŠ å®½ï¼Œè´Ÿå€¼é—´è·å˜çª„NSKernAttributeName //åˆ é™¤çº¿ï¼Œvalueæ˜¯NSNumberï¼Œ@(NSUnderlineStyle)NSStrikethroughStyleAttributeName //ä¸‹åˆ’çº¿ï¼Œvalueæ˜¯NSNumberï¼Œ@(NSUnderlineStyle)NSUnderlineStyleAttributeName //æç»˜è¾¹é¢œè‰²ï¼Œvalueæ˜¯UIColor,é»˜è®¤å€¼ä¸ºnilNSStrokeColorAttributeName //è®¾ç½®ç¬”ç”»å®½åº¦(ç²—ç»†)ï¼Œvalueæ˜¯NSNumber å¯¹è±¡ï¼Œè´Ÿå€¼å¡«å……æ•ˆæžœï¼Œæ­£å€¼ä¸­ç©ºæ•ˆæžœNSStrokeWidthAttributeName //è®¾ç½®é˜´å½±å±žæ€§ï¼Œvalueæ˜¯NSShadow å¯¹è±¡ é»˜è®¤å€¼ä¸ºnilNSShadowAttributeName //è®¾ç½®æ–‡æœ¬é™„ä»¶,valueæ˜¯NSTextAttachmentå¯¹è±¡,å¸¸ç”¨äºŽæ–‡å­—å›¾ç‰‡æ··æŽ’,å¦‚æžœé™„ä»¶æ–‡æ¡£æ•°æ®æŒ‡å®šnil, é‚£ä¹ˆç³»ç»Ÿå°†ä¼šé»˜è®¤æŒ‡å®šä¸ºimageå¯¹è±¡ä½œä¸ºå€¼NSAttachmentAttributeName //é“¾æŽ¥ï¼Œvalueæ˜¯NSURL or NSString,UILabelä¸èƒ½ç”¨ï¼Œå¯ä»¥ç”¨UITextViewNSLinkAttributeName //è®¾ç½®åŸºçº¿åç§»å€¼ï¼Œvalueæ˜¯NSNumber,æ­£å€¼ä¸Šåï¼Œè´Ÿå€¼ä¸‹å, é»˜è®¤å€¼æ˜¯0NSBaselineOffsetAttributeName //ä¸‹åˆ’çº¿é¢œè‰²ï¼Œvalueæ˜¯UIColorå¯¹è±¡,é»˜è®¤å€¼ä¸ºnilNSUnderlineColorAttributeName //åˆ é™¤çº¿é¢œè‰²ï¼Œvalueæ˜¯UIColorï¼Œé»˜è®¤å€¼ä¸ºé»‘è‰²NSStrikethroughColorAttributeName //è®¾ç½®å­—å½¢å€¾æ–œåº¦ï¼Œvalueæ˜¯NSNumber,æ­£å€¼å³å€¾ï¼Œè´Ÿå€¼å·¦å€¾, é»˜è®¤å€¼æ˜¯0NSObliquenessAttributeName //è®¾ç½®æ–‡æœ¬æ¨ªå‘æ‹‰ä¼¸å±žæ€§ï¼Œ valueæ˜¯NSNumber,æ­£å€¼æ¨ªå‘æ‹‰ä¼¸æ–‡æœ¬ï¼Œè´Ÿå€¼æ¨ªå‘åŽ‹ç¼©æ–‡æœ¬NSExpansionAttributeName //è®¾ç½®æ–‡å­—æŽ’ç‰ˆæ–¹å‘ï¼Œvalueæ˜¯NSNumberï¼Œ0 è¡¨ç¤ºæ¨ªæŽ’æ–‡æœ¬ï¼Œ1 è¡¨ç¤ºç«–æŽ’æ–‡æœ¬ åœ¨iOSä¸­, æ€»æ˜¯ä»¥æ¨ªå‘æŽ’ç‰ˆNSVerticalGlyphFormAttributeName //è®¾ç½®æ–‡å­—ä¹¦å†™æ–¹å‘ï¼Œä»Žå·¦å‘å³ä¹¦å†™æˆ–è€…ä»Žå³å‘å·¦ä¹¦å†™NSWritingDirectionAttributeName è®¾ç½®å±žæ€§æ–¹å¼ æ•´æ®µæ–‡å­—è®¾ç½®å±žæ€§ initWithString: attributes: 12NSDictionary *attDic = @&#123;NSFontAttributeName:[UIFont systemFontOfSize:30], NSForegroundColorAttributeName:[UIColor redColor]&#125;;NSAttributedString *attStr = [[NSAttributedString alloc] initWithString:@&quot;hello, world&quot; attributes:attDic]; NSMutableAttributedStringåˆ†å—è®¾ç½® 1234NSMutableAttributedString *mAttStr = [[NSMutableAttributedString alloc] initWithString:@&quot;hello, world&quot;];NSRange range = NSMakeRange(0, 5);[mAttStr addAttribute:NSFontAttributeName value:[UIFont systemFontOfSize:30] range:range];[mAttStr addAttribute:NSForegroundColorAttributeName value:[UIColor redColor] range:range]; å…ˆç”¨NSAttributedStringï¼Œå†ç”¨NSMutableAttributedStringåŽ»æ·»åŠ  123456// å‡å°‘äº†NSRangeè®¡ç®—å¸¦æ¥çš„é—®é¢˜NSAttributedString *helloAttStr = [[NSAttributedString alloc] initWithString:@&quot;hello&quot; attributes:@&#123;NSFontAttributeName:[UIFont systemFontOfSize:30], NSForegroundColorAttributeName:[UIColor redColor]&#125;];NSAttributedString *worldAttStr = [[NSAttributedString alloc] initWithString:@&quot;, world&quot; attributes:@&#123;NSFontAttributeName:[UIFont systemFontOfSize:20], NSForegroundColorAttributeName:[UIColor blackColor]&#125;];NSMutableAttributedString *mAttStr = [[NSMutableAttributedString alloc] init];[mAttStr appendAttributedString:helloAttStr];[mAttStr appendAttributedString:worldAttStr]; å‡ ä¸ªç‰¹æ®Šçš„è®¾ç½® æ®µè½è®¾ç½® 123456789101112131415161718192021/*NSParagraphStyleçš„å±žæ€§ä»‹ç»alignment //å¯¹é½æ–¹å¼firstLineHeadIndent //é¦–è¡Œç¼©è¿›headIndent //ç¼©è¿›tailIndent //å°¾éƒ¨ç¼©è¿›lineBreakMode //æ–­è¡Œæ–¹å¼maximumLineHeight //æœ€å¤§è¡Œé«˜minimumLineHeight //æœ€ä½Žè¡Œé«˜lineSpacing //è¡Œè·paragraphSpacing //æ®µè·paragraphSpacingBefore //æ®µé¦–ç©ºé—´baseWritingDirection //å¥å­æ–¹å‘lineHeightMultiple //å¯å˜è¡Œé«˜,ä¹˜å› æ•°ã€‚hyphenationFactor //è¿žå­—ç¬¦å±žæ€§*/NSMutableParagraphStyle *style = [[NSMutableParagraphStyle alloc] init];style.firstLineHeadIndent = 10;style.lineSpacing = 10;NSAttributedString *attStr = [[NSAttributedString alloc] initWithString:@&quot;hello, world&quot; attributes:@&#123;NSParagraphStyleAttributeName:style&#125;]; ä¸‹åˆ’çº¿æˆ–åˆ é™¤çº¿ 1234567891011121314151617/* å€¼ä¸ºæ•´åž‹NSNumberï¼Œå¯å–å€¼ä¸º NSUnderlineStyleNSUnderlineStyleNone // æ— NSUnderlineStyleSingle //å•æ¡ç»†çº¿NSUnderlineStyleThick //å•æ¡ç²—çº¿NSUnderlineStyleDouble //åŒæ¡æ¡ç»†çº¿NSUnderlinePatternSolid // è¿žç»­çš„å®žçº¿NSUnderlinePatternDot // è™šçº¿ ä¾‹ ï¼ï¼ï¼ï¼ï¼ï¼NSUnderlinePatternDash // ç ´æŠ˜å·ï¼Œæ¯”å¦‚è¿™æ ·ï¼šâ€”â€” â€”â€” â€”â€”NSUnderlinePatternDashDot // è¿žç»­çš„ç ´æŠ˜å·å’Œç‚¹ï¼Œæ¯”å¦‚è¿™æ ·ï¼šâ€”â€”.â€”â€”.â€”â€”NSUnderlinePatternDashDotDot // è¿žç»­çš„ç ´æŠ˜å·ã€ç‚¹ã€ç‚¹ï¼Œæ¯”å¦‚ï¼šâ€”â€”..â€”â€”..â€”â€”..NSUnderlineByWord // å­—æœ‰çº¿ï¼Œç©ºæ ¼æ²¡çº¿*/NSMutableAttributedString *mAttStr = [[NSMutableAttributedString alloc] initWithString:@&quot;hello, world&quot;];// åˆ é™¤çº¿å’Œä¸‹æ»‘æ˜¾ç¤ºè®¾ç½®æ–¹æ³•ä¸€æ ·[mAttStr addAttribute:NSStrikethroughStyleAttributeName value:@(NSUnderlineStyleSingle) range:NSMakeRange(0, 5)];// iOS10.3ä¹‹åŽéœ€åŠ ä¸Šä»¥ä¸‹ä»£ç [mAttStr addAttribute:NSBaselineOffsetAttributeName value:@0 range:NSMakeRange(0, 5)]; é˜´å½± 12345NSMutableAttributedString *mAttStr = [[NSMutableAttributedString alloc] initWithString:@&quot;hello, world&quot;];NSShadow *shadow = [[NSShadow alloc]init];shadow.shadowOffset = CGSizeMake(10, 10);shadow.shadowColor = [UIColor redColor];[mAttStr addAttribute:NSShadowAttributeName value:shadow range:NSMakeRange(0, 5)]; è¶…é“¾æŽ¥,ä¸èƒ½ç”¨äºŽUILabel 123456789101112131415161718- (void)viewDidLoad &#123;[super viewDidLoad];UITextView *textView = [[UITextView alloc] initWithFrame:CGRectMake(50, 50, 50, 50)];[self.view addSubview:textView];textView.backgroundColor = [UIColor redColor];NSString *strLink = @&quot;ç™¾åº¦ä¸€ä¸‹&quot;;NSAttributedString *attStr = [[NSAttributedString alloc] initWithString:strLink attributes:@&#123;NSLinkAttributeName: [NSURL URLWithString:@&quot;https://www.baidu.com&quot;]&#125;];textView.editable = NO;/* ç­¾è®¢åè®®, æŒ‡å®šä»£ç†äººä¹‹åŽ. ä½†ç‚¹å‡»é“¾æŽ¥æ—¶, ä¼šå›žè°ƒåè®®æ–¹æ³• (- textView:shouldInteractWithURL:inRange:) */textView.delegate = self;textView.attributedText = attStr;&#125;- (BOOL)textView:(UITextView *)textView shouldInteractWithURL:(NSURL *)URL inRange:(NSRange)characterRange &#123;NSLog(@&quot;url: %@&quot;, URL);return YES;&#125; é™„ä»¶(å›¾æ–‡æ··æŽ’) 12345678910111213141516/* ä¸‹é¢å®žçŽ°åœ¨ç™¾åº¦ä¸¤ä¸ªæ±‰å­—ä¹‹é—´æ’å…¥ä¸€ä¸ªç…§ç‰‡ */NSString *str = @&quot;ç™¾åº¦&quot;;/*** å…³äºŽNSTextAttachmentç±»çš„ç®€å•è¯´æ˜Ž** NSTextAttachment ç±»æœ‰ä¸€ä¸ªæŒ‡å®šçš„åˆå§‹åŒ–æ–¹æ³•(- initWithData:ofType:), éœ€è¦æŒ‡å®šé™„ä»¶æ–‡æ¡£çš„æ•°æ®å’Œé™„ä»¶æ–‡ä»¶çš„ç±»åž‹. å¦‚æžœé™„ä»¶æ–‡æ¡£æ•°æ®æŒ‡å®šnil, é‚£ä¹ˆç³»ç»Ÿå°†ä¼šé»˜è®¤æŒ‡å®šä¸ºimageå¯¹è±¡ä½œä¸ºå€¼. å› æ­¤, ä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸ªç‰¹æ€§å®žçŽ°å›¾æ–‡æ··æŽ’.* ä¸‹é¢å°±ä»¥é™„ä»¶ä¸ºimageå¯¹è±¡æ¥è¯´æ˜ŽNSAttachmentAttributeNameçš„ä½¿ç”¨.**/NSTextAttachment *attach = [[NSTextAttachment alloc] initWithData:nil ofType:nil];attach.bounds = CGRectMake(0, 0, 50, 50);attach.image = [UIImage imageNamed:@&quot;logo&quot;];NSAttributedString *strAtt = [NSAttributedString attributedStringWithAttachment:attach];NSMutableAttributedString *mAttStr = [[NSMutableAttributedString alloc] initWithString:str];[mAttStr insertAttributedString:strAtt atIndex:1]; æ–‡å­—ä¹¦å†™æ–¹å‘ 12345678910NSMutableAttributedString *mAttStr = [[NSMutableAttributedString alloc] initWithString:@&quot;hello, world&quot;];// //å–å€¼ä¸ºåŒ…å«NSNumberå¯¹è±¡çš„æ•°ç»„. ä»Žå·¦å‘å³ä¹¦å†™æˆ–è€…ä»Žå³å‘å·¦ä¹¦å†™.// // NSArray of NSNumbers representing the nested levels of writing direction overrides as// defined by Unicode LRE, RLE, LRO, and RLO characters. The control characters can be// obtained by masking NSWritingDirection and NSTextWritingDirection values. LRE:// NSWritingDirectionLeftToRight|NSWritingDirectionEmbedding, RLE:// NSWritingDirectionRightToLeft|NSWritingDirectionEmbedding, LRO:// NSWritingDirectionLeftToRight|NSWritingDirectionOverride, RLO:// NSWritingDirectionRightToLeft|NSWritingDirectionOverride,[mAttStr addAttribute:NSWritingDirectionAttributeName value:@[@2] range:NSMakeRange(0, 11)];]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[sqliteå¸¸ç”¨è¯­å¥]]></title>
    <url>%2F2015%2F04%2F07%2Fsqlite%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%2F</url>
    <content type="text"><![CDATA[SQL å¯¹å¤§å°å†™ä¸æ•æ„Ÿ åˆ›å»ºæ•°æ®åº“ 1create database dbname åˆ é™¤æ•°æ®åº“ 1drop database dbname åˆ›å»ºæ–°è¡¨ 123// text ä¸ºcolå¯¹åº”çš„æ•°æ®ç±»åž‹ï¼Œåœ¨iOSä¸­å»ºè®®éƒ½ç”¨textï¼Œ// å› ä¸ºç¬¬ä¸€æ•°æ®é‡ä¸æ˜¯å¾ˆå¤šï¼Œä¸å¤ªå½±å“æ•ˆçŽ‡ï¼›ç¬¬äºŒé¿å…åŽç«¯æ›´æ”¹æ•°æ®ç±»åž‹é€ æˆçš„è¶Šç•Œç­‰é”™è¯¯create table if not exists tablename(col1 text [not null] [primary key],col2 text [not null],..) æ ¹æ®å·²æœ‰çš„è¡¨åˆ›å»ºæ–°è¡¨ 12// ä¸è¦ä½¿ç”¨asæ–¹å¼ï¼Œasæ–¹å¼æ²¡ç´¢å¼•create table newTable like oldTable åˆ é™¤æ–°è¡¨ 1drop table tabname å¢žåŠ ã€ä¿®æ”¹ä¸€ä¸ªåˆ— 123å¢žåŠ ï¼šalter table tabname add columnName columnTypeä¿®æ”¹ï¼šalter table tabname modify columnName columnTypeåˆ é™¤ï¼šåƒä¸‡ä¸è¦åšï¼Œå®æ„¿ç•™ç€ä¸ç”¨ æŸ¥æ‰¾select,æ³¨æ„iOSé‡Œvalueéœ€è¦ç”¨â€˜%@â€™ 12345678910111213141516// æ‰€æœ‰select * from table1//è¿‡æ»¤æŽ‰someKeyçš„é‡å¤å€¼elect distinct field1 from table1 // æŸ¥æ‰¾å…·ä½“é¡¹ ,è¯¦è§æœ¬æ–‡è¿ç®—ç¬¦select * from table1 where field1 = value1// æŽ’åº,é»˜è®¤ascå‡åºï¼Œdescé™åºï¼select * from table1 order by field1 [desc] // å–åˆ°å‡åºå‰5ä¸ªã€‚æ³¨æ„sqliteæ²¡æœ‰topè¯­æ³•ï¼Œä½†å¯ä»¥é€šè¿‡ limit 5 æ¥å®žçŽ°topæ•ˆæžœselect * from table1 order by field1 limit 5æ€»æ•°ï¼šselect count as totalcount from table1æ±‚å’Œï¼šselect sum(field1) as sumvalue from table1å¹³å‡ï¼šselect avg(field1) as avgvalue from table1æœ€å¤§ï¼šselect max(field1) as maxvalue from table1æœ€å°ï¼šselect min(field1) as minvalue from table1 æ’å…¥ 1æ’å…¥ï¼šinsert or replace into table1(field1,field2) values(value1,value2) åˆ é™¤ 1delete from table1 where èŒƒå›´ æ›´æ–° 1update table1 set field1=value1 where èŒƒå›´ è¿ç®—ç¬¦ 123456789101112131415å‚è€ƒï¼šhttps://www.runoob.com/sqlite/sqlite-operators.htmlç®—æ•°è¿ç®—ç¬¦ + ï¼Œ- ï¼Œ* ï¼Œ/ , %æ¯”è¾ƒè¿ç®—ç¬¦ = , &gt; , &gt;= , &lt; , &lt;= // and ä¸Žå…³ç³»select * from table1 where field1 &gt;= value1 and field2 = value2 // or æˆ–å…³ç³»select * from table1 where field1 &gt;= value1 for field2 = value2 // [ä¸]åœ¨value1å’Œvalue2ä¹‹é—´select * frome table1 where field1 [not] between value1 and value2// [ä¸]æ˜¯NULLçš„å€¼select * from table1 where field1 is [not] NULL// likeæ¨¡ç³ŠåŒ¹é… ç™¾åˆ†å·ï¼ˆ%ï¼‰ä»£è¡¨é›¶ä¸ªã€ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—æˆ–å­—ç¬¦ã€‚ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰ä»£è¡¨ä¸€ä¸ªå•ä¸€çš„æ•°å­—æˆ–å­—ç¬¦ã€‚è¿™äº›ç¬¦å·å¯ä»¥è¢«ç»„åˆä½¿ç”¨select * frome table1 where field1 like &apos;_ZK%&apos;// [ä¸]åœ¨ç»™å®šèŒƒå›´å†…select * frome table1 where field1 [not] in (60, 100) å‚è€ƒï¼šSQLè¯­æ³•]]></content>
      <categories>
        <category>SQL</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è¶…çº§å¿«é€Ÿé˜…è¯»]]></title>
    <url>%2F2015%2F03%2F30%2F%E8%B6%85%E7%BA%A7%E5%BF%AB%E9%80%9F%E9%98%85%E8%AF%BB%2F</url>
    <content type="text"><![CDATA[æ¢³ç†é€»è¾‘è„‰ç»œï¼Œæ˜Žç¡®å®è§‚å®šä½ é¢å¯¹ä»»ä½•æ”¹å˜ï¼Œç¼˜è„‘éƒ½æ˜¯æ‹’ç»çš„ï¼Œå› æ­¤ä¸‡äº‹å¼€å¤´éš¾ï¼é™¤éžäº²èº«ç»åŽ†æ–°çš„è¡Œä¸ºæ¨¡å¼å¯¹è‡ªå·±æœ‰ç›Šæ— å®³ï¼Œç¼˜è„‘æ‰ä¼šåšå‡ºç§¯æžååº”ï¼è€Œä¸”å½“è·‘æ­¥è·‘åˆ°æœ€æ„‰æ‚¦çš„æ—¶å€™æ”¾å¼ƒï¼Œä¸‹æ¬¡æ›´èƒ½æ¿€å‘è‡ªå·±åŽ»è·‘æ­¥ åˆ¶ä½œæ€ç»´å¯¼å›¾ï¼Œæ¢³ç†å‡ºæ¸…æ™°çš„è„‰ç»œï¼åˆ¶ä½œè„‘å›¾çš„é‚£ç‚¹æ—¶é—´æ˜¯éžå¸¸å€¼å¾—ï¼Œæ‰€ä»¥ä¸€å®šè¦åšï¼ èŠ±5åˆ†é’Ÿå¿«é€Ÿæµè§ˆå…¨ä¹¦ï¼å¾—åˆ°çš„ç²—ç•¥å°è±¡æœ‰åŠ©äºŽè®©ç¼˜è„‘æ„Ÿè§‰æ›´åŠ å®‰å…¨ï¼Œä¹Ÿèƒ½å¤§æ¦‚çŸ¥é“å“ªäº›ä¸œè¥¿åœ¨å“ªé‡Œï¼åœ¨å¿«é€Ÿæµè§ˆè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬çš„æ³¨æ„åŠ›ä¸»è¦é›†ä¸­åœ¨æ ‡é¢˜ã€å‰¯æ ‡é¢˜ã€æ’å›¾ã€è¡¨æ ¼ä»¥åŠè¢«åŠ ç²—æˆ–æ–œä½“çš„å…³é”®å­—ä¸Š åªæœ‰åŒæ—¶è°ƒåŠ¨è‡ªå·±çš„å·¦è„‘ï¼ˆå·¦è„‘æ€ç»´æŒ‡çš„æ˜¯åˆ†æžæ€ç»´ï¼‰ä¸Žå³è„‘ï¼ˆå³è„‘æ€ç»´æŒ‡çš„æ˜¯æœ‰æƒ³è±¡åŠ›å’Œåˆ›é€ æ€§çš„ç©ºé—´ä¸Žå½¢è±¡æ€ç»´ï¼‰ï¼Œæ¿€æ´»ä¸¤ç§æ€ç»´æ¨¡å¼çš„æ—¶å€™ï¼Œæ‰èƒ½è¾¾åˆ°æœ€ä½³çš„å­¦ä¹ æ•ˆæžœï¼ ä¸»åŠ¨é˜…è¯»å†æ€è€ƒï¼Œå­¦ä¹ æ–°çŸ¥è¯†ä¹‹å‰å…ˆæ¿€æ´»æ—¢æœ‰çš„çŸ¥è¯†ç½‘ç»œï¼ˆå³å…ˆæƒ³æƒ³ä»¥å‰çš„çŸ¥è¯†æœ‰ä»€ä¹ˆç”¨ï¼‰ï¼Œè¦è®°ä½ä¸€æ¡ä¿¡æ¯ï¼Œå¿…é¡»å°†å…¶ä¸Žæ—¢æœ‰çš„çŸ¥è¯†ç½‘ç»œç»“åˆåœ¨ä¸€èµ·ï¼Œä¸Žå…¶ä»Žå¤´å¼€å§‹çº ç»“äºŽç»†èŠ‚é—®é¢˜ï¼Œè¿˜ä¸å¦‚ä»Žæ•´ä½“ä¸‹æ‰‹ï¼Œç”±å®è§‚åˆ°å¾®è§‚é€æ­¥æ·±å…¥å­¦ä¹ ã€‚ æœ€å…³é”®æœ€éš¾ç†¬çš„å…¶å®žæ˜¯åœ¨åŒä¸€æ°´å¹³å±‚æ¬¡ä¸Šåœæ»žä¸å‰çš„é‚£æ®µæ—¶é—´ï¼Œå³å¹³å°æœŸã€‚è¿™æ®µæ—¶é—´æ­£æ˜¯å¤§è„‘å»ºç«‹ç¥žç»è¿žæŽ¥çš„å…³é”®æœŸï¼Œå³å¹³å°æœŸçš„åšæŒä¹Ÿæ˜¯ä¸€ç›´åœ¨è¿›æ­¥çš„ï¼ æ¯ä¸ªäººä»Žå¤´å¼€å§‹å­¦ä¹ æ–°æŠ€èƒ½ï¼Œéƒ½è¦ç»åŽ†4ä¸ªé˜¶æ®µï¼šAï¼Œè™½æ— èƒ½åŠ›ï¼Œå´ä¹Ÿå°šæœªèŒç”Ÿæ˜Žç¡®çš„æ„è¯†ï¼Œå³â€œä¸çŸ¥å·±ä¸èƒ½â€ï¼›Bï¼Œæ„è¯†åˆ°è‡ªå·±æŸç§èƒ½åŠ›çš„ç¼ºä¹ï¼Œå³â€œçŸ¥å·±ä¸èƒ½ä¹‹â€ï¼›Cï¼Œæœ‰èƒ½åŠ›ï¼Œå³â€œçŸ¥å·±å·±èƒ½ä¹‹â€ï¼›Dï¼Œæ„è¯†ä¸åˆ°è‡ªå·±æœ‰èƒ½åŠ›ï¼Œå³â€œä¸çŸ¥å·±èƒ½ä¹‹â€ åªè¦æˆ‘ä»¬ä¸æ–­ç»ƒä¹ ï¼Œæ€»æœ‰ä¸€å¤©è¿™ç§æ–°çš„æŠ€èƒ½ä¼šä¹ æƒ¯æˆè‡ªç„¶ï¼Œå˜æˆæˆ‘ä»¬æ½œæ„è¯†ä¸‹çš„è¡Œä¸ºæ–¹å¼ã€‚ é˜…è¯»æ—¶å€™ä¸€å®šè¦å­¦ä¼šæé—®ï¼Œæé—®æ–¹å‘å¾ˆå¤šï¼Œä¾‹ï¼šAï¼Œ5W1Hï¼›Bï¼Œæ®µè½å±‚é¢ï¼Œç»“æž„ï¼›Cï¼Œä¸»ä½“ï¼ŒçŸ›ç›¾åˆ©ç›Šï¼Œæ¢ä½æ€è€ƒï¼›Dï¼ŒSWOTï¼›Eï¼Œå†…å› å¤–å› ï¼›Fï¼Œå’Œæˆ‘å…³ç³»ï¼Œæœ‰ä»€ä¹ˆç”¨ ç­‰ç­‰ çŸ¥é“ä»€ä¹ˆæ—¶å€™ç”¨é€Ÿè¯»ï¼Œä»€ä¹ˆæ—¶å€™ç”¨ç²¾è¯»ï¼Œè¿™ä¸ªéœ€è¦æ…¢æ…¢çš„ç»ƒä¹ ï¼åˆ†å—é˜…è¯»ï¼Œæ¯å—è®¾å®šç›®æ ‡ï¼Œå½“ç„¶è¦é€šè¯»ã€‚ã€‚ã€‚ æ— èŠçš„ï¼Œæ²¡æœ‰æ’å›¾å’Œé‡ç‚¹çš„å¯†å¯†éº»éº»çš„ä¹¦ï¼Œæ˜¯ç»ƒä¹ é€Ÿè¯»çš„å¥½ææ–™ï¼ å¯ä»¥è®¡ç®—è‡ªå·±çš„é˜…è¯»é€Ÿè¯»ï¼Œä½†ä»…ä»…æœ‰åŠ©äºŽæŽ§åˆ¶è‡ªå·±çš„é˜…è¯»é€Ÿè¯»ã€‚ é€å­—é€å¥é˜…è¯»æ³•å¸¸è§é—®é¢˜ï¼šAï¼Œä½Žæ•ˆé˜…è¯»ï¼Œè¶Šæ˜¯è¯»çš„æ…¢çš„è¶Šæ˜¯ç†è§£ä¸å……åˆ†ï¼Œæ•æ‰å‡ ä¸ªå…³é”®å­—å°±å¥½ï¼›B,æ— æ³•é›†ä¸­æ³¨æ„åŠ›ï¼Œéžå¸¸æ…¢çš„é€å­—é€å¥é˜…è¯»ä¸­å…¶å®žåœ¨æ½œæ„è¯†ä¸­å¼€è¿‡çš„å°å·®æ•°ä¸èƒœæ•°ï¼Œä¾‹ï¼šæ™ƒè„‘è¢‹ï¼Œä¼¸æ‡’è…°ï¼Œæ‰çœ¼ç›ç­‰ç­‰ï¼Œå¤§è„‘å¤„ç†ä¸œè¥¿å¾ˆå¿«ï¼Œå½“é˜…è¯»é€Ÿåº¦èµ¶ä¸ä¸Šå¤§è„‘å¤„ç†é€Ÿåº¦æ—¶å°±ä¼šå¼€å°å·®ï¼›Cï¼Œè§†çº¿çš„ä¸‹æ„è¯†æ¸¸ç§»ï¼ŒåŒçœ¼å¤©ç”Ÿå°±å–„äºŽæ•æ‰åŠ¨æ€çš„ä¸œè¥¿ï¼Œè€Œæˆ‘ä»¬è‡ªå·±æ˜¯æ„Ÿè§‰ä¸åˆ°çš„ï¼Œå°±åƒçœ¨çœ¼ç»å¤§å¤šæ•°æ˜¯æ„Ÿè§‰ä¸åˆ°çš„ï¼Œæ®µè½åˆ’åˆ†æœ€å¥½è®©çœ¼ç›ä¸€ä¸‹å°±èƒ½çœ‹å®Œä¸€æ•´è¡Œæœ€é«˜æ•ˆï¼Œæ¢è¡Œæ—¶é—´å åˆ°äº†æ•´ä¸ªé˜…è¯»çš„ä¸‰åˆ†ä¹‹ä¸€ï¼›ã€ ä¸€ç§éžå¸¸æœ‰æ•ˆçš„è¾…åŠ©é˜…è¯»æ–¹æ³•ï¼šç”¨é“…ç¬”æˆ–æŒ‡å°–è¾…åŠ©é˜…è¯»ï¼Œè¿˜è®°å¾—çœ¼ç›ä¼šä¸è‡ªè§‰åœ°æ•æ‰è¿åŠ¨çš„ä¸œè¥¿å§ï¼Œè€Œæ–‡å­—æ˜¯é™æ€çš„ã€‚è€Œä¸”ç”¨æ‰‹ä»‹å…¥äº†é˜…è¯»ï¼Œä»Žæ„Ÿå®˜ä¸Šå°±æ„Ÿè§‰åˆ°äº†è‡ªå·±åœ¨è¯»ä¹¦ï¼Œä¹Ÿå°±æ˜¯ä»ªå¼æ„Ÿã€‚ã€‚ã€‚ é€æ­¥æ‰©å®½è§†çº¿èŒƒå›´ï¼Œé¦–å…ˆï¼ŒæŠŠè§†çº¿èšç„¦åˆ°ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªå­—ï¼Œç„¶åŽå¯¹ç„¦ç¬¬äºŒä¸ªå­—ï¼Œçœ‹çœ‹èƒ½å¦çœ‹æ¸…ç¬¬ä¸€ä¸ªå­—ï¼Œç„¶åŽèšç„¦ç¬¬ä¸‰ä¸ªå­—ï¼Œå†çœ‹ç¬¬ä¸€ä¸ªå­—ã€‚ã€‚ã€‚ã€‚ç»ƒä¹ æ–¹æ³•ï¼šç”¨æ‰‹æŒ‡è¾…åŠ©æ—¶ï¼Œè¯•ç€ä»Žæ¯è¡Œçš„ç¬¬äºŒä¸ªï¼Œä¸‰ä¸ªå­—å¼€å§‹æŒ‡å¼•ï¼Œè€Œä¸”æå‰ä¸€ä¸¤ä¸ªå­—æŠŠæ‰‹æŒ‡æŒªåˆ°ç¬¬äºŒè¡Œï¼Œè¿™æ ·ä¸ºäº†è¯»å…¥å‰©ä½™çš„ä¿¡æ¯ï¼Œä½ çš„è§†çº¿èŒƒå›´è‡ªç„¶ä¹Ÿä¼šéšä¹‹æ‰©å±•ã€‚ ä¸€ç›®åè¡Œçš„3-2-1ç»ƒä¹ ï¼šå¹³æ—¶é˜…è¯»çš„é€Ÿåº¦ï¼Œé˜…è¯»ä¸‰åˆ†é’Ÿï¼Œåšä¸ªæ ‡è®°ï¼Œç„¶åŽé‡å¤é˜…è¯»ç›´åˆ°2åˆ†é’Ÿé˜…è¯»å®Œè¿™æ®µç¯‡å¹…ï¼Œåœ¨é‡å¤é˜…è¯»ç›´åˆ°1åˆ†é’Ÿé˜…è¯»å®Œè¿™æ®µç¯‡å¹…ã€‚è¿™ä¸ªç»ƒä¹ è¦ç‚¹åœ¨äºŽé€Ÿåº¦ï¼Œç†è§£æ˜¯æ¬¡è¦çš„ï¼Œä½†å¹³æ—¶é˜…è¯»æ­£å¥½ç›¸åï¼è¿™ä¸ªç»ƒä¹ å°±æ˜¯è®©å¤§è„‘é€æ¸é€‚åº”è¶Šæ¥è¶Šå¿«çš„é˜…è¯»é€Ÿåº¦ï¼Œå½“ä½ ä»¥åŽä»¥å……åˆ†ç†è§£ä¸ºå‰æè€Œé˜…è¯»æ—¶ï¼Œä½ çš„å¤§è„‘å¯¹é€Ÿåº¦çš„çš„æ„ŸçŸ¥å°±æœ‰äº†ä¸€ä¸ªæ–°çš„åŸºå‡†ã€‚ æ•´è¡Œé˜…è¯»ç»ƒä¹ ï¼Œä¸é€æ˜Žç™½çº¸å®Œå…¨æŽ©ç›–ä½æŸä¸€è¡Œå†…å®¹ï¼Œç„¶åŽå¿«é€Ÿå‘ä¸‹æ‹–åŠ¨ä¸€è¡Œï¼Œç´§æŽ¥ç€é©¬ä¸Šé®å›žåŽ»ï¼Œå¦‚æ­¤åå¤å‡ æ¬¡ï¼Œè¶Šå¼€è¶Šå¥½ï¼Œå‡ æ¬¡ä¹‹åŽé—­ä¸Šçœ¼ç›å°è¯•å›žæ”¾çœ‹åˆ°çš„ç”»é¢ï¼Œå°è¯•å›žæ”¾æ•´è¡Œå†…å®¹ ä¸‰çº§è·³ç»ƒä¹ ï¼šæ˜¯3-2-1ç»ƒä¹ çš„è¾…åŠ©æ–¹æ³•ï¼Œç”»å‡ æ¡çº¿ï¼Œåœ¨é˜…è¯»çš„æ—¶å€™æœ‰æ„è¯†çš„è®©è‡ªå·±çš„è§†çº¿åœç•™åœ¨è¿™ä¸‰æ¡ç«–çº¿ä¸Šé¢ï¼Œç†Ÿç»ƒä»¥åŽå¯ä»¥åªç”»ä¸¤æ¡ ä¸€å®šè¦ç”»æ€ç»´å¯¼å›¾ï¼Œæ€ç»´å¯¼å›¾ç¬¦åˆå¤§è„‘ç¥žç»åŽŸç†ï¼Œå…¶å®žä½œè€…æŠŠè‡ªå·±çš„æ€ç»´è½¬åŒ–ä¸ºçº¿æ€§çš„æ–‡å­—ï¼Œè€Œè¯»è€…ä»Žçº¿æ€§çš„æ–‡å­—ä¸­æŠ½è±¡å‡ºè´Ÿè´£çš„æ€ç»´å¯¼å›¾ï¼Œè¿™æ‰æ˜¯æœ‰æ•ˆçš„æ²Ÿé€šå‘€ï¼ä¼ ç»Ÿçš„ç±»ä¼¼è¿™æ ·çš„è®°ç¬”è®°ï¼Œå…¶å®žæ˜¯æŒ‰ç…§ä¹¦ä¸­çš„é¡ºåºè®°å½•ä½œè€…çš„è§‚ç‚¹ï¼Œè€Œåˆ¶ä½œæ€ç»´å¯¼å›¾åˆ™æ›´å…·æœ‰è°ƒæ•´æ€§ï¼Œæ–‡ç« è„‰ç»œï¼Œæç‚¼æ–‡å­—å…³é”®å­—ç­‰ç­‰éƒ½åœ¨ä¸»åŠ¨æ€è€ƒï¼Œæ›´èƒ½ç†è§£ä¸Žè®°å¿†ï¼æœ€ä¸»è¦æ˜¯çœæ—¶é—´ï¼Œåœ¨ä¼ ç»Ÿçš„çº¿æ€§ç¬”è®°é‡Œé¢90%çš„æ–‡å­—éƒ½æ˜¯å¤šä½™çš„ï¼Œè¿˜ä¸å¦‚ç›´æŽ¥ç”»å›¾çœäº‹ï¼ï¼ï¼ï¼ï¼ åˆ†ç±»ï¼ŒæŒ‰ç…§ä¸€å®šèŠ‚å¥é‡å¤å¤ä¹ ï¼Œç»„ç»‡å…³é”®è¯ï¼Œäº§ç”Ÿè”æƒ³æ›´æœ‰åŠ©äºŽè®°å¿†ç”±äºŽç†è§£ï¼ä¸€å¼ å›¾ç­‰äºŽ100ä¸ªæ–‡å­—ï¼Œä¸”æ›´å®¹æ˜“ç†è§£ï¼å¯¹ç‰¹æ®Šç¬¦å·ï¼Œé¢œè‰²ï¼Œå¤§è„‘æ›´å®¹æ˜“é›†ä¸­æ³¨æ„åŠ›è®°å¿† åˆ¶ä½œè§†è§‰å¡ç‰Œçš„ä¸‰ä¸ªæ­¥éª¤ï¼šAï¼ŒæŠŠæ¡æ•´ä½“è¡Œæ–‡ç»“æž„ï¼Œè®°ä½ä»»ä½•ä¸€ç§è®¾è®¡éƒ½æ²¡æœ‰å¯¹é”™ä¹‹åˆ†ï¼›Bï¼ŒæŠ½å–å…³é”®è¯ï¼Œå°½é‡é¿å…æ‘˜æŠ„å¤§é‡å®Œæ•´çš„å¥å­ ç”»å‡ºè¦ç‚¹é—´çš„é€»è¾‘å…³ç³»ã€‚è„‘å›¾ä¸åªæ˜¯æ ‘å½¢çš„ï¼Œè¿˜å¯èƒ½æ˜¯ç½‘çŠ¶çš„ï¼Œè¿™å°±éº»çƒ¦äº†ï¼Œæ„å‘³ç€å¶å­ä¸Žå¶å­ä¹‹é—´ä¹Ÿä¼šæœ‰é€»è¾‘é—®é¢˜ï¼Œçœ‹æ¥éžå¾—ç”¨ä¸“ä¸šçš„æ€ç»´å¯¼å›¾æ‰è¡Œï¼Œè„‘å›¾ä¸€å®šè¦æ¨ªç‰ˆ é‡Šæ”¾åŽ‹åŠ›çš„æŠ€å·§ï¼šè‡ªæˆ‘æš—ç¤ºè®­ç»ƒå’Œæ¸è¿›å¼è‚Œè‚‰æ”¾æ¾ï¼›è¿åŠ¨ç–—æ³•ï¼›æ…¢æ…¢çš„æ·±å‘¼å¸ï¼Œæ…¢æ…¢è°ƒæ•´èŠ‚å¥å’Œæ‘’æ°”ï¼›å€¾å¬è½»éŸ³ä¹ï¼› 3-2-1å‡çº§ç‰ˆï¼š3åˆ†é’Ÿé˜…è¯»ï¼Œ2åˆ†é’Ÿæ€»ç»“å±‚æ¬¡è¦ç‚¹ï¼›2åˆ†é’Ÿé˜…è¯»ï¼Œ1åˆ†é’Ÿæ€»ç»“å±‚æ¬¡è¦ç‚¹ å€’Sæ›²çº¿å¼å¿«é€Ÿæµè§ˆï¼Œæ…¢æ…¢è¯»ä¸ä¸€å®šæ‡‚å¾—æ›´å¤šï¼Œç®€å•çš„è¯´å°±æ˜¯ä¸€æ¬¡è¯»ä¸€è¡Œå˜æˆä¸€æ¬¡è¯»ä¸¤è¡Œï¼Œè¯»ä¸‰è¡Œç­‰ç­‰ï¼Œé˜…è¯»å®Œä¸€å®šè¦è®°å¾—å¼„è„‘å›¾ ç¬¬ä¸€å¤©é€‚åº”é˜…è¯»ï¼Œç¬¬äºŒå¤©æ‹“å®½è§†çº¿èŒƒå›´ï¼Œç¬¬ä¸‰å¤©ç»ƒä¹ 3-2-1ã€‚ã€‚ã€‚ç¬¬äºŒå‘¨å¼€å§‹ä½¿ç”¨è„‘å›¾å†ç»ƒä¹ ä¸€å‘¨ ç†è§£æ˜¯è®°å¿†çš„é‡è¦å‰æï¼Œè”æƒ³å»ºç«‹åœ¨çŸ¥è¯†ç½‘ç»œåŸºç¡€ä¸Šï¼Œæƒ³è¦è®°ä½æŸäº›ä¸œè¥¿ï¼Œä¸€å®šè¦å……åˆ†è°ƒåŠ¨è‡ªå·±çš„äº”å®˜ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„ä¸»å¯¼æ„Ÿå®˜ï¼Œæˆ‘æ˜¯å¬åŠ›ï¼Œä¸è¿‡å¤šå¤šç»ƒä¹ æ€»æ˜¯èƒ½è°ƒåŠ¨æ›´å¤šçš„æ„Ÿå®˜çš„ åœ¨å­¦ä¹ æ€»ä¸æ–­ä¸­æ–­åˆç»§ç»­çš„è¿‡ç¨‹ä¸­æ¶ˆè€—çš„ç²¾åŠ›æ˜¯æƒŠäººçš„ã€‚å­¦ä¹ æŽ§åˆ¶è‡ªå·±çš„æ„Ÿå®˜æ¸ é“:GEWAR , Gï¼šç§¯æžçš„å¿ƒæ€ï¼›Eï¼Œæ”¾æ¾çš„çŠ¶æ€ï¼›Wï¼Œå……è¶³çš„åŠ¨åŠ›ï¼›Rï¼šåŠæ—¶å¤ä¹ ï¼›Aï¼Œé›†ä¸­æ³¨æ„åŠ›ï¼Œéœ€è¦éšæ—¶éšåœ°çš„è®­ç»ƒè‡ªå·±çš„æ„Ÿå®˜ï¼›æœ€å¥½æŠŠæž¯ç‡¥çš„çŸ¥è¯†æ”¹ç¼–æˆæœ‰è¶£çš„æ•…äº‹ è‡ªå¾‹åˆ†æˆä¸‰éƒ¨åˆ†ï¼šæ˜Žç¡®ç›®æ ‡ï¼ŒåšæŒä¸æ‡ˆå’Œè‡ªæˆ‘æŽ§åˆ¶ é¿å…ä¸€å­—ä¸€å¥é»˜å¿µçš„ä¹ æƒ¯ åˆç†å®‰æŽ’å­¦ä¹ æ—¶é—´ï¼Œå­¦ä¹ æ—¶é—´è¶Šé•¿èŽ·å¾—çŸ¥è¯†è¶Šå°‘ï¼çœŸæ­£çš„å­¦ä¹ ç†è§£å¹¶éžä¸Žè®°å¿†åŒæ­¥ï¼Œè€Œæ˜¯åœ¨ä¼‘æ¯çš„æ—¶å€™å®Œæˆçš„ï¼Œä¹Ÿå°±æ˜¯è¿žç»­å­¦ä¹ 40~50åˆ†é’Ÿä»¥åŽï¼Œå¤§è„‘å·²é¥±å’Œï¼Œç”¨ä¸€åˆ†é’Ÿå¿«é€Ÿæ€»ç»“æ¶ˆåŒ–å¸æ”¶ï¼Œå¿«é€Ÿæ¢³ç†ç»“æž„ï¼Œç„¶åŽä¼‘æ¯5åˆ†é’Ÿï¼Œï¼æ‰€è°“ä¼‘æ¯å°±æ˜¯è®©å¤§è„‘å½»åº•æ”¾æ¾ï¼Œè€Œä¸æ˜¯æ¢ä¸€ä¸ªå­¦ç§‘ï¼Œæ¢ä¸€ä¸ªçŸ¥è¯†ï¼ä¸€åˆ‡å…³é”®åœ¨äºŽä¸è¦ç»™å¤§è„‘è¾“å…¥æ–°çš„ä¸œè¥¿ï¼5åˆ†é’ŸåŽåªè¦ç¨å¾®å›žå¿†ä¸€ä¸‹ï¼Œå°±å¯ä»¥å¼€å§‹ç»§ç»­å­¦ä¹ äº†ï¼ çªå‘æƒ…å†µï¼Œä¾‹å¦‚ï¼šå¦‚æžœæ‰‹å¤´æ­£åœ¨å†™æ–‡ç« ï¼Œçªç„¶æ¥äº†ç”µè¯ï¼Œæ€Žä¹ˆåŠžï¼Ÿæœ€å¥½æ˜¯å…ˆç¨å¾®æ€»ç»“æ¢³ç†ä¸€ä¸‹åšåˆ°å“ªä¸€æ­¥äº†ï¼Œç„¶åŽåœ¨æŽ¥ç”µè¯å¤„ç†ç”µè¯çš„äº‹æƒ…ï¼æœ€å¥½å†™ä¸ªä¾¿ç­¾ï¼Œéšæ—¶æ³¨æ„åˆ‡æ¢å·¥ä½œçŠ¶æ€ï¼Œå…å¾—å¤ªå¿™çš„æ—¶å€™å¿˜äº† æ—¶é—´ç®¡ç†ï¼šAï¼Œè®¢ç«‹å…·ä½“æ˜Žç¡®çš„ç›®æ ‡ï¼éƒ½è¯´è°çŸ¥é“5å¹´ä»¥åŽä¸–ç•Œæ˜¯ä»€ä¹ˆæ ·å­ï¼Œä½†æ€»æ˜¯è¦æƒ³å¥½è‡ªå·±æ€Žä¹ˆè¿‡çš„ï¼Œæˆ‘ä»¬ä¸€è·¯å¥‹æˆ˜ä¸æ˜¯ä¸ºäº†æ”¹å˜ä¸–ç•Œï¼Œåªæ˜¯ä¸è®©ä¸–ç•Œæ”¹å˜æˆ‘ä»¬ï¼ä»»ä½•ä¸€æ®µéƒ½æ˜¯è¦æœ‰ çŸ­ ä¸­ é•¿ æœŸç›®æ ‡ï¼Œä¸è¦æ€¥åŠŸè¿‘åˆ©ï¼æŠŠè‡ªå·±çš„æƒ³æ³•ä¸€å­—ä¸€å¥çš„è®°ä¸‹æ¥ï¼ŒæŠŠç›®æ ‡æ”¾åœ¨çœ¼å‰ï¼Œå¦åˆ™å†…å¿ƒçš„æƒ°æ€§å°±ä¼šé€æ¸å æ®ä¸Šé£Žï¼ä¸æ–­åœ°è‡ªæˆ‘å¿ƒç†æš—ç¤ºç›®æ ‡ï¼Œèº«ä½“å°±ä¼šéšä¹‹è€ŒåŠ¨ï¼è®¾å®šç›®æ ‡åŽŸåˆ™ï¼šSMART,å…·ä½“ï¼Œå¯è¡¡é‡ï¼Œç§¯æžï¼ŒçŽ°å®žå’Œæœ‰æ—¶é—´é™åˆ¶ï¼› Bï¼Œè®°å½•æ—¶é—´æ—¥è®°ï¼ŒæŠ“ä½æ—¶é—´çªƒè´¼ï¼å…ˆè®°å½•ä¸€ä¸‹æ¯å¤©éƒ½åšä»€ä¹ˆï¼ŸèŠ±å¤šé•¿æ—¶é—´ï¼Ÿå…ˆè®¤æ¸…æ¥šè‡ªå·±æ˜¯ä»€ä¹ˆæ ·å­å†è¯´ï¼Œä¸€å®šè¦çœŸå®žï¼Œä¸ç®¡åšçš„æ˜¯åº”è¯¥è¿˜æ˜¯ä¸åº”è¯¥ï¼Œæµªè´¹ä¸æµªè´¹ï¼ŒçŽ°åœ¨è¦åšçš„äº‹æƒ…å°±æ˜¯æ¯å¤©èŠ±å¤šå°‘æ—¶é—´éƒ½åœ¨å¹²å•¥ï¼Œè€Œä¸æ˜¯è¦é©¬ä¸Šç«‹å³å¼€å§‹åšä»€ä¹ˆï¼ Cï¼Œåˆ¶å®šæ¯æ—¥è®¡åˆ’ï¼Œåˆ©ç”¨å‰ä¸€å¤©æ™šä¸Šç¡è§‰å‰åˆ¶å®šè®¡åˆ’ã€‚å¤§è„‘é¢„æ¼”ä¸€éï¼Œåˆ›é€ å¿ƒç†çš„æ½œåœ¨å®‰å…¨æ„Ÿï¼Œä»Žè€Œæé«˜ç¡çœ è´¨é‡ï¼Dï¼Œåˆ—å‡ºé‡è¦çš„äº‹åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡éƒ½è¦é—®èƒ½ä¸èƒ½æœç›®æ ‡æ›´è¿›ä¸€æ­¥ï¼Œå¦‚æžœä¸èƒ½ï¼Œå°½é‡ä¸åšï¼Œå³ä¾¿å¿…é¡»è¦åšä¹Ÿè¦å°½é‡å°‘çš„èŠ±è´¹æ—¶é—´ï¼›E,åˆ†æ¸…äº‹åŠ¡è½»é‡ç¼“æ€¥ï¼Œè°¨è®°28å®šå¾‹ï¼Œåªè¦ä¸€å¼€å§‹å°±å®Œæˆæœ€é‡è¦æœ€éº»çƒ¦çš„äº‹æƒ…ï¼Œå‰©ä¸‹çš„äº‹æƒ…å°±å¾ˆç®€å•äº†ï¼å››è±¡é™æ³•åˆ™ï¼Œè€Œä¸”ä¸€å®šè¦é¢„ç•™è¶³å¤Ÿçš„æ—¶é—´ï¼Œæ¯å¤©æœ€åŽè¦æ£€æŸ¥å®ŒæˆçŠ¶æ€ï¼Œå¹¶æ€»ç»“ï¼ å‰è¿›ï¼Œå‰è¿›ï¼Œä¸æ‹©æ‰‹æ®µçš„å‰è¿›ï¼ ç³»ç»Ÿå¤ä¹ æ³•æ‰“é€ è¶…çº§è®°å¿†ï¼ç¬¬ä¸€æ¬¡å¤ä¹ ï¼Œ10åˆ†é’Ÿï¼›ç¬¬äºŒæ¬¡ï¼Œä¸€å¤©ï¼›ç¬¬ä¸‰æ¬¡ï¼Œä¸€ä¸ªæ˜ŸæœŸï¼›ç¬¬å››æ¬¡å¤ä¹ ï¼Œä¸€ä¸ªæœˆï¼›ç¬¬äº”æ¬¡å¤ä¹ ï¼Œ6ä¸ªæœˆï¼›è€Œä¸”æœ€å¥½å­¦ä¹ å½“å¤©æ™šä¸Šå¤ä¹ ä¸€éï¼Œè‡³å°‘4åˆ†ä¹‹ä¸€çš„æ—¶é—´ç”¨æ¥å¤ä¹ ï¼Œè„‘å›¾èƒ½æé«˜å¤ä¹ æ•ˆçŽ‡ï¼è®°å¿†æ–‡ä»¶å¤¹å¤ä¹ æ³•ï¼Œä¾‹ï¼šå‘¨ä¸€1ï¼Œå‘¨ä¸€2ï¼Œå‘¨äºŒ1ï¼Œå‘¨äºŒ2ç­‰ï¼Œæ‰€æœ‰æ ‡è®°ä¸º1çš„éƒ½æ˜¯å‰ä¸€å¤©å¤ä¹ çš„å†…å®¹ï¼ˆç¬¬äºŒæ¬¡å¤ä¹ ï¼‰ï¼Œæ‰€æœ‰æ ‡è®°ä¸º2çš„éƒ½å¯¹åº”ä¸‹ä¸€å‘¨å¤ä¹ å†…å®¹ï¼ˆç¬¬ä¸‰æ¬¡å¤ä¹ ï¼‰]]></content>
      <categories>
        <category>è¯»ä¹¦</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[nil&id&NSObject]]></title>
    <url>%2F2015%2F03%2F17%2Fnil-id-NSObject%2F</url>
    <content type="text"><![CDATA[nilï¼šç©ºå¯¹è±¡,å‘é€æ¶ˆæ¯å®‰å…¨ 12// æ²¡æœ‰å†…å­˜åœ°å€NSString *str = nil; NSNullï¼šå€¼ä¸º ç©º çš„å¯¹è±¡ 12// å†…å­˜åœ°å€ä¸º Ox101zce9ea8NSNull *null = [NSNull null]; NULLï¼šCçš„çš„ç©ºæŒ‡é’ˆ 12// pæ˜¯ç©ºæŒ‡é’ˆint *p = NULL; id å¯æŒ‡å‘ä»»ä½•OCç±»åž‹çš„æŒ‡é’ˆ,è€Œ void * è¡¨ç¤ºCè¯­è¨€ä¸­å¯æŒ‡å‘ä»»ä½•ç±»åž‹çš„æŒ‡é’ˆ 12// str2 å†…å­˜ä¸­å°±æ˜¯NSStringç±»åž‹id str2 = @&quot;idä¸€ä¸ªæŒ‡é’ˆ,å¯æŒ‡å‘ä»»ä½•OCç±»åž‹,ä¸”ä¸ç”¨åŠ  * å·&quot;; NSObjectæ˜¯OCçš„åŸºç±»,ä½†å¹¶ä¸æ˜¯æ‰€æœ‰OCå¯¹è±¡éƒ½ç»§æ‰¿NSObject,ä¾‹å¦‚NSProxy 123// å£°æ˜Žä¸€ä¸ªNSObjectç±»åž‹çš„å¯¹è±¡,å†…å­˜åœ°å€ä¸ºOx600000c2c300NSObject *ob = [[NSObject alloc] init]; NSOjbectè¿˜å¯ä»¥æ˜¯åè®®,åªä¸è¿‡åŒåç½¢äº† 1id&lt;NSObject&gt; obdelegate; // è¡¨ç¤ºä¸€ä¸ªéµå¾ªNSObjectåè®®çš„å¯¹è±¡]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•é˜…è¯»ä¸€æœ¬ä¹¦]]></title>
    <url>%2F2015%2F03%2F01%2F%E5%A6%82%E4%BD%95%E9%98%85%E8%AF%BB%E4%B8%80%E6%9C%AC%E4%B9%A6%2F</url>
    <content type="text"><![CDATA[1 é˜…è¯»çš„å±‚æ¬¡1.1 é˜…è¯»çš„æ´»åŠ›ä¸Žè‰ºæœ¯ æ³›æ»¥çš„èµ„è®¯å±žäºŽè¢«åŠ¨é˜…è¯»ï¼ˆæ˜¯ä¸æ˜¯å¾ˆæœ‰æ„æ€ï¼Œæ˜Žæ˜Žæ˜¯è‡ªå·±æ²¡äº‹å¹²ï¼Œåˆ· åˆ· åˆ· åˆ·å‡ºæ¥çš„ï¼‰ï¼Œç”¨ä¸ç€è‡ªå·±æ€è€ƒ é˜…è¯»è¶Šä¸»åŠ¨ï¼Œæ•ˆæžœè¶Šå¥½ã€‚å‚ä¸Žå…¶ä¸­ï¼Œæ€è€ƒæŠ€å·§ã€‚ ä¸€çœ‹å°±æ‡‚çš„å±žäºŽèµ„è®¯ï¼Œçœ‹äº†åŠå¤©ä¸åŠ¨çš„æ˜¯ä¸ºäº†ç†è§£ã€‚å¢žå¼ºç†è§£èƒ½åŠ›æ˜¯æ ¸å¿ƒã€‚ 1.2 é˜…è¯»çš„å±‚æ¬¡ åŸºç¡€é˜…è¯»ï¼šè®¤è¯†å­—ï¼Œèƒ½æŠŠæ–‡æ®µä¸²èµ·æ¥ã€‚ æ£€è§†é˜…è¯»ï¼šä¸€å®šæ—¶é—´å†…æŠ“é‡ç‚¹ï¼Œæ£€è§†ç›®å½•ï¼Œæœ€èµ·ç çŸ¥é“ä¹¦å«ä»€ä¹ˆï¼Ÿæž¶æž„ï¼Ÿå“ªäº›éƒ¨åˆ†ï¼Ÿ åˆ†æžé˜…è¯»ï¼šå…¨ç›˜é˜…è¯»ï¼Œå®Œæ•´é˜…è¯»ã€‚ä¸€ç§ä¸“æ³¨æ´»åŠ¨ï¼Œè¦æŠ“ç´§é˜…è¯»ï¼Œç›´åˆ°è¿™æœ¬ä¹¦æˆä¸ºä»–è‡ªå·±ä¸ºæ­¢ã€‚ é«˜å±‚æ¬¡é˜…è¯»ï¼šä¸»é¢˜é˜…è¯»ï¼Œæ¶‰åŠé¢å¹¿ï¼Œè¯»çš„ä¹¦å¤š 1.3 åŸºç¡€é˜…è¯»1.4 æ£€è§†é˜…è¯» æœ‰ç³»ç»Ÿçš„ç•¥è¯»æˆ–ç²—è¯»ï¼Œäº‹å®žä¸Šå³ä¾¿åº”è¯¥ç²¾è¯»çš„ä¹¦å¼€å§‹ä¹Ÿè¦ç•¥è¯»ç²—è¯»ã€‚ ç•¥è¯»å»ºè®®ï¼š Aï¼Œå…ˆçœ‹ä¹¦åï¼Œå¿«é€Ÿçœ‹åºï¼Œç‰¹åˆ«æ³¨æ„å‰¯æ ‡é¢˜ç­‰ç›¸å…³è¯´æ˜Žï¼› Bï¼Œä»”ç»†é˜…è¯»ç›®å½•é¡µï¼› Cï¼Œå¦‚æžœä¹¦ä¸­é™„æœ‰ç´¢å¼•ï¼Œä¹Ÿè¦æ£€é˜…ä¸€ä¸‹ï¼Œå¯ä»¥å¿«é€Ÿè¯„ä¼°ä¹¦è®ºè¿°èŒƒå›´ï¼Œé‡ç‚¹å¼•ç”¨å¯èƒ½è·Ÿè®ºç‚¹è®ºæ®æœ‰å…³ï¼› Dï¼Œå¦‚æžœé‚£æ˜¯æœ¬åŒ…ç€ä¹¦è¡£çš„æ–°ä¹¦ï¼Œä¸å¦¨è¯»ä¸€ä¸‹å‡ºç‰ˆè€…çš„ä»‹ç»ã€‚è‡ªæˆ‘ä»‹ç»éƒ½ä¸è¡Œï¼ŒçžŽå¹ï¼Œå°±å¯ä»¥æ”¾å¼ƒäº†ï¼› Eï¼Œä»Žä½ å¯¹ä¸€æœ¬ä¹¦çš„ç›®å½•å¾ˆæ¦‚ç•¥ï¼Œç”šè‡³æœ‰ç‚¹æ¨¡ç³Šçš„å°è±¡å½“ä¸­ï¼Œå¼€å§‹æŒ‘å‡ ä¸ªçœ‹æ¥è·Ÿä¸»é¢˜å˜»å˜»ç›¸å…³çš„ç¯‡ç« æ¥çœ‹ï¼Œå¦‚æžœè¿™äº›ç¯‡ç« åœ¨å¼€å¤´æˆ–è€…ç»“å°¾æœ‰æ‘˜è¦è¯´æ˜Žï¼Œå°±è¦ä»”ç»†çš„é˜…è¯»è¿™äº›è¯´æ˜Žï¼› Fï¼Œæœ€åŽä¸€æ­¥ï¼ŒæŠŠä¹¦æ‰“å¼€æ¥ï¼Œä¸œç¿»ç¿»è¥¿ç¿»ç¿»ï¼Œå¿µä¸ªä¸€ä¸¤æ®µï¼Œæœ‰æ—¶å€™è¿žç»­è¯»å‡ é¡µï¼Œä½†ä¸è¦å¤ªå¤šï¼Œå°±ç”¨è¿™æ ·çš„æ–¹æ³•æŠŠå…¨ä¹¦ç¿»è¿‡ä¸€éï¼Œéšæ—¶å¯»æ‰¾ä¸»è¦è®ºç‚¹çš„è®¯å·ï¼Œç•™æ„ä¸»é¢˜çš„åŸºæœ¬è„‰åŠ¨ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œä¸è¦å¿½ç•¥æœ€åŽçš„ä¸¤ä¸‰é¡µï¼Œå°±ç®—æœ€åŽæœ‰åŽè®°ï¼Œä¸€æœ¬ä¹¦çš„æœ€åŽç»“å°¾çš„ä¸¤ä¸‰é¡µä¹Ÿè¿˜æ˜¯ä¸å¯å¿½è§†çš„ã€‚ ç²—æµ…çš„é˜…è¯»ï¼šå¤´ä¸€æ¬¡é¢å¯¹ä¸€æœ¬éš¾è¯»çš„ä¹¦çš„æ—¶å€™ï¼Œä»Žå¤´åˆ°å°¾å…ˆè¯»å®Œä¸€éï¼Œç¢°åˆ°ä¸æ‡‚å¾—åœ°æ–¹ä¸åœä¸‹æ¥æŸ¥è¯¢æˆ–æ€ç´¢ã€‚ä¸è¦è¢«ä¸€ä¸ªçœ‹ä¸æ‡‚çš„åœ°æ–¹é˜»æŒ æˆ–æ³„æ°”ï¼Œå…ˆè¯»ä¸€éå†è¯´ã€‚ é˜…è¯»çš„é€Ÿåº¦ï¼Œè®¸å¤šä¹¦å…¶å®žè¿žç•¥è¯»éƒ½ä¸å€¼å¾—çš„ï¼Œå¦å¤–ä¸€äº›ä¹¦åªéœ€è¦å¿«é€Ÿè¯»è¿‡å°±è¡Œäº†ã€‚æ ¸å¿ƒå°±æ˜¯ï¼Œè¦çŸ¥é“ä»€ä¹ˆæ—¶å€™ç”¨ä»€ä¹ˆé€Ÿåº¦æ˜¯æ°å½“çš„ã€‚æ…¢ä¸è¯¥æ…¢åˆ°ä¸å€¼å¾—ï¼Œå¿«ä¸è¯¥å¿«åˆ°æœ‰æŸäºŽæ»¡è¶³äºŽç†è§£ã€‚ é€—ç•™ä¸Žå€’é€€ï¼Œç®€å•çš„è¯´å°±æ˜¯å¿«é€Ÿçœ‹ä¹¦ï¼Œæ„Ÿè§‰çœ‹ä¸æ¸…è€Œæš‚åœæˆ–å›žå¤´é‡çœ‹ï¼Œè¿™æ˜¯åä¹ æƒ¯ï¼ï¼ï¼äº‹å®žä¸Šå¤§è„‘å¯ä»¥åœ¨â€œä¸€çž¥â€é—´æŽŒæ¡ä¸€ä¸ªå¥å­æˆ–æ®µè½ï¼Œåªè¦çœ¼ç›èƒ½å¤Ÿæä¾›è¶³å¤Ÿçš„èµ„è®¯ã€‚ è®­ç»ƒæ–¹æ³•ï¼šå°†å¤§æ‹‡æŒ‡ä¸Žé£ŸæŒ‡ï¼Œä¸­æŒ‡åˆå¹¶åœ¨ä¸€èµ·ï¼Œç”¨è¿™ä¸ªâ€œæŒ‡é’ˆâ€é¡ºç€ä¸€è¡Œä¸€è¡Œçš„å­—ç§»åŠ¨ä¸‹åŽ»ï¼Œé€Ÿåº¦è¦æ¯”ä½ çš„çœ¼ç›æ„Ÿè§‰è¿˜è¦å¿«ä¸€ç‚¹ï¼Œå¼ºè¿«è‡ªå·±çš„çœ¼ç›è·Ÿç€æ‰‹éƒ¨çš„åŠ¨ä½œç§»åŠ¨ã€‚ä¸€æ—¦ä½ çš„çœ¼ç›è·Ÿç€æ‰‹éƒ¨ç§»åŠ¨ï¼Œä½ å°±èƒ½è¯»åˆ°é‚£äº›å­—å¥äº†ã€‚ ç†è§£çš„é—®é¢˜ï¼Œä¸€æ—¦ä½ èƒ½è·Ÿéšè‡ªå·±çš„æ‰‹æŒ‡é˜…è¯»ï¼Œå°±å¾ˆéš¾æ‰“çžŒç¡ï¼Œèƒ¡æ€ä¹±æƒ³äº† 1.5 å¦‚ä½•åšä¸€ä¸ªè‡ªæˆ‘è¦æ±‚çš„è¯»è€… ä¸»åŠ¨é˜…è¯»çš„åŸºç¡€ï¼Œå…³äºŽä¸€æœ¬ä¹¦ï¼Œä½ ä¸€å®šè¦æå‡ºå››ä¸ªä¸»è¦é—®é¢˜ï¼š Aï¼Œæ•´ä½“æ¥è¯´ï¼Œè¿™æœ¬ä¹¦åˆ°åº•åœ¨è°ˆäº›ä»€ä¹ˆï¼Ÿä¸€å®šè¦æƒ³åŠžæ³•æ‰¾å‡ºä¸»é¢˜ï¼Œä½œè€…å¦‚ä½•ä¾æ¬¡å‘å±•è¿™ä¸ªä¸»é¢˜ï¼Œå¦‚ä½•é€æ­¥ä»Žæ ¸å¿ƒä¸»é¢˜åˆ†è§£å‡ºä»Žå±žçš„å…³é”®è®®é¢˜æ¥ï¼› Bï¼Œä½œè€…ç»†éƒ¨è¯´äº†ä»€ä¹ˆï¼Œæ€Žä¹ˆè¯´çš„ï¼Ÿä¸€å®šè¦æƒ³åŠžæ³•æ‰¾å‡ºä¸»è¦çš„æƒ³æ³•ï¼Œå£°æ˜Žå’Œè®ºç‚¹ï¼Œè¿™äº›ç»„åˆæˆä½œè€…æƒ³è¦ä¼ è¾¾çš„ç‰¹æ®Šè®¯æ¯ï¼› Cï¼Œè¿™æœ¬ä¹¦è¯´çš„æœ‰é“ç†å—ï¼Ÿæ˜¯å…¨éƒ¨æœ‰é“ç†è¿˜æ˜¯éƒ¨åˆ†æœ‰é“ç†ï¼Ÿ Dï¼Œè¿™æœ¬ä¹¦è·Ÿæˆ‘æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ ä»»ä½•ä¸€ç§è¶…è¶ŠåŸºç¡€é˜…è¯»çš„é˜…è¯»å±‚æ¬¡ï¼Œæ ¸å¿ƒå°±åœ¨ä½ è¦åŠªåŠ›æå‡ºé—®é¢˜ï¼Œç„¶åŽå°½å¯èƒ½çš„æ‰¾åˆ°ç­”æ¡ˆã€‚ å¦‚ä½•è®©ä¸€æœ¬ä¹¦çœŸæ­£å±žäºŽä½ è‡ªå·± æœ€å¥½çš„æ–¹å¼å°±æ˜¯å†™ä¸‹æ¥ï¼Œåšç¬”è®°ï¼Œæœ€å¥½æœ‰ä¸€å¥—è‡ªå·±çš„æ ‡æ³¨ä¹ æƒ¯ï¼Œç¬”è®°ä¹ æƒ¯ï¼ è¿˜æœ‰ä¸€ä¸ªåŠžæ³•ï¼Œè„‘å›¾ï¼ åŸ¹å…»é˜…è¯»ä¹ æƒ¯ï¼šæ…¢æ…¢æ¥ 2 é˜…è¯»çš„ä¸‰ä¸ªå±‚æ¬¡ï¼šåˆ†æžé˜…è¯»2.1 ä¸€æœ¬ä¹¦çš„åˆ†ç±» ä¹¦ç±åˆ†ç±»çš„é‡è¦æ€§ï¼Œåˆ†æžé˜…è¯»çš„ç¬¬ä¸€ä¸ªè§„åˆ™å¯ä»¥è¿™ä¹ˆè¯´ï¼Œä½ ä¸€å®šè¦çŸ¥é“è‡ªå·±åœ¨è¯»çš„æ˜¯å“ªä¸€ç±»ä¹¦ï¼Œè€Œä¸”è¶Šæ—©çŸ¥é“è¶Šå¥½ï¼Œæœ€å¥½åœ¨iå¼€å§‹é˜…è¯»ä¹‹å‰å°±å…ˆçŸ¥é“ã€‚ åŒºåˆ†å®žç”¨ä¹¦å’Œç†è®ºä¹¦ï¼Œé¦–å…ˆè¦å­¦ä¹ åŽ»æ€€ç–‘ä¸€åˆ‡ï¼›ä¼ ç»Ÿç†è®ºä¹¦è¢«åˆ†ç±»æˆåŽ†å²ã€ç§‘å­¦å’Œå“²å­¦ï¼ˆå¦‚æžœä¸€æœ¬ç†è®ºä¹¦è¶…è¶Šä½ æ—¥å¸¸ç”Ÿæ´»ç»éªŒï¼Œé‚£å°±æ˜¯ç§‘å­¦ä¹¦ï¼‰ç­‰ç­‰ 2.2 é€è§†ä¸€æœ¬ä¹¦ åˆ†æžé˜…è¯»çš„ç¬¬äºŒä¸ªè§„åˆ™ï¼šå®žç”¨ä¸€ä¸ªå•ä¸€çš„å¥å­ï¼Œæˆ–æœ€å¤šå‡ å¥è¯ï¼ˆä¸€å°æ®µè¯ï¼‰æ¥å™è¿°æ•´æœ¬ä¹¦çš„å†…å®¹ã€‚å¥½çš„ä½œè€…ï¼Œæ€»æ˜¯åœ¨å¸®è¯»è€…æ•´ç†ï¼Œè€Œä¸”æœ€é‡è¦çš„æ˜¯æ€»ç»“åªæœ‰å¥½åä¹‹åˆ†æ²¡æœ‰å¯¹é”™ä¹‹åˆ«ã€‚ ç¬¬ä¸‰ä¸ªè§„åˆ™å¯ä»¥è¯´æˆï¼šå°†ä¹¦ä¸­é‡è¦çš„ç¯‡ç« åˆ—ä¸¾å‡ºæ¥ï¼Œè¯´æ˜Žä»–ä»¬å¦‚ä½•æŒ‰ç…§é¡ºåºç»„æˆä¸€ä¸ªæ•´ä½“çš„æž¶æž„ã€‚ æŒ‰ç…§é¡ºåºä¸Žå…³ç³»ï¼Œåˆ—å‡ºå…¨ä¹¦çš„é‡è¦éƒ¨åˆ†ï¼Œå°†å…¨ä¹¦çš„çº²è¦æ‹Ÿå‡ºæ¥åŽï¼Œå†å°†å„ä¸ªéƒ¨åˆ†çš„çº²è¦ä¹Ÿä¸€ä¸€åˆ—å‡ºã€‚è‡ªå·±åˆ—çš„æçº²ä¸ä¸€å®šä¸Žä½œè€…åˆ—çš„ä¸€æ ·ï¼Œåªæ˜¯æ ¹æ®è‡ªå·±çš„ç†è§£è‡ªå·±æ€»ç»“çš„ä¸œè¥¿ç½¢äº†ã€‚ åƒä¸‡ä¸è¦åœ¨è¯»ä¸å‡ºå¤´ç»ªçš„æ—¶å€™ï¼Œå°±è®¤ä¸ºæ˜¯è‡ªå·±çš„é—®é¢˜ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ä½œè€…æœ¬æ¥å°±å¾ˆçƒ‚å‘€ï¼ä½†è¿˜æ˜¯è¦å°½é‡è¯»å‡ºç‚¹ä¸œè¥¿æ¥ï¼ æ‰¾å‡ºä½œè€…åœ¨é—®çš„é—®é¢˜ï¼Œæˆ–ä½œè€…æƒ³è¦è§£å†³çš„é—®é¢˜ã€‚ 2.3 ä¸Žä½œè€…æ‰¾å‡ºå…±é€šçš„è¯ä¹‰ã€‚ è§„åˆ™å››ï¼šæ‰¾å‡ºå…±é€šçš„è¯ä¹‰ è§„åˆ™äº”ï¼šæ‰¾å‡ºé‡è¦çš„å•å­—ï¼Œé€è¿‡å®ƒä»¬ä¸Žä½œè€…è¾¾æˆå…±è¯†ã€‚ä¸€ä¸ªå­—å¯èƒ½è¡¨è¾¾å¾ˆå¤šæ„æ€ï¼Œä¸€å®šè¦æ ¹æ®ä¸Šä¸‹æ–‡æŽ¨æ•²æ­¤å­—ä¹‰å’Œä½œè€…è¦è¡¨è¾¾çš„æ˜¯å¦ä¸€è‡´ã€‚æ‰¾å‡ºå…³é”®å­—ï¼Œä½œè€…ä½¿ç”¨çš„å¤§å¤šæ•°å­—éƒ½ä¸é‡è¦ã€‚ è§„åˆ™å…­ï¼šå°†ä¸€æœ¬ä¹¦ä¸­æœ€é‡è¦çš„å¥å­åœˆå‡ºæ¥ï¼Œæ‰¾å‡ºå…¶ä¸­çš„ä¸»æ—¨ã€‚ä¸»æ—¨æ˜¯è¡¨è¾¾è§‚ç‚¹æˆ–çŸ¥è¯†ã€‚ è§„åˆ™ä¸ƒï¼šä»Žç›¸å…³æ–‡å¥çš„å…³è”ä¸­ï¼Œè®¾æ³•æž¶æž„å‡ºä¸€æœ¬ä¹¦çš„åŸºæœ¬è®ºè¿°ã€‚å‘çŽ°è¯»ä¸æ‡‚çš„å¥å­ï¼Œæ‰¾å‡ºç»„æˆå…³é”®å¥çš„æ–‡å­—ï¼Œæ‰¾åˆ°é¡ºåºï¼Œæœ‰å§‹æœ‰ç»ˆã€‚â€œç”¨ä½ è‡ªå·±çš„è¯æ¥è¯´â€æ˜¯æµ‹éªŒä½ æ‡‚ä¸æ‡‚ä¸€ä¸ªå¥å­çš„ä¸»æ—¨çš„æœ€ä½³æ–¹æ³•ã€‚å¦‚æžœå¯ä»¥æ‰¾å‡ºä¹¦ä¸­è¯´æ˜Žé‡è¦è®ºè¿°çš„æ®µè½ã€‚ è§„åˆ™å…«ï¼šæ‰¾å‡ºä½œè€…åœ¨ä¹¦ä¸­æƒ³è¦è§£å†³çš„ä¸»è¦é—®é¢˜ 2.4 æ‰¹åˆ¤æ€§é˜…è¯» è§„åˆ™ä¹ï¼šè¦æ±‚è¯»è€…å…ˆå®Œæ•´çš„äº†è§£ä¸€æœ¬ä¹¦ï¼Œä¸è¦æ€¥ç€å¼€å§‹è¯„è®º è§„åˆ™åï¼šæ³è¯·è¯»è€…ä¸è¦äº‰å¼ºå¥½è¾©æˆ–ç›²ç›®åå¯¹ï¼Œè°¨è®°äº‰è®ºæ˜¯åœ¨æ•™å¯¼å’Œå—æ•™ï¼Œéœ€è¦å¾ˆå¤§çš„è€å¿ƒ è§„åˆ™åä¸€ï¼šè¦æ±‚è¯»è€…è¦ä¸ºè‡ªå·±çš„ä¸åŒæ„è§æ‰¾åˆ°ç†è®ºåŸºç¡€ã€‚è¦åŒºåˆ†æ˜¯å¯¹ä½œè€…è¿˜æ˜¯å¯¹ä¹¦æœ‰äº‰è®º 2.5 æ€Žä¹ˆè¯´æœäºº åœ¨è¯»è€…è¯´å‡ºï¼šâ€œæˆ‘äº†è§£ï¼Œä½†æˆ‘ä¸åŒæ„â€ä¹‹åŽï¼Œä»–å¯ä»¥ç”¨ä¸€ä¸‹æ¦‚å¿µæƒ³ä½œè€…è¯´æ˜Žï¼š Aï¼Œä½ çš„çŸ¥è¯†ä¸è¶³ï¼› Bï¼Œä½ çš„çŸ¥è¯†æœ‰é”™è¯¯ï¼› Cï¼Œä½ ä¸åˆé€»è¾‘ï¼Œä½ çš„æŽ¨è®ºshæ— æ³•ä½¿äººä¿¡æœï¼› Dï¼Œä½ çš„åˆ†æžä¸å¤Ÿå®Œæ•´ã€‚ 2.6 ä¸è¦è¢«åˆ«äººå½±å“ ä¸å»ºè®®å¤–åœ¨é˜…è¯»ï¼Œç®€å•çš„è¯´å°±æ˜¯ä»€ä¹ˆä¹¦è¯„ï¼Œæ–‡å‡­å•¥çš„å°½é‡å°‘çœ‹ï¼Œè‡ªå·±åŽ»æ€è€ƒè‡ªå·±åŽ»æƒ³ï¼å¯¼è¯»æ‘˜è¦å¯ä»¥çœ‹ï¼Œä½†ä¹Ÿå°½é‡å°‘çœ‹ï¼æ ¹æœ¬åŽŸå› æ˜¯ï¼Œè¿™äº›ä¸œè¥¿ä¸ä¸€å®šç¬¦åˆä½œè€…çš„æ„æ€ï¼Œä¸ä¸€å®šæ˜¯å¯¹çš„ï¼Œä¸ä¸€å®šæ˜¯å®Œæ•´çš„ï¼ 2.7 å¦‚ä½•é˜…è¯»å®žç”¨åž‹çš„ä¹¦ ä»»ä½•å®žç”¨ä¹¦éƒ½ä¸èƒ½è§£å†³è¯¥ä¹¦æ‰€å…³å¿ƒçš„å®žé™…é—®é¢˜ï¼Œåªèƒ½é è¡ŒåŠ¨æ¥è§£å†³ï¼ è¿™ä¹¦è°ˆä»€ä¹ˆï¼Ÿç›®çš„ï¼ŸçœŸå®žï¼Ÿä¸Žæˆ‘ä½•å¹²ï¼Ÿå¦‚æžœç†è§£ä¸”æŽ¥å—äº†ï¼Œé‚£å°±è¡ŒåŠ¨å§ï¼ 2.8 ç®€å•çš„è¯´å°±æ˜¯å¦‚ä½•åšé˜…è¯»ç†è§£ç¬¬äºŒåç«  ä¸»é¢˜é˜…è¯» å…ˆæ£€è§†é˜…è¯»ä¸€ä¸‹ï¼Œç¡®å®šä¹¦å’Œä¸»é¢˜æ˜¯å¦æœ‰å…³ï¼ŒæŽ¥ä¸‹æ¥äº”æ­¥ æ‰¾åˆ°ç›¸å…³ç« èŠ‚ å¸¦ç€å…±è¯† ç†æ¸…é—®é¢˜ ç•Œå®šè®®é¢˜ åˆ†ä½“è®¨è®º]]></content>
      <categories>
        <category>è¯»ä¹¦</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[UIViewControllerçš„ç”Ÿå‘½å‘¨æœŸ]]></title>
    <url>%2F2015%2F02%2F22%2FUIViewController%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%2F</url>
    <content type="text"><![CDATA[initâ€”&gt;loadViewâ€”&gt;viewDidLoadâ€”&gt;viewWillApperâ€”&gt;viewDidApperâ€”&gt;viewWillDisapperâ€”&gt;viewDidDisapperâ€”&gt;â€”&gt;dealloc VCçš„ç”Ÿå‘½å‘¨æœŸ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172// éžstoryBoard(xibæˆ–éžxib)éƒ½èµ°è¿™ä¸ªæ–¹æ³•,ä¸€èˆ¬ç”¨ä¸ç€ï¼Œä¸è¦åˆå§‹åŒ–view- (instancetype)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil &#123;if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]) &#123;&#125;NSLog(@&quot;%s&quot;, __func__);return self;&#125;// storyBoardèµ°è¿™ä¸ªæ–¹æ³•ï¼Œä¸è¦åˆå§‹åŒ–view- (instancetype)initWithCoder:(NSCoder *)aDecoder &#123;if (self = [super initWithCoder:aDecoder]) &#123;&#125;NSLog(@&quot;%s&quot;, __func__);return self;&#125;// xib åŠ è½½å®Œæˆï¼Œå¯ä»¥ç›´æŽ¥ç”¨xibçš„è¿žçº¿viewäº†- (void)awakeFromNib &#123;[super awakeFromNib];NSLog(@&quot;%s&quot;, __func__);&#125;// åŠ è½½è§†å›¾ï¼Œä¸åº”è¯¥ç›´æŽ¥è¢«è°ƒç”¨ï¼Œåœ¨UIViewControllerå¯¹è±¡çš„viewè¢«è®¿é—®ä¸”ä¸ºç©ºçš„æ—¶å€™ç”±ç³»ç»Ÿè°ƒç”¨- (void)loadView &#123;// æ²¡æœ‰è°ƒç”¨superself.view = [[UIView alloc] initWithFrame:[UIScreen mainScreen].bounds];self.view.backgroundColor = [UIColor redColor];NSLog(@&quot;%s&quot;, __func__);&#125;// è§†å›¾æŽ§åˆ¶å™¨ä¸­çš„è§†å›¾åŠ è½½å®Œæˆï¼Œåªè°ƒç”¨ä¸€æ¬¡- (void)viewDidLoad &#123;[super viewDidLoad];NSLog(@&quot;%s&quot;, __func__);// å¯ç”¨ isViewLoaded åˆ¤æ–­æŸä¸ªVCæ˜¯å¦è°ƒç”¨äº†viewdidloadæ–¹æ³•&#125;// VCå³å°†å¯è§ï¼Œä¸ç¨³å®šçŠ¶æ€ï¼Œä¸è¦åšå¤æ‚æˆ–è€—æ—¶æ“ä½œ- (void)viewWillAppear:(BOOL)animated &#123;[super viewWillAppear:animated];NSLog(@&quot;%s&quot;, __func__);&#125;// VCçš„viewè°ƒlayoutSubviewsä¹‹å‰- (void)viewWillLayoutSubviews &#123;[super viewWillLayoutSubviews];NSLog(@&quot;%s&quot;, __func__);&#125;// VCçš„viewè°ƒlayoutSubviewsä¹‹åŽ- (void)viewDidLayoutSubviews &#123;[super viewDidLayoutSubviews];NSLog(@&quot;%s&quot;, __func__);&#125;// VCå·²ç»å…¨éƒ¨å±•ç¤ºåœ¨å±å¹•ä¸Š- (void)viewDidAppear:(BOOL)animated &#123;[super viewDidAppear:animated];NSLog(@&quot;%s&quot;, __func__);&#125;// è§†å›¾å°†è¦æ¶ˆå¤± dismissed, covered or otherwise hidden- (void)viewWillDisappear:(BOOL)animated &#123;[super viewWillDisappear:animated];NSLog(@&quot;%s&quot;, __func__);&#125;// è§†å›¾å·²ç»æ¶ˆå¤± dismissed, covered or otherwise hidden- (void)viewDidDisappear:(BOOL)animated &#123;[super viewDidDisappear:animated];NSLog(@&quot;%s&quot;, __func__);&#125;// å‡ºçŽ°å†…å­˜è­¦å‘Š - (void)didReceiveMemoryWarning &#123;[super didReceiveMemoryWarning];NSLog(@&quot;%s&quot;, __func__);&#125;// è§†å›¾è¢«é”€æ¯- (void)dealloc &#123;NSLog(@&quot;%s&quot;, __func__);&#125;// æ³¨æ„ï¼šviewWillUnloadå’ŒviewDidUnload å·²ç»è¢«åºŸå¼ƒæŽ‰äº† å‚è€ƒ https://developer.apple.com/documentation/uikit/uiviewcontroller?language=objc]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>UI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ¸…ç†XCode]]></title>
    <url>%2F2015%2F02%2F09%2F%E6%B8%85%E7%90%86XCode%2F</url>
    <content type="text"><![CDATA[è½¬è½½è‡ªhttp://www.cocoachina.com/bbs/read.php?tid=181211 ç¡¬ç›˜ç©ºé—´åƒç´§ï¼Œæ¸…äº†ä¸¤ä¸‰æ¬¡xcodeï¼Œæ— å¥ˆæ²¡è¿‡å¤šé•¿æ—¶é—´åˆæ²¡ç©ºé—´äº†ï¼æœ€ä¸»è¦çš„æ˜¯ï¼ŒæŸ¥äº†ä¸¤ä¸‰æ¬¡çš„æ¸…ç†è·¯å¾„ï¼Œè¿˜æ˜¯è®°ä¸ä½ï¼åœ¨æ­¤ï¼Œæ‘˜æŠ„ä¸‹æ¥ï¼Œä»¥ä¾¿æ—¥åŽæŸ¥é˜… ç§»é™¤å¯¹æ—§è®¾å¤‡çš„æ”¯æŒ å½±å“ï¼šå¯é‡æ–°ç”Ÿæˆï¼›å†è¿žæŽ¥æ—§è®¾å¤‡è°ƒè¯•æ—¶ï¼Œä¼šé‡æ–°è‡ªåŠ¨ç”Ÿæˆã€‚æˆ‘ç§»é™¤äº†4.3.2, 5.0, 5.1ç­‰ç‰ˆæœ¬çš„è®¾å¤‡æ”¯æŒã€‚ è·¯å¾„ï¼š~/Library/Developer/Xcode/iOS DeviceSupport ç§»é™¤æ—§ç‰ˆæœ¬çš„æ¨¡æ‹Ÿå™¨æ”¯æŒ å½±å“ï¼šä¸å¯æ¢å¤ï¼›å¦‚æžœéœ€è¦æ—§ç‰ˆæœ¬çš„æ¨¡æ‹Ÿå™¨ï¼Œå°±éœ€è¦é‡æ–°ä¸‹è½½äº†ã€‚æˆ‘ç§»é™¤äº†4.3.2, 5.0, 5.1ç­‰æ—§ç‰ˆæœ¬çš„æ¨¡æ‹Ÿå™¨ã€‚ è·¯å¾„ï¼š~/Library/Application Support/iPhone Simulator ç§»é™¤æ¨¡æ‹Ÿå™¨çš„ä¸´æ—¶æ–‡ä»¶ å½±å“ï¼šå¯é‡æ–°ç”Ÿæˆï¼›å¦‚æžœéœ€è¦ä¿ç•™è¾ƒæ–°ç‰ˆæœ¬çš„æ¨¡æ‹Ÿå™¨ï¼Œä½†tmpæ–‡ä»¶å¤¹å¾ˆå¤§ã€‚æ”¾å¿ƒåˆ å§ï¼Œtmpæ–‡ä»¶å¤¹é‡Œçš„å†…å®¹æ˜¯ä¸é‡è¦çš„ã€‚åœ¨iOS Deviceä¸­ï¼Œå­˜å‚¨ç©ºé—´ä¸è¶³æ—¶ï¼Œtmpæ–‡ä»¶å¤¹æ˜¯å¯èƒ½è¢«æ¸…ç©ºçš„ã€‚ è·¯å¾„ï¼š~/Library/Application Support/iPhone Simulator/6.1/tmp (ä»¥iOS Simulator 6.1ä¸ºä¾‹) ç§»é™¤DerivedData å½±å“ï¼šå¯é‡æ–°ç”Ÿæˆï¼›ä¼šåˆ é™¤buildç”Ÿæˆçš„é¡¹ç›®ç´¢å¼•ã€buildè¾“å‡ºä»¥åŠæ—¥å¿—ã€‚é‡æ–°æ‰“å¼€é¡¹ç›®æ—¶ä¼šé‡æ–°ç”Ÿæˆï¼Œå¤§çš„é¡¹ç›®ä¼šè€—è´¹ä¸€äº›æ—¶é—´ã€‚ è·¯å¾„ï¼š~/Library/Developer/Xcode/DerivedData]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>å…¶ä»–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Appçš„ç”Ÿå‘½å‘¨æœŸ]]></title>
    <url>%2F2015%2F01%2F31%2FApp%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%2F</url>
    <content type="text"><![CDATA[åº”ç”¨ç¨‹åºçš„çŠ¶æ€ Not runningï¼ˆæœªè¿è¡Œï¼‰ï¼Œç¨‹åºæ²¡å¯åŠ¨ Inactiveï¼ˆæœªæ¿€æ´»ï¼‰ï¼Œç¨‹åºåœ¨å‰å°è¿è¡Œï¼Œä¸è¿‡æ²¡æœ‰æŽ¥æ”¶åˆ°äº‹ä»¶ã€‚åœ¨æ²¡æœ‰äº‹ä»¶å¤„ç†æƒ…å†µä¸‹ç¨‹åºé€šå¸¸åœç•™åœ¨è¿™ä¸ªçŠ¶æ€ Activeï¼ˆæ¿€æ´»ï¼‰ï¼Œç¨‹åºåœ¨å‰å°è¿è¡Œè€Œä¸”æŽ¥æ”¶åˆ°äº†äº‹ä»¶ã€‚è¿™ä¹Ÿæ˜¯å‰å°çš„ä¸€ä¸ªæ­£å¸¸çš„æ¨¡å¼ Backgroudï¼ˆåŽå°ï¼‰ï¼Œç¨‹åºåœ¨åŽå°è€Œä¸”èƒ½æ‰§è¡Œä»£ç ï¼Œå¤§å¤šæ•°ç¨‹åºè¿›å…¥è¿™ä¸ªçŠ¶æ€åŽä¼šåœ¨åœ¨è¿™ä¸ªçŠ¶æ€ä¸Šåœç•™ä¸€ä¼šã€‚æ—¶é—´åˆ°ä¹‹åŽä¼šè¿›å…¥æŒ‚èµ·çŠ¶æ€(Suspended)ã€‚æœ‰çš„ç¨‹åºç»è¿‡ç‰¹æ®Šçš„è¯·æ±‚åŽå¯ä»¥é•¿æœŸå¤„äºŽBackgroudçŠ¶æ€ Suspendedï¼ˆæŒ‚èµ·ï¼‰ï¼Œç¨‹åºåœ¨åŽå°ä¸èƒ½æ‰§è¡Œä»£ç ã€‚ç³»ç»Ÿä¼šè‡ªåŠ¨æŠŠç¨‹åºå˜æˆè¿™ä¸ªçŠ¶æ€è€Œä¸”ä¸ä¼šå‘å‡ºé€šçŸ¥ã€‚å½“æŒ‚èµ·æ—¶ï¼Œç¨‹åºè¿˜æ˜¯åœç•™åœ¨å†…å­˜ä¸­çš„ï¼Œå½“ç³»ç»Ÿå†…å­˜ä½Žæ—¶ï¼Œç³»ç»Ÿå°±æŠŠæŒ‚èµ·çš„ç¨‹åºæ¸…é™¤æŽ‰ï¼Œä¸ºå‰å°ç¨‹åºæä¾›æ›´å¤šçš„å†…å­˜ã€‚ ä¸‹å›¾æ˜¯ç¨‹åºçŠ¶æ€å˜åŒ–å›¾ï¼š å„ä¸ªç¨‹åºè¿è¡ŒçŠ¶æ€æ—¶ä»£ç†çš„å›žè°ƒï¼š12345678910111213141516// åœ¨Appå¯åŠ¨æ—¶è°ƒç”¨è¡¨ç¤ºåº”ç”¨åŠ è½½è¿›ç¨‹å·²ç»å¼€å§‹,å¸¸ç”¨æ¥å¤„ç†åº”ç”¨çŠ¶æ€çš„å­˜å‚¨å’Œæ¢å¤- (BOOL)application:(UIApplication *)application willFinishLaunchingWithOptions:(NSDictionary *)launchOptions// å‘Šè¯‰ä»£ç†å¯åŠ¨åŸºæœ¬å®Œæˆç¨‹åºå‡†å¤‡å¼€å§‹è¿è¡Œ- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions// å½“åº”ç”¨ç¨‹åºå°†è¦å…¥éžæ´»åŠ¨çŠ¶æ€æ‰§è¡Œï¼Œåœ¨æ­¤æœŸé—´ï¼Œåº”ç”¨ç¨‹åºä¸æŽ¥æ”¶æ¶ˆæ¯æˆ–äº‹ä»¶ï¼Œæ¯”å¦‚æ¥ç”µè¯äº†- (void)applicationWillResignActive:(UIApplication *)application// å½“åº”ç”¨ç¨‹åºå…¥æ´»åŠ¨çŠ¶æ€æ‰§è¡Œï¼Œè¿™ä¸ªåˆšå¥½è·Ÿä¸Šé¢é‚£ä¸ªæ–¹æ³•ç›¸å- (void)applicationDidBecomeActive:(UIApplication *)application// å½“ç¨‹åºè¢«æŽ¨é€åˆ°åŽå°çš„æ—¶å€™è°ƒç”¨ã€‚æ‰€ä»¥è¦è®¾ç½®åŽå°ç»§ç»­è¿è¡Œï¼Œåˆ™åœ¨è¿™ä¸ªå‡½æ•°é‡Œé¢è®¾ç½®å³å¯- (void)applicationDidEnterBackground:(UIApplication *)application// å½“ç¨‹åºä»ŽåŽå°å°†è¦é‡æ–°å›žåˆ°å‰å°æ—¶å€™è°ƒç”¨ï¼Œè¿™ä¸ªåˆšå¥½è·Ÿä¸Šé¢çš„é‚£ä¸ªæ–¹æ³•ç›¸åã€‚- (void)applicationWillEnterForeground:(UIApplication *)application// å½“ç¨‹åºå°†è¦é€€å‡ºæ˜¯è¢«è°ƒç”¨ï¼Œé€šå¸¸æ˜¯ç”¨æ¥ä¿å­˜æ•°æ®å’Œä¸€äº›é€€å‡ºå‰çš„æ¸…ç†å·¥ä½œã€‚è¿™ä¸ªéœ€è¦è¦è®¾ç½®UIApplicationExitsOnSuspendçš„é”®å€¼ã€‚- (void)applicationWillTerminate:(UIApplication *)application// å½“ç¨‹åºè½½å…¥åŽæ‰§è¡Œ- (void)applicationDidFinishLaunching:(UIApplication*)application æ³¨æ„é—®é¢˜ iOS8ä¸­,Appä¼šåœ¨æ ¹æŽ§åˆ¶å™¨åˆå§‹åŒ–åŽè°ƒç”¨viewDidAppearæ–¹æ³•ä¹‹åŽæ‰ä¼šè°ƒç”¨applicationDidBecomeActive è€Œåœ¨iOS7ä¸­,Appåœ¨è°ƒç”¨applicationDidBecomeActiveæ–¹æ³•åŽæ‰ä¼šè°ƒç”¨æ ¹æŽ§åˆ¶å™¨çš„viewDidAppear å‚è€ƒ https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/TheAppLifeCycle/TheAppLifeCycle.html iOSåº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸ(å‰åŽå°åˆ‡æ¢,åº”ç”¨çš„å„ç§çŠ¶æ€)è¯¦è§£]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[index 2 beyond bounds [0 .. 0]]]></title>
    <url>%2F2015%2F01%2F12%2Findex-2-beyond-bounds-0-0%2F</url>
    <content type="text"><![CDATA[ç»“è®º ç©ºæ•°ç»„å°±æç¤ºempty array [x .. y] x è¡¨ç¤ºèµ·å§‹ç´¢å¼•éƒ½æ˜¯0ï¼Œy è¡¨ç¤ºç»ˆæ­¢ç´¢å¼•å³count-1 ä¾‹å¦‚ [0 .. 0] ä»£è¡¨æ•°ç»„çš„èµ·å§‹å’Œç»ˆæ­¢ç´¢å¼•éƒ½æ˜¯0ï¼Œå³ä¸€ä¸ªå…ƒç´ ï¼› [0 .. 1]ä»£è¡¨æ•°ç»„åŒ…å«ä¸¤ä¸ªå…ƒç´ ï¼›[0 .. 2]ä»£è¡¨æ•°ç»„åŒ…å«ä¸‰ä¸ªå…ƒç´  ç”±æ¥&emsp;&emsp;releaseåŒ…çªç„¶æœ‰ä¸ªå¶çŽ°çš„crashï¼ŒæŸ¥çœ‹crashæ—¥å¿—å‘çŽ°index 2 beyond bounds [0 .. 0]ï¼Œæƒ³å½“ç„¶çš„ä»¥ä¸º ç©ºæ•°ç»„ æ•°ç»„è¶Šç•Œï¼Œç„¶åŽå°±è´¹å¿ƒå¿ƒæ€çš„æŽ’æŸ¥ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‡ºçŽ°ç©ºæ•°ç»„ï¼ç„¶è€ŒæŠ˜è…¾åŠå¤©ä¹Ÿæ²¡å‘çŽ°ä¼šå‡ºçŽ°ç©ºæ•°ç»„çš„æƒ…å†µï¼Œå‡æ•°æ®ï¼Œæ‰“logéƒ½è¯•äº†ä¸€éï¼Œæœ€å°‘ä¹ŸåŒ…å«ä¸€ä¸ªå¯¹è±¡ï¼æœ€åŽè¿˜æ˜¯å½’æ ¹åˆ°Crashæ—¥å¿—ä¸Šä»”ç»†æŽ’æŸ¥ï¼Œç»è¿‡è¯•éªŒæ‰å‘çŽ°å¯¹ [0 .. 0]ç†è§£é”™äº†ï¼å­¦è‰ºä¸ç²¾ï¼Œå®³äººä¸æµ…å‘€ï¼ç‰¹æ­¤è®°å½• å®žéªŒ ç©ºæ•°ç»„, æ³¨æ„æç¤ºçš„ empty array 123456// ç©ºæ•°ç»„NSMutableArray *photos = [NSMutableArray array];NSLog(@&quot;--- %@&quot;,photos[0]);// Crash// Terminating app due to uncaught exception &apos;NSRangeException&apos;, reason: &apos;*** -[__NSArrayM objectAtIndexedSubscript:]: index 0 beyond bounds for empty array&apos; æ•°ç»„åªæœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œæ³¨æ„æç¤º [0 .. 0] 1234567// æ•°ç»„ï¼ŒåŒ…å«ä¸€ä¸ªå¯¹è±¡NSMutableArray *photos = [NSMutableArray array];[photos addObject:@0];NSLog(@&quot;--- %@&quot;,photos[1]);// Crash// Terminating app due to uncaught exception &apos;NSRangeException&apos;, reason: &apos;*** -[__NSArrayM objectAtIndexedSubscript:]: index 1 beyond bounds [0 .. 0] æ•°ç»„åªæœ‰ä¸¤ä¸ªå¯¹è±¡ï¼Œæ³¨æ„æç¤º [0 .. 1] 12345678// æ•°ç»„ï¼ŒåŒ…å«ä¸¤ä¸ªå¯¹è±¡NSMutableArray *photos = [NSMutableArray array];[photos addObject:@0];[photos addObject:@1];NSLog(@&quot;--- %@&quot;,photos[2]);// Crash// Terminating app due to uncaught exception &apos;NSRangeException&apos;, reason: &apos;*** -[__NSArrayM objectAtIndexedSubscript:]: index 2 beyond bounds [0 .. 1] æ•°ç»„åªæœ‰ä¸‰ä¸ªå¯¹è±¡ï¼Œæ³¨æ„æç¤º [0 .. 2] 123456789// æ•°ç»„ï¼ŒåŒ…å«ä¸‰ä¸ªå¯¹è±¡NSMutableArray *photos = [NSMutableArray array];[photos addObject:@0];[photos addObject:@1];[photos addObject:@2];NSLog(@&quot;--- %@&quot;,photos[4]);// Crash// Terminating app due to uncaught exception &apos;NSRangeException&apos;, reason: &apos;*** -[__NSArrayM objectAtIndexedSubscript:]: index 4 beyond bounds [0 .. 2]]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MarkDownè¯­æ³•]]></title>
    <url>%2F2014%2F12%2F26%2FMarkDown%E8%AF%AD%E6%B3%95%2F</url>
    <content type="text"><![CDATA[2018ä¿®æ”¹æ”¯æŒæœ‰é“äº‘ç¬”è®°æ ¼å¼ æ–œä½“ åˆ é™¤çº¿ ++ä¸‹åˆ’çº¿++ ==é»„è‰²é«˜äº®==1çº§æ ‡é¢˜2çº§æ ‡é¢˜3çº§æ ‡é¢˜4çº§æ ‡é¢˜5çº§æ ‡é¢˜6çº§æ ‡é¢˜ åˆ†å‰²çº¿ å¼•ç”¨ çœŸç†å°±æ˜¯æ°‘å…µç«™åœ¨ç™½æ¨æ ‘ä¸‹è¿Žé¢å¹æ¥ä¸€é˜µä¸œé£Ž åˆ†ç±» äºŒçº§åˆ†ç±» ä¸‰çº§åˆ†ç±» ç¬¬äºŒåˆ†ç±» ç¬¬ä¸€ ç¬¬äºŒ å¾…åŠžäº‹é¡¹ å·²å®Œæˆ htmlæ ‡ç­¾ &emsp;&emsp;ç›´æŽ¥å…¼å®¹htmlæ ‡ç­¾ è¶…é“¾æŽ¥æµç¨‹å›¾ã€æ—¶åºå›¾å’Œç”˜ç‰¹å›¾ mermaidå‚è€ƒ 123456// ç›´æŽ¥å†™ä»£ç int main(int argc, char * argv[]) &#123;@autoreleasepool &#123;return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));&#125;&#125; å›¾ç‰‡ è¡¨æ ¼header 1 | header 2â€”|â€”row 1 col 1 | row 1 col 2row 2 col 1 | row 2 col 2 æ•°å­¦å…¬å¼1E = mc^2 æµç¨‹å›¾ï¼Œç»ƒæ‰‹å„ç§å›¾å½¢å’Œçº¿ TB - top bottomï¼ˆè‡ªä¸Šè€Œä¸‹ï¼‰,LR - left rightï¼ˆä»Žå·¦åˆ°å³ï¼‰123456789101112graph TBidA(å¼€å§‹) --æè¿°--&gt; idD&#123;åˆ¤æ–­&#125;idD --YES--&gt;idE[è¿‡ç¨‹2]idD --NO--&gt;idF[å¼‚å¸¸]idF --&gt; idZ(ç»“æŸ)idE --&gt; idZidF -.è™šçº¿è¾…åŠ©.-&gt; idC((æ²¡ç”¨èŠ‚ç‚¹))subgraph å­æµç¨‹åidC ==&gt; idG[do something]idG ==å•¥æ„æ€==&gt; idM&gt;è¿™æ˜¯å•¥å›¾]end æ—¶åºå›¾ 12345678910sequenceDiagramA-&gt;&gt;B: How about Baidu??B--&gt;&gt;A: baidu is Great!note left of B: Bå·¦è¾¹çš„æ³¨é‡Šnote right of A: Aå³è¾¹çš„æ³¨é‡Šparticipant Cloop ask myselfC-&gt;&gt;C: is baidu goodï¼Ÿ endnote over C:I am alone ç”˜ç‰¹å›¾123456789ganttdateFormat YYYY-MM-DDsection è®¾è®¡å·²å®Œæˆ:done,id1, 2014-01-01, 5dæ­£æ‰§è¡Œ:active, idUI,after id1, 2dsection å¼€å‘å¾…ä¿®æ­£:crit, 2014-01-07, 9dsection æµ‹è¯•åŽŸè®¡åˆ’: 2014-01-02, 9d]]></content>
      <categories>
        <category>è¯»ä¹¦</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>å…¶ä»–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[UIImageæŠ€å·§]]></title>
    <url>%2F2014%2F11%2F28%2FUIImage%E6%8A%80%E5%B7%A7%2F</url>
    <content type="text"><![CDATA[PNG &amp; JPEG JPEGå¯ä»¥éžå¸¸å¥½çš„åŽ‹ç¼©å›¾ç‰‡ï¼Œä½†æ˜¯JPEGæ˜¯å¤±çœŸçš„ï¼Œå®ƒåŽ»é™¤äº†äººçœ¼å¾ˆéš¾å¯Ÿè§‰çš„ä¿¡æ¯ï¼Œå¹¶ä¸”è¿™æ ·åšå¯ä»¥è¶…å‡ºåƒgzipè¿™æ ·åŽ‹ç¼©ç®—æ³•çš„é™åˆ¶ï¼Œä½†æ˜¯åŽ‹ç¼©ç®—æ³•ä¹Ÿæ›´å¤æ‚ã€‚ç›¸å¯¹æ¥è¯´ï¼ŒJPEGå›¾ç‰‡æ›´å°ï¼ŒåŠ è½½æ›´å¿«ï¼Œä½†æ˜¯è§£åŽ‹çš„æ­¥éª¤è¦æ¶ˆè€—æ›´é•¿çš„æ—¶é—´ã€‚ å¯¹äºŽPNGæ¥è¯´å®ƒçš„åŽ‹ç¼©æ˜¯æ— æŸçš„ï¼Œæ‰€ä»¥å›¾ç‰‡ç›¸å¯¹JPEGæ¥è¯´ä¹Ÿå¤§å¾ˆå¤šï¼ŒåŠ è½½æ—¶é—´ä¼šæ¯”JPEGæ›´é•¿ï¼Œä½†æ˜¯è§£ç ä¼šç›¸å¯¹è¾ƒå¿«ï¼Œè€Œä¸”Xcodeä¼šæŠŠPNGå›¾ç‰‡è¿›è¡Œè§£ç ä¼˜åŒ–ä¹‹åŽå¼•å…¥å·¥ç¨‹ã€‚ åŠ è½½ imageNamed ç¬¬ä¸€æ¬¡åŠ è½½æ…¢ç‚¹ï¼Œæœ‰ç¼“å­˜ï¼Œç¼“å­˜ä»€ä¹ˆæ—¶å€™æ¸…é™¤ç”±ç³»ç»Ÿå†³å®š 1UIImage *image = [UIImage imageNamed:@&quot;logo&quot;]; imageWithContentsOfFile ç”¨äºŽä¸€æ¬¡æ€§çš„æœ¬åœ°å›¾ç‰‡ï¼Œæ— ç¼“å­˜ï¼ŒåŠ è½½å¿«ç‚¹ 12NSString *filePath = [NSString stringWithFormat:@&quot;%@/%@.png&quot;, [[NSBundle mainBundle] resourcePath], @&quot;logo&quot;];UIImage *image = [UIImage imageWithContentsOfFile:filePath]; å†…å­˜æ¶ˆè€—è®¡ç®— ä¸Žåˆ†è¾¨çŽ‡æ— å…³ï¼Œå’Œå®½é«˜æœ‰å…³1Width x Height x 4 / 1024 / 1024 ï¼ˆMï¼‰ contentModeç†è§£1234567891011121314151617/*UIViewContentModeScaleToFill, //å›¾ç‰‡æ ¹æ®imageViewçš„å¤§å°æ˜¾ç¤ºï¼Œå›¾ç‰‡ä¼šå˜å½¢UIViewContentModeScaleAspectFit, // æŒ‰æ¯”ä¾‹åŽ‹ç¼©ï¼Œå›¾ç‰‡å¤§è¾¹ç¼©å°ç­–ç•¥å³å›¾ç‰‡æ€»èƒ½å®Œå…¨æ˜¾ç¤ºï¼Œç©ºç™½éƒ¨åˆ†é€æ˜ŽUIViewContentModeScaleAspectFill, // æŒ‰æ¯”ä¾‹åŽ‹ç¼©ï¼Œå›¾ç‰‡å°è¾¹æ”¾å¤§ç­–ç•¥å³å›¾ç‰‡æ€»æ˜¯æ˜¾ç¤ºä¸å®Œå…¨ï¼Œå›¾ç‰‡å±…ä¸­//ä¸‹é¢çš„å±žæ€§éƒ½æ˜¯ä¸ä¼šæ‹‰ä¼¸å›¾ç‰‡çš„UIViewContentModeRedraw, //è°ƒç”¨setNeedsDisplay æ–¹æ³•æ—¶,å°±ä¼šé‡æ–°æ¸²æŸ“å›¾ç‰‡UIViewContentModeCenter,//æ˜¾ç¤ºå›¾ç‰‡ä¸­é—´UIViewContentModeTop, //æ˜¾ç¤ºå›¾ç‰‡é¡¶éƒ¨UIViewContentModeBottom, //æ˜¾ç¤ºå›¾ç‰‡åº•éƒ¨UIViewContentModeLeft, //æ˜¾ç¤ºå›¾ç‰‡å·¦è¾¹UIViewContentModeRight, //æ˜¾ç¤ºå›¾ç‰‡å³è¾¹UIViewContentModeTopLeft, //æ˜¾ç¤ºå›¾ç‰‡å·¦ä¸ŠUIViewContentModeTopRight, //æ˜¾ç¤ºå›¾ç‰‡å³ä¸ŠUIViewContentModeBottomLeft, //æ˜¾ç¤ºå›¾ç‰‡å·¦ä¸‹UIViewContentModeBottomRight, //æ˜¾ç¤ºå›¾ç‰‡å³ä¸‹*/imageView.contentMode = UIViewContentModeScaleAspectFit;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[BlockåŸºæœ¬ä½¿ç”¨]]></title>
    <url>%2F2014%2F11%2F09%2FBlock%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[Blockæ˜¯å•¥ï¼Ÿ ä¸ªäººç†è§£ï¼šå°±æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œjavaçš„ä»£ç å— ç”Ÿå‘½å‘¨æœŸï¼šblocké‡Œé¢ä»£ç æ‰§è¡Œå®Œ å‚æ•°æ•èŽ·ï¼šblockèƒ½æ•èŽ·å¤–éƒ¨å˜é‡ï¼Œå¹¶copyåˆ°blockå†…éƒ¨ä½¿ç”¨ï¼ç”¨__blockå¯ç ´ å¾ªçŽ¯å¼•ç”¨ï¼šblockæ•èŽ·äº†selfï¼Œselfåˆå¼ºæŒæœ‰blockï¼ç”¨weak strongå¯ç ´ ä½¿ç”¨æ–¹æ³•1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980#import &quot;ViewController.h&quot;// å£°æ˜Žä¸€ç§blockç±»åž‹ï¼Œä»¥åŽæ‹¿æ¥ç›´æŽ¥ç”¨typedef int(^block4Type)(int, int);@interface ViewController ()// æ³¨æ„block5å³æ˜¯blockçš„â€œå‡½æ•°åâ€ï¼Œä¹Ÿæ˜¯å±žæ€§çš„å±žæ€§å@property (nonatomic, copy) int(^block5)(int, int);@property (nonatomic, copy) NSString *str;// å½“ç„¶ä¹Ÿå¯ä½¿ç”¨block4Typeç±»åž‹@property (nonatomic, copy) block4Type block6;//@property (nonatomic, copy) void(^cycleBlock)(NSString *title);@end@implementation ViewController- (void)viewDidLoad &#123;[super viewDidLoad];// Do any additional setup after loading the view.// æœ‰å‚æ•°æœ‰è¿”å›žå€¼int (^block1)(int, int) = ^(int num1, int num2) &#123;return num1 + num2;&#125;;NSLog(@&quot;block1ï¼š%d&quot;,block1(5,4));// æ— è¿”å›ž voidvoid (^block2)(int, int) = ^(int num1, int num2) &#123;NSLog(@&quot;block2ï¼š%d&quot;,num1 + num2);&#125;;block2(4,5);// æ³¨æ„æ²¡å‚æ•°ä¹Ÿè¦æœ‰æ‹¬å·ï¼Œå®žçŽ°éƒ¨åˆ†æœ‰æ²¡æœ‰å‚æ•°æ‹¬å·éƒ½è¡Œint (^block3)() = ^ &#123;return 3;&#125;;NSLog(@&quot;block3ï¼š%d&quot;,block3());// ä½¿ç”¨å£°æ˜Žçš„blockç±»åž‹ï¼Œåˆå§‹åŒ–ä¸€ä¸ªblockå®žä¾‹block4Type block4 = ^(int num1, int num2) &#123;return num1 + num2;&#125;;NSLog(@&quot;block4ï¼š%d&quot;,block4(5,4));// Blockä½œä¸ºå±žæ€§self.block5 = ^(int num1, int num2) &#123;return num1 + num2;&#125;;NSLog(@&quot;block5ï¼š%d&quot;,self.block5(5,4));self.block6 = ^(int num1, int num2) &#123;return num1 + num2;&#125;;NSLog(@&quot;block6ï¼š%d&quot;,self.block6(5,4));// blockæ•èŽ·å¤–éƒ¨å˜é‡int total7 = 4;int (^block7)(int) = ^(int num)&#123;// total7 += num; // æŠ¥é”™ï¼Œæç¤ºéœ€è¦__blockreturn total7 + num;&#125;;NSLog(@&quot;block7ï¼š%d, total:%d&quot;,block7(4), total7);//__block int total8 = 4;int (^block8)(int) = ^(int num)&#123;total8 += num;return total8;&#125;;NSLog(@&quot;block8ï¼š%d, total:%d&quot;,block8(4), total8);// ä»¥ä¸‹ä»£ç ä¼šæŠ¥é”™è¯¯ï¼š Capturing &apos;self&apos; strongly in this block is likely to lead to a retain cycle// self.cycleBlock = ^(NSString *title) &#123;// self.title = [NSString stringWithFormat:@&quot;hello, %@&quot;,title];// &#125;;// self.cycleBlock(@&quot;world&quot;);// ç ´è§£å¾ªçŽ¯å¼•ç”¨__weak typeof(self)weakSelf = self;self.cycleBlock = ^(NSString *title) &#123;// __strong typeof(weakSelf)self = weakSelf; //å¦‚æžœä½ éœ€è¦å¼ºåˆ¶æœ‰selfå®žä¾‹ï¼Œéœ€æ‰“å¼€æ­¤æ³¨é‡ŠweakSelf.title = [NSString stringWithFormat:@&quot;hello, %@&quot;,title];&#125;;self.cycleBlock(@&quot;world&quot;);&#125;@end åŒæ­¥ï¼Ÿå¼‚æ­¥ï¼Ÿ è¯•éªŒ11234567NSLog(@&quot;ç¬¬ä¸€è¡Œ&quot;);void (^firstBlock)(void) = ^&#123;sleep(3);NSLog(@&quot;ç¬¬äºŒè¡Œ&quot;);&#125;;firstBlock();NSLog(@&quot;ç¬¬ä¸‰è¡Œ&quot;); &emsp;&emsp;ç»“è®ºï¼šblockæ˜¯åŒæ­¥çš„ï¼Œå…ˆæ‰§è¡Œä¸º2ï¼Œå†æ‰§è¡Œ3 è¯•éªŒ212345678910111213141516NSLog(@&quot;ç¬¬4è¡Œ&quot;);dispatch_async(dispatch_get_global_queue(0, 0), ^&#123;NSLog(@&quot;ç¬¬5è¡Œ&quot;);void (^secondBlock)(void) = ^&#123;sleep(3);NSLog(@&quot;ç¬¬6è¡Œ&quot;);&#125;;secondBlock();NSLog(@&quot;ç¬¬7è¡Œ&quot;);dispatch_async(dispatch_get_main_queue(), ^&#123;sleep(3);NSLog(@&quot;ç¬¬8è¡Œ&quot;);&#125;);NSLog(@&quot;ç¬¬9è¡Œ&quot;);&#125;);NSLog(@&quot;ç¬¬10è¡Œ&quot;); &emsp;&emsp;ç»“è®ºï¼šdispatch_asyncæ˜¯å¼‚æ­¥çš„]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Alpha&Hidden&Opaque]]></title>
    <url>%2F2014%2F10%2F31%2FAlpha-Hidden-Opaque%2F</url>
    <content type="text"><![CDATA[Alpha alphaæ˜¯ä¸é€æ˜Žåº¦ï¼Œå±žæ€§ä¸ºæµ®ç‚¹ç±»åž‹çš„å€¼ï¼Œå–å€¼èŒƒå›´ä»Ž0åˆ°1.0ï¼Œè¡¨ç¤ºä»Žå®Œå…¨é€æ˜Žåˆ°å®Œå…¨ä¸é€æ˜Žï¼Œé»˜è®¤1.0å®Œå…¨ä¸é€æ˜Žã€‚ alphaå€¼ä¼šå½±å“åˆ°UIViewè·Ÿå…¶æ‰€æœ‰subviewï¼Œå¦‚æžœå½“å‰Viewçš„alphaä¸º0ï¼Œåˆ™å½“å‰Viewå’Œæ‰€æœ‰çš„subviewéƒ½çœ‹ä¸åˆ°äº† åœ¨åŠ¨ç”»å—ä¸­è®¾ç½®alphaå…·æœ‰åŠ¨ç”»æ•ˆæžœ å½“å‰viewçš„alphaä¸º0æ—¶ï¼Œå½“å‰UIViewä¼šä»Žå“åº”è€…é“¾ä¸­ç§»é™¤ï¼Œè€Œå“åº”è€…é“¾ä¸­çš„ä¸‹ä¸€ä¸ªä¼šæˆä¸ºç¬¬ä¸€å“åº”è€…ã€‚ Hidden Hiddenå±žæ€§ä¸ºBOOLå€¼ï¼Œç”¨æ¥è¡¨ç¤ºUIViewæ˜¯å¦éšè—ï¼Œé»˜è®¤å€¼æ˜¯NOå³ä¸éšè—ï¼Œéšè—ä¸ºYESï¼ å½“Hiddenä¸ºYESæ—¶ï¼Œå½“å‰çš„UIViewå’Œsubviewéƒ½ä¼šè¢«éšè—ï¼Œè€Œä¸ç®¡subviewçš„hiddenå€¼ä¸ºå¤šå°‘ å½“Hiddenä¸ºYESæ—¶ï¼Œå½“å‰UIViewä¼šä»Žå“åº”è€…é“¾ä¸­ç§»é™¤ï¼Œè€Œå“åº”è€…é“¾ä¸­çš„ä¸‹ä¸€ä¸ªä¼šæˆä¸ºç¬¬ä¸€å“åº”è€… åœ¨åŠ¨ç”»å—ä¸­è®¾ç½®hiddenæ²¡æœ‰åŠ¨ç”»æ•ˆæžœ å¤æ‚äº¤äº’ä¸­ï¼Œå¯ä»¥å…ˆåŠ è½½æ‰€æœ‰subViewsï¼Œç„¶åŽæ ¹æ®çŠ¶æ€æ¥è®¾ç½®æŸä¸ªviewçš„hiddenå±žæ€§ï¼Œé¿å…é‡å¤å¼€é”€ Opaque opaqueä¹Ÿæ˜¯è¡¨ç¤ºå½“å‰çš„UIViewçš„ä¸é€æ˜Žåº¦,é»˜è®¤YES,å®˜æ–¹æ–‡æ¡£:alphaä¸º1,åˆ™opaqueä¸ºYESï¼›alphaå°äºŽ1ï¼Œopaqueä¸ºNOï¼Œä½†æ˜¯å¦‚æžœåäº†ï¼Œäº§ç”Ÿçš„åŽæžœæ˜¯ä¸å¯é¢„æ–™çš„ 1An opaque view is expected to fill its bounds with entirely opaque contentâ€”that is, the content should have an alpha value of 1.0. If the view is opaque and either does not fill its bounds or contains wholly or partially transparent content,the results are unpredictable. You should always set the value of this property to NO if the view is fully or partially transparent. å½“opaqueå±žæ€§è¢«è®¾ä¸ºYESæ—¶ï¼ŒGPUå°±ä¸ä¼šå†åˆ©ç”¨å›¾å±‚é¢œè‰²åˆæˆå…¬å¼åŽ»åˆæˆçœŸæ­£çš„è‰²å€¼ï¼ŒèŠ‚çœæ€§èƒ½]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>UI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MRCå’ŒARCæ··ç¼–]]></title>
    <url>%2F2014%2F10%2F19%2FMRC%E5%92%8CARC%E6%B7%B7%E7%BC%96%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp; OCä¸­æä¾›äº†ä¸¤ç§å†…å­˜ç®¡ç†æœºåˆ¶MRCï¼ˆMannulReference Countingï¼‰æ‰‹åŠ¨å¼•ç”¨è®¡æ•°ï¼›ARC ï¼ˆAutomatic Reference Countingï¼‰è‡ªåŠ¨å¼•ç”¨è®¡æ•°ã€‚ &emsp;&emsp; Xcode4.1åŠå…¶ä»¥å‰ç‰ˆæœ¬åªæœ‰MRCï¼Œæˆ‘ä»¬å¿…é¡»æ‰‹åŠ¨ç®¡ç†å†…å­˜ï¼Œæ¯”å¦‚è¦æ‰‹åŠ¨retainã€releaseã€autoreleaseç­‰ &emsp;&emsp; Xcode4.1åŽçš„ç‰ˆæœ¬å¯ä»¥ä½¿ç”¨ARCï¼Œè®©ç³»ç»Ÿè‡ªå·±ç®¡ç†å†…å­˜ã€‚ &emsp;&emsp; ARC å’ŒMRC æ··ç¼–æ€Žä¹ˆå¤„ç†ï¼Ÿ å¦‚æžœä½ çš„å·¥ç¨‹ä½¿ç”¨çš„MRC æ¨¡å¼ï¼Œåˆ™ä¸º ARC æ¨¡å¼çš„ä»£ç æ–‡ä»¶åŠ å…¥ -fobjc-arc æ ‡ç­¾ã€‚ å¦‚æžœä½ çš„å·¥ç¨‹ä½¿ç”¨çš„æ˜¯ ARC æ¨¡å¼ï¼Œåˆ™ä¸ºMRC æ¨¡å¼çš„ä»£ç æ–‡ä»¶åŠ å…¥ -fno-objc-arc æ ‡ç­¾ã€‚ &emsp;&emsp; ä½ç½®ï¼šæ‰“å¼€å·¥ç¨‹æ‰¾åˆ°target -&gt; Build Phases -&gt; Compile Sources -&gt; å¯¹åº”çš„ .m -&gt; åŒå‡»CompliperFlags æ·»åŠ  -fobjc-arc ï¼ˆARCæ¨¡å¼ï¼‰ -fno-objc-arcï¼ˆMRCæ¨¡å¼ï¼‰-&gt; ä¿å­˜]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸ºå•¥å«å‘æ¶ˆæ¯]]></title>
    <url>%2F2014%2F10%2F08%2F%E4%B8%BA%E5%95%A5%E5%8F%AB%E5%8F%91%E6%B6%88%E6%81%AF%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;ä»ŽJavaè½¬åˆ°OCï¼Œé‡åˆ°ä¸€ä¸ªä»¥å‰ä¸å¤ªåœ¨æ„çš„é—®é¢˜ï¼šå‘æ¶ˆæ¯è¿˜æ˜¯å‡½æ•°è°ƒç”¨ï¼Ÿåˆšå¼€å§‹è‡ªå­¦çš„æ—¶å€™è®¤ä¸º [NSObject alloc] å°±æ˜¯å‡½æ•°è°ƒç”¨ï¼Œè·Ÿint ret = max(a, b); æˆ–è€… System.out.println(â€œHello World!â€); æ²¡åŒºåˆ«ï¼Œåªä¸è¿‡æ˜¯æ¢æ±¤ä¸æ¢è¯ï¼Œæ¢äº†ä¸ªé©¬ç”²è€Œå·²ï¼ç›´åˆ°ä»Šå¤©ï¼Œè¢«åŒäº‹éƒ‘é‡å…¶äº‹çš„å‘Šè¯‰æˆ‘ï¼šä¸æ˜¯å‡½æ•°è°ƒç”¨ï¼Œè€Œæ˜¯å‘æŸæŸå‘æ¶ˆæ¯ï¼&emsp;&emsp;ç©¶å…¶åŽŸå› ï¼Œå¯èƒ½å¦‚ä¸‹ï¼š å‡½æ•°è°ƒç”¨æ˜¯ç¼–è¯‘æ—¶å·²ç»ç¡®å®šçš„ï¼ŒæŽ¥æ”¶æ–¹è‚¯å®šèƒ½åšå‡ºååº”ï¼›è€Œå‘æ¶ˆæ¯æ˜¯ç¼–è¯‘æ—¶åªæ˜¯è°ƒç”¨objc_msgSendæ–¹æ³•ï¼Œè¿è¡Œæ—¶å†ç¡®å®šæŽ¥æ”¶æ–¹æ˜¯å¦èƒ½åšå‡ºååº” 12// objc_msgSend(receiver, selector, arg1, arg2, ...) å‡½æ•°è°ƒç”¨æ˜¯å†™æ­»çš„å…³ç³»ï¼Œè€Œå‘æ¶ˆæ¯æ—¶ï¼ŒæŽ¥å—è€…å¯ä»¥é€‰æ‹©è½¬å‘ç­‰æ“ä½œè®©åˆ«äººå¹²æ´» å‘æ¶ˆæ¯æ˜¯ä¸æ˜¯ç­‰åŒäºŽå¹¿æ’­ï¼ˆOCçš„é€šçŸ¥ï¼‰? ä¸ªäººè®¤ä¸ºä¸æ˜¯ï¼Œå¹¿æ’­çš„æŽ¥å—è€…å¯ä»¥é€‰æ‹©æ— è§†ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©æ‰§è¡Œï¼›è€ŒOCçš„å‘æ¶ˆæ¯ï¼ŒæŽ¥å—è€…åªèƒ½é€‰æ‹©æ‰§è¡Œï¼Œäº¤ç»™åˆ«äººæ‰§è¡Œæˆ–è€…Crash &emsp;&emsp; ä»¥ä¸Šå°±æ˜¯å¯¹å‘æ¶ˆæ¯çš„ä¸ªäººç†è§£]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[atomicå’ŒnonatomicåŒºåˆ«]]></title>
    <url>%2F2014%2F10%2F03%2Fatomic%E5%92%8Cnonatomic%E5%8C%BA%E5%88%AB%2F</url>
    <content type="text"><![CDATA[åŒºåˆ« atomic nonatomic é»˜è®¤çš„ éžé»˜è®¤ï¼Œéœ€æ‰‹å†™ é€Ÿåº¦æ…¢ï¼Œè€—æ€§èƒ½ é€Ÿåº¦å¿«ï¼Œä¸å¤ªè€—æ€§èƒ½ çº¿ç¨‹ä¸å®‰å…¨ çº¿ç¨‹ä¸å®‰å…¨ &emsp;&emsp; atomic å’Œ nonatomic çš„åŒºåˆ«åœ¨äºŽï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„ getter/setter æ–¹æ³•ä¸ä¸€æ ·ã€‚å¦‚æžœä½ è‡ªå·±å†™ getter/setterï¼Œé‚£ atomic/nonatomic/retain/assign/copy è¿™äº›å…³é”®å­—åªèµ·æç¤ºä½œç”¨ï¼Œå†™ä¸å†™éƒ½ä¸€æ ·ã€‚&emsp;&emsp;å¯¹äºŽatomicçš„å±žæ€§ï¼Œç³»ç»Ÿç”Ÿæˆçš„ getter/setter ä¼šä¿è¯ getã€set æ“ä½œçš„å®Œæ•´æ€§ï¼Œä¸å—å…¶ä»–çº¿ç¨‹å½±å“ã€‚æ¯”å¦‚ï¼Œçº¿ç¨‹ A çš„ getter æ–¹æ³•è¿è¡Œåˆ°ä¸€åŠï¼Œçº¿ç¨‹ B è°ƒç”¨äº† setterï¼šé‚£ä¹ˆçº¿ç¨‹ A çš„ getter è¿˜æ˜¯èƒ½å¾—åˆ°ä¸€ä¸ªå®Œå¥½æ— æŸçš„å¯¹è±¡ã€‚&emsp;&emsp;è€Œnonatomicå°±æ²¡æœ‰è¿™ä¸ªä¿è¯äº†ã€‚æ‰€ä»¥ï¼Œnonatomicçš„é€Ÿåº¦è¦æ¯”atomicå¿«ã€‚ ä¸ºä»€ä¹ˆatomicçº¿ç¨‹ä¸å®‰å…¨&emsp;&emsp;å‡è®¾æœ‰ä¸€ä¸ª atomic çš„å±žæ€§ â€œnameâ€ï¼Œå¦‚æžœçº¿ç¨‹ A è°ƒ[self setName:@â€Aâ€]ï¼Œçº¿ç¨‹ B è°ƒ[self setName:@â€Bâ€]ï¼Œçº¿ç¨‹ C è°ƒ[self name]ï¼Œé‚£ä¹ˆæ‰€æœ‰è¿™äº›ä¸åŒçº¿ç¨‹ä¸Šçš„æ“ä½œéƒ½å°†ä¾æ¬¡é¡ºåºæ‰§è¡Œâ€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœä¸€ä¸ªçº¿ç¨‹æ­£åœ¨æ‰§è¡Œ getter/setterï¼Œå…¶ä»–çº¿ç¨‹å°±å¾—ç­‰å¾…ã€‚å› æ­¤ï¼Œå±žæ€§ name æ˜¯è¯»/å†™å®‰å…¨çš„ã€‚ä½†æ˜¯ï¼Œå¦‚æžœæœ‰å¦ä¸€ä¸ªçº¿ç¨‹ D åŒæ—¶åœ¨è°ƒ[name release]ï¼Œé‚£å¯èƒ½å°±ä¼šcrashï¼Œå› ä¸º release ä¸å— getter/setter æ“ä½œçš„é™åˆ¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œatomicå±žæ€§åªèƒ½è¯´æ˜¯è¯»/å†™å®‰å…¨çš„ï¼Œä½†å¹¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› ä¸ºåˆ«çš„çº¿ç¨‹è¿˜èƒ½è¿›è¡Œè¯»å†™ä¹‹å¤–çš„å…¶ä»–æ“ä½œã€‚çº¿ç¨‹å®‰å…¨éœ€è¦å¼€å‘è€…è‡ªå·±æ¥ä¿è¯ã€‚å¦‚æžœ name å±žæ€§æ˜¯ nonatomic çš„ï¼Œé‚£ä¹ˆä¸Šé¢ä¾‹å­é‡Œçš„æ‰€æœ‰çº¿ç¨‹ Aã€Bã€Cã€D éƒ½å¯ä»¥åŒæ—¶æ‰§è¡Œï¼Œå¯èƒ½å¯¼è‡´æ— æ³•é¢„æ–™çš„ç»“æžœã€‚å¦‚æžœæ˜¯ atomic çš„ï¼Œé‚£ä¹ˆ Aã€Bã€C ä¼šä¸²è¡Œï¼Œè€Œ D è¿˜æ˜¯å¹¶è¡Œçš„ã€‚ æ›´æ–°ä¸€ç¯‡è¯¦è§£ http://mrpeak.cn/blog/ios-thread-safety/ å‚è€ƒ å®˜æ–¹æ–‡æ¡£ Whatâ€™s the difference between the atomic and nonatomic attributes?]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¼•ç”¨è®¡æ•°å¼•å‘çš„æ„Ÿæƒ³]]></title>
    <url>%2F2014%2F09%2F23%2F%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0%E5%BC%95%E5%8F%91%E7%9A%84%E6%84%9F%E6%83%B3%2F</url>
    <content type="text"><![CDATA[åº&emsp;&emsp;ç”±äºŽåŠé“å‡ºå®¶ï¼Œä»ŽJavaçš„åžƒåœ¾å›žæ”¶æœºåˆ¶ï¼Œä¸€ä¸‹è½¬åˆ°äº†å¼•ç”¨è®¡æ•°æœºåˆ¶ï¼Œç¡®å®žè¯¸å¤šä¸é¡ºï¼Œç®€å•å†™ä¸‹æˆ‘ç†è§£ã€‚æˆ‘æ‰€çŸ¥é“çš„å†…å­˜é‡Šæ”¾æ“ä½œåŸºæœ¬ä¸Šæœ‰3ç±»ï¼šæ‰‹åŠ¨é‡Šæ”¾ã€è‡ªåŠ¨åžƒåœ¾å›žæ”¶å’Œå¼•ç”¨è®¡æ•°ï¼ æ‰‹åŠ¨é‡Šæ”¾ï¼ˆCè¯­è¨€ï¼‰ ç¨‹åºå‘˜è‡ªå·±æŒ–å‘ï¼Œè‡ªå·±åŸ‹ ä¼˜ç‚¹ï¼šå†…å­˜ä½¿ç”¨çŽ‡é«˜ï¼Œæ€§èƒ½é«˜ ç¼ºç‚¹ï¼šéœ€è¦æ‰‹åŠ¨malloc å’Œ freeï¼Œè‡ªå·±å¼€è¾Ÿå†…å­˜ï¼Œè‡ªå·±é‡Šæ”¾å†…å­˜ã€‚ç”±äºŽç¼–è¯‘å™¨å•¥ä¹Ÿç®¡ä¸äº†ï¼Œæ‰€ä»¥æ‰€æœ‰çš„æ“ä½œéƒ½ä¾èµ–ç¨‹åºå‘˜çš„ä¸¥è°¨æ€§ï¼Œå¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¼€è¾Ÿå†…å­˜å’Œé‡Šæ”¾å†…å­˜éƒ½å¿…é¡»æ³¨æ„é‡ŽæŒ‡é’ˆé—®é¢˜ è‡ªåŠ¨åžƒåœ¾å›žæ”¶ï¼ˆJavaï¼‰ å½“åˆ›å»ºå¯¹è±¡æ—¶ï¼ŒGCå°±å¼€å§‹ç›‘è§†è¿™ä¸ªå¯¹è±¡çš„åœ°å€ã€å¤§å°ä»¥åŠä½¿ç”¨æƒ…å†µã€‚é€šå¸¸ï¼ŒGCé‡‡ç”¨æœ‰å‘å›¾çš„æ–¹å¼è®°å½•å’Œç®¡ç†heapï¼ˆå †ï¼‰ä¸­çš„ç´ æœ‰å¯¹è±¡ã€‚é€šè¿‡è¿™ç§æ–¹å¼ç¡®å®šâ€œä¸å¯è¾¾çš„â€å¹¶æ¸…é™¤ ä¼˜ç‚¹ï¼šç®€å•ï¼Œå‡ ä¹Žä¸ç”¨ç¨‹åºå‘˜ç®¡ ç¼ºç‚¹ï¼šå†…å­˜åˆ©ç”¨çŽ‡ä½Žï¼Œé€ æˆå¤§é‡ç¢Žç‰‡åŒ–ç©ºé—´ï¼Œæ€§èƒ½æ¶ˆè€—é«˜ å¼•ç”¨è®¡æ•°ï¼ˆOCï¼‰ æ¯ä¸ªå¯¹è±¡ä¿å­˜ï¼ŒæŒæœ‰å½“å‰å¯¹è±¡çš„ä¸ªæ•°ï¼Œå½“æ²¡äººåªæœ‰å½“å‰å¯¹è±¡ï¼Œå³å¼•ç”¨å¯¹è±¡ä¸º0æ—¶ï¼Œå°±é‡Šæ”¾å†…å­˜ ä¼˜ç‚¹ï¼šå¯é ï¼Œ ç¼ºç‚¹ï¼šå¾ªçŽ¯å¼•ç”¨ï¼ŒMRCæ—¶éœ€è¦æ‰‹åŠ¨æ›´æ–°å¼•ç”¨è®¡æ•°ï¼ŒARCä¸ç”¨æ‰‹åŠ¨æ›´æ–°å¼•ç”¨è®¡æ•° æ›´æ–°&emsp;&emsp;ä»¥å‰å†™çš„è¿‡äºŽè‚¤æµ…ï¼Œè‡ªåŠ¨åžƒåœ¾å›žæ”¶åŒ…å«å¼•ç”¨è®¡æ•°ç®—æ³•ï¼Œå³åžƒåœ¾å›žæ”¶æ˜¯æ¦‚å¿µï¼Œå¼•ç”¨è®¡æ•°æ˜¯ç®—æ³•åžƒåœ¾å›žæ”¶ç®—æ³•ã€‚å¸¸ç”¨çš„åžƒåœ¾å›žæ”¶ç®—æ³•æœ‰ï¼š å¼•ç”¨è®¡æ•°ç®—æ³•ï¼šç»™å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œæ¯å½“æœ‰ä¸€ä¸ªåœ°æ–¹å¼•ç”¨å®ƒæ—¶ï¼Œè®¡æ•°å™¨å€¼å°±åŠ 1ï¼›å½“å¼•ç”¨å¤±æ•ˆæ—¶ï¼Œè®¡æ•°å™¨å€¼å°±å‡1ï¼›ä»»ä½•æ—¶åˆ»è®¡æ•°å™¨éƒ½ä¸º0çš„å¯¹è±¡å°±æ˜¯ä¸å†è¢«ä½¿ç”¨çš„ï¼Œåžƒåœ¾æ”¶é›†å™¨å°†å›žæ”¶è¯¥å¯¹è±¡ä½¿ç”¨çš„å†…å­˜ã€‚å¼•ç”¨è®¡æ•°ç®—æ³•å®žçŽ°ç®€å•ï¼Œæ•ˆçŽ‡å¾ˆé«˜ï¼Œå¾®è½¯çš„COMæŠ€æœ¯ã€ActionScriptã€Pythonç­‰éƒ½ä½¿ç”¨äº†å¼•ç”¨è®¡æ•°ç®—æ³•è¿›è¡Œå†…å­˜ç®¡ç†ï¼Œä½†æ˜¯å¼•ç”¨è®¡æ•°ç®—æ³•å¯¹äºŽå¯¹è±¡ä¹‹é—´ç›¸äº’å¾ªçŽ¯å¼•ç”¨é—®é¢˜éš¾ä»¥è§£å†³ï¼Œå› æ­¤javaå¹¶æ²¡æœ‰ä½¿ç”¨å¼•ç”¨è®¡æ•°ç®—æ³•ã€‚ æ ¹æœç´¢ç®—æ³•ï¼šé€šè¿‡ä¸€ç³»åˆ—çš„åä¸ºâ€œGC Rootâ€çš„å¯¹è±¡ä½œä¸ºèµ·ç‚¹ï¼Œä»Žè¿™äº›èŠ‚ç‚¹å‘ä¸‹æœç´¢ï¼Œæœç´¢æ‰€èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºå¼•ç”¨é“¾(Reference Chain)ï¼Œå½“ä¸€ä¸ªå¯¹è±¡åˆ°GC Rootæ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿žæ—¶ï¼Œåˆ™è¯¥å¯¹è±¡ä¸å¯è¾¾ï¼Œè¯¥å¯¹è±¡æ˜¯ä¸å¯ä½¿ç”¨çš„ï¼Œåžƒåœ¾æ”¶é›†å™¨å°†å›žæ”¶å…¶æ‰€å çš„å†…å­˜ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ideaè®­ç»ƒå¥—è·¯]]></title>
    <url>%2F2014%2F09%2F10%2Fidea%E8%AE%AD%E7%BB%83%E5%A5%97%E8%B7%AF%2F</url>
    <content type="text"><![CDATA[PSï¼šå¾ˆå¤šå¹´å‰copyçš„ï¼Œä¸è®°å¾—ä»Žå“ªæ•´çš„äº†ï¼å¦‚æžœä¾µçŠ¯ç‰ˆæƒè¯·å‘Šè¯‰æˆ‘ æŠŠå®ƒé¢ å€’è¿‡æ¥ æŠŠå®ƒæ‘†å¹³ æŠŠç¼©å° æŠŠé¢œè‰²å˜æ¢ä¸€ä¸‹ æŠŠå®ƒå˜ä¸ºåœ†å½¢ ä½¿å®ƒæ›´å¤§ æŠŠå®ƒå˜ä¸ºæ­£æ–¹å½¢ ä½¿å®ƒæ›´å° ä½¿å®ƒæ›´é•¿ ä½¿å®ƒé—ªåŠ¨ ä½¿å®ƒæ›´çŸ­ ä½¿å®ƒå‘å‡ºç«èŠ± ä½¿å®ƒå¯ä»¥çœ‹åˆ° ç‚¹ç‡ƒå®ƒ ä½¿å®ƒé€¾èµ·ä¸€èˆ¬æƒ…å†µ ä½¿å®ƒå‘è¤å…‰ æŠŠå®ƒæ”¾è¿›æ–‡å­—é‡Œ ä½¿å®ƒæ²‰é‡ æŠŠå®ƒæ’è¿›éŸ³ä¹é‡Œ ä½¿å®ƒæˆä¸ºå¼•ç«ç‰© ç»“åˆæ–‡å­—å’ŒéŸ³ä¹ ä½¿å®ƒæˆä¸ºå¼•ç«ç‰© ç»“åˆæ–‡å­—. éŸ³ä¹å’Œå›¾ç”» å‚åŠ ç«žèµ› ç»“åˆéŸ³ä¹å’Œå›¾ç”»åˆ é™¤æ–‡å­— å‚åŠ æ‰“èµŒ ä¸è¦å›¾ç”» ä½¿å®ƒæˆä¸ºå¹´è½»åž‹çš„ ä¸è¦æ–‡å­— ä½¿å®ƒæˆä¸ºå£®å¹´åž‹çš„ æ²‰é»˜æ— å£° æŠŠå®ƒåˆ†å‰²å¼€ ä½¿å®ƒé‡å¤ ä¿å®ˆåœ°è¯´ ä½¿å®ƒå˜æˆç«‹ä½“ å¤¸å¼ åœ°è¯´ ä½¿å®ƒå˜æˆå¹³é¢ å½“æ›¿ä»£å“å– å˜æ¢å®ƒçš„å½¢æ€ å‘çŽ°æ–°ç”¨é€” åªå˜æ›´ä¸€éƒ¨åˆ† å‡æŽ‰å®ƒ ä½¿å®ƒæˆä¸ºä¸€ç»„ æ’•å¼€å®ƒ ä¸ºæçŒ®æˆ–ä¹‰å–è€Œé”€å”® ä½¿å®ƒåŒ–åˆ é¼“åŠ±å®ƒ ç”¨æ˜¾è€Œæ˜“è§çš„ æœºåŠ¨åŒ– æŠŠè¦ç´ é‡æ–°é…ç½® ç”µæ°”ä»£ é™ä½Žè°ƒå­ ä½¿å®ƒæ´»åŠ¨ æé«˜è°ƒå­ ä½¿å®ƒç›¸å å‰²å¼€å®ƒ å®ƒåƒæ˜¯æŸç§ä¸œè¥¿çš„ä»£æ›¿å“ æ··åˆåœ¨ä¸€èµ· ä½¿å®ƒç½—æ›¼è’‚å…‹ æ”¹ç”¨å¦ä¸€ç§å½¢å¼è¡¨çŽ° å¢žæ·»æ€€æ—§çš„è¯‰æ±‚ ä½¿å®ƒçš„é€Ÿåº¦åŠ å¿« ä½¿å®ƒçœ‹èµ·æ¥æµè¡Œ ä½¿å®ƒç¼“æ…¢ä¸‹æ¥ ä½¿å®ƒçœ‹èµ·æ¥åƒæœªæ¥æ´¾ ä½¿å®ƒé£žè¡Œ ä½¿å®ƒæˆä¸ºæŸç§ç‰©å“çš„éƒ¨åˆ†ä»£æ›¿ ä½¿å®ƒæµ®èµ· ä½¿å®ƒæ›´å¼ºå£® ä½¿å®ƒæ»šè½¬ ä½¿å®ƒæ›´è€ä¹… æŠŠå®ƒåˆ‡æˆç‰‡çŠ¶ è¿ç”¨è±¡å¾ ä½¿å®ƒæˆä¸ºç²‰çŠ¶ å®ƒæ˜¯å†™å®žæ´¾ ä»¥æ€§æ¬²ä½œè¯‰æ±‚ è¿ç”¨æ–°è‰ºæœ¯å½¢å¼ ä½¿å®ƒå‡ç¼© å˜ä¸ºæ‘„å½±æŠ€å·§ ä½¿å®ƒå¼¯æ›² å˜æ¢ä¸ºå›¾è§£æ–¹å¼ ä½¿å®ƒæˆå¯¹ ä½¿å®ƒå˜æ›´å½¢å¼ ä½¿å®ƒå€¾æ–œ ç”¨å›¾ç”»è¯´æ˜Žä½ çš„æ•…äº‹ ä½¿å®ƒæ‚¬æµ®åŠç©ºä¸­ ä½¿ç”¨æ–°å¹¿å‘Šåª’ä½“ ä½¿å®ƒåž‚ç›´ç«™ç«‹ åˆ›é€ æ–°å¹¿å‘Šåª’ä½“ æŠŠå®ƒç”±é‡Œå‘å¤–ç¿»è½¬ ä½¿å®ƒæ›´å¼ºçƒˆ æŠŠå®ƒå‘æ—è¾¹è½¬ ä½¿å®ƒæ›´å†· æ‘‡åŠ¨å®ƒ å¢žåŠ é¦™å‘³ æŠŠå®ƒé®è”½èµ·æ¥ å˜æ¢æ°”å‘³ ä½¿å®ƒä¸å¯¹ç§° æŠŠå®ƒé™¤è‡­ ä½¿å®ƒä¸å¯¹ç§° å°†å®ƒå‘å„¿ç«¥è¯‰æ±‚ åå®ƒéš”å¼€ å°†å®ƒå‘ç”·å£«è¯‰æ±‚ ä½¿å®ƒä¸Žå…¶ä»–ç›¸æ•Œå¯¹ å°†å®ƒå‘å¦‡å¥³è¯‰æ±‚ ä½¿å®ƒé”åˆ© ä»·é’±æ›´ä½Ž å˜æ›´å®ƒçš„å¤–å½¢ æŠ¬é«˜ä»·æ ¼ è¦å®ƒç»•ä¸€å‘¨ å˜æ›´æˆä»½ æŠŠå®ƒæ¡†èµ·æ¥ å¢žåŠ æ–°æˆä»½ æŠŠå®ƒå·æˆä¸€åœˆ æ‹§æ“å®ƒ æŠŠå®ƒå¡«æ»¡ ä½¿å®ƒé€æ˜Ž æŠŠå®ƒå¼„æˆç©ºçš„ ä½¿å®ƒä¸é€æ˜Ž æŠŠå®ƒæ‰“å¼€ ç”¨ä¸åŒèƒŒæ™¯ æŠŠæ‹¼é”™ ç”¨ä¸åŒçŽ¯å¢ƒ ç»™å®ƒèµ·æˆ‘ä¸Šç»°å· ä½¿å®ƒå¯Œæœ‰é­…åŠ› æŠŠå®ƒå°å°èµ·æ¥ ä½¿ç”¨è§†è§‰æ•ˆæžœ æŠŠå®ƒç§»è½¬è¿‡æ¥ ä½¿ç”¨å¦å¤–çš„ç‰©æ–™ æŠŠå®ƒæ†åŒ…èµ·æ¥ å¢žåŠ äººçš„è¶£å‘³ æŠŠå®ƒé›†ä¸­èµ·æ¥ å˜æ›´å¯†åº¦ æŠŠå®ƒæŽ¨å¼€ ç½®äºŽä¸åŒçš„è´§æŸœ ä½¿å®ƒæˆä¸ºäº¤æ›¿çš„ å˜æ¢åŒ…è£… ä½¿å®ƒå‡å›ºèµ·æ¥ ä½¿å¯†åº¦å¢žåŠ  ä½¿å®ƒæº¶åŒ– å°åž‹åŒ– ä½¿æˆå‡èƒ¶çŠ¶ å¢žåŠ è‡³æœ€å¤§é™ ä½¿å®ƒè½¯åŒ– æŠŠå®ƒé™¤æŽ‰ ä½¿å®ƒç¡¬åŒ– ä½¿å®ƒè½»ä¾¿ ä½¿è’¸å‘å˜ä¸ºæ±½åŒ– ä½¿å®ƒå¯ä»¥æŠ˜å  åŠ ä¸ŠæŠ‘æ‰¬é¡¿æŒ« è¶‹å‘åæ¿€ ä½¿å®ƒæ›´ç‹­çª„ å¦‚å¤å¤©ç‚Žçƒ­ ä½¿å®ƒæ›´å®½å¹¿ å¦‚å†¬å¤©å¯’å†· ä½¿å®ƒæ›´æ»‘ç¨½ ä½¿æ‹ŸäººåŒ– ä½¿å®ƒæˆä¸ºè¢«è®½åˆºçš„ ä½¿å®ƒæ›´æš— ç”¨ç®€çŸ­çš„æ–‡æ¡ˆ ä½¿å®ƒå‘å…‰ ç”¨å†—é•¿çš„æ–‡æ¡ˆ ä½¿å®ƒç¼ å‘çŽ°ç¬¬äºŒç§ç”¨é€” ä½¿å®ƒæ›´æœ‰è¥å…» ä½¿å®ƒåˆæˆåœ¨ä¸€èµ· æŠŠå®ƒå€’è¿›ç“¶ä¸­ æŠŠå®ƒå½“ä½œç”¨å…·æ¥å– æŠŠå®ƒå€’è¿›ç½ä¸­ ä½¿å®ƒæ¸…å‡€ æŠŠå®ƒæ”¾è¿›ç›’ä¸­ æŠŠå®ƒå€’è¿›å£¶ä¸­ æŠŠå®ƒå€’è¿›ç¼¸ä¸­ æŠŠå®ƒå¼„ç›´ æŠŠå®ƒè¤¶æ›² æŠŠå®ƒç¼ èµ·æ¥ æå‡å£°èª‰ å…è´¹æä¾› ä»¥æˆæœ¬ä»·å‡ºå”® æä¾›ç‰¹ä»· å¢žåŠ æ…°è—‰çš„è¯‰æ±‚ æä¾›ç»´æŠ¤æœåŠ¡ è¿ç”¨ä¸åŒçš„ç»‡æ³• ä½¿å®ƒå˜æˆé¦™éƒå®œäºº ä½¿å®ƒå˜æˆé…¸çš„ ä½¿å®ƒæ¿¡æ¹¿ ä½¿å®ƒè„±æ°´ ä½¿å®ƒå¹²ç‡¥ æŠŠå®ƒå†»èµ·æ¥ æŠŠå®ƒæŠ›å‡ºåŽ» ä½¿å®ƒæ— åˆºæ¿€æ€§çš„ ä½¿å®ƒå•çº¯åŒ– ä½¿å®ƒå…·æœ‰åˆºæ¿€æ€§çš„ æŠŠä»¥ä¸Šå„é¡¹ä»»æ„ç»„åˆ å…¶å®žè¿™äº›å¯¹é‚£äº›ä»Žäº‹å¹³é¢è®¾è®¡å’Œå½±è§†å¹¿å‘Šè®¾è®¡çš„æŠ€æœ¯äººå‘˜æ˜¯æœ‰å¾ˆå¤§çš„å¸®åŠ©çš„ã€‚æˆ‘æœ‰æ—¶å€™å°±æœ‰è¿™ç§æ„Ÿè§‰â€”-æ€è·¯è¢«å›°çœ‹çœ‹è¿™äº›å°±ä¼šæœ‰æ–°çš„æƒ³æ³•ã€‚ç­‰æ—¶é—´é•¿äº†ä»¥åŽå°±ä¸ç”¨å¸¸çœ‹è¿™äº›äº†ã€‚]]></content>
      <categories>
        <category>è¯»ä¹¦</category>
      </categories>
      <tags>
        <tag>å…¶ä»–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ²™ç›’æœºåˆ¶]]></title>
    <url>%2F2014%2F08%2F29%2F%E6%B2%99%E7%9B%92%E6%9C%BA%E5%88%B6%2F</url>
    <content type="text"><![CDATA[æ²™ç›’æœºåˆ¶æ˜¯å•¥ï¼Ÿ æ ¹æ®ç™¾åº¦ç™¾ç§‘ï¼šæ²™ç›’åŽŸç†æ¥çœ‹ï¼Œæ²™ç›’ç›®çš„æ˜¯å®‰å…¨ï¼ŒåŽŸç†æ˜¯éš”ç¦»ç›‘æŽ§å’Œå›žæ»šï¼ä½†iOSç³»ç»Ÿä¸Šçš„æ²™ç›’æœºåˆ¶å´ä¸æ˜¯è¿™æ ·çš„ï¼ŒiOSç³»ç»Ÿä¸Šçš„æ²™ç›’æœºåˆ¶ï¼šéš”ç¦»å’Œæƒé™æŽ§åˆ¶ï¼Œåº”ç”¨åªèƒ½è®¿é—®è‡ªå·±çš„å­˜å‚¨ç©ºé—´ä¸å¯ä»¥è®¿é—®å…¶ä»–ç¨‹åºå­˜å‚¨ç©ºé—´ï¼Œåº”ç”¨è®¿é—®ç³»ç»Ÿæ•°æ®éœ€è¯·æ±‚æƒé™ï¼Œæ²¡æƒé™ä¸å…è®¸è®¿é—®ï¼iOSæ²™ç›’åŽŸç†æ˜¯éªŒç­¾ï¼Œå°±æ˜¯å‘å¸ƒAPPé‚£ä¸€å¤§å †ç­¾åè¯ä¹¦çš„ä½œç”¨ã€‚ æ²™ç›’ç›®å½• Documentsï¼šä¿å­˜é‡è¦æ•°æ®ï¼ŒiTuneså’Œicouldä¼šè‡ªåŠ¨å¤‡ä»½ Library åŒ…å«Cacheså’ŒPreferencesâ¼¦ç›®å½• Cachesï¼šå­˜æ”¾ç¼“å­˜æ–‡ä»¶ï¼Œéœ€æ‰‹åŠ¨æ¸…é™¤ï¼Œä¸ä¼šå¤‡ä»½ Preferences ä¿å­˜åº”ç”¨ç¨‹åºçš„æ‰€æœ‰åå¥½è®¾ç½®ã€‚NSUserDefaultså­˜åœ¨è¿™ï¼Œä¸ç”¨ç®¡ï¼ tmpï¼šä¸´æ—¶æ•°æ®ï¼Œå¯èƒ½è¢«è‡ªåŠ¨æ¸…é™¤ï¼Œä¸è¦æ”¾é‡è¦æ•°æ®ï¼Œä¸ä¼šå¤‡ä»½ xxx.appï¼šåº”ç”¨ç¨‹åºåŒ…ï¼Œæ‰‹åŠ¨å¼•å…¥çš„èµ„æºéƒ½ä¼šæ‰“åŒ…åˆ°è¿™é‡Œï¼Œä¸ç”¨ç®¡ èŽ·å–æ–¹æ³•123456789101112131415161718/*directoryï¼šæœç´¢çš„è·¯å¾„åç§°,NSDocumentDirectoryã€NSCacheDirectoryç­‰.domainMaskï¼šé™å®šäº†æ–‡ä»¶çš„æ£€ç´¢èŒƒå›´åªåœ¨æ²™ç®±å†…éƒ¨.ä¸€èˆ¬ä¸ºNSUserDomainMaskexpandTildeï¼šæ˜¯å¦å±•å¼€æ³¢æµªçº¿ç¬¦å·.å±•å¼€åŽæ‰æ˜¯å®Œæ•´è·¯å¾„,ä¸€ç›´ä¸ºYES.reutrnï¼šæ•°ç»„,åœ¨iphoneä¸­ç”±äºŽåªæœ‰ä¸€ä¸ªå”¯ä¸€è·¯å¾„(ç›¸å¯¹OCè€Œè¨€),æ‰€ä»¥ç›´æŽ¥å–æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ å³å¯.*/// NSArray&lt;NSString *&gt; *NSSearchPathForDirectoriesInDomains(NSSearchPathDirectory directory, NSSearchPathDomainMask domainMask, BOOL expandTilde);// æ ¹ç›®å½•è·¯å¾„NSString*homeDir = NSHomeDirectory();// Documentsç›®å½•è·¯å¾„NSString*docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES) firstObject];// Libraryçš„ç›®å½•è·¯å¾„NSString*libDir = [NSSearchPathForDirectoriesInDomains(NSLibraryDirectory,NSUserDomainMask,YES) lastObject];// cacheç›®å½•è·¯å¾„NSString*cachesDir = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory,NSUserDomainMask,YES) firstObject];// tmpç›®å½•è·¯å¾„NSString*tmpDir =NSTemporaryDirectory(); Boundle ä¸ªäººç†è§£å…¶å®žå°±æ˜¯ xxx.app ï¼Œå³ä½ é¡¹ç›®é‡Œæ‰“åŒ…è¿›åŽ»çš„ä»£ç ã€å›¾ç‰‡ã€éŸ³è§†é¢‘ç­‰èµ„æº12345NSLog(@&quot;HomeDirectoryï¼š %@&quot;,NSHomeDirectory());NSLog(@&quot;bundlePathï¼š %@&quot;,[[NSBundle mainBundle] bundlePath]);// NSBoudleä½¿ç”¨NSString *path= [[NSBundle mainBundle] pathForResource:@&quot;xxx&quot; ofType:@&quot;mp3&quot;];UIView *view = [[[NSBundle mainBundle] loadNibNamed:@&quot;ZKXxxView&quot; owner:nil options:nil] firstObject];]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Propertyå…³é”®å­—]]></title>
    <url>%2F2014%2F08%2F17%2FProperty%E5%85%B3%E9%94%AE%E5%AD%97%2F</url>
    <content type="text"><![CDATA[@propertyæ˜¯ä»€ä¹ˆ @propertyå£°æ˜Žçš„å±žæ€§ï¼Œé»˜è®¤ä¼šè‡ªåŠ¨åˆ›å»ºè¯¥å±žæ€§çš„getter/setteræ–¹æ³• 123456@property (nonatomic, copy) NSString *propertyName;// è‡ªåŠ¨ç”Ÿæˆå¦‚ä¸‹æ–¹æ³•// æ³¨æ„è‡ªåŠ¨ç”Ÿæˆsetteræ–¹æ³•çš„å±žæ€§åé¦–å­—æ¯å¤§å†™- (void)setPropertyName:(NSString *)propertyName;// æ³¨æ„è‡ªåŠ¨ç”Ÿæˆgetteræ–¹æ³•æ²¡æœ‰get- (NSString *)propertyName; ä¸æƒ³è®©ç³»ç»Ÿç”Ÿæˆgetterå’Œsetteræ–¹æ³•ï¼Œè¦ç”¨@dynamic 12// ä¸è¦ç³»ç»Ÿç”Ÿæˆçš„getterå’Œsetterï¼Œä¾‹å¦‚CoreData@dynamic propertyName; @propertyå£°æ˜Žçš„å±žæ€§ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆå¸¦ä¸‹åˆ’çº¿çš„å˜é‡ 12// ç›¸å½“äºŽç³»ç»Ÿå¸®ä½ å†™äº†@synthesize propertyName = _propertyName; propertyçš„å…³é”®å­—åŽŸå­æ€§ atomic:åŽŸå­æ€§ï¼Œè€—æ€§èƒ½è€Œä¸”ä¸ä¿è¯ä¸€å®šæ˜¯å®‰å…¨çš„ï¼Œæ‰€ä»¥iOSé‡Œä¸ä¼šç”¨ï¼Mac OSå€’å¯ä»¥ç”¨ nonatomic:éžåŽŸå­æ€§ï¼Œå’Œatomicå«ä¹‰æ˜¯ç›¸åçš„ï¼ŒiOSä¸€ç›´ç”¨è¿™ä¸ª å­˜å–æŽ§åˆ¶ readwriteï¼šå¯è¯»å¯å†™ï¼Œé»˜è®¤å€¼ã€‚åŒæ—¶æ‹¥æœ‰getterå’Œsetteræ–¹æ³• readonlyï¼šå¯è¯»ä¸å¯å†™ï¼Œåªæœ‰getteræ²¡æœ‰setteræ–¹æ³• setter = xxxï¼Œ é€šè¿‡xxxæ¥è®¿é—®setteræ–¹æ³•ï¼Œå±žæ€§å¿…é¡»æ˜¯readwrite getter = xxxï¼Œ é€šè¿‡xxxæ¥è®¿é—®getteræ–¹æ³•ï¼Œç»å¸¸å’Œreadonlyé…åˆä½¿ç”¨123456@property (nonatomic, copy, getter=pName, setter=setPName) NSString *name;- (void)setPName:(NSString *)name &#123;&#125;- (NSString *)pName &#123;&#125;@property (nonatomic, readonly, assign, getter=isShowed) BOOL showed;- (BOOL)isShowed&#123;&#125; strong | weak | unsafe_unretained | assign | retain | copy å†…å­˜ç®¡ç† assign:ç”¨äºŽä¿®é¥°å€¼ç±»åž‹ï¼ˆåŸºæœ¬æ•°æ®ç±»åž‹ï¼‰ï¼Œå¦‚ï¼šintï¼Œfloatï¼Œdoubleï¼ŒCGFloatï¼ŒNSIntegerç­‰ã€‚assignä¿®é¥°çš„å±žæ€§ä¸ç‰µæ¶‰å†…å­˜ç®¡ç†ï¼Œä¸ä¼šè¢«å¼•ç”¨è®¡æ•°å™¨ç®¡ç† retain:è¡¨ç¤ºå®žä¾‹å˜é‡å¯¹ä¼ å…¥çš„å¯¹è±¡è¦æœ‰æ‰€æœ‰æƒå…³ç³»ï¼Œä¹Ÿå°±æ˜¯å¼ºå¼•ç”¨ strong:å¼ºå¼•ç”¨, ARCåŽç”¨äºŽå–ä»£retainçš„ï¼Œä½œç”¨ç­‰åŒäºŽretain weak:å¼±å¼•ç”¨ã€‚å½“ä¼ å…¥çš„å¯¹è±¡è¢«é‡Šæ”¾åŽï¼Œç”¨weakå£°æ˜Žçš„å±žæ€§ä¼šæŒ‡å‘nil unsafe_unretained:è·Ÿassignç›¸ä¼¼ï¼Œä¸åŒçš„æ˜¯å¯ä»¥ä¿®é¥°ç±»ï¼Œä¸å®‰å…¨ï¼æ…Žç”¨ copy: æ·±æ‹·è´ï¼Œå†…å­˜æ‹·è´ï¼å¸¸ç”¨äºŽä¿®é¥° NSStringï¼ŒNSArray,NSDictionaryç­‰æœ‰å¯å˜å­ç±»åž‹çš„æ•°æ® å¸¸è§é—®é¢˜unsafe_unretainedã€weakã€assign çš„åŒºåˆ«ï¼Ÿ ä¸‰è€…éƒ½ä¸ä¼šå¯¹å¼•ç”¨è®¡æ•°å™¨è¿›è¡Œæ“ä½œï¼Œå±žæ€§å’Œå®žä¾‹å¯¹è±¡éƒ½æ²¡æœ‰â€œå¼ºâ€å…³ç³» assign åªèƒ½ä¿®é¥°å€¼ç±»åž‹ï¼Œå…¶å®ƒä¸¤ä¸ªå¯ä»¥ä¿®é¥°ç±» weakå±žæ€§å½“å®žä¾‹å¯¹è±¡é”€æ¯æ—¶ä¼šè‡ªåŠ¨ç½®ä¸ºnilä¸ä¼šäº§ç”Ÿé‡ŽæŒ‡é’ˆï¼Œè€Œassignå’Œunsafe_unretainedå½“å®žä¾‹å¯¹è±¡é”€æ¯æ—¶ä¸åšä»»ä½•æ“ä½œï¼Œå¯èƒ½å­˜åœ¨é‡ŽæŒ‡é’ˆï¼Œç”šè‡³é€ æˆCrash weakæ˜¯ARCæ‰æœ‰çš„ï¼Œå…¶å®ƒä¸¤ä¸ªä¸€ç›´éƒ½æœ‰ delegateä½¿ç”¨assignè¿˜æ˜¯weakï¼Œä¸ºä»€ä¹ˆï¼Ÿç†è®ºä¸Šæ¥è¯´ï¼Œä¸¤è€…éƒ½æ˜¯å¯ä»¥ä½¿ç”¨çš„ï¼Œå…¶ä¸€ï¼Œéƒ½ä¸ä¼šæ“ä½œdelegateçš„å¼•ç”¨è®¡æ•°å™¨ï¼Œä¸æ˜¯å¼ºå¼•ç”¨å¯¹è±¡ã€‚å…¶äºŒï¼Œåœ¨å®žé™…å¼€å‘ä¸­ï¼Œå‡ ä¹Žæ‰€æœ‰åœºæ™¯ä¸‹ï¼Œdelegateæ‰€æŒ‡å‘çš„å¯¹è±¡Açš„ç”Ÿå­˜æœŸéƒ½ä¼šè¢«delegateå˜é‡Bè‡ªèº«çš„ç”Ÿå­˜æœŸè¦†ç›–ï¼Œä¹Ÿå°±æ˜¯è¯´Aåœ¨ä½¿ç”¨Bçš„è¿‡ç¨‹ä¸­ï¼ŒBéƒ½æ˜¯å­˜åœ¨çš„ï¼Œå› æ­¤ä½¿ç”¨assignä¹Ÿä¸ä¼šæœ‰é—®é¢˜ã€‚ä½†æ˜¯ï¼Œç”±äºŽassignä¸ä¼šå¤„ç†delegateè¢«é‡Šæ”¾åŽçš„æƒ…å†µï¼Œä¸Šè¿°çš„ä¹Ÿåªæ˜¯å¤§éƒ¨åˆ†æƒ…å†µï¼Œä¸æŽ’é™¤å¯èƒ½ä¼šå‡ºçŽ°delegateè¢«é‡Šæ”¾äº†è€ŒAè¿˜åœ¨ä½¿ç”¨ï¼Œäº§ç”Ÿé‡ŽæŒ‡é’ˆé”™è¯¯ï¼Œè€Œweakæ­£å¥½ä¼šå¤„ç†è¿™ä¸ªæƒ…å†µï¼Œå› æ­¤æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨weakæ¥ä¿®é¥°delegateï¼Œä¼šæ›´åŠ å®‰å…¨ selfå¯¹è±¡æ˜¯è¢«strongï¼Œweakè¿˜æ˜¯å…¶ä»–å…³é”®å­—ä¿®é¥°çš„ï¼Ÿé€šè¿‡ æŸ¥é˜…clangæ–‡æ¡£ï¼Œæˆ‘ä»¬å‘çŽ°äº†å…³äºŽselfçš„è§£é‡Šï¼š1234The self parameter variable of an Objective-C method is never actually retained by the implementation. It is undefined behavior, or at least dangerous, to cause an object to be deallocated during a message send to that object.To make this safe, for Objective-C instance methods self is implicitly const unless the method is in the init family. Further, self is always implicitly const within a class method.RationaleThe cost of retaining self in all methods was found to be prohibitive, as it tends to be live across calls, preventing the optimizer from proving that the retain and release are unnecessary â€” for good reason, as itâ€™s quite possible in theory to cause an object to be deallocated during its execution without this retain and release. Since itâ€™s extremely uncommon to actually do so, even unintentionally, and since thereâ€™s no natural way for the programmer to remove this retain/release pair otherwise (as there is for other parameters by, say, making the variable __unsafe_unretained), we chose to make this optimizing assumption and shift some amount of risk to the user. ä¸Šè¿°ï¼Œselfæ—¢ä¸æ˜¯strongä¹Ÿä¸æ˜¯weakï¼Œè€Œæ˜¯è¢«unsafe_unretainedä¿®é¥°çš„ï¼Œå› æ­¤è¦æ±‚æˆ‘ä»¬è°ƒç”¨çš„æ—¶å€™ä¿è¯selfæ˜¯å­˜åœ¨çš„ï¼Œå¦åˆ™å¯èƒ½ä¼šå¼•èµ·æ— æ³•é¢„æ–™çš„crashã€‚è¿™æ ·è®¾è®¡çš„åŽŸå› æ˜¯å› ä¸ºåœ¨å¯¹è±¡æ–¹æ³•è°ƒç”¨æ—¶ï¼Œæˆ‘ä»¬ä¸€å®šæ˜¯ä¼šæŠŠselfä¼ é€’è¿›åŽ»ï¼Œå¹¶ä¸”åœ¨ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹åšä¸ºè°ƒç”¨æ–¹ï¼Œæˆ‘ä»¬ä¸ä¼šæŠŠselfé‡Šæ”¾æŽ‰ï¼Œå¦‚æžœä¸ºäº†å¤„ç†ä¸åˆ°1%æƒ…å†µä¸‹çš„å¼‚å¸¸è€Œåœ¨æ–¹æ³•æ‰§è¡Œæ—¶å¢žåŠ retainå’Œreleaseè¿›è¡Œä¿æŠ¤çš„è¯ï¼Œä¼šå¯¹æ€§èƒ½æœ‰é‡å¤§å½±å“ï¼Œå› æ­¤ARCè®¾è®¡ä¹Ÿå°±æ²¡æœ‰å¸®æˆ‘ä»¬å¤„ç†ï¼Œéœ€è¦è°ƒç”¨æ–¹è‡ªè¡Œä¿è¯selfçš„å­˜åœ¨ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽŸåˆ›</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[UITableViewä½¿ç”¨]]></title>
    <url>%2F2014%2F07%2F22%2FUITableView%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[1.UITableViewçš„datasourceå®žçŽ°ï¼š1234567891011121314151617181920212223242526272829303132//å›žè°ƒèŽ·å–æ¯ä¸ªsectionä¸­çš„cellçš„è¡Œæ•°- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section//å›žè°ƒèŽ·å–æ¯ä¸ªuitableviewcellï¼Œåªæœ‰å½“éœ€è¦æ˜¾ç¤ºçš„cellåœ¨tableçš„å¯è§†åŒºåŸŸå†…æ‰è¢«å›žè°ƒ- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath//å›žè°ƒèŽ·å–tableçš„sectionæ•°é‡- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView//å›žè°ƒèŽ·å–tableçš„æ¯ä¸ªsectionçš„headeræ ‡é¢˜- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section//å›žè°ƒèŽ·å–tableçš„æ¯ä¸ªsectionçš„footeræ ‡é¢˜- (NSString *)tableView:(UITableView *)tableView titleForFooterInSection:(NSInteger)section//å›žè°ƒåˆ¤æ–­æŒ‡å®šçš„cellæ˜¯å¦èƒ½æœ‰ç¼–è¾‘çŠ¶æ€- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath//å›žè°ƒåˆ¤æ–­æŒ‡å®šçš„cellèƒ½å¦è¢«ç§»åŠ¨å½“è¿›å…¥ç¼–è¾‘æ¨¡å¼çš„æ—¶å€™- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath//å›žè°ƒèŽ·å–tableå³è¾¹çš„ç´¢å¼•æ å†…å®¹- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView//å½“ç‚¹å‡»å³è¾¹ç´¢å¼•æ æ—¶æ‰§è¡Œçš„å›žè°ƒï¼Œå¯ä»¥æ ¹æ®ç‚¹å‡»çš„titleå€¼è¿”å›žåº”è¯¥è·³åˆ°ç¬¬å‡ ä¸ªsection- (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index//å½“æ‰€æœ‰ç›¸å…³ç¼–è¾‘æ¨¡å¼çš„å›žè°ƒï¼Œåªå®žçŽ°è¯¥å›žè°ƒæ—¶é»˜è®¤èƒ½æ»‘åŠ¨cellå‡ºçŽ°åˆ é™¤æŒ‰é’®ã€‚å½“å’Œå…¶ä»–ç›¸å…³çš„ç¼–è¾‘æ¨¡å¼å›žè°ƒæ··åˆä½¿ç”¨åˆ†åˆ«æœ‰ç§»åŠ¨ï¼Œæ’å…¥ï¼Œåˆ é™¤ç­‰åŠŸèƒ½- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath//å½“è¿›å…¥çš„æ˜¯ç§»åŠ¨çš„ç¼–è¾‘æ¨¡å¼æ—¶ï¼Œå®žçŽ°è¯¥å›žè°ƒè¿›è¡Œç§»åŠ¨cellå’Œæ•°æ®çš„æ›´æ–°- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)sourceIndexPath toIndexPath:(NSIndexPath *)destinationIndexPath 2.UITableViewçš„delegateå®žçŽ°ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394//æ¯ä¸ªcellå°†è¦å‘ˆçŽ°æ—¶å›žè°ƒ- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath//æ¯ä¸ªsectionçš„headerå°†è¦å‘ˆçŽ°æ—¶å›žè°ƒ- (void)tableView:(UITableView *)tableView willDisplayHeaderView:(UIView *)view forSection:(NSInteger)section NS_AVAILABLE_IOS(6_0)//æ¯ä¸ªsectionçš„footerå°†è¦å‘ˆçŽ°æ—¶å›žè°ƒ- (void)tableView:(UITableView *)tableView willDisplayFooterView:(UIView *)view forSection:(NSInteger)section NS_AVAILABLE_IOS(6_0)//æ¯ä¸ªcellå‘ˆçŽ°å®Œæ¯•åŽå›žè°ƒ- (void)tableView:(UITableView *)tableView didEndDisplayingCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath*)indexPath NS_AVAILABLE_IOS(6_0)//æ¯ä¸ªsectionçš„headerå‘ˆçŽ°å®Œæ¯•åŽå›žè°ƒ- (void)tableView:(UITableView *)tableView didEndDisplayingHeaderView:(UIView *)view forSection:(NSInteger)section NS_AVAILABLE_IOS(6_0)//æ¯ä¸ªsectionçš„footerå‘ˆçŽ°å®Œæ¯•åŽå›žè°ƒ- (void)tableView:(UITableView *)tableView didEndDisplayingFooterView:(UIView *)view forSection:(NSInteger)section NS_AVAILABLE_IOS(6_0)//å›žè°ƒè®¾ç½®æ¯è¡Œçš„é«˜åº¦ï¼Œå¦‚æžœè¦è‡ªé€‚åº”è°ƒæ•´cellçš„é«˜åº¦ï¼Œåˆ™å¿…é¡»è¦å®žçŽ°è¯¥å›žè°ƒï¼Œè¿”å›žè°ƒæ•´åŽçš„cellé«˜åº¦- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath//å›žè°ƒè®¾ç½®æ¯ä¸ªsectionçš„headeré«˜åº¦ï¼Œå¦‚æžœè¦è‡ªé€‚åº”è°ƒæ•´headerçš„é«˜åº¦ï¼Œåˆ™å¿…é¡»è¦å®žçŽ°è¯¥å›žè°ƒï¼Œè¿”å›žè°ƒæ•´åŽçš„headeré«˜åº¦- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section//å›žè°ƒè®¾ç½®æ¯ä¸ªsectionçš„footeré«˜åº¦ï¼Œå¦‚æžœè¦è‡ªé€‚åº”è°ƒæ•´footerçš„é«˜åº¦ï¼Œåˆ™å¿…é¡»è¦å®žçŽ°è¯¥å›žè°ƒï¼Œè¿”å›žè°ƒæ•´åŽçš„footeré«˜åº¦- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section//å›žè°ƒè®¾ç½®æ¯ä¸ªsectionçš„headerè‡ªå®šä¹‰view- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section//å›žè°ƒè®¾ç½®æ¯ä¸ªsectionçš„footerè‡ªå®šä¹‰view- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section//å›žè°ƒè®¾ç½®æ¯è¡Œæœ€å³è¾¹çš„è¾…åŠ©æŒ‰é’®çš„æ ·å¼/*typedef NS_ENUM(NSInteger, UITableViewCellAccessoryType) &#123;UITableViewCellAccessoryNone, // don&apos;t show any accessory viewUITableViewCellAccessoryDisclosureIndicator, // regular chevron. doesn&apos;t trackUITableViewCellAccessoryDetailDisclosureButton, // blue button w/ chevron. tracksUITableViewCellAccessoryCheckmark // checkmark. doesn&apos;t track&#125;;*/- (UITableViewCellAccessoryType)tableView:(UITableView *)tableView accessoryTypeForRowWithIndexPath:(NSIndexPath *)indexPath NS_DEPRECATED_IOS(2_0, 3_0)//å›žè°ƒè®¾ç½®è¾…åŠ©æŒ‰é’®è¢«ç‚¹å‡»åŽçš„äº‹ä»¶- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath//å›žè°ƒè®¾ç½®æŸè¡Œæ˜¯å¦å½“è¢«ç‚¹å‡»åŽå¤„äºŽé«˜äº®çŠ¶æ€- (BOOL)tableView:(UITableView *)tableView shouldHighlightRowAtIndexPath:(NSIndexPath *)indexPath NS_AVAILABLE_IOS(6_0)//å›žè°ƒå½“æŸè¡Œå¤„äºŽé«˜äº®çŠ¶æ€æ—¶çš„è¡Œä¸º- (void)tableView:(UITableView *)tableView didHighlightRowAtIndexPath:(NSIndexPath *)indexPath NS_AVAILABLE_IOS(6_0)//å›žè°ƒå½“æŸè¡Œå¤±åŽ»é«˜äº®çŠ¶æ€æ—¶çš„è¡Œä¸º- (void)tableView:(UITableView *)tableView didUnhighlightRowAtIndexPath:(NSIndexPath *)indexPath NS_AVAILABLE_IOS(6_0)//å›žè°ƒæŸè¡Œå°†è¦è¢«é€‰ä¸­çš„è¡Œä¸º- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath//å›žè°ƒæŸè¡Œå°†è¦è¢«å–æ¶ˆé€‰ä¸­çš„è¡Œä¸º- (NSIndexPath *)tableView:(UITableView *)tableView willDeselectRowAtIndexPath:(NSIndexPath *)indexPath NS_AVAILABLE_IOS(3_0)//å›žè°ƒæŸè¡Œå·²ç»è¢«é€‰ä¸­ç‚¹å‡»çš„è¡Œä¸º- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath//å›žè°ƒæŸè¡Œå·²ç»å–æ¶ˆé€‰ä¸­çš„è¡Œä¸º- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath NS_AVAILABLE_IOS(3_0)//å›žè°ƒè®¾ç½®æŸè¡Œè¿›å…¥äº†å“ªç§ç¼–è¾‘æ¨¡å¼- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath//å›žè°ƒè®¾ç½®æŸè¡Œè¿›å…¥åˆ é™¤æ¨¡å¼çš„åˆ é™¤æŒ‰é’®åå­—- (NSString *)tableView:(UITableView *)tableView titleForDeleteConfirmationButtonForRowAtIndexPath:(NSIndexPath *)indexPath NS_AVAILABLE_IOS(3_0)//å›žè°ƒè®¾ç½®è¿›å…¥ç¼–è¾‘æ¨¡å¼çš„è¡Œèƒ½å¦ç¼©è¿›- (BOOL)tableView:(UITableView *)tableView shouldIndentWhileEditingRowAtIndexPath:(NSIndexPath *)indexPath//å›žè°ƒå°†è¦è¿›å…¥ç¼–è¾‘æ¨¡å¼çš„è¡Œä¸º- (void)tableView:(UITableView*)tableView willBeginEditingRowAtIndexPath:(NSIndexPath *)indexPath//å›žè°ƒå®Œæˆç¼–è¾‘æ¨¡å¼çš„è¡Œä¸º- (void)tableView:(UITableView*)tableView didEndEditingRowAtIndexPath:(NSIndexPath *)indexPath//å›žè°ƒè®¾ç½®æŸè¡Œçš„ç¼©è¿›çº§åˆ«- (NSInteger)tableView:(UITableView *)tableView indentationLevelForRowAtIndexPath:(NSIndexPath *)indexPath//å›žè°ƒè®¾ç½®æŸè¡Œè¢«é•¿æŒ‰æ˜¯å¦å‡ºçŽ°èœå•æ - (BOOL)tableView:(UITableView *)tableView shouldShowMenuForRowAtIndexPath:(NSIndexPath *)indexPath NS_AVAILABLE_IOS(5_0)//å›žè°ƒè®¾ç½®èœå•æ æ˜¯å¦æ˜¾ç¤ºå“ªäº›èœå•æ é€‰é¡¹- (BOOL)tableView:(UITableView *)tableView canPerformAction:(SEL)action forRowAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender NS_AVAILABLE_IOS(5_0)//å›žè°ƒç‚¹å‡»èœå•æ é€‰é¡¹è§¦å‘çš„äº‹ä»¶- (void)tableView:(UITableView *)tableView performAction:(SEL)action forRowAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender NS_AVAILABLE_IOS(5_0) 3.UITableViewå¸¸ç”¨æˆå‘˜æ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051//é€šè¿‡indexpathèŽ·å–æŒ‡å®šè¡Œçš„uitableviewcell[_table cellForRowAtIndexPath:indexPath];//åˆ é™¤æŸè¡Œå¹¶å¸¦ä¸ŠåŠ¨ç”»[_table deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];//åˆ é™¤æŸä¸ªsectionå¹¶å¸¦ä¸ŠåŠ¨ç”»[_table deleteSections:[NSIndexSet indexSetWithIndex:1] withRowAnimation:UITableViewRowAnimationMiddle];//å–æ¶ˆè¢«é€‰ä¸­çš„æŸè¡Œ[_table deselectRowAtIndexPath:indexPath animated:YES];//è¿”å›žæŸä¸ªsectionçš„headerè‡ªå®šä¹‰view[_table headerViewForSection:indexPath.row];//è¿”å›žæŸä¸ªsectionçš„footerè‡ªå®šä¹‰view[_table footerViewForSection:indexPath.row];//é€šè¿‡æŒ‡å®šçš„cellèŽ·å–cellæ‰€åœ¨çš„è¡Œæ•°[_table indexPathForCell:cell];//é€šè¿‡åœ¨tableçš„ä½ç½®åæ ‡è¿”å›žè¯¥åæ ‡æ‰€åœ¨çš„cellçš„è¡Œæ•°[_table indexPathForRowAtPoint:CGPointMake(0, 0)];//è¿”å›žè¢«é€‰ä¸­çš„cellçš„è¡Œæ•°[_table indexPathForSelectedRow];//è¿”å›žtableä¸­ä¸€ä¸ªèŒƒå›´åŒºåŸŸçš„cellçš„è¡Œæ•°[_table indexPathsForRowsInRect:CGRectMake(0, 0, 100, 100)];//è¿”å›žtableè§†è§‰åŒºåŸŸå†…çš„cellçš„è¡Œæ•°[_table indexPathsForVisibleRows];//ä»¥åŠ¨ç”»æ–¹å¼åœ¨æŒ‡å®šçš„ä½ç½®æ’å…¥cell[_table insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationLeft];//ä»¥åŠ¨ç”»æ–¹å¼åœ¨æŒ‡å®šä½ç½®æ’å…¥section[_table insertSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationRight];//è¿”å›žæŒ‡å®šä½ç½®çš„cellçš„rectå±žæ€§[_table rectForRowAtIndexPath:indexPath];//é‡æ–°åŠ è½½tableï¼Œé‡æ–°æ‰§è¡Œæ‰€æœ‰å›žè°ƒæ–¹æ³•[_table reloadData];//æŒ‡å®šé‡æ–°åŠ è½½tableçš„æŸäº›è¡Œï¼Œå¹¶ä»¥åŠ¨ç”»æ–¹å¼[_table reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationTop];//é‡æ–°åŠ è½½ç´¢å¼•æ [_table reloadSectionIndexTitles];//æŒ‡å®šé‡æ–°åŠ è½½tableçš„sectionï¼Œå¹¶ä»¥åŠ¨ç”»æ–¹å¼[_table reloadSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationFade];//æ»‘åŠ¨tableåˆ°é¡¶éƒ¨[_table scrollsToTop];//å¸¦åŠ¨ç”»æ–¹å¼æ»‘åŠ¨tableåˆ°æŒ‡å®šåŒºé—´[_table scrollRectToVisible:CGRectMake(0, 0, 100, 100) animated:YES];//å¸¦åŠ¨ç”»æ–¹å¼æ»‘åŠ¨tableåˆ°æŒ‡å®šä½ç½®é™„è¿‘[_table scrollToNearestSelectedRowAtScrollPosition:UITableViewScrollPositionBottom animated:YES];//ä»¥åŠ¨ç”»æ–¹å¼ä»Žtableçš„å“ªä¸ªæŒ‡å®šä½ç½®æ»‘åŠ¨åˆ°æŒ‡å®šçš„è¡Œ[_table scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionBottom animated:YES];//è¿”å›žtableå¯è§†åŒºåŸŸå†…æ‰€æœ‰çš„cell[_table visibleCells];//beginupdateså’Œendupdatesè¦æˆå¯¹å‡ºçŽ°ï¼Œå¯¹äºŽåŒæ—¶æ“ä½œå¤šä¸ªinsertï¼Œdeleteï¼Œselectionçš„åŠ¨ç”»æ“ä½œéœ€è¦æŠŠå®ƒä»¬æ”¾åœ¨beginupdateså’Œendupdatesä¸­é—´æ‰§è¡Œï¼Œè¿™æ ·å¯ä»¥æŠŠå¤šä¸ªåŠ¨ç”»åˆæˆä¸€ä¸ªåŠ¨ç”»æ¥å¤„ç†ï¼Œå®žçŽ°åŽŸå­æ€§ï¼Œé™ä½Žå‡ºé”™çš„æœºçŽ‡[_table beginUpdates];[_table endUpdates]; è½¬è½½è‡ªï¼šhttps://blog.csdn.net/kingsley_cxz/article/details/9123959]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>UI</tag>
      </tags>
  </entry>
</search>
